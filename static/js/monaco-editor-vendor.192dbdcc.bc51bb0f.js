"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[235],{28330:function(e,t,n){n.d(t,{M$:function(){return a},YA:function(){return u}});var i=n(67591),r=n(99616),o=n(91976),s=n(22951),a=(0,o.Z)((function e(t,n,i,r){(0,s.Z)(this,e),this.range=t,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=i,this.isInvalid=r})),u=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r,o,a,u,l){var h;return(0,s.Z)(this,n),(h=t.call(this,e,i,r,o,a,u)).minVisibleColumnIndentation=l,h}return(0,o.Z)(n)}(function(){function e(t,n,i,r,o,a){(0,s.Z)(this,e),this.range=t,this.openingBracketRange=n,this.closingBracketRange=i,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=a}return(0,o.Z)(e,[{key:"openingBracketInfo",get:function(){return this.bracketPairNode.openingBracket.bracketInfo}}]),e}())},98800:function(e,t,n){n.d(t,{CZ:function(){return c},D8:function(){return f},Jx:function(){return s},Tx:function(){return h},dQ:function(){return d},fV:function(){return g},gk:function(){return a},lN:function(){return l},rU:function(){return u}});var i=n(60726),r=n(91976),o=n(22951),s=(0,r.Z)((function e(){(0,o.Z)(this,e),this.changeType=1})),a=function(){function e(t,n,i,r,s){(0,o.Z)(this,e),this.ownerId=t,this.lineNumber=n,this.column=i,this.options=r,this.order=s}return(0,r.Z)(e,null,[{key:"applyInjectedText",value:function(e,t){if(!t||0===t.length)return e;var n,r="",o=0,s=(0,i.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;r+=e.substring(o,a.column-1),o=a.column-1,r+=a.options.content}}catch(u){s.e(u)}finally{s.f()}return r+=e.substring(o)}},{key:"fromDecorations",value:function(t){var n,r=[],o=(0,i.Z)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.options.before&&s.options.before.content.length>0&&r.push(new e(s.ownerId,s.range.startLineNumber,s.range.startColumn,s.options.before,0)),s.options.after&&s.options.after.content.length>0&&r.push(new e(s.ownerId,s.range.endLineNumber,s.range.endColumn,s.options.after,1))}}catch(a){o.e(a)}finally{o.f()}return r.sort((function(e,t){return e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber})),r}}]),e}(),u=(0,r.Z)((function e(t,n,i){(0,o.Z)(this,e),this.changeType=2,this.lineNumber=t,this.detail=n,this.injectedText=i})),l=(0,r.Z)((function e(t,n){(0,o.Z)(this,e),this.changeType=3,this.fromLineNumber=t,this.toLineNumber=n})),h=(0,r.Z)((function e(t,n,i,r){(0,o.Z)(this,e),this.changeType=4,this.injectedTexts=r,this.fromLineNumber=t,this.toLineNumber=n,this.detail=i})),c=(0,r.Z)((function e(){(0,o.Z)(this,e),this.changeType=5})),d=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.changes=t,this.versionId=n,this.isUndoing=i,this.isRedoing=r,this.resultingSelection=null}return(0,r.Z)(e,[{key:"containsEvent",value:function(e){for(var t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}}],[{key:"merge",value:function(t,n){return new e([].concat(t.changes).concat(n.changes),n.versionId,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)}}]),e}(),f=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.changes=t})),g=function(){function e(t,n){(0,o.Z)(this,e),this.rawContentChangedEvent=t,this.contentChangedEvent=n}return(0,r.Z)(e,[{key:"merge",value:function(t){var n=d.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),i=e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent);return new e(n,i)}}],[{key:"_mergeChangeEvents",value:function(e,t){var n=[].concat(e.changes).concat(t.changes),i=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:n,eol:i,isEolChange:e.isEolChange&&t.isEolChange,versionId:r,isUndoing:o,isRedoing:s,isFlush:a}}}]),e}()},17570:function(e,t,n){n.d(t,{UO:function(){return s},s6:function(){return i},vW:function(){return a}});var i,r=n(91976),o=n(22951);!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(i||(i={}));var s=(0,r.Z)((function e(t,n,i,r,s,a){if((0,o.Z)(this,e),this.visibleColumn=t,this.column=n,this.className=i,this.horizontalLine=r,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=a,-1!==t===(-1!==n))throw new Error})),a=(0,r.Z)((function e(t,n){(0,o.Z)(this,e),this.top=t,this.endColumn=n}))},59274:function(e,t,n){n.d(t,{R:function(){return f}});var i=n(43243),r=n(27597),o=n(67591),s=n(99616),a=n(11092),u=n(22951),l=n(91976),h=n(68515),c=n(59652),d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},f=function(){function e(){(0,u.Z)(this,e),this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new h.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}return(0,l.Z)(e,[{key:"handleChange",value:function(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}},{key:"register",value:function(e,t){var n=this;return this._tokenizationSupports.set(e,t),this.handleChange([e]),(0,c.OF)((function(){n._tokenizationSupports.get(e)===t&&(n._tokenizationSupports.delete(e),n.handleChange([e]))}))}},{key:"get",value:function(e){return this._tokenizationSupports.get(e)||null}},{key:"registerFactory",value:function(e,t){var n,i=this;null===(n=this._factories.get(e))||void 0===n||n.dispose();var r=new g(this,e,t);return this._factories.set(e,r),(0,c.OF)((function(){var t=i._factories.get(e);t&&t===r&&(i._factories.delete(e),t.dispose())}))}},{key:"getOrCreate",value:function(e){return d(this,void 0,void 0,(0,a.Z)().mark((function t(){var n,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.get(e))){t.next=3;break}return t.abrupt("return",n);case 3:if((i=this._factories.get(e))&&!i.isResolved){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,i.resolve();case 8:return t.abrupt("return",this.get(e));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"isResolved",value:function(e){if(this.get(e))return!0;var t=this._factories.get(e);return!(t&&!t.isResolved)}},{key:"setColorMap",value:function(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}},{key:"getColorMap",value:function(){return this._colorMap}},{key:"getDefaultBackground",value:function(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}]),e}(),g=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,r){var o;return(0,u.Z)(this,n),(o=t.call(this))._registry=e,o._languageId=i,o._factory=r,o._isDisposed=!1,o._resolvePromise=null,o._isResolved=!1,o}return(0,l.Z)(n,[{key:"isResolved",get:function(){return this._isResolved}},{key:"dispose",value:function(){this._isDisposed=!0,(0,i.Z)((0,r.Z)(n.prototype),"dispose",this).call(this)}},{key:"resolve",value:function(){return d(this,void 0,void 0,(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._resolvePromise||(this._resolvePromise=this._create()),e.abrupt("return",this._resolvePromise);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"_create",value:function(){return d(this,void 0,void 0,(0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._factory.tokenizationSupport;case 2:t=e.sent,this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t));case 5:case"end":return e.stop()}}),e,this)})))}}]),n}(c.JT)},86819:function(e,t,n){n.d(t,{N:function(){return s}});var i=n(22951),r=n(91976),o=function(){function e(t,n){(0,i.Z)(this,e),this._startLineNumber=t,this._tokens=n}return(0,r.Z)(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._startLineNumber+this._tokens.length-1}},{key:"getLineTokens",value:function(e){return this._tokens[e-this._startLineNumber]}},{key:"appendLineTokens",value:function(e){this._tokens.push(e)}}]),e}(),s=function(){function e(){(0,i.Z)(this,e),this._tokens=[]}return(0,r.Z)(e,[{key:"add",value:function(e,t){if(this._tokens.length>0){var n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new o(e,[t]))}},{key:"finalize",value:function(){return this._tokens}}]),e}()},23263:function(e,t,n){n.d(t,{l:function(){return d}});var i=n(22951),r=n(91976),o=n(88648),s=n(99924),a=n(21605),u=new Uint32Array(0).buffer,l=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,null,[{key:"deleteBeginning",value:function(t,n){return null===t||t===u?t:e.delete(t,0,n)}},{key:"deleteEnding",value:function(t,n){if(null===t||t===u)return t;var i=h(t),r=i[i.length-2];return e.delete(t,n,r)}},{key:"delete",value:function(e,t,n){if(null===e||e===u||t===n)return e;var i=h(e),r=i.length>>>1;if(0===t&&i[i.length-2]===n)return u;var o,s,l=a.A.findIndexInTokensArray(i,t),c=l>0?i[l-1<<1]:0;if(n<i[l<<1]){for(var d=n-t,f=l;f<r;f++)i[f<<1]-=d;return e}c!==t?(i[l<<1]=t,o=l+1<<1,s=t):(o=l<<1,s=c);for(var g=n-t,v=l+1;v<r;v++){var m=i[v<<1]-g;m>s&&(i[o++]=m,i[o++]=i[1+(v<<1)],s=m)}if(o===i.length)return e;var p=new Uint32Array(o);return p.set(i.subarray(0,o),0),p.buffer}},{key:"append",value:function(e,t){if(t===u)return e;if(e===u)return t;if(null===e)return e;if(null===t)return null;var n=h(e),i=h(t),r=i.length>>>1,o=new Uint32Array(n.length+i.length);o.set(n,0);for(var s=n.length,a=n[n.length-2],l=0;l<r;l++)o[s++]=i[l<<1]+a,o[s++]=i[1+(l<<1)];return o.buffer}},{key:"insert",value:function(e,t,n){if(null===e||e===u)return e;var i=h(e),r=i.length>>>1,o=a.A.findIndexInTokensArray(i,t);o>0&&(i[o-1<<1]===t&&o--);for(var s=o;s<r;s++)i[s<<1]+=n;return e}}]),e}();function h(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var c=n(95971),d=function(){function e(t){(0,i.Z)(this,e),this._lineTokens=[],this._len=0,this._languageIdCodec=t}return(0,r.Z)(e,[{key:"flush",value:function(){this._lineTokens=[],this._len=0}},{key:"hasTokens",get:function(){return this._lineTokens.length>0}},{key:"getTokens",value:function(e,t,n){var i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==u)return new a.A(h(i),n,this._languageIdCodec);var r=new Uint32Array(2);return r[0]=n.length,r[1]=f(this._languageIdCodec.encodeLanguageId(e)),new a.A(r,n,this._languageIdCodec)}},{key:"_ensureLine",value:function(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}},{key:"_deleteLines",value:function(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}},{key:"_insertLines",value:function(e,t){if(0!==t){for(var n=[],i=0;i<t;i++)n[i]=null;this._lineTokens=o.Zv(this._lineTokens,e,n),this._len+=t}}},{key:"setTokens",value:function(t,n,i,r,o){var s=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),i,r);this._ensureLine(n);var a=this._lineTokens[n];return this._lineTokens[n]=s,!!o&&!e._equals(a,s)}},{key:"acceptEdit",value:function(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new s.L(e.startLineNumber,e.startColumn),t,n)}},{key:"_acceptDeleteRange",value:function(e){var t=e.startLineNumber-1;if(!(t>=this._len))if(e.startLineNumber!==e.endLineNumber){this._lineTokens[t]=l.deleteEnding(this._lineTokens[t],e.startColumn-1);var n=e.endLineNumber-1,i=null;n<this._len&&(i=l.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=l.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}else{if(e.startColumn===e.endColumn)return;this._lineTokens[t]=l.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1)}}},{key:"_acceptInsertText",value:function(e,t,n){if(0!==t||0!==n){var i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=l.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=l.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=l.insert(this._lineTokens[i],e.column-1,n))}}},{key:"setMultilineTokens",value:function(e,t){if(0===e.length)return{changes:[]};for(var n=[],i=0,r=e.length;i<r;i++){for(var o=e[i],s=0,a=0,u=!1,l=o.startLineNumber;l<=o.endLineNumber;l++){if(u)this.setTokens(t.getLanguageId(),l-1,t.getLineLength(l),o.getLineTokens(l),!1),a=l;else this.setTokens(t.getLanguageId(),l-1,t.getLineLength(l),o.getLineTokens(l),!0)&&(u=!0,s=l,a=l)}u&&n.push({fromLineNumber:s,toLineNumber:a})}return{changes:n}}}],[{key:"_massageTokens",value:function(e,t,n){var i=n?h(n):null;if(0===t){var r=!1;if(i&&i.length>1&&(r=c.N.getLanguageId(i[1])!==e),!r)return u}if(!i||0===i.length){var o=new Uint32Array(2);return o[0]=t,o[1]=f(e),o.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}},{key:"_equals",value:function(e,t){if(!e||!t)return!e&&!t;var n=h(e),i=h(t);if(n.length!==i.length)return!1;for(var r=0,o=n.length;r<o;r++)if(n[r]!==i[r])return!1;return!0}}]),e}();function f(e){return(32768|e<<0|2<<24|1024)>>>0}},21605:function(e,t,n){n.d(t,{A:function(){return s}});var i=n(22951),r=n(91976),o=n(95971),s=function(){function e(t,n,r){(0,i.Z)(this,e),this._lineTokensBrand=void 0,this._tokens=t,this._tokensCount=this._tokens.length>>>1,this._text=n,this._languageIdCodec=r}return(0,r.Z)(e,[{key:"equals",value:function(t){return t instanceof e&&this.slicedEquals(t,0,this._tokensCount)}},{key:"slicedEquals",value:function(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;for(var i=t<<1,r=i+(n<<1),o=i;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}},{key:"getLineContent",value:function(){return this._text}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getStartOffset",value:function(e){return e>0?this._tokens[e-1<<1]:0}},{key:"getMetadata",value:function(e){return this._tokens[1+(e<<1)]}},{key:"getLanguageId",value:function(e){var t=this._tokens[1+(e<<1)],n=o.N.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}},{key:"getStandardTokenType",value:function(e){var t=this._tokens[1+(e<<1)];return o.N.getTokenType(t)}},{key:"getForeground",value:function(e){var t=this._tokens[1+(e<<1)];return o.N.getForeground(t)}},{key:"getClassName",value:function(e){var t=this._tokens[1+(e<<1)];return o.N.getClassNameFromMetadata(t)}},{key:"getInlineStyle",value:function(e,t){var n=this._tokens[1+(e<<1)];return o.N.getInlineStyleFromMetadata(n,t)}},{key:"getPresentation",value:function(e){var t=this._tokens[1+(e<<1)];return o.N.getPresentationFromMetadata(t)}},{key:"getEndOffset",value:function(e){return this._tokens[e<<1]}},{key:"findTokenIndexAtOffset",value:function(t){return e.findIndexInTokensArray(this._tokens,t)}},{key:"inflate",value:function(){return this}},{key:"sliceAndInflate",value:function(e,t,n){return new a(this,e,t,n)}},{key:"withInserted",value:function(t){if(0===t.length)return this;for(var n=0,i=0,r="",o=new Array,s=0;;){var a=n<this._tokensCount?this._tokens[n<<1]:-1,u=i<t.length?t[i]:null;if(-1!==a&&(null===u||a<=u.offset)){r+=this._text.substring(s,a);var l=this._tokens[1+(n<<1)];o.push(r.length,l),n++,s=a}else{if(!u)break;if(u.offset>s){r+=this._text.substring(s,u.offset);var h=this._tokens[1+(n<<1)];o.push(r.length,h),s=u.offset}r+=u.text,o.push(r.length,u.tokenMetadata),i++}}return new e(new Uint32Array(o),r,this._languageIdCodec)}}],[{key:"createEmpty",value:function(t,n){var i=e.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=t.length,r[1]=i,new e(r,t,n)}},{key:"convertToEndOffset",value:function(e,t){for(var n=(e.length>>>1)-1,i=0;i<n;i++)e[i<<1]=e[i+1<<1];e[n<<1]=t}},{key:"findIndexInTokensArray",value:function(e,t){if(e.length<=2)return 0;for(var n=0,i=(e.length>>>1)-1;n<i;){var r=n+Math.floor((i-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(i=r)}return n}}]),e}();s.defaultTokenMetadata=33587200;var a=function(){function e(t,n,r,o){(0,i.Z)(this,e),this._source=t,this._startOffset=n,this._endOffset=r,this._deltaOffset=o,this._firstTokenIndex=t.findTokenIndexAtOffset(n),this._tokensCount=0;for(var s=this._firstTokenIndex,a=t.getCount();s<a;s++){if(t.getStartOffset(s)>=r)break;this._tokensCount++}}return(0,r.Z)(e,[{key:"getMetadata",value:function(e){return this._source.getMetadata(this._firstTokenIndex+e)}},{key:"getLanguageId",value:function(e){return this._source.getLanguageId(this._firstTokenIndex+e)}},{key:"getLineContent",value:function(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}},{key:"equals",value:function(t){return t instanceof e&&(this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount))}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getForeground",value:function(e){return this._source.getForeground(this._firstTokenIndex+e)}},{key:"getEndOffset",value:function(e){var t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}},{key:"getClassName",value:function(e){return this._source.getClassName(this._firstTokenIndex+e)}},{key:"getInlineStyle",value:function(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}},{key:"getPresentation",value:function(e){return this._source.getPresentation(this._firstTokenIndex+e)}},{key:"findTokenIndexAtOffset",value:function(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}]),e}()},37805:function(e,t,n){n.d(t,{Y:function(){return l}});var i=n(11026),r=n(22951),o=n(91976),s=n(99924),a=n(55597),u=n(92626),l=function(){function e(t,n){(0,r.Z)(this,e),this._startLineNumber=t,this._tokens=n,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}return(0,o.Z)(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._endLineNumber}},{key:"toString",value:function(){return this._tokens.toString(this._startLineNumber)}},{key:"_updateEndLineNumber",value:function(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}},{key:"isEmpty",value:function(){return this._tokens.isEmpty()}},{key:"getLineTokens",value:function(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}},{key:"getRange",value:function(){var e=this._tokens.getRange();return e?new a.e(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}},{key:"removeTokens",value:function(e){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}},{key:"split",value:function(t){var n=t.startLineNumber-this._startLineNumber,r=t.endLineNumber-this._startLineNumber,o=this._tokens.split(n,t.startColumn-1,r,t.endColumn-1),s=(0,i.Z)(o,3),a=s[0],u=s[1],l=s[2];return[new e(this._startLineNumber,a),new e(this._startLineNumber+l,u)]}},{key:"applyEdit",value:function(e,t){var n=(0,u.Q)(t),r=(0,i.Z)(n,3),o=r[0],s=r[1],a=r[2];this.acceptEdit(e,o,s,a,t.length>0?t.charCodeAt(0):0)}},{key:"acceptEdit",value:function(e,t,n,i,r){this._acceptDeleteRange(e),this._acceptInsertText(new s.L(e.startLineNumber,e.startColumn),t,n,i,r),this._updateEndLineNumber()}},{key:"_acceptDeleteRange",value:function(e){if(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){var i=n-t;this._startLineNumber-=i}else{var r=this._tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){var o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}}}},{key:"_acceptInsertText",value:function(e,t,n,i,r){if(0!==t||0!==n){var o=e.lineNumber-this._startLineNumber;if(o<0)this._startLineNumber+=t;else o>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(o,e.column-1,t,n,i,r)}}}],[{key:"create",value:function(t,n){return new e(t,new h(n))}}]),e}(),h=function(){function e(t){(0,r.Z)(this,e),this._tokens=t,this._tokenCount=t.length/4}return(0,o.Z)(e,[{key:"toString",value:function(e){for(var t=[],n=0;n<this._tokenCount;n++)t.push("(".concat(this._getDeltaLine(n)+e,",").concat(this._getStartCharacter(n),"-").concat(this._getEndCharacter(n),")"));return"[".concat(t.join(","),"]")}},{key:"getMaxDeltaLine",value:function(){var e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}},{key:"getRange",value:function(){var e=this._getTokenCount();if(0===e)return null;var t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new a.e(0,t+1,n,i+1)}},{key:"_getTokenCount",value:function(){return this._tokenCount}},{key:"_getDeltaLine",value:function(e){return this._tokens[4*e]}},{key:"_getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"_getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"isEmpty",value:function(){return 0===this._getTokenCount()}},{key:"getLineTokens",value:function(e){for(var t=0,n=this._getTokenCount()-1;t<n;){var i=t+Math.floor((n-t)/2),r=this._getDeltaLine(i);if(r<e)t=i+1;else{if(!(r>e)){for(var o=i;o>t&&this._getDeltaLine(o-1)===e;)o--;for(var s=i;s<n&&this._getDeltaLine(s+1)===e;)s++;return new c(this._tokens.subarray(4*o,4*s+4))}n=i-1}}return this._getDeltaLine(t)===e?new c(this._tokens.subarray(4*t,4*t+4)):null}},{key:"clear",value:function(){this._tokenCount=0}},{key:"removeTokens",value:function(e,t,n,i){for(var r=this._tokens,o=this._tokenCount,s=0,a=!1,u=0,l=0;l<o;l++){var h=4*l,c=r[h],d=r[h+1],f=r[h+2],g=r[h+3];if((c>e||c===e&&f>=t)&&(c<n||c===n&&d<=i))a=!0;else{if(0===s&&(u=c),a){var v=4*s;r[v]=c-u,r[v+1]=d,r[v+2]=f,r[v+3]=g}s++}}return this._tokenCount=s,u}},{key:"split",value:function(t,n,i,r){for(var o=this._tokens,s=this._tokenCount,a=[],u=[],l=a,h=0,c=0,d=0;d<s;d++){var f=4*d,g=o[f],v=o[f+1],m=o[f+2],p=o[f+3];if(g>t||g===t&&m>=n){if(g<i||g===i&&v<=r)continue;l!==u&&(l=u,h=0,c=g)}l[h++]=g-c,l[h++]=v,l[h++]=m,l[h++]=p}return[new e(new Uint32Array(a)),new e(new Uint32Array(u)),c]}},{key:"acceptDeleteRange",value:function(e,t,n,i,r){for(var o=this._tokens,s=this._tokenCount,a=i-t,u=0,l=!1,h=0;h<s;h++){var c=4*h,d=o[c],f=o[c+1],g=o[c+2],v=o[c+3];if(d<t||d===t&&g<=n)u++;else{if(d===t&&f<n)d===i&&g>r?g-=r-n:g=n;else if(d===t&&f===n){if(!(d===i&&g>r)){l=!0;continue}g-=r-n}else if(d<i||d===i&&f<r){if(!(d===i&&g>r)){l=!0;continue}d=t,g=(f=n)+(g-r)}else if(d>i){if(0===a&&!l){u=s;break}d-=a}else{if(!(d===i&&f>=r))throw new Error("Not possible!");e&&0===d&&(f+=e,g+=e),d-=a,f-=r-n,g-=r-n}var m=4*u;o[m]=d,o[m+1]=f,o[m+2]=g,o[m+3]=v,u++}}this._tokenCount=u}},{key:"acceptInsertText",value:function(e,t,n,i,r,o){for(var s=0===n&&1===i&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),a=this._tokens,u=this._tokenCount,l=0;l<u;l++){var h=4*l,c=a[h],d=a[h+1],f=a[h+2];if(!(c<e||c===e&&f<t)){if(c===e&&f===t){if(!s)continue;f+=1}else if(c===e&&d<t&&t<f)0===n?f+=i:f=t;else{if(c===e&&d===t&&s)continue;if(c===e)if(c+=n,0===n)d+=i,f+=i;else{var g=f-d;f=(d=r+(d-t))+g}else c+=n}a[h]=c,a[h+1]=d,a[h+2]=f}}}}]),e}(),c=function(){function e(t){(0,r.Z)(this,e),this._tokens=t}return(0,o.Z)(e,[{key:"getCount",value:function(){return this._tokens.length/4}},{key:"getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"getMetadata",value:function(e){return this._tokens[4*e+3]}}]),e}()},25669:function(e,t,n){n.d(t,{u:function(){return l}});var i=n(60726),r=n(11026),o=n(22951),s=n(91976),a=n(88648),u=n(21605),l=function(){function e(t){(0,o.Z)(this,e),this._pieces=[],this._isComplete=!1,this._languageIdCodec=t}return(0,s.Z)(e,[{key:"flush",value:function(){this._pieces=[],this._isComplete=!1}},{key:"isEmpty",value:function(){return 0===this._pieces.length}},{key:"set",value:function(e,t){this._pieces=e||[],this._isComplete=t}},{key:"setPartial",value:function(e,t){var n=e;if(t.length>0){var i=t[0].getRange(),o=t[t.length-1].getRange();if(!i||!o)return e;n=e.plusRange(i).plusRange(o)}for(var s=null,u=0,l=this._pieces.length;u<l;u++){var h=this._pieces[u];if(!(h.endLineNumber<n.startLineNumber)){if(h.startLineNumber>n.endLineNumber){s=s||{index:u};break}if(h.removeTokens(n),h.isEmpty())this._pieces.splice(u,1),u--,l--;else if(!(h.endLineNumber<n.startLineNumber))if(h.startLineNumber>n.endLineNumber)s=s||{index:u};else{var c=h.split(n),d=(0,r.Z)(c,2),f=d[0],g=d[1];f.isEmpty()?s=s||{index:u}:g.isEmpty()||(this._pieces.splice(u,1,f,g),u++,l++,s=s||{index:u})}}}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=a.Zv(this._pieces,s.index,t)),n}},{key:"isComplete",value:function(){return this._isComplete}},{key:"addSparseTokens",value:function(t,n){if(0===n.getLineContent().length)return n;var i=this._pieces;if(0===i.length)return n;var r=i[e._findFirstPieceWithLine(i,t)].getLineTokens(t);if(!r)return n;for(var o=n.getCount(),s=r.getCount(),a=0,l=[],h=0,c=0,d=function(e,t){e!==c&&(c=e,l[h++]=e,l[h++]=t)},f=0;f<s;f++){for(var g=r.getStartCharacter(f),v=r.getEndCharacter(f),m=r.getMetadata(f),p=((1&m?2048:0)|(2&m?4096:0)|(4&m?8192:0)|(8&m?16384:0)|(16&m?16744448:0)|(32&m?4278190080:0))>>>0,_=~p>>>0;a<o&&n.getEndOffset(a)<=g;)d(n.getEndOffset(a),n.getMetadata(a)),a++;for(a<o&&n.getStartOffset(a)<g&&d(g,n.getMetadata(a));a<o&&n.getEndOffset(a)<v;)d(n.getEndOffset(a),n.getMetadata(a)&_|m&p),a++;if(a<o)d(v,n.getMetadata(a)&_|m&p),n.getEndOffset(a)===v&&a++;else{var L=Math.min(Math.max(0,a-1),o-1);d(v,n.getMetadata(L)&_|m&p)}}for(;a<o;)d(n.getEndOffset(a),n.getMetadata(a)),a++;return new u.A(new Uint32Array(l),n.getLineContent(),this._languageIdCodec)}},{key:"acceptEdit",value:function(e,t,n,r,o){var s,a=(0,i.Z)(this._pieces);try{for(a.s();!(s=a.n()).done;){s.value.acceptEdit(e,t,n,r,o)}}catch(u){a.e(u)}finally{a.f()}}}],[{key:"_findFirstPieceWithLine",value:function(e,t){for(var n=0,i=e.length-1;n<i;){var r=n+Math.floor((i-n)/2);if(e[r].endLineNumber<t)n=r+1;else{if(!(e[r].startLineNumber>t)){for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}i=r-1}}return n}}]),e}()},80629:function(e,t,n){n.d(t,{O:function(){return a}});var i=n(22951),r=n(91976),o=n(67591),s=n(99616),a=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this))._shouldRender=!0,e}return(0,r.Z)(n,[{key:"shouldRender",value:function(){return this._shouldRender}},{key:"forceShouldRender",value:function(){this._shouldRender=!0}},{key:"setShouldRender",value:function(){this._shouldRender=!0}},{key:"onDidRender",value:function(){this._shouldRender=!1}},{key:"onCompositionStart",value:function(e){return!1}},{key:"onCompositionEnd",value:function(e){return!1}},{key:"onConfigurationChanged",value:function(e){return!1}},{key:"onCursorStateChanged",value:function(e){return!1}},{key:"onDecorationsChanged",value:function(e){return!1}},{key:"onFlushed",value:function(e){return!1}},{key:"onFocusChanged",value:function(e){return!1}},{key:"onLanguageConfigurationChanged",value:function(e){return!1}},{key:"onLineMappingChanged",value:function(e){return!1}},{key:"onLinesChanged",value:function(e){return!1}},{key:"onLinesDeleted",value:function(e){return!1}},{key:"onLinesInserted",value:function(e){return!1}},{key:"onRevealRangeRequest",value:function(e){return!1}},{key:"onScrollChanged",value:function(e){return!1}},{key:"onThemeChanged",value:function(e){return!1}},{key:"onTokensChanged",value:function(e){return!1}},{key:"onTokensColorsChanged",value:function(e){return!1}},{key:"onZonesChanged",value:function(e){return!1}},{key:"handleEvents",value:function(e){for(var t=!1,n=0,i=e.length;n<i;n++){var r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}]),n}(n(59652).JT)},66895:function(e,t,n){n.d(t,{Ay:function(){return _},CL:function(){return h},H9:function(){return k},Hf:function(){return L},IN:function(){return s},Ic:function(){return y},JP:function(){return o},K9:function(){return m},Qb:function(){return p},SJ:function(){return c},_0:function(){return d},d8:function(){return f},e$:function(){return u},il:function(){return g},uc:function(){return C},vA:function(){return l},vk:function(){return v},x4:function(){return a}});var i=n(91976),r=n(22951),o=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=0})),s=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=1})),a=function(){function e(t){(0,r.Z)(this,e),this.type=2,this._source=t}return(0,i.Z)(e,[{key:"hasChanged",value:function(e){return this._source.hasChanged(e)}}]),e}(),u=(0,i.Z)((function e(t,n,i){(0,r.Z)(this,e),this.selections=t,this.modelSelections=n,this.reason=i,this.type=3})),l=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.type=4,t?(this.affectsMinimap=t.affectsMinimap,this.affectsOverviewRuler=t.affectsOverviewRuler,this.affectsGlyphMargin=t.affectsGlyphMargin):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0)})),h=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=5})),c=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.type=6,this.isFocused=t})),d=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=7})),f=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=8})),g=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.fromLineNumber=t,this.count=n,this.type=9})),v=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.type=10,this.fromLineNumber=t,this.toLineNumber=n})),m=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.type=11,this.fromLineNumber=t,this.toLineNumber=n})),p=(0,i.Z)((function e(t,n,i,o,s,a,u){(0,r.Z)(this,e),this.source=t,this.minimalReveal=n,this.range=i,this.selections=o,this.verticalType=s,this.revealHorizontal=a,this.scrollType=u,this.type=12})),_=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.type=13,this.scrollWidth=t.scrollWidth,this.scrollLeft=t.scrollLeft,this.scrollHeight=t.scrollHeight,this.scrollTop=t.scrollTop,this.scrollWidthChanged=t.scrollWidthChanged,this.scrollLeftChanged=t.scrollLeftChanged,this.scrollHeightChanged=t.scrollHeightChanged,this.scrollTopChanged=t.scrollTopChanged})),L=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.theme=t,this.type=14})),k=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.type=15,this.ranges=t})),C=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=16})),y=(0,i.Z)((function e(){(0,r.Z)(this,e),this.type=17}))},14133:function(e,t,n){n.d(t,{Kp:function(){return a},k:function(){return h}});var i=n(60726),r=n(22951),o=n(91976),s=n(17224),a=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.startColumn=t,this.endColumn=n,this.className=i,this.type=o,this._lineDecorationBrand=void 0}return(0,o.Z)(e,null,[{key:"_equals",value:function(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}},{key:"equalsArr",value:function(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(!e._equals(t[r],n[r]))return!1;return!0}},{key:"extractWrapped",value:function(t,n,r){if(0===t.length)return t;var o,s=n+1,a=r+1,u=r-n,l=[],h=0,c=(0,i.Z)(t);try{for(c.s();!(o=c.n()).done;){var d=o.value;d.endColumn<=s||d.startColumn>=a||(l[h++]=new e(Math.max(1,d.startColumn-s+1),Math.min(u+1,d.endColumn-s+1),d.className,d.type))}}catch(f){c.e(f)}finally{c.f()}return l}},{key:"filter",value:function(t,n,i,r){if(0===t.length)return[];for(var o=[],s=0,a=0,u=t.length;a<u;a++){var l=t[a],h=l.range;if(!(h.endLineNumber<n||h.startLineNumber>n)&&(!h.isEmpty()||0!==l.type&&3!==l.type)){var c=h.startLineNumber===n?h.startColumn:i,d=h.endLineNumber===n?h.endColumn:r;o[s++]=new e(c,d,l.inlineClassName,l.type)}}return o}},{key:"_typeCompare",value:function(e,t){var n=[2,0,1,3];return n[e]-n[t]}},{key:"compare",value:function(t,n){if(t.startColumn!==n.startColumn)return t.startColumn-n.startColumn;if(t.endColumn!==n.endColumn)return t.endColumn-n.endColumn;var i=e._typeCompare(t.type,n.type);return 0!==i?i:t.className!==n.className?t.className<n.className?-1:1:0}}]),e}(),u=(0,o.Z)((function e(t,n,i,o){(0,r.Z)(this,e),this.startOffset=t,this.endOffset=n,this.className=i,this.metadata=o})),l=function(){function e(){(0,r.Z)(this,e),this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}return(0,o.Z)(e,[{key:"consumeLowerThan",value:function(t,n,i){for(;this.count>0&&this.stopOffsets[0]<t;){for(var r=0;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;i.push(new u(n,this.stopOffsets[r],this.classNames.join(" "),e._metadata(this.metadata))),n=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&n<t&&(i.push(new u(n,t-1,this.classNames.join(" "),e._metadata(this.metadata))),n=t),n}},{key:"insert",value:function(e,t,n){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(var i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}],[{key:"_metadata",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++)t|=e[n];return t}}]),e}(),h=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"normalize",value:function(e,t){if(0===t.length)return[];for(var n=[],i=new l,r=0,o=0,a=t.length;o<a;o++){var u=t[o],h=u.startColumn,c=u.endColumn,d=u.className,f=1===u.type?2:2===u.type?4:0;if(h>1){var g=e.charCodeAt(h-2);s.ZG(g)&&h--}if(c>1){var v=e.charCodeAt(c-2);s.ZG(v)&&c--}var m=h-1,p=c-2;r=i.consumeLowerThan(m,r,n),0===i.count&&(r=m),i.insert(p,d,f)}return i.consumeLowerThan(1073741824,r,n),n}}]),e}()},68523:function(e,t,n){n.d(t,{Nd:function(){return f},zG:function(){return c},IJ:function(){return d},d1:function(){return m},tF:function(){return _}});var i=n(60726),r=n(22951),o=n(91976),s=n(26511),a=n(17224),u=n(21531),l=n(14133),h=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.endIndex=t,this.type=n,this.metadata=i,this.containsRTL=o,this._linePartBrand=void 0}return(0,o.Z)(e,[{key:"isWhitespace",value:function(){return!!(1&this.metadata)}},{key:"isPseudoAfter",value:function(){return!!(4&this.metadata)}}]),e}(),c=function(){function e(t,n){(0,r.Z)(this,e),this.startOffset=t,this.endOffset=n}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}]),e}(),d=function(){function e(t,n,i,o,s,a,u,h,c,d,f,g,v,m,p,_,L,k,C){(0,r.Z)(this,e),this.useMonospaceOptimizations=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.continuesWithWrappedLine=o,this.isBasicASCII=s,this.containsRTL=a,this.fauxIndentLength=u,this.lineTokens=h,this.lineDecorations=c.sort(l.Kp.compare),this.tabSize=d,this.startVisibleColumn=f,this.spaceWidth=g,this.stopRenderingLineAfter=p,this.renderWhitespace="all"===_?4:"boundary"===_?1:"selection"===_?2:"trailing"===_?3:0,this.renderControlCharacters=L,this.fontLigatures=k,this.selectionsOnLine=C&&C.sort((function(e,t){return e.startOffset<t.startOffset?-1:1})),Math.abs(m-g)<Math.abs(v-g)?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=v,this.renderSpaceCharCode=183)}return(0,o.Z)(e,[{key:"sameSelection",value:function(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(var t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}},{key:"equals",value:function(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&l.Kp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}]),e}(),f=(0,o.Z)((function e(t,n){(0,r.Z)(this,e),this.partIndex=t,this.charIndex=n})),g=function(){function e(t,n){(0,r.Z)(this,e),this.length=t,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}return(0,o.Z)(e,[{key:"setColumnInfo",value:function(e,t,n,i){var r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=i}},{key:"getHorizontalOffset",value:function(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}},{key:"charOffsetToPartData",value:function(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}},{key:"getDomPosition",value:function(t){var n=this.charOffsetToPartData(t-1),i=e.getPartIndex(n),r=e.getCharIndex(n);return new f(i,r)}},{key:"getColumn",value:function(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}},{key:"partDataToCharOffset",value:function(t,n,i){if(0===this.length)return 0;for(var r=(t<<16|i<<0)>>>0,o=0,s=this.length-1;o+1<s;){var a=o+s>>>1,u=this._data[a];if(u===r)return a;u>r?s=a:o=a}if(o===s)return o;var l=this._data[o],h=this._data[s];if(l===r)return o;if(h===r)return s;var c=e.getPartIndex(l);return i-e.getCharIndex(l)<=(c!==e.getPartIndex(h)?n:e.getCharIndex(h))-i?o:s}}],[{key:"getPartIndex",value:function(e){return(4294901760&e)>>>16}},{key:"getCharIndex",value:function(e){return(65535&e)>>>0}}]),e}(),v=(0,o.Z)((function e(t,n,i){(0,r.Z)(this,e),this._renderLineOutputBrand=void 0,this.characterMapping=t,this.containsRTL=n,this.containsForeignElements=i}));function m(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");var n,r=0,o=0,u=0,c=(0,i.Z)(e.lineDecorations);try{for(c.s();!(n=c.n()).done;){var d=n.value;1!==d.type&&2!==d.type||(t.appendString('<span class="'),t.appendString(d.className),t.appendString('"></span>'),1===d.type&&(u|=1,r++),2===d.type&&(u|=2,o++))}}catch(m){c.e(m)}finally{c.f()}t.appendString("</span>");var f=new g(1,r+o);return f.setColumnInfo(1,r,0,0),new v(f,!1,u)}return t.appendString("<span><span></span></span>"),new v(new g(0,0),!1,0)}return function(e,t){var n=e.fontIsMonospace,i=e.canUseHalfwidthRightwardsArrow,r=e.containsForeignElements,o=e.lineContent,u=e.len,l=e.isOverflowing,h=e.overflowingCharCount,c=e.parts,d=e.fauxIndentLength,f=e.tabSize,m=e.startVisibleColumn,p=e.containsRTL,_=e.spaceWidth,L=e.renderSpaceCharCode,y=e.renderWhitespace,w=e.renderControlCharacters,b=new g(u+1,c.length),N=!1,V=0,I=m,M=0,S=0,P=0;p?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(var T=0,D=c.length;T<D;T++){var Z=c[T],x=Z.endIndex,O=Z.type,E=Z.containsRTL,A=0!==y&&Z.isWhitespace(),R=A&&!n&&("mtkw"===O||!r),W=V===x&&Z.isPseudoAfter();if(M=0,t.appendString("<span "),E&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(R?"mtkz":O),t.appendASCIICharCode(34),A){for(var H=0,j=V,F=I;j<x;j++){var z=0|(9===o.charCodeAt(j)?f-F%f:1);H+=z,j>=d&&(F+=z)}for(R&&(t.appendString(' style="width:'),t.appendString(String(_*H)),t.appendString('px"')),t.appendASCIICharCode(62);V<x;V++){b.setColumnInfo(V+1,T-P,M,S),P=0;var B=void 0,U=void 0;if(9===o.charCodeAt(V)){U=B=f-I%f|0,!i||U>1?t.appendCharCode(8594):t.appendCharCode(65515);for(var q=2;q<=U;q++)t.appendCharCode(160)}else B=2,U=1,t.appendCharCode(L),t.appendCharCode(8204);M+=B,S+=U,V>=d&&(I+=U)}}else for(t.appendASCIICharCode(62);V<x;V++){b.setColumnInfo(V+1,T-P,M,S),P=0;var G=o.charCodeAt(V),Q=1,J=1;switch(G){case 9:J=Q=f-I%f;for(var K=1;K<=Q;K++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:w?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:a.K7(G)&&J++,w&&G<32?t.appendCharCode(9216+G):w&&127===G?t.appendCharCode(9249):w&&k(G)?(t.appendString("[U+"),t.appendString(C(G)),t.appendString("]"),J=Q=8):t.appendCharCode(G)}M+=Q,S+=J,V>=d&&(I+=J)}W?P++:P=0,V>=u&&!N&&Z.isPseudoAfter()&&(N=!0,b.setColumnInfo(V+1,T,M,S)),t.appendString("</span>")}N||b.setColumnInfo(u+1,c.length-1,M,S);l&&(t.appendString('<span class="mtkoverflow">'),t.appendString(s.NC("showMore","Show more ({0})",function(e){if(e<1024)return s.NC("overflow.chars","{0} chars",e);if(e<1048576)return"".concat((e/1024).toFixed(1)," KB");return"".concat((e/1024/1024).toFixed(1)," MB")}(h))),t.appendString("</span>"));return t.appendString("</span>"),new v(b,p,r)}(function(e){var t,n,r,o=e.lineContent;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<o.length?(t=!0,n=o.length-e.stopRenderingLineAfter,r=e.stopRenderingLineAfter):(t=!1,n=0,r=o.length);var s=function(e,t,n,i,r){var o=[],s=0;i>0&&(o[s++]=new h(i,"",0,!1));for(var u=i,l=0,c=n.getCount();l<c;l++){var d=n.getEndOffset(l);if(!(d<=i)){var f=n.getClassName(l);if(d>=r){var g=!!t&&a.Ut(e.substring(u,r));o[s++]=new h(r,f,0,g);break}var v=!!t&&a.Ut(e.substring(u,d));o[s++]=new h(d,f,0,v),u=d}}return o}(o,e.containsRTL,e.lineTokens,e.fauxIndentLength,r);e.renderControlCharacters&&!e.isBasicASCII&&(s=function(e,t){var n,r=[],o=new h(0,"",0,!1),s=0,a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){for(var u=n.value,l=u.endIndex;s<l;s++){k(e.charCodeAt(s))&&(s>o.endIndex&&(o=new h(s,u.type,u.metadata,u.containsRTL),r.push(o)),o=new h(s+1,"mtkcontrol",u.metadata,!1),r.push(o))}s>o.endIndex&&(o=new h(l,u.type,u.metadata,u.containsRTL),r.push(o))}}catch(m){a.e(m)}finally{a.f()}return r}(o,s));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(s=function(e,t,n,i){var r,o=e.continuesWithWrappedLine,s=e.fauxIndentLength,u=e.tabSize,l=e.startVisibleColumn,c=e.useMonospaceOptimizations,d=e.selectionsOnLine,f=1===e.renderWhitespace,g=3===e.renderWhitespace,v=e.renderSpaceWidth!==e.spaceWidth,m=[],p=0,_=0,L=i[_].type,k=i[_].containsRTL,C=i[_].endIndex,y=i.length,w=!1,b=a.LC(t);-1===b?(w=!0,b=n,r=n):r=a.ow(t);for(var N=!1,V=0,I=d&&d[V],M=l%u,S=s;S<n;S++){var P=t.charCodeAt(S);I&&S>=I.endOffset&&(V++,I=d&&d[V]);var T=void 0;if(S<b||S>r)T=!0;else if(9===P)T=!0;else if(32===P)if(f)if(N)T=!0;else{var D=S+1<n?t.charCodeAt(S+1):0;T=32===D||9===D}else T=!0;else T=!1;if(T&&d&&(T=!!I&&I.startOffset<=S&&I.endOffset>S),T&&g&&(T=w||S>r),T&&k&&S>=b&&S<=r&&(T=!1),N){if(!T||!c&&M>=u){if(v)for(var Z=(p>0?m[p-1].endIndex:s)+1;Z<=S;Z++)m[p++]=new h(Z,"mtkw",1,!1);else m[p++]=new h(S,"mtkw",1,!1);M%=u}}else(S===C||T&&S>s)&&(m[p++]=new h(S,L,0,k),M%=u);for(9===P?M=u:a.K7(P)?M+=2:M++,N=T;S===C&&++_<y;)L=i[_].type,k=i[_].containsRTL,C=i[_].endIndex}var x=!1;if(N)if(o&&f){var O=n>0?t.charCodeAt(n-1):0,E=n>1?t.charCodeAt(n-2):0;32===O&&32!==E&&9!==E||(x=!0)}else x=!0;if(x)if(v)for(var A=(p>0?m[p-1].endIndex:s)+1;A<=n;A++)m[p++]=new h(A,"mtkw",1,!1);else m[p++]=new h(n,"mtkw",1,!1);else m[p++]=new h(n,L,0,k);return m}(e,o,r,s));var u=0;if(e.lineDecorations.length>0){for(var c=0,d=e.lineDecorations.length;c<d;c++){var f=e.lineDecorations[c];3===f.type||1===f.type?u|=1:2===f.type&&(u|=2)}s=function(e,t,n,i){i.sort(l.Kp.compare);for(var r=l.k.normalize(e,i),o=r.length,s=0,a=[],u=0,c=0,d=0,f=n.length;d<f;d++){for(var g=n[d],v=g.endIndex,m=g.type,p=g.metadata,_=g.containsRTL;s<o&&r[s].startOffset<v;){var L=r[s];if(L.startOffset>c&&(c=L.startOffset,a[u++]=new h(c,m,p,_)),!(L.endOffset+1<=v)){c=v,a[u++]=new h(c,m+" "+L.className,p|L.metadata,_);break}c=L.endOffset+1,a[u++]=new h(c,m+" "+L.className,p|L.metadata,_),s++}v>c&&(c=v,a[u++]=new h(c,m,p,_))}var k=n[n.length-1].endIndex;if(s<o&&r[s].startOffset===k)for(;s<o&&r[s].startOffset===k;){var C=r[s];a[u++]=new h(c,C.className,C.metadata,!1),s++}return a}(o,0,s,e.lineDecorations)}e.containsRTL||(s=function(e,t,n){var i=0,r=[],o=0;if(n)for(var s=0,a=t.length;s<a;s++){var u=t[s],l=u.endIndex;if(i+50<l){for(var c=u.type,d=u.metadata,f=u.containsRTL,g=-1,v=i,m=i;m<l;m++)32===e.charCodeAt(m)&&(g=m),-1!==g&&m-v>=50&&(r[o++]=new h(g+1,c,d,f),v=g+1,g=-1);v!==l&&(r[o++]=new h(l,c,d,f))}else r[o++]=u;i=l}else for(var p=0,_=t.length;p<_;p++){var L=t[p],k=L.endIndex,C=k-i;if(C>50){for(var y=L.type,w=L.metadata,b=L.containsRTL,N=Math.ceil(C/50),V=1;V<N;V++){var I=i+50*V;r[o++]=new h(I,y,w,b)}r[o++]=new h(k,y,w,b)}else r[o++]=L;i=k}return r}(o,s,!e.isBasicASCII||e.fontLigatures));return new L(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,o,r,t,n,s,u,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}var p=(0,o.Z)((function e(t,n,i,o){(0,r.Z)(this,e),this.characterMapping=t,this.html=n,this.containsRTL=i,this.containsForeignElements=o}));function _(e){var t=new u.HT(1e4),n=m(e,t);return new p(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}var L=(0,o.Z)((function e(t,n,i,o,s,a,u,l,h,c,d,f,g,v,m,p){(0,r.Z)(this,e),this.fontIsMonospace=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.len=o,this.isOverflowing=s,this.overflowingCharCount=a,this.parts=u,this.containsForeignElements=l,this.fauxIndentLength=h,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=f,this.spaceWidth=g,this.renderSpaceCharCode=v,this.renderWhitespace=m,this.renderControlCharacters=p}));function k(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function C(e){return e.toString(16).toUpperCase().padStart(4,"0")}},64586:function(e,t,n){n.d(t,{x:function(){return s}});var i=n(22951),r=n(91976),o=n(55597),s=function(){function e(t,n,r,s){(0,i.Z)(this,e),this.selections=t,this.startLineNumber=0|n.startLineNumber,this.endLineNumber=0|n.endLineNumber,this.relativeVerticalOffset=n.relativeVerticalOffset,this.bigNumbersDelta=0|n.bigNumbersDelta,this.whitespaceViewportData=r,this._model=s,this.visibleRange=new o.e(n.startLineNumber,this._model.getLineMinColumn(n.startLineNumber),n.endLineNumber,this._model.getLineMaxColumn(n.endLineNumber))}return(0,r.Z)(e,[{key:"getViewLineRenderingData",value:function(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}},{key:"getDecorationsInViewport",value:function(){return this._model.getDecorationsInViewport(this.visibleRange)}}]),e}()},42990:function(e,t,n){n.d(t,{$l:function(){return f},$t:function(){return c},IP:function(){return l},SQ:function(){return g},Wx:function(){return d},l_:function(){return a},ud:function(){return u},wA:function(){return h}});var i=n(91976),r=n(22951),o=n(17224),s=n(55597),a=(0,i.Z)((function e(t,n,i,o){(0,r.Z)(this,e),this._viewportBrand=void 0,this.top=0|t,this.left=0|n,this.width=0|i,this.height=0|o})),u=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.tabSize=t,this.data=n})),l=(0,i.Z)((function e(t,n,i,o,s,a,u){(0,r.Z)(this,e),this._viewLineDataBrand=void 0,this.content=t,this.continuesWithWrappedLine=n,this.minColumn=i,this.maxColumn=o,this.startVisibleColumn=s,this.tokens=a,this.inlineDecorations=u})),h=function(){function e(t,n,i,o,s,a,u,l,h,c){(0,r.Z)(this,e),this.minColumn=t,this.maxColumn=n,this.content=i,this.continuesWithWrappedLine=o,this.isBasicASCII=e.isBasicASCII(i,a),this.containsRTL=e.containsRTL(i,this.isBasicASCII,s),this.tokens=u,this.inlineDecorations=l,this.tabSize=h,this.startVisibleColumn=c}return(0,i.Z)(e,null,[{key:"isBasicASCII",value:function(e,t){return!t||o.$i(e)}},{key:"containsRTL",value:function(e,t,n){return!(t||!n)&&o.Ut(e)}}]),e}(),c=(0,i.Z)((function e(t,n,i){(0,r.Z)(this,e),this.range=t,this.inlineClassName=n,this.type=i})),d=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.startOffset=t,this.endOffset=n,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=o}return(0,i.Z)(e,[{key:"toInlineDecoration",value:function(e){return new c(new s.e(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}]),e}(),f=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this._viewModelDecorationBrand=void 0,this.range=t,this.options=n})),g=function(){function e(t,n,i){(0,r.Z)(this,e),this.color=t,this.zIndex=n,this.data=i}return(0,i.Z)(e,null,[{key:"cmp",value:function(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}]),e}()},5820:function(e,t,n){n.d(t,{E:function(){return c}});var i=n(22951),r=n(91976),o=n(67591),s=n(99616),a=n(68515),u=n(59652),l=n(29e3),h=n(76958),c=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this))._onDidChange=new a.Q5,e.onDidChange=e._onDidChange.event,e._updateColorMap(),e._register(h.RW.onDidChange((function(t){t.changedColorMap&&e._updateColorMap()}))),e}return(0,r.Z)(n,[{key:"_updateColorMap",value:function(){var e=h.RW.getColorMap();if(!e)return this._colors=[l.h.Empty],void(this._backgroundIsLight=!0);this._colors=[l.h.Empty];for(var t=1;t<e.length;t++){var n=e[t].rgba;this._colors[t]=new l.h(n.r,n.g,n.b,Math.round(255*n.a))}var i=e[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)}},{key:"getColor",value:function(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}},{key:"backgroundIsLight",value:function(){return this._backgroundIsLight}}],[{key:"getInstance",value:function(){return this._INSTANCE||(this._INSTANCE=(0,u.dk)(new n)),this._INSTANCE}}]),n}(u.JT);c._INSTANCE=null},16023:function(e,t,n){n.d(t,{p:function(){return c}});var i=n(67591),r=n(99616),o=n(22951),s=n(91976),a=n(17224),u=n(79670),l=n(98800),h=n(31613),c=function(){function e(t,n){(0,o.Z)(this,e),this.classifier=new d(t,n)}return(0,s.Z)(e,[{key:"createLineBreaksComputer",value:function(e,t,n,i,r){var o=this,s=[],a=[],u=[];return{addRequest:function(e,t,n){s.push(e),a.push(t),u.push(n)},finalize:function(){for(var l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,h=[],c=0,d=s.length;c<d;c++){var p=a[c],_=u[c];!_||_.injectionOptions||p?h[c]=m(o.classifier,s[c],p,t,n,l,i,r):h[c]=v(o.classifier,_,s[c],t,n,l,i,r)}return f.length=0,g.length=0,h}}}}],[{key:"create",value:function(t){return new e(t.get(129),t.get(128))}}]),e}(),d=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;(0,o.Z)(this,n),r=t.call(this,0);for(var s=0;s<e.length;s++)r.set(e.charCodeAt(s),1);for(var a=0;a<i.length;a++)r.set(i.charCodeAt(a),2);return r}return(0,s.Z)(n,[{key:"get",value:function(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}]),n}(u.N),f=[],g=[];function v(e,t,n,i,r,o,s,u){if(-1===r)return null;var l=n.length;if(l<=1)return null;var h="keepAll"===u,c=t.breakOffsets,d=t.breakOffsetsVisibleColumn,v=k(n,i,r,o,s),m=r-v,_=f,C=g,y=0,w=0,b=0,N=r,V=c.length,I=0;if(I>=0)for(var M=Math.abs(d[I]-N);I+1<V;){var S=Math.abs(d[I+1]-N);if(S>=M)break;M=S,I++}for(;I<V;){var P=I<0?0:c[I],T=I<0?0:d[I];w>P&&(P=w,T=b);var D=0,Z=0,x=0,O=0;if(T<=N){for(var E=T,A=0===P?0:n.charCodeAt(P-1),R=0===P?0:e.get(A),W=!0,H=P;H<l;H++){var j=H,F=n.charCodeAt(H),z=void 0,B=void 0;if(a.ZG(F)?(H++,z=0,B=2):(z=e.get(F),B=p(F,E,i,o)),j>w&&L(A,R,F,z,h)&&(D=j,Z=E),(E+=B)>N){j>w?(x=j,O=E-B):(x=H+1,O=E),E-Z>m&&(D=0),W=!1;break}A=F,R=z}if(W){y>0&&(_[y]=c[c.length-1],C[y]=d[c.length-1],y++);break}}if(0===D){for(var U=T,q=n.charCodeAt(P),G=e.get(q),Q=!1,J=P-1;J>=w;J--){var K=J+1,$=n.charCodeAt(J);if(9===$){Q=!0;break}var Y=void 0,X=void 0;if(a.YK($)?(J--,Y=0,X=2):(Y=e.get($),X=a.K7($)?o:1),U<=N){if(0===x&&(x=K,O=U),U<=N-m)break;if(L($,Y,q,G,h)){D=K,Z=U;break}}U-=X,q=$,G=Y}if(0!==D){var ee=m-(O-Z);if(ee<=i){var te=n.charCodeAt(x);ee-(a.ZG(te)?2:p(te,O,i,o))<0&&(D=0)}}if(Q){I--;continue}}if(0===D&&(D=x,Z=O),D<=w){var ne=n.charCodeAt(w);a.ZG(ne)?(D=w+2,Z=b+2):(D=w+1,Z=b+p(ne,b,i,o))}for(w=D,_[y]=D,b=Z,C[y]=Z,y++,N=Z+m;I<0||I<V&&d[I]<Z;)I++;for(var ie=Math.abs(d[I]-N);I+1<V;){var re=Math.abs(d[I+1]-N);if(re>=ie)break;ie=re,I++}}return 0===y?null:(_.length=y,C.length=y,f=t.breakOffsets,g=t.breakOffsetsVisibleColumn,t.breakOffsets=_,t.breakOffsetsVisibleColumn=C,t.wrappedTextIndentLength=v,t)}function m(e,t,n,i,r,o,s,u){var c,d,f=l.gk.applyInjectedText(t,n);if(n&&n.length>0?(c=n.map((function(e){return e.options})),d=n.map((function(e){return e.column-1}))):(c=null,d=null),-1===r)return c?new h.gD(d,c,[f.length],[],0):null;var g=f.length;if(g<=1)return c?new h.gD(d,c,[f.length],[],0):null;var v="keepAll"===u,m=k(f,i,r,o,s),_=r-m,C=[],y=[],w=0,b=0,N=0,V=r,I=f.charCodeAt(0),M=e.get(I),S=p(I,0,i,o),P=1;a.ZG(I)&&(S+=1,I=f.charCodeAt(1),M=e.get(I),P++);for(var T=P;T<g;T++){var D=T,Z=f.charCodeAt(T),x=void 0,O=void 0;a.ZG(Z)?(T++,x=0,O=2):(x=e.get(Z),O=p(Z,S,i,o)),L(I,M,Z,x,v)&&(b=D,N=S),(S+=O)>V&&((0===b||S-N>_)&&(b=D,N=S-O),C[w]=b,y[w]=N,w++,V=N+_,b=0),I=Z,M=x}return 0!==w||n&&0!==n.length?(C[w]=g,y[w]=S,new h.gD(d,c,C,y,m)):null}function p(e,t,n,i){return 9===e?n-t%n:a.K7(e)||e<32?i:1}function _(e,t){return t-e%t}function L(e,t,n,i,r){return 32!==n&&(2===t&&2!==i||1!==t&&1===i||!r&&3===t&&2!==i||!r&&3===i&&1!==t)}function k(e,t,n,i,r){var o=0;if(0!==r){var s=a.LC(e);if(-1!==s){for(var u=0;u<s;u++){o+=9===e.charCodeAt(u)?_(o,t):1}for(var l=3===r?2:2===r?1:0,h=0;h<l;h++){o+=_(o,t)}o+i>n&&(o=0)}}return o}},79455:function(e,t,n){n.d(t,{EY:function(){return s},Tj:function(){return a}});var i=n(22951),r=n(91976),o=function(){function e(t,n,r){(0,i.Z)(this,e),this._colorZoneBrand=void 0,this.from=0|t,this.to=0|n,this.colorId=0|r}return(0,r.Z)(e,null,[{key:"compare",value:function(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}]),e}(),s=function(){function e(t,n,r,o){(0,i.Z)(this,e),this._overviewRulerZoneBrand=void 0,this.startLineNumber=t,this.endLineNumber=n,this.heightInLines=r,this.color=o,this._colorZone=null}return(0,r.Z)(e,[{key:"setColorZone",value:function(e){this._colorZone=e}},{key:"getColorZones",value:function(){return this._colorZone}}],[{key:"compare",value:function(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}}]),e}(),a=function(){function e(t){(0,i.Z)(this,e),this._getVerticalOffsetForLine=t,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}return(0,r.Z)(e,[{key:"getId2Color",value:function(){return this._id2Color}},{key:"setZones",value:function(e){this._zones=e,this._zones.sort(s.compare)}},{key:"setLineHeight",value:function(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._colorZonesInvalid=!0}},{key:"getDOMWidth",value:function(){return this._domWidth}},{key:"getCanvasWidth",value:function(){return this._domWidth*this._pixelRatio}},{key:"setDOMWidth",value:function(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}},{key:"getDOMHeight",value:function(){return this._domHeight}},{key:"getCanvasHeight",value:function(){return this._domHeight*this._pixelRatio}},{key:"setDOMHeight",value:function(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"getOuterHeight",value:function(){return this._outerHeight}},{key:"setOuterHeight",value:function(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"resolveColorZones",value:function(){for(var e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=n/Math.floor(this._outerHeight),r=Math.floor(4*this._pixelRatio/2),s=[],a=0,u=this._zones.length;a<u;a++){var l=this._zones[a];if(!e){var h=l.getColorZones();if(h){s.push(h);continue}}var c=this._getVerticalOffsetForLine(l.startLineNumber),d=0===l.heightInLines?this._getVerticalOffsetForLine(l.endLineNumber)+t:c+l.heightInLines*t,f=Math.floor(i*c),g=Math.floor(i*d),v=Math.floor((f+g)/2),m=g-v;m<r&&(m=r),v-m<0&&(v=m),v+m>n&&(v=n-m);var p=l.color,_=this._color2Id[p];_||(_=++this._lastAssignedId,this._color2Id[p]=_,this._id2Color[_]=p);var L=new o(v-m,v+m,_);l.setColorZone(L),s.push(L)}return this._colorZonesInvalid=!1,s.sort(o.compare),s}}]),e}()},69899:function(e,t,n){n.d(t,{A:function(){return s}});var i=n(22951),r=n(91976),o=n(63177),s=function(){function e(t,n,r){(0,i.Z)(this,e),this.configuration=t,this.theme=new o.b(n),this.viewModel=r,this.viewLayout=r.viewLayout}return(0,r.Z)(e,[{key:"addEventHandler",value:function(e){this.viewModel.addViewEventHandler(e)}},{key:"removeEventHandler",value:function(e){this.viewModel.removeViewEventHandler(e)}}]),e}()},87947:function(e,t,n){n.d(t,{$t:function(){return c},CU:function(){return l},Fd:function(){return h},zg:function(){return d}});var i=n(22951),r=n(91976),o=n(99924),s=n(55597),a=n(42990),u=n(77116),l=function(){function e(t,n,r,o,s){(0,i.Z)(this,e),this.editorId=t,this.model=n,this.configuration=r,this._linesCollection=o,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}return(0,r.Z)(e,[{key:"_clearCachedModelDecorationsResolver",value:function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}},{key:"dispose",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"reset",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onModelDecorationsChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onLineMappingChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"_getOrCreateViewModelDecoration",value:function(e){var t=e.id,n=this._decorationsCache[t];if(!n){var i,r=e.range,u=e.options;if(u.isWholeLine){var l=this._coordinatesConverter.convertModelPositionToViewPosition(new o.L(r.startLineNumber,1),0),h=this._coordinatesConverter.convertModelPositionToViewPosition(new o.L(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);i=new s.e(l.lineNumber,l.column,h.lineNumber,h.column)}else i=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new a.$l(i,u),this._decorationsCache[t]=n}return n}},{key:"getMinimapDecorationsInRange",value:function(e){return this._getDecorationsInRange(e,!0,!1).decorations}},{key:"getDecorationsViewportData",value:function(e){var t=null!==this._cachedModelDecorationsResolver;return(t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange))||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}},{key:"getInlineDecorationsOnLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new s.e(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}},{key:"_getDecorationsInRange",value:function(e,t,n){for(var i=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,u.$J)(this.configuration.options),t,n),r=e.startLineNumber,o=e.endLineNumber,l=[],c=0,d=[],f=r;f<=o;f++)d[f-r]=[];for(var g=0,v=i.length;g<v;g++){var m=i[g],p=m.options;if(h(this.model,m)){var _=this._getOrCreateViewModelDecoration(m),L=_.range;if(l[c++]=_,p.inlineClassName)for(var k=new a.$t(L,p.inlineClassName,p.inlineClassNameAffectsLetterSpacing?3:0),C=Math.max(r,L.startLineNumber),y=Math.min(o,L.endLineNumber),w=C;w<=y;w++)d[w-r].push(k);if(p.beforeContentClassName&&r<=L.startLineNumber&&L.startLineNumber<=o){var b=new a.$t(new s.e(L.startLineNumber,L.startColumn,L.startLineNumber,L.startColumn),p.beforeContentClassName,1);d[L.startLineNumber-r].push(b)}if(p.afterContentClassName&&r<=L.endLineNumber&&L.endLineNumber<=o){var N=new a.$t(new s.e(L.endLineNumber,L.endColumn,L.endLineNumber,L.endColumn),p.afterContentClassName,2);d[L.endLineNumber-r].push(N)}}}return{decorations:l,inlineDecorations:d}}}]),e}();function h(e,t){return(!t.options.hideInCommentTokens||!c(e,t))&&(!t.options.hideInStringTokens||!d(e,t))}function c(e,t){return f(e,t.range,(function(e){return 1===e}))}function d(e,t){return f(e,t.range,(function(e){return 2===e}))}function f(e,t,n){for(var i=t.startLineNumber;i<=t.endLineNumber;i++)for(var r=e.tokenization.getLineTokens(i),o=i===t.startLineNumber,s=i===t.endLineNumber,a=o?r.findTokenIndexAtOffset(t.startColumn-1):0;a<r.getCount();){if(s)if(r.getStartOffset(a)>t.endColumn-1)break;if(!n(r.getStandardTokenType(a)))return!1;a++}return!0}},11213:function(e,t,n){n.d(t,{j:function(){return oe}});var i=n(649),r=n(11026),o=n(60726),s=n(22951),a=n(91976),u=n(47169),l=n(43243),h=n(27597),c=n(67591),d=n(99616),f=n(88648),g=n(37368),v=n(57612),m=n(59652),p=n(44352),_=n(17224),L=n(77116),k=n(8259),C=n(29168),y=n(99924),w=n(55597),b=n(43232),N=n(98800),V=n(76958),I=n(75414),M=n(66393),S=n(66895),P=n(68515),T=n(2732),D=function(){function e(){(0,s.Z)(this,e),this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}return(0,a.Z)(e,[{key:"insert",value:function(e){this._hasPending=!0,this._inserts.push(e)}},{key:"change",value:function(e){this._hasPending=!0,this._changes.push(e)}},{key:"remove",value:function(e){this._hasPending=!0,this._removes.push(e)}},{key:"mustCommit",value:function(){return this._hasPending}},{key:"commit",value:function(e){if(this._hasPending){var t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}}]),e}(),Z=(0,a.Z)((function e(t,n,i,r,o){(0,s.Z)(this,e),this.id=t,this.afterLineNumber=n,this.ordinal=i,this.height=r,this.minWidth=o,this.prefixSum=0})),x=function(){function e(t,n,i,r){(0,s.Z)(this,e),this._instanceId=_.PJ(++e.INSTANCE_COUNT),this._pendingChanges=new D,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=t,this._lineHeight=n,this._paddingTop=i,this._paddingBottom=r}return(0,a.Z)(e,[{key:"setLineHeight",value:function(e){this._checkPendingChanges(),this._lineHeight=e}},{key:"setPadding",value:function(e,t){this._paddingTop=e,this._paddingBottom=t}},{key:"onFlushed",value:function(e){this._checkPendingChanges(),this._lineCount=e}},{key:"changeWhitespace",value:function(e){var t=this,n=!1;try{e({insertWhitespace:function(e,i,r,o){n=!0,e|=0,i|=0,r|=0,o|=0;var s=t._instanceId+ ++t._lastWhitespaceId;return t._pendingChanges.insert(new Z(s,e,i,r,o)),s},changeOneWhitespace:function(e,i,r){n=!0,i|=0,r|=0,t._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:r})},removeWhitespace:function(e){n=!0,t._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return n}},{key:"_commitPendingChanges",value:function(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){var i,r=(0,o.Z)(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;this._insertWhitespace(s)}}catch(b){r.e(b)}finally{r.f()}var a,u=(0,o.Z)(t);try{for(u.s();!(a=u.n()).done;){var l=a.value;this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight)}}catch(b){u.e(b)}finally{u.f()}var h,c=(0,o.Z)(n);try{for(c.s();!(h=c.n()).done;){var d=h.value,f=this._findWhitespaceIndex(d.id);-1!==f&&this._removeWhitespace(f)}}catch(b){c.e(b)}finally{c.f()}}else{var g,v=new Set,m=(0,o.Z)(n);try{for(m.s();!(g=m.n()).done;){var p=g.value;v.add(p.id)}}catch(b){m.e(b)}finally{m.f()}var _,L=new Map,k=(0,o.Z)(t);try{for(k.s();!(_=k.n()).done;){var C=_.value;L.set(C.id,C)}}catch(b){k.e(b)}finally{k.f()}var y=function(e){var t,n=[],i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(!v.has(r.id)){if(L.has(r.id)){var s=L.get(r.id);r.afterLineNumber=s.newAfterLineNumber,r.height=s.newHeight}n.push(r)}}}catch(b){i.e(b)}finally{i.f()}return n},w=y(this._arr).concat(y(e));w.sort((function(e,t){return e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber})),this._arr=w,this._prefixSumValidIndex=-1}}},{key:"_checkPendingChanges",value:function(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}},{key:"_insertWhitespace",value:function(t){var n=e.findInsertionIndex(this._arr,t.afterLineNumber,t.ordinal);this._arr.splice(n,0,t),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)}},{key:"_findWhitespaceIndex",value:function(e){for(var t=this._arr,n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}},{key:"_changeOneWhitespace",value:function(e,t,n){var i=this._findWhitespaceIndex(e);if(-1!==i&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){var r=this._arr[i];this._removeWhitespace(i),r.afterLineNumber=t,this._insertWhitespace(r)}}},{key:"_removeWhitespace",value:function(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}},{key:"onLinesDeleted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){var r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}},{key:"onLinesInserted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){e<=this._arr[n].afterLineNumber&&(this._arr[n].afterLineNumber+=t-e+1)}}},{key:"getWhitespacesTotalHeight",value:function(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}},{key:"getWhitespacesAccumulatedHeight",value:function(e){this._checkPendingChanges(),e|=0;var t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(var n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}},{key:"getLinesTotalHeight",value:function(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}},{key:"getWhitespaceAccumulatedHeightBeforeLineNumber",value:function(e){this._checkPendingChanges(),e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}},{key:"_findLastWhitespaceBeforeLineNumber",value:function(e){e|=0;for(var t=this._arr,n=0,i=t.length-1;n<=i;){var r=n+((i-n|0)/2|0)|0;if(t[r].afterLineNumber<e){if(r+1>=t.length||t[r+1].afterLineNumber>=e)return r;n=r+1|0}else i=r-1|0}return-1}},{key:"_findFirstWhitespaceAfterLineNumber",value:function(e){e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}},{key:"getFirstWhitespaceIndexAfterLineNumber",value:function(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}},{key:"getVerticalOffsetForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._checkPendingChanges(),((e|=0)>1?this._lineHeight*(e-1):0)+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0))+this._paddingTop}},{key:"getVerticalOffsetAfterLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._checkPendingChanges(),e|=0,this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0))+this._paddingTop}},{key:"getWhitespaceMinWidth",value:function(){if(this._checkPendingChanges(),-1===this._minWidth){for(var e=0,t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}},{key:"isAfterLines",value:function(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()}},{key:"isInTopPadding",value:function(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}},{key:"isInBottomPadding",value:function(e){return 0!==this._paddingBottom&&(this._checkPendingChanges(),e>=this.getLinesTotalHeight()-this._paddingBottom)}},{key:"getLineNumberAtOrAfterVerticalOffset",value:function(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;for(var t=0|this._lineCount,n=this._lineHeight,i=1,r=t;i<r;){var o=(i+r)/2|0,s=0|this.getVerticalOffsetForLineNumber(o);if(e>=s+n)i=o+1;else{if(e>=s)return o;r=o}}return i>t?t:i}},{key:"getLinesViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n,i,r=this._lineHeight,o=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(o),a=0|this._lineCount,u=0|this.getFirstWhitespaceIndexAfterLineNumber(o),l=0|this.getWhitespacesCount();-1===u?(u=l,i=a+1,n=0):(i=0|this.getAfterLineNumberForWhitespaceIndex(u),n=0|this.getHeightForWhitespaceIndex(u));var h=s,c=h,d=5e5,f=0;s>=d&&(f=Math.floor(s/d)*d,c-=f=Math.floor(f/r)*r);for(var g=[],v=e+(t-e)/2,m=-1,p=o;p<=a;p++){if(-1===m){(h<=v&&v<h+r||h>v)&&(m=p)}for(h+=r,g[p-o]=c,c+=r;i===p;)c+=n,h+=n,++u>=l?i=a+1:(i=0|this.getAfterLineNumberForWhitespaceIndex(u),n=0|this.getHeightForWhitespaceIndex(u));if(h>=t){a=p;break}}-1===m&&(m=a);var _=0|this.getVerticalOffsetForLineNumber(a),L=o,k=a;return L<k&&s<e&&L++,L<k&&_+r>t&&k--,{bigNumbersDelta:f,startLineNumber:o,endLineNumber:a,relativeVerticalOffset:g,centeredLineNumber:m,completelyVisibleStartLineNumber:L,completelyVisibleEndLineNumber:k}}},{key:"getVerticalOffsetForWhitespaceIndex",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getAfterLineNumberForWhitespaceIndex(e);return(t>=1?this._lineHeight*t:0)+(e>0?this.getWhitespacesAccumulatedHeight(e-1):0)+this._paddingTop}},{key:"getWhitespaceIndexAtOrAfterVerticallOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(n)+this.getHeightForWhitespaceIndex(n))return-1;for(;t<n;){var i=Math.floor((t+n)/2),r=this.getVerticalOffsetForWhitespaceIndex(i);if(e>=r+this.getHeightForWhitespaceIndex(i))t=i+1;else{if(e>=r)return i;n=i}}return t}},{key:"getWhitespaceAtVerticalOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;var n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;var i=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:i}}},{key:"getWhitespaceViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];for(var r=[],o=n;o<=i;o++){var s=this.getVerticalOffsetForWhitespaceIndex(o),a=this.getHeightForWhitespaceIndex(o);if(s>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:s,height:a})}return r}},{key:"getWhitespaces",value:function(){return this._checkPendingChanges(),this._arr.slice(0)}},{key:"getWhitespacesCount",value:function(){return this._checkPendingChanges(),this._arr.length}},{key:"getIdForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}},{key:"getAfterLineNumberForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}},{key:"getHeightForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}],[{key:"findInsertionIndex",value:function(e,t,n){for(var i=0,r=e.length;i<r;){var o=i+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:i=o+1:t<e[o].afterLineNumber?r=o:i=o+1}return i}}]),e}();x.INSTANCE_COUNT=0;var O=n(42990),E=n(53741),A=function(){function e(t,n,i,r){(0,s.Z)(this,e),(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),(r|=0)<0&&(r=0),this.width=t,this.contentWidth=n,this.scrollWidth=Math.max(t,n),this.height=i,this.contentHeight=r,this.scrollHeight=Math.max(i,r)}return(0,a.Z)(e,[{key:"equals",value:function(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}]),e}(),R=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var r;return(0,s.Z)(this,n),(r=t.call(this))._onDidContentSizeChange=r._register(new P.Q5),r.onDidContentSizeChange=r._onDidContentSizeChange.event,r._dimensions=new A(0,0,0,0),r._scrollable=r._register(new T.Rm({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:i})),r.onDidScroll=r._scrollable.onScroll,r}return(0,a.Z)(n,[{key:"getScrollable",value:function(){return this._scrollable}},{key:"setSmoothScrollDuration",value:function(e){this._scrollable.setSmoothScrollDuration(e)}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"getScrollDimensions",value:function(){return this._dimensions}},{key:"setScrollDimensions",value:function(e){if(!this._dimensions.equals(e)){var t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);var n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new E.zf(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}}},{key:"getFutureScrollPosition",value:function(){return this._scrollable.getFutureScrollPosition()}},{key:"getCurrentScrollPosition",value:function(){return this._scrollable.getCurrentScrollPosition()}},{key:"setScrollPositionNow",value:function(e){this._scrollable.setScrollPositionNow(e)}},{key:"setScrollPositionSmooth",value:function(e){this._scrollable.setScrollPositionSmooth(e)}},{key:"hasPendingScrollAnimation",value:function(){return this._scrollable.hasPendingScrollAnimation()}}]),n}(m.JT),W=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r){var o;(0,s.Z)(this,n),(o=t.call(this))._configuration=e;var a=o._configuration.options,u=a.get(140),l=a.get(81);return o._linesLayout=new x(i,a.get(64),l.top,l.bottom),o._scrollable=o._register(new R(0,r)),o._configureSmoothScrollDuration(),o._scrollable.setScrollDimensions(new A(u.contentWidth,0,u.height,0)),o.onDidScroll=o._scrollable.onDidScroll,o.onDidContentSizeChange=o._scrollable.onDidContentSizeChange,o._updateHeight(),o}return(0,a.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"getScrollable",value:function(){return this._scrollable.getScrollable()}},{key:"onHeightMaybeChanged",value:function(){this._updateHeight()}},{key:"_configureSmoothScrollDuration",value:function(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(110)?125:0)}},{key:"onConfigurationChanged",value:function(e){var t=this._configuration.options;if(e.hasChanged(64)&&this._linesLayout.setLineHeight(t.get(64)),e.hasChanged(81)){var n=t.get(81);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(140)){var i=t.get(140),r=i.contentWidth,o=i.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new A(r,s.contentWidth,o,this._getContentHeight(r,o,a)))}else this._updateHeight();e.hasChanged(110)&&this._configureSmoothScrollDuration()}},{key:"onFlushed",value:function(e){this._linesLayout.onFlushed(e)}},{key:"onLinesDeleted",value:function(e,t){this._linesLayout.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._linesLayout.onLinesInserted(e,t)}},{key:"_getHorizontalScrollbarHeight",value:function(e,t){var n=this._configuration.options.get(99);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}},{key:"_getContentHeight",value:function(e,t,n){var i=this._configuration.options,r=this._linesLayout.getLinesTotalHeight();return i.get(101)?r+=Math.max(0,t-i.get(64)-i.get(81).bottom):r+=this._getHorizontalScrollbarHeight(e,n),r}},{key:"_updateHeight",value:function(){var e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new A(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}},{key:"getCurrentViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new O.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"getFutureViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new O.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"_computeContentWidth",value:function(e){var t=this._configuration.options,n=t.get(141),i=t.get(48),r=t.get(140);if(n.isViewportWrapping){var o=t.get(70);return e>r.contentWidth+i.typicalHalfwidthCharacterWidth&&o.enabled&&"right"===o.side?e+r.verticalScrollbarWidth:e}var s=t.get(100)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s+r.verticalScrollbarWidth,a)}},{key:"setMaxLineWidth",value:function(e){var t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new A(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}},{key:"saveState",value:function(){var e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}},{key:"changeWhitespace",value:function(e){var t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}},{key:"getVerticalOffsetForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}},{key:"getVerticalOffsetAfterLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}},{key:"isAfterLines",value:function(e){return this._linesLayout.isAfterLines(e)}},{key:"isInTopPadding",value:function(e){return this._linesLayout.isInTopPadding(e)}},{key:"isInBottomPadding",value:function(e){return this._linesLayout.isInBottomPadding(e)}},{key:"getLineNumberAtVerticalOffset",value:function(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}},{key:"getWhitespaceAtVerticalOffset",value:function(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}},{key:"getLinesViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}},{key:"getLinesViewportDataAtScrollTop",value:function(e){var t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}},{key:"getWhitespaceViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}},{key:"getWhitespaces",value:function(){return this._linesLayout.getWhitespaces()}},{key:"getContentWidth",value:function(){return this._scrollable.getScrollDimensions().contentWidth}},{key:"getScrollWidth",value:function(){return this._scrollable.getScrollDimensions().scrollWidth}},{key:"getContentHeight",value:function(){return this._scrollable.getScrollDimensions().contentHeight}},{key:"getScrollHeight",value:function(){return this._scrollable.getScrollDimensions().scrollHeight}},{key:"getCurrentScrollLeft",value:function(){return this._scrollable.getCurrentScrollPosition().scrollLeft}},{key:"getCurrentScrollTop",value:function(){return this._scrollable.getCurrentScrollPosition().scrollTop}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"setScrollPosition",value:function(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}},{key:"hasPendingScrollAnimation",value:function(){return this._scrollable.hasPendingScrollAnimation()}},{key:"deltaScrollNow",value:function(e,t){var n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}]),n}(m.JT),H=n(5820),j=n(87947),F=n(17570),z=n(13101),B=n(21605);function U(e,t){return null===e?t?G.INSTANCE:Q.INSTANCE:new q(e,t)}var q=function(){function e(t,n){(0,s.Z)(this,e),this._projectionData=t,this._isVisible=n}return(0,a.Z)(e,[{key:"isVisible",value:function(){return this._isVisible}},{key:"setVisible",value:function(e){return this._isVisible=e,this}},{key:"getProjectionData",value:function(){return this._projectionData}},{key:"getViewLineCount",value:function(){return this._isVisible?this._projectionData.getOutputLineCount():0}},{key:"getViewLineContent",value:function(e,t,n){var i=this;this._assertVisible();var r,o=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];if(null!==this._projectionData.injectionOffsets){var a=this._projectionData.injectionOffsets.map((function(e,t){return new N.gk(0,0,e+1,i._projectionData.injectionOptions[t],0)}));r=N.gk.applyInjectedText(e.getLineContent(t),a).substring(o,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:o+1,endLineNumber:t,endColumn:s+1});return n>0&&(r=K(this._projectionData.wrappedTextIndentLength)+r),r}},{key:"getViewLineLength",value:function(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}},{key:"getViewLineMinColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}},{key:"getViewLineMaxColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}},{key:"getViewLineData",value:function(e,t,n){var i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,s){this._assertVisible();var a,u=this._projectionData,l=u.injectionOffsets,h=u.injectionOptions,c=null;if(l){c=[];for(var d=0,f=0,g=0;g<u.getOutputLineCount();g++){var v=new Array;c[g]=v;for(var m=g>0?u.breakOffsets[g-1]:0,p=u.breakOffsets[g];f<l.length;){var _=h[f].content.length,L=l[f]+d,k=L+_;if(L>p)break;if(m<k){var C=h[f];if(C.inlineClassName){var y=g>0?u.wrappedTextIndentLength:0,w=y+Math.max(L-m,0),b=y+Math.min(k-m,p);w!==b&&v.push(new O.Wx(w,b,C.inlineClassName,C.inlineClassNameAffectsLetterSpacing))}}if(!(k<=p))break;d+=_,f++}}}a=l?e.tokenization.getLineTokens(t).withInserted(l.map((function(e,t){return{offset:e,text:h[t].content,tokenMetadata:B.A.defaultTokenMetadata}}))):e.tokenization.getLineTokens(t);for(var N=n;N<n+i;N++){var V=r+N-n;o[V]?s[V]=this._getViewLineData(a,c?c[N]:null,N):s[V]=null}}},{key:"_getViewLineData",value:function(e,t,n){this._assertVisible();var i=this._projectionData,r=n>0?i.wrappedTextIndentLength:0,o=n>0?i.breakOffsets[n-1]:0,s=i.breakOffsets[n],a=e.sliceAndInflate(o,s,r),u=a.getLineContent();n>0&&(u=K(i.wrappedTextIndentLength)+u);var l=this._projectionData.getMinOutputOffset(n)+1,h=u.length+1,c=n+1<this.getViewLineCount(),d=0===n?0:i.breakOffsetsVisibleColumn[n-1];return new O.IP(u,c,l,h,d,a,t)}},{key:"getModelColumnOfViewPosition",value:function(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}},{key:"getViewPositionOfModelPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._assertVisible(),e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}},{key:"normalizePosition",value:function(e,t,n){var i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}},{key:"getInjectedTextAt",value:function(e,t){return this._projectionData.getInjectedText(e,t-1)}},{key:"_assertVisible",value:function(){if(!this._isVisible)throw new Error("Not supported")}}]),e}(),G=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"isVisible",value:function(){return!0}},{key:"setVisible",value:function(e){return e?this:Q.INSTANCE}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 1}},{key:"getViewLineContent",value:function(e,t,n){return e.getLineContent(t)}},{key:"getViewLineLength",value:function(e,t,n){return e.getLineLength(t)}},{key:"getViewLineMinColumn",value:function(e,t,n){return e.getLineMinColumn(t)}},{key:"getViewLineMaxColumn",value:function(e,t,n){return e.getLineMaxColumn(t)}},{key:"getViewLineData",value:function(e,t,n){var i=e.tokenization.getLineTokens(t),r=i.getLineContent();return new O.IP(r,!1,1,r.length+1,0,i.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,s){o[r]?s[r]=this.getViewLineData(e,t,0):s[r]=null}},{key:"getModelColumnOfViewPosition",value:function(e,t){return t}},{key:"getViewPositionOfModelPosition",value:function(e,t){return new y.L(e,t)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}},{key:"normalizePosition",value:function(e,t,n){return t}},{key:"getInjectedTextAt",value:function(e,t){return null}}]),e}();G.INSTANCE=new G;var Q=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"isVisible",value:function(){return!1}},{key:"setVisible",value:function(e){return e?G.INSTANCE:this}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 0}},{key:"getViewLineContent",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineLength",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMinColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMaxColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineData",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,s){throw new Error("Not supported")}},{key:"getModelColumnOfViewPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewPositionOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"normalizePosition",value:function(e,t,n){throw new Error("Not supported")}},{key:"getInjectedTextAt",value:function(e,t){throw new Error("Not supported")}}]),e}();Q.INSTANCE=new Q;var J=[""];function K(e){if(e>=J.length)for(var t=1;t<=e;t++)J[t]=$(t);return J[e]}function $(e){return new Array(e+1).join(" ")}var Y=n(73110),X=function(){function e(t,n,i,r,o,a,u,l,h,c){(0,s.Z)(this,e),this._editorId=t,this.model=n,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=o,this.tabSize=a,this.wrappingStrategy=u,this.wrappingColumn=l,this.wrappingIndent=h,this.wordBreak=c,this._constructLines(!0,null)}return(0,a.Z)(e,[{key:"dispose",value:function(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}},{key:"createCoordinatesConverter",value:function(){return new ne(this)}},{key:"_constructLines",value:function(e,t){var n=this;this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));for(var i=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),o=i.length,s=this.createLineBreaksComputer(),a=new f.H9(N.gk.fromDecorations(r)),u=function(e){var n=a.takeWhile((function(t){return t.lineNumber===e+1}));s.addRequest(i[e],n,t?t[e]:null)},l=0;l<o;l++)u(l);for(var h=s.finalize(),c=[],d=this.hiddenAreasDecorationIds.map((function(e){return n.model.getDecorationRange(e)})).sort(w.e.compareRangesUsingStarts),g=1,v=0,m=-1,p=m+1<d.length?v+1:o+2,_=0;_<o;_++){var L=_+1;L===p&&(g=d[++m].startLineNumber,v=d[m].endLineNumber,p=m+1<d.length?v+1:o+2);var k=L>=g&&L<=v,C=U(h[_],!k);c[_]=C.getViewLineCount(),this.modelLineProjections[_]=C}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Y.Ck(c)}},{key:"getHiddenAreas",value:function(){var e=this;return this.hiddenAreasDecorationIds.map((function(t){return e.model.getDecorationRange(t)}))}},{key:"setHiddenAreas",value:function(e){var t=this,n=function(e){if(0===e.length)return[];var t=e.slice();t.sort(w.e.compareRangesUsingStarts);for(var n=[],i=t[0].startLineNumber,r=t[0].endLineNumber,o=1,s=t.length;o<s;o++){var a=t[o];a.startLineNumber>r+1?(n.push(new w.e(i,1,r,1)),i=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return n.push(new w.e(i,1,r,1)),n}(e.map((function(e){return t.model.validateRange(e)}))),i=this.hiddenAreasDecorationIds.map((function(e){return t.model.getDecorationRange(e)})).sort(w.e.compareRangesUsingStarts);if(n.length===i.length){for(var r=!1,o=0;o<n.length;o++)if(!n[o].equalsRange(i[o])){r=!0;break}if(!r)return!1}var s=n.map((function(e){return{range:e,options:z.qx.EMPTY}}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);for(var a=n,u=1,l=0,h=-1,c=h+1<a.length?l+1:this.modelLineProjections.length+2,d=!1,f=0;f<this.modelLineProjections.length;f++){var g=f+1;g===c&&(u=a[++h].startLineNumber,l=a[h].endLineNumber,c=h+1<a.length?l+1:this.modelLineProjections.length+2);var v=!1;if(g>=u&&g<=l?this.modelLineProjections[f].isVisible()&&(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!1),v=!0):(d=!0,this.modelLineProjections[f].isVisible()||(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!0),v=!0)),v){var m=this.modelLineProjections[f].getViewLineCount();this.projectedModelLineLineCounts.setValue(f,m)}}return d||this.setHiddenAreas([]),!0}},{key:"modelPositionIsVisible",value:function(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}},{key:"getModelLineViewLineCount",value:function(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}},{key:"setTabSize",value:function(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}},{key:"setWrappingSettings",value:function(e,t,n,i,r){var o=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===n,u=this.wrappingIndent===i,l=this.wordBreak===r;if(o&&s&&a&&u&&l)return!1;var h=o&&s&&!a&&u&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=r;var c=null;if(h){c=[];for(var d=0,f=this.modelLineProjections.length;d<f;d++)c[d]=this.modelLineProjections[d].getProjectionData()}return this._constructLines(!1,c),!0}},{key:"createLineBreaksComputer",value:function(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}},{key:"onModelFlushed",value:function(){this._constructLines(!0,null)}},{key:"onModelLinesDeleted",value:function(e,t,n){if(!e||e<=this._validModelVersionId)return null;var i=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new S.vk(i,r)}},{key:"onModelLinesInserted",value:function(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;for(var r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=0,a=[],u=[],l=0,h=i.length;l<h;l++){var c=U(i[l],!r);a.push(c);var d=c.getViewLineCount();s+=d,u[l]=d}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(a).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,u),new S.K9(o,o+s-1)}},{key:"onModelLineChanged",value:function(e,t,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];var i=t-1,r=this.modelLineProjections[i].getViewLineCount(),o=U(n,this.modelLineProjections[i].isVisible());this.modelLineProjections[i]=o;var s=this.modelLineProjections[i].getViewLineCount(),a=!1,u=0,l=-1,h=0,c=-1,d=0,f=-1;return r>s?(f=(d=(l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+s-1)+1)+(r-s)-1,a=!0):r<s?(c=(h=(l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+r-1)+1)+(s-r)-1,a=!0):l=(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+s-1,this.projectedModelLineLineCounts.setValue(i,s),[a,u<=l?new S.il(u,l-u+1):null,h<=c?new S.K9(h,c):null,d<=f?new S.vk(d,f):null]}},{key:"acceptVersionId",value:function(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}},{key:"getViewLineCount",value:function(){return this.projectedModelLineLineCounts.getTotalSum()}},{key:"_toValidViewLineNumber",value:function(e){if(e<1)return 1;var t=this.getViewLineCount();return e>t?t:0|e}},{key:"getActiveIndentGuide",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);var i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),s=this.model.guides.getActiveIndentGuide(i.lineNumber,r.lineNumber,o.lineNumber),a=this.convertModelPositionToViewPosition(s.startLineNumber,1),u=this.convertModelPositionToViewPosition(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:u.lineNumber,indent:s.indent}}},{key:"getViewLineInfo",value:function(e){e=this._toValidViewLineNumber(e);var t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new ee(n+1,i)}},{key:"getMinColumnOfViewLine",value:function(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}},{key:"getMaxColumnOfViewLine",value:function(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}},{key:"getModelStartPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new y.L(e.modelLineNumber,i)}},{key:"getModelEndPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new y.L(e.modelLineNumber,i)}},{key:"getViewLineInfosGroupedByModelRanges",value:function(e,t){for(var n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),r=new Array,o=this.getModelStartPositionOfViewLine(n),s=new Array,a=n.modelLineNumber;a<=i.modelLineNumber;a++){var u=this.modelLineProjections[a-1];if(u.isVisible())for(var l=a===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=a===i.modelLineNumber?i.modelLineWrappedLineIdx+1:u.getViewLineCount(),c=l;c<h;c++)s.push(new ee(a,c));if(!u.isVisible()&&o){var d=new y.L(a-1,this.model.getLineMaxColumn(a-1)+1),f=w.e.fromPositions(o,d);r.push(new te(f,s)),s=[],o=null}else u.isVisible()&&!o&&(o=new y.L(a,1))}if(o){var g=w.e.fromPositions(o,this.getModelEndPositionOfViewLine(i));r.push(new te(g,s))}return r}},{key:"getViewLinesBracketGuides",value:function(e,t,n,i){var r,s=this,a=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,u=[],l=(0,o.Z)(this.getViewLineInfosGroupedByModelRanges(e,t));try{for(l.s();!(r=l.n()).done;){var h,c=r.value,d=c.modelRange.startLineNumber,f=this.model.guides.getLinesBracketGuides(d,c.modelRange.endLineNumber,a,i),g=(0,o.Z)(c.viewLines);try{var v=function(){var e=h.value,t=f[e.modelLineNumber-d].map((function(t){if(-1!==t.forWrappedLinesAfterColumn&&s.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesAfterColumn).lineNumber>=e.modelLineWrappedLineIdx)return;if(-1!==t.forWrappedLinesBeforeOrAtColumn&&s.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesBeforeOrAtColumn).lineNumber<e.modelLineWrappedLineIdx)return;if(!t.horizontalLine)return t;var n=-1;if(-1!==t.column){var i=s.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.column);if(i.lineNumber===e.modelLineWrappedLineIdx)n=i.column;else if(i.lineNumber<e.modelLineWrappedLineIdx)n=s.getMinColumnOfViewLine(e);else if(i.lineNumber>e.modelLineWrappedLineIdx)return}var r=s.convertModelPositionToViewPosition(e.modelLineNumber,t.horizontalLine.endColumn),o=s.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.horizontalLine.endColumn);return o.lineNumber===e.modelLineWrappedLineIdx?new F.UO(t.visibleColumn,n,t.className,new F.vW(t.horizontalLine.top,r.column),-1,-1):o.lineNumber<e.modelLineWrappedLineIdx||-1!==t.visibleColumn?void 0:new F.UO(t.visibleColumn,n,t.className,new F.vW(t.horizontalLine.top,s.getMaxColumnOfViewLine(e)),-1,-1)}));u.push(t.filter((function(e){return!!e})))};for(g.s();!(h=g.n()).done;)v()}catch(m){g.e(m)}finally{g.f()}}}catch(m){l.e(m)}finally{l.f()}return u}},{key:"getViewLinesIndentGuides",value:function(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),r=[],o=[],s=[],a=n.lineNumber-1,u=i.lineNumber-1,l=null,h=a;h<=u;h++){var c=this.modelLineProjections[h];if(c.isVisible()){var d=c.getViewLineNumberOfModelPosition(0,h===a?n.column:1),f=c.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(h+1)),g=f-d+1,v=0;g>1&&1===c.getViewLineMinColumn(this.model,h+1,f)&&(v=0===d?1:2),o.push(g),s.push(v),null===l&&(l=new y.L(h+1,0))}else null!==l&&(r=r.concat(this.model.guides.getLinesIndentGuides(l.lineNumber,h)),l=null)}null!==l&&(r=r.concat(this.model.guides.getLinesIndentGuides(l.lineNumber,i.lineNumber)),l=null);for(var m=t-e+1,p=new Array(m),_=0,L=0,k=r.length;L<k;L++){var C=r[L],w=Math.min(m-_,o[L]),b=s[L],N=void 0;N=2===b?0:1===b?1:w;for(var V=0;V<w;V++)V===N&&(C=0),p[_++]=C}return p}},{key:"getViewLineContent",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineLength",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMinColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMaxColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineData",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLinesData",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var i=this.projectedModelLineLineCounts.getIndexOf(e-1),r=e,o=i.index,s=i.remainder,a=[],u=o,l=this.model.getLineCount();u<l;u++){var h=this.modelLineProjections[u];if(h.isVisible()){var c=u===o?s:0,d=h.getViewLineCount()-c,f=!1;if(r+d>t&&(f=!0,d=t-r+1),h.getViewLinesData(this.model,u+1,c,d,r-e,n,a),r+=d,f)break}}return a}},{key:"validateViewPosition",value:function(e,t,n){e=this._toValidViewLineNumber(e);var i=this.projectedModelLineLineCounts.getIndexOf(e-1),r=i.index,o=i.remainder,s=this.modelLineProjections[r],a=s.getViewLineMinColumn(this.model,r+1,o),u=s.getViewLineMaxColumn(this.model,r+1,o);t<a&&(t=a),t>u&&(t=u);var l=s.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new y.L(r+1,l)).equals(n)?new y.L(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}},{key:"validateViewRange",value:function(e,t){var n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new w.e(n.lineNumber,n.column,i.lineNumber,i.column)}},{key:"convertViewPositionToModelPosition",value:function(e,t){var n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new y.L(n.modelLineNumber,i))}},{key:"convertViewRangeToModelRange",value:function(e){var t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new w.e(t.lineNumber,t.column,n.lineNumber,n.column)}},{key:"convertModelPositionToViewPosition",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=this.model.validatePosition(new y.L(e,t)),r=i.lineNumber,o=i.column,s=r-1,a=!1;s>0&&!this.modelLineProjections[s].isVisible();)s--,a=!0;if(0===s&&!this.modelLineProjections[s].isVisible())return new y.L(1,1);var u=1+this.projectedModelLineLineCounts.getPrefixSum(s);return a?this.modelLineProjections[s].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(s+1),n):this.modelLineProjections[r-1].getViewPositionOfModelPosition(u,o,n)}},{key:"convertModelRangeToViewRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){var n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return w.e.fromPositions(n)}var i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new w.e(i.lineNumber,i.column,r.lineNumber,r.column)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){var n=e-1;if(this.modelLineProjections[n].isVisible()){var i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;var r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}},{key:"getDecorationsInRange",value:function(e,t,n,i,r){var s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new w.e(s.lineNumber,1,a.lineNumber,a.column),t,n,i,r);for(var u=[],l=s.lineNumber-1,h=a.lineNumber-1,c=null,d=l;d<=h;d++){if(this.modelLineProjections[d].isVisible())null===c&&(c=new y.L(d+1,d===l?s.column:1));else if(null!==c){var f=this.model.getLineMaxColumn(d);u=u.concat(this.model.getDecorationsInRange(new w.e(c.lineNumber,c.column,d,f),t,n,i)),c=null}}null!==c&&(u=u.concat(this.model.getDecorationsInRange(new w.e(c.lineNumber,c.column,a.lineNumber,a.column),t,n,i)),c=null),u.sort((function(e,t){var n=w.e.compareRangesUsingStarts(e.range,t.range);return 0===n?e.id<t.id?-1:e.id>t.id?1:0:n}));var g,v=[],m=0,p=null,_=(0,o.Z)(u);try{for(_.s();!(g=_.n()).done;){var L=g.value,k=L.id;p!==k&&(p=k,v[m++]=L)}}catch(C){_.e(C)}finally{_.f()}return v}},{key:"getInjectedTextAt",value:function(e){var t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}},{key:"normalizePosition",value:function(e,t){var n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}},{key:"getLineIndentColumn",value:function(e){var t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}]),e}();var ee=(0,a.Z)((function e(t,n){(0,s.Z)(this,e),this.modelLineNumber=t,this.modelLineWrappedLineIdx=n})),te=(0,a.Z)((function e(t,n){(0,s.Z)(this,e),this.modelRange=t,this.viewLines=n})),ne=function(){function e(t){(0,s.Z)(this,e),this._lines=t}return(0,a.Z)(e,[{key:"convertViewPositionToModelPosition",value:function(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}},{key:"convertViewRangeToModelRange",value:function(e){return this._lines.convertViewRangeToModelRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}},{key:"validateViewRange",value:function(e,t){return this._lines.validateViewRange(e,t)}},{key:"convertModelPositionToViewPosition",value:function(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}},{key:"convertModelRangeToViewRange",value:function(e,t){return this._lines.convertModelRangeToViewRange(e,t)}},{key:"modelPositionIsVisible",value:function(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}},{key:"getModelLineViewLineCount",value:function(e){return this._lines.getModelLineViewLineCount(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}]),e}(),ie=function(){function e(t){(0,s.Z)(this,e),this.model=t}return(0,a.Z)(e,[{key:"dispose",value:function(){}},{key:"createCoordinatesConverter",value:function(){return new re(this)}},{key:"getHiddenAreas",value:function(){return[]}},{key:"setHiddenAreas",value:function(e){return!1}},{key:"setTabSize",value:function(e){return!1}},{key:"setWrappingSettings",value:function(e,t,n,i){return!1}},{key:"createLineBreaksComputer",value:function(){var e=[];return{addRequest:function(t,n,i){e.push(null)},finalize:function(){return e}}}},{key:"onModelFlushed",value:function(){}},{key:"onModelLinesDeleted",value:function(e,t,n){return new S.vk(t,n)}},{key:"onModelLinesInserted",value:function(e,t,n,i){return new S.K9(t,n)}},{key:"onModelLineChanged",value:function(e,t,n){return[!1,new S.il(t,1),null,null]}},{key:"acceptVersionId",value:function(e){}},{key:"getViewLineCount",value:function(){return this.model.getLineCount()}},{key:"getActiveIndentGuide",value:function(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}},{key:"getViewLinesBracketGuides",value:function(e,t,n){return new Array(t-e+1).fill([])}},{key:"getViewLinesIndentGuides",value:function(e,t){for(var n=t-e+1,i=new Array(n),r=0;r<n;r++)i[r]=0;return i}},{key:"getViewLineContent",value:function(e){return this.model.getLineContent(e)}},{key:"getViewLineLength",value:function(e){return this.model.getLineLength(e)}},{key:"getViewLineMinColumn",value:function(e){return this.model.getLineMinColumn(e)}},{key:"getViewLineMaxColumn",value:function(e){return this.model.getLineMaxColumn(e)}},{key:"getViewLineData",value:function(e){var t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new O.IP(n,!1,1,n.length+1,0,t.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n){var i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);for(var r=[],o=e;o<=t;o++){var s=o-e;r[s]=n[s]?this.getViewLineData(o):null}return r}},{key:"getDecorationsInRange",value:function(e,t,n,i,r){return this.model.getDecorationsInRange(e,t,n,i,r)}},{key:"normalizePosition",value:function(e,t){return this.model.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this.model.getLineIndentColumn(e)}},{key:"getInjectedTextAt",value:function(e){return null}}]),e}(),re=function(){function e(t){(0,s.Z)(this,e),this._lines=t}return(0,a.Z)(e,[{key:"_validPosition",value:function(e){return this._lines.model.validatePosition(e)}},{key:"_validRange",value:function(e){return this._lines.model.validateRange(e)}},{key:"convertViewPositionToModelPosition",value:function(e){return this._validPosition(e)}},{key:"convertViewRangeToModelRange",value:function(e){return this._validRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._validPosition(t)}},{key:"validateViewRange",value:function(e,t){return this._validRange(t)}},{key:"convertModelPositionToViewPosition",value:function(e){return this._validPosition(e)}},{key:"convertModelRangeToViewRange",value:function(e){return this._validRange(e)}},{key:"modelPositionIsVisible",value:function(e){var t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}},{key:"getModelLineViewLineCount",value:function(e){return 1}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}}]),e}(),oe=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,r,o,a,l,h,c,d){var f;if((0,s.Z)(this,n),(f=t.call(this)).languageConfigurationService=h,f._themeService=c,f._attachedView=d,f.hiddenAreasModel=new ue,f.previousHiddenAreas=[],f._editorId=e,f._configuration=i,f.model=r,f._eventDispatcher=new E.nu,f.onEvent=f._eventDispatcher.onEvent,f.cursorConfig=new C.LM(f.model.getLanguageId(),f.model.getOptions(),f._configuration,f.languageConfigurationService),f._updateConfigurationViewLineCount=f._register(new g.pY((function(){return f._updateConfigurationViewLineCountNow()}),0)),f._hasFocus=!1,f._viewportStart=se.create(f.model),f.model.isTooLargeForTokenization())f._lines=new ie(f.model);else{var v=f._configuration.options,m=v.get(48),p=v.get(134),_=v.get(141),L=v.get(133),y=v.get(125);f._lines=new X(f._editorId,f.model,o,a,m,f.model.getOptions().tabSize,p,_.wrappingColumn,L,y)}return f.coordinatesConverter=f._lines.createCoordinatesConverter(),f._cursor=f._register(new k.U(r,(0,u.Z)(f),f.coordinatesConverter,f.cursorConfig)),f.viewLayout=f._register(new W(f._configuration,f.getLineCount(),l)),f._register(f.viewLayout.onDidScroll((function(e){e.scrollTopChanged&&f._handleVisibleLinesChanged(),e.scrollTopChanged&&f._viewportStart.invalidate(),f._eventDispatcher.emitSingleViewEvent(new S.Ay(e)),f._eventDispatcher.emitOutgoingEvent(new E.Pt(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),f._register(f.viewLayout.onDidContentSizeChange((function(e){f._eventDispatcher.emitOutgoingEvent(e)}))),f._decorations=new j.CU(f._editorId,f.model,f._configuration,f._lines,f.coordinatesConverter),f._registerModelEvents(),f._register(f._configuration.onDidChangeFast((function(e){try{var t=f._eventDispatcher.beginEmitViewEvents();f._onConfigurationChanged(t,e)}finally{f._eventDispatcher.endEmitViewEvents()}}))),f._register(H.E.getInstance().onDidChange((function(){f._eventDispatcher.emitSingleViewEvent(new S.uc)}))),f._register(f._themeService.onDidColorThemeChange((function(e){f._invalidateDecorationsColorCache(),f._eventDispatcher.emitSingleViewEvent(new S.Hf(e))}))),f._updateConfigurationViewLineCountNow(),f}return(0,a.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}},{key:"createLineBreaksComputer",value:function(){return this._lines.createLineBreaksComputer()}},{key:"addViewEventHandler",value:function(e){this._eventDispatcher.addViewEventHandler(e)}},{key:"removeViewEventHandler",value:function(e){this._eventDispatcher.removeViewEventHandler(e)}},{key:"_updateConfigurationViewLineCountNow",value:function(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}},{key:"getModelVisibleRanges",value:function(){var e=this.viewLayout.getLinesViewportData(),t=new w.e(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}},{key:"visibleLinesStabilized",value:function(){var e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}},{key:"_handleVisibleLinesChanged",value:function(){var e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}},{key:"setHasFocus",value:function(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new S.SJ(e)),this._eventDispatcher.emitOutgoingEvent(new E.Zw(!e,e))}},{key:"onCompositionStart",value:function(){this._eventDispatcher.emitSingleViewEvent(new S.JP)}},{key:"onCompositionEnd",value:function(){this._eventDispatcher.emitSingleViewEvent(new S.IN)}},{key:"_captureStableViewport",value:function(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){var e=new y.L(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new he(t,this._viewportStart.startLineDelta)}return new he(null,0)}},{key:"_onConfigurationChanged",value:function(e,t){var n=this._captureStableViewport(),i=this._configuration.options,r=i.get(48),o=i.get(134),s=i.get(141),a=i.get(133),u=i.get(125);this._lines.setWrappingSettings(r,o,s.wrappingColumn,a,u)&&(e.emitViewEvent(new S.CL),e.emitViewEvent(new S.d8),e.emitViewEvent(new S.vA(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(88)&&(this._decorations.reset(),e.emitViewEvent(new S.vA(null))),e.emitViewEvent(new S.x4(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),C.LM.shouldRecreate(t)&&(this.cursorConfig=new C.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}},{key:"_registerModelEvents",value:function(){var e=this;this._register(this.model.onDidChangeContentOrInjectedText((function(t){try{var n,i=e._eventDispatcher.beginEmitViewEvents(),s=!1,a=!1,u=t instanceof N.fV?t.rawContentChangedEvent.changes:t.changes,l=t instanceof N.fV?t.rawContentChangedEvent.versionId:null,h=e._lines.createLineBreaksComputer(),c=(0,o.Z)(u);try{for(c.s();!(n=c.n()).done;){var d=n.value;switch(d.changeType){case 4:for(var g=0;g<d.detail.length;g++){var v=d.detail[g],m=d.injectedTexts[g];m&&(m=m.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),h.addRequest(v,m,null)}break;case 2:var p=null;d.injectedText&&(p=d.injectedText.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),h.addRequest(d.detail,p,null)}}}catch(j){c.e(j)}finally{c.f()}var _,L=h.finalize(),k=new f.H9(L),C=(0,o.Z)(u);try{for(C.s();!(_=C.n()).done;){var y=_.value;switch(y.changeType){case 1:e._lines.onModelFlushed(),i.emitViewEvent(new S.CL),e._decorations.reset(),e.viewLayout.onFlushed(e.getLineCount()),s=!0;break;case 3:var w=e._lines.onModelLinesDeleted(l,y.fromLineNumber,y.toLineNumber);null!==w&&(i.emitViewEvent(w),e.viewLayout.onLinesDeleted(w.fromLineNumber,w.toLineNumber)),s=!0;break;case 4:var b=k.takeCount(y.detail.length),V=e._lines.onModelLinesInserted(l,y.fromLineNumber,y.toLineNumber,b);null!==V&&(i.emitViewEvent(V),e.viewLayout.onLinesInserted(V.fromLineNumber,V.toLineNumber)),s=!0;break;case 2:var I=k.dequeue(),M=e._lines.onModelLineChanged(l,y.lineNumber,I),P=(0,r.Z)(M,4),T=P[0],D=P[1],Z=P[2],x=P[3];a=T,D&&i.emitViewEvent(D),Z&&(i.emitViewEvent(Z),e.viewLayout.onLinesInserted(Z.fromLineNumber,Z.toLineNumber)),x&&(i.emitViewEvent(x),e.viewLayout.onLinesDeleted(x.fromLineNumber,x.toLineNumber))}}}catch(j){C.e(j)}finally{C.f()}null!==l&&e._lines.acceptVersionId(l),e.viewLayout.onHeightMaybeChanged(),!s&&a&&(i.emitViewEvent(new S.d8),i.emitViewEvent(new S.vA(null)),e._cursor.onLineMappingChanged(i),e._decorations.onLineMappingChanged())}finally{e._eventDispatcher.endEmitViewEvents()}var O=e._viewportStart.isValid;if(e._viewportStart.invalidate(),e._configuration.setModelLineCount(e.model.getLineCount()),e._updateConfigurationViewLineCountNow(),!e._hasFocus&&e.model.getAttachedEditorCount()>=2&&O){var A=e.model._getTrackedRange(e._viewportStart.modelTrackedRange);if(A){var R=e.coordinatesConverter.convertModelPositionToViewPosition(A.getStartPosition()),W=e.viewLayout.getVerticalOffsetForLineNumber(R.lineNumber);e.viewLayout.setScrollPosition({scrollTop:W+e._viewportStart.startLineDelta},1)}}try{var H=e._eventDispatcher.beginEmitViewEvents();t instanceof N.fV&&H.emitOutgoingEvent(new E.P2(t.contentChangedEvent)),e._cursor.onModelContentChanged(H,t)}finally{e._eventDispatcher.endEmitViewEvents()}e._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((function(t){for(var n=[],i=0,r=t.ranges.length;i<r;i++){var o=t.ranges[i],s=e.coordinatesConverter.convertModelPositionToViewPosition(new y.L(o.fromLineNumber,1)).lineNumber,a=e.coordinatesConverter.convertModelPositionToViewPosition(new y.L(o.toLineNumber,e.model.getLineMaxColumn(o.toLineNumber))).lineNumber;n[i]={fromLineNumber:s,toLineNumber:a}}e._eventDispatcher.emitSingleViewEvent(new S.H9(n)),e._eventDispatcher.emitOutgoingEvent(new E.$X(t))}))),this._register(this.model.onDidChangeLanguageConfiguration((function(t){e._eventDispatcher.emitSingleViewEvent(new S._0),e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new E.iH(t))}))),this._register(this.model.onDidChangeLanguage((function(t){e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new E.ZX(t))}))),this._register(this.model.onDidChangeOptions((function(t){if(e._lines.setTabSize(e.model.getOptions().tabSize)){try{var n=e._eventDispatcher.beginEmitViewEvents();n.emitViewEvent(new S.CL),n.emitViewEvent(new S.d8),n.emitViewEvent(new S.vA(null)),e._cursor.onLineMappingChanged(n),e._decorations.onLineMappingChanged(),e.viewLayout.onFlushed(e.getLineCount())}finally{e._eventDispatcher.endEmitViewEvents()}e._updateConfigurationViewLineCount.schedule()}e.cursorConfig=new C.LM(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new E.q2(t))}))),this._register(this.model.onDidChangeDecorations((function(t){var n,i;if(e._decorations.onModelDecorationsChanged(),t.affectsGlyphMargin){var r=e.model.getAllMarginDecorations(),s=!1;r.sort((function(e,t){return w.e.compareRangesUsingStarts(e.range,t.range)}));var a,u=null,l=null,h=(0,o.Z)(r);try{for(h.s();!(a=h.n()).done;){var c=a.value,d=null!==(i=null===(n=c.options.glyphMargin)||void 0===n?void 0:n.position)&&void 0!==i?i:b.U.Left;if(d===b.U.Left&&(!u||w.e.compareRangesUsingEnds(u,c.range)<0)&&(u=c.range),d===b.U.Right&&(!l||w.e.compareRangesUsingEnds(l,c.range)<0)&&(l=c.range),u&&l){if(u.endLineNumber<l.startLineNumber){u=null;continue}if(l.endLineNumber<u.startLineNumber){l=null;continue}s=!0;break}}}catch(f){h.e(f)}finally{h.f()}e._configuration.setGlyphMarginDecorationLaneCount(s?2:1)}e._eventDispatcher.emitSingleViewEvent(new S.vA(t)),e._eventDispatcher.emitOutgoingEvent(new E.Pb(t))})))}},{key:"setHiddenAreas",value:function(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);var n=this.hiddenAreasModel.getMergedRanges();if(n!==this.previousHiddenAreas){this.previousHiddenAreas=n;var i=this._captureStableViewport(),r=!1;try{var o=this._eventDispatcher.beginEmitViewEvents();(r=this._lines.setHiddenAreas(n))&&(o.emitViewEvent(new S.CL),o.emitViewEvent(new S.d8),o.emitViewEvent(new S.vA(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new E.Sh)}}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){var e=this._configuration.options.get(140),t=this._configuration.options.get(64),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),r=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new w.e(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}},{key:"getVisibleRanges",value:function(){var e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}},{key:"getHiddenAreas",value:function(){return this._lines.getHiddenAreas()}},{key:"_toModelVisibleRanges",value:function(e){var t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(0===n.length)return[t];for(var i=[],r=0,o=t.startLineNumber,s=t.startColumn,a=t.endLineNumber,u=t.endColumn,l=0,h=n.length;l<h;l++){var c=n[l].startLineNumber,d=n[l].endLineNumber;d<o||(c>a||(o<c&&(i[r++]=new w.e(o,s,c-1,this.model.getLineMaxColumn(c-1))),o=d+1,s=1))}return(o<a||o===a&&s<u)&&(i[r++]=new w.e(o,s,a,u)),i}},{key:"getCompletelyVisibleViewRange",value:function(){var e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new w.e(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}},{key:"getCompletelyVisibleViewRangeAtScrollTop",value:function(e){var t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new w.e(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}},{key:"saveState",value:function(){var e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new y.L(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:r}}},{key:"reduceRestoreState",value:function(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);var t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}},{key:"_reduceRestoreStateCompatibility",value:function(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}},{key:"getTabSize",value:function(){return this.model.getOptions().tabSize}},{key:"getLineCount",value:function(){return this._lines.getViewLineCount()}},{key:"setViewport",value:function(e,t,n){this._viewportStart.update(this,e)}},{key:"getActiveIndentGuide",value:function(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}},{key:"getLinesIndentGuides",value:function(e,t){return this._lines.getViewLinesIndentGuides(e,t)}},{key:"getBracketGuidesInRangeByLine",value:function(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}},{key:"getLineContent",value:function(e){return this._lines.getViewLineContent(e)}},{key:"getLineLength",value:function(e){return this._lines.getViewLineLength(e)}},{key:"getLineMinColumn",value:function(e){return this._lines.getViewLineMinColumn(e)}},{key:"getLineMaxColumn",value:function(e){return this._lines.getViewLineMaxColumn(e)}},{key:"getLineFirstNonWhitespaceColumn",value:function(e){var t=_.LC(this.getLineContent(e));return-1===t?0:t+1}},{key:"getLineLastNonWhitespaceColumn",value:function(e){var t=_.ow(this.getLineContent(e));return-1===t?0:t+2}},{key:"getMinimapDecorationsInRange",value:function(e){return this._decorations.getMinimapDecorationsInRange(e)}},{key:"getDecorationsInViewport",value:function(e){return this._decorations.getDecorationsViewportData(e).decorations}},{key:"getInjectedTextAt",value:function(e){return this._lines.getInjectedTextAt(e)}},{key:"getViewportViewLineRenderingData",value:function(e,t){var n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}},{key:"getViewLineRenderingData",value:function(e){var t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}},{key:"_getViewLineRenderingData",value:function(e,t){var n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),s=this._lines.getViewLineData(e);return s.inlineDecorations&&(t=[].concat((0,i.Z)(t),(0,i.Z)(s.inlineDecorations.map((function(t){return t.toInlineDecoration(e)}))))),new O.wA(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,r,s.tokens,t,o,s.startVisibleColumn)}},{key:"getViewLineData",value:function(e){return this._lines.getViewLineData(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,n){var i=this._lines.getViewLinesData(e,t,n);return new O.ud(this.getTabSize(),i)}},{key:"getAllOverviewRulerDecorations",value:function(e){var t,n=this.model.getOverviewRulerDecorations(this._editorId,(0,L.$J)(this._configuration.options)),i=new ae,r=(0,o.Z)(n);try{for(r.s();!(t=r.n()).done;){var s=t.value,a=s.options,u=a.overviewRuler;if(u){var l=u.position;if(0!==l){var h=u.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(h,a.zIndex,c,d,l)}}}}catch(f){r.e(f)}finally{r.f()}return i.asArray}},{key:"_invalidateDecorationsColorCache",value:function(){var e,t=this.model.getOverviewRulerDecorations(),n=(0,o.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.options.overviewRuler;null===r||void 0===r||r.invalidateCachedColor();var s=i.options.minimap;null===s||void 0===s||s.invalidateCachedColor()}}catch(a){n.e(a)}finally{n.f()}}},{key:"getValueInRange",value:function(e,t){var n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}},{key:"getValueLengthInRange",value:function(e,t){var n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}},{key:"modifyPosition",value:function(e,t){var n=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(n,t)}},{key:"deduceModelPositionRelativeToViewPosition",value:function(e,t,n){var i=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=n:t+=n);var r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}},{key:"getPlainTextToCopy",value:function(e,t,n){var i=n?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(w.e.compareRangesUsingStarts);var r,s=!1,a=!1,u=(0,o.Z)(e);try{for(u.s();!(r=u.n()).done;){r.value.isEmpty()?s=!0:a=!0}}catch(y){u.e(y)}finally{u.f()}if(!a){if(!t)return"";for(var l=e.map((function(e){return e.startLineNumber})),h="",c=0;c<l.length;c++)c>0&&l[c-1]===l[c]||(h+=this.model.getLineContent(l[c])+i);return h}if(s&&t){var d,f=[],g=0,v=(0,o.Z)(e);try{for(v.s();!(d=v.n()).done;){var m=d.value,p=m.startLineNumber;m.isEmpty()?p!==g&&f.push(this.model.getLineContent(p)):f.push(this.model.getValueInRange(m,n?2:0)),g=p}}catch(y){v.e(y)}finally{v.f()}return 1===f.length?f[0]:f}var _,L=[],k=(0,o.Z)(e);try{for(k.s();!(_=k.n()).done;){var C=_.value;C.isEmpty()||L.push(this.model.getValueInRange(C,n?2:0))}}catch(y){k.e(y)}finally{k.f()}return 1===L.length?L[0]:L}},{key:"getRichTextToCopy",value:function(e,t){var n=this.model.getLanguageId();if(n===I.bd)return null;if(1!==e.length)return null;var i=e[0];if(i.isEmpty()){if(!t)return null;var r=i.startLineNumber;i=new w.e(r,this.model.getLineMinColumn(r),r,this.model.getLineMaxColumn(r))}var o,s=this._configuration.options.get(48),a=this._getColorMap();if(/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===L.hL.fontFamily)o=L.hL.fontFamily;else{if(o=(o=s.fontFamily).replace(/"/g,"'"),!/[,']/.test(o))/[+ ]/.test(o)&&(o="'".concat(o,"'"));o="".concat(o,", ").concat(L.hL.fontFamily)}return{mode:n,html:'<div style="'+"color: ".concat(a[1],";")+"background-color: ".concat(a[2],";")+"font-family: ".concat(o,";")+"font-weight: ".concat(s.fontWeight,";")+"font-size: ".concat(s.fontSize,"px;")+"line-height: ".concat(s.lineHeight,"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,a)+"</div>"}}},{key:"_getHTMLToCopy",value:function(e,t){for(var n=e.startLineNumber,i=e.startColumn,r=e.endLineNumber,o=e.endColumn,s=this.getTabSize(),a="",u=n;u<=r;u++){var l=this.model.tokenization.getLineTokens(u),h=l.getLineContent(),c=u===n?i-1:0,d=u===r?o-1:h.length;a+=""===h?"<br>":(0,M.Fq)(h,l.inflate(),t,c,d,s,p.ED)}return a}},{key:"_getColorMap",value:function(){var e=V.RW.getColorMap(),t=["#000000"];if(e)for(var n=1,i=e.length;n<i;n++)t[n]=v.Il.Format.CSS.formatHex(e[n]);return t}},{key:"getPrimaryCursorState",value:function(){return this._cursor.getPrimaryCursorState()}},{key:"getLastAddedCursorIndex",value:function(){return this._cursor.getLastAddedCursorIndex()}},{key:"getCursorStates",value:function(){return this._cursor.getCursorStates()}},{key:"setCursorStates",value:function(e,t,n){var i=this;return this._withViewEventsCollector((function(r){return i._cursor.setStates(r,e,t,n)}))}},{key:"getCursorColumnSelectData",value:function(){return this._cursor.getCursorColumnSelectData()}},{key:"getCursorAutoClosedCharacters",value:function(){return this._cursor.getAutoClosedCharacters()}},{key:"setCursorColumnSelectData",value:function(e){this._cursor.setCursorColumnSelectData(e)}},{key:"getPrevEditOperationType",value:function(){return this._cursor.getPrevEditOperationType()}},{key:"setPrevEditOperationType",value:function(e){this._cursor.setPrevEditOperationType(e)}},{key:"getSelection",value:function(){return this._cursor.getSelection()}},{key:"getSelections",value:function(){return this._cursor.getSelections()}},{key:"getPosition",value:function(){return this._cursor.getPrimaryCursorState().modelState.position}},{key:"setSelections",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((function(r){return n._cursor.setSelections(r,e,t,i)}))}},{key:"saveCursorState",value:function(){return this._cursor.saveState()}},{key:"restoreCursorState",value:function(e){var t=this;this._withViewEventsCollector((function(n){return t._cursor.restoreState(n,e)}))}},{key:"_executeCursorEdit",value:function(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new E.Ki):this._withViewEventsCollector(e)}},{key:"executeEdits",value:function(e,t,n){var i=this;this._executeCursorEdit((function(r){return i._cursor.executeEdits(r,e,t,n)}))}},{key:"startComposition",value:function(){var e=this;this._executeCursorEdit((function(t){return e._cursor.startComposition(t)}))}},{key:"endComposition",value:function(e){var t=this;this._executeCursorEdit((function(n){return t._cursor.endComposition(n,e)}))}},{key:"type",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.type(i,e,t)}))}},{key:"compositionType",value:function(e,t,n,i,r){var o=this;this._executeCursorEdit((function(s){return o._cursor.compositionType(s,e,t,n,i,r)}))}},{key:"paste",value:function(e,t,n,i){var r=this;this._executeCursorEdit((function(o){return r._cursor.paste(o,e,t,n,i)}))}},{key:"cut",value:function(e){var t=this;this._executeCursorEdit((function(n){return t._cursor.cut(n,e)}))}},{key:"executeCommand",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommand(i,e,t)}))}},{key:"executeCommands",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommands(i,e,t)}))}},{key:"revealPrimaryCursor",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((function(r){return n._cursor.revealPrimary(r,e,i,0,t,0)}))}},{key:"revealTopMostCursor",value:function(e){var t=this._cursor.getTopMostViewPosition(),n=new w.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new S.Qb(e,!1,n,null,0,!0,0))}))}},{key:"revealBottomMostCursor",value:function(e){var t=this._cursor.getBottomMostViewPosition(),n=new w.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new S.Qb(e,!1,n,null,0,!0,0))}))}},{key:"revealRange",value:function(e,t,n,i,r){this._withViewEventsCollector((function(o){return o.emitViewEvent(new S.Qb(e,!1,n,null,i,t,r))}))}},{key:"changeWhitespace",value:function(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new S.Ic),this._eventDispatcher.emitOutgoingEvent(new E.Ic))}},{key:"_withViewEventsCollector",value:function(e){try{return e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}},{key:"normalizePosition",value:function(e,t){return this._lines.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this._lines.getLineIndentColumn(e)}}]),n}(m.JT),se=function(){function e(t,n,i,r,o){(0,s.Z)(this,e),this._model=t,this._viewLineNumber=n,this._isValid=i,this._modelTrackedRange=r,this._startLineDelta=o}return(0,a.Z)(e,[{key:"viewLineNumber",get:function(){return this._viewLineNumber}},{key:"isValid",get:function(){return this._isValid}},{key:"modelTrackedRange",get:function(){return this._modelTrackedRange}},{key:"startLineDelta",get:function(){return this._startLineDelta}},{key:"dispose",value:function(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}},{key:"update",value:function(e,t){var n=e.coordinatesConverter.convertViewPositionToModelPosition(new y.L(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new w.e(n.lineNumber,n.column,n.lineNumber,n.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=o-r}},{key:"invalidate",value:function(){this._isValid=!1}}],[{key:"create",value:function(t){var n=t._setTrackedRange(null,new w.e(1,1,1,1),1);return new e(t,1,!1,n,0)}}]),e}(),ae=function(){function e(){(0,s.Z)(this,e),this._asMap=Object.create(null),this.asArray=[]}return(0,a.Z)(e,[{key:"accept",value:function(e,t,n,i,r){var o=this._asMap[e];if(o){var s=o.data,a=s[s.length-3],u=s[s.length-1];if(a===r&&u+1>=n)return void(i>u&&(s[s.length-1]=i));s.push(r,n,i)}else{var l=new O.SQ(e,t,[r,n,i]);this._asMap[e]=l,this.asArray.push(l)}}}]),e}(),ue=function(){function e(){(0,s.Z)(this,e),this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}return(0,a.Z)(e,[{key:"setHiddenAreas",value:function(e,t){var n=this.hiddenAreas.get(e);n&&le(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}},{key:"getMergedRanges",value:function(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;var e=Array.from(this.hiddenAreas.values()).reduce((function(e,t){return function(e,t){var n=[],i=0,r=0;for(;i<e.length&&r<t.length;){var o=e[i],s=t[r];if(o.endLineNumber<s.startLineNumber-1)n.push(e[i++]);else if(s.endLineNumber<o.startLineNumber-1)n.push(t[r++]);else{var a=Math.min(o.startLineNumber,s.startLineNumber),u=Math.max(o.endLineNumber,s.endLineNumber);n.push(new w.e(a,1,u,1)),i++,r++}}for(;i<e.length;)n.push(e[i++]);for(;r<t.length;)n.push(t[r++]);return n}(e,t)}),[]);return le(this.ranges,e)||(this.ranges=e),this.ranges}}]),e}();function le(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equalsRange(t[n]))return!1;return!0}var he=function(){function e(t,n){(0,s.Z)(this,e),this.viewportStartModelPosition=t,this.startLineDelta=n}return(0,a.Z)(e,[{key:"recoverViewportStart",value:function(e,t){if(this.viewportStartModelPosition){var n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}}]),e}()},53741:function(e,t,n){n.d(t,{$X:function(){return w},H6:function(){return m},Ic:function(){return g},Ki:function(){return p},P2:function(){return C},Pb:function(){return _},Pt:function(){return f},Sh:function(){return v},ZX:function(){return L},Zw:function(){return d},iH:function(){return k},nu:function(){return l},q2:function(){return y},zf:function(){return c}});var i=n(60726),r=n(22951),o=n(91976),s=n(67591),a=n(99616),u=n(68515),l=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this))._onEvent=e._register(new u.Q5),e.onEvent=e._onEvent.event,e._eventHandlers=[],e._viewEventQueue=null,e._isConsumingViewEventQueue=!1,e._collector=null,e._collectorCnt=0,e._outgoingEvents=[],e}return(0,o.Z)(n,[{key:"emitOutgoingEvent",value:function(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}},{key:"_addOutgoingEvent",value:function(e){for(var t=0,n=this._outgoingEvents.length;t<n;t++){var i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i)return void(this._outgoingEvents[t]=i)}this._outgoingEvents.push(e)}},{key:"_emitOutgoingEvents",value:function(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;var e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}},{key:"addViewEventHandler",value:function(e){for(var t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}},{key:"removeViewEventHandler",value:function(e){for(var t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}},{key:"beginEmitViewEvents",value:function(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new h),this._collector}},{key:"endEmitViewEvents",value:function(){if(this._collectorCnt--,0===this._collectorCnt){var e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;var n,r=(0,i.Z)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._addOutgoingEvent(o)}}catch(s){r.e(s)}finally{r.f()}t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}},{key:"emitSingleViewEvent",value:function(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}},{key:"_emitMany",value:function(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}},{key:"_consumeViewEventQueue",value:function(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}},{key:"_doConsumeQueue",value:function(){for(;this._viewEventQueue;){var e=this._viewEventQueue;this._viewEventQueue=null;var t,n=this._eventHandlers.slice(0),r=(0,i.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.handleEvents(e)}}catch(o){r.e(o)}finally{r.f()}}}}]),n}(n(59652).JT),h=function(){function e(){(0,r.Z)(this,e),this.viewEvents=[],this.outgoingEvents=[]}return(0,o.Z)(e,[{key:"emitViewEvent",value:function(e){this.viewEvents.push(e)}},{key:"emitOutgoingEvent",value:function(e){this.outgoingEvents.push(e)}}]),e}(),c=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.kind=0,this._oldContentWidth=t,this._oldContentHeight=n,this.contentWidth=i,this.contentHeight=o,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!this.contentWidthChanged&&!this.contentHeightChanged}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this._oldContentWidth,this._oldContentHeight,t.contentWidth,t.contentHeight)}}]),e}(),d=function(){function e(t,n){(0,r.Z)(this,e),this.kind=1,this.oldHasFocus=t,this.hasFocus=n}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return this.oldHasFocus===this.hasFocus}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this.oldHasFocus,t.hasFocus)}}]),e}(),f=function(){function e(t,n,i,o,s,a,u,l){(0,r.Z)(this,e),this.kind=2,this._oldScrollWidth=t,this._oldScrollLeft=n,this._oldScrollHeight=i,this._oldScrollTop=o,this.scrollWidth=s,this.scrollLeft=a,this.scrollHeight=u,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop)}}]),e}(),g=function(){function e(){(0,r.Z)(this,e),this.kind=3}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),v=function(){function e(){(0,r.Z)(this,e),this.kind=4}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),m=function(){function e(t,n,i,o,s,a,u){(0,r.Z)(this,e),this.kind=6,this.oldSelections=t,this.selections=n,this.oldModelVersionId=i,this.modelVersionId=o,this.source=s,this.reason=a,this.reachedMaxCursorCount=u}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return e._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this.oldSelections,t.selections,this.oldModelVersionId,t.modelVersionId,t.source,t.reason,this.reachedMaxCursorCount||t.reachedMaxCursorCount)}}],[{key:"_selectionsAreEqual",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].equalsSelection(t[i]))return!1;return!0}}]),e}(),p=function(){function e(){(0,r.Z)(this,e),this.kind=5}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),_=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=7}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),L=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=8}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),k=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=9}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),C=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=10}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),y=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=11}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),w=function(){function e(t){(0,r.Z)(this,e),this.event=t,this.kind=12}return(0,o.Z)(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.192dbdcc.bc51bb0f.js.map