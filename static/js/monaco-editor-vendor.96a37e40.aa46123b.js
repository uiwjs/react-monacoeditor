"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[23],{36652:function(e,t,n){n.d(t,{C:function(){return c}});var i,o=n(15671),r=n(43144),s=n(63633),a=n(26684),l=n(6815),h=n(94583),u=n(2206),d=null===(i=window.trustedTypes)||void 0===i?void 0:i.createPolicy("domLineBreaksComputer",{createHTML:function(e){return e}}),c=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,[{key:"createLineBreaksComputer",value:function(e,t,n,i){var o=[],r=[];return{addRequest:function(e,t,n){o.push(e),r.push(t)},finalize:function(){return function(e,t,n,i,o,r){var c;function v(t){var n=r[t];if(n){var i=h.gk.applyInjectedText(e[t],n),o=n.map((function(e){return e.options})),s=n.map((function(e){return e.column-1}));return new u.gD(s,o,[i.length],[],0)}return null}if(-1===i){for(var _=[],f=0,p=e.length;f<p;f++)_[f]=v(f);return _}var y=Math.round(i*t.typicalHalfwidthCharacterWidth),C=3===o?2:2===o?1:0,L=Math.round(n*C),N=Math.ceil(t.spaceWidth*L),b=document.createElement("div");(0,l.N)(b,t);for(var w=(0,s.l$)(1e4),k=[],S=[],R=[],D=[],M=[],x=0;x<e.length;x++){var W=h.gk.applyInjectedText(e[x],r[x]),A=0,H=0,Z=y;if(0!==o)if(-1===(A=a.LC(W)))A=0;else{for(var T=0;T<A;T++){H+=9===W.charCodeAt(T)?n-H%n:1}var I=Math.ceil(t.spaceWidth*H);I+t.typicalFullwidthCharacterWidth>y?(A=0,H=0):Z=y-I}var E=W.substr(A),O=g(E,H,n,Z,w,N);k[x]=A,S[x]=H,R[x]=E,D[x]=O[0],M[x]=O[1]}var P=w.build(),F=null!==(c=null===d||void 0===d?void 0:d.createHTML(P))&&void 0!==c?c:P;b.innerHTML=F,b.style.position="absolute",b.style.top="10000",b.style.wordWrap="break-word",document.body.appendChild(b);for(var B=document.createRange(),V=Array.prototype.slice.call(b.children,0),z=[],U=0;U<e.length;U++){var K=m(B,V[U],R[U],D[U]);if(null!==K){for(var G=k[U],X=S[U]+L,q=M[U],j=[],Y=0,J=K.length;Y<J;Y++)j[Y]=q[K[Y]];if(0!==G)for(var $=0,Q=K.length;$<Q;$++)K[$]+=G;var ee=void 0,te=void 0,ne=r[U];ne?(ee=ne.map((function(e){return e.options})),te=ne.map((function(e){return e.column-1}))):(ee=null,te=null),z[U]=new u.gD(te,ee,K,j,X)}else z[U]=v(U)}return document.body.removeChild(b),z}(o,e,t,n,i,r)}}}}],[{key:"create",value:function(){return new e}}]),e}();function g(e,t,n,i,o,r){if(0!==r){var s=String(r);o.appendASCIIString('<div style="text-indent: -'),o.appendASCIIString(s),o.appendASCIIString("px; padding-left: "),o.appendASCIIString(s),o.appendASCIIString("px; box-sizing: border-box; width:")}else o.appendASCIIString('<div style="width:');o.appendASCIIString(String(i)),o.appendASCIIString('px;">');var l=e.length,h=t,u=0,d=[],c=[],g=0<l?e.charCodeAt(0):0;o.appendASCIIString("<span>");for(var m=0;m<l;m++){0!==m&&m%16384===0&&o.appendASCIIString("</span><span>"),d[m]=u,c[m]=h;var v=g;g=m+1<l?e.charCodeAt(m+1):0;var _=1,f=1;switch(v){case 9:f=_=n-h%n;for(var p=1;p<=_;p++)p<_?o.write1(160):o.appendASCII(32);break;case 32:32===g?o.write1(160):o.appendASCII(32);break;case 60:o.appendASCIIString("&lt;");break;case 62:o.appendASCIIString("&gt;");break;case 38:o.appendASCIIString("&amp;");break;case 0:o.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.write1(65533);break;default:a.K7(v)&&f++,v<32?o.write1(9216+v):o.write1(v)}u+=_,h+=f}return o.appendASCIIString("</span>"),d[e.length]=u,c[e.length]=h,o.appendASCIIString("</div>"),[d,c]}function m(e,t,n,i){if(n.length<=1)return null;var o=Array.prototype.slice.call(t.children,0),r=[];try{v(e,o,i,0,null,n.length-1,null,r)}catch(s){return console.log(s),null}return 0===r.length?null:(r.push(n.length),r)}function v(e,t,n,i,o,r,s,a){if(i!==r&&(o=o||_(e,t,n[i],n[i+1]),s=s||_(e,t,n[r],n[r+1]),!(Math.abs(o[0].top-s[0].top)<=.1)))if(i+1!==r){var l=i+(r-i)/2|0,h=_(e,t,n[l],n[l+1]);v(e,t,n,i,o,l,h,a),v(e,t,n,l,h,r,s,a)}else a.push(r)}function _(e,t,n,i){return e.setStart(t[n/16384|0].firstChild,n%16384),e.setEnd(t[i/16384|0].firstChild,i%16384),e.getClientRects()}},60391:function(e,t,n){n.d(t,{i:function(){return a}});var i=n(43144),o=n(15671),r=n(60136),s=n(43668),a=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}(n(63344).O)},76310:function(e,t,n){n.d(t,{xh:function(){return a},u7:function(){return l},yu:function(){return h},CR:function(){return u},D4:function(){return d},CH:function(){return c}});var i=n(60136),o=n(43668),r=n(15671),s=n(43144),a=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,o){var s;return(0,r.Z)(this,n),(s=t.call(this,e,i))._renderingContextBrand=void 0,s._viewLines=o,s}return(0,s.Z)(n,[{key:"linesVisibleRangesForRange",value:function(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}},{key:"visibleRangeForPosition",value:function(e){return this._viewLines.visibleRangeForPosition(e)}}]),n}(function(){function e(t,n){(0,r.Z)(this,e),this._restrictedRenderingContextBrand=void 0,this._viewLayout=t,this.viewportData=n,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}return(0,s.Z)(e,[{key:"getScrolledTopFromAbsoluteTop",value:function(e){return e-this.scrollTop}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}},{key:"getDecorationsInViewport",value:function(){return this.viewportData.getDecorationsInViewport()}}]),e}()),l=(0,s.Z)((function e(t,n,i){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.lineNumber=n,this.ranges=i})),h=function(){function e(t,n){(0,r.Z)(this,e),this._horizontalRangeBrand=void 0,this.left=Math.round(t),this.width=Math.round(n)}return(0,s.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"from",value:function(t){for(var n=new Array(t.length),i=0,o=t.length;i<o;i++){var r=t[i];n[i]=new e(r.left,r.width)}return n}}]),e}(),u=function(){function e(t,n){(0,r.Z)(this,e),this._floatHorizontalRangeBrand=void 0,this.left=t,this.width=n}return(0,s.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"compare",value:function(e,t){return e.left-t.left}}]),e}(),d=(0,s.Z)((function e(t,n){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.originalLeft=n,this.left=Math.round(this.originalLeft)})),c=(0,s.Z)((function e(t,n){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.ranges=n}))},5415:function(e,t,n){n.d(t,{G:function(){return gt}});var i,o=n(37762),r=n(15671),s=n(43144),a=n(97326),l=n(11752),h=n(61120),u=n(60136),d=n(43668),c=n(53210),g=n(52091),m=n(16688),v=n(68552),_=n(58023),f=n(87806),p=n(87020),y=n(10849),C=n(4827),L=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.configuration=t,this.viewModel=n,this.userInputEvents=i,this.commandDelegate=o}return(0,s.Z)(e,[{key:"paste",value:function(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}},{key:"type",value:function(e){this.commandDelegate.type(e)}},{key:"compositionType",value:function(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}},{key:"compositionStart",value:function(){this.commandDelegate.startComposition()}},{key:"compositionEnd",value:function(){this.commandDelegate.endComposition()}},{key:"cut",value:function(){this.commandDelegate.cut()}},{key:"setSelection",value:function(e){p.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}},{key:"_validateViewColumn",value:function(e){var t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new y.L(e.lineNumber,t):e}},{key:"_hasMulticursorModifier",value:function(e){switch(this.configuration.options.get(70)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}},{key:"_hasNonMulticursorModifier",value:function(e){switch(this.configuration.options.get(70)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}},{key:"dispatchMouse",value:function(e){var t=this.configuration.options,n=C.IJ&&t.get(96),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}},{key:"_usualArgs",value:function(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}},{key:"moveTo",value:function(e){p.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_moveToSelect",value:function(e){p.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_columnSelect",value:function(e,t,n){e=this._validateViewColumn(e),p.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}},{key:"_createCursor",value:function(e,t){e=this._validateViewColumn(e),p.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}},{key:"_lastCursorMoveToSelect",value:function(e){p.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_wordSelect",value:function(e){p.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_wordSelectDrag",value:function(e){p.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorWordSelect",value:function(e){p.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lineSelect",value:function(e){p.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lineSelectDrag",value:function(e){p.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorLineSelect",value:function(e){p.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorLineSelectDrag",value:function(e){p.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_selectAll",value:function(){p.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}},{key:"_convertViewToModelPosition",value:function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}},{key:"emitKeyDown",value:function(e){this.userInputEvents.emitKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.userInputEvents.emitKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.userInputEvents.emitContextMenu(e)}},{key:"emitMouseMove",value:function(e){this.userInputEvents.emitMouseMove(e)}},{key:"emitMouseLeave",value:function(e){this.userInputEvents.emitMouseLeave(e)}},{key:"emitMouseUp",value:function(e){this.userInputEvents.emitMouseUp(e)}},{key:"emitMouseDown",value:function(e){this.userInputEvents.emitMouseDown(e)}},{key:"emitMouseDrag",value:function(e){this.userInputEvents.emitMouseDrag(e)}},{key:"emitMouseDrop",value:function(e){this.userInputEvents.emitMouseDrop(e)}},{key:"emitMouseDropCanceled",value:function(){this.userInputEvents.emitMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.userInputEvents.emitMouseWheel(e)}}]),e}(),N=n(57687),b=n(6815),w=n(63633),k=function(){function e(t){(0,r.Z)(this,e),this._createLine=t,this._set(1,[])}return(0,s.Z)(e,[{key:"flush",value:function(){this._set(1,[])}},{key:"_set",value:function(e,t){this._lines=t,this._rendLineNumberStart=e}},{key:"_get",value:function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}},{key:"getStartLineNumber",value:function(){return this._rendLineNumberStart}},{key:"getEndLineNumber",value:function(){return this._rendLineNumberStart+this._lines.length-1}},{key:"getCount",value:function(){return this._lines.length}},{key:"getLine",value:function(e){var t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}},{key:"onLinesDeleted",value:function(e,t){if(0===this.getCount())return null;var n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){var o=t-e+1;return this._rendLineNumberStart-=o,null}if(e>i)return null;for(var r=0,s=0,a=n;a<=i;a++){var l=a-this._rendLineNumberStart;e<=a&&a<=t&&(0===s?(r=l,s=1):s++)}if(e<n){var h=0;h=t<n?t-e+1:n-e,this._rendLineNumberStart-=h}return this._lines.splice(r,s)}},{key:"onLinesChanged",value:function(e,t){if(0===this.getCount())return!1;for(var n=this.getStartLineNumber(),i=this.getEndLineNumber(),o=!1,r=e;r<=t;r++)r>=n&&r<=i&&(this._lines[r-this._rendLineNumberStart].onContentChanged(),o=!0);return o}},{key:"onLinesInserted",value:function(e,t){if(0===this.getCount())return null;var n=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);for(var r=[],s=0;s<n;s++)r[s]=this._createLine();var a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),h=this._lines.slice(a,this._lines.length-n),u=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(h),u}},{key:"onTokensChanged",value:function(e){if(0===this.getCount())return!1;for(var t=this.getStartLineNumber(),n=this.getEndLineNumber(),i=!1,o=0,r=e.length;o<r;o++){var s=e[o];if(!(s.toLineNumber<t||s.fromLineNumber>n))for(var a=Math.max(t,s.fromLineNumber),l=Math.min(n,s.toLineNumber),h=a;h<=l;h++){var u=h-this._rendLineNumberStart;this._lines[u].onTokensChanged(),i=!0}}return i}}]),e}(),S=function(){function e(t){var n=this;(0,r.Z)(this,e),this._host=t,this.domNode=this._createDomNode(),this._linesCollection=new k((function(){return n._host.createVisibleLine()}))}return(0,s.Z)(e,[{key:"_createDomNode",value:function(){var e=(0,m.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}},{key:"onConfigurationChanged",value:function(e){return!!e.hasChanged(131)}},{key:"onFlushed",value:function(e){return this._linesCollection.flush(),!0}},{key:"onLinesChanged",value:function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesDeleted",value:function(e){var t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(var n=0,i=t.length;n<i;n++){var o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onLinesInserted",value:function(e){var t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(var n=0,i=t.length;n<i;n++){var o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onTokensChanged",value:function(e){return this._linesCollection.onTokensChanged(e.ranges)}},{key:"onZonesChanged",value:function(e){return!0}},{key:"getStartLineNumber",value:function(){return this._linesCollection.getStartLineNumber()}},{key:"getEndLineNumber",value:function(){return this._linesCollection.getEndLineNumber()}},{key:"getVisibleLine",value:function(e){return this._linesCollection.getLine(e)}},{key:"renderLines",value:function(e){var t=this._linesCollection._get(),n=new R(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}]),e}(),R=function(){function e(t,n,i){(0,r.Z)(this,e),this.domNode=t,this.host=n,this.viewportData=i}return(0,s.Z)(e,[{key:"render",value:function(e,t,n,i){var o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(var r=t;r<=n;r++)o.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){var s=t,a=Math.min(n,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,i,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){var l=Math.min(o.linesLength,t-o.rendLineNumberStart);l>0&&(this._removeLinesBefore(o,l),o.linesLength-=l)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){var h=o.rendLineNumberStart+o.linesLength,u=n;h<=u&&(this._insertLinesAfter(o,h,u,i,t),o.linesLength+=u-h+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){var d=Math.max(0,n-o.rendLineNumberStart+1),c=o.linesLength-1-d+1;c>0&&(this._removeLinesAfter(o,c),o.linesLength-=c)}return this._finishRendering(o,!1,i),o}},{key:"_renderUntouchedLines",value:function(e,t,n,i,o){for(var r=e.rendLineNumberStart,s=e.lines,a=t;a<=n;a++){var l=r+a;s[a].layoutLine(l,i[l-o])}}},{key:"_insertLinesBefore",value:function(e,t,n,i,o){for(var r=[],s=0,a=t;a<=n;a++)r[s++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}},{key:"_removeLinesBefore",value:function(e,t){for(var n=0;n<t;n++){var i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}},{key:"_insertLinesAfter",value:function(e,t,n,i,o){for(var r=[],s=0,a=t;a<=n;a++)r[s++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}},{key:"_removeLinesAfter",value:function(e,t){for(var n=e.linesLength-t,i=0;i<t;i++){var o=e.lines[n+i].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(n,t)}},{key:"_finishRenderingNewLines",value:function(t,n,i,o){e._ttPolicy&&(i=e._ttPolicy.createHTML(i));var r=this.domNode.lastChild;n||!r?this.domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);for(var s=this.domNode.lastChild,a=t.linesLength-1;a>=0;a--){var l=t.lines[a];o[a]&&(l.setDomNode(s),s=s.previousSibling)}}},{key:"_finishRenderingInvalidLines",value:function(t,n,i){var o=document.createElement("div");e._ttPolicy&&(n=e._ttPolicy.createHTML(n)),o.innerHTML=n;for(var r=0;r<t.linesLength;r++){var s=t.lines[r];if(i[r]){var a=o.firstChild,l=s.getDomNode();l.parentNode.replaceChild(a,l),s.setDomNode(a)}}}},{key:"_finishRendering",value:function(t,n,i){var o=e._sb,r=t.linesLength,s=t.lines,a=t.rendLineNumberStart,l=[];o.reset();for(var h=!1,u=0;u<r;u++){var d=s[u];if(l[u]=!1,!d.getDomNode())d.renderLine(u+a,i[u],this.viewportData,o)&&(l[u]=!0,h=!0)}h&&this._finishRenderingNewLines(t,n,o.build(),l),o.reset();for(var c=!1,g=[],m=0;m<r;m++){var v=s[m];if(g[m]=!1,!l[m])v.renderLine(m+a,i[m],this.viewportData,o)&&(g[m]=!0,c=!0)}c&&this._finishRenderingInvalidLines(t,o.build(),g)}}]),e}();R._ttPolicy=null===(i=window.trustedTypes)||void 0===i?void 0:i.createPolicy("editorViewLayer",{createHTML:function(e){return e}}),R._sb=(0,w.l$)(1e5);var D=n(89378),M=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._visibleLines=new S((0,a.Z)(i)),i.domNode=i._visibleLines.domNode,i._dynamicOverlays=[],i._isFocused=!1,i.domNode.setClassName("view-overlays"),i}return(0,s.Z)(n,[{key:"shouldRender",value:function(){if((0,l.Z)((0,h.Z)(n.prototype),"shouldRender",this).call(this))return!0;for(var e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}},{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this);for(var e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new x(this._context.configuration,this._dynamicOverlays)}},{key:"addDynamicOverlay",value:function(e){this._dynamicOverlays.push(e)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e);for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=t;i<=n;i++){this._visibleLines.getVisibleLine(i).onConfigurationChanged(e)}return!0}},{key:"onFlushed",value:function(e){return this._visibleLines.onFlushed(e)}},{key:"onFocusChanged",value:function(e){return this._isFocused=e.isFocused,!0}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onScrollChanged",value:function(e){return this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._visibleLines.onZonesChanged(e)}},{key:"prepareRender",value:function(e){for(var t=this._dynamicOverlays.filter((function(e){return e.shouldRender()})),n=0,i=t.length;n<i;n++){var o=t[n];o.prepareRender(e),o.onDidRender()}}},{key:"render",value:function(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}},{key:"_viewOverlaysRender",value:function(e){this._visibleLines.renderLines(e.viewportData)}}]),n}(D.E),x=function(){function e(t,n){(0,r.Z)(this,e),this._configuration=t,this._lineHeight=this._configuration.options.get(59),this._dynamicOverlays=n,this._domNode=null,this._renderedContent=null}return(0,s.Z)(e,[{key:"getDomNode",value:function(){return this._domNode?this._domNode.domNode:null}},{key:"setDomNode",value:function(e){this._domNode=(0,m.X)(e)}},{key:"onContentChanged",value:function(){}},{key:"onTokensChanged",value:function(){}},{key:"onConfigurationChanged",value:function(e){this._lineHeight=this._configuration.options.get(59)}},{key:"renderLine",value:function(e,t,n,i){for(var o="",r=0,s=this._dynamicOverlays.length;r<s;r++){o+=this._dynamicOverlays[r].render(n.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(o),i.appendASCIIString("</div>"),!0)}},{key:"layoutLine",value:function(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}]),e}(),W=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n);var o=(i=t.call(this,e))._context.configuration.options.get(131);return i._contentWidth=o.contentWidth,i.domNode.setHeight(0),i}return(0,s.Z)(n,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(131);return this._contentWidth=t.contentWidth,(0,l.Z)((0,h.Z)(n.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,l.Z)((0,h.Z)(n.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged}},{key:"_viewOverlaysRender",value:function(e){(0,l.Z)((0,h.Z)(n.prototype),"_viewOverlaysRender",this).call(this,e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}]),n}(M),A=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n);var o=(i=t.call(this,e))._context.configuration.options,s=o.get(131);return i._contentLeft=s.contentLeft,i.domNode.setClassName("margin-view-overlays"),i.domNode.setWidth(1),(0,b.N)(i.domNode,o.get(44)),i}return(0,s.Z)(n,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;(0,b.N)(this.domNode,t.get(44));var i=t.get(131);return this._contentLeft=i.contentLeft,(0,l.Z)((0,h.Z)(n.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,l.Z)((0,h.Z)(n.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged}},{key:"_viewOverlaysRender",value:function(e){(0,l.Z)((0,h.Z)(n.prototype),"_viewOverlaysRender",this).call(this,e);var t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}]),n}(M),H=n(29439),Z=(0,s.Z)((function e(t,n){(0,r.Z)(this,e),this._coordinateBrand=void 0,this.top=t,this.left=n})),T=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this,e))._viewDomNode=i,o._widgets={},o.domNode=(0,m.X)(document.createElement("div")),D.K.write(o.domNode,1),o.domNode.setClassName("contentWidgets"),o.domNode.setPosition("absolute"),o.domNode.setTop(0),o.overflowingContentWidgetsDomNode=(0,m.X)(document.createElement("div")),D.K.write(o.overflowingContentWidgetsDomNode,2),o.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets"),o}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._widgets={}}},{key:"onConfigurationChanged",value:function(e){for(var t=0,n=Object.keys(this._widgets);t<n.length;t++){var i=n[t];this._widgets[i].onConfigurationChanged(e)}return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLineMappingChanged",value:function(e){for(var t=0,n=Object.keys(this._widgets);t<n.length;t++){var i=n[t];this._widgets[i].onLineMappingChanged(e)}return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"addWidget",value:function(e){var t=new I(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t];delete this._widgets[t];var i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}},{key:"shouldSuppressMouseDownOnWidget",value:function(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}},{key:"onBeforeRender",value:function(e){for(var t=0,n=Object.keys(this._widgets);t<n.length;t++){var i=n[t];this._widgets[i].onBeforeRender(e)}}},{key:"prepareRender",value:function(e){for(var t=0,n=Object.keys(this._widgets);t<n.length;t++){var i=n[t];this._widgets[i].prepareRender(e)}}},{key:"render",value:function(e){for(var t=0,n=Object.keys(this._widgets);t<n.length;t++){var i=n[t];this._widgets[i].render(e)}}}]),n}(D.E),I=function(){function e(t,n,i){(0,r.Z)(this,e),this._context=t,this._viewDomNode=n,this._actual=i,this.domNode=(0,m.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;var o=this._context.configuration.options,s=o.get(131);this._fixedOverflowWidgets=o.get(36),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=o.get(59),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}return(0,s.Z)(e,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;if(this._lineHeight=t.get(59),e.hasChanged(131)){var n=t.get(131);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}},{key:"onLineMappingChanged",value:function(e){this._setPosition(this._range)}},{key:"_setPosition",value:function(e){if(this._range=e,this._viewRange=null,this._range){var t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}},{key:"_getMaxWidth",value:function(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}},{key:"setPosition",value:function(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}},{key:"_layoutBoxInViewport",value:function(e,t,n,i,o){var r=e.top,s=r,a=t.top+this._lineHeight,l=r-i,h=s>=i,u=a,d=o.viewportHeight-a>=i,c=e.left,g=t.left;return c+n>o.scrollLeft+o.viewportWidth&&(c=o.scrollLeft+o.viewportWidth-n),g+n>o.scrollLeft+o.viewportWidth&&(g=o.scrollLeft+o.viewportWidth-n),c<o.scrollLeft&&(c=o.scrollLeft),g<o.scrollLeft&&(g=o.scrollLeft),{fitsAbove:h,aboveTop:l,aboveLeft:c,fitsBelow:d,belowTop:u,belowLeft:g}}},{key:"_layoutHorizontalSegmentInPage",value:function(e,t,n,i){var o=Math.max(0,t.left-i),r=Math.min(t.left+t.width+i,e.width),s=t.left+n-c.StandardWindow.scrollX;if(s+i>r){var a=s-(r-i);s-=a,n-=a}if(s<o){var l=s-o;s-=l,n-=l}return[n,s]}},{key:"_layoutBoxInPage",value:function(e,t,n,i,o){var r=e.top-i,s=t.top+this._lineHeight,a=c.getDomNodePagePosition(this._viewDomNode.domNode),l=a.top+r-c.StandardWindow.scrollY,h=a.top+s-c.StandardWindow.scrollY,u=c.getClientArea(document.body),d=this._layoutHorizontalSegmentInPage(u,a,e.left-o.scrollLeft+this._contentLeft,n),g=(0,H.Z)(d,2),m=g[0],v=g[1],_=this._layoutHorizontalSegmentInPage(u,a,t.left-o.scrollLeft+this._contentLeft,n),f=(0,H.Z)(_,2),p=f[0],y=f[1],C=l>=22,L=h+i<=u.height-22;return this._fixedOverflowWidgets?{fitsAbove:C,aboveTop:Math.max(l,22),aboveLeft:v,fitsBelow:L,belowTop:h,belowLeft:y}:{fitsAbove:C,aboveTop:r,aboveLeft:m,fitsBelow:L,belowTop:s,belowLeft:p}}},{key:"_prepareRenderWidgetAtExactPositionOverflowing",value:function(e){return new Z(e.top,e.left+this._contentLeft)}},{key:"_getTopAndBottomLeft",value:function(e){if(!this._viewRange)return[null,null];var t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||0===t.length)return[null,null];var n,i=t[0],r=t[0],s=(0,o.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;a.lineNumber<i.lineNumber&&(i=a),a.lineNumber>r.lineNumber&&(r=a)}}catch(y){s.e(y)}finally{s.f()}var l,h=1073741824,u=(0,o.Z)(i.ranges);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.left<h&&(h=d.left)}}catch(y){u.e(y)}finally{u.f()}var c,g=1073741824,m=(0,o.Z)(r.ranges);try{for(m.s();!(c=m.n()).done;){var v=c.value;v.left<g&&(g=v.left)}}catch(y){m.e(y)}finally{m.f()}var _=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,f=new Z(_,h),p=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop;return[f,new Z(p,g)]}},{key:"_prepareRenderWidget",value:function(e){if(!this._preference||0===this._preference.length)return null;var t,n=this._getTopAndBottomLeft(e),i=(0,H.Z)(n,2),r=i[0],s=i[1];if(!r||!s)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){var a=null;if("function"===typeof this._actual.beforeRender&&(a=E(this._actual.beforeRender,this._actual)),a)this._cachedDomNodeOffsetWidth=a.width,this._cachedDomNodeOffsetHeight=a.height;else{var l=this.domNode.domNode;this._cachedDomNodeOffsetWidth=l.offsetWidth,this._cachedDomNodeOffsetHeight=l.offsetHeight}}t=this.allowEditorOverflow?this._layoutBoxInPage(r,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(r,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(var h=1;h<=2;h++){var u,d=(0,o.Z)(this._preference);try{for(d.s();!(u=d.n()).done;){var c=u.value;if(1===c){if(!t)return null;if(2===h||t.fitsAbove)return{coordinate:new Z(t.aboveTop,t.aboveLeft),position:1}}else{if(2!==c)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(r),position:0}:{coordinate:r,position:0};if(!t)return null;if(2===h||t.fitsBelow)return{coordinate:new Z(t.belowTop,t.belowLeft),position:2}}}}catch(g){d.e(g)}finally{d.f()}}return null}},{key:"onBeforeRender",value:function(e){this._viewRange&&this._preference&&(this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRenderWidget(e)}},{key:"render",value:function(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&E(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&E(this._actual.afterRender,this._actual,this._renderData.position)}}]),e}();function E(e,t){try{for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return e.call.apply(e,[t].concat(o))}catch(i){return null}}var O=n(60391),P=n(2374),F=n(71881),B=n(3553),V=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._context=e;var o=i._context.configuration.options,s=o.get(131);return i._lineHeight=o.get(59),i._renderLineHighlight=o.get(85),i._renderLineHighlightOnlyWhenFocus=o.get(86),i._contentLeft=s.contentLeft,i._contentWidth=s.contentWidth,i._selectionIsEmpty=!0,i._focused=!1,i._cursorLineNumbers=[1],i._selections=[new g.Y(1,1,1,1)],i._renderData=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"_readFromSelections",value:function(){var e=!1,t=this._selections.map((function(e){return e.positionLineNumber}));t.sort((function(e,t){return e-t})),F.fS(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);var n=this._selections.every((function(e){return e.isEmpty()}));return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}},{key:"onThemeChanged",value:function(e){return this._readFromSelections()}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._renderLineHighlight=t.get(85),this._renderLineHighlightOnlyWhenFocus=t.get(86),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._readFromSelections()}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollWidthChanged||e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}},{key:"prepareRender",value:function(e){if(this._shouldRenderThis()){for(var t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length,r=0,s=[],a=n;a<=i;a++){for(var l=a-n;r<o&&this._cursorLineNumbers[r]<a;)r++;r<o&&this._cursorLineNumbers[r]===a?s[l]=t:s[l]=""}this._renderData=s}else this._renderData=null}},{key:"render",value:function(e,t){if(!this._renderData)return"";var n=t-e;return n>=this._renderData.length?"":this._renderData[n]}},{key:"_shouldRenderInMargin",value:function(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},{key:"_shouldRenderInContent",value:function(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}]),n}(O.i),z=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderOther()?" current-line-both":"");return'<div class="'.concat(t,'" style="width:').concat(Math.max(e.scrollWidth,this._contentWidth),"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return this._shouldRenderInContent()}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInMargin()}}]),n}(V),U=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"");return'<div class="'.concat(t,'" style="width:').concat(this._contentLeft,"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return!0}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInContent()}}]),n}(V);(0,B.Ic)((function(e,t){var n=e.getColor(P.Kh);if(n&&(t.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(n,"; border: none; }"))),!n||n.isTransparent()||e.defines(P.Mm)){var i=e.getColor(P.Mm);i&&(t.addRule(".monaco-editor .view-overlays .current-line { border: 2px solid ".concat(i,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ".concat(i,"; }")),"hc"===e.type&&(t.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}}));var K=n(30788),G=n(76310),X=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._context=e;var o=i._context.configuration.options;return i._lineHeight=o.get(59),i._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,o=0,r=t.length;o<r;o++){var s=t[o];s.options.className&&(n[i++]=s)}n=n.sort((function(e,t){if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;var n=e.options.className,i=t.options.className;return n<i?-1:n>i?1:K.e.compareRangesUsingStarts(e.range,t.range)}));for(var a=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,h=[],u=a;u<=l;u++){h[u-a]=""}this._renderWholeLineDecorations(e,n,h),this._renderNormalDecorations(e,n,h),this._renderResult=h}},{key:"_renderWholeLineDecorations",value:function(e,t,n){for(var i=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=0,a=t.length;s<a;s++){var l=t[s];if(l.options.isWholeLine)for(var h='<div class="cdr '+l.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',u=Math.max(l.range.startLineNumber,o),d=Math.min(l.range.endLineNumber,r),c=u;c<=d;c++){n[c-o]+=h}}}},{key:"_renderNormalDecorations",value:function(e,t,n){for(var i=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=null,s=!1,a=null,l=0,h=t.length;l<h;l++){var u=t[l];if(!u.options.isWholeLine){var d=u.options.className,c=Boolean(u.options.showIfCollapsed),g=u.range;c&&1===g.endColumn&&g.endLineNumber!==g.startLineNumber&&(g=new K.e(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.model.getLineMaxColumn(g.endLineNumber-1))),r===d&&s===c&&K.e.areIntersectingOrTouching(a,g)?a=K.e.plusRange(a,g):(null!==r&&this._renderNormalDecoration(e,a,r,s,i,o,n),r=d,s=c,a=g)}}null!==r&&this._renderNormalDecoration(e,a,r,s,i,o,n)}},{key:"_renderNormalDecoration",value:function(e,t,n,i,o,r,s){var a=e.linesVisibleRangesForRange(t,"findMatch"===n);if(a)for(var l=0,h=a.length;l<h;l++){var u=a[l];if(!u.outsideRenderedLine){var d=u.lineNumber-r;if(i&&1===u.ranges.length){var c=u.ranges[0];if(c.width<this._typicalHalfwidthCharacterWidth){var g=Math.round(c.left+c.width/2),m=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new G.yu(m,this._typicalHalfwidthCharacterWidth)}}for(var v=0,_=u.ranges.length;v<_;v++){var f=u.ranges[v],p='<div class="cdr '+n+'" style="left:'+String(f.left)+"px;width:"+String(f.width)+"px;height:"+o+'px;"></div>';s[d]+=p}}}}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),n}(O.i),q=n(48301),j=n(6574),Y=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,o,s){var a;(0,r.Z)(this,n);var l=(a=t.call(this,e))._context.configuration.options,h=l.get(92),u=l.get(67),d=l.get(34),g=l.get(95),v={listenOnDomNode:o.domNode,className:"editor-scrollable "+(0,B.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:h.vertical,horizontal:h.horizontal,verticalHasArrows:h.verticalHasArrows,horizontalHasArrows:h.horizontalHasArrows,verticalScrollbarSize:h.verticalScrollbarSize,verticalSliderSize:h.verticalSliderSize,horizontalScrollbarSize:h.horizontalScrollbarSize,horizontalSliderSize:h.horizontalSliderSize,handleMouseWheel:h.handleMouseWheel,alwaysConsumeMouseWheel:h.alwaysConsumeMouseWheel,arrowSize:h.arrowSize,mouseWheelScrollSensitivity:u,fastScrollSensitivity:d,scrollPredominantAxis:g,scrollByPage:h.scrollByPage};a.scrollbar=a._register(new q.$Z(i.domNode,v,a._context.viewLayout.getScrollable())),D.K.write(a.scrollbar.getDomNode(),5),a.scrollbarDomNode=(0,m.X)(a.scrollbar.getDomNode()),a.scrollbarDomNode.setPosition("absolute"),a._setLayout();var _=function(e,t,n){var i={};if(t){var o=e.scrollTop;o&&(i.scrollTop=a._context.viewLayout.getCurrentScrollTop()+o,e.scrollTop=0)}if(n){var r=e.scrollLeft;r&&(i.scrollLeft=a._context.viewLayout.getCurrentScrollLeft()+r,e.scrollLeft=0)}a._context.model.setScrollPosition(i,1)};return a._register(c.addDisposableListener(o.domNode,"scroll",(function(e){return _(o.domNode,!0,!0)}))),a._register(c.addDisposableListener(i.domNode,"scroll",(function(e){return _(i.domNode,!0,!1)}))),a._register(c.addDisposableListener(s.domNode,"scroll",(function(e){return _(s.domNode,!0,!1)}))),a._register(c.addDisposableListener(a.scrollbarDomNode.domNode,"scroll",(function(e){return _(a.scrollbarDomNode.domNode,!0,!1)}))),a}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"_setLayout",value:function(){var e=this._context.configuration.options,t=e.get(131);this.scrollbarDomNode.setLeft(t.contentLeft),"right"===e.get(65).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}},{key:"getOverviewRulerLayoutInfo",value:function(){return this.scrollbar.getOverviewRulerLayoutInfo()}},{key:"getDomNode",value:function(){return this.scrollbarDomNode}},{key:"delegateVerticalScrollbarMouseDown",value:function(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(92)||e.hasChanged(67)||e.hasChanged(34)){var t=this._context.configuration.options,n=t.get(92),i=t.get(67),o=t.get(34),r=t.get(95),s={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(s)}return e.hasChanged(131)&&this._setLayout(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,B.m6)(this._context.theme.type)),!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this.scrollbar.renderNow()}}]),n}(D.E);(0,B.Ic)((function(e,t){var n=e.getColor(j._wn);n&&t.addRule("\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tbox-shadow: ".concat(n," 0 6px 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tbox-shadow: ").concat(n," 6px 0 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\tbox-shadow: ").concat(n," 6px 6px 6px -6px inset;\n\t\t\t}\n\t\t"));var i=e.getColor(j.etL);i&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\tbackground: ".concat(i,";\n\t\t\t}\n\t\t"));var o=e.getColor(j.ABB);o&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\tbackground: ".concat(o,";\n\t\t\t}\n\t\t"));var r=e.getColor(j.ynu);r&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\tbackground: ".concat(r,";\n\t\t\t}\n\t\t"))}));var J=(0,s.Z)((function e(t,n,i){(0,r.Z)(this,e),this._decorationToRenderBrand=void 0,this.startLineNumber=+t,this.endLineNumber=+n,this.className=String(i)})),$=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"_render",value:function(e,t,n){for(var i=[],o=e;o<=t;o++){i[o-e]=[]}if(0===n.length)return i;n.sort((function(e,t){return e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1}));for(var r=null,s=0,a=0,l=n.length;a<l;a++){var h=n[a],u=h.className,d=Math.max(h.startLineNumber,e)-e,c=Math.min(h.endLineNumber,t)-e;r===u?(d=Math.max(s+1,d),s=Math.max(s,c)):(r=u,s=c);for(var g=d;g<=s;g++)i[g].push(r)}return i}}]),n}(O.i),Q=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._context=e;var o=i._context.configuration.options,s=o.get(131);return i._lineHeight=o.get(59),i._glyphMargin=o.get(50),i._glyphMarginLeft=s.glyphMarginLeft,i._glyphMarginWidth=s.glyphMarginWidth,i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._glyphMargin=t.get(50),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.glyphMarginClassName;a&&(n[i++]=new J(s.range.startLineNumber,s.range.endLineNumber,a))}return n}},{key:"prepareRender",value:function(e){if(this._glyphMargin){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._lineHeight.toString(),r='" style="left:'+this._glyphMarginLeft.toString()+"px;width:"+this._glyphMarginWidth.toString()+"px;height:"+o+'px;"></div>',s=[],a=t;a<=n;a++){var l=a-t,h=i[l];0===h.length?s[l]="":s[l]='<div class="cgmr codicon '+h.join(" ")+r}this._renderResult=s}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),n}($),ee=n(93433),te=n(64272),ne=n(1715),ie=n(54612),oe=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._context=e,i._primaryPosition=null;var o=i._context.configuration.options,s=o.get(132),l=o.get(44);return i._lineHeight=o.get(59),i._spaceWidth=l.spaceWidth,i._maxIndentLeft=-1===s.wrappingColumn?-1:s.wrappingColumn*l.typicalHalfwidthCharacterWidth,i._bracketPairGuideOptions=o.get(13),i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(132),i=t.get(44);return this._lineHeight=t.get(59),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=-1===n.wrappingColumn?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}},{key:"onCursorStateChanged",value:function(e){var t,n=e.selections[0].getPosition();return!(null===(t=this._primaryPosition)||void 0===t?void 0:t.equals(n))&&(this._primaryPosition=n,!0)}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLanguageConfigurationChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){var t,n,i,r;if(this._bracketPairGuideOptions.indentation||!1!==this._bracketPairGuideOptions.bracketPairs){for(var s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,h=this._lineHeight,u=this._primaryPosition,d=this.getGuidesByLine(s,a,u),c=[],g=s;g<=a;g++){var m,v=g-s,_=d[v],f="",p=null!==(n=null===(t=e.visibleRangeForPosition(new y.L(g,1)))||void 0===t?void 0:t.left)&&void 0!==n?n:0,C=(0,o.Z)(_);try{for(C.s();!(m=C.n()).done;){var L=m.value,N=p+(L.visibleColumn-1)*this._spaceWidth;if(N>l||this._maxIndentLeft>0&&N>this._maxIndentLeft)break;var b=L.horizontalLine?L.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",w=L.horizontalLine?(null!==(r=null===(i=e.visibleRangeForPosition(new y.L(g,L.horizontalLine.endColumn)))||void 0===i?void 0:i.left)&&void 0!==r?r:N+this._spaceWidth)-N:this._spaceWidth;f+='<div class="core-guide '.concat(L.className," ").concat(b,'" style="left:').concat(N,"px;height:").concat(h,"px;width:").concat(w,'px"></div>')}}catch(k){C.e(k)}finally{C.f()}c[v]=f}this._renderResult=c}else this._renderResult=null}},{key:"getGuidesByLine",value:function(e,t,n){var i=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?ie.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?ie.s6.EnabledForActive:ie.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,o=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null,r=0,s=0,a=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){var l=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);r=l.startLineNumber,s=l.endLineNumber,a=l.indent}for(var h=this._context.model.getTextModelOptions().indentSize,u=[],d=e;d<=t;d++){var c=new Array;u.push(c);for(var g=i?i[d-e]:[],m=new F.H9(g),v=o?o[d-e]:[],_=function(e){var t=(e-1)*h+1,n=0===g.length&&r<=d&&d<=s&&e===a;c.push.apply(c,(0,ee.Z)(m.takeWhile((function(e){return e.visibleColumn<t}))||[]));var i=m.peek();i&&i.visibleColumn===t&&!i.horizontalLine||c.push(new ie.UO(t,n?"core-guide-indent-active":"core-guide-indent",null))},f=1;f<=v;f++)_(f);c.push.apply(c,(0,ee.Z)(m.takeWhile((function(e){return!0}))||[]))}return u}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),n}(O.i);function re(e){if(!e||!e.isTransparent())return e}(0,B.Ic)((function(e,t){var n=e.getColor(P.tR);n&&t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ".concat(n," inset; }"));var i=e.getColor(P.Ym)||n;i&&t.addRule(".monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ".concat(i," inset; }"));var o=[{bracketColor:P.zJ,guideColor:P.oV,guideColorActive:P.Qb},{bracketColor:P.Vs,guideColor:P.m$,guideColorActive:P.m3},{bracketColor:P.CE,guideColor:P.DS,guideColorActive:P.To},{bracketColor:P.UP,guideColor:P.lS,guideColorActive:P.L7},{bracketColor:P.r0,guideColor:P.Jn,guideColorActive:P.HV},{bracketColor:P.m1,guideColor:P.YF,guideColorActive:P.f9}],r=new ne.W,s=o.map((function(t){var n,i,o=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),s=e.getColor(t.guideColorActive),a=re(null!==(n=re(r))&&void 0!==n?n:null===o||void 0===o?void 0:o.transparent(.3)),l=re(null!==(i=re(s))&&void 0!==i?i:o);if(a&&l)return{guideColor:a,guideColorActive:l}})).filter(te.$K);if(s.length>0){for(var a=0;a<30;a++){var l=s[a%s.length];t.addRule(".monaco-editor .".concat(r.getInlineClassNameOfLevel(a).replace(/ /g,".")," { --guide-color: ").concat(l.guideColor,"; --guide-color-active: ").concat(l.guideColorActive,"; }"))}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .vertical.".concat(r.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),t.addRule(".monaco-editor .horizontal-top.".concat(r.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),t.addRule(".monaco-editor .horizontal-bottom.".concat(r.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}}));var se=n(6264),ae=n(32590),le=n(97766),he=n(68537),ue=function(){function e(){(0,r.Z)(this,e),this._currentVisibleRange=new K.e(1,1,1,1)}return(0,s.Z)(e,[{key:"getCurrentVisibleRange",value:function(){return this._currentVisibleRange}},{key:"setCurrentVisibleRange",value:function(e){this._currentVisibleRange=e}}]),e}(),de=(0,s.Z)((function e(t,n,i,o,s,a,l){(0,r.Z)(this,e),this.minimalReveal=t,this.lineNumber=n,this.startColumn=i,this.endColumn=o,this.startScrollTop=s,this.stopScrollTop=a,this.scrollType=l,this.type="range",this.minLineNumber=n,this.maxLineNumber=n})),ce=(0,s.Z)((function e(t,n,i,o,s){(0,r.Z)(this,e),this.minimalReveal=t,this.selections=n,this.startScrollTop=i,this.stopScrollTop=o,this.scrollType=s,this.type="selections";for(var a=n[0].startLineNumber,l=n[0].endLineNumber,h=1,u=n.length;h<u;h++){var d=n[h];a=Math.min(a,d.startLineNumber),l=Math.max(l,d.endLineNumber)}this.minLineNumber=a,this.maxLineNumber=l})),ge=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var o;(0,r.Z)(this,n),(o=t.call(this,e))._linesContent=i,o._textRangeRestingSpot=document.createElement("div"),o._visibleLines=new S((0,a.Z)(o)),o.domNode=o._visibleLines.domNode;var s=o._context.configuration,l=o._context.configuration.options,h=l.get(44),u=l.get(132),d=l.get(131);return o._lineHeight=l.get(59),o._typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,o._isViewportWrapping=u.isViewportWrapping,o._revealHorizontalRightPadding=l.get(89),o._horizontalScrollbarHeight=d.horizontalScrollbarHeight,o._cursorSurroundingLines=l.get(25),o._cursorSurroundingLinesStyle=l.get(26),o._canUseLayerHinting=!l.get(28),o._viewLineOptions=new le.ob(s,o._context.theme.type),D.K.write(o.domNode,7),o.domNode.setClassName("view-lines ".concat(he.S)),(0,b.N)(o.domNode,h),o._maxLineWidth=0,o._asyncUpdateLineWidths=new ae.pY((function(){o._updateLineWidthsSlow()}),200),o._asyncCheckMonospaceFontAssumptions=new ae.pY((function(){o._checkMonospaceFontAssumptions()}),2e3),o._lastRenderedData=new ue,o._horizontalRevealRequest=null,o}return(0,s.Z)(n,[{key:"dispose",value:function(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new le.Nt(this._viewLineOptions)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(132)&&(this._maxLineWidth=0);var t=this._context.configuration.options,n=t.get(44),i=t.get(132),o=t.get(131);return this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(89),this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),(0,b.N)(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(131)&&(this._maxLineWidth=0),!0}},{key:"_onOptionsMaybeChanged",value:function(){var e=this._context.configuration,t=new le.ob(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;for(var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=n;o<=i;o++){this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions)}return!0}return!1}},{key:"onCursorStateChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=!1,o=t;o<=n;o++)i=this._visibleLines.getVisibleLine(o).onSelectionChanged()||i;return i}},{key:"onDecorationsChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged();return!0}},{key:"onFlushed",value:function(e){var t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onRevealRangeRequest",value:function(e){var t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;var n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new de(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new ce(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;var i=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,i),!0}},{key:"onScrollChanged",value:function(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){var t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}},{key:"onThemeChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"getPositionFromDOMInfo",value:function(e,t){var n=this._getViewLineDomNode(e);if(null===n)return null;var i=this._getLineNumberFor(n);if(-1===i)return null;if(i<1||i>this._context.model.getLineCount())return null;if(1===this._context.model.getLineMaxColumn(i))return new y.L(i,1);var o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<o||i>r)return null;var s=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t),a=this._context.model.getLineMinColumn(i);return s<a&&(s=a),new y.L(i,s)}},{key:"_getViewLineDomNode",value:function(e){for(;e&&1===e.nodeType;){if(e.className===le.Nt.CLASS_NAME)return e;e=e.parentElement}return null}},{key:"_getLineNumberFor",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=t;i<=n;i++){if(e===this._visibleLines.getVisibleLine(i).getDomNode())return i}return-1}},{key:"getLineWidth",value:function(e){var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}},{key:"linesVisibleRangesForRange",value:function(e,t){if(this.shouldRender())return null;var n=e.endLineNumber,i=K.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;var o=[],r=0,s=new le.ZE(this.domNode.domNode,this._textRangeRestingSpot),a=0;t&&(a=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new y.L(i.startLineNumber,1)).lineNumber);for(var l=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber(),u=i.startLineNumber;u<=i.endLineNumber;u++)if(!(u<l||u>h)){var d=u===i.startLineNumber?i.startColumn:1,c=u===i.endLineNumber?i.endColumn:this._context.model.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,c,s);if(g){if(t&&u<n)a!==(a=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new y.L(u+1,1)).lineNumber)&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth);o[r++]=new G.u7(g.outsideRenderedLine,u,G.yu.from(g.ranges))}}return 0===r?null:o}},{key:"_visibleRangesForLineRange",value:function(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new le.ZE(this.domNode.domNode,this._textRangeRestingSpot))}},{key:"visibleRangeForPosition",value:function(e){var t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new G.D4(t.outsideRenderedLine,t.ranges[0].left):null}},{key:"updateLineWidths",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidthsFast",value:function(){return this._updateLineWidths(!0)}},{key:"_updateLineWidthsSlow",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidths",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=1,o=!0,r=t;r<=n;r++){var s=this._visibleLines.getVisibleLine(r);!e||s.getWidthIsFast()?i=Math.max(i,s.getWidth()):o=!1}return o&&1===t&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),o}},{key:"_checkMonospaceFontAssumptions",value:function(){for(var e=-1,t=-1,n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),o=n;o<=i;o++){var r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){var s=r.getWidth();s>t&&(t=s,e=o)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(var a=n;a<=i;a++){this._visibleLines.getVisibleLine(a).onMonospaceAssumptionsInvalidated()}}},{key:"prepareRender",value:function(){throw new Error("Not supported")}},{key:"render",value:function(){throw new Error("Not supported")}},{key:"renderText",value:function(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var n=this._computeScrollLeftToReveal(t);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:n.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),C.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled())for(var i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber(),r=i;r<=o;r++){if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");var s=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-s),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}},{key:"_ensureMaxLineWidth",value:function(e){var t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}},{key:"_computeScrollTopToRevealRange",value:function(e,t,n,i,o,r){var s,a,l,h,u=e.top,d=e.height,c=u+d;if(o&&o.length>0){for(var g=o[0].startLineNumber,m=o[0].endLineNumber,v=1,_=o.length;v<_;v++){var f=o[v];g=Math.min(g,f.startLineNumber),m=Math.max(m,f.endLineNumber)}s=!1,a=this._context.viewLayout.getVerticalOffsetForLineNumber(g),l=this._context.viewLayout.getVerticalOffsetForLineNumber(m)+this._lineHeight}else{if(!i)return-1;s=!0,a=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight}if(("mouse"===t||n)&&"default"===this._cursorSurroundingLinesStyle)n||(a-=this._lineHeight);else{var p=Math.min(d/this._lineHeight/2,this._cursorSurroundingLines);a-=p*this._lineHeight,l+=Math.max(0,p-1)*this._lineHeight}if(0!==r&&4!==r||(l+=n?this._horizontalScrollbarHeight:this._lineHeight),l-a>d){if(!s)return-1;h=a}else if(5===r||6===r)if(6===r&&u<=a&&l<=c)h=u;else{var y=a-Math.max(5*this._lineHeight,.2*d),C=l-d;h=Math.max(C,y)}else if(1===r||2===r)if(2===r&&u<=a&&l<=c)h=u;else{var L=(a+l)/2;h=Math.max(0,L-d/2)}else h=this._computeMinimumScrolling(u,c,a,l,3===r,4===r);return h}},{key:"_computeScrollLeftToReveal",value:function(e){var t=this._context.viewLayout.getCurrentViewport(),i=t.left,r=i+t.width,s=1073741824,a=0;if("range"===e.type){var l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;var h,u=(0,o.Z)(l.ranges);try{for(u.s();!(h=u.n()).done;){var d=h.value;s=Math.min(s,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}}catch(y){u.e(y)}finally{u.f()}}else{var c,g=(0,o.Z)(e.selections);try{for(g.s();!(c=g.n()).done;){var m=c.value;if(m.startLineNumber!==m.endLineNumber)return null;var v=this._visibleRangesForLineRange(m.startLineNumber,m.startColumn,m.endColumn);if(!v)return null;var _,f=(0,o.Z)(v.ranges);try{for(f.s();!(_=f.n()).done;){var p=_.value;s=Math.min(s,Math.round(p.left)),a=Math.max(a,Math.round(p.left+p.width))}}catch(y){f.e(y)}finally{f.f()}}}catch(y){g.e(y)}finally{g.f()}}return e.minimalReveal||(s=Math.max(0,s-n.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),"selections"===e.type&&a-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,r,s,a),maxHorizontalOffset:a}}},{key:"_computeMinimumScrolling",value:function(e,t,n,i,o,r){o=!!o,r=!!r;var s=(t|=0)-(e|=0);return(i|=0)-(n|=0)<s?o?n:r?Math.max(0,i-s):n<e?n:i>t?Math.max(0,i-s):e:n}}]),n}(D.E);ge.HORIZONTAL_EXTRA_PX=30;var me=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._context=e;var o=i._context.configuration.options.get(131);return i._decorationsLeft=o.decorationsLeft,i._decorationsWidth=o.decorationsWidth,i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(131);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.linesDecorationsClassName;a&&(n[i++]=new J(s.range.startLineNumber,s.range.endLineNumber,a));var l=s.options.firstLineDecorationClassName;l&&(n[i++]=new J(s.range.startLineNumber,s.range.startLineNumber,l))}return n}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',r=[],s=t;s<=n;s++){for(var a=s-t,l=i[a],h="",u=0,d=l.length;u<d;u++)h+='<div class="cldr '+l[u]+o;r[a]=h}this._renderResult=r}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),n}($),ve=n(16543),_e=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this))._context=e,i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.marginClassName;a&&(n[i++]=new J(s.range.startLineNumber,s.range.endLineNumber,a))}return n}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=[],r=t;r<=n;r++){for(var s=r-t,a=i[s],l="",h=0,u=a.length;h<u;h++)l+='<div class="cmdr '+a[h]+'" style=""></div>';o[s]=l}this._renderResult=o}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),n}($),fe=n(36727),pe=n(10526),ye=n(26684),Ce=n(31492),Le=n(65782),Ne=n(85551),be=n(99990),we=n(6287),ke=function(){for(var e=[],t=32;t<=126;t++)e.push(t);return e.push(65533),e}(),Se=n(60309),Re=function(){function e(t,n){(0,r.Z)(this,e),this.scale=n,this._minimapCharRendererBrand=void 0,this.charDataNormal=e.soften(t,.8),this.charDataLight=e.soften(t,50/60)}return(0,s.Z)(e,[{key:"renderChar",value:function(e,t,n,i,o,r,s,a,l,h,u){var d=1*this.scale,c=2*this.scale,g=u?1:c;if(t+d>e.width||n+g>e.height)console.warn("bad render request outside image data");else for(var m=h?this.charDataLight:this.charDataNormal,v=function(e,t){return(e-=32)<0||e>96?t<=2?(e+96)%96:95:e}(i,l),_=4*e.width,f=s.r,p=s.g,y=s.b,C=o.r-f,L=o.g-p,N=o.b-y,b=Math.max(r,a),w=e.data,k=v*d*c,S=n*_+4*t,R=0;R<g;R++){for(var D=S,M=0;M<d;M++){var x=m[k++]/255*(r/255);w[D++]=f+C*x,w[D++]=p+L*x,w[D++]=y+N*x,w[D++]=b}S+=_}}},{key:"blockRenderChar",value:function(e,t,n,i,o,r,s,a){var l=1*this.scale,h=2*this.scale,u=a?1:h;if(t+l>e.width||n+u>e.height)console.warn("bad render request outside image data");else for(var d=4*e.width,c=o/255*.5,g=r.r,m=r.g,v=r.b,_=g+(i.r-g)*c,f=m+(i.g-m)*c,p=v+(i.b-v)*c,y=Math.max(o,s),C=e.data,L=n*d+4*t,N=0;N<u;N++){for(var b=L,w=0;w<l;w++)C[b++]=_,C[b++]=f,C[b++]=p,C[b++]=y;L+=d}}}],[{key:"soften",value:function(e,t){for(var n=new Uint8ClampedArray(e.length),i=0,o=e.length;i<o;i++)n[i]=(0,Se.K)(e[i]*t);return n}}]),e}(),De=n(33532),Me={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},xe=function(e){for(var t=new Uint8ClampedArray(e.length/2),n=0;n<e.length;n+=2)t[n>>1]=Me[e[n]]<<4|15&Me[e[n+1]];return t},We={1:(0,De.I)((function(){return xe("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")})),2:(0,De.I)((function(){return xe("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")}))},Ae=function(){function e(){(0,r.Z)(this,e)}return(0,s.Z)(e,null,[{key:"create",value:function(t,n){return this.lastCreated&&t===this.lastCreated.scale&&n===this.lastFontFamily?this.lastCreated:(i=We[t]?new Re(We[t](),t):e.createFromSampleData(e.createSampleData(n).data,t),this.lastFontFamily=n,this.lastCreated=i,i);var i}},{key:"createSampleData",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="".concat(16,"px"),t.height=16,t.width=960,t.style.width="960px",n.fillStyle="#ffffff",n.font="bold ".concat(16,"px ",e),n.textBaseline="middle";var i,r=0,s=(0,o.Z)(ke);try{for(s.s();!(i=s.n()).done;){var a=i.value;n.fillText(String.fromCharCode(a),r,8),r+=10}}catch(l){s.e(l)}finally{s.f()}return n.getImageData(0,0,960,16)}},{key:"createFromSampleData",value:function(t,n){if(61440!==t.length)throw new Error("Unexpected source in MinimapCharRenderer");var i=e._downsample(t,n);return new Re(i,n)}},{key:"_downsampleChar",value:function(e,t,n,i,o){for(var r=1*o,s=2*o,a=i,l=0,h=0;h<s;h++)for(var u=h/s*16,d=(h+1)/s*16,c=0;c<r;c++){for(var g=c/r*10,m=(c+1)/r*10,v=0,_=0,f=u;f<d;f++)for(var p=t+3840*Math.floor(f),y=1-(f-Math.floor(f)),C=g;C<m;C++){var L=1-(C-Math.floor(C)),N=p+4*Math.floor(C),b=L*y;_+=b,v+=e[N]*e[N+3]/255*b}var w=v/_;l=Math.max(l,w),n[a++]=(0,Se.K)(w)}return l}},{key:"_downsample",value:function(e,t){for(var n=2*t*1*t,i=96*n,o=new Uint8ClampedArray(i),r=0,s=0,a=0,l=0;l<96;l++)a=Math.max(a,this._downsampleChar(e,s,o,r,t)),r+=n,s+=40;if(a>0)for(var h=255/a,u=0;u<i;u++)o[u]*=h;return o}}]),e}(),He=n(36158),Ze=function(){function e(t,n,i){var o=this;(0,r.Z)(this,e);var s=t.options,a=s.get(129),l=s.get(131),h=l.minimap,u=s.get(44),d=s.get(65);this.renderMinimap=h.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=h.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(94),this.showSlider=d.showSlider,this.pixelRatio=a,this.typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(59),this.minimapLeft=h.minimapLeft,this.minimapWidth=h.minimapWidth,this.minimapHeight=l.height,this.canvasInnerWidth=h.minimapCanvasInnerWidth,this.canvasInnerHeight=h.minimapCanvasInnerHeight,this.canvasOuterWidth=h.minimapCanvasOuterWidth,this.canvasOuterHeight=h.minimapCanvasOuterHeight,this.isSampling=h.minimapIsSampling,this.editorHeight=l.height,this.fontScale=h.minimapScale,this.minimapLineHeight=h.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,De.I)((function(){return Ae.create(o.fontScale,u.fontFamily)})),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=e._getMinimapBackground(n,this.defaultBackgroundColor),this.foregroundAlpha=e._getMinimapForegroundOpacity(n)}return(0,s.Z)(e,[{key:"equals",value:function(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}],[{key:"_getMinimapBackground",value:function(e,t){var n=e.getColor(j.kVY);return n?new Le.h(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}},{key:"_getMinimapForegroundOpacity",value:function(e){var t=e.getColor(j.Itd);return t?Le.h._clamp(Math.round(255*t.rgba.a)):255}}]),e}(),Te=function(){function e(t,n,i,o,s,a,l,h){(0,r.Z)(this,e),this.scrollTop=t,this.scrollHeight=n,this.sliderNeeded=i,this._computedSliderRatio=o,this.sliderTop=s,this.sliderHeight=a,this.startLineNumber=l,this.endLineNumber=h}return(0,s.Z)(e,[{key:"getDesiredScrollTopFromDelta",value:function(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}},{key:"getDesiredScrollTopFromTouchLocation",value:function(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}}],[{key:"create",value:function(t,n,i,o,r,s,a,l,h,u,d){var c,g,m=t.pixelRatio,v=t.minimapLineHeight,_=Math.floor(t.canvasInnerHeight/v),f=t.lineHeight;if(t.minimapHeightIsEditorHeight){var p=l*t.lineHeight+(t.scrollBeyondLastLine?r-t.lineHeight:0),y=Math.max(1,Math.floor(r*r/p)),C=Math.max(0,t.minimapHeight-y),L=C/(u-r),N=h*L,b=C>0,w=Math.floor(t.canvasInnerHeight/t.minimapLineHeight);return new e(h,u,b,L,N,y,1,Math.min(a,w))}if(s&&i!==a){var k=i-n+1;c=Math.floor(k*v/m)}else{var S=r/f;c=Math.floor(S*v/m)}g=t.scrollBeyondLastLine?(a-1)*v/m:Math.max(0,a*v/m-c);var R=(g=Math.min(t.minimapHeight-c,g))/(u-r),D=h*R,M=0;t.scrollBeyondLastLine&&(M=r/f-1);if(_>=a+M){return new e(h,u,g>0,R,D,c,1,a)}var x=Math.max(1,Math.floor(n-D*m/v));return d&&d.scrollHeight===u&&(d.scrollTop>h&&(x=Math.min(x,d.startLineNumber)),d.scrollTop<h&&(x=Math.max(x,d.startLineNumber))),new e(h,u,!0,R,(n-x+(h-o)/f)*v/m,c,x,Math.min(a,x+_-1))}}]),e}(),Ie=function(){function e(t){(0,r.Z)(this,e),this.dy=t}return(0,s.Z)(e,[{key:"onContentChanged",value:function(){this.dy=-1}},{key:"onTokensChanged",value:function(){this.dy=-1}}]),e}();Ie.INVALID=new Ie(-1);var Ee=function(){function e(t,n,i){(0,r.Z)(this,e),this.renderedLayout=t,this._imageData=n,this._renderedLines=new k((function(){return Ie.INVALID})),this._renderedLines._set(t.startLineNumber,i)}return(0,s.Z)(e,[{key:"linesEquals",value:function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get().lines,n=0,i=t.length;n<i;n++)if(-1===t[n].dy)return!1;return!0}},{key:"scrollEquals",value:function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}},{key:"_get",value:function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}},{key:"onLinesChanged",value:function(e,t){return this._renderedLines.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){this._renderedLines.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._renderedLines.onLinesInserted(e,t)}},{key:"onTokensChanged",value:function(e){return this._renderedLines.onTokensChanged(e)}}]),e}(),Oe=function(){function e(t,n,i,o){(0,r.Z)(this,e),this._backgroundFillData=e._createBackgroundFillData(n,i,o),this._buffers=[t.createImageData(n,i),t.createImageData(n,i)],this._lastUsedBuffer=0}return(0,s.Z)(e,[{key:"getBuffer",value:function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}}],[{key:"_createBackgroundFillData",value:function(e,t,n){for(var i=n.r,o=n.g,r=n.b,s=n.a,a=new Uint8ClampedArray(e*t*4),l=0,h=0;h<t;h++)for(var u=0;u<e;u++)a[l]=i,a[l+1]=o,a[l+2]=r,a[l+3]=s,l+=4;return a}}]),e}(),Pe=function(){function e(t,n){(0,r.Z)(this,e),this.samplingRatio=t,this.minimapLines=n}return(0,s.Z)(e,[{key:"modelLineToMinimapLine",value:function(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}},{key:"modelLineRangeToMinimapLineRange",value:function(e,t){for(var n=this.modelLineToMinimapLine(e)-1;n>0&&this.minimapLines[n-1]>=e;)n--;for(var i=this.modelLineToMinimapLine(t)-1;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){var o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,i+1]}},{key:"decorationLineRangeToMinimapLineRange",value:function(e,t){var n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}},{key:"onLinesDeleted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length,i=0,o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),i=Math.max(i,o)):this.minimapLines[o]-=t;return[n,i]}},{key:"onLinesInserted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}],[{key:"compute",value:function(t,n,i){if(0===t.renderMinimap||!t.isSampling)return[null,[]];var o=t.pixelRatio,r=t.lineHeight,s=t.scrollBeyondLastLine,a=Ce.gk.computeContainedMinimapLineCount({viewLineCount:n,scrollBeyondLastLine:s,height:t.editorHeight,lineHeight:r,pixelRatio:o}).minimapLineCount,l=n/a,h=l/2;if(!i||0===i.minimapLines.length){var u=[];if(u[0]=1,a>1){for(var d=0,c=a-1;d<c;d++)u[d]=Math.round(d*l+h);u[a-1]=n}return[new e(l,u),[]]}for(var g=i.minimapLines,m=g.length,v=[],_=0,f=0,p=1,y=[],C=null,L=0;L<a;L++){for(var N=Math.max(p,Math.round(L*l)),b=Math.max(N,Math.round((L+1)*l));_<m&&g[_]<N;){if(y.length<10){var w=_+1+f;C&&"deleted"===C.type&&C._oldIndex===_-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:_,deleteFromLineNumber:w,deleteToLineNumber:w},y.push(C)),f--}_++}var k=void 0;if(_<m&&g[_]<=b)k=g[_],_++;else if(k=0===L?1:L+1===a?n:Math.round(L*l+h),y.length<10){var S=_+1+f;C&&"inserted"===C.type&&C._i===L-1?C.insertToLineNumber++:(C={type:"inserted",_i:L,insertFromLineNumber:S,insertToLineNumber:S},y.push(C)),f++}v[L]=k,p=k}if(y.length<10)for(;_<m;){var R=_+1+f;C&&"deleted"===C.type&&C._oldIndex===_-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:_,deleteFromLineNumber:R,deleteToLineNumber:R},y.push(C)),f--,_++}else y=[{type:"flush"}];return[new e(l,v),y]}}]),e}(),Fe=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this,e)).tokensColorTracker=Ne.E.getInstance(),i._selections=[],i._minimapSelections=null,i.options=new Ze(i._context.configuration,i._context.theme,i.tokensColorTracker);var o=Pe.compute(i.options,i._context.model.getLineCount(),null),s=(0,H.Z)(o,1)[0];return i._samplingState=s,i._shouldCheckSampling=!1,i._actual=new Be(e.theme,(0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._actual.dispose(),(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._actual.getDomNode()}},{key:"_onOptionsMaybeChanged",value:function(){var e=new Ze(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}},{key:"onFlushed",value:function(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}},{key:"onLinesChanged",value:function(e){if(this._samplingState){var t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return!!t&&this._actual.onLinesChanged(t[0],t[1])}return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesDeleted",value:function(e){if(this._samplingState){var t=this._samplingState.onLinesDeleted(e),n=(0,H.Z)(t,2),i=n[0],o=n[1];return i<=o&&this._actual.onLinesChanged(i+1,o+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesInserted",value:function(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}},{key:"onScrollChanged",value:function(e){return this._actual.onScrollChanged()}},{key:"onThemeChanged",value:function(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}},{key:"onTokensChanged",value:function(e){if(this._samplingState){var t,n=[],i=(0,o.Z)(e.ranges);try{for(i.s();!(t=i.n()).done;){var r=t.value,s=this._samplingState.modelLineRangeToMinimapLineRange(r.fromLineNumber,r.toLineNumber);s&&n.push({fromLineNumber:s[0],toLineNumber:s[1]})}}catch(a){i.e(a)}finally{i.f()}return!!n.length&&this._actual.onTokensChanged(n)}return this._actual.onTokensChanged(e.ranges)}},{key:"onTokensColorsChanged",value:function(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}},{key:"onZonesChanged",value:function(e){return this._actual.onZonesChanged()}},{key:"prepareRender",value:function(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}},{key:"render",value:function(e){var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));var i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}},{key:"_recreateLineSampling",value:function(){this._minimapSelections=null;var e=Boolean(this._samplingState),t=Pe.compute(this.options,this._context.model.getLineCount(),this._samplingState),n=(0,H.Z)(t,2),i=n[0],r=n[1];if(this._samplingState=i,e&&this._samplingState){var s,a=(0,o.Z)(r);try{for(a.s();!(s=a.n()).done;){var l=s.value;switch(l.type){case"deleted":this._actual.onLinesDeleted(l.deleteFromLineNumber,l.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(l.insertFromLineNumber,l.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}}catch(h){a.e(h)}finally{a.f()}}}},{key:"getLineCount",value:function(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}},{key:"getRealLineCount",value:function(){return this._context.model.getLineCount()}},{key:"getLineContent",value:function(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}},{key:"getLineMaxColumn",value:function(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,n){if(this._samplingState){for(var i=[],o=0,r=t-e+1;o<r;o++)n[o]?i[o]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+o-1]):i[o]=null;return i}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}},{key:"getSelections",value:function(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];var e,t=(0,o.Z)(this._selections);try{for(t.s();!(e=t.n()).done;){var n=e.value,i=this._samplingState.decorationLineRangeToMinimapLineRange(n.startLineNumber,n.endLineNumber),r=(0,H.Z)(i,2),s=r[0],a=r[1];this._minimapSelections.push(new g.Y(s,n.startColumn,a,n.endColumn))}}catch(l){t.e(l)}finally{t.f()}}else this._minimapSelections=this._selections;return this._minimapSelections}},{key:"getMinimapDecorationsInViewport",value:function(e,t){var n;if(this._samplingState){var i=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new K.e(i,1,r,this._context.model.getLineMaxColumn(r))}else n=new K.e(e,1,t,this._context.model.getLineMaxColumn(t));var s=this._context.model.getDecorationsInViewport(n);if(this._samplingState){var a,l=[],h=(0,o.Z)(s);try{for(h.s();!(a=h.n()).done;){var u=a.value;if(u.options.minimap){var d=u.range,c=this._samplingState.modelLineToMinimapLine(d.startLineNumber),g=this._samplingState.modelLineToMinimapLine(d.endLineNumber);l.push(new be.$l(new K.e(c,d.startColumn,g,d.endColumn),u.options))}}}catch(m){h.e(m)}finally{h.f()}return l}return s}},{key:"getOptions",value:function(){return this._context.model.getTextModelOptions()}},{key:"revealLineNumber",value:function(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new K.e(e,1,e,1),1,0)}},{key:"setScrollTop",value:function(e){this._context.model.setScrollPosition({scrollTop:e},1)}}]),n}(D.E),Be=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this))._renderDecorations=!1,o._gestureInProgress=!1,o._theme=e,o._model=i,o._lastRenderData=null,o._buffers=null,o._selectionColor=o._theme.getColor(j.ov3),o._domNode=(0,m.X)(document.createElement("div")),D.K.write(o._domNode,8),o._domNode.setClassName(o._getMinimapDomNodeClassName()),o._domNode.setPosition("absolute"),o._domNode.setAttribute("role","presentation"),o._domNode.setAttribute("aria-hidden","true"),o._shadow=(0,m.X)(document.createElement("div")),o._shadow.setClassName("minimap-shadow-hidden"),o._domNode.appendChild(o._shadow),o._canvas=(0,m.X)(document.createElement("canvas")),o._canvas.setPosition("absolute"),o._canvas.setLeft(0),o._domNode.appendChild(o._canvas),o._decorationsCanvas=(0,m.X)(document.createElement("canvas")),o._decorationsCanvas.setPosition("absolute"),o._decorationsCanvas.setClassName("minimap-decorations-layer"),o._decorationsCanvas.setLeft(0),o._domNode.appendChild(o._decorationsCanvas),o._slider=(0,m.X)(document.createElement("div")),o._slider.setPosition("absolute"),o._slider.setClassName("minimap-slider"),o._slider.setLayerHinting(!0),o._slider.setContain("strict"),o._domNode.appendChild(o._slider),o._sliderHorizontal=(0,m.X)(document.createElement("div")),o._sliderHorizontal.setPosition("absolute"),o._sliderHorizontal.setClassName("minimap-slider-horizontal"),o._slider.appendChild(o._sliderHorizontal),o._applyLayout(),o._mouseDownListener=c.addStandardDisposableListener(o._domNode.domNode,"mousedown",(function(e){if(e.preventDefault(),0!==o._model.options.renderMinimap&&o._lastRenderData)if("proportional"===o._model.options.size){var t=o._model.options.minimapLineHeight,n=o._model.options.canvasInnerHeight/o._model.options.canvasOuterHeight*e.browserEvent.offsetY,i=Math.floor(n/t)+o._lastRenderData.renderedLayout.startLineNumber;i=Math.min(i,o._model.getLineCount()),o._model.revealLineNumber(i)}else if(e.leftButton&&o._lastRenderData){var r=c.getDomNodePagePosition(o._slider.domNode),s=r.top+r.height/2;o._startSliderDragging(e.buttons,e.posx,s,e.posy,o._lastRenderData.renderedLayout)}})),o._sliderMouseMoveMonitor=new fe.Z,o._sliderMouseDownListener=c.addStandardDisposableListener(o._slider.domNode,"mousedown",(function(e){e.preventDefault(),e.stopPropagation(),e.leftButton&&o._lastRenderData&&o._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,o._lastRenderData.renderedLayout)})),o._gestureDisposable=we.o.addTarget(o._domNode.domNode),o._sliderTouchStartListener=c.addDisposableListener(o._domNode.domNode,we.t.Start,(function(e){e.preventDefault(),e.stopPropagation(),o._lastRenderData&&(o._slider.toggleClassName("active",!0),o._gestureInProgress=!0,o.scrollDueToTouchEvent(e))}),{passive:!1}),o._sliderTouchMoveListener=c.addDisposableListener(o._domNode.domNode,we.t.Change,(function(e){e.preventDefault(),e.stopPropagation(),o._lastRenderData&&o._gestureInProgress&&o.scrollDueToTouchEvent(e)}),{passive:!1}),o._sliderTouchEndListener=c.addStandardDisposableListener(o._domNode.domNode,we.t.End,(function(e){e.preventDefault(),e.stopPropagation(),o._gestureInProgress=!1,o._slider.toggleClassName("active",!1)})),o}return(0,s.Z)(n,[{key:"_startSliderDragging",value:function(e,t,n,i,o){var r=this;this._slider.toggleClassName("active",!0);var s=function(e,i){var s=Math.abs(i-t);if(C.ED&&s>140)r._model.setScrollTop(o.scrollTop);else{var a=e-n;r._model.setScrollTop(o.getDesiredScrollTopFromDelta(a))}};i!==n&&s(i,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,fe.e,(function(e){return s(e.posy,e.posx)}),(function(){r._slider.toggleClassName("active",!1)}))}},{key:"scrollDueToTouchEvent",value:function(e){var t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}},{key:"dispose",value:function(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"_getMinimapDomNodeClassName",value:function(){return"always"===this._model.options.showSlider?"minimap slider-always":"minimap slider-mouseover"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_applyLayout",value:function(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}},{key:"_getBuffer",value:function(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Oe(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}},{key:"onDidChangeOptions",value:function(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}},{key:"onSelectionChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onDecorationsChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onFlushed",value:function(){return this._lastRenderData=null,!0}},{key:"onLinesChanged",value:function(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}},{key:"onLinesInserted",value:function(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}},{key:"onScrollChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onThemeChanged",value:function(){return this._selectionColor=this._theme.getColor(j.ov3),this._renderDecorations=!0,!0}},{key:"onTokensChanged",value:function(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}},{key:"onTokensColorsChanged",value:function(){return this._lastRenderData=null,this._buffers=null,!0}},{key:"onZonesChanged",value:function(){return this._lastRenderData=null,!0}},{key:"render",value:function(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var t=Te.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}},{key:"renderDecorations",value:function(e){if(this._renderDecorations){this._renderDecorations=!1;var t=this._model.getSelections();t.sort(K.e.compareRangesUsingStarts);var n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((function(e,t){return(e.options.zIndex||0)-(t.options.zIndex||0)}));var i=this._model.options,o=i.canvasInnerWidth,r=i.canvasInnerHeight,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,o,r);var u=new Ve(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(h,t,u,e,s),this._renderDecorationsLineHighlights(h,n,u,e,s);var d=new Ve(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(h,t,d,e,s,l,a,o),this._renderDecorationsHighlights(h,n,d,e,s,l,a,o)}}},{key:"_renderSelectionLineHighlights",value:function(e,t,n,i,r){if(this._selectionColor&&!this._selectionColor.isTransparent()){e.fillStyle=this._selectionColor.transparent(.5).toString();var s,a=0,l=0,h=(0,o.Z)(t);try{for(h.s();!(s=h.n()).done;){var u=s.value,d=Math.max(i.startLineNumber,u.startLineNumber),c=Math.min(i.endLineNumber,u.endLineNumber);if(!(d>c)){for(var g=d;g<=c;g++)n.set(g,!0);var m=(d-i.startLineNumber)*r,v=(c-i.startLineNumber)*r+r;l>=m||(l>a&&e.fillRect(Ce.y0,a,e.canvas.width,l-a),a=m),l=v}}}catch(_){h.e(_)}finally{h.f()}l>a&&e.fillRect(Ce.y0,a,e.canvas.width,l-a)}}},{key:"_renderDecorationsLineHighlights",value:function(e,t,n,i,o){for(var r=new Map,s=t.length-1;s>=0;s--){var a=t[s],l=a.options.minimap;if(l&&l.position===He.F5.Inline){var h=Math.max(i.startLineNumber,a.range.startLineNumber),u=Math.min(i.endLineNumber,a.range.endLineNumber);if(!(h>u)){var d=l.getColor(this._theme.value);if(d&&!d.isTransparent()){var c=r.get(d.toString());c||(c=d.transparent(.5).toString(),r.set(d.toString(),c)),e.fillStyle=c;for(var g=h;g<=u;g++)if(!n.has(g)){n.set(g,!0);var m=(h-i.startLineNumber)*o;e.fillRect(Ce.y0,m,e.canvas.width,o)}}}}}}},{key:"_renderSelectionsHighlights",value:function(e,t,n,i,r,s,a,l){if(this._selectionColor&&!this._selectionColor.isTransparent()){var h,u=(0,o.Z)(t);try{for(u.s();!(h=u.n()).done;){var d=h.value,c=Math.max(i.startLineNumber,d.startLineNumber),g=Math.min(i.endLineNumber,d.endLineNumber);if(!(c>g))for(var m=c;m<=g;m++)this.renderDecorationOnLine(e,n,d,this._selectionColor,i,m,r,r,s,a,l)}}catch(v){u.e(v)}finally{u.f()}}}},{key:"_renderDecorationsHighlights",value:function(e,t,n,i,r,s,a,l){var h,u=(0,o.Z)(t);try{for(u.s();!(h=u.n()).done;){var d=h.value,c=d.options.minimap;if(c){var g=Math.max(i.startLineNumber,d.range.startLineNumber),m=Math.min(i.endLineNumber,d.range.endLineNumber);if(!(g>m)){var v=c.getColor(this._theme.value);if(v&&!v.isTransparent())for(var _=g;_<=m;_++)switch(c.position){case He.F5.Inline:this.renderDecorationOnLine(e,n,d.range,v,i,_,r,r,s,a,l);continue;case He.F5.Gutter:var f=(_-i.startLineNumber)*r;this.renderDecoration(e,v,2,f,2,r);continue}}}}}catch(p){u.e(p)}finally{u.f()}}},{key:"renderDecorationOnLine",value:function(e,t,n,i,o,r,s,a,l,h,u){var d=(r-o.startLineNumber)*a;if(!(d+s<0||d>this._model.options.canvasInnerHeight)){var c=n.startLineNumber,g=n.endLineNumber,m=c===r?n.startColumn:1,v=g===r?n.endColumn:this._model.getLineMaxColumn(r),_=this.getXOffsetForPosition(t,r,m,l,h,u),f=this.getXOffsetForPosition(t,r,v,l,h,u);this.renderDecoration(e,i,_,d,f-_,s)}}},{key:"getXOffsetForPosition",value:function(e,t,n,i,o,r){if(1===n)return Ce.y0;if((n-1)*o>=r)return r;var s=e.get(t);if(!s){var a=this._model.getLineContent(t);s=[Ce.y0];for(var l=Ce.y0,h=1;h<a.length+1;h++){var u=a.charCodeAt(h-1),d=l+(9===u?i*o:ye.K7(u)?2*o:o);if(d>=r){s[h]=r;break}s[h]=d,l=d}e.set(t,s)}return n-1<s.length?s[n-1]:r}},{key:"renderDecoration",value:function(e,t,n,i,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,o,r)}},{key:"renderLines",value:function(e){var t=e.startLineNumber,i=e.endLineNumber,o=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){var r=this._lastRenderData._get();return new Ee(e,r.imageData,r.lines)}var s=this._getBuffer();if(!s)return null;for(var a=n._renderUntouchedLines(s,t,i,o,this._lastRenderData),l=(0,H.Z)(a,3),h=l[0],u=l[1],d=l[2],c=this._model.getMinimapLinesRenderingData(t,i,d),g=this._model.getOptions().tabSize,m=this._model.options.defaultBackgroundColor,v=this._model.options.backgroundColor,_=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,p=f.backgroundIsLight(),y=this._model.options.renderMinimap,C=this._model.options.charRenderer(),L=this._model.options.fontScale,N=this._model.options.minimapCharWidth,b=(1===y?2:3)*L,w=o>b?Math.floor((o-b)/2):0,k=v.a/255,S=new Le.h(Math.round((v.r-m.r)*k+m.r),Math.round((v.g-m.g)*k+m.g),Math.round((v.b-m.b)*k+m.b),255),R=0,D=[],M=0,x=i-t+1;M<x;M++)d[M]&&n._renderLine(s,S,v.a,p,y,N,f,_,C,R,w,g,c[M],L,o),D[M]=new Ie(R),R+=o;var W=-1===h?0:h,A=(-1===u?s.height:u)-W;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,W,s.width,A),new Ee(e,s,D)}}],[{key:"_renderUntouchedLines",value:function(e,t,n,i,o){var r=[];if(!o){for(var s=0,a=n-t+1;s<a;s++)r[s]=!0;return[-1,-1,r]}for(var l=o._get(),h=l.imageData.data,u=l.rendLineNumberStart,d=l.lines,c=d.length,g=e.width,m=e.data,v=(n-t+1)*i*g*4,_=-1,f=-1,p=-1,y=-1,C=-1,L=-1,N=0,b=t;b<=n;b++){var w=b-t,k=b-u,S=k>=0&&k<c?d[k].dy:-1;if(-1!==S){var R=S*g*4,D=(S+i)*g*4,M=N*g*4,x=(N+i)*g*4;y===R&&L===M?(y=D,L=x):(-1!==p&&(m.set(h.subarray(p,y),C),-1===_&&0===p&&p===C&&(_=y),-1===f&&y===v&&p===C&&(f=p)),p=R,y=D,C=M,L=x),r[w]=!1,N+=i}else r[w]=!0,N+=i}return-1!==p&&(m.set(h.subarray(p,y),C),-1===_&&0===p&&p===C&&(_=y),-1===f&&y===v&&p===C&&(f=p)),[-1===_?-1:_/(4*g),-1===f?-1:f/(4*g),r]}},{key:"_renderLine",value:function(e,t,n,i,o,r,s,a,l,h,u,d,c,g,m){for(var v=c.content,_=c.tokens,f=e.width-r,p=1===m,y=Ce.y0,C=0,L=0,N=0,b=_.getCount();N<b;N++)for(var w=_.getEndOffset(N),k=_.getForeground(N),S=s.getColor(k);C<w;C++){if(y>f)return;var R=v.charCodeAt(C);if(9===R){var D=d-(C+L)%d;L+=D-1,y+=D*r}else if(32===R)y+=r;else for(var M=ye.K7(R)?2:1,x=0;x<M;x++)if(2===o?l.blockRenderChar(e,y,h+u,S,a,t,n,p):l.renderChar(e,y,h+u,R,S,a,t,n,g,i,p),(y+=r)>f)return}}}]),n}(pe.JT),Ve=function(){function e(t,n,i){(0,r.Z)(this,e),this._startLineNumber=t,this._endLineNumber=n,this._defaultValue=i,this._values=[];for(var o=0,s=this._endLineNumber-this._startLineNumber+1;o<s;o++)this._values[o]=i}return(0,s.Z)(e,[{key:"has",value:function(e){return this.get(e)!==this._defaultValue}},{key:"set",value:function(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}},{key:"get",value:function(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}]),e}();(0,B.Ic)((function(e,t){var n=e.getColor(j.CA6);n&&t.addRule(".monaco-editor .minimap-slider .minimap-slider-horizontal { background: ".concat(n,"; }"));var i=e.getColor(j.Xy4);i&&t.addRule(".monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ".concat(i,"; }"));var o=e.getColor(j.brw);o&&t.addRule(".monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ".concat(o,"; }"));var r=e.getColor(j._wn);r&&t.addRule(".monaco-editor .minimap-shadow-visible { box-shadow: ".concat(r," -6px 0 6px -6px inset; }"))}));var ze=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n);var o=(i=t.call(this,e))._context.configuration.options.get(131);return i._widgets={},i._verticalScrollbarWidth=o.verticalScrollbarWidth,i._minimapWidth=o.minimap.minimapWidth,i._horizontalScrollbarHeight=o.horizontalScrollbarHeight,i._editorHeight=o.height,i._editorWidth=o.width,i._domNode=(0,m.X)(document.createElement("div")),D.K.write(i._domNode,4),i._domNode.setClassName("overlayWidgets"),i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._widgets={}}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(131);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}},{key:"addWidget",value:function(e){var t=(0,m.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t){var n=this._widgets[e.getId()];return n.preference!==t&&(n.preference=t,this.setShouldRender(),!0)}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.parentNode.removeChild(n),this.setShouldRender()}}},{key:"_renderWidget",value:function(e){var t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){var n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(t.setTop(0),t.domNode.style.right="50%");else t.unsetTop()}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._editorWidth);for(var t=Object.keys(this._widgets),n=0,i=t.length;n<i;n++){var o=t[n];this._renderWidget(this._widgets[o])}}}]),n}(D.E),Ue=n(17424),Ke=n(49500),Ge=function(){function e(t,n){(0,r.Z)(this,e);var i=t.options;this.lineHeight=i.get(59),this.pixelRatio=i.get(129),this.overviewRulerLanes=i.get(74),this.renderBorder=i.get(73);var o=n.getColor(P.zw);this.borderColor=o?o.toString():null,this.hideCursor=i.get(52);var s=n.getColor(P.n0);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=n.type;var a=i.get(65),l=a.enabled,h=a.side,u=l?n.getColor(P.e_)||Ke.RW.getDefaultBackground():null;this.backgroundColor=null===u||"left"===h?null:Ue.Il.Format.CSS.formatHex(u);var d=i.get(131).overviewRuler;this.top=d.top,this.right=d.right,this.domWidth=d.width,this.domHeight=d.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);var c=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),g=(0,H.Z)(c,2),m=g[0],v=g[1];this.x=m,this.w=v}return(0,s.Z)(e,[{key:"_initLanes",value:function(e,t,n){var i=t-e;if(n>=3){var o=Math.floor(i/3),r=Math.floor(i/3),s=i-o-r,a=e+o;return[[0,e,a,e,e+o+s,e,a,e],[0,o,s,o+s,r,o+s+r,s+r,o+s+r]]}if(2===n){var l=Math.floor(i/2),h=i-l;return[[0,e,e,e,e+l,e,e,e],[0,l,l,l,h,l+h,l+h,l+h]]}return[[0,e,e,e,e,e,e,e],[0,i,i,i,i,i,i,i]]}},{key:"equals",value:function(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}]),e}(),Xe=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._domNode=(0,m.X)(document.createElement("canvas")),i._domNode.setClassName("decorationsOverviewRuler"),i._domNode.setPosition("absolute"),i._domNode.setLayerHinting(!0),i._domNode.setContain("strict"),i._domNode.setAttribute("aria-hidden","true"),i._updateSettings(!1),i._tokensColorTrackerListener=Ke.RW.onDidChange((function(e){e.changedColorMap&&i._updateSettings(!0)})),i._cursorPositions=[],i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._tokensColorTrackerListener.dispose()}},{key:"_updateSettings",value:function(e){var t=new Ge(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._updateSettings(!1)}},{key:"onCursorStateChanged",value:function(e){this._cursorPositions=[];for(var t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(y.L.compare),!0}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsOverviewRuler}},{key:"onFlushed",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._render()}},{key:"_render",value:function(){if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),void this._domNode.setDisplay("none");this._domNode.setDisplay("block");var e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,r=t/this._context.viewLayout.getScrollHeight(),s=this._context.model.getAllOverviewRulerDecorations(this._context.theme),a=6*this._settings.pixelRatio|0,l=a/2|0,h=this._domNode.domNode.getContext("2d");null===this._settings.backgroundColor?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));var u=this._settings.x,d=this._settings.w;s.sort(be.SQ.cmp);var c,g=(0,o.Z)(s);try{for(g.s();!(c=g.n()).done;){var m=c.value,v=m.color,_=m.data;h.fillStyle=v;for(var f=0,p=0,y=0,C=0,L=_.length/3;C<L;C++){var N=_[3*C],b=_[3*C+1],w=_[3*C+2],k=i.getVerticalOffsetForLineNumber(b)*r|0,S=(i.getVerticalOffsetForLineNumber(w)+n)*r|0;if(S-k<a){var R=(k+S)/2|0;R<l?R=l:R+l>t&&(R=t-l),k=R-l,S=R+l}k>y+1||N!==f?(0!==C&&h.fillRect(u[f],p,d[f],y-p),f=N,p=k,y=S):S>y&&(y=S)}h.fillRect(u[f],p,d[f],y-p)}}catch(F){g.e(F)}finally{g.f()}if(!this._settings.hideCursor&&this._settings.cursorColor){var D=2*this._settings.pixelRatio|0,M=D/2|0,x=this._settings.x[7],W=this._settings.w[7];h.fillStyle=this._settings.cursorColor;for(var A=-100,H=-100,Z=0,T=this._cursorPositions.length;Z<T;Z++){var I=this._cursorPositions[Z],E=i.getVerticalOffsetForLineNumber(I.lineNumber)*r|0;E<M?E=M:E+M>t&&(E=t-M);var O=E-M,P=O+D;O>H+1?(0!==Z&&h.fillRect(x,A,W,H-A),A=O,H=P):P>H&&(H=P)}h.fillRect(x,A,W,H-A)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}]),n}(D.E),qe=n(55522),je=n(63344),Ye=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var o;(0,r.Z)(this,n),(o=t.call(this))._context=e;var s=o._context.configuration.options;return o._domNode=(0,m.X)(document.createElement("canvas")),o._domNode.setClassName(i),o._domNode.setPosition("absolute"),o._domNode.setLayerHinting(!0),o._domNode.setContain("strict"),o._zoneManager=new qe.Tj((function(e){return o._context.viewLayout.getVerticalOffsetForLineNumber(e)})),o._zoneManager.setDOMWidth(0),o._zoneManager.setDOMHeight(0),o._zoneManager.setOuterHeight(o._context.viewLayout.getScrollHeight()),o._zoneManager.setLineHeight(s.get(59)),o._zoneManager.setPixelRatio(s.get(129)),o._context.addEventHandler((0,a.Z)(o)),o}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return e.hasChanged(59)&&(this._zoneManager.setLineHeight(t.get(59)),this._render()),e.hasChanged(129)&&(this._zoneManager.setPixelRatio(t.get(129)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}},{key:"onFlushed",value:function(e){return this._render(),!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}},{key:"onZonesChanged",value:function(e){return this._render(),!0}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"setLayout",value:function(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);var t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}},{key:"setZones",value:function(e){this._zoneManager.setZones(e),this._render()}},{key:"_render",value:function(){if(0===this._zoneManager.getOuterHeight())return!1;var e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,i,e),!0}},{key:"_renderOneLane",value:function(e,t,n,i){var r,s=0,a=0,l=0,h=(0,o.Z)(t);try{for(h.s();!(r=h.n()).done;){var u=r.value,d=u.colorId,c=u.from,g=u.to;d!==s?(e.fillRect(0,a,i,l-a),s=d,e.fillStyle=n[s],a=c,l=g):l>=c?l=Math.max(l,g):(e.fillRect(0,a,i,l-a),a=c,l=g)}}catch(m){h.e(m)}finally{h.f()}e.fillRect(0,a,i,l-a)}}]),n}(je.O),Je=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this,e)).domNode=(0,m.X)(document.createElement("div")),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i.domNode.setClassName("view-rulers"),i._renderedRulers=[];var o=i._context.configuration.options;return i._rulers=o.get(91),i._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._rulers=t.get(91),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"prepareRender",value:function(e){}},{key:"_ensureRulersCount",value:function(){var e=this._renderedRulers.length,t=this._rulers.length;if(e!==t)if(e<t)for(var n=this._context.model.getTextModelOptions().tabSize,i=t-e;i>0;){var o=(0,m.X)(document.createElement("div"));o.setClassName("view-ruler"),o.setWidth(n),this.domNode.appendChild(o),this._renderedRulers.push(o),i--}else for(var r=e-t;r>0;){var s=this._renderedRulers.pop();this.domNode.removeChild(s),r--}}},{key:"render",value:function(e){this._ensureRulersCount();for(var t=0,n=this._rulers.length;t<n;t++){var i=this._renderedRulers[t],o=this._rulers[t];i.setBoxShadow(o.color?"1px 0 0 0 ".concat(o.color," inset"):""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}]),n}(D.E);(0,B.Ic)((function(e,t){var n=e.getColor(P.zk);n&&t.addRule(".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ".concat(n," inset; }"))}));var $e=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this,e))._scrollTop=0,i._width=0,i._updateWidth(),i._shouldShow=!1;var o=i._context.configuration.options.get(92);return i._useShadows=o.useShadows,i._domNode=(0,m.X)(document.createElement("div")),i._domNode.setAttribute("role","presentation"),i._domNode.setAttribute("aria-hidden","true"),i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"_updateShouldShow",value:function(){var e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_updateWidth",value:function(){var e=this._context.configuration.options.get(131);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(92);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}},{key:"onScrollChanged",value:function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}]),n}(D.E);(0,B.Ic)((function(e,t){var n=e.getColor(j._wn);n&&t.addRule(".monaco-editor .scroll-decoration { box-shadow: ".concat(n," 0 6px 6px -6px inset; }"))}));var Qe=(0,s.Z)((function e(t){(0,r.Z)(this,e),this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null})),et=(0,s.Z)((function e(t,n){(0,r.Z)(this,e),this.lineNumber=t,this.ranges=n}));function tt(e){return new Qe(e)}function nt(e){return new et(e.lineNumber,e.ranges.map(tt))}var it=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this))._previousFrameVisibleRangesWithStyle=[],i._context=e;var o=i._context.configuration.options;return i._lineHeight=o.get(59),i._roundedSelection=o.get(90),i._typicalHalfwidthCharacterWidth=o.get(44).typicalHalfwidthCharacterWidth,i._selections=[],i._renderResult=null,i._context.addEventHandler((0,a.Z)(i)),i}return(0,s.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(59),this._roundedSelection=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_visibleRangesHaveGaps",value:function(e){for(var t=0,n=e.length;t<n;t++){if(e[t].ranges.length>1)return!0}return!1}},{key:"_enrichVisibleRangesWithStyle",value:function(e,t,n){var i=this._typicalHalfwidthCharacterWidth/4,o=null,r=null;if(n&&n.length>0&&t.length>0){var s=t[0].lineNumber;if(s===e.startLineNumber)for(var a=0;!o&&a<n.length;a++)n[a].lineNumber===s&&(o=n[a].ranges[0]);var l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(var h=n.length-1;!r&&h>=0;h--)n[h].lineNumber===l&&(r=n[h].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(var u=0,d=t.length;u<d;u++){var c=t[u].ranges[0],g=c.left,m=c.left+c.width,v={top:0,bottom:0},_={top:0,bottom:0};if(u>0){var f=t[u-1].ranges[0].left,p=t[u-1].ranges[0].left+t[u-1].ranges[0].width;ot(g-f)<i?v.top=2:g>f&&(v.top=1),ot(m-p)<i?_.top=2:f<m&&m<p&&(_.top=1)}else o&&(v.top=o.startStyle.top,_.top=o.endStyle.top);if(u+1<d){var y=t[u+1].ranges[0].left,C=t[u+1].ranges[0].left+t[u+1].ranges[0].width;ot(g-y)<i?v.bottom=2:y<g&&g<C&&(v.bottom=1),ot(m-C)<i?_.bottom=2:m<C&&(_.bottom=1)}else r&&(v.bottom=r.startStyle.bottom,_.bottom=r.endStyle.bottom);c.startStyle=v,c.endStyle=_}}},{key:"_getVisibleRangesWithStyle",value:function(e,t,n){var i=(t.linesVisibleRangesForRange(e,!0)||[]).map(nt);return!this._visibleRangesHaveGaps(i)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,i,n),i}},{key:"_createSelectionPiece",value:function(e,t,n,i,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}},{key:"_actualRenderOneSelection",value:function(e,t,i,o){if(0!==o.length)for(var r=!!o[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=o[0].lineNumber,h=o[o.length-1].lineNumber,u=0,d=o.length;u<d;u++){for(var c=o[u],g=c.lineNumber,m=g-t,v=i&&(g===h||g===l)?a:s,_=i&&g===l?1:0,f="",p="",y=0,C=c.ranges.length;y<C;y++){var L=c.ranges[y];if(r){var N=L.startStyle,b=L.endStyle;if(1===N.top||1===N.bottom){f+=this._createSelectionPiece(_,v,n.SELECTION_CLASS_NAME,L.left-n.ROUNDED_PIECE_WIDTH,n.ROUNDED_PIECE_WIDTH);var w=n.EDITOR_BACKGROUND_CLASS_NAME;1===N.top&&(w+=" "+n.SELECTION_TOP_RIGHT),1===N.bottom&&(w+=" "+n.SELECTION_BOTTOM_RIGHT),f+=this._createSelectionPiece(_,v,w,L.left-n.ROUNDED_PIECE_WIDTH,n.ROUNDED_PIECE_WIDTH)}if(1===b.top||1===b.bottom){f+=this._createSelectionPiece(_,v,n.SELECTION_CLASS_NAME,L.left+L.width,n.ROUNDED_PIECE_WIDTH);var k=n.EDITOR_BACKGROUND_CLASS_NAME;1===b.top&&(k+=" "+n.SELECTION_TOP_LEFT),1===b.bottom&&(k+=" "+n.SELECTION_BOTTOM_LEFT),f+=this._createSelectionPiece(_,v,k,L.left+L.width,n.ROUNDED_PIECE_WIDTH)}}var S=n.SELECTION_CLASS_NAME;if(r){var R=L.startStyle,D=L.endStyle;0===R.top&&(S+=" "+n.SELECTION_TOP_LEFT),0===R.bottom&&(S+=" "+n.SELECTION_BOTTOM_LEFT),0===D.top&&(S+=" "+n.SELECTION_TOP_RIGHT),0===D.bottom&&(S+=" "+n.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(_,v,S,L.left,L.width)}e[m][0]+=f,e[m][1]+=p}}},{key:"prepareRender",value:function(e){for(var t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=n;o<=i;o++){t[o-n]=["",""]}for(var r=[],s=0,a=this._selections.length;s<a;s++){var l=this._selections[s];if(l.isEmpty())r[s]=null;else{var h=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);r[s]=h,this._actualRenderOneSelection(t,n,this._selections.length>1,h)}}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map((function(e){var t=(0,H.Z)(e,2);return t[0]+t[1]}))}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),n}(O.i);function ot(e){return e<0?-e:e}it.SELECTION_CLASS_NAME="selected-text",it.SELECTION_TOP_LEFT="top-left-radius",it.SELECTION_BOTTOM_LEFT="bottom-left-radius",it.SELECTION_TOP_RIGHT="top-right-radius",it.SELECTION_BOTTOM_RIGHT="bottom-right-radius",it.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",it.ROUNDED_PIECE_WIDTH=10,(0,B.Ic)((function(e,t){var n=e.getColor(j.hEj);n&&t.addRule(".monaco-editor .focused .selected-text { background-color: ".concat(n,"; }"));var i=e.getColor(j.ES4);i&&t.addRule(".monaco-editor .selected-text { background-color: ".concat(i,"; }"));var o=e.getColor(j.yb5);o&&!o.isTransparent()&&t.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(o,"; }"))}));var rt=(0,s.Z)((function e(t,n,i,o,s,a){(0,r.Z)(this,e),this.top=t,this.left=n,this.width=i,this.height=o,this.textContent=s,this.textContentClassName=a})),st=function(){function e(t){(0,r.Z)(this,e),this._context=t;var n=this._context.configuration.options,i=n.get(44);this._cursorStyle=n.get(24),this._lineHeight=n.get(59),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,m.X)(document.createElement("div")),this._domNode.setClassName("cursor ".concat(he.S)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,b.N)(this._domNode,i),this._domNode.setDisplay("none"),this._position=new y.L(1,1),this._lastRenderedContent="",this._renderData=null}return(0,s.Z)(e,[{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._position}},{key:"show",value:function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}},{key:"hide",value:function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(44);return this._cursorStyle=t.get(24),this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),(0,b.N)(this._domNode,n),!0}},{key:"onCursorPositionChanged",value:function(e){return this._position=e,!0}},{key:"_getGraphemeAwarePosition",value:function(){var e=this._position,t=e.lineNumber,n=e.column,i=this._context.model.getLineContent(t),o=ye.J_(i,n-1),r=(0,H.Z)(o,2),s=r[0],a=r[1];return[new y.L(t,s+1),i.substring(s,a)]}},{key:"_prepareRender",value:function(e){var t="",n=this._getGraphemeAwarePosition(),i=(0,H.Z)(n,2),o=i[0],r=i[1];if(this._cursorStyle===Ce.d2.Line||this._cursorStyle===Ce.d2.LineThin){var s,a=e.visibleRangeForPosition(o);if(!a||a.outsideRenderedLine)return null;this._cursorStyle===Ce.d2.Line?(s=c.computeScreenAwareSize(this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=r):s=c.computeScreenAwareSize(1);var l=a.left;s>=2&&l>=1&&(l-=1);var h=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta;return new rt(h,l,s,this._lineHeight,t,"")}var u=e.linesVisibleRangesForRange(new K.e(o.lineNumber,o.column,o.lineNumber,o.column+r.length),!1);if(!u||0===u.length)return null;var d=u[0];if(d.outsideRenderedLine||0===d.ranges.length)return null;var g=d.ranges[0],m=g.width<1?this._typicalHalfwidthCharacterWidth:g.width,v="";if(this._cursorStyle===Ce.d2.Block){var _=this._context.model.getViewLineData(o.lineNumber);t=r;var f=_.tokens.findTokenIndexAtOffset(o.column-1);v=_.tokens.getClassName(f)}var p=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta,y=this._lineHeight;return this._cursorStyle!==Ce.d2.Underline&&this._cursorStyle!==Ce.d2.UnderlineThin||(p+=this._lineHeight-2,y=2),new rt(p,g.left,m,y,t,v)}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRender(e)}},{key:"render",value:function(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(he.S," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}]),e}(),at=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n);var o=(i=t.call(this,e))._context.configuration.options;return i._readOnly=o.get(81),i._cursorBlinking=o.get(22),i._cursorStyle=o.get(24),i._cursorSmoothCaretAnimation=o.get(23),i._selectionIsEmpty=!0,i._isComposingInput=!1,i._isVisible=!1,i._primaryCursor=new st(i._context),i._secondaryCursors=[],i._renderData=[],i._domNode=(0,m.X)(document.createElement("div")),i._domNode.setAttribute("role","presentation"),i._domNode.setAttribute("aria-hidden","true"),i._updateDomClassName(),i._domNode.appendChild(i._primaryCursor.getDomNode()),i._startCursorBlinkAnimation=new ae._F,i._cursorFlatBlinkInterval=new ae.zh,i._blinkingEnabled=!1,i._editorHasFocus=!1,i._updateBlinking(),i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onCompositionStart",value:function(e){return this._isComposingInput=!0,this._updateBlinking(),!0}},{key:"onCompositionEnd",value:function(e){return this._isComposingInput=!1,this._updateBlinking(),!0}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;this._readOnly=t.get(81),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(var n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}},{key:"_onCursorPositionChanged",value:function(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length)for(var n=t.length-this._secondaryCursors.length,i=0;i<n;i++){var o=new st(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}else if(this._secondaryCursors.length>t.length)for(var r=this._secondaryCursors.length-t.length,s=0;s<r;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var a=0;a<t.length;a++)this._secondaryCursors[a].onCursorPositionChanged(t[a])}},{key:"onCursorStateChanged",value:function(e){for(var t=[],n=0,i=e.selections.length;n<i;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));var o=e.selections[0].isEmpty();return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,this._updateDomClassName()),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onTokensChanged",value:function(e){var t=function(t){for(var n=0,i=e.ranges.length;n<i;n++)if(e.ranges[n].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;var n,i=(0,o.Z)(this._secondaryCursors);try{for(i.s();!(n=i.n()).done;){if(t(n.value.getPosition()))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getCursorBlinking",value:function(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}},{key:"_updateBlinking",value:function(){var e=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var t=this._getCursorBlinking(),i=0===t,o=5===t;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),i||o||(1===t?this._cursorFlatBlinkInterval.cancelAndSet((function(){e._isVisible?e._hide():e._show()}),n.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet((function(){e._blinkingEnabled=!0,e._updateDomClassName()}),n.BLINK_INTERVAL))}},{key:"_updateDomClassName",value:function(){this._domNode.setClassName(this._getClassName())}},{key:"_getClassName",value:function(){var e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Ce.d2.Line:e+=" cursor-line-style";break;case Ce.d2.Block:e+=" cursor-block-style";break;case Ce.d2.Underline:e+=" cursor-underline-style";break;case Ce.d2.LineThin:e+=" cursor-line-thin-style";break;case Ce.d2.BlockOutline:e+=" cursor-block-outline-style";break;case Ce.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}},{key:"_show",value:function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}},{key:"_hide",value:function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}},{key:"prepareRender",value:function(e){this._primaryCursor.prepareRender(e);for(var t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}},{key:"render",value:function(e){var t=[],n=0,i=this._primaryCursor.render(e);i&&(t[n++]=i);for(var o=0,r=this._secondaryCursors.length;o<r;o++){var s=this._secondaryCursors[o].render(e);s&&(t[n++]=s)}this._renderData=t}},{key:"getLastRenderData",value:function(){return this._renderData}}]),n}(D.E);at.BLINK_INTERVAL=500,(0,B.Ic)((function(e,t){var n=e.getColor(P.n0);if(n){var i=e.getColor(P.fY);i||(i=n.opposite()),t.addRule(".monaco-editor .cursors-layer .cursor { background-color: ".concat(n,"; border-color: ").concat(n,"; color: ").concat(i,"; }")),"hc"===e.type&&t.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ".concat(i,"; border-right: 1px solid ").concat(i,"; }"))}}));var lt=function(){throw new Error("Invalid change accessor")},ht=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,r.Z)(this,n);var o=(i=t.call(this,e))._context.configuration.options,s=o.get(131);return i._lineHeight=o.get(59),i._contentWidth=s.contentWidth,i._contentLeft=s.contentLeft,i.domNode=(0,m.X)(document.createElement("div")),i.domNode.setClassName("view-zones"),i.domNode.setPosition("absolute"),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i.marginDomNode=(0,m.X)(document.createElement("div")),i.marginDomNode.setClassName("margin-view-zones"),i.marginDomNode.setPosition("absolute"),i.marginDomNode.setAttribute("role","presentation"),i.marginDomNode.setAttribute("aria-hidden","true"),i._zones={},i}return(0,s.Z)(n,[{key:"dispose",value:function(){(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this),this._zones={}}},{key:"_recomputeWhitespacesProps",value:function(){var e,t=this,n=this._context.viewLayout.getWhitespaces(),i=new Map,r=(0,o.Z)(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;i.set(s.id,s)}}catch(l){r.e(l)}finally{r.f()}var a=!1;return this._context.model.changeWhitespace((function(e){for(var n=Object.keys(t._zones),o=0,r=n.length;o<r;o++){var s=n[o],l=t._zones[s],h=t._computeWhitespaceProps(l.delegate);l.isInHiddenArea=h.isInHiddenArea;var u=i.get(s);!u||u.afterLineNumber===h.afterViewLineNumber&&u.height===h.heightInPx||(e.changeOneWhitespace(s,h.afterViewLineNumber,h.heightInPx),t._safeCallOnComputedHeight(l.delegate,h.heightInPx),a=!0)}})),a}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(59)&&this._recomputeWhitespacesProps(),!0}},{key:"onLineMappingChanged",value:function(e){return this._recomputeWhitespacesProps()}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"_getZoneOrdinal",value:function(e){return"undefined"!==typeof e.afterColumn?e.afterColumn:1e4}},{key:"_computeWhitespaceProps",value:function(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};var t,n;if("undefined"!==typeof e.afterColumn)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var i=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new y.L(i,this._context.model.getModelLineMaxColumn(i))}n=t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});var o=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),r=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:o.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}},{key:"changeViewZones",value:function(e){var t=this,n=!1;return this._context.model.changeWhitespace((function(i){var o={addZone:function(e){return n=!0,t._addZone(i,e)},removeZone:function(e){e&&(n=t._removeZone(i,e)||n)},layoutZone:function(e){e&&(n=t._layoutZone(i,e)||n)}};!function(e,t){try{e(t)}catch(n){(0,v.dL)(n)}}(e,o),o.addZone=lt,o.removeZone=lt,o.layoutZone=lt})),n}},{key:"_addZone",value:function(e,t){var n=this._computeWhitespaceProps(t),i={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:(0,m.X)(t.domNode),marginDomNode:t.marginDomNode?(0,m.X)(t.marginDomNode):null};return this._safeCallOnComputedHeight(i.delegate,n.heightInPx),i.domNode.setPosition("absolute"),i.domNode.domNode.style.width="100%",i.domNode.setDisplay("none"),i.domNode.setAttribute("monaco-view-zone",i.whitespaceId),this.domNode.appendChild(i.domNode),i.marginDomNode&&(i.marginDomNode.setPosition("absolute"),i.marginDomNode.domNode.style.width="100%",i.marginDomNode.setDisplay("none"),i.marginDomNode.setAttribute("monaco-view-zone",i.whitespaceId),this.marginDomNode.appendChild(i.marginDomNode)),this._zones[i.whitespaceId]=i,this.setShouldRender(),i.whitespaceId}},{key:"_removeZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}},{key:"_layoutZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}},{key:"shouldSuppressMouseDownOnViewZone",value:function(e){if(this._zones.hasOwnProperty(e)){var t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}},{key:"_heightInPixels",value:function(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}},{key:"_minWidthInPixels",value:function(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}},{key:"_safeCallOnComputedHeight",value:function(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(n){(0,v.dL)(n)}}},{key:"_safeCallOnDomNodeTop",value:function(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(n){(0,v.dL)(n)}}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t,n=e.viewportData.whitespaceViewportData,i={},r=!1,s=(0,o.Z)(n);try{for(s.s();!(t=s.n()).done;){var a=t.value;this._zones[a.id].isInHiddenArea||(i[a.id]=a,r=!0)}}catch(_){s.e(_)}finally{s.f()}for(var l=Object.keys(this._zones),h=0,u=l.length;h<u;h++){var d=l[h],c=this._zones[d],g=0,m=0,v="none";i.hasOwnProperty(d)?(g=i[d].verticalOffset-e.bigNumbersDelta,m=i[d].height,v="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[d].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(g),c.domNode.setHeight(m),c.domNode.setDisplay(v),c.marginDomNode&&(c.marginDomNode.setTop(g),c.marginDomNode.setHeight(m),c.marginDomNode.setDisplay(v))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}]),n}(D.E);var ut=n(8003),dt=n(14660),ct=n(4731),gt=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e,i,o,s,l,h){var u;(0,r.Z)(this,n),(u=t.call(this))._selections=[new g.Y(1,1,1,1)],u._renderAnimationFrame=null;var d=new L(i,s,l,e);u._context=new ut.A(i,o.getColorTheme(),s),u._context.addEventHandler((0,a.Z)(u)),u._register(o.onDidColorThemeChange((function(e){u._context.theme.update(e),u._context.model.onDidColorThemeChange(),u.render(!0,!1)}))),u._viewParts=[],u._textAreaHandler=new f.H(u._context,d,u._createTextAreaHandlerHelper()),u._viewParts.push(u._textAreaHandler),u._linesContent=(0,m.X)(document.createElement("div")),u._linesContent.setClassName("lines-content monaco-editor-background"),u._linesContent.setPosition("absolute"),u.domNode=(0,m.X)(document.createElement("div")),u.domNode.setClassName(u._getEditorClassName()),u.domNode.setAttribute("role","code"),u._overflowGuardContainer=(0,m.X)(document.createElement("div")),D.K.write(u._overflowGuardContainer,3),u._overflowGuardContainer.setClassName("overflow-guard"),u._scrollbar=new Y(u._context,u._linesContent,u.domNode,u._overflowGuardContainer),u._viewParts.push(u._scrollbar),u._viewLines=new ge(u._context,u._linesContent),u._viewZones=new ht(u._context),u._viewParts.push(u._viewZones);var c=new Xe(u._context);u._viewParts.push(c);var v=new $e(u._context);u._viewParts.push(v);var p=new W(u._context);u._viewParts.push(p),p.addDynamicOverlay(new z(u._context)),p.addDynamicOverlay(new it(u._context)),p.addDynamicOverlay(new oe(u._context)),p.addDynamicOverlay(new X(u._context));var y=new A(u._context);u._viewParts.push(y),y.addDynamicOverlay(new U(u._context)),y.addDynamicOverlay(new Q(u._context)),y.addDynamicOverlay(new _e(u._context)),y.addDynamicOverlay(new me(u._context)),y.addDynamicOverlay(new se.x(u._context));var C=new ve.Z(u._context);C.getDomNode().appendChild(u._viewZones.marginDomNode),C.getDomNode().appendChild(y.getDomNode()),u._viewParts.push(C),u._contentWidgets=new T(u._context,u.domNode),u._viewParts.push(u._contentWidgets),u._viewCursors=new at(u._context),u._viewParts.push(u._viewCursors),u._overlayWidgets=new ze(u._context),u._viewParts.push(u._overlayWidgets);var N=new Je(u._context);u._viewParts.push(N);var b=new Fe(u._context);if(u._viewParts.push(b),c){var w=u._scrollbar.getOverviewRulerLayoutInfo();w.parent.insertBefore(c.getDomNode(),w.insertBefore)}return u._linesContent.appendChild(p.getDomNode()),u._linesContent.appendChild(N.domNode),u._linesContent.appendChild(u._viewZones.domNode),u._linesContent.appendChild(u._viewLines.getDomNode()),u._linesContent.appendChild(u._contentWidgets.domNode),u._linesContent.appendChild(u._viewCursors.getDomNode()),u._overflowGuardContainer.appendChild(C.getDomNode()),u._overflowGuardContainer.appendChild(u._scrollbar.getDomNode()),u._overflowGuardContainer.appendChild(v.getDomNode()),u._overflowGuardContainer.appendChild(u._textAreaHandler.textArea),u._overflowGuardContainer.appendChild(u._textAreaHandler.textAreaCover),u._overflowGuardContainer.appendChild(u._overlayWidgets.getDomNode()),u._overflowGuardContainer.appendChild(b.getDomNode()),u.domNode.appendChild(u._overflowGuardContainer),h?h.appendChild(u._contentWidgets.overflowingContentWidgetsDomNode.domNode):u.domNode.appendChild(u._contentWidgets.overflowingContentWidgetsDomNode),u._applyLayout(),u._pointerHandler=u._register(new _.a(u._context,d,u._createPointerHandlerHelper())),u}return(0,s.Z)(n,[{key:"_flushAccumulatedAndRenderNow",value:function(){this._renderNow()}},{key:"_createPointerHandlerHelper",value:function(){var e=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:function(){e.focus()},dispatchTextAreaEvent:function(t){e._textAreaHandler.textArea.domNode.dispatchEvent(t)},getLastRenderData:function(){var t=e._viewCursors.getLastRenderData()||[],n=e._textAreaHandler.getLastRenderData();return new ct.sB(t,n)},shouldSuppressMouseDownOnViewZone:function(t){return e._viewZones.shouldSuppressMouseDownOnViewZone(t)},shouldSuppressMouseDownOnWidget:function(t){return e._contentWidgets.shouldSuppressMouseDownOnWidget(t)},getPositionFromDOMInfo:function(t,n){return e._flushAccumulatedAndRenderNow(),e._viewLines.getPositionFromDOMInfo(t,n)},visibleRangeForPosition:function(t,n){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(new y.L(t,n))},getLineWidth:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.getLineWidth(t)}}}},{key:"_createTextAreaHandlerHelper",value:function(){var e=this;return{visibleRangeForPosition:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(t)}}}},{key:"_applyLayout",value:function(){var e=this._context.configuration.options.get(131);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}},{key:"_getEditorClassName",value:function(){var e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(128)+" "+(0,B.m6)(this._context.theme.type)+e}},{key:"handleEvents",value:function(e){(0,l.Z)((0,h.Z)(n.prototype),"handleEvents",this).call(this,e),this._scheduleRender()}},{key:"onConfigurationChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,!1}},{key:"onFocusChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"onThemeChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"dispose",value:function(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();var e,t=(0,o.Z)(this._viewParts);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(i){t.e(i)}finally{t.f()}(0,l.Z)((0,h.Z)(n.prototype),"dispose",this).call(this)}},{key:"_scheduleRender",value:function(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=c.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))}},{key:"_onRenderScheduled",value:function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}},{key:"_renderNow",value:function(){var e=this;!function(e){try{e()}catch(t){(0,v.dL)(t)}}((function(){return e._actualRender()}))}},{key:"_getViewPartsToRender",value:function(){var e,t=[],n=0,i=(0,o.Z)(this._viewParts);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.shouldRender()&&(t[n++]=r)}}catch(s){i.e(s)}finally{i.f()}return t}},{key:"_actualRender",value:function(){if(c.isInDOM(this.domNode.domNode)){var e=this._getViewPartsToRender();if(this._viewLines.shouldRender()||0!==e.length){var t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);var n=new dt.x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());var i,r=new G.xh(this._context.viewLayout,n,this._viewLines),s=(0,o.Z)(e);try{for(s.s();!(i=s.n()).done;){i.value.prepareRender(r)}}catch(u){s.e(u)}finally{s.f()}var a,l=(0,o.Z)(e);try{for(l.s();!(a=l.n()).done;){var h=a.value;h.render(r),h.onDidRender()}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"delegateVerticalScrollbarMouseDown",value:function(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}},{key:"restoreState",value:function(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}},{key:"getOffsetForColumn",value:function(e,t){var n=this._context.model.validateModelPosition({lineNumber:e,column:t}),i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();var o=this._viewLines.visibleRangeForPosition(new y.L(i.lineNumber,i.column));return o?o.left:-1}},{key:"getTargetAtClientPoint",value:function(e,t){var n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?N.q.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}},{key:"createOverviewRuler",value:function(e){return new Ye(this._context,e)}},{key:"change",value:function(e){this._viewZones.changeViewZones(e),this._scheduleRender()}},{key:"render",value:function(e,t){if(t){this._viewLines.forceShouldRender();var n,i=(0,o.Z)(this._viewParts);try{for(i.s();!(n=i.n()).done;){n.value.forceShouldRender()}}catch(r){i.e(r)}finally{i.f()}}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}},{key:"focus",value:function(){this._textAreaHandler.focusTextArea()}},{key:"isFocused",value:function(){return this._textAreaHandler.isFocused()}},{key:"setAriaOptions",value:function(e){this._textAreaHandler.setAriaOptions(e)}},{key:"addContentWidget",value:function(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}},{key:"layoutContentWidget",value:function(e){var t=e.position&&e.position.range||null;if(null===t){var n=e.position?e.position.position:null;null!==n&&(t=new K.e(n.lineNumber,n.column,n.lineNumber,n.column))}var i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}},{key:"removeContentWidget",value:function(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}},{key:"addOverlayWidget",value:function(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}},{key:"layoutOverlayWidget",value:function(e){var t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}},{key:"removeOverlayWidget",value:function(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}]),n}(je.O)},89378:function(e,t,n){n.d(t,{E:function(){return u},K:function(){return d}});var i=n(15671),o=n(43144),r=n(97326),s=n(11752),a=n(61120),l=n(60136),h=n(43668),u=function(e){(0,l.Z)(n,e);var t=(0,h.Z)(n);function n(e){var o;return(0,i.Z)(this,n),(o=t.call(this))._context=e,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(n,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,s.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}}]),n}(n(63344).O),d=function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,null,[{key:"write",value:function(e,t){e.setAttribute("data-mprt",String(t))}},{key:"read",value:function(e){var t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}},{key:"collect",value:function(e,t){for(var n=[],i=0;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;for(var o=new Uint8Array(i),r=0;r<i;r++)o[r]=n[i-r-1];return o}}]),e}()},57687:function(e,t,n){n.d(t,{q:function(){return r}});var i=n(15671),o=n(43144),r=function(){function e(t){(0,i.Z)(this,e),this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=t}return(0,o.Z)(e,[{key:"emitKeyDown",value:function(e){this.onKeyDown&&this.onKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.onKeyUp&&this.onKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseMove",value:function(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseLeave",value:function(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDown",value:function(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseUp",value:function(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrag",value:function(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrop",value:function(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDropCanceled",value:function(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.onMouseWheel&&this.onMouseWheel(e)}},{key:"_convertViewToModelMouseEvent",value:function(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}},{key:"_convertViewToModelMouseTarget",value:function(t){return e.convertViewToModelMouseTarget(t,this._coordinatesConverter)}}],[{key:"convertViewToModelMouseTarget",value:function(e,t){var n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}}]),e}()},6264:function(e,t,n){n.d(t,{x:function(){return v}});var i=n(15671),o=n(43144),r=n(97326),s=n(11752),a=n(61120),l=n(60136),h=n(43668),u=n(4827),d=n(60391),c=n(10849),g=n(2374),m=n(3553),v=function(e){(0,l.Z)(n,e);var t=(0,h.Z)(n);function n(e){var o;return(0,i.Z)(this,n),(o=t.call(this))._context=e,o._readConfig(),o._lastCursorModelPosition=new c.L(1,1),o._renderResult=null,o._activeLineNumber=1,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(n,[{key:"_readConfig",value:function(){var e=this._context.configuration.options;this._lineHeight=e.get(59);var t=e.get(60);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(84);var n=e.get(131);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,s.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this._readConfig(),!0}},{key:"onCursorStateChanged",value:function(e){var t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);var n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(n=!0),n}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getLineRenderLineNumber",value:function(e){var t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new c.L(e,1));if(1!==t.column)return"";var n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(2===this._renderLineNumbers){var i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return 0===i?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}},{key:"prepareRender",value:function(e){if(0!==this._renderLineNumbers){for(var t=u.IJ?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,r='<div class="'+n.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),a=[],l=i;l<=o;l++){var h=l-i;if(this._renderFinalNewline||l!==s||0!==this._context.model.getLineLength(l)){var d=this._getLineRenderLineNumber(l);d?l===this._activeLineNumber?a[h]='<div class="active-line-number '+n.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+d+"</div>":a[h]=r+d+"</div>":a[h]=""}else a[h]=""}this._renderResult=a}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),n}(d.i);v.CLASS_NAME="line-numbers",(0,m.Ic)((function(e,t){var n=e.getColor(g.hw);n&&t.addRule(".monaco-editor .line-numbers { color: ".concat(n,"; }"));var i=e.getColor(g.DD);i&&t.addRule(".monaco-editor .line-numbers.active-line-number { color: ".concat(i,"; }"))}))},97766:function(e,t,n){n.d(t,{ZE:function(){return L},Nt:function(){return b},ob:function(){return N}});var i=n(11752),o=n(61120),r=n(60136),s=n(43668),a=n(37762),l=n(15671),h=n(43144),u=n(12426),d=n(16688),c=n(4827),g=n(76310),m=function(){function e(){(0,l.Z)(this,e)}return(0,h.Z)(e,null,[{key:"_createRange",value:function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}},{key:"_detachRange",value:function(e,t){e.selectNodeContents(t)}},{key:"_readClientRects",value:function(e,t,n,i,o){var r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch(s){return null}finally{this._detachRange(r,o)}}},{key:"_mergeAdjacentRanges",value:function(e){if(1===e.length)return e;e.sort(g.CR.compare);for(var t=[],n=0,i=e[0],o=1,r=e.length;o<r;o++){var s=e[o];i.left+i.width+.9>=s.left?i.width=Math.max(i.width,s.left+s.width-i.left):(t[n++]=i,i=s)}return t[n++]=i,t}},{key:"_createHorizontalRangesFromClientRects",value:function(e,t,n){if(!e||0===e.length)return null;for(var i=[],o=0,r=e.length;o<r;o++){var s=e[o];i[o]=new g.CR(Math.max(0,(s.left-t)/n),s.width/n)}return this._mergeAdjacentRanges(i)}},{key:"readHorizontalRanges",value:function(e,t,n,i,o,r,s,a){var l=e.children.length-1;if(0>l)return null;if((t=Math.min(l,Math.max(0,t)))===(i=Math.min(l,Math.max(0,i)))&&n===o&&0===n&&!e.children[t].firstChild){var h=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(h,r,s)}t!==i&&i>0&&0===o&&(i--,o=1073741824);var u=e.children[t].firstChild,d=e.children[i].firstChild;if(u&&d||(!u&&0===n&&t>0&&(u=e.children[t-1].firstChild,n=1073741824),!d&&0===o&&i>0&&(d=e.children[i-1].firstChild,o=1073741824)),!u||!d)return null;n=Math.min(u.textContent.length,Math.max(0,n)),o=Math.min(d.textContent.length,Math.max(0,o));var c=this._readClientRects(u,n,d,o,a);return this._createHorizontalRangesFromClientRects(c,r,s)}}]),e}(),v=n(50381),_=n(78699),f=n(11761),p=n(31492),y=!!c.tY||!(c.IJ||u.isFirefox||u.isSafari),C=!0,L=function(){function e(t,n){(0,l.Z)(this,e),this._domNode=t,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=n}return(0,h.Z)(e,[{key:"readClientRect",value:function(){if(!this._clientRectRead){this._clientRectRead=!0;var e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}},{key:"clientRectDeltaLeft",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}},{key:"clientRectScale",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}]),e}(),N=function(){function e(t,n){(0,l.Z)(this,e),this.themeType=n;var i=t.options,o=i.get(44);this.renderWhitespace=i.get(88),this.renderControlCharacters=i.get(83),this.spaceWidth=o.spaceWidth,this.middotWidth=o.middotWidth,this.wsmiddotWidth=o.wsmiddotWidth,this.useMonospaceOptimizations=o.isMonospace&&!i.get(29),this.canUseHalfwidthRightwardsArrow=o.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(59),this.stopRenderingLineAfter=i.get(105),this.fontLigatures=i.get(45)}return(0,h.Z)(e,[{key:"equals",value:function(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}]),e}(),b=function(){function e(t){(0,l.Z)(this,e),this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}return(0,h.Z)(e,[{key:"getDomNode",value:function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}},{key:"setDomNode",value:function(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=(0,d.X)(e)}},{key:"onContentChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onTokensChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onDecorationsChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onOptionsChanged",value:function(e){this._isMaybeInvalid=!0,this._options=e}},{key:"onSelectionChanged",value:function(){return(this._options.themeType===f.e.HIGH_CONTRAST||"selection"===this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}},{key:"renderLine",value:function(t,n,i,o){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;var r=i.getViewLineRenderingData(t),s=this._options,l=v.Kp.filter(r.inlineDecorations,t,r.minColumn,r.maxColumn),h=null;if(s.themeType===f.e.HIGH_CONTRAST||"selection"===this._options.renderWhitespace){var u,d=i.selections,c=(0,a.Z)(d);try{for(c.s();!(u=c.n()).done;){var g=u.value;if(!(g.endLineNumber<t||g.startLineNumber>t)){var m=g.startLineNumber===t?g.startColumn:r.minColumn,L=g.endLineNumber===t?g.endColumn:r.maxColumn;m<L&&(s.themeType===f.e.HIGH_CONTRAST||"selection"!==this._options.renderWhitespace?l.push(new v.Kp(m,L,"inline-selected-text",0)):(h||(h=[]),h.push(new _.zG(m-1,L-1))))}}}catch(S){c.e(S)}finally{c.f()}}var N=new _.IJ(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==p.n0.OFF,h);if(this._renderedViewLine&&this._renderedViewLine.input.equals(N))return!1;o.appendASCIIString('<div style="top:'),o.appendASCIIString(String(n)),o.appendASCIIString("px;height:"),o.appendASCIIString(String(this._options.lineHeight)),o.appendASCIIString('px;" class="'),o.appendASCIIString(e.CLASS_NAME),o.appendASCIIString('">');var b=(0,_.d1)(N,o);o.appendASCIIString("</div>");var k=null;return C&&y&&r.isBasicASCII&&s.useMonospaceOptimizations&&0===b.containsForeignElements&&r.content.length<300&&N.lineTokens.getCount()<100&&(k=new w(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping)),k||(k=R(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping,b.containsRTL,b.containsForeignElements)),this._renderedViewLine=k,!0}},{key:"layoutLine",value:function(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}},{key:"getWidth",value:function(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}},{key:"getWidthIsFast",value:function(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}},{key:"needsMonospaceFontCheck",value:function(){return!!this._renderedViewLine&&this._renderedViewLine instanceof w}},{key:"monospaceAssumptionsAreValid",value:function(){return this._renderedViewLine&&this._renderedViewLine instanceof w?this._renderedViewLine.monospaceAssumptionsAreValid():C}},{key:"onMonospaceAssumptionsInvalidated",value:function(){this._renderedViewLine&&this._renderedViewLine instanceof w&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));var o=this._renderedViewLine.input.stopRenderingLineAfter,r=!1;-1!==o&&t>o+1&&n>o+1&&(r=!0),-1!==o&&t>o+1&&(t=o+1),-1!==o&&n>o+1&&(n=o+1);var s=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return s&&s.length>0?new g.CH(r,s):null}},{key:"getColumnOfNodeOffset",value:function(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}]),e}();b.CLASS_NAME="view-line";var w=function(){function e(t,n,i){(0,l.Z)(this,e),this.domNode=t,this.input=n,this._characterMapping=i,this._charWidth=n.spaceWidth}return(0,h.Z)(e,[{key:"getWidth",value:function(){return Math.round(this._getCharPosition(this._characterMapping.length))}},{key:"getWidthIsFast",value:function(){return!0}},{key:"monospaceAssumptionsAreValid",value:function(){if(!this.domNode)return C;var e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),C=!1),C}},{key:"toSlowRenderedLine",value:function(){return R(this.domNode,this.input,this._characterMapping,!1,0)}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){var o=this._getCharPosition(t),r=this._getCharPosition(n);return[new g.CR(o,r-o)]}},{key:"_getCharPosition",value:function(e){var t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}},{key:"getColumnOfNodeOffset",value:function(e,t,n){for(var i=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new _.Nd(o,n),i)}}]),e}(),k=function(){function e(t,n,i,o,r){if((0,l.Z)(this,e),this.domNode=t,this.input=n,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(n.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!o||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}return(0,h.Z)(e,[{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"getWidth",value:function(){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}},{key:"getWidthIsFast",value:function(){return-1!==this._cachedWidth}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){var o=this._readPixelOffset(this.domNode,e,t,i);if(-1===o)return null;var r=this._readPixelOffset(this.domNode,e,n,i);return-1===r?null:[new g.CR(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}},{key:"_readVisibleRangesForRange",value:function(e,t,n,i,o){if(n===i){var r=this._readPixelOffset(e,t,n,o);return-1===r?null:[new g.CR(r,0)]}return this._readRawVisibleRangesForRange(e,n,i,o)}},{key:"_readPixelOffset",value:function(e,t,n,i){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth();var o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(null!==this._pixelOffsetCache){var r=this._pixelOffsetCache[n];if(-1!==r)return r;var s=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,i)}},{key:"_actualReadPixelOffset",value:function(e,t,n,i){if(0===this._characterMapping.length){var o=m.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);return o&&0!==o.length?o[0].left:-1}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth();var r=this._characterMapping.getDomPosition(n),s=m.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);if(!s||0===s.length)return-1;var a=s[0].left;if(this.input.isBasicASCII){var l=this._characterMapping.getAbsoluteOffset(n),h=Math.round(this.input.spaceWidth*l);if(Math.abs(h-a)<=1)return h}return a}},{key:"_readRawVisibleRangesForRange",value:function(e,t,n,i){if(1===t&&n===this._characterMapping.length)return[new g.CR(0,this.getWidth())];var o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return m.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode)}},{key:"getColumnOfNodeOffset",value:function(e,t,n){for(var i=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new _.Nd(o,n),i)}}]),e}(),S=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"_readVisibleRangesForRange",value:function(e,t,r,s,a){var l=(0,i.Z)((0,o.Z)(n.prototype),"_readVisibleRangesForRange",this).call(this,e,t,r,s,a);if(!l||0===l.length||r===s||1===r&&s===this._characterMapping.length)return l;if(!this.input.containsRTL){var h=this._readPixelOffset(e,t,s,a);if(-1!==h){var u=l[l.length-1];u.left<h&&(u.width=h-u.left)}}return l}}]),n}(k),R=u.isWebKit?D:M;function D(e,t,n,i,o){return new S(e,t,n,i,o)}function M(e,t,n,i,o){return new k(e,t,n,i,o)}},16543:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(15671),o=n(43144),r=n(11752),s=n(61120),a=n(60136),l=n(43668),h=n(16688),u=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var o;(0,i.Z)(this,n);var r=(o=t.call(this,e))._context.configuration.options,s=r.get(131);return o._canUseLayerHinting=!r.get(28),o._contentLeft=s.contentLeft,o._glyphMarginLeft=s.glyphMarginLeft,o._glyphMarginWidth=s.glyphMarginWidth,o._domNode=(0,h.X)(document.createElement("div")),o._domNode.setClassName(n.OUTER_CLASS_NAME),o._domNode.setPosition("absolute"),o._domNode.setAttribute("role","presentation"),o._domNode.setAttribute("aria-hidden","true"),o._glyphMarginBackgroundDomNode=(0,h.X)(document.createElement("div")),o._glyphMarginBackgroundDomNode.setClassName(n.CLASS_NAME),o._domNode.appendChild(o._glyphMarginBackgroundDomNode),o}return(0,o.Z)(n,[{key:"dispose",value:function(){(0,r.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(131);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}},{key:"onScrollChanged",value:function(e){return(0,r.Z)((0,s.Z)(n.prototype),"onScrollChanged",this).call(this,e)||e.scrollTopChanged}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");var t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);var n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}]),n}(n(89378).E);u.CLASS_NAME="glyph-margin",u.OUTER_CLASS_NAME="margin"}}]);
//# sourceMappingURL=monaco-editor-vendor.96a37e40.aa46123b.js.map