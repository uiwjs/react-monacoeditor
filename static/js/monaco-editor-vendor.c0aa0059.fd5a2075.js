"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[545],{6815:function(e,t,n){n.d(t,{N:function(){return o}});var i=n(16688);function o(e,t){e instanceof i.Z?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}},68915:function(e,t,n){n.d(t,{z:function(){return M}});var i=n(37762),o=n(15671),r=n(43144),a=n(60136),s=n(27277),u=n(12426),l=n(71881),c=n(28941),d=n(10526),h=n(57151),f=n(4827),v=n(72380),p=n(90497),m=n(29439),g=function(){function e(t,n){(0,o.Z)(this,e),this.key=t,this.migrate=n}return(0,r.Z)(e,[{key:"apply",value:function(t){var n=e._read(t,this.key);this.migrate(n,(function(n){return e._read(t,n)}),(function(n,i){return e._write(t,n,i)}))}}],[{key:"_read",value:function(e,t){if("undefined"!==typeof e){var n=t.indexOf(".");if(n>=0){var i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}}},{key:"_write",value:function(e,t,n){var i=t.indexOf(".");if(i>=0){var o=t.substring(0,i);return e[o]=e[o]||{},void this._write(e[o],t.substring(i+1),n)}e[t]=n}}]),e}();function _(e,t){g.items.push(new g(e,t))}function y(e,t){_(e,(function(n,o,r){if("undefined"!==typeof n){var a,s=(0,i.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=(0,m.Z)(a.value,2),l=u[0],c=u[1];if(n===l)return void r(e,c)}}catch(d){s.e(d)}finally{s.f()}}}))}g.items=[],y("wordWrap",[[!0,"on"],[!1,"off"]]),y("lineNumbers",[[!0,"on"],[!1,"off"]]),y("cursorBlinking",[["visible","solid"]]),y("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),y("renderLineHighlight",[[!0,"line"],[!1,"none"]]),y("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),y("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),y("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),y("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),y("autoIndent",[[!1,"advanced"],[!0,"full"]]),y("matchBrackets",[[!0,"always"],[!1,"never"]]),y("renderFinalNewline",[[!0,"on"],[!1,"off"]]),y("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),_("autoClosingBrackets",(function(e,t,n){!1===e&&(n("autoClosingBrackets","never"),"undefined"===typeof t("autoClosingQuotes")&&n("autoClosingQuotes","never"),"undefined"===typeof t("autoSurround")&&n("autoSurround","never"))})),_("renderIndentGuides",(function(e,t,n){"undefined"!==typeof e&&(n("renderIndentGuides",void 0),"undefined"===typeof t("guides.indentation")&&n("guides.indentation",!!e))})),_("highlightActiveIndentGuide",(function(e,t,n){"undefined"!==typeof e&&(n("highlightActiveIndentGuide",void 0),"undefined"===typeof t("guides.highlightActiveIndentation")&&n("guides.highlightActiveIndentation",!!e))}));var C={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};_("suggest.filteredTypes",(function(e,t,n){if(e&&"object"===typeof e){for(var i=0,o=Object.entries(C);i<o.length;i++){var r=o[i];!1===e[r[0]]&&"undefined"===typeof t("suggest.".concat(r[1]))&&n("suggest.".concat(r[1]),!1)}n("suggest.filteredTypes",void 0)}})),_("quickSuggestions",(function(e,t,n){if("boolean"===typeof e){var i=e?"on":"off";n("quickSuggestions",{comments:i,strings:i,other:i})}})),_("experimental.stickyScroll.enabled",(function(e,t,n){"boolean"===typeof e&&(n("experimental.stickyScroll.enabled",void 0),"undefined"===typeof t("stickyScroll.enabled")&&n("stickyScroll.enabled",e))})),_("experimental.stickyScroll.maxLineCount",(function(e,t,n){"number"===typeof e&&(n("experimental.stickyScroll.maxLineCount",void 0),"undefined"===typeof t("stickyScroll.maxLineCount")&&n("stickyScroll.maxLineCount",e))}));var w=n(29805),S=n(31492),x=n(22055),b=n(56493),k=n(99277),T=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},E=function(e,t){return function(n,i){t(n,i,e)}},M=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,r,a){var s;return(0,o.Z)(this,n),(s=t.call(this))._accessibilityService=a,s._onDidChange=s._register(new c.Q5),s.onDidChange=s._onDidChange.event,s._onDidChangeFast=s._register(new c.Q5),s.onDidChangeFast=s._onDidChangeFast.event,s._isDominatedByLongLines=!1,s._viewLineCount=1,s._lineNumbersDigitCount=1,s._reservedHeight=0,s._computeOptionsMemory=new S.LJ,s.isSimpleWidget=e,s._containerObserver=s._register(new v.I(r,i.dimension)),s._rawOptions=D(i),s._validatedOptions=Z.validateOptions(s._rawOptions),s.options=s._computeOptions(),s.options.get(10)&&s._containerObserver.startObserving(),s._register(x.C.onDidChangeZoomLevel((function(){return s._recomputeOptions()}))),s._register(w.n.onDidChangeTabFocus((function(){return s._recomputeOptions()}))),s._register(s._containerObserver.onDidChange((function(){return s._recomputeOptions()}))),s._register(p.g.onDidChange((function(){return s._recomputeOptions()}))),s._register(u.PixelRatio.onDidChange((function(){return s._recomputeOptions()}))),s._register(s._accessibilityService.onDidChangeScreenReaderOptimized((function(){return s._recomputeOptions()}))),s}return(0,r.Z)(n,[{key:"_recomputeOptions",value:function(){var e=this._computeOptions(),t=Z.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}},{key:"_computeOptions",value:function(){var e=this._readEnvConfiguration(),t=b.E4.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:w.n.getTabFocusMode("editorFocus"),accessibilitySupport:e.accessibilitySupport};return Z.computeOptions(this._validatedOptions,i)}},{key:"_readEnvConfiguration",value:function(){return{extraEditorClassName:A(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:u.isWebKit||u.isFirefox,pixelRatio:u.PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}},{key:"_readFontInfo",value:function(e){return p.g.readFontInfo(e)}},{key:"getRawOptions",value:function(){return this._rawOptions}},{key:"updateOptions",value:function(e){var t=D(e);Z.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Z.validateOptions(this._rawOptions),this._recomputeOptions())}},{key:"observeContainer",value:function(e){this._containerObserver.observe(e)}},{key:"setIsDominatedByLongLines",value:function(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}},{key:"setModelLineCount",value:function(e){var t=function(e){var t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}},{key:"setViewLineCount",value:function(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}},{key:"setReservedHeight",value:function(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}}]),n}(d.JT);function A(){var e="";return u.isSafari||u.isWebkitWebView||(e+="no-user-select "),u.isSafari&&(e+="no-minimap-shadow ",e+="enable-user-select "),f.dz&&(e+="mac "),e}M=T([E(3,k.F)],M);var L=function(){function e(){(0,o.Z)(this,e),this._values=[]}return(0,r.Z)(e,[{key:"_read",value:function(e){return this._values[e]}},{key:"get",value:function(e){return this._values[e]}},{key:"_write",value:function(e,t){this._values[e]=t}}]),e}(),P=function(){function e(){(0,o.Z)(this,e),this._values=[]}return(0,r.Z)(e,[{key:"_read",value:function(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}},{key:"get",value:function(e){return this._read(e)}},{key:"_write",value:function(e,t){this._values[e]=t}}]),e}(),Z=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,null,[{key:"validateOptions",value:function(e){var t,n=new L,o=(0,i.Z)(S.Bc);try{for(o.s();!(t=o.n()).done;){var r=t.value,a="_never_"===r.name?void 0:e[r.name];n._write(r.id,r.validate(a))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"computeOptions",value:function(e,t){var n,o=new P,r=(0,i.Z)(S.Bc);try{for(r.s();!(n=r.n()).done;){var a=n.value;o._write(a.id,a.compute(t,o,e._read(a.id)))}}catch(s){r.e(s)}finally{r.f()}return o}},{key:"_deepEquals",value:function(t,n){if("object"!==typeof t||"object"!==typeof n||!t||!n)return t===n;if(Array.isArray(t)||Array.isArray(n))return!(!Array.isArray(t)||!Array.isArray(n))&&l.fS(t,n);if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e._deepEquals(t[i],n[i]))return!1;return!0}},{key:"checkEquals",value:function(t,n){var o,r=[],a=!1,s=(0,i.Z)(S.Bc);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=!e._deepEquals(t._read(u.id),n._read(u.id));r[u.id]=l,l&&(a=!0)}}catch(c){s.e(c)}finally{s.f()}return a?new S.Bb(r):null}},{key:"applyUpdate",value:function(e,t){var n,o=!1,r=(0,i.Z)(S.Bc);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.hasOwnProperty(a.name)){var s=a.applyUpdate(e[a.name],t[a.name]);e[a.name]=s.newValue,o=o||s.didChange}}}catch(u){r.e(u)}finally{r.f()}return o}}]),e}();function D(e){var t=h.I8(e);return function(e){g.items.forEach((function(t){return t.apply(e)}))}(t),t}},72380:function(e,t,n){n.d(t,{I:function(){return d}});var i=n(15671),o=n(43144),r=n(11752),a=n(61120),s=n(60136),u=n(27277),l=n(10526),c=n(28941),d=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o){var r;return(0,i.Z)(this,n),(r=t.call(this))._onDidChange=r._register(new c.Q5),r.onDidChange=r._onDidChange.event,r._referenceDomElement=e,r._width=-1,r._height=-1,r._resizeObserver=null,r.measureReferenceDomElement(!1,o),r}return(0,o.Z)(n,[{key:"dispose",value:function(){this.stopObserving(),(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"startObserving",value:function(){var e=this;!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver((function(t){t&&t[0]&&t[0].contentRect?e.observe({width:t[0].contentRect.width,height:t[0].contentRect.height}):e.observe()})),this._resizeObserver.observe(this._referenceDomElement))}},{key:"stopObserving",value:function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}},{key:"observe",value:function(e){this.measureReferenceDomElement(!0,e)}},{key:"measureReferenceDomElement",value:function(e,t){var n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),this._width===n&&this._height===i||(this._width=n,this._height=i,e&&this._onDidChange.fire())}}]),n}(l.JT)},90497:function(e,t,n){n.d(t,{g:function(){return C}});var i=n(37762),o=n(15671),r=n(43144),a=n(11752),s=n(61120),u=n(60136),l=n(27277),c=n(12426),d=n(28941),h=n(10526),f=n(6815),v=function(){function e(t,n){(0,o.Z)(this,e),this.chr=t,this.type=n,this.width=0}return(0,r.Z)(e,[{key:"fulfill",value:function(e){this.width=e}}]),e}(),p=function(){function e(t,n){(0,o.Z)(this,e),this._bareFontInfo=t,this._requests=n,this._container=null,this._testElements=null}return(0,r.Z)(e,[{key:"read",value:function(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}},{key:"_createDomElements",value:function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";var n=document.createElement("div");(0,f.N)(n,this._bareFontInfo),t.appendChild(n);var o=document.createElement("div");(0,f.N)(o,this._bareFontInfo),o.style.fontWeight="bold",t.appendChild(o);var r=document.createElement("div");(0,f.N)(r,this._bareFontInfo),r.style.fontStyle="italic",t.appendChild(r);var a,s=[],u=(0,i.Z)(this._requests);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=void 0;0===l.type&&(c=n),2===l.type&&(c=o),1===l.type&&(c=r),c.appendChild(document.createElement("br"));var d=document.createElement("span");e._render(d,l),c.appendChild(d),s.push(d)}}catch(h){u.e(h)}finally{u.f()}this._container=t,this._testElements=s}},{key:"_readFromDomElements",value:function(){for(var e=0,t=this._requests.length;e<t;e++){var n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}],[{key:"_render",value:function(e,t){if(" "===t.chr){for(var n="\xa0",i=0;i<8;i++)n+=n;e.innerText=n}else{for(var o=t.chr,r=0;r<8;r++)o+=o;e.textContent=o}}}]),e}();var m=n(31492),g=n(56493),_=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this))._onDidChange=e._register(new d.Q5),e.onDidChange=e._onDidChange.event,e._cache=new y,e._evictUntrustedReadingsTimeout=-1,e}return(0,r.Z)(n,[{key:"dispose",value:function(){-1!==this._evictUntrustedReadingsTimeout&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),(0,a.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}},{key:"clearAllFontInfos",value:function(){this._cache=new y,this._onDidChange.fire()}},{key:"_writeToCache",value:function(e,t){var n=this;this._cache.put(e,t),t.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=window.setTimeout((function(){n._evictUntrustedReadingsTimeout=-1,n._evictUntrustedReadings()}),5e3))}},{key:"_evictUntrustedReadings",value:function(){var e,t=this._cache.getValues(),n=!1,o=(0,i.Z)(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.isTrusted||(n=!0,this._cache.remove(r))}}catch(a){o.e(a)}finally{o.f()}n&&this._onDidChange.fire()}},{key:"readFontInfo",value:function(e){if(!this._cache.has(e)){var t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new g.pR({pixelRatio:c.PixelRatio.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}},{key:"_createRequest",value:function(e,t,n,i){var o=new v(e,t);return n.push(o),null===i||void 0===i||i.push(o),o}},{key:"_actualReadFontInfo",value:function(e){for(var t=[],n=[],i=this._createRequest("n",0,t,n),o=this._createRequest("\uff4d",0,t,null),r=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),s=this._createRequest("1",0,t,n),u=this._createRequest("2",0,t,n),l=this._createRequest("3",0,t,n),d=this._createRequest("4",0,t,n),h=this._createRequest("5",0,t,n),f=this._createRequest("6",0,t,n),v=this._createRequest("7",0,t,n),_=this._createRequest("8",0,t,n),y=this._createRequest("9",0,t,n),C=this._createRequest("\u2192",0,t,n),w=this._createRequest("\uffeb",0,t,null),S=this._createRequest("\xb7",0,t,n),x=this._createRequest(String.fromCharCode(11825),0,t,null),b="|/-_ilm%",k=0,T=b.length;k<T;k++)this._createRequest(b.charAt(k),0,t,n),this._createRequest(b.charAt(k),1,t,n),this._createRequest(b.charAt(k),2,t,n);!function(e,t){new p(e,t).read()}(e,t);for(var E=Math.max(a.width,s.width,u.width,l.width,d.width,h.width,f.width,v.width,_.width,y.width),M=e.fontFeatureSettings===m.n0.OFF,A=n[0].width,L=1,P=n.length;M&&L<P;L++){var Z=A-n[L].width;if(Z<-.001||Z>.001){M=!1;break}}var D=!0;return M&&w.width!==A&&(D=!1),w.width>C.width&&(D=!1),new g.pR({pixelRatio:c.PixelRatio.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:M,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:r.width,middotWidth:S.width,wsmiddotWidth:x.width,maxDigitWidth:E},!0)}}]),n}(h.JT),y=function(){function e(){(0,o.Z)(this,e),this._keys=Object.create(null),this._values=Object.create(null)}return(0,r.Z)(e,[{key:"has",value:function(e){var t=e.getId();return!!this._values[t]}},{key:"get",value:function(e){var t=e.getId();return this._values[t]}},{key:"put",value:function(e,t){var n=e.getId();this._keys[n]=e,this._values[n]=t}},{key:"remove",value:function(e){var t=e.getId();delete this._keys[t],delete this._values[t]}},{key:"getValues",value:function(){var e=this;return Object.keys(this._keys).map((function(t){return e._values[t]}))}}]),e}(),C=new _},29805:function(e,t,n){n.d(t,{n:function(){return a}});var i=n(15671),o=n(43144),r=n(28941),a=new(function(){function e(){(0,i.Z)(this,e),this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new r.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}return(0,o.Z)(e,[{key:"getTabFocusMode",value:function(e){return"terminalFocus"===e?this._tabFocusTerminal:this._tabFocusEditor}},{key:"setTabFocusMode",value:function(e,t){"terminalFocus"===t?this._tabFocusTerminal=e:this._tabFocusEditor=e,this._onDidChangeTabFocus.fire()}}]),e}())},4731:function(e,t,n){n.d(t,{Iq:function(){return S},ZP:function(){return C},rp:function(){return T},sB:function(){return y}});var i,o=n(37762),r=n(60136),a=n(27277),s=n(43144),u=n(15671),l=n(93741),c=n(89378),d=n(97766),h=n(10849),f=n(30788),v=n(34538),p=n(53210),m=n(81371),g=(0,s.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,u.Z)(this,e),this.hitTarget=t,this.type=0})),_=(0,s.Z)((function e(t,n,i){(0,u.Z)(this,e),this.position=t,this.spanNode=n,this.injectedText=i,this.type=1}));!function(e){e.createFromDOMInfo=function(e,t,n){var i=e.getPositionFromDOMInfo(t,n);return i?new _(i,t,null):new g(t)}}(i||(i={}));var y=(0,s.Z)((function e(t,n){(0,u.Z)(this,e),this.lastViewCursorsRenderData=t,this.lastTextareaPosition=n})),C=function(){function e(){(0,u.Z)(this,e)}return(0,s.Z)(e,null,[{key:"_deduceRage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!t&&e?new f.e(e.lineNumber,e.column,e.lineNumber,e.column):null!==t&&void 0!==t?t:null}},{key:"createUnknown",value:function(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}},{key:"createTextarea",value:function(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}},{key:"createMargin",value:function(e,t,n,i,o,r){return{type:e,element:t,mouseColumn:n,position:i,range:o,detail:r}}},{key:"createViewZone",value:function(e,t,n,i,o){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:o}}},{key:"createContentText",value:function(e,t,n,i,o){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:o}}},{key:"createContentEmpty",value:function(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}},{key:"createContentWidget",value:function(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}},{key:"createScrollbar",value:function(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}},{key:"createOverlayWidget",value:function(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}},{key:"createOutsideEditor",value:function(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}},{key:"_typeToString",value:function(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}},{key:"toString",value:function(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}]),e}(),w=function(){function e(){(0,u.Z)(this,e)}return(0,s.Z)(e,null,[{key:"isTextArea",value:function(e){return 2===e.length&&3===e[0]&&6===e[1]}},{key:"isChildOfViewLines",value:function(e){return e.length>=4&&3===e[0]&&7===e[3]}},{key:"isStrictChildOfViewLines",value:function(e){return e.length>4&&3===e[0]&&7===e[3]}},{key:"isChildOfScrollableElement",value:function(e){return e.length>=2&&3===e[0]&&5===e[1]}},{key:"isChildOfMinimap",value:function(e){return e.length>=2&&3===e[0]&&8===e[1]}},{key:"isChildOfContentWidgets",value:function(e){return e.length>=4&&3===e[0]&&1===e[3]}},{key:"isChildOfOverflowingContentWidgets",value:function(e){return e.length>=1&&2===e[0]}},{key:"isChildOfOverlayWidgets",value:function(e){return e.length>=2&&3===e[0]&&4===e[1]}}]),e}(),S=function(){function e(t,n,i){(0,u.Z)(this,e),this.viewModel=t.viewModel;var o=t.configuration.options;this.layoutInfo=o.get(138),this.viewDomNode=n.viewDomNode,this.lineHeight=o.get(63),this.stickyTabStops=o.get(110),this.typicalHalfwidthCharacterWidth=o.get(47).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=t,this._viewHelper=n}return(0,s.Z)(e,[{key:"getZoneAtCoord",value:function(t){return e.getZoneAtCoord(this._context,t)}},{key:"getFullLineRangeAtCoord",value:function(e){if(this._context.viewLayout.isAfterLines(e)){var t=this._context.viewModel.getLineCount(),n=this._context.viewModel.getLineMaxColumn(t);return{range:new f.e(t,n,t,n),isAfterLines:!0}}var i=this._context.viewLayout.getLineNumberAtVerticalOffset(e),o=this._context.viewModel.getLineMaxColumn(i);return{range:new f.e(i,1,i,o),isAfterLines:!1}}},{key:"getLineNumberAtVerticalOffset",value:function(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}},{key:"isAfterLines",value:function(e){return this._context.viewLayout.isAfterLines(e)}},{key:"isInTopPadding",value:function(e){return this._context.viewLayout.isInTopPadding(e)}},{key:"isInBottomPadding",value:function(e){return this._context.viewLayout.isInBottomPadding(e)}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}},{key:"findAttribute",value:function(t,n){return e._findAttribute(t,n,this._viewHelper.viewDomNode)}},{key:"getLineWidth",value:function(e){return this._viewHelper.getLineWidth(e)}},{key:"visibleRangeForPosition",value:function(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}},{key:"getPositionFromDOMInfo",value:function(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}},{key:"getCurrentScrollTop",value:function(){return this._context.viewLayout.getCurrentScrollTop()}},{key:"getCurrentScrollLeft",value:function(){return this._context.viewLayout.getCurrentScrollLeft()}}],[{key:"getZoneAtCoord",value:function(e,t){var n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){var i,o=n.verticalOffset+n.height/2,r=e.viewModel.getLineCount(),a=null,s=null;return n.afterLineNumber!==r&&(s=new h.L(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(a=new h.L(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),i=null===s?a:null===a?s:t<o?a:s,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:a,positionAfter:s,position:i}}return null}},{key:"_findAttribute",value:function(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}}]),e}(),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,o,r,a){var s;return(0,u.Z)(this,n),(s=t.call(this,e,i,o,r))._ctx=e,a?(s.target=a,s.targetPath=c.K.collect(a,e.viewDomNode)):(s.target=null,s.targetPath=new Uint8Array(0)),s}return(0,s.Z)(n,[{key:"toString",value:function(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)}},{key:"_getMouseColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?v.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}},{key:"fulfillUnknown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return C.createUnknown(this.target,this._getMouseColumn(e),e)}},{key:"fulfillTextarea",value:function(){return C.createTextarea(this.target,this._getMouseColumn())}},{key:"fulfillMargin",value:function(e,t,n,i){return C.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}},{key:"fulfillViewZone",value:function(e,t,n){return C.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}},{key:"fulfillContentText",value:function(e,t,n){return C.createContentText(this.target,this._getMouseColumn(e),e,t,n)}},{key:"fulfillContentEmpty",value:function(e,t){return C.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}},{key:"fulfillContentWidget",value:function(e){return C.createContentWidget(this.target,this._getMouseColumn(),e)}},{key:"fulfillScrollbar",value:function(e){return C.createScrollbar(this.target,this._getMouseColumn(e),e)}},{key:"fulfillOverlayWidget",value:function(e){return C.createOverlayWidget(this.target,this._getMouseColumn(),e)}},{key:"withTarget",value:function(e){return new n(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}]),n}((0,s.Z)((function e(t,n,i,o){(0,u.Z)(this,e),this.editorPos=n,this.pos=i,this.relativePos=o,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,T._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))}))),b={isAfterLines:!0};function k(e){return{isAfterLines:!1,horizontalDistanceToText:e}}var T=function(){function e(t,n){(0,u.Z)(this,e),this._context=t,this._viewHelper=n}return(0,s.Z)(e,[{key:"mouseTargetIsWidget",value:function(e){var t=e.target,n=c.K.collect(t,this._viewHelper.viewDomNode);return!(!w.isChildOfContentWidgets(n)&&!w.isChildOfOverflowingContentWidgets(n))||!!w.isChildOfOverlayWidgets(n)}},{key:"createMouseTarget",value:function(t,n,i,o,r){var a=new S(this._context,this._viewHelper,t),s=new x(a,n,i,o,r);try{var u=e._createMouseTarget(a,s,!1);if(6===u.type&&a.stickyTabStops&&null!==u.position){var l=e._snapToSoftTabBoundary(u.position,a.viewModel),c=f.e.fromPositions(l,l).plusRange(u.range);return s.fulfillContentText(l,c,u.detail)}return u}catch(d){return s.fulfillUnknown()}}},{key:"getMouseColumn",value:function(t){var n=this._context.configuration.options,i=n.get(138),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-i.contentLeft;return e._getMouseColumn(o,n.get(47).typicalHalfwidthCharacterWidth)}}],[{key:"_createMouseTarget",value:function(t,n,i){if(null===n.target){if(i)return n.fulfillUnknown();var o=e._doHitTest(t,n);return 1===o.type?e.createMouseTargetFromHitTestPosition(t,n,o.spanNode,o.position,o.injectedText):this._createMouseTarget(t,n.withTarget(o.hitTarget),!0)}var r=n,a=null;return(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a||e._hitTestContentWidget(t,r))||e._hitTestOverlayWidget(t,r))||e._hitTestMinimap(t,r))||e._hitTestScrollbarSlider(t,r))||e._hitTestViewZone(t,r))||e._hitTestMargin(t,r))||e._hitTestViewCursor(t,r))||e._hitTestTextArea(t,r))||e._hitTestViewLines(t,r,i))||e._hitTestScrollbar(t,r))||n.fulfillUnknown()}},{key:"_hitTestContentWidget",value:function(e,t){if(w.isChildOfContentWidgets(t.targetPath)||w.isChildOfOverflowingContentWidgets(t.targetPath)){var n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}},{key:"_hitTestOverlayWidget",value:function(e,t){if(w.isChildOfOverlayWidgets(t.targetPath)){var n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}},{key:"_hitTestViewCursor",value:function(e,t){if(t.target){var n,i=e.lastRenderData.lastViewCursorsRenderData,r=(0,o.Z)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.target===a.domNode)return t.fulfillContentText(a.position,null,{mightBeForeignElement:!1,injectedText:null})}}catch(v){r.e(v)}finally{r.f()}}if(t.isInContentArea){var s,u=e.lastRenderData.lastViewCursorsRenderData,l=t.mouseContentHorizontalOffset,c=t.mouseVerticalOffset,d=(0,o.Z)(u);try{for(d.s();!(s=d.n()).done;){var h=s.value;if(!(l<h.contentLeft)&&!(l>h.contentLeft+h.width)){var f=e.getVerticalOffsetForLineNumber(h.position.lineNumber);if(f<=c&&c<=f+h.height)return t.fulfillContentText(h.position,null,{mightBeForeignElement:!1,injectedText:null})}}}catch(v){d.e(v)}finally{d.f()}}return null}},{key:"_hitTestViewZone",value:function(e,t){var n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){var i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}},{key:"_hitTestTextArea",value:function(e,t){return w.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}},{key:"_hitTestMargin",value:function(e,t){if(t.isInMarginArea){var n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition(),o=Math.abs(t.relativePos.x),r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return(o-=e.layoutInfo.glyphMarginLeft)<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,r):(o-=e.layoutInfo.glyphMarginWidth)<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r))}return null}},{key:"_hitTestViewLines",value:function(t,n,i){if(!w.isChildOfViewLines(n.targetPath))return null;if(t.isInTopPadding(n.mouseVerticalOffset))return n.fulfillContentEmpty(new h.L(1,1),b);if(t.isAfterLines(n.mouseVerticalOffset)||t.isInBottomPadding(n.mouseVerticalOffset)){var o=t.viewModel.getLineCount(),r=t.viewModel.getLineMaxColumn(o);return n.fulfillContentEmpty(new h.L(o,r),b)}if(i){if(w.isStrictChildOfViewLines(n.targetPath)){var a=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset);if(0===t.viewModel.getLineLength(a)){var s=t.getLineWidth(a),u=k(n.mouseContentHorizontalOffset-s);return n.fulfillContentEmpty(new h.L(a,1),u)}var l=t.getLineWidth(a);if(n.mouseContentHorizontalOffset>=l){var c=k(n.mouseContentHorizontalOffset-l),d=new h.L(a,t.viewModel.getLineMaxColumn(a));return n.fulfillContentEmpty(d,c)}}return n.fulfillUnknown()}var f=e._doHitTest(t,n);return 1===f.type?e.createMouseTargetFromHitTestPosition(t,n,f.spanNode,f.position,f.injectedText):this._createMouseTarget(t,n.withTarget(f.hitTarget),!0)}},{key:"_hitTestMinimap",value:function(e,t){if(w.isChildOfMinimap(t.targetPath)){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new h.L(n,i))}return null}},{key:"_hitTestScrollbarSlider",value:function(e,t){if(w.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){var n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){var i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new h.L(i,o))}}return null}},{key:"_hitTestScrollbar",value:function(e,t){if(w.isChildOfScrollableElement(t.targetPath)){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new h.L(n,i))}return null}},{key:"_getMouseColumn",value:function(e,t){return e<0?1:Math.round(e/t)+1}},{key:"createMouseTargetFromHitTestPosition",value:function(e,t,n,i,o){var r=i.lineNumber,a=i.column,s=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>s){var u=k(t.mouseContentHorizontalOffset-s);return t.fulfillContentEmpty(i,u)}var l=e.visibleRangeForPosition(r,a);if(!l)return t.fulfillUnknown(i);var c=l.left;if(Math.abs(t.mouseContentHorizontalOffset-c)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!o,injectedText:o});var d=[];if(d.push({offset:l.left,column:a}),a>1){var v=e.visibleRangeForPosition(r,a-1);v&&d.push({offset:v.left,column:a-1})}if(a<e.viewModel.getLineMaxColumn(r)){var p=e.visibleRangeForPosition(r,a+1);p&&d.push({offset:p.left,column:a+1})}d.sort((function(e,t){return e.offset-t.offset}));for(var m=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),_=g.left<=m.clientX&&m.clientX<=g.right,y=null,C=1;C<d.length;C++){var w=d[C-1],S=d[C];if(w.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=S.offset){y=new f.e(r,w.column,r,S.column),i=Math.abs(w.offset-t.mouseContentHorizontalOffset)<Math.abs(S.offset-t.mouseContentHorizontalOffset)?new h.L(r,w.column):new h.L(r,S.column);break}}return t.fulfillContentText(i,y,{mightBeForeignElement:!_||!!o,injectedText:o})}},{key:"_doHitTestWithCaretRangeFromPoint",value:function(e,t){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),o=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){var r=Math.floor((i+o)/2),a=t.pos.y+(r-t.mouseVerticalOffset);a<=t.editorPos.y&&(a=t.editorPos.y+1),a>=t.editorPos.y+t.editorPos.height&&(a=t.editorPos.y+t.editorPos.height-1);var s=new l.YN(t.pos.x,a),u=this._actualDoHitTestWithCaretRangeFromPoint(e,s.toClientCoordinates());if(1===u.type)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}},{key:"_actualDoHitTestWithCaretRangeFromPoint",value:function(e,t){var n,o=p.getShadowRoot(e.viewDomNode);if(n=o?"undefined"===typeof o.caretRangeFromPoint?function(e,t,n){var i=document.createRange(),o=e.elementFromPoint(t,n);if(null!==o){for(;o&&o.firstChild&&o.firstChild.nodeType!==o.firstChild.TEXT_NODE&&o.lastChild&&o.lastChild.firstChild;)o=o.lastChild;var r,a=o.getBoundingClientRect(),s=window.getComputedStyle(o,null).getPropertyValue("font"),u=o.innerText,l=a.left,c=0;if(t>a.left+a.width)c=u.length;else for(var d=E.getInstance(),h=0;h<u.length+1;h++){if(t<(l+=r=d.getCharWidth(u.charAt(h),s)/2)){c=h;break}l+=r}i.setStart(o.firstChild,c),i.setEnd(o.firstChild,c)}return i}(o,t.clientX,t.clientY):o.caretRangeFromPoint(t.clientX,t.clientY):document.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new g;var r=n.startContainer;if(r.nodeType===r.TEXT_NODE){var a=r.parentNode,s=a?a.parentNode:null,u=s?s.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===d.N.CLASS_NAME?i.createFromDOMInfo(e,a,n.startOffset):new g(r.parentNode)}if(r.nodeType===r.ELEMENT_NODE){var l=r.parentNode,c=l?l.parentNode:null;return(c&&c.nodeType===c.ELEMENT_NODE?c.className:null)===d.N.CLASS_NAME?i.createFromDOMInfo(e,r,r.textContent.length):new g(r)}return new g}},{key:"_doHitTestWithCaretPositionFromPoint",value:function(e,t){var n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){var o=n.offsetNode.parentNode,r=o?o.parentNode:null,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===d.N.CLASS_NAME?i.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new g(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){var s=n.offsetNode.parentNode,u=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,l=s?s.parentNode:null,c=l&&l.nodeType===l.ELEMENT_NODE?l.className:null;if(u===d.N.CLASS_NAME){var h=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(h)return i.createFromDOMInfo(e,h,0)}else if(c===d.N.CLASS_NAME)return i.createFromDOMInfo(e,n.offsetNode,0)}return new g(n.offsetNode)}},{key:"_snapToSoftTabBoundary",value:function(e,t){var n=t.getLineContent(e.lineNumber),i=t.model.getOptions().tabSize,o=m.l.atomicPosition(n,e.column-1,i,2);return-1!==o?new h.L(e.lineNumber,o+1):e}},{key:"_doHitTest",value:function(e,t){var n=new g;if("function"===typeof document.caretRangeFromPoint?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),1===n.type){var i=e.viewModel.getInjectedTextAt(n.position),o=e.viewModel.normalizePosition(n.position,2);!i&&o.equals(n.position)||(n=new _(o,n.spanNode,i))}return n}}]),e}();var E=function(){function e(){(0,u.Z)(this,e),this._cache={},this._canvas=document.createElement("canvas")}return(0,s.Z)(e,[{key:"getCharWidth",value:function(e,t){var n=e+t;if(this._cache[n])return this._cache[n];var i=this._canvas.getContext("2d");i.font=t;var o=i.measureText(e).width;return this._cache[n]=o,o}}],[{key:"getInstance",value:function(){return e._INSTANCE||(e._INSTANCE=new e),e._INSTANCE}}]),e}();E._INSTANCE=null},58023:function(e,t,n){n.d(t,{a:function(){return P}});var i=n(15671),o=n(43144),r=n(11752),a=n(61120),s=n(60136),u=n(27277),l=n(53210),c=n(4827),d=n(6287),h=n(10526),f=n(97326),v=n(98022),p=n(4731),m=n(93741),g=n(22055),_=n(10849),y=n(52091),C=n(82978),w=n(48301),S=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r){var a;(0,i.Z)(this,n),(a=t.call(this))._mouseLeaveMonitor=null,a._context=e,a.viewController=o,a.viewHelper=r,a.mouseTargetFactory=new p.rp(a._context,r),a._mouseDownOperation=a._register(new x(a._context,a.viewController,a.viewHelper,a.mouseTargetFactory,(function(e,t){return a._createMouseTarget(e,t)}),(function(e){return a._getMouseColumn(e)}))),a.lastMouseLeaveTime=-1,a._height=a._context.configuration.options.get(138).height;var s=new m.N5(a.viewHelper.viewDomNode);a._register(s.onContextMenu(a.viewHelper.viewDomNode,(function(e){return a._onContextMenu(e,!0)}))),a._register(s.onMouseMove(a.viewHelper.viewDomNode,(function(e){a._onMouseMove(e),a._mouseLeaveMonitor||(a._mouseLeaveMonitor=l.addDisposableListener(document,"mousemove",(function(e){a.viewHelper.viewDomNode.contains(e.target)||a._onMouseLeave(new m.gy(e,!1,a.viewHelper.viewDomNode))})))}))),a._register(s.onMouseUp(a.viewHelper.viewDomNode,(function(e){return a._onMouseUp(e)}))),a._register(s.onMouseLeave(a.viewHelper.viewDomNode,(function(e){return a._onMouseLeave(e)})));var u=0;return a._register(s.onPointerDown(a.viewHelper.viewDomNode,(function(e,t){u=t}))),a._register(l.addDisposableListener(a.viewHelper.viewDomNode,l.EventType.POINTER_UP,(function(e){a._mouseDownOperation.onPointerUp()}))),a._register(s.onMouseDown(a.viewHelper.viewDomNode,(function(e){return a._onMouseDown(e,u)}))),a._setupMouseWheelZoomListener(),a._context.addEventHandler((0,f.Z)(a)),a}return(0,o.Z)(n,[{key:"_setupMouseWheelZoomListener",value:function(){var e=this,t=w.Io.INSTANCE,n=0,i=g.C.getZoomLevel(),o=!1,r=0;function a(e){return c.dz?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(l.addDisposableListener(this.viewHelper.viewDomNode,l.EventType.MOUSE_WHEEL,(function(s){if(e.viewController.emitMouseWheel(s),e._context.configuration.options.get(72)){var u=new v.q(s);if(t.acceptStandardWheelEvent(u),t.isPhysicalMouseWheel()){if(a(s)){var l=g.C.getZoomLevel(),c=u.deltaY>0?1:-1;g.C.setZoomLevel(l+c),u.preventDefault(),u.stopPropagation()}}else Date.now()-n>50&&(i=g.C.getZoomLevel(),o=a(s),r=0),n=Date.now(),r+=u.deltaY,o&&(g.C.setZoomLevel(i+r/5),u.preventDefault(),u.stopPropagation())}}),{capture:!0,passive:!1}))}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(138)){var t=this._context.configuration.options.get(138).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}},{key:"onCursorStateChanged",value:function(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}},{key:"onFocusChanged",value:function(e){return!1}},{key:"getTargetAtClientPoint",value:function(e,t){var n=new m.rU(e,t).toPageCoordinates(),i=(0,m.kG)(this.viewHelper.viewDomNode);if(n.y<i.y||n.y>i.y+i.height||n.x<i.x||n.x>i.x+i.width)return null;var o=(0,m.Pp)(this.viewHelper.viewDomNode,i,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),i,n,o,null)}},{key:"_createMouseTarget",value:function(e,t){var n=this,i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){var o=l.getShadowRoot(this.viewHelper.viewDomNode);o&&(i=o.elementsFromPoint(e.posx,e.posy).find((function(e){return n.viewHelper.viewDomNode.contains(e)})))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}},{key:"_getMouseColumn",value:function(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}},{key:"_onContextMenu",value:function(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}},{key:"_onMouseMove",value:function(e){(this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive())||(e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)}))}},{key:"_onMouseLeave",value:function(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}},{key:"_onMouseUp",value:function(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}},{key:"_onMouseDown",value:function(e,t){var n=this,i=this._createMouseTarget(e,!0),o=6===i.type||7===i.type,r=2===i.type||3===i.type||4===i.type,a=3===i.type,s=this._context.configuration.options.get(103),u=8===i.type||5===i.type,l=9===i.type,d=e.leftButton||e.middleButton;c.dz&&e.leftButton&&e.ctrlKey&&(d=!1);var h=function(){e.preventDefault(),n.viewHelper.focusTextArea()};if(d&&(o||a&&s))h(),this._mouseDownOperation.start(i.type,e,t);else if(r)e.preventDefault();else if(u){var f=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&(h(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}]),n}(C.O),x=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r,a,s,u){var l;return(0,i.Z)(this,n),(l=t.call(this))._context=e,l._viewController=o,l._viewHelper=r,l._mouseTargetFactory=a,l._createMouseTarget=s,l._getMouseColumn=u,l._mouseMoveMonitor=l._register(new m.AL(l._viewHelper.viewDomNode)),l._topBottomDragScrolling=l._register(new b(l._context,l._viewHelper,l._mouseTargetFactory,(function(e,t,n){return l._dispatchMouse(e,t,n)}))),l._mouseState=new T,l._currentSelection=new y.Y(1,1,1,1),l._isActive=!1,l._lastMouseEvent=null,l}return(0,o.Z)(n,[{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this)}},{key:"isActive",value:function(){return this._isActive}},{key:"_onMouseDownThenMove",value:function(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);var t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13!==t.type||"above"!==t.outsidePosition&&"below"!==t.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)):this._topBottomDragScrolling.start(t,e))}},{key:"start",value:function(e,t,n){var i=this;this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);var o=this._findMousePosition(t,!0);if(o&&o.position){this._mouseState.trySetCount(t.detail,o.position),t.detail=this._mouseState.count;var r=this._context.configuration.options;if(!r.get(86)&&r.get(32)&&!r.get(19)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===o.type&&o.position&&this._currentSelection.containsPosition(o.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(function(e){return i._onMouseDownThenMove(e)}),(function(e){var t=i._findMousePosition(i._lastMouseEvent,!1);e&&e instanceof KeyboardEvent?i._viewController.emitMouseDropCanceled():i._viewController.emitMouseDrop({event:i._lastMouseEvent,target:t?i._createMouseTarget(i._lastMouseEvent,!0):null}),i._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(function(e){return i._onMouseDownThenMove(e)}),(function(){return i._stop()})))}}},{key:"_stop",value:function(){this._isActive=!1,this._topBottomDragScrolling.stop()}},{key:"onHeightChanged",value:function(){this._mouseMoveMonitor.stopMonitoring()}},{key:"onPointerUp",value:function(){this._mouseMoveMonitor.stopMonitoring()}},{key:"onCursorStateChanged",value:function(e){this._currentSelection=e.selections[0]}},{key:"_getPositionOutsideEditor",value:function(e){var t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){var r=t.y-e.posy,a=Math.max(i.getCurrentScrollTop()-r,0),s=p.Iq.getZoneAtCoord(this._context,a);if(s){var u=this._helpPositionJumpOverViewZone(s);if(u)return p.ZP.createOutsideEditor(o,u,"above",r)}var l=i.getLineNumberAtVerticalOffset(a);return p.ZP.createOutsideEditor(o,new _.L(l,1),"above",r)}if(e.posy>t.y+t.height){var c=e.posy-t.y-t.height,d=i.getCurrentScrollTop()+e.relativePos.y,h=p.Iq.getZoneAtCoord(this._context,d);if(h){var f=this._helpPositionJumpOverViewZone(h);if(f)return p.ZP.createOutsideEditor(o,f,"below",c)}var v=i.getLineNumberAtVerticalOffset(d);return p.ZP.createOutsideEditor(o,new _.L(v,n.getLineMaxColumn(v)),"below",c)}var m=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){var g=t.x-e.posx;return p.ZP.createOutsideEditor(o,new _.L(m,1),"left",g)}if(e.posx>t.x+t.width){var y=e.posx-t.x-t.width;return p.ZP.createOutsideEditor(o,new _.L(m,n.getLineMaxColumn(m)),"right",y)}return null}},{key:"_findMousePosition",value:function(e,t){var n=this._getPositionOutsideEditor(e);if(n)return n;var i=this._createMouseTarget(e,t);if(!i.position)return null;if(8===i.type||5===i.type){var o=this._helpPositionJumpOverViewZone(i.detail);if(o)return p.ZP.createViewZone(i.type,i.element,i.mouseColumn,o,i.detail)}return i}},{key:"_helpPositionJumpOverViewZone",value:function(e){var t=new _.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}},{key:"_dispatchMouse",value:function(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}]),n}(h.JT),b=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r,a){var s;return(0,i.Z)(this,n),(s=t.call(this))._context=e,s._viewHelper=o,s._mouseTargetFactory=r,s._dispatchMouse=a,s._operation=null,s}return(0,o.Z)(n,[{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this),this.stop()}},{key:"start",value:function(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new k(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}},{key:"stop",value:function(){this._operation&&(this._operation.dispose(),this._operation=null)}}]),n}(h.JT),k=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r,a,s,u){var c;return(0,i.Z)(this,n),(c=t.call(this))._context=e,c._viewHelper=o,c._mouseTargetFactory=r,c._dispatchMouse=a,c._position=s,c._mouseEvent=u,c._lastTime=Date.now(),c._animationFrameDisposable=l.scheduleAtNextAnimationFrame((function(){return c._execute()})),c}return(0,o.Z)(n,[{key:"dispose",value:function(){this._animationFrameDisposable.dispose()}},{key:"setPosition",value:function(e,t){this._position=e,this._mouseEvent=t}},{key:"_tick",value:function(){var e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}},{key:"_getScrollSpeed",value:function(){var e=this._context.configuration.options.get(63),t=this._context.configuration.options.get(138).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}},{key:"_execute",value:function(){var e=this,t=this._context.configuration.options.get(63),n=this._getScrollSpeed()*(this._tick()/1e3)*t,i="above"===this._position.outsidePosition?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,i),this._viewHelper.renderNow();var o,r=this._context.viewLayout.getLinesViewportData(),a="above"===this._position.outsidePosition?r.startLineNumber:r.endLineNumber,s=(0,m.kG)(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(138).horizontalScrollbarHeight,c=new m.YN(this._mouseEvent.pos.x,s.y+s.height-u-.1),d=(0,m.Pp)(this._viewHelper.viewDomNode,s,c);(o=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),s,c,d,null)).position&&o.position.lineNumber===a||(o="above"===this._position.outsidePosition?p.ZP.createOutsideEditor(this._position.mouseColumn,new _.L(a,1),"above",this._position.outsideDistance):p.ZP.createOutsideEditor(this._position.mouseColumn,new _.L(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(o,!0,2),this._animationFrameDisposable=l.scheduleAtNextAnimationFrame((function(){return e._execute()}))}}]),n}(h.JT),T=function(){function e(){(0,i.Z)(this,e),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}return(0,o.Z)(e,[{key:"altKey",get:function(){return this._altKey}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"metaKey",get:function(){return this._metaKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"leftButton",get:function(){return this._leftButton}},{key:"middleButton",get:function(){return this._middleButton}},{key:"startedOnLineNumbers",get:function(){return this._startedOnLineNumbers}},{key:"count",get:function(){return this._lastMouseDownCount}},{key:"setModifiers",value:function(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}},{key:"setStartButtons",value:function(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}},{key:"setStartedOnLineNumbers",value:function(e){this._startedOnLineNumbers=e}},{key:"trySetCount",value:function(t,n){var i=(new Date).getTime();i-this._lastSetMouseDownCountTime>e.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=i,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(n)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=n,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)}}]),e}();T.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var E=n(54656),M=n(21852),A=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r){var a;(0,i.Z)(this,n),(a=t.call(this,e,o,r))._register(d.o.addTarget(a.viewHelper.linesContentDomNode)),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Tap,(function(e){return a.onTap(e)}))),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Change,(function(e){return a.onChange(e)}))),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Contextmenu,(function(e){return a._onContextMenu(new m.gy(e,!1,a.viewHelper.viewDomNode),!1)}))),a._lastPointerType="mouse",a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,"pointerdown",(function(e){var t=e.pointerType;a._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));var s=new m.tC(a.viewHelper.viewDomNode);return a._register(s.onPointerMove(a.viewHelper.viewDomNode,(function(e){return a._onMouseMove(e)}))),a._register(s.onPointerUp(a.viewHelper.viewDomNode,(function(e){return a._onMouseUp(e)}))),a._register(s.onPointerLeave(a.viewHelper.viewDomNode,(function(e){return a._onMouseLeave(e)}))),a._register(s.onPointerDown(a.viewHelper.viewDomNode,(function(e,t){return a._onMouseDown(e,t)}))),a}return(0,o.Z)(n,[{key:"onTap",value:function(e){if(e.initialTarget&&this.viewHelper.linesContentDomNode.contains(e.initialTarget)){e.preventDefault(),this.viewHelper.focusTextArea();var t=this._createMouseTarget(new m.gy(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===t.type&&null!==t.detail.injectedText})}}},{key:"onChange",value:function(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}},{key:"_onMouseDown",value:function(e,t){"touch"!==e.browserEvent.pointerType&&(0,r.Z)((0,a.Z)(n.prototype),"_onMouseDown",this).call(this,e,t)}}]),n}(S),L=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r){var a;return(0,i.Z)(this,n),(a=t.call(this,e,o,r))._register(d.o.addTarget(a.viewHelper.linesContentDomNode)),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Tap,(function(e){return a.onTap(e)}))),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Change,(function(e){return a.onChange(e)}))),a._register(l.addDisposableListener(a.viewHelper.linesContentDomNode,d.t.Contextmenu,(function(e){return a._onContextMenu(new m.gy(e,!1,a.viewHelper.viewDomNode),!1)}))),a}return(0,o.Z)(n,[{key:"onTap",value:function(e){e.preventDefault(),this.viewHelper.focusTextArea();var t=this._createMouseTarget(new m.gy(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){var n=document.createEvent("CustomEvent");n.initEvent(M.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}},{key:"onChange",value:function(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}]),n}(S),P=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,o,r){var a;return(0,i.Z)(this,n),a=t.call(this),c.gn&&E.D.pointerEvents?a.handler=a._register(new A(e,o,r)):window.TouchEvent?a.handler=a._register(new L(e,o,r)):a.handler=a._register(new S(e,o,r)),a}return(0,o.Z)(n,[{key:"getTargetAtClientPoint",value:function(e,t){return this.handler.getTargetAtClientPoint(e,t)}}]),n}(h.JT)},87806:function(e,t,n){n.d(t,{H:function(){return Z}});var i=n(29439),o=n(11752),r=n(61120),a=n(60136),s=n(27277),u=n(15671),l=n(43144),c=n(87697),d=n(12426),h=n(16688),f=n(4827),v=n(26684),p=n(6815),m=n(21852),g=n(66539),_=n(89378),y=n(6264),C=n(16373),w=n(31492),S=n(7497),x=n(10849),b=n(30788),k=n(52091),T=n(68537),E=n(56417),M=n(17424),A=n(97742),L=function(){function e(t,n,i,o,r){(0,u.Z)(this,e),this._context=t,this.modelLineNumber=n,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=o,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}return(0,l.Z)(e,[{key:"prepareRender",value:function(e){var t=new x.L(this.modelLineNumber,this.distanceToModelLineStart+1),n=new x.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}},{key:"definePresentation",value:function(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}]),e}(),P=d.isFirefox,Z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o,r){var a;(0,u.Z)(this,n),(a=t.call(this,e))._primaryCursorPosition=new x.L(1,1),a._primaryCursorVisibleRange=null,a._viewController=o,a._visibleRangeProvider=r,a._scrollLeft=0,a._scrollTop=0;var s=a._context.configuration.options,l=s.get(138);a._setAccessibilityOptions(s),a._contentLeft=l.contentLeft,a._contentWidth=l.contentWidth,a._contentHeight=l.height,a._fontInfo=s.get(47),a._lineHeight=s.get(63),a._emptySelectionClipboard=s.get(34),a._copyWithSyntaxHighlighting=s.get(22),a._visibleTextArea=null,a._selections=[new k.Y(1,1,1,1)],a._modelSelections=[new k.Y(1,1,1,1)],a._lastRenderPosition=null,a.textArea=(0,h.X)(document.createElement("textarea")),_.K.write(a.textArea,6),a.textArea.setClassName("inputarea ".concat(T.S)),a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off");var v=a._context.viewModel.model.getOptions().tabSize;a.textArea.domNode.style.tabSize="".concat(v*a._fontInfo.spaceWidth,"px"),a.textArea.setAttribute("autocorrect","off"),a.textArea.setAttribute("autocapitalize","off"),a.textArea.setAttribute("autocomplete","off"),a.textArea.setAttribute("spellcheck","false"),a.textArea.setAttribute("aria-label",a._getAriaLabel(s)),a.textArea.setAttribute("tabindex",String(s.get(118))),a.textArea.setAttribute("role","textbox"),a.textArea.setAttribute("aria-roledescription",c.NC("editor","editor")),a.textArea.setAttribute("aria-multiline","true"),a.textArea.setAttribute("aria-haspopup","false"),a.textArea.setAttribute("aria-autocomplete","both"),a._ensureReadOnlyAttribute(),a.textAreaCover=(0,h.X)(document.createElement("div")),a.textAreaCover.setPosition("absolute");var y={getLineCount:function(){return a._context.viewModel.getLineCount()},getLineMaxColumn:function(e){return a._context.viewModel.getLineMaxColumn(e)},getValueInRange:function(e,t){return a._context.viewModel.getValueInRange(e,t)},getValueLengthInRange:function(e,t){return a._context.viewModel.getValueLengthInRange(e,t)},modifyPosition:function(e,t){return a._context.viewModel.modifyPosition(e,t)}},C={getDataToCopy:function(){var e=a._context.viewModel.getPlainTextToCopy(a._modelSelections,a._emptySelectionClipboard,f.ED),t=a._context.viewModel.model.getEOL(),n=a._emptySelectionClipboard&&1===a._modelSelections.length&&a._modelSelections[0].isEmpty(),i=Array.isArray(e)?e:null,o=Array.isArray(e)?e.join(t):e,r=void 0,s=null;if(m.RA.forceCopyWithSyntaxHighlighting||a._copyWithSyntaxHighlighting&&o.length<65536){var u=a._context.viewModel.getRichTextToCopy(a._modelSelections,a._emptySelectionClipboard);u&&(r=u.html,s=u.mode)}return{isFromEmptySelection:n,multicursorText:i,text:o,html:r,mode:s}},getScreenReaderContent:function(){if(1===a._accessibilitySupport){var e=a._selections[0];if(f.dz&&e.isEmpty()){var t=e.getStartPosition(),n=a._getWordBeforePosition(t);if(0===n.length&&(n=a._getCharacterBeforePosition(t)),n.length>0)return new g.un(n,n.length,n.length,b.e.fromPositions(t),0)}if(f.dz&&!e.isEmpty()&&y.getValueLengthInRange(e,0)<500){var o=y.getValueInRange(e,0);return new g.un(o,0,o.length,e,0)}if(d.isSafari&&!e.isEmpty()){var r="vscode-placeholder";return new g.un(r,0,r.length,null,void 0)}return g.un.EMPTY}if(d.isAndroid){var s=a._selections[0];if(s.isEmpty()){var u=s.getStartPosition(),l=a._getAndroidWordAtPosition(u),c=(0,i.Z)(l,2),h=c[0],v=c[1];if(h.length>0)return new g.un(h,v,v,b.e.fromPositions(u),0)}return g.un.EMPTY}return g.ee.fromEditorSelection(y,a._selections[0],a._accessibilityPageSize,0===a._accessibilitySupport)},deduceModelPosition:function(e,t,n){return a._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,n)}},w=a._register(new m.Tj(a.textArea.domNode));return a._textAreaInput=a._register(new m.Fz(C,w,f.OS,d)),a._register(a._textAreaInput.onKeyDown((function(e){a._viewController.emitKeyDown(e)}))),a._register(a._textAreaInput.onKeyUp((function(e){a._viewController.emitKeyUp(e)}))),a._register(a._textAreaInput.onPaste((function(e){var t=!1,n=null,i=null;e.metadata&&(t=a._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,n="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,i=e.metadata.mode),a._viewController.paste(e.text,t,n,i)}))),a._register(a._textAreaInput.onCut((function(){a._viewController.cut()}))),a._register(a._textAreaInput.onType((function(e){e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(g.al&&console.log(" => compositionType: <<".concat(e.text,">>, ").concat(e.replacePrevCharCnt,", ").concat(e.replaceNextCharCnt,", ").concat(e.positionDelta)),a._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(g.al&&console.log(" => type: <<".concat(e.text,">>")),a._viewController.type(e.text))}))),a._register(a._textAreaInput.onSelectionChangeRequest((function(e){a._viewController.setSelection(e)}))),a._register(a._textAreaInput.onCompositionStart((function(e){var t=a.textArea.domNode,n=a._modelSelections[0],i=function(){var e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),i=e.lastIndexOf("\n"),o=e.substring(i+1),r=o.lastIndexOf("\t"),s=o.length-r-1,u=n.getStartPosition(),l=Math.min(u.column-1,s),c=u.column-1-l,d=o.substring(0,o.length-l),h=a._context.viewModel.model.getOptions().tabSize,f=function(e,t,n){if(0===e.length)return 0;var i=document.createElement("div");i.style.position="absolute",i.style.top="-50000px",i.style.width="50000px";var o=document.createElement("span");(0,p.N)(o,t),o.style.whiteSpace="pre",o.style.tabSize="".concat(n*t.spaceWidth,"px"),o.append(e),i.appendChild(o),document.body.appendChild(i);var r=o.offsetWidth;return document.body.removeChild(i),r}(d,a._fontInfo,h);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:f}}(),o=i.distanceToModelLineStart,r=i.widthOfHiddenTextBefore,s=function(){var e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),i=e.indexOf("\n"),o=-1===i?e:e.substring(0,i),r=o.indexOf("\t"),s=-1===r?o.length:o.length-r-1,u=n.getEndPosition(),l=Math.min(a._context.viewModel.model.getLineMaxColumn(u.lineNumber)-u.column,s);return{distanceToModelLineEnd:a._context.viewModel.model.getLineMaxColumn(u.lineNumber)-u.column-l}}().distanceToModelLineEnd;a._context.viewModel.revealRange("keyboard",!0,b.e.fromPositions(a._selections[0].getStartPosition()),0,1),a._visibleTextArea=new L(a._context,n.startLineNumber,o,r,s),a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off"),a._visibleTextArea.prepareRender(a._visibleRangeProvider),a._render(),a.textArea.setClassName("inputarea ".concat(T.S," ime-input")),a._viewController.compositionStart(),a._context.viewModel.onCompositionStart()}))),a._register(a._textAreaInput.onCompositionUpdate((function(e){a._visibleTextArea&&(a._visibleTextArea.prepareRender(a._visibleRangeProvider),a._render())}))),a._register(a._textAreaInput.onCompositionEnd((function(){a._visibleTextArea=null,a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off"),a._render(),a.textArea.setClassName("inputarea ".concat(T.S)),a._viewController.compositionEnd(),a._context.viewModel.onCompositionEnd()}))),a._register(a._textAreaInput.onFocus((function(){a._context.viewModel.setHasFocus(!0)}))),a._register(a._textAreaInput.onBlur((function(){a._context.viewModel.setHasFocus(!1)}))),a._register(A.F.onDidChange((function(){a._ensureReadOnlyAttribute()}))),a}return(0,l.Z)(n,[{key:"writeScreenReaderContent",value:function(e){this._textAreaInput.writeScreenReaderContent(e)}},{key:"dispose",value:function(){(0,o.Z)((0,r.Z)(n.prototype),"dispose",this).call(this)}},{key:"_getAndroidWordAtPosition",value:function(e){for(var t=this._context.viewModel.getLineContent(e.lineNumber),n=(0,S.u)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?'),i=!0,o=e.column,r=!0,a=e.column,s=0;s<50&&(i||r);){if(i&&o<=1&&(i=!1),i){var u=t.charCodeAt(o-2);0!==n.get(u)?i=!1:o--}if(r&&a>t.length&&(r=!1),r){var l=t.charCodeAt(a-1);0!==n.get(l)?r=!1:a++}s++}return[t.substring(o-1,a-1),e.column-o]}},{key:"_getWordBeforePosition",value:function(e){for(var t=this._context.viewModel.getLineContent(e.lineNumber),n=(0,S.u)(this._context.configuration.options.get(124)),i=e.column,o=0;i>1;){var r=t.charCodeAt(i-2);if(0!==n.get(r)||o>50)return t.substring(i-1,e.column-1);o++,i--}return t.substring(0,e.column-1)}},{key:"_getCharacterBeforePosition",value:function(e){if(e.column>1){var t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!v.ZG(t.charCodeAt(0)))return t}return""}},{key:"_getAriaLabel",value:function(e){return 1===e.get(2)?c.NC("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",f.IJ?"Shift+Alt+F1":"Alt+F1"):e.get(4)}},{key:"_setAccessibilityOptions",value:function(e){this._accessibilitySupport=e.get(2);var t=e.get(3);2===this._accessibilitySupport&&t===w.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;var n=e.get(138).wrappingColumn;if(-1!==n&&1!==this._accessibilitySupport){var i=e.get(47);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*i.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=P?0:1}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(138);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(47),this._lineHeight=t.get(63),this._emptySelectionClipboard=t.get(34),this._copyWithSyntaxHighlighting=t.get(22),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");var i=this._context.viewModel.model.getOptions().tabSize;return this.textArea.domNode.style.tabSize="".concat(i*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(118))),(e.hasChanged(31)||e.hasChanged(86))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"isFocused",value:function(){return this._textAreaInput.isFocused()}},{key:"focusTextArea",value:function(){this._textAreaInput.focusTextArea()}},{key:"getLastRenderData",value:function(){return this._lastRenderPosition}},{key:"setAriaOptions",value:function(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}},{key:"_ensureReadOnlyAttribute",value:function(){var e=this._context.configuration.options;!A.F.enabled||e.get(31)&&e.get(86)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}},{key:"prepareRender",value:function(e){var t;this._primaryCursorPosition=new x.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),null===(t=this._visibleTextArea)||void 0===t||t.prepareRender(e)}},{key:"render",value:function(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}},{key:"_render",value:function(){var e;if(this._visibleTextArea){var t=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(i&&o&&t&&n&&n.left>=this._scrollLeft&&t.left<=this._scrollLeft+this._contentWidth){var r=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,a=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),s=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+t.left-this._scrollLeft,l=n.left-t.left+1;if(u<this._contentLeft){var c=this._contentLeft-u;u+=c,s+=c,l-=c}l>this._contentWidth&&(l=this._contentWidth);var d=this._context.viewModel.getViewLineData(i.lineNumber),h=d.tokens.findTokenIndexAtOffset(i.column-1),v=h===d.tokens.findTokenIndexAtOffset(o.column-1),p=this._visibleTextArea.definePresentation(v?d.tokens.getPresentation(h):null);this.textArea.domNode.scrollTop=a*this._lineHeight,this.textArea.domNode.scrollLeft=s,this._doRender({lastRenderPosition:null,top:r,left:u,width:l,height:this._lineHeight,useCover:!1,color:(E.RW.getColorMap()||[])[p.foreground],italic:p.italic,bold:p.bold,underline:p.underline,strikethrough:p.strikethrough})}}else if(this._primaryCursorVisibleRange){var m=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(m<this._contentLeft||m>this._contentLeft+this._contentWidth)this._renderAtTopLeft();else{var g=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(g<0||g>this._contentHeight)this._renderAtTopLeft();else if(f.dz){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:g,left:this._textAreaWrapping?this._contentLeft:m,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;var _=null!==(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==e?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=_*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:g,left:this._textAreaWrapping?this._contentLeft:m,width:this._textAreaWidth,height:P?0:1,useCover:!1})}}else this._renderAtTopLeft()}},{key:"_newlinecount",value:function(e){for(var t=0,n=-1;;){if(-1===(n=e.indexOf("\n",n+1)))break;t++}return t}},{key:"_renderAtTopLeft",value:function(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:P?0:1,useCover:!0})}},{key:"_doRender",value:function(e){this._lastRenderPosition=e.lastRenderPosition;var t=this.textArea,n=this.textAreaCover;(0,p.N)(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?M.Il.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration("".concat(e.underline?" underline":"").concat(e.strikethrough?" line-through":"")),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);var i=this._context.configuration.options;i.get(54)?n.setClassName("monaco-editor-background textAreaCover "+C.Z.OUTER_CLASS_NAME):0!==i.get(64).renderType?n.setClassName("monaco-editor-background textAreaCover "+y.x.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}]),n}(_.E)},21852:function(e,t,n){n.d(t,{Fz:function(){return T},Nl:function(){return b},RA:function(){return x},Tj:function(){return M},pd:function(){return i}});var i,o=n(29439),r=n(11752),a=n(61120),s=n(60136),u=n(27277),l=n(15671),c=n(43144),d=n(12426),h=n(53210),f=n(70300),v=n(81882),p=n(34022),m=n(32590),g=n(28941),_=n(10526),y=n(67609),C=n(26684),w=n(66539),S=n(52091);!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(i||(i={}));var x={forceCopyWithSyntaxHighlighting:!1},b=function(){function e(){(0,l.Z)(this,e),this._lastState=null}return(0,c.Z)(e,[{key:"set",value:function(e,t){this._lastState={lastCopiedValue:e,data:t}}},{key:"get",value:function(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}]),e}();b.INSTANCE=new b;var k=function(){function e(){(0,l.Z)(this,e),this._lastTypeTextLength=0}return(0,c.Z)(e,[{key:"handleCompositionUpdate",value:function(e){var t={text:e=e||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}]),e}(),T=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,i,r,a){var s;(0,l.Z)(this,n),(s=t.call(this))._host=e,s._textArea=i,s._OS=r,s._browser=a,s._onFocus=s._register(new g.Q5),s.onFocus=s._onFocus.event,s._onBlur=s._register(new g.Q5),s.onBlur=s._onBlur.event,s._onKeyDown=s._register(new g.Q5),s.onKeyDown=s._onKeyDown.event,s._onKeyUp=s._register(new g.Q5),s.onKeyUp=s._onKeyUp.event,s._onCut=s._register(new g.Q5),s.onCut=s._onCut.event,s._onPaste=s._register(new g.Q5),s.onPaste=s._onPaste.event,s._onType=s._register(new g.Q5),s.onType=s._onType.event,s._onCompositionStart=s._register(new g.Q5),s.onCompositionStart=s._onCompositionStart.event,s._onCompositionUpdate=s._register(new g.Q5),s.onCompositionUpdate=s._onCompositionUpdate.event,s._onCompositionEnd=s._register(new g.Q5),s.onCompositionEnd=s._onCompositionEnd.event,s._onSelectionChangeRequest=s._register(new g.Q5),s.onSelectionChangeRequest=s._onSelectionChangeRequest.event,s._asyncTriggerCut=s._register(new m.pY((function(){return s._onCut.fire()}),0)),s._asyncFocusGainWriteScreenReaderContent=s._register(new m.pY((function(){return s.writeScreenReaderContent("asyncFocusGain")}),0)),s._textAreaState=w.un.EMPTY,s._selectionChangeListener=null,s.writeScreenReaderContent("ctor"),s._hasFocus=!1,s._currentComposition=null;var u=null;return s._register(s._textArea.onKeyDown((function(e){var t=new v.y(e);(109===t.keyCode||s._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),u=t,s._onKeyDown.fire(t)}))),s._register(s._textArea.onKeyUp((function(e){var t=new v.y(e);s._onKeyUp.fire(t)}))),s._register(s._textArea.onCompositionStart((function(e){w.al&&console.log("[compositionstart]",e);var t=new k;if(s._currentComposition)s._currentComposition=t;else{if(s._currentComposition=t,2===s._OS&&u&&u.equals(109)&&s._textAreaState.selectionStart===s._textAreaState.selectionEnd&&s._textAreaState.selectionStart>0&&s._textAreaState.value.substr(s._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===u.code||"ArrowLeft"===u.code))return w.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",e),t.handleCompositionUpdate("x"),void s._onCompositionStart.fire({data:e.data});s._browser.isAndroid,s._onCompositionStart.fire({data:e.data})}}))),s._register(s._textArea.onCompositionUpdate((function(e){w.al&&console.log("[compositionupdate]",e);var t=s._currentComposition;if(t){if(s._browser.isAndroid){var n=w.un.readFromTextArea(s._textArea,s._textAreaState),i=w.un.deduceAndroidCompositionInput(s._textAreaState,n);return s._textAreaState=n,s._onType.fire(i),void s._onCompositionUpdate.fire(e)}var o=t.handleCompositionUpdate(e.data);s._textAreaState=w.un.readFromTextArea(s._textArea,s._textAreaState),s._onType.fire(o),s._onCompositionUpdate.fire(e)}}))),s._register(s._textArea.onCompositionEnd((function(e){w.al&&console.log("[compositionend]",e);var t=s._currentComposition;if(t){if(s._currentComposition=null,s._browser.isAndroid){var n=w.un.readFromTextArea(s._textArea,s._textAreaState),i=w.un.deduceAndroidCompositionInput(s._textAreaState,n);return s._textAreaState=n,s._onType.fire(i),void s._onCompositionEnd.fire()}var o=t.handleCompositionUpdate(e.data);s._textAreaState=w.un.readFromTextArea(s._textArea,s._textAreaState),s._onType.fire(o),s._onCompositionEnd.fire()}}))),s._register(s._textArea.onInput((function(e){if(w.al&&console.log("[input]",e),s._textArea.setIgnoreSelectionChangeTime("received input event"),!s._currentComposition){var t=w.un.readFromTextArea(s._textArea,s._textAreaState),n=w.un.deduceInput(s._textAreaState,t,2===s._OS);(0!==n.replacePrevCharCnt||1!==n.text.length||!C.ZG(n.text.charCodeAt(0))&&127!==n.text.charCodeAt(0))&&(s._textAreaState=t,""===n.text&&0===n.replacePrevCharCnt&&0===n.replaceNextCharCnt&&0===n.positionDelta||s._onType.fire(n))}}))),s._register(s._textArea.onCut((function(e){s._textArea.setIgnoreSelectionChangeTime("received cut event"),s._ensureClipboardGetsEditorSelection(e),s._asyncTriggerCut.schedule()}))),s._register(s._textArea.onCopy((function(e){s._ensureClipboardGetsEditorSelection(e)}))),s._register(s._textArea.onPaste((function(e){if(s._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),e.clipboardData){var t=E.getTextData(e.clipboardData),n=(0,o.Z)(t,2),i=n[0],r=n[1];i&&(r=r||b.INSTANCE.get(i),s._onPaste.fire({text:i,metadata:r}))}}))),s._register(s._textArea.onFocus((function(){var e=s._hasFocus;s._setHasFocus(!0),s._browser.isSafari&&!e&&s._hasFocus&&s._asyncFocusGainWriteScreenReaderContent.schedule()}))),s._register(s._textArea.onBlur((function(){s._currentComposition&&(s._currentComposition=null,s.writeScreenReaderContent("blurWithoutCompositionEnd"),s._onCompositionEnd.fire()),s._setHasFocus(!1)}))),s._register(s._textArea.onSyntheticTap((function(){s._browser.isAndroid&&s._currentComposition&&(s._currentComposition=null,s.writeScreenReaderContent("tapWithoutCompositionEnd"),s._onCompositionEnd.fire())}))),s}return(0,c.Z)(n,[{key:"textAreaState",get:function(){return this._textAreaState}},{key:"_installSelectionChangeListener",value:function(){var e=this,t=0;return h.addDisposableListener(document,"selectionchange",(function(n){if(p.B.onSelectionChange(),e._hasFocus&&!e._currentComposition&&e._browser.isChrome){var i=Date.now(),o=i-t;if(t=i,!(o<5)){var r=i-e._textArea.getIgnoreSelectionChangeTime();if(e._textArea.resetSelectionChangeTime(),!(r<100)&&e._textAreaState.selection){var a=e._textArea.getValue();if(e._textAreaState.value===a){var s=e._textArea.getSelectionStart(),u=e._textArea.getSelectionEnd();if(e._textAreaState.selectionStart!==s||e._textAreaState.selectionEnd!==u){var l=e._textAreaState.deduceEditorPosition(s),c=e._host.deduceModelPosition(l[0],l[1],l[2]),d=e._textAreaState.deduceEditorPosition(u),h=e._host.deduceModelPosition(d[0],d[1],d[2]),f=new S.Y(c.lineNumber,c.column,h.lineNumber,h.column);e._onSelectionChangeRequest.fire(f)}}}}}}))}},{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(n.prototype),"dispose",this).call(this),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}},{key:"focusTextArea",value:function(){this._setHasFocus(!0),this.refreshFocusState()}},{key:"isFocused",value:function(){return this._hasFocus}},{key:"refreshFocusState",value:function(){this._setHasFocus(this._textArea.hasFocus())}},{key:"_setHasFocus",value:function(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}},{key:"_setAndWriteTextAreaState",value:function(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}},{key:"writeScreenReaderContent",value:function(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}},{key:"_ensureClipboardGetsEditorSelection",value:function(e){var t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};b.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,n),e.preventDefault(),e.clipboardData&&E.setTextData(e.clipboardData,t.text,t.html,n)}}]),n}(_.JT),E=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,null,[{key:"getTextData",value:function(e){var t=e.getData(y.v.text),n=null,i=e.getData("vscode-editor-data");if("string"===typeof i)try{1!==(n=JSON.parse(i)).version&&(n=null)}catch(o){}return 0===t.length&&null===n&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map((function(e){return e.name})).join("\n"),null]:[t,n]}},{key:"setTextData",value:function(e,t,n,i){e.setData(y.v.text,t),"string"===typeof n&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}}]),e}(),M=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o;return(0,l.Z)(this,n),(o=t.call(this))._actual=e,o.onKeyDown=o._register(new f.Y(o._actual,"keydown")).event,o.onKeyUp=o._register(new f.Y(o._actual,"keyup")).event,o.onCompositionStart=o._register(new f.Y(o._actual,"compositionstart")).event,o.onCompositionUpdate=o._register(new f.Y(o._actual,"compositionupdate")).event,o.onCompositionEnd=o._register(new f.Y(o._actual,"compositionend")).event,o.onBeforeInput=o._register(new f.Y(o._actual,"beforeinput")).event,o.onInput=o._register(new f.Y(o._actual,"input")).event,o.onCut=o._register(new f.Y(o._actual,"cut")).event,o.onCopy=o._register(new f.Y(o._actual,"copy")).event,o.onPaste=o._register(new f.Y(o._actual,"paste")).event,o.onFocus=o._register(new f.Y(o._actual,"focus")).event,o.onBlur=o._register(new f.Y(o._actual,"blur")).event,o._onSyntheticTap=o._register(new g.Q5),o.onSyntheticTap=o._onSyntheticTap.event,o._ignoreSelectionChangeTime=0,o._register(o.onKeyDown((function(){return p.B.onKeyDown()}))),o._register(o.onBeforeInput((function(){return p.B.onBeforeInput()}))),o._register(o.onInput((function(){return p.B.onInput()}))),o._register(o.onKeyUp((function(){return p.B.onKeyUp()}))),o._register(h.addDisposableListener(o._actual,i.Tap,(function(){return o._onSyntheticTap.fire()}))),o}return(0,c.Z)(n,[{key:"hasFocus",value:function(){var e=h.getShadowRoot(this._actual);return e?e.activeElement===this._actual:!!h.isInDOM(this._actual)&&document.activeElement===this._actual}},{key:"setIgnoreSelectionChangeTime",value:function(e){this._ignoreSelectionChangeTime=Date.now()}},{key:"getIgnoreSelectionChangeTime",value:function(){return this._ignoreSelectionChangeTime}},{key:"resetSelectionChangeTime",value:function(){this._ignoreSelectionChangeTime=0}},{key:"getValue",value:function(){return this._actual.value}},{key:"setValue",value:function(e,t){var n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}},{key:"getSelectionStart",value:function(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}},{key:"getSelectionEnd",value:function(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}},{key:"setSelectionRange",value:function(e,t,n){var i=this._actual,o=h.getShadowRoot(i),r=(o?o.activeElement:document.activeElement)===i,a=i.selectionStart,s=i.selectionEnd;if(r&&a===t&&s===n)d.isFirefox&&window.parent!==window&&i.focus();else{if(r)return this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),void(d.isFirefox&&window.parent!==window&&i.focus());try{var u=h.saveParentsScrollTop(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),h.restoreParentsScrollTop(i,u)}catch(l){}}}}]),n}(_.JT)},66539:function(e,t,n){n.d(t,{al:function(){return s},ee:function(){return l},un:function(){return u}});var i=n(15671),o=n(43144),r=n(26684),a=n(30788),s=!1,u=function(){function e(t,n,o,r,a){(0,i.Z)(this,e),this.value=t,this.selectionStart=n,this.selectionEnd=o,this.selection=r,this.newlineCountBeforeSelection=a}return(0,o.Z)(e,[{key:"toString",value:function(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")}},{key:"collapseSelection",value:function(){return this.selectionStart===this.value.length?this:new e(this.value,this.value.length,this.value.length,null,void 0)}},{key:"writeToTextArea",value:function(e,t,n){s&&console.log("writeToTextArea ".concat(e,": ").concat(this.toString())),t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}},{key:"deduceEditorPosition",value:function(e){var t,n,i,o,r,a,s,u;if(e<=this.selectionStart){var l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(null!==(n=null===(t=this.selection)||void 0===t?void 0:t.getStartPosition())&&void 0!==n?n:null,l,-1)}if(e>=this.selectionEnd){var c=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(null!==(o=null===(i=this.selection)||void 0===i?void 0:i.getEndPosition())&&void 0!==o?o:null,c,1)}var d=this.value.substring(this.selectionStart,e);if(-1===d.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(a=null===(r=this.selection)||void 0===r?void 0:r.getStartPosition())&&void 0!==a?a:null,d,1);var h=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(u=null===(s=this.selection)||void 0===s?void 0:s.getEndPosition())&&void 0!==u?u:null,h,-1)}},{key:"_finishDeduceEditorPosition",value:function(e,t,n){for(var i=0,o=-1;-1!==(o=t.indexOf("\n",o+1));)i++;return[e,n*t.length,i]}}],[{key:"readFromTextArea",value:function(t,n){var i=t.getValue(),o=t.getSelectionStart(),r=t.getSelectionEnd(),a=void 0;n&&(i.substring(0,o)===n.value.substring(0,n.selectionStart)&&(a=n.newlineCountBeforeSelection));return new e(i,o,r,null,a)}},{key:"deduceInput",value:function(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};s&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: ".concat(e.toString())),console.log("CURRENT STATE: ".concat(t.toString())));var i=Math.min(r.Mh(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(r.P1(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),a=e.value.substring(i,e.value.length-o),u=t.value.substring(i,t.value.length-o),l=e.selectionStart-i,c=e.selectionEnd-i,d=t.selectionStart-i,h=t.selectionEnd-i;if(s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(a,">, selectionStart: ").concat(l,", selectionEnd: ").concat(c)),console.log("AFTER DIFFING CURRENT STATE: <".concat(u,">, selectionStart: ").concat(d,", selectionEnd: ").concat(h))),d===h){var f=e.selectionStart-i;return s&&console.log("REMOVE PREVIOUS: ".concat(f," chars")),{text:u,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}return{text:u,replacePrevCharCnt:c-l,replaceNextCharCnt:0,positionDelta:0}}},{key:"deduceAndroidCompositionInput",value:function(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(s&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: ".concat(e.toString())),console.log("CURRENT STATE: ".concat(t.toString()))),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};var n=Math.min(r.Mh(e.value,t.value),e.selectionEnd),i=Math.min(r.P1(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-i),a=t.value.substring(n,t.value.length-i),u=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,d=t.selectionEnd-n;return s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(o,">, selectionStart: ").concat(u,", selectionEnd: ").concat(l)),console.log("AFTER DIFFING CURRENT STATE: <".concat(a,">, selectionStart: ").concat(c,", selectionEnd: ").concat(d))),{text:a,replacePrevCharCnt:l,replaceNextCharCnt:o.length-l,positionDelta:d-a.length}}}]),e}();u.EMPTY=new u("",0,0,null,void 0);var l=function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,null,[{key:"_getPageOfLine",value:function(e,t){return Math.floor((e-1)/t)}},{key:"_getRangeForPage",value:function(e,t){var n=e*t,i=n+1,o=n+t;return new a.e(i,1,o+1,1)}},{key:"fromEditorSelection",value:function(t,n,i,o){var r=500,s=e._getPageOfLine(n.startLineNumber,i),l=e._getRangeForPage(s,i),c=e._getPageOfLine(n.endLineNumber,i),d=e._getRangeForPage(c,i),h=l.intersectRanges(new a.e(1,1,n.startLineNumber,n.startColumn));if(o&&t.getValueLengthInRange(h,1)>r){var f=t.modifyPosition(h.getEndPosition(),-500);h=a.e.fromPositions(f,h.getEndPosition())}var v=t.getValueInRange(h,1),p=t.getLineCount(),m=t.getLineMaxColumn(p),g=d.intersectRanges(new a.e(n.endLineNumber,n.endColumn,p,m));if(o&&t.getValueLengthInRange(g,1)>r){var _=t.modifyPosition(g.getStartPosition(),r);g=a.e.fromPositions(g.getStartPosition(),_)}var y,C=t.getValueInRange(g,1);if(s===c||s+1===c)y=t.getValueInRange(n,1);else{var w=l.intersectRanges(n),S=d.intersectRanges(n);y=t.getValueInRange(w,1)+String.fromCharCode(8230)+t.getValueInRange(S,1)}return o&&y.length>1e3&&(y=y.substring(0,r)+String.fromCharCode(8230)+y.substring(y.length-r,y.length)),new u(v+y+C,v.length,v.length+y.length,n,h.endLineNumber-h.startLineNumber)}}]),e}()},23605:function(e,t,n){n.r(t),n.d(t,{CoreEditingCommands:function(){return L},CoreEditorCommand:function(){return E},CoreNavigationCommands:function(){return M},EditorScroll_:function(){return i},RevealLine_:function(){return o}});var i,o,r=n(29439),a=n(15671),s=n(43144),u=n(60136),l=n(27277),c=n(87697),d=n(12426),h=n(64272),f=n(58340),v=n(98351),p=n(56692),m=n(92336),g=n(16263),_=n(68372),y=n(4614),C=n(52720),w=n(10849),S=n(30788),x=n(44474),b=n(49525),k=n(90031),T=0,E=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}]),n}(v._l);!function(e){e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!h.Kn(e))return!1;var t=e;return!!h.HD(t.to)&&(!(!h.o8(t.by)&&!h.HD(t.by))&&(!(!h.o8(t.value)&&!h.hj(t.value))&&!(!h.o8(t.revealCursor)&&!h.jn(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){var n,i;switch(t.to){case e.RawDirection.Up:n=1;break;case e.RawDirection.Right:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.Left:n=4;break;default:return null}switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Page:i=3;break;case e.RawUnit.HalfPage:i=4;break;case e.RawUnit.Editor:i=5;break;case e.RawUnit.Column:i=6;break;default:i=2}return{direction:n,unit:i,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(i||(i={})),function(e){e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!h.Kn(e))return!1;var t=e;return!(!h.hj(t.lineNumber)&&!h.HD(t.lineNumber))&&!(!h.o8(t.at)&&!h.HD(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(o||(o={}));var M,A=function(){function e(t){var n=this;(0,a.Z)(this,e),t.addImplementation(1e4,"code-editor",(function(e,t){var i=e.get(p.$).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&n._runEditorCommand(e,i,t)})),t.addImplementation(1e3,"generic-dom-input-textarea",(function(e,t){var i=document.activeElement;return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(n.runDOMCommand(),!0)})),t.addImplementation(0,"generic-dom",(function(e,t){var i=e.get(p.$).getActiveCodeEditor();return!!i&&(i.focus(),n._runEditorCommand(e,i,t))}))}return(0,s.Z)(e,[{key:"_runEditorCommand",value:function(e,t,n){var i=this.runEditorCommand(e,t,n);return i||!0}}]),e}();!function(e){var t=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[y.P.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0))}}]),n}(E);e.MoveTo=(0,v.fK)(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,v.fK)(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));var n=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement();var n=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==n&&(e.setCursorStates(t.source,3,n.viewStates.map((function(e){return g.Vi.fromViewState(e)}))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:n.fromLineNumber,fromViewVisualColumn:n.fromVisualColumn,toViewLineNumber:n.toLineNumber,toViewVisualColumn:n.toVisualColumn}),n.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}]),n}(E);e.ColumnSelect=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"columnSelect",precondition:void 0})}return(0,s.Z)(n,[{key:"_getColumnSelectResult",value:function(e,t,n,i){if("undefined"===typeof i.position||"undefined"===typeof i.viewPosition||"undefined"===typeof i.mouseColumn)return null;var o=e.model.validatePosition(i.position),r=e.coordinatesConverter.validateViewPosition(new w.L(i.viewPosition.lineNumber,i.viewPosition.column),o),a=i.doColumnSelect?n.fromViewLineNumber:r.lineNumber,s=i.doColumnSelect?n.fromViewVisualColumn:i.mouseColumn-1;return m.U.columnSelect(e.cursorConfig,e,a,s,r.lineNumber,i.mouseColumn-1)}}]),n}(n))),e.CursorColumnSelectLeft=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3599,linux:{primary:0}}})}return(0,s.Z)(n,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return m.U.columnSelectLeft(e.cursorConfig,e,n)}}]),n}(n))),e.CursorColumnSelectRight=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3601,linux:{primary:0}}})}return(0,s.Z)(n,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return m.U.columnSelectRight(e.cursorConfig,e,n)}}]),n}(n)));var r=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._isPaged=e.isPaged,i}return(0,s.Z)(n,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return m.U.columnSelectUp(e.cursorConfig,e,n,this._isPaged)}}]),n}(n);e.CursorColumnSelectUp=(0,v.fK)(new r({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,v.fK)(new r({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3595,linux:{primary:0}}}));var h=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._isPaged=e.isPaged,i}return(0,s.Z)(n,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return m.U.columnSelectDown(e.cursorConfig,e,n,this._isPaged)}}]),n}(n);e.CursorColumnSelectDown=(0,v.fK)(new h({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,v.fK)(new h({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3596,linux:{primary:0}}}));var p=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"cursorMove",precondition:void 0,description:y.N.description})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){var n=y.N.parse(t);n&&this._runCursorMove(e,t.source,n)}},{key:"_runCursorMove",value:function(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,n._move(e,e.getCursorStates(),i)),e.revealPrimaryCursor(t,!0)}}],[{key:"_move",value:function(e,t,n){var i=n.select,o=n.value;switch(n.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return y.P.simpleMove(e,t,n.direction,i,o,n.unit);case 11:case 13:case 12:case 14:return y.P.viewportMove(e,t,n.direction,i,o);default:return null}}}]),n}(E);e.CursorMoveImpl=p,e.CursorMove=(0,v.fK)(new p);var _=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._staticArgs=e.args,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){var n=this._staticArgs;-1===this._staticArgs.value&&(n={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,y.P.simpleMove(e,e.getCursorStates(),n.direction,n.select,n.value,n.unit)),e.revealPrimaryCursor(t.source,!0)}}]),n}(E);e.CursorLeft=(0,v.fK)(new _({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,v.fK)(new _({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1039}})),e.CursorRight=(0,v.fK)(new _({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,v.fK)(new _({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1041}})),e.CursorUp=(0,v.fK)(new _({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,v.fK)(new _({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,v.fK)(new _({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,v.fK)(new _({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1035}})),e.CursorDown=(0,v.fK)(new _({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,v.fK)(new _({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,v.fK)(new _({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,v.fK)(new _({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1036}})),e.CreateCursor=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"createCursor",precondition:void 0})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n;n=t.wholeLine?y.P.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):y.P.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);var i=e.getCursorStates();if(i.length>1)for(var o=n.modelState?n.modelState.position:null,r=n.viewState?n.viewState.position:null,a=0,s=i.length;a<s;a++){var u=i[a];if((!o||u.modelState.selection.containsPosition(o))&&(!r||u.viewState.selection.containsPosition(r)))return i.splice(a,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,i)}i.push(n),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}}}]),n}(E))),e.LastCursorMoveToSelect=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"_lastCursorMoveToSelect",precondition:void 0})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),o=i.slice(0);o[n]=y.P.moveTo(e,i[n],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}}]),n}(E)));var C=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,y.P.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}]),n}(E);e.CursorHome=(0,v.fK)(new C({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,v.fK)(new C({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));var b=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}},{key:"_exec",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n],r=o.modelState.position.lineNumber;t[n]=g.Vi.fromModelState(o.modelState.move(this._inSelectionMode,r,1,0))}return t}}]),n}(E);e.CursorLineStart=(0,v.fK)(new b({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,v.fK)(new b({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:0,mac:{primary:1311}}}));var k=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,y.P.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}]),n}(E);e.CursorEnd=(0,v.fK)(new k({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:T,kbExpr:x.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,v.fK)(new k({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:T,kbExpr:x.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));var M=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}},{key:"_exec",value:function(e,t){for(var n=[],i=0,o=t.length;i<o;i++){var r=t[i],a=r.modelState.position.lineNumber,s=e.model.getLineMaxColumn(a);n[i]=g.Vi.fromModelState(r.modelState.move(this._inSelectionMode,a,s,0))}return n}}]),n}(E);e.CursorLineEnd=(0,v.fK)(new M({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,v.fK)(new M({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:0,mac:{primary:1315}}}));var L=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,y.P.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}]),n}(E);e.CursorTop=(0,v.fK)(new L({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,v.fK)(new L({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3086,mac:{primary:3088}}}));var P=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,y.P.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}]),n}(E);e.CursorBottom=(0,v.fK)(new P({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,v.fK)(new P({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:3085,mac:{primary:3090}}}));var Z=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editorScroll",precondition:void 0,description:i.description})}return(0,s.Z)(n,[{key:"determineScrollMethod",value:function(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}},{key:"runCoreEditorCommand",value:function(e,t){var n=i.parse(t);if(n){var o=this.determineScrollMethod(n);o&&o(e,t.source,n)}}},{key:"_runVerticalEditorScroll",value:function(e,t,n){var i=this._computeDesiredScrollTop(e,n);if(n.revealCursor){var o=e.getCompletelyVisibleViewRangeAtScrollTop(i);e.setCursorStates(t,3,[y.P.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),o,n.select)])}e.viewLayout.setScrollPosition({scrollTop:i},0)}},{key:"_computeDesiredScrollTop",value:function(e,t){if(1===t.unit){var n,i=e.viewLayout.getFutureViewport(),o=e.getCompletelyVisibleViewRangeAtScrollTop(i.top),r=e.coordinatesConverter.convertViewRangeToModelRange(o);n=1===t.direction?Math.max(1,r.startLineNumber-t.value):Math.min(e.model.getLineCount(),r.startLineNumber+t.value);var a=e.coordinatesConverter.convertModelPositionToViewPosition(new w.L(n,1));return e.viewLayout.getVerticalOffsetForLineNumber(a.lineNumber)}if(5===t.unit){var s=0;return 3===t.direction&&(s=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(s)}var u;u=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;var l=(1===t.direction?-1:1)*u;return e.viewLayout.getCurrentScrollTop()+l*e.cursorConfig.lineHeight}},{key:"_runHorizontalEditorScroll",value:function(e,t,n){var i=this._computeDesiredScrollLeft(e,n);e.viewLayout.setScrollPosition({scrollLeft:i},0)}},{key:"_computeDesiredScrollLeft",value:function(e,t){var n=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+n*e.cursorConfig.typicalHalfwidthCharacterWidth}}]),n}(E);e.EditorScrollImpl=Z,e.EditorScroll=(0,v.fK)(new Z),e.ScrollLineUp=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollLineUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2064,mac:{primary:267}}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Up,by:i.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollPageUp=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollPageUp",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Up,by:i.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollEditorTop=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Up,by:i.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollLineDown=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollLineDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2066,mac:{primary:268}}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Down,by:i.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollPageDown=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollPageDown",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Down,by:i.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollEditorBottom=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Down,by:i.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollLeft=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollLeft",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Left,by:i.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}}]),o}(E))),e.ScrollRight=(0,v.fK)(new(function(t){(0,u.Z)(o,t);var n=(0,l.Z)(o);function o(){return(0,a.Z)(this,o),n.call(this,{id:"scrollRight",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus}})}return(0,s.Z)(o,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:i.RawDirection.Right,by:i.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}}]),o}(E)));var D=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[y.P.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0))}}]),n}(E);e.WordSelect=(0,v.fK)(new D({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,v.fK)(new D({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"lastCursorWordSelect",precondition:void 0})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),o=i.slice(0),r=i[n];o[n]=y.P.word(e,r,r.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}}]),n}(E)));var O=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[y.P.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!1,!0))}}]),n}(E);e.LineSelect=(0,v.fK)(new O({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,v.fK)(new O({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));var N=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),o=i.slice(0);o[n]=y.P.line(e,i[n],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}}]),n}(E);e.LastCursorLineSelect=(0,v.fK)(new N({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,v.fK)(new N({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"cancelSelection",precondition:x.u.hasNonEmptySelection,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:9,secondary:[1033]}})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[y.P.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}]),n}(E))),e.RemoveSecondaryCursors=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"removeSecondaryCursors",precondition:x.u.hasMultipleSelections,kbOpts:{weight:T+1,kbExpr:x.u.textInputFocus,primary:9,secondary:[1033]}})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),(0,f.i7)(c.NC("removedCursor","Removed secondary cursors"))}}]),n}(E))),e.RevealLine=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"revealLine",precondition:void 0,description:o.description})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){var n=t,i=n.lineNumber||0,r="number"===typeof i?i+1:parseInt(i)+1;r<1&&(r=1);var a=e.model.getLineCount();r>a&&(r=a);var s=new S.e(r,1,r,e.model.getLineMaxColumn(r)),u=0;if(n.at)switch(n.at){case o.RawAtArgument.Top:u=3;break;case o.RawAtArgument.Center:u=1;break;case o.RawAtArgument.Bottom:u=4}var l=e.coordinatesConverter.convertModelRangeToViewRange(s);e.revealRange(t.source,!1,l,u,0)}}]),n}(E))),e.SelectAll=new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,v.Sq)}return(0,s.Z)(n,[{key:"runDOMCommand",value:function(){d.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}},{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditorCommand(i,n)}},{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[y.P.selectAll(e,e.getPrimaryCursorState())])}}]),n}(A)),e.SetSelection=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"setSelection",precondition:void 0})}return(0,s.Z)(n,[{key:"runCoreEditorCommand",value:function(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[g.Vi.fromModelSelection(t.selection)]))}}]),n}(E)))}(M||(M={}));var L,P=b.Ao.and(x.u.textInputFocus,x.u.columnSelection);function Z(e,t){k.W.registerKeybindingRule({id:e,primary:t,when:P,weight:T+1})}function D(e){return e.register(),e}Z(M.CursorColumnSelectLeft.id,1039),Z(M.CursorColumnSelectRight.id,1041),Z(M.CursorColumnSelectUp.id,1040),Z(M.CursorColumnSelectPageUp.id,1035),Z(M.CursorColumnSelectDown.id,1042),Z(M.CursorColumnSelectPageDown.id,1036),function(e){var t=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditingCommand(t,i,n||{})}}]),n}(v._l);e.CoreEditingCommand=t,e.LineBreakInsert=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"lineBreakInsert",precondition:x.u.writable,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:0,mac:{primary:301}}})}return(0,s.Z)(n,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,C.u6.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection}))))}}]),n}(t))),e.Outdent=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"outdent",precondition:x.u.writable,kbOpts:{weight:T,kbExpr:b.Ao.and(x.u.editorTextFocus,x.u.tabDoesNotMoveFocus),primary:1026}})}return(0,s.Z)(n,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,C.u6.outdent(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})))),e.pushUndoStop()}}]),n}(t))),e.Tab=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"tab",precondition:x.u.writable,kbOpts:{weight:T,kbExpr:b.Ao.and(x.u.editorTextFocus,x.u.tabDoesNotMoveFocus),primary:2}})}return(0,s.Z)(n,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,C.u6.tab(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})))),e.pushUndoStop()}}]),n}(t))),e.DeleteLeft=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"deleteLeft",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}return(0,s.Z)(n,[{key:"runCoreEditingCommand",value:function(e,t,n){var i=_.A.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})),t.getCursorAutoClosedCharacters()),o=(0,r.Z)(i,2),a=o[0],s=o[1];a&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(2)}}]),n}(t))),e.DeleteRight=(0,v.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"deleteRight",precondition:void 0,kbOpts:{weight:T,kbExpr:x.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}return(0,s.Z)(n,[{key:"runCoreEditingCommand",value:function(e,t,n){var i=_.A.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection}))),o=(0,r.Z)(i,2),a=o[0],s=o[1];a&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(3)}}]),n}(t))),e.Undo=new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,v.n_)}return(0,s.Z)(n,[{key:"runDOMCommand",value:function(){document.execCommand("undo")}},{key:"runEditorCommand",value:function(e,t,n){if(t.hasModel()&&!0!==t.getOption(86))return t.getModel().undo()}}]),n}(A)),e.Redo=new(function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,v.kz)}return(0,s.Z)(n,[{key:"runDOMCommand",value:function(){document.execCommand("redo")}},{key:"runEditorCommand",value:function(e,t,n){if(t.hasModel()&&!0!==t.getOption(86))return t.getModel().redo()}}]),n}(A))}(L||(L={}));var O=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e,i,o){var r;return(0,a.Z)(this,n),(r=t.call(this,{id:e,precondition:void 0,description:o}))._handlerId=i,r}return(0,s.Z)(n,[{key:"runCommand",value:function(e,t){var n=e.get(p.$).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}]),n}(v.mY);function N(e,t){D(new O("default:"+e,e)),D(new O(e,e,t))}N("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),N("replacePreviousChar"),N("compositionType"),N("compositionStart"),N("compositionEnd"),N("paste"),N("cut")},23068:function(e,t,n){n.d(t,{B:function(){return d},d:function(){return f}});var i=n(74165),o=n(37762),r=n(92575),a=n(77314),s=n(67609),u=n(50605),l=n(29582),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{u(i.next(e))}catch(t){r(t)}}function s(e){try{u(i.throw(e))}catch(t){r(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function d(e){var t,n=new a.Hl,r=(0,o.Z)(e.items);try{var s=function(){var e=t.value,o=e.type;if("string"===e.kind){var r=new Promise((function(t){return e.getAsString(t)}));n.append(o,(0,a.ZO)(r))}else if("file"===e.kind){var s=e.getAsFile();s&&n.append(o,function(e){var t=this,n=e.path?u.o.parse(e.path):void 0;return(0,a.Ix)(e.name,n,(function(){return c(t,void 0,void 0,(0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e.arrayBuffer();case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})))}))}(s))}};for(r.s();!(t=r.n()).done;)s()}catch(l){r.e(l)}finally{r.f()}return n}var h=Object.freeze([l.Km.EDITORS,l.Km.FILES,r.g.RESOURCES]);function f(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.dataTransfer&&(i||!e.has(s.v.uriList))){var r,c=(0,l.GR)(t).filter((function(e){return e.resource})).map((function(e){return e.resource.toString()})),d=(0,o.Z)(null===(n=t.dataTransfer)||void 0===n?void 0:n.items);try{for(d.s();!(r=d.n()).done;){var f=r.value.getAsFile();f&&c.push(f.path?u.o.file(f.path).toString():f.name)}}catch(g){d.e(g)}finally{d.f()}c.length&&e.replace(s.v.uriList,(0,a.ZO)(a.Z0.create(c)))}var v,p=(0,o.Z)(h);try{for(p.s();!(v=p.n()).done;){var m=v.value;e.delete(m)}}catch(g){p.e(g)}finally{p.f()}}}}]);
//# sourceMappingURL=monaco-editor-vendor.c0aa0059.fd5a2075.js.map