{"version":3,"file":"static/js/monaco-editor-vendor.77eea609.b7c48230.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScroll.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Position } from '../../../common/core/position.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._sessionStore = new DisposableStore();\n        this._ranges = [];\n        this._rangesVersionId = 0;\n        this._editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(34 /* EditorOption.experimental */)) {\n                this.onConfigurationChange();\n            }\n        }));\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(true), 50));\n        this.onConfigurationChange();\n    }\n    onConfigurationChange() {\n        const options = this._editor.getOption(34 /* EditorOption.experimental */);\n        if (options.stickyScroll.enabled === false) {\n            this.stickyScrollWidget.emptyRootNode();\n            this._editor.removeOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidChangeModel(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._update(false)));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this._update(true)));\n            this._update(true);\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this.stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._update(false);\n        }\n    }\n    _update(updateOutline = false) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (updateOutline) {\n                (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n                this._cts = new CancellationTokenSource();\n                yield this._updateOutlineModel(this._cts.token);\n            }\n            const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n            if (hiddenRanges) {\n                for (const hiddenRange of hiddenRanges) {\n                    this._ranges = this._ranges.filter(range => { return !(range[0] >= hiddenRange.startLineNumber && range[1] <= hiddenRange.endLineNumber + 1); });\n                }\n            }\n            this._renderStickyScroll();\n        });\n    }\n    _findLineRanges(outlineElement, depth) {\n        if (outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.size) {\n            let didRecursion = false;\n            for (const outline of outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.values()) {\n                const kind = outline.symbol.kind;\n                if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                    didRecursion = true;\n                    this._findLineRanges(outline, depth + 1);\n                }\n            }\n            if (!didRecursion) {\n                this._addOutlineRanges(outlineElement, depth);\n            }\n        }\n        else {\n            this._addOutlineRanges(outlineElement, depth);\n        }\n    }\n    _addOutlineRanges(outlineElement, depth) {\n        let currentStartLine = 0;\n        let currentEndLine = 0;\n        while (outlineElement) {\n            const kind = outlineElement.symbol.kind;\n            if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                currentStartLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.startLineNumber;\n                currentEndLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.endLineNumber;\n                this._ranges.push([currentStartLine, currentEndLine, depth]);\n                depth--;\n            }\n            if (outlineElement.parent instanceof OutlineElement) {\n                outlineElement = outlineElement.parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    _updateOutlineModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._editor.getModel();\n                const modelVersionId = model.getVersionId();\n                const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this._ranges = [];\n                this._rangesVersionId = modelVersionId;\n                for (const outline of outlineModel.children.values()) {\n                    if (outline instanceof OutlineElement) {\n                        const kind = outline.symbol.kind;\n                        if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                            this._findLineRanges(outline, 1);\n                        }\n                        else {\n                            this._findLineRanges(outline, 0);\n                        }\n                    }\n                    this._ranges = this._ranges.sort(function (a, b) {\n                        if (a[0] !== b[0]) {\n                            return a[0] - b[0];\n                        }\n                        else if (a[1] !== b[1]) {\n                            return b[1] - a[1];\n                        }\n                        else {\n                            return a[2] - b[2];\n                        }\n                    });\n                    let previous = [];\n                    for (const [index, arr] of this._ranges.entries()) {\n                        const [start, end, _depth] = arr;\n                        if (previous[0] === start && previous[1] === end) {\n                            this._ranges.splice(index, 1);\n                        }\n                        else {\n                            previous = arr;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const model = this._editor.getModel();\n        if (this._rangesVersionId !== model.getVersionId()) {\n            // Old _ranges not updated yet\n            return;\n        }\n        const scrollTop = this._editor.getScrollTop();\n        this.stickyScrollWidget.emptyRootNode();\n        const beginningLinesConsidered = new Set();\n        for (const [index, arr] of this._ranges.entries()) {\n            const [start, end, depth] = arr;\n            if (end - start > 0 && model.getLineContent(start) !== '') {\n                const topOfElementAtDepth = (depth - 1) * lineHeight;\n                const bottomOfElementAtDepth = depth * lineHeight;\n                const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                if (!beginningLinesConsidered.has(start)) {\n                    if (topOfElementAtDepth >= topOfEndLine - 1 && topOfElementAtDepth < bottomOfEndLine - 2) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, -1, bottomOfEndLine - bottomOfElementAtDepth));\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth < bottomOfEndLine - 1) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, 0, 0));\n                    }\n                }\n                else {\n                    this._ranges.splice(index, 1);\n                }\n            }\n        }\n        this.stickyScrollWidget.updateRootNode();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyScrollController);\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nclass StickyScrollCodeLine {\n    constructor(_lineNumber, _depth, _editor, _zIndex, _relativePosition) {\n        this._lineNumber = _lineNumber;\n        this._depth = _depth;\n        this._editor = _editor;\n        this._zIndex = _zIndex;\n        this._relativePosition = _relativePosition;\n        this.effectiveLineHeight = 0;\n        this.effectiveLineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */) + this._relativePosition;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    getDomNode() {\n        const root = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(this._lineNumber, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 100, 'none', true, true, null);\n        const sb = createStringBuilder(400);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineHTMLNode.style.overflow = 'hidden';\n        lineHTMLNode.style.whiteSpace = 'nowrap';\n        lineHTMLNode.style.display = 'inline-block';\n        lineHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.style.width = this._editor.getLayoutInfo().contentLeft.toString() + 'px';\n        lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineNumberHTMLNode.style.color = 'var(--vscode-editorLineNumber-foreground)';\n        lineNumberHTMLNode.style.display = 'inline-block';\n        lineNumberHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        const innerLineNumberHTML = document.createElement('span');\n        innerLineNumberHTML.innerText = this._lineNumber.toString();\n        innerLineNumberHTML.style.paddingLeft = this._editor.getLayoutInfo().lineNumbersLeft.toString() + 'px';\n        innerLineNumberHTML.style.width = this._editor.getLayoutInfo().lineNumbersWidth.toString() + 'px';\n        innerLineNumberHTML.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        innerLineNumberHTML.style.textAlign = 'right';\n        innerLineNumberHTML.style.float = 'left';\n        innerLineNumberHTML.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        root.onclick = e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this._editor.revealPosition({ lineNumber: this._lineNumber - this._depth + 1, column: 1 });\n        };\n        root.onmouseover = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScrollHover-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            innerLineNumberHTML.style.cursor = `pointer`;\n            lineHTMLNode.style.cursor = `pointer`;\n            root.style.cursor = `pointer`;\n            lineNumberHTMLNode.style.cursor = `pointer`;\n        };\n        root.onmouseleave = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScroll-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        };\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        root.appendChild(lineNumberHTMLNode);\n        root.appendChild(lineHTMLNode);\n        root.style.zIndex = this._zIndex.toString();\n        root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        root.style.overflow = 'hidden';\n        root.style.whiteSpace = 'nowrap';\n        root.style.width = '100%';\n        root.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        root.style.height = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        // Special case for last line of sticky scroll\n        if (this._relativePosition) {\n            root.style.position = 'relative';\n            root.style.top = this._relativePosition + 'px';\n            root.style.width = '100%';\n        }\n        return root;\n    }\n}\nclass StickyScrollWidget {\n    constructor(_editor) {\n        this._editor = _editor;\n        this.arrayOfCodeLines = [];\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode.style.width = '100%';\n        this.rootDomNode.style.boxShadow = `var(--vscode-scrollbar-shadow) 0 6px 6px -6px`;\n    }\n    getCurrentLines() {\n        const widgetLineRange = [];\n        for (const codeLine of this.arrayOfCodeLines) {\n            widgetLineRange.push(codeLine.lineNumber);\n        }\n        return widgetLineRange;\n    }\n    pushCodeLine(codeLine) {\n        this.arrayOfCodeLines.push(codeLine);\n    }\n    updateRootNode() {\n        let widgetHeight = 0;\n        for (const line of this.arrayOfCodeLines) {\n            widgetHeight += line.effectiveLineHeight;\n            this.rootDomNode.appendChild(line.getDomNode());\n        }\n        this.rootDomNode.style.height = widgetHeight.toString() + 'px';\n    }\n    emptyRootNode() {\n        this.arrayOfCodeLines.length = 0;\n        dom.clearNode(this.rootDomNode);\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        this.rootDomNode.style.zIndex = '2';\n        this.rootDomNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        return this.rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        const res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* Refilter.All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(113 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(113 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy, noSelect) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n        this.noSelect = noSelect;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(108 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* State.Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(83 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(111 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, noSelect: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* State.Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* State.Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* State.Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* State.Idle */ && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* State.Idle */ && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* State.Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(81 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* State.Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(81 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false, noSelect: false });\n        }, this._editor.getOption(82 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* State.Auto */, false, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing, noFilter) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* State.Auto */ : 1 /* State.Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* CompletionTriggerKind.Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, !noFilter ? itemKindFilter : new Set(), onlyFrom, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(108 /* EditorOption.suggest */), this._editor.getOption(103 /* EditorOption.snippetSuggestions */), undefined, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(108 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (const provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false, triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                noSelect: this._context.noSelect,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(110 /* EditorOption.suggestLineHeight */) || this._editor.getOption(46 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            data.root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(109 /* EditorOption.suggestFontSize */) || e.hasChanged(110 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(108 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n        if (selectionIndex >= 0) {\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus([selectionIndex]);\n        }\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.shy) {\n                return;\n            }\n            let index = -1;\n            if (!e.noSelect) {\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false, noSelect: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(108 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter, noSelect) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false, noSelect: noSelect !== null && noSelect !== void 0 ? noSelect : false }, false, onlyFrom, undefined, noFilter);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true, noSelect: false });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        let noSelect;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n            if (args.noSelection === true) {\n                noSelect = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined, noSelect);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.incomplete.size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(81 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(108 /* EditorOption.suggest */, model), this._getEditorOption(103 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(108 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n"],"names":["_a","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","StickyScrollController","editor","_languageFeaturesService","_sessionStore","DisposableStore","_ranges","_rangesVersionId","_editor","stickyScrollWidget","StickyScrollWidget","_register","onDidChangeConfiguration","hasChanged","onConfigurationChange","_updateSoon","RunOnceScheduler","_update","this","getOption","stickyScroll","enabled","emptyRootNode","removeOverlayWidget","clear","addOverlayWidget","add","onDidChangeModel","onDidScrollChange","onDidChangeHiddenAreas","onDidChangeModelTokens","_onTokensChange","onDidChangeModelContent","schedule","documentSymbolProvider","onDidChange","event","stickyLineNumbers","getCurrentLines","stickyLineNumber","ranges","range","fromLineNumber","toLineNumber","_needsUpdate","_b","updateOutline","_cts","dispose","CancellationTokenSource","_updateOutlineModel","token","hiddenRanges","_getViewModel","getHiddenAreas","hiddenRange","filter","startLineNumber","endLineNumber","_renderStickyScroll","outlineElement","depth","children","size","didRecursion","values","outline","kind","symbol","_findLineRanges","_addOutlineRanges","currentStartLine","currentEndLine","push","parent","OutlineElement","hasModel","model","getModel","modelVersionId","getVersionId","OutlineModel","outlineModel","isCancellationRequested","sort","a","b","previous","entries","index","arr","start","end","splice","f","lineHeight","scrollTop","getScrollTop","beginningLinesConsidered","Set","getLineContent","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","has","pushCodeLine","StickyScrollCodeLine","updateRootNode","Disposable","ID","ILanguageFeaturesService","_ttPolicy","window","trustedTypes","createPolicy","createHTML","_lineNumber","_depth","_zIndex","_relativePosition","effectiveLineHeight","actualInlineDecorations","root","document","createElement","viewModel","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","Position","lineNumber","lineRenderingData","getViewLineRenderingData","LineDecoration","inlineDecorations","minColumn","maxColumn","err","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","createStringBuilder","renderViewLine","build","lineHTMLNode","style","backgroundColor","overflow","whiteSpace","display","toString","innerHTML","lineNumberHTMLNode","width","getLayoutInfo","contentLeft","color","innerLineNumberHTML","innerText","paddingLeft","lineNumbersLeft","lineNumbersWidth","textAlign","float","appendChild","onclick","stopPropagation","preventDefault","revealPosition","column","onmouseover","background","cursor","onmouseleave","applyFontInfo","zIndex","height","position","top","arrayOfCodeLines","rootDomNode","boxShadow","widgetLineRange","codeLine","widgetHeight","line","getDomNode","dom","preference","registerEditorContribution","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","options","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","clipboardText","undefined","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_options","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","_filteredItems","_ensureCachedState","_providerInfo","keys","provider","except","res","pop","_stats","_createCachedState","Map","labelLengths","word","wordLow","source","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","item","isInvalid","set","Boolean","container","incomplete","overwriteBefore","editStart","wordLen","slice","toLowerCase","score","FuzzyScore","wordPos","ch","charCodeAt","completion","filterText","match","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","idx","distance","pLabelLen","quickSelect","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","RawContextKey","localize","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","type","description","CanResolve","suggestWidgetStatusbarMenu","MenuId","CompletionItem","label","sortTextLow","sortText","extensionId","Range","startColumn","editInsertEnd","endColumn","editReplaceEnd","insert","replace","resolveCompletionItem","_resolveCache","_isResolved","sub","onCancellationRequested","assign","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","showDeprecated","getSnippetSuggestSupport","default","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","registry","context","triggerKind","CancellationToken","sw","StopWatch","clone","getWordAtPosition","defaultReplaceRange","defaultRange","setEndPosition","disposables","onCompletionList","_c","didAddResult","suggestions","suggestion","tags","includes","insertTextRules","SnippetParser","insertText","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","snippetCompletions","provideCompletionItems","list","orderedGroups","providerGroup","all","map","onUnexpectedExternalError","CancellationError","getSuggestionComparator","defaultComparator","_snippetComparators","snippetConfig","get","showSimpleSuggestions","getContribution","triggerSuggest","CommandsRegistry","accessor","args","uri","triggerCharacter","maxItemsToResolve","assertType","URI","completionProvider","ITextModelService","createModelReference","ref","resolving","object","textEditorModel","completions","setTimeout","QuickSuggestionsOptions","config","other","comments","strings","tokenType","WordContextKey","contextKeyService","_enabled","_ckAtEnd","AtEnd","bindTo","_configListener","_selectionListener","reset","checkForWordEnd","selection","getSelection","getStartPosition","onDidChangeCursorSelection","IContextKeyService","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_model","_acceptNext","_ignore","acceptNext","_moveIndex","onDidChangeCursorPosition","_move","fwd","newIndex","additionalTextEdits","CommitCharacterController","widget","accept","_disposables","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","text","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","auto","shy","noSelect","substr","leadingWord","getWordUntilPosition","pos","getPosition","tokenization","tokenizeIfCheap","isNaN","Number","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_logService","_contextKeyService","_configurationService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_state","_completionDisposables","_onDidCancel","Emitter","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_telemetryGate","_currentSelection","Selection","_updateTriggerCharacters","cancel","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","configurationService","getContextKeyValue","allowQuickSuggestions","getValue","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","charAt","supports","existing","_completionModel","adopt","trigger","onDidType","retrigger","_requestToken","_context","fire","prevSelection","isEmpty","reason","containsRange","getEndPosition","isBeforeOrEqual","_doTriggerQuickSuggest","snippetsPreventQuickSuggestions","SnippetController2","isInSnippet","cancelAndSet","hasWidgetFocus","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","Math","max","canShowQuickSuggest","ctx","_onNewContext","onlyFrom","noFilter","suggestCtx","_createSuggestFilter","itemKindFilter","itemKind","completionOptions","WordDistance","readText","cmpFn","concat","_reportDurationsTelemetry","catch","onUnexpectedError","publicLog2","data","JSON","stringify","debug","getLeadingWhitespace","inactiveProvider","allProvider","delete","oldLineContext","completionModel","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","IConfigurationService","OvertypingCapturer","suggestModel","_lastOvertyped","_empty","selections","getSelections","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","getValueInRange","multiline","StatusBarViewItem","kb","_keybindingService","lookupKeybinding","_action","id","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","instantiationService","_menuService","_menuDisposables","element","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","domNode","classList","remove","menu","createMenu","left","right","getActions","group","actions","renderMenu","IInstantiationService","IMenuService","canExpandCompletionItem","documentation","detail","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","Codicon","title","nls","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","md","join","MarkdownString","appendCodeblock","cappedDetail","show","toggle","test","clearNode","hide","renderedContents","render","onDidRenderAsync","clientHeight","userSelect","tabIndex","onmousedown","clearContents","newSize","equals","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","dimension","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","info","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","min","placements","placement","find","p","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","_completionItemColor","out","ColorExtractor","_regexStrict","_regexRelaxed","exec","RegExp","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","create","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","ThemeIcon","configureFont","letterSpacing","letterSpacingPx","labelOptions","labelEscapeNewLines","matches","createMatches","extract","className","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","path","FileKind","detailClasses","extraClasses","hasFolderIcons","flat","CSSIcon","CompletionItemKinds","indexOf","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","editorSuggestWidgetForeground","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusForeground","quickInputListFocusIconForeground","quickInputListFocusBackground","PersistedWidgetSize","listHighlightForeground","listFocusHighlightForeground","transparent","_service","_key","getEditorType","EmbeddedCodeEditorWidget","raw","obj","parse","is","lift","store","SuggestWidget","_storageService","_isAuto","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","state","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_d","_resize","south","east","itemHeight","defaultSize","threshold","round","abs","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","isResolved","_isDetailsVisible","docs","_status","applyStatusBarStyle","showStatusBar","attachListStyler","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","mouseEvent","contains","focus","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","createCancelablePromise","loading","disposableTimeout","showDetails","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","visibleCount","pageDown","focusNextPage","focusNext","scrollBottom","focusLast","pageUp","focusPreviousPage","focusPrevious","focusFirst","getFocusedElements","getFocus","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","placeAtAnchor","clamp","getBoolean","IStorageService","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_afterRender","LineSuffix","getLineMaxColumn","offset","getOffsetAt","getPositionAt","_marker","deltaDecorations","stickiness","isDisposed","getDecorationRange","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","MutableDisposable","_selectors","PriorityRegistry","s","priority","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toDisposable","toKeybinding","SimpleKeybinding","platform","isModifierKey","_overtypingCapturer","_alternatives","showTriggered","itemsOrderedByPriorityDesc","select","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","getAlternativeVersionId","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","Array","isArray","scrollState","StableEditorScrollState","executeEdits","edit","EditOperation","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","isFlush","changes","change","thisPosition","oldFlags","didType","typeListener","some","applied","trace","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","overtypingCapturer","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","finally","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","split","basenameHash","hash","basename","languageId","getLanguageId","fileExtension","extname","toggleMode","delta","msg","alert","arg","positionNow","fallback","Event","_","listener","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","prev","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","register","ISuggestMemoryService","ICommandService","prioritySelector","Error","s1","s2","alias","precondition","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","secondary","mac","weight","_accessor","controller","noSelection","EditorAction","registerEditorAction","SuggestCommand","EditorCommand","registerEditorCommand","handler","x","acceptSelectedSuggestion","menuOpts","menuId","order","when","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","toNegated","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","resetWidgetSize","SuggestInlineCompletion","InlineCompletionResults","_suggestMemoryService","selectedIndex","first","Iterable","second","resolveCount","CompletionItemInsertTextRule","snippet","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","selectedSuggestionInfo","wordInfo","triggerCharacterInfo","_getTriggerCharacterInfo","leadingLineContents","_lastResult","canBeReused","newLineContext","acquire","providers","boostFullMatch","firstMatchCanBeWeak","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","Memory","name","topScore","preselect","NoMemory","LRUMemory","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","PrefixMemory","_trie","TernarySearchTree","findSubstr","forEach","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","_withStrategy","mode","overrideIdentifier","getLanguageIdAtPosition","resource","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","localityBonus","None","canComputeWordRanges","BracketSelectionRangeProvider","provideSelectionRanges","computeWordRanges","wordRanges","wordUntilPos","wordLines","isFalsyOrEmpty","binarySearch","bestWordRange","blockDistance","SYMBOL_ICON_ARRAY_FOREGROUND","foreground","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","registerThemingParticipant","collector","symbolIconArrayColor","getColor","addRule","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor"],"sourceRoot":""}