"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[203],{45092:function(e,n,t){t.r(n),t.d(n,{FoldingController:function(){return he},RangesLimitReporter:function(){return ce}});var i=t(74165),r=t(93433),o=t(37762),s=t(15671),a=t(43144),l=t(60136),d=t(27277),u=t(71049),g=t(7388),h=t(74146),c=t(89490),f=t(65096),v=t(31906),p=t(63021),m=t(49039),L=t(95253),_=t(98926),b=t(70133),y=t(19536),C=t(13880),N=t(32394),k=t(62204),R=function(){function e(n,t){(0,s.Z)(this,e),this._updateEventEmitter=new C.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=n,this._decorationProvider=t,this._regions=new N.MN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}return(0,a.Z)(e,[{key:"regions",get:function(){return this._regions}},{key:"textModel",get:function(){return this._textModel}},{key:"toggleCollapseState",value:function(e){var n=this;if(e.length){e=e.sort((function(e,n){return e.regionIndex-n.regionIndex}));var t={};this._decorationProvider.changeDecorations((function(i){var r,s=0,a=-1,l=-1,d=function(e){for(;s<e;){var t=n._regions.getEndLineNumber(s),r=n._regions.isCollapsed(s);if(t<=a){var o=0!==n.regions.getSource(s);i.changeDecorationOptions(n._editorDecorationIds[s],n._decorationProvider.getDecorationOption(r,t<=l,o))}r&&t>l&&(l=t),s++}},u=(0,o.Z)(e);try{for(u.s();!(r=u.n()).done;){var g=r.value.regionIndex,h=n._editorDecorationIds[g];if(h&&!t[h]){t[h]=!0,d(g);var c=!n._regions.isCollapsed(g);n._regions.setCollapsed(g,c),a=Math.max(a,n._regions.getEndLineNumber(g))}}}catch(f){u.e(f)}finally{u.f()}d(n._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}}},{key:"removeManualRanges",value:function(e){for(var n=new Array,t=function(n){var t,i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(!(r.startLineNumber>n.endLineNumber||n.startLineNumber>r.endLineNumber))return!0}}catch(s){i.e(s)}finally{i.f()}return!1},i=0;i<this._regions.length;i++){var r=this._regions.toFoldRange(i);0!==r.source&&t(r)||n.push(r)}this.updatePost(N.MN.fromFoldRanges(n))}},{key:"update",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=this._currentFoldedOrManualRanges(n),i=N.MN.sanitizeAndMerge(e,t,this._textModel.getLineCount());this.updatePost(N.MN.fromFoldRanges(i))}},{key:"updatePost",value:function(e){for(var n=this,t=[],i=-1,r=0,o=e.length;r<o;r++){var s=e.getStartLineNumber(r),a=e.getEndLineNumber(r),l=e.isCollapsed(r),d=0!==e.getSource(r),u={startLineNumber:s,startColumn:this._textModel.getLineMaxColumn(s),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:u,options:this._decorationProvider.getDecorationOption(l,a<=i,d)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations((function(e){return n._editorDecorationIds=e.deltaDecorations(n._editorDecorationIds,t)})),this._regions=e,this._updateEventEmitter.fire({model:this})}},{key:"_currentFoldedOrManualRanges",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(n,t){var i,r=(0,o.Z)(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;if(n<s&&s<=t)return!0}}catch(a){r.e(a)}finally{r.f()}return!1},t=[],i=0,r=this._regions.length;i<r;i++){var s=this.regions.isCollapsed(i),a=this.regions.getSource(i);if(s||0!==a){var l=this._regions.toFoldRange(i),d=this._textModel.getDecorationRange(this._editorDecorationIds[i]);d&&(s&&n(d.startLineNumber,d.endLineNumber)&&(s=!1),t.push({startLineNumber:d.startLineNumber,endLineNumber:d.endLineNumber,type:l.type,isCollapsed:s,source:a}))}}return t}},{key:"getMemento",value:function(){for(var e=this._currentFoldedOrManualRanges(),n=[],t=this._textModel.getLineCount(),i=0,r=e.length;i<r;i++){var o=e[i];if(!(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>t)){var s=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);n.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:s})}}return n.length>0?n:void 0}},{key:"applyMemento",value:function(e){var n,t;if(Array.isArray(e)){var i,r=[],s=this._textModel.getLineCount(),a=(0,o.Z)(e);try{for(a.s();!(i=a.n()).done;){var l=i.value;if(!(l.startLineNumber>=l.endLineNumber||l.startLineNumber<1||l.endLineNumber>s)){var d=this._getLinesChecksum(l.startLineNumber+1,l.endLineNumber);l.checksum&&d!==l.checksum||r.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:void 0,isCollapsed:null===(n=l.isCollapsed)||void 0===n||n,source:null!==(t=l.source)&&void 0!==t?t:0})}}}catch(g){a.e(g)}finally{a.f()}var u=N.MN.sanitizeAndMerge(this._regions,r,s);this.updatePost(N.MN.fromFoldRanges(u))}}},{key:"_getLinesChecksum",value:function(e,n){return(0,k.vp)(this._textModel.getLineContent(e)+this._textModel.getLineContent(n))%1e6}},{key:"dispose",value:function(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}},{key:"getAllRegionsAtLine",value:function(e,n){var t=[];if(this._regions)for(var i=this._regions.findRange(e),r=1;i>=0;){var o=this._regions.toRegion(i);n&&!n(o,r)||t.push(o),r++,i=o.parentIndex}return t}},{key:"getRegionAtLine",value:function(e){if(this._regions){var n=this._regions.findRange(e);if(n>=0)return this._regions.toRegion(n)}return null}},{key:"getRegionsInside",value:function(e,n){var t=[],i=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(n&&2===n.length)for(var o=[],s=i,a=this._regions.length;s<a;s++){var l=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<r))break;for(;o.length>0&&!l.containedBy(o[o.length-1]);)o.pop();o.push(l),n(l,o.length)&&t.push(l)}else for(var d=i,u=this._regions.length;d<u;d++){var g=this._regions.toRegion(d);if(!(this._regions.getStartLineNumber(d)<r))break;n&&!n(g)||t.push(g)}return t}}]),e}();function A(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,i=arguments.length>3?arguments[3]:void 0,s=[];if(i&&i.length>0){var a,l=(0,o.Z)(i);try{for(l.s();!(a=l.n()).done;){var d=a.value,u=e.getRegionAtLine(d);if(u&&(u.isCollapsed!==n&&s.push(u),t>1)){var g=e.getRegionsInside(u,(function(e,i){return e.isCollapsed!==n&&i<t}));s.push.apply(s,(0,r.Z)(g))}}}catch(c){l.e(c)}finally{l.f()}}else{var h=e.getRegionsInside(null,(function(e,i){return e.isCollapsed!==n&&i<t}));s.push.apply(s,(0,r.Z)(h))}e.toggleCollapseState(s)}function I(e,n,t,i){var s,a=[],l=(0,o.Z)(i);try{for(l.s();!(s=l.n()).done;){var d=s.value,u=e.getAllRegionsAtLine(d,(function(e,i){return e.isCollapsed!==n&&i<=t}));a.push.apply(a,(0,r.Z)(u))}}catch(g){l.e(g)}finally{l.f()}e.toggleCollapseState(a)}function x(e,n,t){var i,r=[],s=(0,o.Z)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value,l=e.getAllRegionsAtLine(a,void 0);l.length>0&&r.push(l[0])}}catch(u){s.e(u)}finally{s.f()}var d=e.getRegionsInside(null,(function(e){return r.every((function(n){return!n.containedBy(e)&&!e.containedBy(n)}))&&e.isCollapsed!==n}));e.toggleCollapseState(d)}function D(e,n,t){for(var i=e.textModel,r=e.regions,o=[],s=r.length-1;s>=0;s--)if(t!==r.isCollapsed(s)){var a=r.getStartLineNumber(s);n.test(i.getLineContent(a))&&o.push(r.toRegion(s))}e.toggleCollapseState(o)}function E(e,n,t){for(var i=e.regions,r=[],o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&n===i.getType(o)&&r.push(i.toRegion(o));e.toggleCollapseState(r)}var M=t(38102),S=t(17429),Z=t(42315),O=function(){function e(n){var t=this;(0,s.Z)(this,e),this._updateEventEmitter=new C.Q5,this._hasLineChanges=!1,this._foldingModel=n,this._foldingModelListener=n.onDidChange((function(e){return t.updateHiddenRanges()})),this._hiddenRanges=[],n.regions.length&&this.updateHiddenRanges()}return(0,a.Z)(e,[{key:"onDidChange",get:function(){return this._updateEventEmitter.event}},{key:"hiddenRanges",get:function(){return this._hiddenRanges}},{key:"notifyChangeModelContent",value:function(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some((function(e){return e.range.endLineNumber!==e.range.startLineNumber||0!==(0,Z.Q)(e.text)[0]})))}},{key:"updateHiddenRanges",value:function(){for(var e=!1,n=[],t=0,i=0,r=Number.MAX_VALUE,o=-1,s=this._foldingModel.regions;t<s.length;t++)if(s.isCollapsed(t)){var a=s.getStartLineNumber(t)+1,l=s.getEndLineNumber(t);r<=a&&l<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===a&&this._hiddenRanges[i].endLineNumber===l?(n.push(this._hiddenRanges[i]),i++):(e=!0,n.push(new S.e(a,1,l,1))),r=a,o=l)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(n)}},{key:"applyHiddenRanges",value:function(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}},{key:"hasRanges",value:function(){return this._hiddenRanges.length>0}},{key:"isHidden",value:function(e){return null!==F(this._hiddenRanges,e)}},{key:"adjustSelections",value:function(e){for(var n=this,t=!1,i=this._foldingModel.textModel,r=null,o=function(e){return r&&function(e,n){return e>=n.startLineNumber&&e<=n.endLineNumber}(e,r)||(r=F(n._hiddenRanges,e)),r?r.startLineNumber-1:null},s=0,a=e.length;s<a;s++){var l=e[s],d=o(l.startLineNumber);d&&(l=l.setStartPosition(d,i.getLineMaxColumn(d)),t=!0);var u=o(l.endLineNumber);u&&(l=l.setEndPosition(u,i.getLineMaxColumn(u)),t=!0),e[s]=l}return t}},{key:"dispose",value:function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}]),e}();function F(e,n){var t=(0,M.lG)(e,(function(e){return n<e.startLineNumber}))-1;return t>=0&&e[t].endLineNumber>=n?e[t]:null}var w=t(69220),P=t(18420),T=t(8022),U=t(77409),H=t(20329),G=t(78519),V=t(43980),X=t(87288),Q=t(41335),q=t(79730),B=(0,V.P6G)("editor.foldBackground",{light:(0,V.ZnX)(V.hEj,.3),dark:(0,V.ZnX)(V.hEj,.3),hcDark:null,hcLight:null},(0,P.NC)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,V.P6G)("editorGutter.foldingControlForeground",{dark:V.XZx,light:V.XZx,hcDark:V.XZx,hcLight:V.XZx},(0,P.NC)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));var j=(0,X.q5)("folding-expanded",U.l.chevronDown,(0,P.NC)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),W=(0,X.q5)("folding-collapsed",U.l.chevronRight,(0,P.NC)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),z=(0,X.q5)("folding-manual-collapsed",W,(0,P.NC)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Y=(0,X.q5)("folding-manual-expanded",j,(0,P.NC)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),K={color:(0,Q.EN)(B),position:H.F5.Inline},J=function(){function e(n){(0,s.Z)(this,e),this.editor=n,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}return(0,a.Z)(e,[{key:"getDecorationOption",value:function(n,t,i){return t?e.HIDDEN_RANGE_DECORATION:"never"===this.showFoldingControls?n?this.showFoldingHighlights?e.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:e.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:e.NO_CONTROLS_EXPANDED_RANGE_DECORATION:n?i?this.showFoldingHighlights?e.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?e.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?i?e.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?e.MANUALLY_EXPANDED_VISUAL_DECORATION:e.EXPANDED_VISUAL_DECORATION}},{key:"changeDecorations",value:function(e){return this.editor.changeDecorations(e)}},{key:"removeDecorations",value:function(e){this.editor.removeDecorations(e)}}]),e}();J.COLLAPSED_VISUAL_DECORATION=G.qx.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(W)}),J.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=G.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:K,isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(W)}),J.MANUALLY_COLLAPSED_VISUAL_DECORATION=G.qx.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(z)}),J.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=G.qx.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:K,isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(z)}),J.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=G.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0}),J.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=G.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:K,isWholeLine:!0}),J.EXPANDED_VISUAL_DECORATION=G.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+q.k.asClassName(j)}),J.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=G.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(j)}),J.MANUALLY_EXPANDED_VISUAL_DECORATION=G.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+q.k.asClassName(Y)}),J.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=G.qx.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:q.k.asClassName(Y)}),J.NO_CONTROLS_EXPANDED_RANGE_DECORATION=G.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),J.HIDDEN_RANGE_DECORATION=G.qx.register({description:"folding-hidden-range-decoration",stickiness:1});var $=t(21039),ee=t(49431),ne=t(68200),te=t(48497),ie=t(65441),re=t(99740),oe=t(38821),se=t(26246),ae=t(77819),le=function(e,n,t,i){var r,o=arguments.length,s=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,n,t,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(n,t,s):r(n,t))||s);return o>3&&s&&Object.defineProperty(n,t,s),s},de=function(e,n){return function(t,i){n(t,i,e)}},ue=function(e,n,t,i){return new(t||(t=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(n){o(n)}}function a(e){try{l(i.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}l((i=i.apply(e,n||[])).next())}))},ge=new T.uy("foldingEnabled",!1),he=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(e,i,r,o,a,l){var d;(0,s.Z)(this,t),(d=n.call(this)).contextKeyService=i,d.languageConfigurationService=r,d.languageFeaturesService=l,d.localToDispose=d._register(new f.SL),d.editor=e,d._foldingLimitReporter=new ce(e);var u=d.editor.getOptions();return d._isEnabled=u.get(41),d._useFoldingProviders="indentation"!==u.get(42),d._unfoldOnClickAfterEndOfLine=u.get(46),d._restoringViewState=!1,d._currentModelHasFoldedImports=!1,d._foldingImportsByDefault=u.get(44),d.updateDebounceInfo=a.for(l.foldingRangeProvider,"Folding",{min:200}),d.foldingModel=null,d.hiddenRangeModel=null,d.rangeProvider=null,d.foldingRegionPromise=null,d.foldingModelPromise=null,d.updateScheduler=null,d.cursorChangedScheduler=null,d.mouseDownInfo=null,d.foldingDecorationProvider=new J(e),d.foldingDecorationProvider.showFoldingControls=u.get(106),d.foldingDecorationProvider.showFoldingHighlights=u.get(43),d.foldingEnabled=ge.bindTo(d.contextKeyService),d.foldingEnabled.set(d._isEnabled),d._register(d.editor.onDidChangeModel((function(){return d.onModelChanged()}))),d._register(d.editor.onDidChangeConfiguration((function(e){if(e.hasChanged(41)&&(d._isEnabled=d.editor.getOptions().get(41),d.foldingEnabled.set(d._isEnabled),d.onModelChanged()),e.hasChanged(45)&&d.onModelChanged(),e.hasChanged(106)||e.hasChanged(43)){var n=d.editor.getOptions();d.foldingDecorationProvider.showFoldingControls=n.get(106),d.foldingDecorationProvider.showFoldingHighlights=n.get(43),d.triggerFoldingModelChanged()}e.hasChanged(42)&&(d._useFoldingProviders="indentation"!==d.editor.getOptions().get(42),d.onFoldingStrategyChanged()),e.hasChanged(46)&&(d._unfoldOnClickAfterEndOfLine=d.editor.getOptions().get(46)),e.hasChanged(44)&&(d._foldingImportsByDefault=d.editor.getOptions().get(44))}))),d.onModelChanged(),d}return(0,a.Z)(t,[{key:"saveViewState",value:function(){var e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){var n=this.foldingModel.getMemento(),t=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:n,lineCount:e.getLineCount(),provider:t,foldedImports:this._currentModelHasFoldedImports}}}},{key:"restoreViewState",value:function(e){var n=this.editor.getModel();if(n&&this._isEnabled&&!n.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}},{key:"onModelChanged",value:function(){var e=this;this.localToDispose.clear();var n=this.editor.getModel();this._isEnabled&&n&&!n.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new R(n,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new O(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((function(n){return e.onHiddenRangesChanges(n)}))),this.updateScheduler=new u.vp(this.updateDebounceInfo.get(n)),this.cursorChangedScheduler=new u.pY((function(){return e.revealCursor()}),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelContent((function(n){return e.onDidChangeModelContent(n)}))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((function(){return e.onCursorPositionChanged()}))),this.localToDispose.add(this.editor.onMouseDown((function(n){return e.onEditorMouseDown(n)}))),this.localToDispose.add(this.editor.onMouseUp((function(n){return e.onEditorMouseUp(n)}))),this.localToDispose.add({dispose:function(){var n,t;e.foldingRegionPromise&&(e.foldingRegionPromise.cancel(),e.foldingRegionPromise=null),null===(n=e.updateScheduler)||void 0===n||n.cancel(),e.updateScheduler=null,e.foldingModel=null,e.foldingModelPromise=null,e.hiddenRangeModel=null,e.cursorChangedScheduler=null,null===(t=e.rangeProvider)||void 0===t||t.dispose(),e.rangeProvider=null}}),this.triggerFoldingModelChanged())}},{key:"onFoldingStrategyChanged",value:function(){var e;null===(e=this.rangeProvider)||void 0===e||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}},{key:"getRangeProvider",value:function(e){var n=this;if(this.rangeProvider)return this.rangeProvider;var i=new w.aI(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=i,this._useFoldingProviders&&this.foldingModel){var r=t.getFoldingRangeProviders(this.languageFeaturesService,e);r.length>0&&(this.rangeProvider=new $.e(e,r,(function(){return n.triggerFoldingModelChanged()}),this._foldingLimitReporter,i))}return this.rangeProvider}},{key:"getFoldingModel",value:function(){return this.foldingModelPromise}},{key:"onDidChangeModelContent",value:function(e){var n;null===(n=this.hiddenRangeModel)||void 0===n||n.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}},{key:"triggerFoldingModelChanged",value:function(){var e=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((function(){var n=e.foldingModel;if(!n)return null;var t=new te.G(!0),i=e.getRangeProvider(n.textModel),r=e.foldingRegionPromise=(0,u.PG)((function(e){return i.compute(e)}));return r.then((function(i){if(i&&r===e.foldingRegionPromise){var o;if(e._foldingImportsByDefault&&!e._currentModelHasFoldedImports){var s=i.setCollapsedAllOfType(b.AD.Imports.value,!0);s&&(o=m.Z.capture(e.editor),e._currentModelHasFoldedImports=s)}var a=e.editor.getSelections(),l=a?a.map((function(e){return e.startLineNumber})):[];n.update(i,l),null===o||void 0===o||o.restore(e.editor);var d=e.updateDebounceInfo.update(n.textModel,t.elapsed());e.updateScheduler&&(e.updateScheduler.defaultDelay=d)}return n}))})).then(void 0,(function(e){return(0,h.dL)(e),null})))}},{key:"onHiddenRangesChanges",value:function(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){var n=this.editor.getSelections();n&&this.hiddenRangeModel.adjustSelections(n)&&this.editor.setSelections(n)}this.editor.setHiddenAreas(e,this)}},{key:"onCursorPositionChanged",value:function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}},{key:"revealCursor",value:function(){var e=this,n=this.getFoldingModel();n&&n.then((function(n){if(n){var t=e.editor.getSelections();if(t&&t.length>0){var i,s=[],a=(0,o.Z)(t);try{var l=function(){var t=i.value.selectionStartLineNumber;e.hiddenRangeModel&&e.hiddenRangeModel.isHidden(t)&&s.push.apply(s,(0,r.Z)(n.getAllRegionsAtLine(t,(function(e){return e.isCollapsed&&t>e.startLineNumber}))))};for(a.s();!(i=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}s.length&&(n.toggleCollapseState(s),e.reveal(t[0].getPosition()))}}})).then(void 0,h.dL)}},{key:"onEditorMouseDown",value:function(e){if(this.mouseDownInfo=null,this.hiddenRangeModel&&e.target&&e.target.range&&(e.event.leftButton||e.event.middleButton)){var n=e.target.range,t=!1;switch(e.target.type){case 4:var i=e.target.detail,r=e.target.element.offsetLeft;if(i.offsetX-r<5)return;t=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges())if(!e.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){var o=this.editor.getModel();if(o&&n.startColumn===o.getLineMaxColumn(n.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:n.startLineNumber,iconClicked:t}}}},{key:"onEditorMouseUp",value:function(e){var n=this.foldingModel;if(n&&this.mouseDownInfo&&e.target){var t=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,r=e.target.range;if(r&&r.startLineNumber===t){if(i){if(4!==e.target.type)return}else{var s=this.editor.getModel();if(!s||r.startColumn!==s.getLineMaxColumn(t))return}var a=n.getRegionAtLine(t);if(a&&a.startLineNumber===t){var l=a.isCollapsed;if(i||l){var d=[];if(e.event.altKey){var u,g=n.getRegionsInside(null,(function(e){return!e.containedBy(a)&&!a.containedBy(e)})),h=(0,o.Z)(g);try{for(h.s();!(u=h.n()).done;){var c=u.value;c.isCollapsed&&d.push(c)}}catch(L){h.e(L)}finally{h.f()}0===d.length&&(d=g)}else{var f=e.event.middleButton||e.event.shiftKey;if(f){var v,p=(0,o.Z)(n.getRegionsInside(a));try{for(p.s();!(v=p.n()).done;){var m=v.value;m.isCollapsed===l&&d.push(m)}}catch(L){p.e(L)}finally{p.f()}}!l&&f&&0!==d.length||d.push(a)}n.toggleCollapseState(d),this.reveal({lineNumber:t,column:1})}}}}}},{key:"reveal",value:function(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}}],[{key:"get",value:function(e){return e.getContribution(t.ID)}},{key:"getFoldingRangeProviders",value:function(e,n){var i,r,o=e.foldingRangeProvider.ordered(n);return null!==(r=null===(i=t._foldingRangeSelector)||void 0===i?void 0:i.call(t,o,n))&&void 0!==r?r:o}}]),t}(f.JT);he.ID="editor.contrib.folding",he=le([de(1,T.i6),de(2,y.c_),de(3,ee.lT),de(4,ne.A),de(5,ie.p)],he);var ce=function(){function e(n){(0,s.Z)(this,e),this.editor=n,this._onDidChange=new C.Q5,this._computed=0,this._limited=!1}return(0,a.Z)(e,[{key:"limit",get:function(){return this.editor.getOptions().get(45)}},{key:"update",value:function(e,n){e===this._computed&&n===this._limited||(this._computed=e,this._limited=n,this._onDidChange.fire())}}]),e}(),fe=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"runEditorCommand",value:function(e,n,t){var i=this,r=e.get(y.c_),o=he.get(n);if(o){var s=o.getFoldingModel();return s?(this.reportTelemetry(e,n),s.then((function(e){if(e){i.invoke(o,e,n,t,r);var s=n.getSelection();s&&o.reveal(s.getStartPosition())}}))):void 0}}},{key:"getSelectedLines",value:function(e){var n=e.getSelections();return n?n.map((function(e){return e.startLineNumber})):[]}},{key:"getLineNumbers",value:function(e,n){return e&&e.selectionLines?e.selectionLines.map((function(e){return e+1})):this.getSelectedLines(n)}},{key:"run",value:function(e,n){}}]),t}(L.R6);function ve(e){if(!p.o8(e)){if(!p.Kn(e))return!1;var n=e;if(!p.o8(n.levels)&&!p.hj(n.levels))return!1;if(!p.o8(n.direction)&&!p.HD(n.direction))return!1;if(!p.o8(n.selectionLines)&&(!Array.isArray(n.selectionLines)||!n.selectionLines.every(p.hj)))return!1}return!0}var pe=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.unfold",label:P.NC("unfoldAction.label","Unfold"),alias:"Unfold",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ve,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i){var r=i&&i.levels||1,o=this.getLineNumbers(i,t);i&&"up"===i.direction?I(n,!1,r,o):A(n,!1,r,o)}}]),t}(fe),me=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.unfoldRecursively",label:P.NC("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2142),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i){A(n,!1,Number.MAX_VALUE,this.getSelectedLines(t))}}]),t}(fe),Le=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.fold",label:P.NC("foldAction.label","Fold"),alias:"Fold",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ve,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i){var r=this.getLineNumbers(i,t),s=i&&i.levels,a=i&&i.direction;"number"!==typeof s&&"string"!==typeof a?function(e,n,t){var i,r=[],s=(0,o.Z)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value,l=e.getAllRegionsAtLine(a,(function(e){return e.isCollapsed!==n}));l.length>0&&r.push(l[0])}}catch(d){s.e(d)}finally{s.f()}e.toggleCollapseState(r)}(n,!0,r):"up"===a?I(n,!0,s||1,r):A(n,!0,s||1,r)}}]),t}(fe),_e=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.toggleFold",label:P.NC("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2090),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){!function(e,n,t){var i,s=[],a=(0,o.Z)(t);try{var l=function(){var t=i.value,o=e.getRegionAtLine(t);if(o){var a=!o.isCollapsed;if(s.push(o),n>1){var l=e.getRegionsInside(o,(function(e,t){return e.isCollapsed!==a&&t<n}));s.push.apply(s,(0,r.Z)(l))}}};for(a.s();!(i=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}e.toggleCollapseState(s)}(n,1,this.getSelectedLines(t))}}]),t}(fe),be=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.foldRecursively",label:P.NC("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2140),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i=this.getSelectedLines(t);A(n,!0,Number.MAX_VALUE,i)}}]),t}(fe),ye=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.foldAllBlockComments",label:P.NC("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2138),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i,r){if(n.regions.hasTypes())E(n,b.AD.Comment.value,!0);else{var o=t.getModel();if(!o)return;var s=r.getLanguageConfiguration(o.getLanguageId()).comments;if(s&&s.blockCommentStartToken)D(n,new RegExp("^\\s*"+(0,v.ec)(s.blockCommentStartToken)),!0)}}}]),t}(fe),Ce=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.foldAllMarkerRegions",label:P.NC("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2077),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i,r){if(n.regions.hasTypes())E(n,b.AD.Region.value,!0);else{var o=t.getModel();if(!o)return;var s=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(s&&s.markers&&s.markers.start)D(n,new RegExp(s.markers.start),!0)}}}]),t}(fe),Ne=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.unfoldAllMarkerRegions",label:P.NC("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2078),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t,i,r){if(n.regions.hasTypes())E(n,b.AD.Region.value,!1);else{var o=t.getModel();if(!o)return;var s=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(s&&s.markers&&s.markers.start)D(n,new RegExp(s.markers.start),!1)}}}]),t}(fe),ke=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.foldAllExcept",label:P.NC("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2136),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){x(n,!0,this.getSelectedLines(t))}}]),t}(fe),Re=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.unfoldAllExcept",label:P.NC("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2134),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){x(n,!1,this.getSelectedLines(t))}}]),t}(fe),Ae=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.foldAll",label:P.NC("foldAllAction.label","Fold All"),alias:"Fold All",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2069),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){A(n,!0)}}]),t}(fe),Ie=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.unfoldAll",label:P.NC("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2088),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){A(n,!1)}}]),t}(fe),xe=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"getFoldingLevel",value:function(){return parseInt(this.id.substr(t.ID_PREFIX.length))}},{key:"invoke",value:function(e,n,t){!function(e,n,t,i){var r=e.getRegionsInside(null,(function(e,r){return r===n&&e.isCollapsed!==t&&!i.some((function(n){return e.containsLine(n)}))}));e.toggleCollapseState(r)}(n,this.getFoldingLevel(),!0,this.getSelectedLines(t))}}]),t}(fe);xe.ID_PREFIX="editor.foldLevel",xe.ID=function(e){return xe.ID_PREFIX+e};var De=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.gotoParentFold",label:P.NC("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i=this.getSelectedLines(t);if(i.length>0){var r=function(e,n){var t=null,i=n.getRegionAtLine(e);if(null!==i&&e===(t=i.startLineNumber)){var r=i.parentIndex;t=-1!==r?n.regions.getStartLineNumber(r):null}return t}(i[0],n);null!==r&&t.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(fe),Ee=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.gotoPreviousFold",label:P.NC("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i=this.getSelectedLines(t);if(i.length>0){var r=function(e,n){var t=n.getRegionAtLine(e);if(null!==t&&t.startLineNumber===e){if(e!==t.startLineNumber)return t.startLineNumber;var i=t.parentIndex,r=0;for(-1!==i&&(r=n.regions.getStartLineNumber(t.parentIndex));null!==t;){if(!(t.regionIndex>0))return null;if((t=n.regions.toRegion(t.regionIndex-1)).startLineNumber<=r)return null;if(t.parentIndex===i)return t.startLineNumber}}else if(n.regions.length>0)for(t=n.regions.toRegion(n.regions.length-1);null!==t;){if(t.startLineNumber<e)return t.startLineNumber;t=t.regionIndex>0?n.regions.toRegion(t.regionIndex-1):null}return null}(i[0],n);null!==r&&t.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(fe),Me=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.gotoNextFold",label:P.NC("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i=this.getSelectedLines(t);if(i.length>0){var r=function(e,n){var t=n.getRegionAtLine(e);if(null!==t&&t.startLineNumber===e){var i=t.parentIndex,r=0;if(-1!==i)r=n.regions.getEndLineNumber(t.parentIndex);else{if(0===n.regions.length)return null;r=n.regions.getEndLineNumber(n.regions.length-1)}for(;null!==t;){if(!(t.regionIndex<n.regions.length))return null;if((t=n.regions.toRegion(t.regionIndex+1)).startLineNumber>=r)return null;if(t.parentIndex===i)return t.startLineNumber}}else if(n.regions.length>0)for(t=n.regions.toRegion(0);null!==t;){if(t.startLineNumber>e)return t.startLineNumber;t=t.regionIndex<n.regions.length?n.regions.toRegion(t.regionIndex+1):null}return null}(i[0],n);null!==r&&t.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(fe),Se=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.createFoldingRangeFromSelection",label:P.NC("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2135),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i,r=[],s=t.getSelections();if(s){var a,l=(0,o.Z)(s);try{for(l.s();!(a=l.n()).done;){var d=a.value,u=d.endLineNumber;1===d.endColumn&&--u,u>d.startLineNumber&&(r.push({startLineNumber:d.startLineNumber,endLineNumber:u,type:void 0,isCollapsed:!0,source:1}),t.setSelection({startLineNumber:d.startLineNumber,startColumn:1,endLineNumber:d.startLineNumber,endColumn:1}))}}catch(h){l.e(h)}finally{l.f()}if(r.length>0){r.sort((function(e,n){return e.startLineNumber-n.startLineNumber}));var g=N.MN.sanitizeAndMerge(n.regions,r,null===(i=t.getModel())||void 0===i?void 0:i.getLineCount());n.updatePost(N.MN.fromFoldRanges(g))}}}}]),t}(fe),Ze=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){return(0,s.Z)(this,t),n.call(this,{id:"editor.removeManualFoldingRanges",label:P.NC("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2137),weight:100}})}return(0,a.Z)(t,[{key:"invoke",value:function(e,n,t){var i=t.getSelections();if(i){var r,s=[],a=(0,o.Z)(i);try{for(a.s();!(r=a.n()).done;){var l=r.value,d=l.startLineNumber,u=l.endLineNumber;s.push(u>=d?{startLineNumber:d,endLineNumber:u}:{endLineNumber:u,startLineNumber:d})}}catch(g){a.e(g)}finally{a.f()}n.removeManualRanges(s),e.triggerFoldingModelChanged()}}}]),t}(fe);(0,L._K)(he.ID,he,0),(0,L.Qr)(pe),(0,L.Qr)(me),(0,L.Qr)(Le),(0,L.Qr)(be),(0,L.Qr)(Ae),(0,L.Qr)(Ie),(0,L.Qr)(ye),(0,L.Qr)(Ce),(0,L.Qr)(Ne),(0,L.Qr)(ke),(0,L.Qr)(Re),(0,L.Qr)(_e),(0,L.Qr)(De),(0,L.Qr)(Ee),(0,L.Qr)(Me),(0,L.Qr)(Se),(0,L.Qr)(Ze);for(var Oe=1;Oe<=7;Oe++)(0,L.QG)(new xe({id:xe.ID(Oe),label:P.NC("foldLevelAction.label","Fold Level {0}",Oe),alias:"Fold Level ".concat(Oe),precondition:ge,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,c.gx)(2089,2048|21+Oe),weight:100}}));re.P.registerCommand("_executeFoldingRangeProvider",(function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return ue(this,void 0,void 0,(0,i.Z)().mark((function n(){var r,o,s,a,l,d,u,c,f,v,p,m,L,_;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=t[0])instanceof oe.o){n.next=3;break}throw(0,h.b1)();case 3:if(o=e.get(ie.p),s=e.get(se.q).getModel(r)){n.next=7;break}throw(0,h.b1)();case 7:if((a=e.get(ae.Ui)).getValue("editor.folding",{resource:r})){n.next=10;break}return n.abrupt("return",[]);case 10:return l=e.get(y.c_),d=a.getValue("editor.foldingStrategy",{resource:r}),n.t0=function(e,n){},u={get limit(){return a.getValue("editor.foldingMaximumRegions",{resource:r})},update:n.t0},c=new w.aI(s,l,u),f=c,"indentation"!==d&&(v=he.getFoldingRangeProviders(o,s)).length&&(f=new $.e(s,v,(function(){}),u,c)),n.next=19,f.compute(g.T.None);case 19:if(p=n.sent,m=[],n.prev=21,p)for(L=0;L<p.length;L++)_=p.getType(L),m.push({start:p.getStartLineNumber(L),end:p.getEndLineNumber(L),kind:_?b.AD.fromValue(_):void 0});return n.abrupt("return",m);case 24:return n.prev=24,f.dispose(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[21,,24,27]])})))}))},32394:function(e,n,t){t.d(n,{MN:function(){return g},Xl:function(){return l}});var i,r=t(15671),o=t(43144),s=t(4942),a=(i={},(0,s.Z)(i,0," "),(0,s.Z)(i,1,"u"),(0,s.Z)(i,2,"r"),i),l=16777215,d=4278190080,u=function(){function e(n){(0,r.Z)(this,e);var t=Math.ceil(n/32);this._states=new Uint32Array(t)}return(0,o.Z)(e,[{key:"get",value:function(e){var n=e/32|0,t=e%32;return 0!==(this._states[n]&1<<t)}},{key:"set",value:function(e,n){var t=e/32|0,i=e%32,r=this._states[t];this._states[t]=n?r|1<<i:r&~(1<<i)}}]),e}(),g=function(){function e(n,t,i){if((0,r.Z)(this,e),n.length!==t.length||n.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=n,this._endIndexes=t,this._collapseStates=new u(n.length),this._userDefinedStates=new u(n.length),this._recoveredStates=new u(n.length),this._types=i,this._parentsComputed=!1}return(0,o.Z)(e,[{key:"ensureParentIndices",value:function(){var e=this;if(!this._parentsComputed){this._parentsComputed=!0;for(var n=[],t=function(t,i){var r=n[n.length-1];return e.getStartLineNumber(r)<=t&&e.getEndLineNumber(r)>=i},i=0,r=this._startIndexes.length;i<r;i++){var o=this._startIndexes[i],s=this._endIndexes[i];if(o>l||s>l)throw new Error("startLineNumber or endLineNumber must not exceed "+l);for(;n.length>0&&!t(o,s);)n.pop();var a=n.length>0?n[n.length-1]:-1;n.push(i),this._startIndexes[i]=o+((255&a)<<24),this._endIndexes[i]=s+((65280&a)<<16)}}}},{key:"length",get:function(){return this._startIndexes.length}},{key:"getStartLineNumber",value:function(e){return this._startIndexes[e]&l}},{key:"getEndLineNumber",value:function(e){return this._endIndexes[e]&l}},{key:"getType",value:function(e){return this._types?this._types[e]:void 0}},{key:"hasTypes",value:function(){return!!this._types}},{key:"isCollapsed",value:function(e){return this._collapseStates.get(e)}},{key:"setCollapsed",value:function(e,n){this._collapseStates.set(e,n)}},{key:"isUserDefined",value:function(e){return this._userDefinedStates.get(e)}},{key:"setUserDefined",value:function(e,n){return this._userDefinedStates.set(e,n)}},{key:"isRecovered",value:function(e){return this._recoveredStates.get(e)}},{key:"setRecovered",value:function(e,n){return this._recoveredStates.set(e,n)}},{key:"getSource",value:function(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}},{key:"setSource",value:function(e,n){1===n?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):2===n?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}},{key:"setCollapsedAllOfType",value:function(e,n){var t=!1;if(this._types)for(var i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,n),t=!0);return t}},{key:"toRegion",value:function(e){return new h(this,e)}},{key:"getParentIndex",value:function(e){this.ensureParentIndices();var n=((this._startIndexes[e]&d)>>>24)+((this._endIndexes[e]&d)>>>16);return 65535===n?-1:n}},{key:"contains",value:function(e,n){return this.getStartLineNumber(e)<=n&&this.getEndLineNumber(e)>=n}},{key:"findIndex",value:function(e){var n=0,t=this._startIndexes.length;if(0===t)return-1;for(;n<t;){var i=Math.floor((n+t)/2);e<this.getStartLineNumber(i)?t=i:n=i+1}return n-1}},{key:"findRange",value:function(e){var n=this.findIndex(e);if(n>=0){if(this.getEndLineNumber(n)>=e)return n;for(n=this.getParentIndex(n);-1!==n;){if(this.contains(n,e))return n;n=this.getParentIndex(n)}}return-1}},{key:"toString",value:function(){for(var e=[],n=0;n<this.length;n++)e[n]="[".concat(a[this.getSource(n)]).concat(this.isCollapsed(n)?"+":"-","] ").concat(this.getStartLineNumber(n),"/").concat(this.getEndLineNumber(n));return e.join(", ")}},{key:"toFoldRange",value:function(e){return{startLineNumber:this._startIndexes[e]&l,endLineNumber:this._endIndexes[e]&l,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}}],[{key:"fromFoldRanges",value:function(n){for(var t=n.length,i=new Uint32Array(t),r=new Uint32Array(t),o=[],s=!1,a=0;a<t;a++){var l=n[a];i[a]=l.startLineNumber,r[a]=l.endLineNumber,o.push(l.type),l.type&&(s=!0)}s||(o=void 0);for(var d=new e(i,r,o),u=0;u<t;u++)n[u].isCollapsed&&d.setCollapsed(u,!0),d.setSource(u,n[u].source);return d}},{key:"sanitizeAndMerge",value:function(e,n,t){t=null!==t&&void 0!==t?t:Number.MAX_VALUE;for(var i,r=function(e,n){return Array.isArray(e)?function(t){return t<n?e[t]:void 0}:function(t){return t<n?e.toFoldRange(t):void 0}},o=r(e,e.length),s=r(n,n.length),a=0,l=0,d=o(0),u=s(0),g=[],h=0,c=[];d||u;){var f=void 0;if(u&&(!d||d.startLineNumber>=u.startLineNumber))d&&d.startLineNumber===u.startLineNumber?(1===u.source?f=u:((f=d).isCollapsed=u.isCollapsed&&d.endLineNumber===u.endLineNumber,f.source=0),d=o(++a)):(f=u,u.isCollapsed&&0===u.source&&(f.source=2)),u=s(++l);else{for(var v=l,p=u;;){if(!p||p.startLineNumber>d.endLineNumber){f=d;break}if(1===p.source&&p.endLineNumber>d.endLineNumber)break;p=s(++v)}d=o(++a)}if(f){for(;i&&i.endLineNumber<f.startLineNumber;)i=g.pop();f.endLineNumber>f.startLineNumber&&f.startLineNumber>h&&f.endLineNumber<=t&&(!i||i.endLineNumber>=f.endLineNumber)&&(c.push(f),h=f.startLineNumber,i&&g.push(i),i=f)}}return c}}]),e}(),h=function(){function e(n,t){(0,r.Z)(this,e),this.ranges=n,this.index=t}return(0,o.Z)(e,[{key:"startLineNumber",get:function(){return this.ranges.getStartLineNumber(this.index)}},{key:"endLineNumber",get:function(){return this.ranges.getEndLineNumber(this.index)}},{key:"regionIndex",get:function(){return this.index}},{key:"parentIndex",get:function(){return this.ranges.getParentIndex(this.index)}},{key:"isCollapsed",get:function(){return this.ranges.isCollapsed(this.index)}},{key:"containedBy",value:function(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}},{key:"containsLine",value:function(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}]),e}()},69220:function(e,n,t){t.d(n,{aI:function(){return a}});var i=t(15671),r=t(43144),o=t(23291),s=t(32394),a=function(){function e(n,t,r){(0,i.Z)(this,e),this.editorModel=n,this.languageConfigurationService=t,this.foldingRangesLimit=r,this.id="indent"}return(0,r.Z)(e,[{key:"dispose",value:function(){}},{key:"compute",value:function(e){var n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,t=n&&!!n.offSide,i=n&&n.markers;return Promise.resolve(function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,r=e.getOptions().tabSize,s=new l(i),a=void 0;t&&(a=new RegExp("(".concat(t.start.source,")|(?:").concat(t.end.source,")")));var u=[],g=e.getLineCount()+1;u.push({indent:-1,endAbove:g,line:g});for(var h=e.getLineCount();h>0;h--){var c=e.getLineContent(h),f=(0,o.q)(c,r),v=u[u.length-1];if(-1!==f){var p=void 0;if(a&&(p=c.match(a))){if(!p[1]){u.push({indent:-2,endAbove:h,line:h});continue}for(var m=u.length-1;m>0&&-2!==u[m].indent;)m--;if(m>0){u.length=m+1,v=u[m],s.insertFirst(h,v.line,f),v.line=h,v.indent=f,v.endAbove=h;continue}}if(v.indent>f){do{u.pop(),v=u[u.length-1]}while(v.indent>f);var L=v.endAbove-1;L-h>=1&&s.insertFirst(h,L,f)}v.indent===f?v.endAbove=h:u.push({indent:f,endAbove:h,line:h})}else n&&(v.endAbove=h)}return s.toIndentRanges(e)}(this.editorModel,t,i,this.foldingRangesLimit))}}]),e}(),l=function(){function e(n){(0,i.Z)(this,e),this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=n}return(0,r.Z)(e,[{key:"insertFirst",value:function(e,n,t){if(!(e>s.Xl||n>s.Xl)){var i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=n,this._length++,t<1e3&&(this._indentOccurrences[t]=(this._indentOccurrences[t]||0)+1)}}},{key:"toIndentRanges",value:function(e){var n=this._foldingRangesLimit.limit;if(this._length<=n){this._foldingRangesLimit.update(this._length,!1);for(var t=new Uint32Array(this._length),i=new Uint32Array(this._length),r=this._length-1,a=0;r>=0;r--,a++)t[a]=this._startIndexes[r],i[a]=this._endIndexes[r];return new s.MN(t,i)}this._foldingRangesLimit.update(this._length,n);for(var l=0,d=this._indentOccurrences.length,u=0;u<this._indentOccurrences.length;u++){var g=this._indentOccurrences[u];if(g){if(g+l>n){d=u;break}l+=g}}for(var h=e.getOptions().tabSize,c=new Uint32Array(n),f=new Uint32Array(n),v=this._length-1,p=0;v>=0;v--){var m=this._startIndexes[v],L=e.getLineContent(m),_=(0,o.q)(L,h);(_<d||_===d&&l++<n)&&(c[p]=m,f[p]=this._endIndexes[v],p++)}return new s.MN(c,f)}}]),e}(),d={limit:5e3,update:function(){}}},21039:function(e,n,t){t.d(n,{e:function(){return u}});var i=t(37762),r=t(15671),o=t(43144),s=t(74146),a=t(65096),l=t(32394),d={},u=function(){function e(n,t,o,s,l){(0,r.Z)(this,e),this.editorModel=n,this.providers=t,this.handleFoldingRangesChange=o,this.foldingRangesLimit=s,this.fallbackRangeProvider=l,this.id="syntax",this.disposables=new a.SL,l&&this.disposables.add(l);var d,u=(0,i.Z)(t);try{for(u.s();!(d=u.n()).done;){var g=d.value;"function"===typeof g.onDidChange&&this.disposables.add(g.onDidChange(o))}}catch(h){u.e(h)}finally{u.f()}}return(0,o.Z)(e,[{key:"compute",value:function(e){var n=this;return function(e,n,t){var r=null,o=e.map((function(e,o){return Promise.resolve(e.provideFoldingRanges(n,d,t)).then((function(e){if(!t.isCancellationRequested&&Array.isArray(e)){Array.isArray(r)||(r=[]);var s,a=n.getLineCount(),l=(0,i.Z)(e);try{for(l.s();!(s=l.n()).done;){var d=s.value;d.start>0&&d.end>d.start&&d.end<=a&&r.push({start:d.start,end:d.end,rank:o,kind:d.kind})}}catch(u){l.e(u)}finally{l.f()}}}),s.Cp)}));return Promise.all(o).then((function(e){return r}))}(this.providers,this.editorModel,e).then((function(t){var r,o;return t?function(e,n){var t,r=e.sort((function(e,n){var t=e.start-n.start;return 0===t&&(t=e.rank-n.rank),t})),o=new g(n),s=void 0,a=[],l=(0,i.Z)(r);try{for(l.s();!(t=l.n()).done;){var d=t.value;if(s){if(d.start>s.start)if(d.end<=s.end)a.push(s),s=d,o.add(d.start,d.end,d.kind&&d.kind.value,a.length);else{if(d.start>s.end){do{s=a.pop()}while(s&&d.start>s.end);s&&a.push(s),s=d}o.add(d.start,d.end,d.kind&&d.kind.value,a.length)}}else s=d,o.add(d.start,d.end,d.kind&&d.kind.value,a.length)}}catch(u){l.e(u)}finally{l.f()}return o.toIndentRanges()}(t,n.foldingRangesLimit):null!==(o=null===(r=n.fallbackRangeProvider)||void 0===r?void 0:r.compute(e))&&void 0!==o?o:null}))}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();var g=function(){function e(n){(0,r.Z)(this,e),this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=n}return(0,o.Z)(e,[{key:"add",value:function(e,n,t,i){if(!(e>l.Xl||n>l.Xl)){var r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=n,this._nestingLevels[r]=i,this._types[r]=t,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}}},{key:"toIndentRanges",value:function(){var e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);for(var n=new Uint32Array(this._length),t=new Uint32Array(this._length),i=0;i<this._length;i++)n[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new l.MN(n,t,this._types)}this._foldingRangesLimit.update(this._length,e);for(var r=0,o=this._nestingLevelCounts.length,s=0;s<this._nestingLevelCounts.length;s++){var a=this._nestingLevelCounts[s];if(a){if(a+r>e){o=s;break}r+=a}}for(var d=new Uint32Array(e),u=new Uint32Array(e),g=[],h=0,c=0;h<this._length;h++){var f=this._nestingLevels[h];(f<o||f===o&&r++<e)&&(d[c]=this._startIndexes[h],u[c]=this._endIndexes[h],g[c]=this._types[h],c++)}return new l.MN(d,u,g)}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.cb843302.33d51f76.js.map