"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[596],{59509:function(e,t,n){n.r(t),n.d(t,{DragAndDropController:function(){return y}});var r=n(15671),i=n(43144),o=n(11752),s=n(61120),a=n(60136),u=n(27277),c=n(65096),l=n(90650),d=n(95253),p=n(65631),h=n(17429),f=n(96601),v=n(78519),g=function(){function e(t,n,i){(0,r.Z)(this,e),this.selection=t,this.targetPosition=n,this.copy=i,this.targetSelection=null}return(0,i.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new h.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new f.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new f.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function m(e){return l.dz?e.altKey:e.ctrlKey}var y=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this))._editor=e,i._dndDecorationIds=i._editor.createDecorationsCollection(),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(e)}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(e)}))),i._register(i._editor.onMouseDrag((function(e){return i._onEditorMouseDrag(e)}))),i._register(i._editor.onMouseDrop((function(e){return i._onEditorMouseDrop(e)}))),i._register(i._editor.onMouseDropCanceled((function(){return i._onEditorMouseDropCanceled()}))),i._register(i._editor.onKeyDown((function(e){return i.onEditorKeyDown(e)}))),i._register(i._editor.onKeyUp((function(e){return i.onEditorKeyUp(e)}))),i._register(i._editor.onDidBlurEditorWidget((function(){return i.onEditorBlur()}))),i._register(i._editor.onDidBlurEditorText((function(){return i.onEditorBlur()}))),i._mouseDown=!1,i._modifierPressed=!1,i._dragSelection=null,i}return(0,i.Z)(n,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(33)&&!this._editor.getOption(20)&&(m(e)&&(this._modifierPressed=!0),this._mouseDown&&m(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(33)&&!this._editor.getOption(20)&&(m(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===n.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var n=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==n.length)return;this._dragSelection=n[0]}m(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new p.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var r=null;if(e.event.shiftKey){var i=this._editor.getSelection();if(i){var o=i.selectionStartLineNumber,s=i.selectionStartColumn;r=[new f.Y(o,s,t.lineNumber,t.column)]}}else r=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new f.Y(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(r||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(m(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(n.ID,new g(this._dragSelection,t,m(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){this._dndDecorationIds.set([{range:new h.e(e.lineNumber,e.column,e.lineNumber,e.column),options:n._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds.clear()}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,o.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}}]),n}(c.JT);y.ID="editor.contrib.dragAndDrop",y.TRIGGER_KEY_VALUE=l.dz?6:5,y._DECORATION_OPTIONS=v.qx.register({description:"dnd-target",className:"dnd-target"}),(0,d._K)(y.ID,y,2)},93022:function(e,t,n){n.r(t);var r=n(74165),i=n(7388),o=n(63021),s=n(38821),a=n(7787),u=n(40455),c=n(99740),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};c.P.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return l(this,void 0,void 0,(0,r.Z)().mark((function t(){var c,l,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n[0],(0,o.p_)(s.o.isUri(c)),l=e.get(u.Je),d=e.get(a.S),t.next=6,d.createModelReference(c);case 6:return p=t.sent,t.prev=7,t.next=10,l.getOrCreate(p.object.textEditorModel,i.T.None);case 10:return t.abrupt("return",t.sent.getTopLevelSymbols());case 11:return t.prev=11,p.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])})))}))},40455:function(e,t,n){n.d(t,{C3:function(){return N},H3:function(){return E},Je:function(){return I},sT:function(){return S}});var r=n(74165),i=n(93433),o=n(29439),s=n(37762),a=n(60136),u=n(27277),c=n(15671),l=n(43144),d=n(38102),p=n(7388),h=n(74146),f=n(12928),v=n(29413),g=n(65631),m=n(17429),y=n(68200),_=n(64606),b=n(57832),k=n(26246),P=n(65096),w=n(65441),x=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Z=function(e,t){return function(n,r){t(n,r,e)}},D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},C=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var n;"string"===typeof e?n="".concat(t.id,"/").concat(e):(n="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(n)&&(n="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var r=n,i=0;void 0!==t.children.get(r);i++)r="".concat(n,"_").concat(i);return r}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),S=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var o;return(0,c.Z)(this,n),(o=t.call(this)).id=e,o.parent=r,o.symbol=i,o.children=new Map,o}return(0,l.Z)(n)}(C),E=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o){var s;return(0,c.Z)(this,n),(s=t.call(this)).id=e,s.parent=r,s.label=i,s.order=o,s.children=new Map,s}return(0,l.Z)(n)}(C),N=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).uri=e,r.id="root",r.parent=void 0,r._groups=new Map,r.children=new Map,r.id="root",r.parent=void 0,r}return(0,l.Z)(n,[{key:"_compact",value:function(){var e,t=0,n=(0,s.Z)(this._groups);try{for(n.s();!(e=n.n()).done;){var r=(0,o.Z)(e.value,2),i=r[0];0===r[1].children.size?this._groups.delete(i):t+=1}}catch(d){n.e(d)}finally{n.f()}if(1!==t)this.children=this._groups;else{var a,u=f.$.first(this._groups.values()),c=(0,s.Z)(u.children);try{for(c.s();!(a=c.n()).done;){var l=(0,o.Z)(a.value,2)[1];l.parent=this,this.children.set(l.id,l)}}catch(d){c.e(d)}finally{c.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],n=(0,s.Z)(this.children.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r instanceof S?t.push(r.symbol):t.push.apply(t,(0,i.Z)(f.$.map(r.children.values(),(function(e){return e.symbol}))))}}catch(o){n.e(o)}finally{n.f()}return t.sort((function(e,t){return m.e.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return n._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return g.L.compare(m.e.getStartPosition(e.range),m.e.getStartPosition(t.range))||g.L.compare(m.e.getEndPosition(t.range),m.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,t,r){var i=new p.A(r),o=new n(t.uri),a=e.ordered(t),u=a.map((function(e,r){var a,u=C.findId("provider_".concat(r),o),c=new E(u,o,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",r);return Promise.resolve(e.provideDocumentSymbols(t,i.token)).then((function(e){var t,r=(0,s.Z)(e||[]);try{for(r.s();!(t=r.n()).done;){var i=t.value;n._makeOutlineElement(i,c)}}catch(o){r.e(o)}finally{r.f()}return c}),(function(e){return(0,h.Cp)(e),c})).then((function(e){C.empty(e)?e.remove():o._groups.set(u,e)}))})),c=e.onDidChange((function(){var n=e.ordered(t);(0,d.fS)(n,a)||i.cancel()}));return Promise.all(u).then((function(){return i.token.isCancellationRequested&&!r.isCancellationRequested?n.create(e,t,r):o._compact()})).finally((function(){c.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var r=C.findId(e,t),i=new S(r,t,e);if(e.children){var o,a=(0,s.Z)(e.children);try{for(a.s();!(o=a.n()).done;){var u=o.value;n._makeOutlineElement(u,i)}}catch(c){a.e(c)}finally{a.f()}}t.children.set(i.id,i)}},{key:"_flattenDocumentSymbols",value:function(e,t,r){var i,o=(0,s.Z)(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.push({kind:a.kind,tags:a.tags,name:a.name,detail:a.detail,containerName:a.containerName||r,range:a.range,selectionRange:a.selectionRange,children:void 0}),a.children&&n._flattenDocumentSymbols(e,a.children,a.name)}}catch(u){o.e(u)}finally{o.f()}}}]),n}(C),I=(0,_.yh)("IOutlineModelService"),T=function(){function e(t,n,r){var i=this;(0,c.Z)(this,e),this._languageFeaturesService=t,this._disposables=new P.SL,this._cache=new v.z6(10,.7),this._debounceInformation=n.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(r.onModelRemoved((function(e){i._cache.delete(e.id)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){return D(this,void 0,void 0,(0,r.Z)().mark((function n(){var i,o,s,a,u,c,l=this;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this._languageFeaturesService.documentSymbolProvider,o=i.ordered(e),(s=this._cache.get(e.id))&&s.versionId===e.getVersionId()&&(0,d.fS)(s.provider,o)||(a=new p.A,s={versionId:e.getVersionId(),provider:o,promiseCnt:0,source:a,promise:N.create(i,e,a.token),model:void 0},this._cache.set(e.id,s),u=Date.now(),s.promise.then((function(t){s.model=t,l._debounceInformation.update(e,Date.now()-u)})).catch((function(t){l._cache.delete(e.id)}))),!s.model){n.next=6;break}return n.abrupt("return",s.model);case 6:return s.promiseCnt+=1,c=t.onCancellationRequested((function(){0===--s.promiseCnt&&(s.source.cancel(),l._cache.delete(e.id))})),n.prev=8,n.next=11,s.promise;case 11:return n.abrupt("return",n.sent);case 12:return n.prev=12,c.dispose(),n.finish(12);case 15:case"end":return n.stop()}}),n,this,[[8,,12,15]])})))}}]),e}();T=x([Z(0,w.p),Z(1,y.A),Z(2,k.q)],T),(0,b.z)(I,T,1)},59907:function(e,t,n){n.r(t);var r=n(15671),i=n(43144),o=n(60136),s=n(27277),a=n(95253),u=n(62636),c=n(93433),l=n(29439),d=n(37762),p=n(74165),h=n(32959),f=n(38102),v=n(71049),g=n(83392),m=n(65096),y=n(58915),_=n(90650),b=n(74812),k=n(69815),P=n(48895),w=n(17429),x=n(65441);function Z(e,t,n){var r,i;return{edits:[].concat((0,c.Z)(t.map((function(t){return new P.Gl(e,"string"===typeof n.insertText?{range:t,text:n.insertText,insertAsSnippet:!1}:{range:t,text:n.insertText.snippet,insertAsSnippet:!0})}))),(0,c.Z)(null!==(i=null===(r=n.additionalEdit)||void 0===r?void 0:r.edits)&&void 0!==i?i:[]))}}var D=n(16836),C=n(41509),S=n(18420),E=n(76344),N=n(8022),I=n(64606),T=n(28322),O=n(67949),M=n(88062),L=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},A=function(e,t){return function(n,r){t(n,r,e)}},R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},W="editor.changePasteType",q=new N.uy("pasteWidgetVisible",!1,(0,S.NC)("pasteWidgetVisible","Whether the paste widget is showing")),j="application/vnd.code.copyMetadata",K=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,o,s,a,u,c){var l;(0,r.Z)(this,n),(l=t.call(this))._bulkEditService=o,l._clipboardService=s,l._languageFeaturesService=a,l._quickInputService=u,l._progressService=c,l._editor=e;var d=e.getContainerDomNode();return l._register((0,h.addDisposableListener)(d,"copy",(function(e){return l.handleCopy(e)}))),l._register((0,h.addDisposableListener)(d,"cut",(function(e){return l.handleCopy(e)}))),l._register((0,h.addDisposableListener)(d,"paste",(function(e){return l.handlePaste(e)}),!0)),l._pasteProgressManager=l._register(new C.InlineProgressManager("pasteIntoEditor",e,i)),l._postPasteWidgetManager=l._register(i.createInstance(M.p,"pasteIntoEditor",e,q,{id:W,label:(0,S.NC)("postPasteWidgetTitle","Show paste options...")})),l}return(0,i.Z)(n,[{key:"changePasteType",value:function(){this._postPasteWidgetManager.tryShowSelector()}},{key:"pasteAs",value:function(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},document.execCommand("paste")}finally{this._pasteAsActionContext=void 0}}},{key:"isPasteAsEnabled",value:function(){return this._editor.getOption(82).enabled&&!this._editor.getOption(88)}},{key:"handleCopy",value:function(e){var t,n,r=this;if(e.clipboardData&&this._editor.hasTextFocus()&&this.isPasteAsEnabled()){var i=this._editor.getModel(),o=this._editor.getSelections();if(i&&(null===o||void 0===o?void 0:o.length)){var s=this._editor.getOption(35),a=o,u=1===o.length&&o[0].isEmpty();if(u){if(!s)return;a=[new w.e(a[0].startLineNumber,1,a[0].startLineNumber,1+i.getLineLength(a[0].startLineNumber))]}var c=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(o,s,_.ED),h={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:u,mode:null},g=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter((function(e){return!!e.prepareDocumentPaste}));if(g.length){var m=(0,k.B)(e.clipboardData),y=g.flatMap((function(e){var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),P=(0,b.R)();this.setCopyMetadata(e.clipboardData,{id:P,providerCopyMimeTypes:y,defaultPastePayload:h});var x=(0,v.PG)((function(e){return R(r,void 0,void 0,(0,p.Z)().mark((function t(){var n,r,o,s,u,c,h,v,y,_=this;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.kX,t.next=3,Promise.all(g.map((function(t){return R(_,void 0,void 0,(0,p.Z)().mark((function n(){return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.prepareDocumentPaste(i,a,m,e);case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",void 0);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))})));case 3:t.t1=t.sent,(n=(0,t.t0)(t.t1)).reverse(),r=(0,d.Z)(n);try{for(r.s();!(o=r.n()).done;){s=o.value,u=(0,d.Z)(s);try{for(u.s();!(c=u.n()).done;)h=(0,l.Z)(c.value,2),v=h[0],y=h[1],m.replace(v,y)}catch(b){u.e(b)}finally{u.f()}}}catch(b){r.e(b)}finally{r.f()}return t.abrupt("return",m);case 9:case"end":return t.stop()}}),t)})))}));null===(n=this._currentCopyOperation)||void 0===n||n.dataTransferPromise.cancel(),this._currentCopyOperation={handle:P,dataTransferPromise:x}}else this.setCopyMetadata(e.clipboardData,{defaultPastePayload:h})}}}},{key:"handlePaste",value:function(e){var t,n;return R(this,void 0,void 0,(0,p.Z)().mark((function r(){var i,o,s,a,u,l;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.clipboardData&&this._editor.hasTextFocus()){r.next=2;break}return r.abrupt("return");case 2:if(null===(t=this._currentPasteOperation)||void 0===t||t.cancel(),this._currentPasteOperation=void 0,i=this._editor.getModel(),(null===(o=this._editor.getSelections())||void 0===o?void 0:o.length)&&i){r.next=8;break}return r.abrupt("return");case 8:if(this.isPasteAsEnabled()){r.next=10;break}return r.abrupt("return");case 10:if(s=this.fetchCopyMetadata(e.clipboardData),(a=(0,k.L)(e.clipboardData)).delete(j),u=[].concat((0,c.Z)(e.clipboardData.types),(0,c.Z)(null!==(n=null===s||void 0===s?void 0:s.providerCopyMimeTypes)&&void 0!==n?n:[]),[y.v.uriList]),l=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter((function(e){var t;return null===(t=e.pasteMimeTypes)||void 0===t?void 0:t.some((function(e){return(0,g.SN)(e,u)}))})),l.length){r.next=17;break}return r.abrupt("return");case 17:e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,l,o,a,s):this.doPasteInline(l,o,a,s);case 20:case"end":return r.stop()}}),r,this)})))}},{key:"doPasteInline",value:function(e,t,n,r){var i=this,o=(0,v.PG)((function(s){return R(i,void 0,void 0,(0,p.Z)().mark((function i(){var a,u,c,l,d,h;return(0,p.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((a=this._editor).hasModel()){i.next=3;break}return i.abrupt("return");case 3:return u=a.getModel(),c=new D.Dl(a,3,void 0,s),i.prev=5,i.next=8,this.mergeInDataFromCopy(n,r,c.token);case 8:if(!c.token.isCancellationRequested){i.next=10;break}return i.abrupt("return");case 10:if((l=e.filter((function(e){return U(e,n)}))).length&&(1!==l.length||"text"!==l[0].id)){i.next=15;break}return i.next=14,this.applyDefaultPasteHandler(n,r,c.token);case 14:return i.abrupt("return");case 15:return i.next=17,this.getPasteEdits(l,n,u,t,c.token);case 17:if(d=i.sent,!c.token.isCancellationRequested){i.next=20;break}return i.abrupt("return");case 20:if(!d.length){i.next=23;break}return h="afterPaste"===a.getOption(82).showPasteSelector,i.abrupt("return",this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:d},h,c.token));case 23:return i.next=25,this.applyDefaultPasteHandler(n,r,c.token);case 25:return i.prev=25,c.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0),i.finish(25);case 29:case"end":return i.stop()}}),i,this,[[5,,25,29]])})))}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,S.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}},{key:"showPasteAsPick",value:function(e,t,n,r,i){var o=this,s=(0,v.PG)((function(a){return R(o,void 0,void 0,(0,p.Z)().mark((function o(){var u,c,l,d,h,f,v,g;return(0,p.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((u=this._editor).hasModel()){o.next=3;break}return o.abrupt("return");case 3:return c=u.getModel(),l=new D.Dl(u,3,void 0,a),o.prev=5,o.next=8,this.mergeInDataFromCopy(r,i,l.token);case 8:if(!l.token.isCancellationRequested){o.next=10;break}return o.abrupt("return");case 10:return d=t.filter((function(e){return U(e,r)})),o.next=13,this.getPasteEdits(d,r,c,n,l.token);case 13:if(h=o.sent,!l.token.isCancellationRequested){o.next=16;break}return o.abrupt("return");case 16:if(h.length){o.next=18;break}return o.abrupt("return");case 18:if("string"!==typeof e){o.next=22;break}f=h.find((function(t){return t.id===e})),o.next=26;break;case 22:return o.next=24,this._quickInputService.pick(h.map((function(e){return{label:e.label,description:e.id,detail:e.detail,edit:e}})),{placeHolder:(0,S.NC)("pasteAsPickerPlaceholder","Select Paste Action")});case 24:v=o.sent,f=null===v||void 0===v?void 0:v.edit;case 26:if(f){o.next=28;break}return o.abrupt("return");case 28:return g=Z(c.uri,n,f),o.next=31,this._bulkEditService.apply(g,{editor:this._editor});case 31:return o.prev=31,l.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0),o.finish(31);case 35:case"end":return o.stop()}}),o,this,[[5,,31,35]])})))}));this._progressService.withProgress({location:10,title:(0,S.NC)("pasteAsProgress","Running paste handlers")},(function(){return s}))}},{key:"setCopyMetadata",value:function(e,t){e.setData(j,JSON.stringify(t))}},{key:"fetchCopyMetadata",value:function(e){var t=e.getData(j);if(t)try{return JSON.parse(t)}catch(n){return}}},{key:"mergeInDataFromCopy",value:function(e,t,n){var r;return R(this,void 0,void 0,(0,p.Z)().mark((function i(){var o,s,a,u,c,h,f;return(0,p.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(null===t||void 0===t?void 0:t.id)||(null===(r=this._currentCopyOperation)||void 0===r?void 0:r.handle)!==t.id){i.next=8;break}return i.next=3,this._currentCopyOperation.dataTransferPromise;case 3:if(o=i.sent,!n.isCancellationRequested){i.next=6;break}return i.abrupt("return");case 6:s=(0,d.Z)(o);try{for(s.s();!(a=s.n()).done;)u=(0,l.Z)(a.value,2),c=u[0],h=u[1],e.replace(c,h)}catch(p){s.e(p)}finally{s.f()}case 8:if(e.has(y.v.uriList)){i.next=15;break}return i.next=11,this._clipboardService.readResources();case 11:if(f=i.sent,!n.isCancellationRequested){i.next=14;break}return i.abrupt("return");case 14:f.length&&e.append(y.v.uriList,(0,g.ZO)(g.Z0.create(f)));case 15:case"end":return i.stop()}}),i,this)})))}},{key:"getPasteEdits",value:function(e,t,n,r,i){return R(this,void 0,void 0,(0,p.Z)().mark((function o(){var s;return(0,p.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.eP)(Promise.all(e.map((function(e){var o;try{return null===(o=e.provideDocumentPasteEdits)||void 0===o?void 0:o.call(e,n,r,t,i)}catch(s){return void console.error(s)}}))).then(f.kX),i);case 2:return null===(s=o.sent)||void 0===s||s.sort((function(e,t){return t.priority-e.priority})),o.abrupt("return",null!==s&&void 0!==s?s:[]);case 5:case"end":return o.stop()}}),o)})))}},{key:"applyDefaultPasteHandler",value:function(e,t,n){var r,i,o;return R(this,void 0,void 0,(0,p.Z)().mark((function s(){var a,u,c;return(0,p.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=null!==(r=e.get(y.v.text))&&void 0!==r?r:e.get("text")){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,a.asString();case 5:if(u=s.sent,!n.isCancellationRequested){s.next=8;break}return s.abrupt("return");case 8:c={text:u,pasteOnNewLine:null!==(i=null===t||void 0===t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==i&&i,multicursorText:null!==(o=null===t||void 0===t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==o?o:null,mode:null},this._editor.trigger("keyboard","paste",c);case 10:case"end":return s.stop()}}),s,this)})))}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(m.JT);function U(e,t){var n;return Boolean(null===(n=e.pasteMimeTypes)||void 0===n?void 0:n.some((function(e){return t.matches(e)})))}K.ID="editor.contrib.copyPasteActionController",K=L([A(1,I.TG),A(2,P.vu),A(3,E.p),A(4,x.p),A(5,O.eJ),A(6,T.R9)],K);var V=n(58008);(0,a._K)(K.ID,K,0),(0,u.y)(V.v),(0,a.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:W,precondition:q,kbOpts:{weight:100,primary:2137}})}return(0,i.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var r;return null===(r=K.get(t))||void 0===r?void 0:r.changePasteType()}}]),n}(a._l))),(0,a.Qr)(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:"editor.action.pasteAs",label:S.NC("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:S.NC("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}return(0,i.Z)(n,[{key:"run",value:function(e,t,n){var r,i="string"===typeof(null===n||void 0===n?void 0:n.id)?n.id:void 0;return null===(r=K.get(t))||void 0===r?void 0:r.pasteAs(i)}}]),n}(a.R6))},58008:function(e,t,n){n.d(t,{P:function(){return S},v:function(){return E}});var r=n(37762),i=n(60136),o=n(27277),s=n(74165),a=n(15671),u=n(43144),c=n(38102),l=n(83392),d=n(65096),p=n(58915),h=n(37649),f=n(44641),v=n(38821),g=n(65441),m=n(18420),y=n(55208),_=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},b=function(e,t){return function(n,r){t(n,r,e)}},k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},P=(0,m.NC)("builtIn","Built-in"),w=function(){function e(){(0,a.Z)(this,e)}return(0,u.Z)(e,[{key:"provideDocumentPasteEdits",value:function(e,t,n,r){return k(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(n,r);case 2:return t=e.sent,e.abrupt("return",t?{id:this.id,insertText:t.insertText,label:t.label,detail:t.detail,priority:t.priority}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"provideDocumentOnDropEdits",value:function(e,t,n,r){return k(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(n,r);case 2:return t=e.sent,e.abrupt("return",t?{id:this.id,insertText:t.insertText,label:t.label,priority:t.priority}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),x=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).id="text",e.dropMimeTypes=[p.v.text],e.pasteMimeTypes=[p.v.text],e}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.get(p.v.text)){t.next=3;break}return t.abrupt("return");case 3:if(!e.has(p.v.uriList)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.asString();case 7:return r=t.sent,t.abrupt("return",{id:this.id,priority:0,label:(0,m.NC)("text.label","Insert Plain Text"),detail:P,insertText:r});case 9:case"end":return t.stop()}}),t,this)})))}}]),n}(w),Z=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).id="uri",e.dropMimeTypes=[p.v.uriList],e.pasteMimeTypes=[p.v.uriList],e}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function n(){var r,i,o,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C(e);case 2:if((r=n.sent).length&&!t.isCancellationRequested){n.next=5;break}return n.abrupt("return");case 5:return i=0,o=r.map((function(e){var t=e.uri,n=e.originalText;return t.scheme===h.lg.file?t.fsPath:(i++,n)})).join(" "),a=i>0?r.length>1?(0,m.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,m.NC)("defaultDropProvider.uriList.uri","Insert Uri"):r.length>1?(0,m.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,m.NC)("defaultDropProvider.uriList.path","Insert Path"),n.abrupt("return",{id:this.id,priority:0,insertText:o,label:a,detail:P});case 9:case"end":return n.stop()}}),n,this)})))}}]),n}(w),D=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this))._workspaceContextService=e,r.id="relativePath",r.dropMimeTypes=[p.v.uriList],r.pasteMimeTypes=[p.v.uriList],r}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function n(){var r,i,o=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C(e);case 2:if((r=n.sent).length&&!t.isCancellationRequested){n.next=5;break}return n.abrupt("return");case 5:if((i=(0,c.kX)(r.map((function(e){var t=e.uri,n=o._workspaceContextService.getWorkspaceFolder(t);return n?(0,f.lX)(n.uri,t):void 0})))).length){n.next=8;break}return n.abrupt("return");case 8:return n.abrupt("return",{id:this.id,priority:0,insertText:i.join(" "),label:r.length>1?(0,m.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,m.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:P});case 9:case"end":return n.stop()}}),n,this)})))}}]),n}(w);function C(e){return k(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,i,o,a,u,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.get(p.v.uriList)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,n.asString();case 5:i=t.sent,o=[],a=(0,r.Z)(l.Z0.parse(i));try{for(a.s();!(u=a.n()).done;){c=u.value;try{o.push({uri:v.o.parse(c),originalText:c})}catch(s){}}}catch(d){a.e(d)}finally{a.f()}return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))}D=_([b(0,y.ec)],D);var S=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._register(e.documentOnDropEditProvider.register("*",new x)),i._register(e.documentOnDropEditProvider.register("*",new Z)),i._register(e.documentOnDropEditProvider.register("*",new D(r))),i}return(0,u.Z)(n)}(d.JT);S=_([b(0,g.p),b(1,y.ec)],S);var E=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._register(e.documentPasteEditProvider.register("*",new x)),i._register(e.documentPasteEditProvider.register("*",new Z)),i._register(e.documentPasteEditProvider.register("*",new D(r))),i}return(0,u.Z)(n)}(d.JT);E=_([b(0,g.p),b(1,y.ec)],E)},85052:function(e,t,n){n.r(t);var r=n(15671),i=n(43144),o=n(60136),s=n(27277),a=n(95253),u=n(62636),c=n(58008),l=n(29439),d=n(37762),p=n(74165),h=n(38102),f=n(71049),v=n(83392),g=n(65096),m=n(69815),y=n(17429),_=n(65441),b=n(2260),k=n(81720),P=n(16836),w=n(41509),x=n(18420),Z=n(8022),D=n(48909),C=n(64606),S=n(88062),E=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},N=function(e,t){return function(n,r){t(n,r,e)}},I=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},T="editor.changeDropType",O=new Z.uy("dropWidgetVisible",!1,(0,x.NC)("dropWidgetVisible","Whether the drop widget is showing")),M=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,o,s){var a;return(0,r.Z)(this,n),(a=t.call(this))._languageFeaturesService=o,a._treeViewsDragAndDropService=s,a.treeItemsTransfer=D.Ej.getInstance(),a._dropProgressManager=a._register(i.createInstance(w.InlineProgressManager,"dropIntoEditor",e)),a._postDropWidgetManager=a._register(i.createInstance(S.p,"dropIntoEditor",e,O,{id:T,label:(0,x.NC)("postDropWidgetTitle","Show drop options...")})),a._register(e.onDropIntoEditor((function(t){return a.onDropIntoEditor(e,t.position,t.event)}))),a}return(0,i.Z)(n,[{key:"changeDropType",value:function(){this._postDropWidgetManager.tryShowSelector()}},{key:"onDropIntoEditor",value:function(e,t,n){var r;return I(this,void 0,void 0,(0,p.Z)().mark((function i(){var o,s=this;return(0,p.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.dataTransfer&&e.hasModel()){i.next=2;break}return i.abrupt("return");case 2:null===(r=this._currentOperation)||void 0===r||r.cancel(),e.focus(),e.setPosition(t),o=(0,f.PG)((function(r){return I(s,void 0,void 0,(0,p.Z)().mark((function i(){var s,a,u,c,l,d;return(0,p.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new P.Dl(e,1,void 0,r),i.prev=1,i.next=4,this.extractDataTransferData(n);case 4:if(0!==(a=i.sent).size&&!s.token.isCancellationRequested){i.next=7;break}return i.abrupt("return");case 7:if(u=e.getModel()){i.next=10;break}return i.abrupt("return");case 10:return c=this._languageFeaturesService.documentOnDropEditProvider.ordered(u).filter((function(e){return!e.dropMimeTypes||e.dropMimeTypes.some((function(e){return a.matches(e)}))})),i.next=13,this.getDropEdits(c,u,t,a,s);case 13:if(l=i.sent,!s.token.isCancellationRequested){i.next=16;break}return i.abrupt("return");case 16:if(!l.length){i.next=20;break}return d="afterDrop"===e.getOption(34).showDropSelector,i.next=20,this._postDropWidgetManager.applyEditAndShowIfNeeded([y.e.fromPositions(t)],{activeEditIndex:0,allEdits:l},d,r);case 20:return i.prev=20,s.dispose(),this._currentOperation===o&&(this._currentOperation=void 0),i.finish(20);case 24:case"end":return i.stop()}}),i,this,[[1,,20,24]])})))})),this._dropProgressManager.showWhile(t,(0,x.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o),this._currentOperation=o;case 8:case"end":return i.stop()}}),i,this)})))}},{key:"getDropEdits",value:function(e,t,n,r,i){return I(this,void 0,void 0,(0,p.Z)().mark((function o(){var s,a;return(0,p.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.eP)(Promise.all(e.map((function(e){return e.provideDocumentOnDropEdits(t,n,r,i.token)}))),i.token);case 2:return s=o.sent,(a=(0,h.kX)(null!==s&&void 0!==s?s:[])).sort((function(e,t){return t.priority-e.priority})),o.abrupt("return",a);case 6:case"end":return o.stop()}}),o)})))}},{key:"extractDataTransferData",value:function(e){return I(this,void 0,void 0,(0,p.Z)().mark((function t(){var n,r,i,o,s,a,u,c,h,f,g;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dataTransfer){t.next=2;break}return t.abrupt("return",new v.Hl);case 2:if(n=(0,m.L)(e.dataTransfer),!this.treeItemsTransfer.hasData(b.f.prototype)){t.next=25;break}if(r=this.treeItemsTransfer.getData(b.f.prototype),!Array.isArray(r)){t.next=25;break}i=(0,d.Z)(r),t.prev=7,i.s();case 9:if((o=i.n()).done){t.next=17;break}return s=o.value,t.next=13,this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);case 13:if(a=t.sent){u=(0,d.Z)(a);try{for(u.s();!(c=u.n()).done;)h=(0,l.Z)(c.value,2),f=h[0],g=h[1],n.replace(f,g)}catch(p){u.e(p)}finally{u.f()}}case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:return t.abrupt("return",n);case 26:case"end":return t.stop()}}),t,this,[[7,19,22,25]])})))}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(g.JT);M.ID="editor.contrib.dropIntoEditorController",M=E([N(1,C.TG),N(2,_.p),N(3,k.m)],M),(0,a._K)(M.ID,M,2),(0,a.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{id:T,precondition:O,kbOpts:{weight:100,primary:2137}})}return(0,i.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var r;null===(r=M.get(t))||void 0===r||r.changeDropType()}}]),n}(a._l))),(0,u.y)(c.P)},88062:function(e,t,n){n.d(t,{p:function(){return x}});var r=n(74165),i=n(93433),o=n(15671),s=n(43144),a=n(97326),u=n(60136),c=n(27277),l=n(32959),d=n(57841),p=n(93720),h=n(13880),f=n(65096),v=n(48895),g=n(8022),m=n(92361),y=n(64606),_=n(75256),b=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},k=function(e,t){return function(n,r){t(n,r,e)}},P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},w=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,r,i,s,u,c,l,d,p,v){var g;return(0,o.Z)(this,n),(g=t.call(this)).typeId=e,g.editor=r,g.showCommand=s,g.range=u,g.edits=c,g.onSelectNewEdit=l,g._contextMenuService=d,g._keybindingService=v,g.allowEditorOverflow=!0,g.suppressMouseDown=!0,g.create(),g.visibleContext=i.bindTo(p),g.visibleContext.set(!0),g._register((0,f.OF)((function(){return g.visibleContext.reset()}))),g.editor.addContentWidget((0,a.Z)(g)),g.editor.layoutContentWidget((0,a.Z)(g)),g._register((0,f.OF)((function(){return g.editor.removeContentWidget((0,a.Z)(g))}))),g._register(g.editor.onDidChangeCursorPosition((function(e){u.containsPosition(e.position)||g.dispose()}))),g._register(h.ju.runAndSubscribe(v.onDidUpdateKeybindings,(function(){g._updateButtonTitle()}))),g}return(0,s.Z)(n,[{key:"_updateButtonTitle",value:function(){var e,t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}},{key:"create",value:function(){var e=this;this.domNode=l.$(".post-edit-widget"),this.button=this._register(new d.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(l.addDisposableListener(this.domNode,l.EventType.CLICK,(function(){return e.showSelector()})))}},{key:"getId",value:function(){return n.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.range.getEndPosition(),preference:[2]}}},{key:"showSelector",value:function(){var e=this;this._contextMenuService.showContextMenu({getAnchor:function(){var t=l.getDomNodePagePosition(e.button.element);return{x:t.left+t.width,y:t.top+t.height}},getActions:function(){return e.edits.allEdits.map((function(t,n){return(0,p.xw)({id:"",label:t.label,checked:n===e.edits.activeEditIndex,run:function(){if(n!==e.edits.activeEditIndex)return e.onSelectNewEdit(n)}})}))}})}}]),n}(f.JT);w.baseId="editor.widget.postEditWidget",w=b([k(7,m.i),k(8,g.i6),k(9,_.d)],w);var x=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,r,i,s,a,u){var c;return(0,o.Z)(this,n),(c=t.call(this))._id=e,c._editor=r,c._visibleContext=i,c._showCommand=s,c._instantiationService=a,c._bulkEditService=u,c._currentWidget=c._register(new f.XK),c._register(h.ju.any(r.onDidChangeModel,r.onDidChangeModelContent)((function(){return c.clear()}))),c}return(0,s.Z)(n,[{key:"applyEditAndShowIfNeeded",value:function(e,t,n,o){var s,a;return P(this,void 0,void 0,(0,r.Z)().mark((function u(){var c,l,d,p,h,f,g,m=this;return(0,r.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if((c=this._editor.getModel())&&e.length){u.next=3;break}return u.abrupt("return");case 3:if(l=t.allEdits[t.activeEditIndex]){u.next=6;break}return u.abrupt("return");case 6:return d={edits:[].concat((0,i.Z)(e.map((function(e){return new v.Gl(c.uri,"string"===typeof l.insertText?{range:e,text:l.insertText,insertAsSnippet:!1}:{range:e,text:l.insertText.snippet,insertAsSnippet:!0})}))),(0,i.Z)(null!==(a=null===(s=l.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==a?a:[]))},p=e[0],h=c.deltaDecorations([],[{range:p,options:{description:"paste-line-suffix",stickiness:0}}]),u.prev=9,u.next=12,this._bulkEditService.apply(d,{editor:this._editor,token:o});case 12:f=u.sent,g=c.getDecorationRange(h[0]);case 14:return u.prev=14,c.deltaDecorations(h,[]),u.finish(14);case 17:n&&f.isApplied&&t.allEdits.length>1&&this.show(null!==g&&void 0!==g?g:p,t,(function(i){return P(m,void 0,void 0,(0,r.Z)().mark((function s(){var a;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=this._editor.getModel()){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,a.undo();case 5:this.applyEditAndShowIfNeeded(e,{activeEditIndex:i,allEdits:t.allEdits},n,o);case 6:case"end":return r.stop()}}),s,this)})))}));case 18:case"end":return u.stop()}}),u,this,[[9,,14,17]])})))}},{key:"show",value:function(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(w,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}},{key:"clear",value:function(){this._currentWidget.clear()}},{key:"tryShowSelector",value:function(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}}]),n}(f.JT);x=b([k(4,y.TG),k(5,v.vu)],x)},16836:function(e,t,n){n.d(t,{yy:function(){return w},Dl:function(){return x},YQ:function(){return Z}});var r=n(11752),i=n(61120),o=n(60136),s=n(27277),a=n(15671),u=n(43144),c=n(31906),l=n(17429),d=n(7388),p=n(65096),h=n(97326),f=n(95253),v=n(8022),g=n(49192),m=n(64606),y=n(57832),_=n(18420),b=(0,m.yh)("IEditorCancelService"),k=new v.uy("cancellableOperation",!1,(0,_.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,y.z)(b,function(){function e(){(0,a.Z)(this,e),this._tokens=new WeakMap}return(0,u.Z)(e,[{key:"add",value:function(e,t){var n,r=this._tokens.get(e);return r||(r=e.invokeWithinContext((function(e){return{key:k.bindTo(e.get(v.i6)),tokens:new g.S}})),this._tokens.set(e,r)),r.key.set(!0),n=r.tokens.push(t),function(){n&&(n(),r.key.set(!r.tokens.isEmpty()),n=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var n=t.tokens.pop();n&&(n.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),1);var P=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,r)).editor=e,i._unregister=e.invokeWithinContext((function(t){return t.get(b).add(e,(0,h.Z)(i))})),i}return(0,u.Z)(n,[{key:"dispose",value:function(){this._unregister(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(d.A);(0,f.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:k})}return(0,u.Z)(n,[{key:"runEditorCommand",value:function(e,t){e.get(b).cancel(t)}}]),n}(f._l)));var w=function(){function e(t,n){if((0,a.Z)(this,e),this.flags=n,0!==(1&this.flags)){var r=t.getModel();this.modelVersionId=r?c.WU("{0}#{1}",r.uri.toString(),r.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=t.getPosition():this.position=null,0!==(2&this.flags)?this.selection=t.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return(0,u.Z)(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelVersionId===n.modelVersionId&&(this.scrollLeft===n.scrollLeft&&this.scrollTop===n.scrollTop&&(!(!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position))&&!(!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),x=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r,i,o){var s;return(0,a.Z)(this,n),(s=t.call(this,e,o))._listener=new p.SL,4&r&&s._listener.add(e.onDidChangeCursorPosition((function(e){i&&l.e.containsPosition(i,e.position)||s.cancel()}))),2&r&&s._listener.add(e.onDidChangeCursorSelection((function(e){i&&l.e.containsRange(i,e.selection)||s.cancel()}))),8&r&&s._listener.add(e.onDidScrollChange((function(e){return s.cancel()}))),1&r&&(s._listener.add(e.onDidChangeModel((function(e){return s.cancel()}))),s._listener.add(e.onDidChangeModelContent((function(e){return s.cancel()})))),s}return(0,u.Z)(n,[{key:"dispose",value:function(){this._listener.dispose(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(P),Z=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,r))._listener=e.onDidChangeContent((function(){return i.cancel()})),i}return(0,u.Z)(n,[{key:"dispose",value:function(){this._listener.dispose(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(d.A)}}]);
//# sourceMappingURL=monaco-editor-vendor.b74e11c3.c70ca4f8.js.map