{"version":3,"file":"static/js/monaco-editor-vendor.a3a53265.891b57f2.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js","../node_modules/monaco-editor/esm/vs/base/browser/formattedTextRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/globalMouseMoveMonitor.js","../node_modules/monaco-editor/esm/vs/base/browser/iframe.js","../node_modules/monaco-editor/esm/vs/base/browser/keyboardEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/mouseEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/touch.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/button/button.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class FastDomNode {\n    constructor(domNode) {\n        this.domNode = domNode;\n        this._maxWidth = -1;\n        this._width = -1;\n        this._height = -1;\n        this._top = -1;\n        this._left = -1;\n        this._bottom = -1;\n        this._right = -1;\n        this._fontFamily = '';\n        this._fontWeight = '';\n        this._fontSize = -1;\n        this._fontFeatureSettings = '';\n        this._lineHeight = -1;\n        this._letterSpacing = -100;\n        this._className = '';\n        this._display = '';\n        this._position = '';\n        this._visibility = '';\n        this._backgroundColor = '';\n        this._layerHint = false;\n        this._contain = 'none';\n        this._boxShadow = '';\n    }\n    setMaxWidth(maxWidth) {\n        if (this._maxWidth === maxWidth) {\n            return;\n        }\n        this._maxWidth = maxWidth;\n        this.domNode.style.maxWidth = this._maxWidth + 'px';\n    }\n    setWidth(width) {\n        if (this._width === width) {\n            return;\n        }\n        this._width = width;\n        this.domNode.style.width = this._width + 'px';\n    }\n    setHeight(height) {\n        if (this._height === height) {\n            return;\n        }\n        this._height = height;\n        this.domNode.style.height = this._height + 'px';\n    }\n    setTop(top) {\n        if (this._top === top) {\n            return;\n        }\n        this._top = top;\n        this.domNode.style.top = this._top + 'px';\n    }\n    unsetTop() {\n        if (this._top === -1) {\n            return;\n        }\n        this._top = -1;\n        this.domNode.style.top = '';\n    }\n    setLeft(left) {\n        if (this._left === left) {\n            return;\n        }\n        this._left = left;\n        this.domNode.style.left = this._left + 'px';\n    }\n    setBottom(bottom) {\n        if (this._bottom === bottom) {\n            return;\n        }\n        this._bottom = bottom;\n        this.domNode.style.bottom = this._bottom + 'px';\n    }\n    setRight(right) {\n        if (this._right === right) {\n            return;\n        }\n        this._right = right;\n        this.domNode.style.right = this._right + 'px';\n    }\n    setFontFamily(fontFamily) {\n        if (this._fontFamily === fontFamily) {\n            return;\n        }\n        this._fontFamily = fontFamily;\n        this.domNode.style.fontFamily = this._fontFamily;\n    }\n    setFontWeight(fontWeight) {\n        if (this._fontWeight === fontWeight) {\n            return;\n        }\n        this._fontWeight = fontWeight;\n        this.domNode.style.fontWeight = this._fontWeight;\n    }\n    setFontSize(fontSize) {\n        if (this._fontSize === fontSize) {\n            return;\n        }\n        this._fontSize = fontSize;\n        this.domNode.style.fontSize = this._fontSize + 'px';\n    }\n    setFontFeatureSettings(fontFeatureSettings) {\n        if (this._fontFeatureSettings === fontFeatureSettings) {\n            return;\n        }\n        this._fontFeatureSettings = fontFeatureSettings;\n        this.domNode.style.fontFeatureSettings = this._fontFeatureSettings;\n    }\n    setLineHeight(lineHeight) {\n        if (this._lineHeight === lineHeight) {\n            return;\n        }\n        this._lineHeight = lineHeight;\n        this.domNode.style.lineHeight = this._lineHeight + 'px';\n    }\n    setLetterSpacing(letterSpacing) {\n        if (this._letterSpacing === letterSpacing) {\n            return;\n        }\n        this._letterSpacing = letterSpacing;\n        this.domNode.style.letterSpacing = this._letterSpacing + 'px';\n    }\n    setClassName(className) {\n        if (this._className === className) {\n            return;\n        }\n        this._className = className;\n        this.domNode.className = this._className;\n    }\n    toggleClassName(className, shouldHaveIt) {\n        this.domNode.classList.toggle(className, shouldHaveIt);\n        this._className = this.domNode.className;\n    }\n    setDisplay(display) {\n        if (this._display === display) {\n            return;\n        }\n        this._display = display;\n        this.domNode.style.display = this._display;\n    }\n    setPosition(position) {\n        if (this._position === position) {\n            return;\n        }\n        this._position = position;\n        this.domNode.style.position = this._position;\n    }\n    setVisibility(visibility) {\n        if (this._visibility === visibility) {\n            return;\n        }\n        this._visibility = visibility;\n        this.domNode.style.visibility = this._visibility;\n    }\n    setBackgroundColor(backgroundColor) {\n        if (this._backgroundColor === backgroundColor) {\n            return;\n        }\n        this._backgroundColor = backgroundColor;\n        this.domNode.style.backgroundColor = this._backgroundColor;\n    }\n    setLayerHinting(layerHint) {\n        if (this._layerHint === layerHint) {\n            return;\n        }\n        this._layerHint = layerHint;\n        this.domNode.style.transform = this._layerHint ? 'translate3d(0px, 0px, 0px)' : '';\n    }\n    setBoxShadow(boxShadow) {\n        if (this._boxShadow === boxShadow) {\n            return;\n        }\n        this._boxShadow = boxShadow;\n        this.domNode.style.boxShadow = boxShadow;\n    }\n    setContain(contain) {\n        if (this._contain === contain) {\n            return;\n        }\n        this._contain = contain;\n        this.domNode.style.contain = this._contain;\n    }\n    setAttribute(name, value) {\n        this.domNode.setAttribute(name, value);\n    }\n    removeAttribute(name) {\n        this.domNode.removeAttribute(name);\n    }\n    appendChild(child) {\n        this.domNode.appendChild(child.domNode);\n    }\n    removeChild(child) {\n        this.domNode.removeChild(child.domNode);\n    }\n}\nexport function createFastDomNode(domNode) {\n    return new FastDomNode(domNode);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nexport function renderText(text, options = {}) {\n    const element = createElement(options);\n    element.textContent = text;\n    return element;\n}\nexport function renderFormattedText(formattedText, options = {}) {\n    const element = createElement(options);\n    _renderFormattedText(element, parseFormattedText(formattedText, !!options.renderCodeSegments), options.actionHandler, options.renderCodeSegments);\n    return element;\n}\nexport function createElement(options) {\n    const tagName = options.inline ? 'span' : 'div';\n    const element = document.createElement(tagName);\n    if (options.className) {\n        element.className = options.className;\n    }\n    return element;\n}\nclass StringStream {\n    constructor(source) {\n        this.source = source;\n        this.index = 0;\n    }\n    eos() {\n        return this.index >= this.source.length;\n    }\n    next() {\n        const next = this.peek();\n        this.advance();\n        return next;\n    }\n    peek() {\n        return this.source[this.index];\n    }\n    advance() {\n        this.index++;\n    }\n}\nfunction _renderFormattedText(element, treeNode, actionHandler, renderCodeSegments) {\n    let child;\n    if (treeNode.type === 2 /* Text */) {\n        child = document.createTextNode(treeNode.content || '');\n    }\n    else if (treeNode.type === 3 /* Bold */) {\n        child = document.createElement('b');\n    }\n    else if (treeNode.type === 4 /* Italics */) {\n        child = document.createElement('i');\n    }\n    else if (treeNode.type === 7 /* Code */ && renderCodeSegments) {\n        child = document.createElement('code');\n    }\n    else if (treeNode.type === 5 /* Action */ && actionHandler) {\n        const a = document.createElement('a');\n        actionHandler.disposables.add(DOM.addStandardDisposableListener(a, 'click', (event) => {\n            actionHandler.callback(String(treeNode.index), event);\n        }));\n        child = a;\n    }\n    else if (treeNode.type === 8 /* NewLine */) {\n        child = document.createElement('br');\n    }\n    else if (treeNode.type === 1 /* Root */) {\n        child = element;\n    }\n    if (child && element !== child) {\n        element.appendChild(child);\n    }\n    if (child && Array.isArray(treeNode.children)) {\n        treeNode.children.forEach((nodeChild) => {\n            _renderFormattedText(child, nodeChild, actionHandler, renderCodeSegments);\n        });\n    }\n}\nfunction parseFormattedText(content, parseCodeSegments) {\n    const root = {\n        type: 1 /* Root */,\n        children: []\n    };\n    let actionViewItemIndex = 0;\n    let current = root;\n    const stack = [];\n    const stream = new StringStream(content);\n    while (!stream.eos()) {\n        let next = stream.next();\n        const isEscapedFormatType = (next === '\\\\' && formatTagType(stream.peek(), parseCodeSegments) !== 0 /* Invalid */);\n        if (isEscapedFormatType) {\n            next = stream.next(); // unread the backslash if it escapes a format tag type\n        }\n        if (!isEscapedFormatType && isFormatTag(next, parseCodeSegments) && next === stream.peek()) {\n            stream.advance();\n            if (current.type === 2 /* Text */) {\n                current = stack.pop();\n            }\n            const type = formatTagType(next, parseCodeSegments);\n            if (current.type === type || (current.type === 5 /* Action */ && type === 6 /* ActionClose */)) {\n                current = stack.pop();\n            }\n            else {\n                const newCurrent = {\n                    type: type,\n                    children: []\n                };\n                if (type === 5 /* Action */) {\n                    newCurrent.index = actionViewItemIndex;\n                    actionViewItemIndex++;\n                }\n                current.children.push(newCurrent);\n                stack.push(current);\n                current = newCurrent;\n            }\n        }\n        else if (next === '\\n') {\n            if (current.type === 2 /* Text */) {\n                current = stack.pop();\n            }\n            current.children.push({\n                type: 8 /* NewLine */\n            });\n        }\n        else {\n            if (current.type !== 2 /* Text */) {\n                const textCurrent = {\n                    type: 2 /* Text */,\n                    content: next\n                };\n                current.children.push(textCurrent);\n                stack.push(current);\n                current = textCurrent;\n            }\n            else {\n                current.content += next;\n            }\n        }\n    }\n    if (current.type === 2 /* Text */) {\n        current = stack.pop();\n    }\n    if (stack.length) {\n        // incorrectly formatted string literal\n    }\n    return root;\n}\nfunction isFormatTag(char, supportCodeSegments) {\n    return formatTagType(char, supportCodeSegments) !== 0 /* Invalid */;\n}\nfunction formatTagType(char, supportCodeSegments) {\n    switch (char) {\n        case '*':\n            return 3 /* Bold */;\n        case '_':\n            return 4 /* Italics */;\n        case '[':\n            return 5 /* Action */;\n        case ']':\n            return 6 /* ActionClose */;\n        case '`':\n            return supportCodeSegments ? 7 /* Code */ : 0 /* Invalid */;\n        default:\n            return 0 /* Invalid */;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from './dom.js';\nimport { IframeUtils } from './iframe.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { isIOS } from '../common/platform.js';\nexport function standardMouseMoveMerger(lastEvent, currentEvent) {\n    let ev = new StandardMouseEvent(currentEvent);\n    ev.preventDefault();\n    return {\n        leftButton: ev.leftButton,\n        buttons: ev.buttons,\n        posx: ev.posx,\n        posy: ev.posy\n    };\n}\nexport class GlobalMouseMoveMonitor {\n    constructor() {\n        this._hooks = new DisposableStore();\n        this._mouseMoveEventMerger = null;\n        this._mouseMoveCallback = null;\n        this._onStopCallback = null;\n    }\n    dispose() {\n        this.stopMonitoring(false);\n        this._hooks.dispose();\n    }\n    stopMonitoring(invokeStopCallback, browserEvent) {\n        if (!this.isMonitoring()) {\n            // Not monitoring\n            return;\n        }\n        // Unhook\n        this._hooks.clear();\n        this._mouseMoveEventMerger = null;\n        this._mouseMoveCallback = null;\n        const onStopCallback = this._onStopCallback;\n        this._onStopCallback = null;\n        if (invokeStopCallback && onStopCallback) {\n            onStopCallback(browserEvent);\n        }\n    }\n    isMonitoring() {\n        return !!this._mouseMoveEventMerger;\n    }\n    startMonitoring(initialElement, initialButtons, mouseMoveEventMerger, mouseMoveCallback, onStopCallback) {\n        if (this.isMonitoring()) {\n            // I am already hooked\n            return;\n        }\n        this._mouseMoveEventMerger = mouseMoveEventMerger;\n        this._mouseMoveCallback = mouseMoveCallback;\n        this._onStopCallback = onStopCallback;\n        const windowChain = IframeUtils.getSameOriginWindowChain();\n        const mouseMove = isIOS ? 'pointermove' : 'mousemove'; // Safari sends wrong event, workaround for #122653\n        const mouseUp = 'mouseup';\n        const listenTo = windowChain.map(element => element.window.document);\n        const shadowRoot = dom.getShadowRoot(initialElement);\n        if (shadowRoot) {\n            listenTo.unshift(shadowRoot);\n        }\n        for (const element of listenTo) {\n            this._hooks.add(dom.addDisposableThrottledListener(element, mouseMove, (data) => {\n                if (data.buttons !== initialButtons) {\n                    // Buttons state has changed in the meantime\n                    this.stopMonitoring(true);\n                    return;\n                }\n                this._mouseMoveCallback(data);\n            }, (lastEvent, currentEvent) => this._mouseMoveEventMerger(lastEvent, currentEvent)));\n            this._hooks.add(dom.addDisposableListener(element, mouseUp, (e) => this.stopMonitoring(true)));\n        }\n        if (IframeUtils.hasDifferentOriginAncestor()) {\n            let lastSameOriginAncestor = windowChain[windowChain.length - 1];\n            // We might miss a mouse up if it happens outside the iframe\n            // This one is for Chrome\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseout', (browserEvent) => {\n                let e = new StandardMouseEvent(browserEvent);\n                if (e.target.tagName.toLowerCase() === 'html') {\n                    this.stopMonitoring(true);\n                }\n            }));\n            // This one is for FF\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseover', (browserEvent) => {\n                let e = new StandardMouseEvent(browserEvent);\n                if (e.target.tagName.toLowerCase() === 'html') {\n                    this.stopMonitoring(true);\n                }\n            }));\n            // This one is for IE\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document.body, 'mouseleave', (browserEvent) => {\n                this.stopMonitoring(true);\n            }));\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nlet hasDifferentOriginAncestorFlag = false;\nlet sameOriginWindowChainCache = null;\nfunction getParentWindowIfSameOrigin(w) {\n    if (!w.parent || w.parent === w) {\n        return null;\n    }\n    // Cannot really tell if we have access to the parent window unless we try to access something in it\n    try {\n        let location = w.location;\n        let parentLocation = w.parent.location;\n        if (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n            hasDifferentOriginAncestorFlag = true;\n            return null;\n        }\n    }\n    catch (e) {\n        hasDifferentOriginAncestorFlag = true;\n        return null;\n    }\n    return w.parent;\n}\nexport class IframeUtils {\n    /**\n     * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n     * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n     * To distinguish if at one point the current execution environment is running inside a window with a different origin, see hasDifferentOriginAncestor()\n     */\n    static getSameOriginWindowChain() {\n        if (!sameOriginWindowChainCache) {\n            sameOriginWindowChainCache = [];\n            let w = window;\n            let parent;\n            do {\n                parent = getParentWindowIfSameOrigin(w);\n                if (parent) {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: w.frameElement || null\n                    });\n                }\n                else {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: null\n                    });\n                }\n                w = parent;\n            } while (w);\n        }\n        return sameOriginWindowChainCache.slice(0);\n    }\n    /**\n     * Returns true if the current execution environment is chained in a list of iframes which at one point ends in a window with a different origin.\n     * Returns false if the current execution environment is not running inside an iframe or if the entire chain of iframes have the same origin.\n     */\n    static hasDifferentOriginAncestor() {\n        if (!sameOriginWindowChainCache) {\n            this.getSameOriginWindowChain();\n        }\n        return hasDifferentOriginAncestorFlag;\n    }\n    /**\n     * Returns the position of `childWindow` relative to `ancestorWindow`\n     */\n    static getPositionOfChildWindowRelativeToAncestorWindow(childWindow, ancestorWindow) {\n        if (!ancestorWindow || childWindow === ancestorWindow) {\n            return {\n                top: 0,\n                left: 0\n            };\n        }\n        let top = 0, left = 0;\n        let windowChain = this.getSameOriginWindowChain();\n        for (const windowChainEl of windowChain) {\n            top += windowChainEl.window.scrollY;\n            left += windowChainEl.window.scrollX;\n            if (windowChainEl.window === ancestorWindow) {\n                break;\n            }\n            if (!windowChainEl.iframeElement) {\n                break;\n            }\n            let boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n            top += boundingRect.top;\n            left += boundingRect.left;\n        }\n        return {\n            top: top,\n            left: left\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { EVENT_KEY_CODE_MAP, KeyCodeUtils } from '../common/keyCodes.js';\nimport { SimpleKeybinding } from '../common/keybindings.js';\nimport * as platform from '../common/platform.js';\nfunction extractKeyCode(e) {\n    if (e.charCode) {\n        // \"keypress\" events mostly\n        let char = String.fromCharCode(e.charCode).toUpperCase();\n        return KeyCodeUtils.fromString(char);\n    }\n    const keyCode = e.keyCode;\n    // browser quirks\n    if (keyCode === 3) {\n        return 7 /* PauseBreak */;\n    }\n    else if (browser.isFirefox) {\n        if (keyCode === 59) {\n            return 80 /* Semicolon */;\n        }\n        else if (keyCode === 107) {\n            return 81 /* Equal */;\n        }\n        else if (keyCode === 109) {\n            return 83 /* Minus */;\n        }\n        else if (platform.isMacintosh && keyCode === 224) {\n            return 57 /* Meta */;\n        }\n    }\n    else if (browser.isWebKit) {\n        if (keyCode === 91) {\n            return 57 /* Meta */;\n        }\n        else if (platform.isMacintosh && keyCode === 93) {\n            // the two meta keys in the Mac have different key codes (91 and 93)\n            return 57 /* Meta */;\n        }\n        else if (!platform.isMacintosh && keyCode === 92) {\n            return 57 /* Meta */;\n        }\n    }\n    // cross browser keycodes:\n    return EVENT_KEY_CODE_MAP[keyCode] || 0 /* Unknown */;\n}\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */);\nconst altKeyMod = 512 /* Alt */;\nconst shiftKeyMod = 1024 /* Shift */;\nconst metaKeyMod = (platform.isMacintosh ? 2048 /* CtrlCmd */ : 256 /* WinCtrl */);\nexport class StandardKeyboardEvent {\n    constructor(source) {\n        this._standardKeyboardEventBrand = true;\n        let e = source;\n        this.browserEvent = e;\n        this.target = e.target;\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        this.keyCode = extractKeyCode(e);\n        this.code = e.code;\n        // console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n        this.ctrlKey = this.ctrlKey || this.keyCode === 5 /* Ctrl */;\n        this.altKey = this.altKey || this.keyCode === 6 /* Alt */;\n        this.shiftKey = this.shiftKey || this.keyCode === 4 /* Shift */;\n        this.metaKey = this.metaKey || this.keyCode === 57 /* Meta */;\n        this._asKeybinding = this._computeKeybinding();\n        this._asRuntimeKeybinding = this._computeRuntimeKeybinding();\n        // console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n    }\n    preventDefault() {\n        if (this.browserEvent && this.browserEvent.preventDefault) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent && this.browserEvent.stopPropagation) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n    toKeybinding() {\n        return this._asRuntimeKeybinding;\n    }\n    equals(other) {\n        return this._asKeybinding === other;\n    }\n    _computeKeybinding() {\n        let key = 0 /* Unknown */;\n        if (this.keyCode !== 5 /* Ctrl */ && this.keyCode !== 4 /* Shift */ && this.keyCode !== 6 /* Alt */ && this.keyCode !== 57 /* Meta */) {\n            key = this.keyCode;\n        }\n        let result = 0;\n        if (this.ctrlKey) {\n            result |= ctrlKeyMod;\n        }\n        if (this.altKey) {\n            result |= altKeyMod;\n        }\n        if (this.shiftKey) {\n            result |= shiftKeyMod;\n        }\n        if (this.metaKey) {\n            result |= metaKeyMod;\n        }\n        result |= key;\n        return result;\n    }\n    _computeRuntimeKeybinding() {\n        let key = 0 /* Unknown */;\n        if (this.keyCode !== 5 /* Ctrl */ && this.keyCode !== 4 /* Shift */ && this.keyCode !== 6 /* Alt */ && this.keyCode !== 57 /* Meta */) {\n            key = this.keyCode;\n        }\n        return new SimpleKeybinding(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { raceCancellation } from '../common/async.js';\nimport { CancellationTokenSource } from '../common/cancellation.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/browser/core/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const cts = disposables.add(new CancellationTokenSource());\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    // signal to code-block render that the\n    // element has been created\n    let signalInnerHTML;\n    const withInnerHTML = new Promise(c => signalInnerHTML = c);\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${href}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${text}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${title}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        href = _href(href, false);\n        if (options.baseUrl) {\n            const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n            if (!hasScheme) {\n                href = resolvePath(options.baseUrl, href).toString();\n            }\n        }\n        title = typeof title === 'string' ? removeMarkdownEscapes(title) : '';\n        href = removeMarkdownEscapes(href);\n        if (!href\n            || href.match(/^data:|javascript:/i)\n            || (href.match(/^command:/i) && !markdown.isTrusted)\n            || href.match(/^command:(\\/\\/\\/)?_workbench\\.downloadResource/i)) {\n            // drop the link\n            return text;\n        }\n        else {\n            // HTML Encode href\n            href = href.replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#39;');\n            return `<a data-href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n        }\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            if (typeof lang !== 'string') {\n                return '';\n            }\n            const value = options.codeBlockRenderer(lang, code);\n            // when code-block rendering is async we return sync\n            // but update the node with the real result later.\n            const id = defaultGenerator.nextId();\n            raceCancellation(Promise.all([value, withInnerHTML]), cts.token).then(values => {\n                var _a;\n                if (!isDisposed && values) {\n                    const span = element.querySelector(`div[data-code=\"${id}\"]`);\n                    if (span) {\n                        DOM.reset(span, values[0]);\n                    }\n                    (_a = options.asyncRenderCallback) === null || _a === void 0 ? void 0 : _a.call(options);\n                }\n            }).catch(() => {\n                // ignore\n            });\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                const href = target.dataset['href'];\n                if (href) {\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        if (img.src) {\n            let href = _href(img.src, true);\n            try {\n                const hrefAsUri = URI.parse(href);\n                if (options.baseUrl && hrefAsUri.scheme === Schemas.file) { // absolute or relative local path, or file: uri\n                    href = resolvePath(options.baseUrl, href).toString();\n                }\n            }\n            catch (err) { }\n            img.src = href;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    // signal that async code blocks can be now be inserted\n    signalInnerHTML();\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            cts.cancel();\n            disposables.dispose();\n        }\n    };\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    // build an anchor to map URLs to\n    const anchor = document.createElement('a');\n    // https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n    dompurify.addHook('afterSanitizeAttributes', (node) => {\n        // check all href/src attributes for validity\n        for (const attr of ['href', 'src']) {\n            if (node.hasAttribute(attr)) {\n                anchor.href = node.getAttribute(attr);\n                if (!allowedSchemes.includes(anchor.protocol.replace(/:$/, ''))) {\n                    node.removeAttribute(attr);\n                }\n            }\n        }\n    });\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        dompurify.removeHook('afterSanitizeAttributes');\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { IframeUtils } from './iframe.js';\nimport * as platform from '../common/platform.js';\nexport class StandardMouseEvent {\n    constructor(e) {\n        this.timestamp = Date.now();\n        this.browserEvent = e;\n        this.leftButton = e.button === 0;\n        this.middleButton = e.button === 1;\n        this.rightButton = e.button === 2;\n        this.buttons = e.buttons;\n        this.target = e.target;\n        this.detail = e.detail || 1;\n        if (e.type === 'dblclick') {\n            this.detail = 2;\n        }\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        if (typeof e.pageX === 'number') {\n            this.posx = e.pageX;\n            this.posy = e.pageY;\n        }\n        else {\n            // Probably hit by MSGestureEvent\n            this.posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n            this.posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n        }\n        // Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n        let iframeOffsets = IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self, e.view);\n        this.posx -= iframeOffsets.left;\n        this.posy -= iframeOffsets.top;\n    }\n    preventDefault() {\n        this.browserEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent.stopPropagation();\n    }\n}\nexport class StandardWheelEvent {\n    constructor(e, deltaX = 0, deltaY = 0) {\n        this.browserEvent = e || null;\n        this.target = e ? (e.target || e.targetNode || e.srcElement) : null;\n        this.deltaY = deltaY;\n        this.deltaX = deltaX;\n        if (e) {\n            // Old (deprecated) wheel events\n            let e1 = e;\n            let e2 = e;\n            // vertical delta scroll\n            if (typeof e1.wheelDeltaY !== 'undefined') {\n                this.deltaY = e1.wheelDeltaY / 120;\n            }\n            else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n                this.deltaY = -e2.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaY = -e.deltaY / 3;\n                    }\n                    else {\n                        this.deltaY = -e.deltaY;\n                    }\n                }\n                else {\n                    this.deltaY = -e.deltaY / 40;\n                }\n            }\n            // horizontal delta scroll\n            if (typeof e1.wheelDeltaX !== 'undefined') {\n                if (browser.isSafari && platform.isWindows) {\n                    this.deltaX = -(e1.wheelDeltaX / 120);\n                }\n                else {\n                    this.deltaX = e1.wheelDeltaX / 120;\n                }\n            }\n            else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n                this.deltaX = -e.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaX = -e.deltaX / 3;\n                    }\n                    else {\n                        this.deltaX = -e.deltaX;\n                    }\n                }\n                else {\n                    this.deltaX = -e.deltaX / 40;\n                }\n            }\n            // Assume a vertical scroll if nothing else worked\n            if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n                this.deltaY = e.wheelDelta / 120;\n            }\n        }\n    }\n    preventDefault() {\n        if (this.browserEvent) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Disposable } from '../common/lifecycle.js';\nexport var EventType;\n(function (EventType) {\n    EventType.Tap = '-monaco-gesturetap';\n    EventType.Change = '-monaco-gesturechange';\n    EventType.Start = '-monaco-gesturestart';\n    EventType.End = '-monaco-gesturesend';\n    EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport class Gesture extends Disposable {\n    constructor() {\n        super();\n        this.dispatched = false;\n        this.activeTouches = {};\n        this.handle = null;\n        this.targets = [];\n        this.ignoreTargets = [];\n        this._lastSetTapCountTime = 0;\n        this._register(DomUtils.addDisposableListener(document, 'touchstart', (e) => this.onTouchStart(e), { passive: false }));\n        this._register(DomUtils.addDisposableListener(document, 'touchend', (e) => this.onTouchEnd(e)));\n        this._register(DomUtils.addDisposableListener(document, 'touchmove', (e) => this.onTouchMove(e), { passive: false }));\n    }\n    static addTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.targets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.targets = Gesture.INSTANCE.targets.filter(t => t !== element);\n            }\n        };\n    }\n    static ignoreTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.ignoreTargets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.ignoreTargets = Gesture.INSTANCE.ignoreTargets.filter(t => t !== element);\n            }\n        };\n    }\n    static isTouchDevice() {\n        // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n        // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n        return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n    }\n    dispose() {\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        super.dispose();\n    }\n    onTouchStart(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        for (let i = 0, len = e.targetTouches.length; i < len; i++) {\n            let touch = e.targetTouches.item(i);\n            this.activeTouches[touch.identifier] = {\n                id: touch.identifier,\n                initialTarget: touch.target,\n                initialTimeStamp: timestamp,\n                initialPageX: touch.pageX,\n                initialPageY: touch.pageY,\n                rollingTimestamps: [timestamp],\n                rollingPageX: [touch.pageX],\n                rollingPageY: [touch.pageY]\n            };\n            let evt = this.newGestureEvent(EventType.Start, touch.target);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    onTouchEnd(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        let activeTouchCount = Object.keys(this.activeTouches).length;\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            let touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('move of an UNKNOWN touch', touch);\n                continue;\n            }\n            let data = this.activeTouches[touch.identifier], holdTime = Date.now() - data.initialTimeStamp;\n            if (holdTime < Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                let evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (holdTime >= Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                let evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (activeTouchCount === 1) {\n                let finalX = arrays.tail(data.rollingPageX);\n                let finalY = arrays.tail(data.rollingPageY);\n                let deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n                let deltaX = finalX - data.rollingPageX[0];\n                let deltaY = finalY - data.rollingPageY[0];\n                // We need to get all the dispatch targets on the start of the inertia event\n                const dispatchTo = this.targets.filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n                this.inertia(dispatchTo, timestamp, // time now\n                Math.abs(deltaX) / deltaT, // speed\n                deltaX > 0 ? 1 : -1, // x direction\n                finalX, // x now\n                Math.abs(deltaY) / deltaT, // y speed\n                deltaY > 0 ? 1 : -1, // y direction\n                finalY // y now\n                );\n            }\n            this.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n            // forget about this touch\n            delete this.activeTouches[touch.identifier];\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    newGestureEvent(type, initialTarget) {\n        let event = document.createEvent('CustomEvent');\n        event.initEvent(type, false, true);\n        event.initialTarget = initialTarget;\n        event.tapCount = 0;\n        return event;\n    }\n    dispatchEvent(event) {\n        if (event.type === EventType.Tap) {\n            const currentTime = (new Date()).getTime();\n            let setTapCount = 0;\n            if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n                setTapCount = 1;\n            }\n            else {\n                setTapCount = 2;\n            }\n            this._lastSetTapCountTime = currentTime;\n            event.tapCount = setTapCount;\n        }\n        else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n            // tap is canceled by scrolling or context menu\n            this._lastSetTapCountTime = 0;\n        }\n        for (let i = 0; i < this.ignoreTargets.length; i++) {\n            if (event.initialTarget instanceof Node && this.ignoreTargets[i].contains(event.initialTarget)) {\n                return;\n            }\n        }\n        this.targets.forEach(target => {\n            if (event.initialTarget instanceof Node && target.contains(event.initialTarget)) {\n                target.dispatchEvent(event);\n                this.dispatched = true;\n            }\n        });\n    }\n    inertia(dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n        this.handle = DomUtils.scheduleAtNextAnimationFrame(() => {\n            let now = Date.now();\n            // velocity: old speed + accel_over_time\n            let deltaT = now - t1, delta_pos_x = 0, delta_pos_y = 0, stopped = true;\n            vX += Gesture.SCROLL_FRICTION * deltaT;\n            vY += Gesture.SCROLL_FRICTION * deltaT;\n            if (vX > 0) {\n                stopped = false;\n                delta_pos_x = dirX * vX * deltaT;\n            }\n            if (vY > 0) {\n                stopped = false;\n                delta_pos_y = dirY * vY * deltaT;\n            }\n            // dispatch translation event\n            let evt = this.newGestureEvent(EventType.Change);\n            evt.translationX = delta_pos_x;\n            evt.translationY = delta_pos_y;\n            dispatchTo.forEach(d => d.dispatchEvent(evt));\n            if (!stopped) {\n                this.inertia(dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n            }\n        });\n    }\n    onTouchMove(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            let touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('end of an UNKNOWN touch', touch);\n                continue;\n            }\n            let data = this.activeTouches[touch.identifier];\n            let evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n            evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n            evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n            // only keep a few data points, to average the final speed\n            if (data.rollingPageX.length > 3) {\n                data.rollingPageX.shift();\n                data.rollingPageY.shift();\n                data.rollingTimestamps.shift();\n            }\n            data.rollingPageX.push(touch.pageX);\n            data.rollingPageY.push(touch.pageY);\n            data.rollingTimestamps.push(timestamp);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n}\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([\n    memoize\n], Gesture, \"isTouchDevice\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { Action, ActionRunner, Separator } from '../../../common/actions.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nimport * as nls from '../../../../nls.js';\nexport class BaseActionViewItem extends Disposable {\n    constructor(context, action, options = {}) {\n        super();\n        this.options = options;\n        this._context = context || this;\n        this._action = action;\n        if (action instanceof Action) {\n            this._register(action.onDidChange(event => {\n                if (!this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                this.handleActionChangeEvent(event);\n            }));\n        }\n    }\n    handleActionChangeEvent(event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    }\n    get actionRunner() {\n        if (!this._actionRunner) {\n            this._actionRunner = this._register(new ActionRunner());\n        }\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    getAction() {\n        return this._action;\n    }\n    isEnabled() {\n        return this._action.enabled;\n    }\n    setActionContext(newContext) {\n        this._context = newContext;\n    }\n    render(container) {\n        const element = this.element = container;\n        this._register(Gesture.addTarget(container));\n        const enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n            if (isFirefox) {\n                // Firefox: requires to set a text data transfer to get going\n                this._register(addDisposableListener(container, EventType.DRAG_START, e => { var _a; return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, this._action.label); }));\n            }\n        }\n        this._register(addDisposableListener(element, TouchEventType.Tap, e => this.onClick(e, true))); // Preserve focus on tap #125470\n        this._register(addDisposableListener(element, EventType.MOUSE_DOWN, e => {\n            if (!enableDragging) {\n                EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (this._action.enabled && e.button === 0) {\n                element.classList.add('active');\n            }\n        }));\n        if (platform.isMacintosh) {\n            // macOS: allow to trigger the button when holding Ctrl+key and pressing the\n            // main mouse button. This is for scenarios where e.g. some interaction forces\n            // the Ctrl+key to be pressed and hold but the user still wants to interact\n            // with the actions (for example quick access in quick navigation mode).\n            this._register(addDisposableListener(element, EventType.CONTEXT_MENU, e => {\n                if (e.button === 0 && e.ctrlKey === true) {\n                    this.onClick(e);\n                }\n            }));\n        }\n        this._register(addDisposableListener(element, EventType.CLICK, e => {\n            EventHelper.stop(e, true);\n            // menus do not use the click event\n            if (!(this.options && this.options.isMenu)) {\n                this.onClick(e);\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DBLCLICK, e => {\n            EventHelper.stop(e, true);\n        }));\n        [EventType.MOUSE_UP, EventType.MOUSE_OUT].forEach(event => {\n            this._register(addDisposableListener(element, event, e => {\n                EventHelper.stop(e);\n                element.classList.remove('active');\n            }));\n        });\n    }\n    onClick(event, preserveFocus = false) {\n        var _a;\n        EventHelper.stop(event, true);\n        const context = types.isUndefinedOrNull(this._context) ? ((_a = this.options) === null || _a === void 0 ? void 0 : _a.useEventAsContext) ? event : { preserveFocus } : this._context;\n        this.actionRunner.run(this._action, context);\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.element) {\n            this.element.tabIndex = 0;\n            this.element.focus();\n            this.element.classList.add('focused');\n        }\n    }\n    blur() {\n        if (this.element) {\n            this.element.blur();\n            this.element.tabIndex = -1;\n            this.element.classList.remove('focused');\n        }\n    }\n    setFocusable(focusable) {\n        if (this.element) {\n            this.element.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    get trapsArrowNavigation() {\n        return false;\n    }\n    updateEnabled() {\n        // implement in subclass\n    }\n    updateLabel() {\n        // implement in subclass\n    }\n    updateTooltip() {\n        // implement in subclass\n    }\n    updateClass() {\n        // implement in subclass\n    }\n    updateChecked() {\n        // implement in subclass\n    }\n    dispose() {\n        if (this.element) {\n            this.element.remove();\n            this.element = undefined;\n        }\n        super.dispose();\n    }\n}\nexport class ActionViewItem extends BaseActionViewItem {\n    constructor(context, action, options = {}) {\n        super(context, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n    }\n    render(container) {\n        super.render(container);\n        if (this.element) {\n            this.label = append(this.element, $('a.action-label'));\n        }\n        if (this.label) {\n            if (this._action.id === Separator.ID) {\n                this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n            }\n            else {\n                if (this.options.isMenu) {\n                    this.label.setAttribute('role', 'menuitem');\n                }\n                else {\n                    this.label.setAttribute('role', 'button');\n                }\n            }\n        }\n        if (this.options.label && this.options.keybinding && this.element) {\n            append(this.element, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.label) {\n            this.label.tabIndex = 0;\n            this.label.focus();\n        }\n    }\n    blur() {\n        if (this.label) {\n            this.label.tabIndex = -1;\n        }\n    }\n    setFocusable(focusable) {\n        if (this.label) {\n            this.label.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this.getAction().label;\n        }\n    }\n    updateTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\n            title = this.getAction().label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        if (title && this.label) {\n            this.label.title = title;\n        }\n    }\n    updateClass() {\n        if (this.cssClass && this.label) {\n            this.label.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getAction().class;\n            if (this.label) {\n                this.label.classList.add('codicon');\n                if (this.cssClass) {\n                    this.label.classList.add(...this.cssClass.split(' '));\n                }\n            }\n            this.updateEnabled();\n        }\n        else {\n            if (this.label) {\n                this.label.classList.remove('codicon');\n            }\n        }\n    }\n    updateEnabled() {\n        if (this.getAction().enabled) {\n            if (this.label) {\n                this.label.removeAttribute('aria-disabled');\n                this.label.classList.remove('disabled');\n            }\n            if (this.element) {\n                this.element.classList.remove('disabled');\n            }\n        }\n        else {\n            if (this.label) {\n                this.label.setAttribute('aria-disabled', 'true');\n                this.label.classList.add('disabled');\n            }\n            if (this.element) {\n                this.element.classList.add('disabled');\n            }\n        }\n    }\n    updateChecked() {\n        if (this.label) {\n            if (this.getAction().checked) {\n                this.label.classList.add('checked');\n            }\n            else {\n                this.label.classList.remove('checked');\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as DOM from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from './actionViewItems.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, dispose } from '../../../common/lifecycle.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nexport class ActionBar extends Disposable {\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        super();\n        // Trigger Key Tracking\n        this.triggerKeyDown = false;\n        this.focusable = true;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidCancel = this._register(new Emitter({ onFirstListenerAdd: () => this.cancelHasListener = true }));\n        this.onDidCancel = this._onDidCancel.event;\n        this.cancelHasListener = false;\n        this._onDidRun = this._register(new Emitter());\n        this.onDidRun = this._onDidRun.event;\n        this._onBeforeRun = this._register(new Emitter());\n        this.onBeforeRun = this._onBeforeRun.event;\n        this.options = options;\n        this._context = (_a = options.context) !== null && _a !== void 0 ? _a : null;\n        this._orientation = (_b = this.options.orientation) !== null && _b !== void 0 ? _b : 0 /* HORIZONTAL */;\n        this._triggerKeys = {\n            keyDown: (_d = (_c = this.options.triggerKeys) === null || _c === void 0 ? void 0 : _c.keyDown) !== null && _d !== void 0 ? _d : false,\n            keys: (_f = (_e = this.options.triggerKeys) === null || _e === void 0 ? void 0 : _e.keys) !== null && _f !== void 0 ? _f : [3 /* Enter */, 10 /* Space */]\n        };\n        if (this.options.actionRunner) {\n            this._actionRunner = this.options.actionRunner;\n        }\n        else {\n            this._actionRunner = new ActionRunner();\n            this._register(this._actionRunner);\n        }\n        this._register(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._register(this._actionRunner.onBeforeRun(e => this._onBeforeRun.fire(e)));\n        this._actionIds = [];\n        this.viewItems = [];\n        this.focusedItem = undefined;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-action-bar';\n        if (options.animated !== false) {\n            this.domNode.classList.add('animated');\n        }\n        let previousKeys;\n        let nextKeys;\n        switch (this._orientation) {\n            case 0 /* HORIZONTAL */:\n                previousKeys = [15 /* LeftArrow */];\n                nextKeys = [17 /* RightArrow */];\n                break;\n            case 1 /* VERTICAL */:\n                previousKeys = [16 /* UpArrow */];\n                nextKeys = [18 /* DownArrow */];\n                this.domNode.className += ' vertical';\n                break;\n        }\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = true;\n            const focusedItem = typeof this.focusedItem === 'number' ? this.viewItems[this.focusedItem] : undefined;\n            if (previousKeys && (event.equals(previousKeys[0]) || event.equals(previousKeys[1]))) {\n                eventHandled = this.focusPrevious();\n            }\n            else if (nextKeys && (event.equals(nextKeys[0]) || event.equals(nextKeys[1]))) {\n                eventHandled = this.focusNext();\n            }\n            else if (event.equals(9 /* Escape */) && this.cancelHasListener) {\n                this._onDidCancel.fire();\n            }\n            else if (event.equals(14 /* Home */)) {\n                eventHandled = this.focusFirst();\n            }\n            else if (event.equals(13 /* End */)) {\n                eventHandled = this.focusLast();\n            }\n            else if (event.equals(2 /* Tab */) && focusedItem instanceof BaseActionViewItem && focusedItem.trapsArrowNavigation) {\n                eventHandled = this.focusNext();\n            }\n            else if (this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (this._triggerKeys.keyDown) {\n                    this.doTrigger(event);\n                }\n                else {\n                    this.triggerKeyDown = true;\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (this.isTriggerKeyEvent(event)) {\n                if (!this._triggerKeys.keyDown && this.triggerKeyDown) {\n                    this.triggerKeyDown = false;\n                    this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(2 /* Tab */) || event.equals(1024 /* Shift */ | 2 /* Tab */)) {\n                this.updateFocusedItem();\n            }\n        }));\n        this.focusTracker = this._register(DOM.trackFocus(this.domNode));\n        this._register(this.focusTracker.onDidBlur(() => {\n            if (DOM.getActiveElement() === this.domNode || !DOM.isAncestor(DOM.getActiveElement(), this.domNode)) {\n                this._onDidBlur.fire();\n                this.focusedItem = undefined;\n                this.previouslyFocusedItem = undefined;\n                this.triggerKeyDown = false;\n            }\n        }));\n        this._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n        this.actionsList = document.createElement('ul');\n        this.actionsList.className = 'actions-container';\n        this.actionsList.setAttribute('role', 'toolbar');\n        if (this.options.ariaLabel) {\n            this.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        this.domNode.appendChild(this.actionsList);\n        container.appendChild(this.domNode);\n    }\n    // Some action bars should not be focusable at times\n    // When an action bar is not focusable make sure to make all the elements inside it not focusable\n    // When an action bar is focusable again, make sure the first item can be focused\n    setFocusable(focusable) {\n        this.focusable = focusable;\n        if (this.focusable) {\n            const firstEnabled = this.viewItems.find(vi => vi instanceof BaseActionViewItem && vi.isEnabled());\n            if (firstEnabled instanceof BaseActionViewItem) {\n                firstEnabled.setFocusable(true);\n            }\n        }\n        else {\n            this.viewItems.forEach(vi => {\n                if (vi instanceof BaseActionViewItem) {\n                    vi.setFocusable(false);\n                }\n            });\n        }\n    }\n    isTriggerKeyEvent(event) {\n        let ret = false;\n        this._triggerKeys.keys.forEach(keyCode => {\n            ret = ret || event.equals(keyCode);\n        });\n        return ret;\n    }\n    updateFocusedItem() {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (DOM.isAncestor(DOM.getActiveElement(), elem)) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    get context() {\n        return this._context;\n    }\n    set context(context) {\n        this._context = context;\n        this.viewItems.forEach(i => i.setActionContext(context));\n    }\n    get actionRunner() {\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        if (actionRunner) {\n            this._actionRunner = actionRunner;\n            this.viewItems.forEach(item => item.actionRunner = actionRunner);\n        }\n    }\n    getContainer() {\n        return this.domNode;\n    }\n    push(arg, options = {}) {\n        const actions = Array.isArray(arg) ? arg : [arg];\n        let index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach((action) => {\n            const actionViewItemElement = document.createElement('li');\n            actionViewItemElement.className = 'action-item';\n            actionViewItemElement.setAttribute('role', 'presentation');\n            // Prevent native context menu on actions\n            if (!this.options.allowContextMenu) {\n                this._register(DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, (e) => {\n                    DOM.EventHelper.stop(e, true);\n                }));\n            }\n            let item;\n            if (this.options.actionViewItemProvider) {\n                item = this.options.actionViewItemProvider(action);\n            }\n            if (!item) {\n                item = new ActionViewItem(this.context, action, options);\n            }\n            item.actionRunner = this._actionRunner;\n            item.setActionContext(this.context);\n            item.render(actionViewItemElement);\n            if (this.focusable && item instanceof BaseActionViewItem && this.viewItems.length === 0) {\n                // We need to allow for the first enabled item to be focused on using tab navigation #106441\n                item.setFocusable(true);\n            }\n            if (index === null || index < 0 || index >= this.actionsList.children.length) {\n                this.actionsList.appendChild(actionViewItemElement);\n                this.viewItems.push(item);\n                this._actionIds.push(action.id);\n            }\n            else {\n                this.actionsList.insertBefore(actionViewItemElement, this.actionsList.children[index]);\n                this.viewItems.splice(index, 0, item);\n                this._actionIds.splice(index, 0, action.id);\n                index++;\n            }\n        });\n        if (typeof this.focusedItem === 'number') {\n            // After a clear actions might be re-added to simply toggle some actions. We should preserve focus #97128\n            this.focus(this.focusedItem);\n        }\n    }\n    clear() {\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this._actionIds = [];\n        DOM.clearNode(this.actionsList);\n    }\n    length() {\n        return this.viewItems.length;\n    }\n    focus(arg) {\n        let selectFirst = false;\n        let index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            const firstEnabled = this.viewItems.findIndex(item => item.isEnabled());\n            // Focus the first enabled item\n            this.focusedItem = firstEnabled === -1 ? undefined : firstEnabled;\n            this.updateFocus(undefined, undefined, true);\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus(undefined, undefined, true);\n        }\n    }\n    focusFirst() {\n        this.focusedItem = this.length() - 1;\n        return this.focusNext(true);\n    }\n    focusLast() {\n        this.focusedItem = 0;\n        return this.focusPrevious(true);\n    }\n    focusNext(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            if (!forceLoop && this.options.preventLoopNavigation && this.focusedItem + 1 >= this.viewItems.length) {\n                this.focusedItem = startIndex;\n                return false;\n            }\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && this.options.focusOnlyEnabledItems && !item.isEnabled());\n        this.updateFocus();\n        return true;\n    }\n    focusPrevious(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                if (!forceLoop && this.options.preventLoopNavigation) {\n                    this.focusedItem = startIndex;\n                    return false;\n                }\n                this.focusedItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && this.options.focusOnlyEnabledItems && !item.isEnabled());\n        this.updateFocus(true);\n        return true;\n    }\n    updateFocus(fromRight, preventScroll, forceFocus = false) {\n        var _a;\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus({ preventScroll });\n        }\n        if (this.previouslyFocusedItem !== undefined && this.previouslyFocusedItem !== this.focusedItem) {\n            (_a = this.viewItems[this.previouslyFocusedItem]) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        const actionViewItem = this.focusedItem !== undefined && this.viewItems[this.focusedItem];\n        if (actionViewItem) {\n            let focusItem = true;\n            if (!types.isFunction(actionViewItem.focus)) {\n                focusItem = false;\n            }\n            if (this.options.focusOnlyEnabledItems && types.isFunction(actionViewItem.isEnabled) && !actionViewItem.isEnabled()) {\n                focusItem = false;\n            }\n            if (!focusItem) {\n                this.actionsList.focus({ preventScroll });\n                this.previouslyFocusedItem = undefined;\n            }\n            else if (forceFocus || this.previouslyFocusedItem !== this.focusedItem) {\n                actionViewItem.focus(fromRight);\n                this.previouslyFocusedItem = this.focusedItem;\n            }\n        }\n    }\n    doTrigger(event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        const actionViewItem = this.viewItems[this.focusedItem];\n        if (actionViewItem instanceof BaseActionViewItem) {\n            const context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\n            this.run(actionViewItem._action, context);\n        }\n    }\n    run(action, context) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._actionRunner.run(action, context);\n        });\n    }\n    dispose() {\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this._actionIds = [];\n        this.getContainer().remove();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './aria.css';\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer;\nlet alertContainer;\nlet alertContainer2;\nlet statusContainer;\nlet statusContainer2;\nexport function setARIAContainer(parent) {\n    ariaContainer = document.createElement('div');\n    ariaContainer.className = 'monaco-aria-container';\n    const createAlertContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-alert';\n        element.setAttribute('role', 'alert');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    alertContainer = createAlertContainer();\n    alertContainer2 = createAlertContainer();\n    const createStatusContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-status';\n        element.setAttribute('role', 'complementary');\n        element.setAttribute('aria-live', 'polite');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    statusContainer = createStatusContainer();\n    statusContainer2 = createStatusContainer();\n    parent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\n    if (alertContainer.textContent !== msg) {\n        dom.clearNode(alertContainer2);\n        insertMessage(alertContainer, msg);\n    }\n    else {\n        dom.clearNode(alertContainer);\n        insertMessage(alertContainer2, msg);\n    }\n}\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    if (isMacintosh) {\n        alert(msg); // VoiceOver does not seem to support status role\n    }\n    else {\n        if (statusContainer.textContent !== msg) {\n            dom.clearNode(statusContainer2);\n            insertMessage(statusContainer, msg);\n        }\n        else {\n            dom.clearNode(statusContainer);\n            insertMessage(statusContainer2, msg);\n        }\n    }\n}\nfunction insertMessage(target, msg) {\n    dom.clearNode(target);\n    if (msg.length > MAX_MESSAGE_LENGTH) {\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n    }\n    target.textContent = msg;\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n    target.style.visibility = 'hidden';\n    target.style.visibility = 'visible';\n}\n","import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { mixin } from '../../../common/objects.js';\nimport './button.css';\nconst defaultOptions = {\n    buttonBackground: Color.fromHex('#0E639C'),\n    buttonHoverBackground: Color.fromHex('#006BB3'),\n    buttonForeground: Color.white\n};\nexport class Button extends Disposable {\n    constructor(container, options) {\n        super();\n        this._onDidClick = this._register(new Emitter());\n        this.options = options || Object.create(null);\n        mixin(this.options, defaultOptions, false);\n        this.buttonForeground = this.options.buttonForeground;\n        this.buttonBackground = this.options.buttonBackground;\n        this.buttonHoverBackground = this.options.buttonHoverBackground;\n        this.buttonSecondaryForeground = this.options.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = this.options.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = this.options.buttonSecondaryHoverBackground;\n        this.buttonBorder = this.options.buttonBorder;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* Enter */) || event.equals(10 /* Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* Escape */)) {\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.setHoverBackground();\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.applyStyles(); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => this.setHoverBackground()));\n        this._register(this.focusTracker.onDidBlur(() => this.applyStyles())); // restore standard styles\n        this.applyStyles();\n    }\n    get onDidClick() { return this._onDidClick.event; }\n    setHoverBackground() {\n        let hoverBackground;\n        if (this.options.secondary) {\n            hoverBackground = this.buttonSecondaryHoverBackground ? this.buttonSecondaryHoverBackground.toString() : null;\n        }\n        else {\n            hoverBackground = this.buttonHoverBackground ? this.buttonHoverBackground.toString() : null;\n        }\n        if (hoverBackground) {\n            this._element.style.backgroundColor = hoverBackground;\n        }\n    }\n    style(styles) {\n        this.buttonForeground = styles.buttonForeground;\n        this.buttonBackground = styles.buttonBackground;\n        this.buttonHoverBackground = styles.buttonHoverBackground;\n        this.buttonSecondaryForeground = styles.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = styles.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = styles.buttonSecondaryHoverBackground;\n        this.buttonBorder = styles.buttonBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this._element) {\n            let background, foreground;\n            if (this.options.secondary) {\n                foreground = this.buttonSecondaryForeground ? this.buttonSecondaryForeground.toString() : '';\n                background = this.buttonSecondaryBackground ? this.buttonSecondaryBackground.toString() : '';\n            }\n            else {\n                foreground = this.buttonForeground ? this.buttonForeground.toString() : '';\n                background = this.buttonBackground ? this.buttonBackground.toString() : '';\n            }\n            const border = this.buttonBorder ? this.buttonBorder.toString() : '';\n            this._element.style.color = foreground;\n            this._element.style.backgroundColor = background;\n            this._element.style.borderWidth = border ? '1px' : '';\n            this._element.style.borderStyle = border ? 'solid' : '';\n            this._element.style.borderColor = border;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        this._element.classList.add('monaco-text-button');\n        if (this.options.supportIcons) {\n            reset(this._element, ...renderLabelWithIcons(value));\n        }\n        else {\n            this._element.textContent = value;\n        }\n        if (typeof this.options.title === 'string') {\n            this._element.title = this.options.title;\n        }\n        else if (this.options.title) {\n            this._element.title = value;\n        }\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n}\n"],"names":["FastDomNode","domNode","this","_maxWidth","_width","_height","_top","_left","_bottom","_right","_fontFamily","_fontWeight","_fontSize","_fontFeatureSettings","_lineHeight","_letterSpacing","_className","_display","_position","_visibility","_backgroundColor","_layerHint","_contain","_boxShadow","maxWidth","style","width","height","top","left","bottom","right","fontFamily","fontWeight","fontSize","fontFeatureSettings","lineHeight","letterSpacing","className","shouldHaveIt","classList","toggle","display","position","visibility","backgroundColor","layerHint","transform","boxShadow","contain","name","value","setAttribute","removeAttribute","child","appendChild","removeChild","createFastDomNode","renderText","text","options","element","createElement","textContent","renderFormattedText","formattedText","_renderFormattedText","parseFormattedText","renderCodeSegments","actionHandler","tagName","inline","document","StringStream","source","index","length","next","peek","advance","treeNode","type","createTextNode","content","a","disposables","add","DOM","event","callback","String","Array","isArray","children","forEach","nodeChild","parseCodeSegments","root","actionViewItemIndex","current","stack","stream","eos","isEscapedFormatType","formatTagType","pop","push","textCurrent","newCurrent","char","supportCodeSegments","standardMouseMoveMerger","lastEvent","currentEvent","ev","StandardMouseEvent","preventDefault","leftButton","buttons","posx","posy","GlobalMouseMoveMonitor","_hooks","DisposableStore","_mouseMoveEventMerger","_mouseMoveCallback","_onStopCallback","stopMonitoring","dispose","invokeStopCallback","browserEvent","isMonitoring","clear","onStopCallback","initialElement","initialButtons","mouseMoveEventMerger","mouseMoveCallback","windowChain","IframeUtils","mouseMove","isIOS","listenTo","map","window","shadowRoot","dom","unshift","data","e","lastSameOriginAncestor","target","toLowerCase","body","hasDifferentOriginAncestorFlag","sameOriginWindowChainCache","getParentWindowIfSameOrigin","w","parent","location","parentLocation","origin","iframeElement","frameElement","slice","getSameOriginWindowChain","childWindow","ancestorWindow","windowChainEl","scrollY","scrollX","boundingRect","getBoundingClientRect","ctrlKeyMod","platform","metaKeyMod","StandardKeyboardEvent","_standardKeyboardEventBrand","ctrlKey","shiftKey","altKey","metaKey","keyCode","charCode","fromCharCode","toUpperCase","KeyCodeUtils","browser","EVENT_KEY_CODE_MAP","extractKeyCode","code","_asKeybinding","_computeKeybinding","_asRuntimeKeybinding","_computeRuntimeKeybinding","stopPropagation","other","key","result","SimpleKeybinding","renderMarkdown","markdown","_a","signalInnerHTML","markedOptions","isDisposed","cts","CancellationTokenSource","_uriMassage","part","parse","decodeURIComponent","cloneAndChange","uris","URI","encodeURIComponent","JSON","stringify","_href","href","isDomUri","uri","startsWith","Schemas","FileAccess","toString","query","with","withInnerHTML","Promise","c","renderer","marked","image","title","dimensions","attributes","parseHrefAndDimensions","concat","join","link","removeMarkdownEscapes","baseUrl","test","resolvePath","match","isTrusted","replace","paragraph","codeBlockRenderer","lang","id","defaultGenerator","raceCancellation","all","token","then","values","span","querySelector","asyncRenderCallback","call","catch","escape","onClick","DomEmitter","onAuxClick","Event","mouseEvent","middleButton","parentElement","dataset","err","onUnexpectedError","supportHtml","sanitizer","html","undefined","sanitize","silent","substr","supportThemeIcons","markdownEscapeEscapedIcons","renderedMarkdown","elements","renderLabelWithIcons","outerHTML","htmlParser","DOMParser","markdownHtmlDoc","parseFromString","sanitizeRenderedMarkdown","querySelectorAll","img","src","hrefAsUri","scheme","innerHTML","getElementsByTagName","listener","cancel","allowedSchemes","config","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_UNKNOWN_PROTOCOLS","getSanitizerOptions","dompurify","attrName","keepAttr","attrValue","anchor","node","attr","hasAttribute","getAttribute","includes","protocol","Object","assign","RETURN_TRUSTED_TYPE","timestamp","Date","now","button","rightButton","detail","pageX","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","iframeOffsets","self","view","StandardWheelEvent","deltaX","deltaY","targetNode","srcElement","e1","e2","wheelDeltaY","VERTICAL_AXIS","axis","deltaMode","DOM_DELTA_LINE","wheelDeltaX","HORIZONTAL_AXIS","wheelDelta","EventType","__decorate","decorators","desc","d","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Tap","Change","Start","End","Contextmenu","Gesture","dispatched","activeTouches","handle","targets","ignoreTargets","_lastSetTapCountTime","_register","DomUtils","onTouchStart","passive","onTouchEnd","onTouchMove","len","targetTouches","touch","item","identifier","initialTarget","initialTimeStamp","initialPageX","initialPageY","rollingTimestamps","rollingPageX","rollingPageY","evt","newGestureEvent","dispatchEvent","activeTouchCount","keys","changedTouches","hasOwnProperty","console","warn","holdTime","HOLD_DELAY","Math","abs","arrays","finalX","finalY","deltaT","dispatchTo","filter","t","Node","contains","inertia","createEvent","initEvent","tapCount","currentTime","getTime","setTapCount","CLEAR_TAP_COUNT_TIME","t1","vX","dirX","x","vY","dirY","y","delta_pos_x","delta_pos_y","stopped","SCROLL_FRICTION","translationX","translationY","shift","isTouchDevice","INSTANCE","Disposable","navigator","maxTouchPoints","memoize","BaseActionViewItem","context","action","_context","_action","Action","onDidChange","handleActionChangeEvent","enabled","updateEnabled","checked","updateChecked","class","updateClass","label","updateLabel","updateTooltip","tooltip","_actionRunner","ActionRunner","actionRunner","newContext","container","enableDragging","draggable","isFirefox","addDisposableListener","dataTransfer","setData","DataTransfers","TouchEventType","EventHelper","isMenu","remove","preserveFocus","types","useEventAsContext","run","tabIndex","focus","blur","focusable","ActionViewItem","icon","cssClass","append","$","Separator","keybinding","getAction","nls","comment","split","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","done","apply","ActionBar","_b","_c","_d","_e","_f","previousKeys","nextKeys","triggerKeyDown","_onDidBlur","Emitter","onDidBlur","_onDidCancel","onFirstListenerAdd","cancelHasListener","onDidCancel","_onDidRun","onDidRun","_onBeforeRun","onBeforeRun","_orientation","orientation","_triggerKeys","keyDown","triggerKeys","fire","_actionIds","viewItems","focusedItem","animated","eventHandled","equals","focusPrevious","focusNext","focusFirst","focusLast","trapsArrowNavigation","isTriggerKeyEvent","doTrigger","updateFocusedItem","focusTracker","previouslyFocusedItem","onDidFocus","actionsList","ariaLabel","firstEnabled","find","vi","isEnabled","setFocusable","ret","elem","setActionContext","arg","actions","actionViewItemElement","allowContextMenu","actionViewItemProvider","render","insertBefore","splice","selectFirst","findIndex","updateFocus","forceLoop","startIndex","preventLoopNavigation","focusOnlyEnabledItems","fromRight","preventScroll","forceFocus","actionViewItem","focusItem","getContainer","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","createAlertContainer","createStatusContainer","alert","msg","clearNode","insertMessage","status","isMacintosh","defaultOptions","buttonBackground","Color","buttonHoverBackground","buttonForeground","Button","_onDidClick","create","mixin","buttonSecondaryForeground","buttonSecondaryBackground","buttonSecondaryHoverBackground","buttonBorder","_element","eventType","setHoverBackground","applyStyles","trackFocus","hoverBackground","secondary","styles","background","foreground","border","color","borderWidth","borderStyle","borderColor","supportIcons","reset"],"sourceRoot":""}