{"version":3,"file":"static/js/monaco-editor-vendor.1b18e904.caa6284b.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/format.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { DocumentFormattingEditProviderRegistry, DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../../common/languages.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function alertFormattingEdits(edits) {\n    edits = edits.filter(edit => edit.range);\n    if (!edits.length) {\n        return;\n    }\n    let { range } = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n        range = Range.plusRange(range, edits[i].range);\n    }\n    const { startLineNumber, endLineNumber } = range;\n    if (startLineNumber === endLineNumber) {\n        if (edits.length === 1) {\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n        }\n        else {\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n        }\n    }\n    else {\n        if (edits.length === 1) {\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n        }\n        else {\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n        }\n    }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(model) {\n    const result = [];\n    const seen = new Set();\n    // (1) add all document formatter\n    const docFormatter = DocumentFormattingEditProviderRegistry.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\n                continue;\n            }\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nexport class FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static select(formatter, document, mode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (formatter.length === 0) {\n                return undefined;\n            }\n            const selector = Iterable.first(FormattingConflicts._selectors);\n            if (selector) {\n                return yield selector(formatter, document, mode);\n            }\n            return undefined;\n        });\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token);\n        }\n    });\n}\nexport function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        // make sure that ranges don't overlap nor touch each other\n        let ranges = [];\n        let len = 0;\n        for (let range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n            if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n                ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n            }\n            else {\n                len = ranges.push(range);\n            }\n        }\n        const computeEdits = (range) => __awaiter(this, void 0, void 0, function* () {\n            return (yield provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n        });\n        const hasIntersectingEdit = (a, b) => {\n            if (!a.length || !b.length) {\n                return false;\n            }\n            // quick exit if the list of ranges are completely unrelated [O(n)]\n            const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n            if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n                return false;\n            }\n            // fallback to a complete check [O(n^2)]\n            for (let edit of a) {\n                for (let otherEdit of b) {\n                    if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        const allEdits = [];\n        const rawEditsList = [];\n        try {\n            for (let range of ranges) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                rawEditsList.push(yield computeEdits(range));\n            }\n            for (let i = 0; i < ranges.length; ++i) {\n                for (let j = i + 1; j < ranges.length; ++j) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                        // Merge ranges i and j into a single range, recompute the associated edits\n                        const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                        const edits = yield computeEdits(mergedRange);\n                        ranges.splice(j, 1);\n                        ranges.splice(i, 1);\n                        ranges.push(mergedRange);\n                        rawEditsList.splice(j, 1);\n                        rawEditsList.splice(i, 1);\n                        rawEditsList.push(edits);\n                        // Restart scanning\n                        i = 0;\n                        j = 0;\n                    }\n                }\n            }\n            for (let rawEdits of rawEditsList) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                const minimalEdits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n                if (minimalEdits) {\n                    allEdits.push(...minimalEdits);\n                }\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (allEdits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, allEdits, true);\n            alertFormattingEdits(allEdits);\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = allEdits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], allEdits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = getRealAndSyntheticDocumentFormattersOrdered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token);\n        }\n    });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* Value */ | 4 /* Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        let edits;\n        try {\n            const rawEdits = yield provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n            edits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (!edits || edits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* Silent */);\n            if (mode !== 2 /* Silent */) {\n                alertFormattingEdits(edits);\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* Immediate */);\n            }\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = edits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], edits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n        for (const provider of providers) {\n            let rawEdits = yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, model, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getRealAndSyntheticDocumentFormattersOrdered(model);\n        for (const provider of providers) {\n            let rawEdits = yield Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getOnTypeFormattingEdits(workerService, model, position, ch, options, token) {\n    const providers = OnTypeFormattingEditProviderRegistry.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, range, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Range.isIRange(range));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentRangeFormattingEditsUntilResult(workerService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, options] = args;\n        assertType(URI.isUri(resource));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentFormattingEditsUntilResult(workerService, reference.object.textEditorModel, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, position, ch, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        assertType(typeof ch === 'string');\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getOnTypeFormattingEdits(workerService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../../common/languages.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _workerService) {\n        this._editor = _editor;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(OnTypeFormattingEditProviderRegistry.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(49 /* formatOnType */)) {\n                this._update();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(49 /* formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = OnTypeFormattingEditProviderRegistry.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        let triggerChars = new CharacterSet();\n        for (let ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            let lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _instantiationService) {\n        this.editor = editor;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(DocumentRangeFormattingEditProviderRegistry.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(48 /* formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!DocumentRangeFormattingEditProviderRegistry.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 36 /* KeyF */,\n                linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 39 /* KeyI */ },\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 36 /* KeyF */),\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        let singleEdits = [];\n        for (let edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (compareOrder === 'position') {\n                res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n            }\n            else {\n                res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        let oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (let provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { getBaseLabel } from '../../../../base/common/labels.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/common/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* Auto */,\n            vertical: 1 /* Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(59 /* lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                let container = document.createElement('div');\n                let relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${getBaseLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                let relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(44 /* fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        let range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        let position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nlet errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nlet warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nlet infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hc: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hc: '#0C141F' }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hc: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hc: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hc: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n"],"names":["EditorFontZoomIn","id","label","nls","alias","precondition","undefined","accessor","editor","EditorZoom","EditorAction","EditorFontZoomOut","EditorFontZoomReset","registerEditorAction","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","alertFormattingEdits","edits","filter","edit","range","length","i","Range","startLineNumber","endLineNumber","alert","getRealAndSyntheticDocumentFormattersOrdered","model","seen","Set","docFormatter","DocumentFormattingEditProviderRegistry","formatter","push","extensionId","add","ExtensionIdentifier","rangeFormatter","DocumentRangeFormattingEditProviderRegistry","has","displayName","provideDocumentFormattingEdits","options","token","provideDocumentRangeFormattingEdits","getFullModelRange","FormattingConflicts","selector","dispose","_selectors","unshift","document","mode","this","Iterable","formatDocumentRangesWithSelectedProvider","editorOrModel","rangeOrRanges","progress","instaService","get","IInstantiationService","isCodeEditor","getModel","provider","select","selected","report","invokeFunction","formatDocumentRangesWithProvider","workerService","IEditorWorkerService","cts","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","ranges","len","asArray","sort","getStartPosition","getEndPosition","f","computeEdits","getFormattingOptions","hasIntersectingEdit","a","b","mergedA","reduce","acc","val","some","x","otherEdit","allEdits","rawEditsList","isCancellationRequested","j","mergedRange","splice","rawEdits","computeMoreMinimalEdits","uri","minimalEdits","FormattingEdit","revealPositionInCenterIfOutsideViewport","getPosition","initialSelection","Selection","startColumn","endColumn","pushEditOperations","map","text","forceMoveMarkers","undoEdits","formatDocumentWithSelectedProvider","formatDocumentWithProvider","getDocumentRangeFormattingEditsUntilResult","providers","catch","onUnexpectedExternalError","isNonEmptyArray","getDocumentFormattingEditsUntilResult","getOnTypeFormattingEdits","position","ch","OnTypeFormattingEditProviderRegistry","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","LinkedList","CommandsRegistry","args","resource","assertType","URI","resolverService","ITextModelService","createModelReference","reference","object","textEditorModel","CancellationToken","Position","__decorate","decorators","target","key","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","FormatOnType","_editor","_workerService","_disposables","DisposableStore","_sessionDisposables","_update","onDidChangeModel","onDidChangeModelLanguage","onDidChangeConfiguration","hasChanged","clear","getOption","hasModel","support","triggerChars","CharacterSet","charCodeAt","onDidType","lastCharCode","_trigger","String","fromCharCode","getSelections","getSelection","isEmpty","CancellationTokenSource","unbind","onDidChangeModelContent","isFlush","cancel","changes","lineNumber","finally","ID","FormatOnPaste","_instantiationService","_callOnDispose","_callOnModel","onDidPaste","Progress","onUnexpectedError","FormatDocumentAction","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","linux","weight","contextMenuOpts","group","order","progressService","IEditorProgressService","showWhile","FormatSelectionAction","KeyChord","when","getLineMaxColumn","registerEditorContribution","ICodeEditorService","getFocusedCodeEditor","commandService","ICommandService","executeCommand","newEol","singleEdits","eol","pushEOL","editRange","validateRange","equalsRange","_edits","addUndoStops","pushUndoStop","_handleEolEdits","_isFullModelReplaceEdit","executeEdits","EditOperation","MarkerCoordinate","marker","index","total","MarkerList","resourceFilter","_markerService","_configService","_onDidChange","Emitter","onDidChange","event","_dispoables","_markers","_nextIdx","_resourceFilter","toString","compareOrder","getValue","compareMarker","compare","MarkerSeverity","severity","updateMarker","read","severities","m","onMarkerChanged","uris","fire","fwd","found","idx","findIndex","binarySearch","word","getWordAtPosition","containsPosition","isBeforeOrEqual","oldIdx","_initIdx","IMarkerService","IConfigurationService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_provider","getMarkerList","registerSingleton","MessageWidget","parent","onRelatedInformation","_openerService","_labelService","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","domNode","createElement","className","_messageBlock","classList","setAttribute","appendChild","_relatedBlock","dom","addStandardDisposableListener","preventDefault","related","_scrollable","ScrollableElement","horizontal","vertical","useShadows","horizontalScrollbarSize","verticalScrollbarSize","getDomNode","onScroll","style","left","scrollLeft","top","scrollTop","source","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","line","Math","max","clearNode","getAriaLabel","applyFontInfo","lastLineElement","innerText","height","lineHeight","detailsElement","sourceElement","codeElement","_codeLink","$","onclick","open","allowCommands","stopPropagation","append","relatedInformationNode","paddingTop","floor","container","relatedResource","getBaseLabel","title","getUriLabel","set","relatedMessage","fontInfo","scrollWidth","ceil","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","width","min","severityLabel","ariaLabel","getLineCount","lineContent","getLineContent","MarkerNavigationWidget","_themeService","_menuService","instantiationService","_contextKeyService","showArrow","showFrame","isAccessible","frameWidth","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","Color","_applyTheme","getColorTheme","onDidColorThemeChange","bind","create","theme","getColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","arrowColor","headerBackgroundColor","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","_parentContainer","backgroundColor","_actionbarWidget","actionRunner","onBeforeRun","focus","actions","menu","createMenu","TitleMenu","createAndFillInActionBarActions","icon","_icon","tabIndex","_container","_message","Error","markerIdx","markerCount","remove","update","editorPosition","computeRequiredHeight","detail","setTitle","basename","SeverityIcon","revealPositionNearTop","_relayout","heightInPixel","widthInPixel","_heightInPixel","layout","getHeightInLines","PeekViewWidget","MenuId","IThemeService","IOpenerService","IMenuService","IContextKeyService","ILabelService","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","registerColor","dark","light","hc","contrastBorder","transparent","editorBackground","MarkerController","_markerNavigationService","_editorService","_sessionDispoables","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","bindTo","_cleanUp","reset","_widget","_model","matches","reusePosition","move","createInstance","onDidClose","close","onDidChangeCursorPosition","_a","_b","_c","resetIndex","info","find","showStale","openCodeEditor","pinned","revealIfOpened","selection","collapseToStart","focusEditor","_getOrCreateModel","showAtMarker","multiFile","selectionRevealType","otherEditor","nagivate","getContribution","MarkerNavigationAction","_next","_multiFile","opts","_accessor","NextMarkerAction","LABEL","menuOpts","menuId","registerIcon","Codicon","PrevMarkerAction","NextMarkerInFilesAction","comment","PrevMarkerInFilesAction","RawContextKey","MarkerCommand","EditorCommand","registerEditorCommand","handler","secondary"],"sourceRoot":""}