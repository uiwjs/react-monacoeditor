"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[666],{76310:function(e,i,t){t.d(i,{CH:function(){return h},CR:function(){return u},D4:function(){return c},u7:function(){return d},xh:function(){return s},yu:function(){return l}});var n=t(60136),o=t(27277),r=t(15671),a=t(43144),s=function(e){(0,n.Z)(t,e);var i=(0,o.Z)(t);function t(e,n,o){var a;return(0,r.Z)(this,t),(a=i.call(this,e,n))._renderingContextBrand=void 0,a._viewLines=o,a}return(0,a.Z)(t,[{key:"linesVisibleRangesForRange",value:function(e,i){return this._viewLines.linesVisibleRangesForRange(e,i)}},{key:"visibleRangeForPosition",value:function(e){return this._viewLines.visibleRangeForPosition(e)}}]),t}(function(){function e(i,t){(0,r.Z)(this,e),this._restrictedRenderingContextBrand=void 0,this._viewLayout=i,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}return(0,a.Z)(e,[{key:"getScrolledTopFromAbsoluteTop",value:function(e){return e-this.scrollTop}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}},{key:"getDecorationsInViewport",value:function(){return this.viewportData.getDecorationsInViewport()}}]),e}()),d=(0,a.Z)((function e(i,t,n){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.lineNumber=t,this.ranges=n})),l=function(){function e(i,t){(0,r.Z)(this,e),this._horizontalRangeBrand=void 0,this.left=Math.round(i),this.width=Math.round(t)}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"from",value:function(i){for(var t=new Array(i.length),n=0,o=i.length;n<o;n++){var r=i[n];t[n]=new e(r.left,r.width)}return t}}]),e}(),u=function(){function e(i,t){(0,r.Z)(this,e),this._floatHorizontalRangeBrand=void 0,this.left=i,this.width=t}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"compare",value:function(e,i){return e.left-i.left}}]),e}(),c=(0,a.Z)((function e(i,t){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.originalLeft=t,this.left=Math.round(this.originalLeft)})),h=(0,a.Z)((function e(i,t){(0,r.Z)(this,e),this.outsideRenderedLine=i,this.ranges=t}))},56580:function(e,i,t){t.d(i,{N:function(){return d}});var n=t(15671),o=t(43144),r=t(23605),a=t(10849),s=t(4827),d=function(){function e(i,t,o,r){(0,n.Z)(this,e),this.configuration=i,this.viewModel=t,this.userInputEvents=o,this.commandDelegate=r}return(0,o.Z)(e,[{key:"paste",value:function(e,i,t,n){this.commandDelegate.paste(e,i,t,n)}},{key:"type",value:function(e){this.commandDelegate.type(e)}},{key:"compositionType",value:function(e,i,t,n){this.commandDelegate.compositionType(e,i,t,n)}},{key:"compositionStart",value:function(){this.commandDelegate.startComposition()}},{key:"compositionEnd",value:function(){this.commandDelegate.endComposition()}},{key:"cut",value:function(){this.commandDelegate.cut()}},{key:"setSelection",value:function(e){r.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}},{key:"_validateViewColumn",value:function(e){var i=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<i?new a.L(e.lineNumber,i):e}},{key:"_hasMulticursorModifier",value:function(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}},{key:"_hasNonMulticursorModifier",value:function(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}},{key:"dispatchMouse",value:function(e){var i=this.configuration.options,t=s.IJ&&i.get(98),n=i.get(18);e.middleButton&&!t?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}},{key:"_usualArgs",value:function(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}},{key:"moveTo",value:function(e){r.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_moveToSelect",value:function(e){r.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_columnSelect",value:function(e,i,t){e=this._validateViewColumn(e),r.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:i,doColumnSelect:t})}},{key:"_createCursor",value:function(e,i){e=this._validateViewColumn(e),r.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:i})}},{key:"_lastCursorMoveToSelect",value:function(e){r.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_wordSelect",value:function(e){r.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_wordSelectDrag",value:function(e){r.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorWordSelect",value:function(e){r.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lineSelect",value:function(e){r.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lineSelectDrag",value:function(e){r.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorLineSelect",value:function(e){r.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_lastCursorLineSelectDrag",value:function(e){r.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}},{key:"_selectAll",value:function(){r.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}},{key:"_convertViewToModelPosition",value:function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}},{key:"emitKeyDown",value:function(e){this.userInputEvents.emitKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.userInputEvents.emitKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.userInputEvents.emitContextMenu(e)}},{key:"emitMouseMove",value:function(e){this.userInputEvents.emitMouseMove(e)}},{key:"emitMouseLeave",value:function(e){this.userInputEvents.emitMouseLeave(e)}},{key:"emitMouseUp",value:function(e){this.userInputEvents.emitMouseUp(e)}},{key:"emitMouseDown",value:function(e){this.userInputEvents.emitMouseDown(e)}},{key:"emitMouseDrag",value:function(e){this.userInputEvents.emitMouseDrag(e)}},{key:"emitMouseDrop",value:function(e){this.userInputEvents.emitMouseDrop(e)}},{key:"emitMouseDropCanceled",value:function(){this.userInputEvents.emitMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.userInputEvents.emitMouseWheel(e)}}]),e}()},87405:function(e,i,t){t.d(i,{F:function(){return d},G:function(){return l}});var n,o=t(15671),r=t(43144),a=t(16688),s=t(63633),d=function(){function e(i){(0,o.Z)(this,e),this._createLine=i,this._set(1,[])}return(0,r.Z)(e,[{key:"flush",value:function(){this._set(1,[])}},{key:"_set",value:function(e,i){this._lines=i,this._rendLineNumberStart=e}},{key:"_get",value:function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}},{key:"getStartLineNumber",value:function(){return this._rendLineNumberStart}},{key:"getEndLineNumber",value:function(){return this._rendLineNumberStart+this._lines.length-1}},{key:"getCount",value:function(){return this._lines.length}},{key:"getLine",value:function(e){var i=e-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[i]}},{key:"onLinesDeleted",value:function(e,i){if(0===this.getCount())return null;var t=this.getStartLineNumber(),n=this.getEndLineNumber();if(i<t){var o=i-e+1;return this._rendLineNumberStart-=o,null}if(e>n)return null;for(var r=0,a=0,s=t;s<=n;s++){var d=s-this._rendLineNumberStart;e<=s&&s<=i&&(0===a?(r=d,a=1):a++)}if(e<t){var l=0;l=i<t?i-e+1:t-e,this._rendLineNumberStart-=l}return this._lines.splice(r,a)}},{key:"onLinesChanged",value:function(e,i){var t=e+i-1;if(0===this.getCount())return!1;for(var n=this.getStartLineNumber(),o=this.getEndLineNumber(),r=!1,a=e;a<=t;a++)a>=n&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}},{key:"onLinesInserted",value:function(e,i){if(0===this.getCount())return null;var t=i-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=t,null;if(e>o)return null;if(t+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);for(var r=[],a=0;a<t;a++)r[a]=this._createLine();var s=e-this._rendLineNumberStart,d=this._lines.slice(0,s),l=this._lines.slice(s,this._lines.length-t),u=this._lines.slice(this._lines.length-t,this._lines.length);return this._lines=d.concat(r).concat(l),u}},{key:"onTokensChanged",value:function(e){if(0===this.getCount())return!1;for(var i=this.getStartLineNumber(),t=this.getEndLineNumber(),n=!1,o=0,r=e.length;o<r;o++){var a=e[o];if(!(a.toLineNumber<i||a.fromLineNumber>t))for(var s=Math.max(i,a.fromLineNumber),d=Math.min(t,a.toLineNumber),l=s;l<=d;l++){var u=l-this._rendLineNumberStart;this._lines[u].onTokensChanged(),n=!0}}return n}}]),e}(),l=function(){function e(i){var t=this;(0,o.Z)(this,e),this._host=i,this.domNode=this._createDomNode(),this._linesCollection=new d((function(){return t._host.createVisibleLine()}))}return(0,r.Z)(e,[{key:"_createDomNode",value:function(){var e=(0,a.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}},{key:"onConfigurationChanged",value:function(e){return!!e.hasChanged(133)}},{key:"onFlushed",value:function(e){return this._linesCollection.flush(),!0}},{key:"onLinesChanged",value:function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){var i=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(i)for(var t=0,n=i.length;t<n;t++){var o=i[t].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onLinesInserted",value:function(e){var i=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(i)for(var t=0,n=i.length;t<n;t++){var o=i[t].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onTokensChanged",value:function(e){return this._linesCollection.onTokensChanged(e.ranges)}},{key:"onZonesChanged",value:function(e){return!0}},{key:"getStartLineNumber",value:function(){return this._linesCollection.getStartLineNumber()}},{key:"getEndLineNumber",value:function(){return this._linesCollection.getEndLineNumber()}},{key:"getVisibleLine",value:function(e){return this._linesCollection.getLine(e)}},{key:"renderLines",value:function(e){var i=this._linesCollection._get(),t=new u(this.domNode.domNode,this._host,e),n={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},o=t.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}]),e}(),u=function(){function e(i,t,n){(0,o.Z)(this,e),this.domNode=i,this.host=t,this.viewportData=n}return(0,r.Z)(e,[{key:"render",value:function(e,i,t,n){var o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<i||t<o.rendLineNumberStart){o.rendLineNumberStart=i,o.linesLength=t-i+1,o.lines=[];for(var r=i;r<=t;r++)o.lines[r-i]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(i-o.rendLineNumberStart,0),Math.min(t-o.rendLineNumberStart,o.linesLength-1),n,i),o.rendLineNumberStart>i){var a=i,s=Math.min(t,o.rendLineNumberStart-1);a<=s&&(this._insertLinesBefore(o,a,s,n,i),o.linesLength+=s-a+1)}else if(o.rendLineNumberStart<i){var d=Math.min(o.linesLength,i-o.rendLineNumberStart);d>0&&(this._removeLinesBefore(o,d),o.linesLength-=d)}if(o.rendLineNumberStart=i,o.rendLineNumberStart+o.linesLength-1<t){var l=o.rendLineNumberStart+o.linesLength,u=t;l<=u&&(this._insertLinesAfter(o,l,u,n,i),o.linesLength+=u-l+1)}else if(o.rendLineNumberStart+o.linesLength-1>t){var c=Math.max(0,t-o.rendLineNumberStart+1),h=o.linesLength-1-c+1;h>0&&(this._removeLinesAfter(o,h),o.linesLength-=h)}return this._finishRendering(o,!1,n),o}},{key:"_renderUntouchedLines",value:function(e,i,t,n,o){for(var r=e.rendLineNumberStart,a=e.lines,s=i;s<=t;s++){var d=r+s;a[s].layoutLine(d,n[d-o])}}},{key:"_insertLinesBefore",value:function(e,i,t,n,o){for(var r=[],a=0,s=i;s<=t;s++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}},{key:"_removeLinesBefore",value:function(e,i){for(var t=0;t<i;t++){var n=e.lines[t].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,i)}},{key:"_insertLinesAfter",value:function(e,i,t,n,o){for(var r=[],a=0,s=i;s<=t;s++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}},{key:"_removeLinesAfter",value:function(e,i){for(var t=e.linesLength-i,n=0;n<i;n++){var o=e.lines[t+n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(t,i)}},{key:"_finishRenderingNewLines",value:function(i,t,n,o){e._ttPolicy&&(n=e._ttPolicy.createHTML(n));var r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);for(var a=this.domNode.lastChild,s=i.linesLength-1;s>=0;s--){var d=i.lines[s];o[s]&&(d.setDomNode(a),a=a.previousSibling)}}},{key:"_finishRenderingInvalidLines",value:function(i,t,n){var o=document.createElement("div");e._ttPolicy&&(t=e._ttPolicy.createHTML(t)),o.innerHTML=t;for(var r=0;r<i.linesLength;r++){var a=i.lines[r];if(n[r]){var s=o.firstChild,d=a.getDomNode();d.parentNode.replaceChild(s,d),a.setDomNode(s)}}}},{key:"_finishRendering",value:function(i,t,n){var o=e._sb,r=i.linesLength,a=i.lines,s=i.rendLineNumberStart,d=[];o.reset();for(var l=!1,u=0;u<r;u++){var c=a[u];if(d[u]=!1,!c.getDomNode())c.renderLine(u+s,n[u],this.viewportData,o)&&(d[u]=!0,l=!0)}l&&this._finishRenderingNewLines(i,t,o.build(),d),o.reset();for(var h=!1,v=[],g=0;g<r;g++){var f=a[g];if(v[g]=!1,!d[g])f.renderLine(g+s,n[g],this.viewportData,o)&&(v[g]=!0,h=!0)}h&&this._finishRenderingInvalidLines(i,o.build(),v)}}]),e}();u._ttPolicy=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("editorViewLayer",{createHTML:function(e){return e}}),u._sb=(0,s.l$)(1e5)},79002:function(e,i,t){t.d(i,{Ib:function(){return m},Ip:function(){return f}});var n=t(15671),o=t(43144),r=t(97326),a=t(11752),s=t(61120),d=t(60136),l=t(27277),u=t(16688),c=t(6815),h=t(87405),v=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;return(0,n.Z)(this,t),(o=i.call(this,e))._visibleLines=new h.G((0,r.Z)(o)),o.domNode=o._visibleLines.domNode,o._dynamicOverlays=[],o._isFocused=!1,o.domNode.setClassName("view-overlays"),o}return(0,o.Z)(t,[{key:"shouldRender",value:function(){if((0,a.Z)((0,s.Z)(t.prototype),"shouldRender",this).call(this))return!0;for(var e=0,i=this._dynamicOverlays.length;e<i;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}},{key:"dispose",value:function(){(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this);for(var e=0,i=this._dynamicOverlays.length;e<i;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new g(this._context.configuration,this._dynamicOverlays)}},{key:"addDynamicOverlay",value:function(e){this._dynamicOverlays.push(e)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e);for(var i=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber(),n=i;n<=t;n++){this._visibleLines.getVisibleLine(n).onConfigurationChanged(e)}return!0}},{key:"onFlushed",value:function(e){return this._visibleLines.onFlushed(e)}},{key:"onFocusChanged",value:function(e){return this._isFocused=e.isFocused,!0}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onScrollChanged",value:function(e){return this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._visibleLines.onZonesChanged(e)}},{key:"prepareRender",value:function(e){for(var i=this._dynamicOverlays.filter((function(e){return e.shouldRender()})),t=0,n=i.length;t<n;t++){var o=i[t];o.prepareRender(e),o.onDidRender()}}},{key:"render",value:function(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}},{key:"_viewOverlaysRender",value:function(e){this._visibleLines.renderLines(e.viewportData)}}]),t}(t(89378).E),g=function(){function e(i,t){(0,n.Z)(this,e),this._configuration=i,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}return(0,o.Z)(e,[{key:"getDomNode",value:function(){return this._domNode?this._domNode.domNode:null}},{key:"setDomNode",value:function(e){this._domNode=(0,u.X)(e)}},{key:"onContentChanged",value:function(){}},{key:"onTokensChanged",value:function(){}},{key:"onConfigurationChanged",value:function(e){this._lineHeight=this._configuration.options.get(61)}},{key:"renderLine",value:function(e,i,t,n){for(var o="",r=0,a=this._dynamicOverlays.length;r<a;r++){o+=this._dynamicOverlays[r].render(t.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,n.appendASCIIString('<div style="position:absolute;top:'),n.appendASCIIString(String(i)),n.appendASCIIString("px;width:100%;height:"),n.appendASCIIString(String(this._lineHeight)),n.appendASCIIString('px;">'),n.appendASCIIString(o),n.appendASCIIString("</div>"),!0)}},{key:"layoutLine",value:function(e,i){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(this._lineHeight))}}]),e}(),f=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;(0,n.Z)(this,t);var r=(o=i.call(this,e))._context.configuration.options.get(133);return o._contentWidth=r.contentWidth,o.domNode.setHeight(0),o}return(0,o.Z)(t,[{key:"onConfigurationChanged",value:function(e){var i=this._context.configuration.options.get(133);return this._contentWidth=i.contentWidth,(0,a.Z)((0,s.Z)(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(t.prototype),"_viewOverlaysRender",this).call(this,e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}]),t}(v),m=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;(0,n.Z)(this,t);var r=(o=i.call(this,e))._context.configuration.options,a=r.get(133);return o._contentLeft=a.contentLeft,o.domNode.setClassName("margin-view-overlays"),o.domNode.setWidth(1),(0,c.N)(o.domNode,r.get(46)),o}return(0,o.Z)(t,[{key:"onConfigurationChanged",value:function(e){var i=this._context.configuration.options;(0,c.N)(this.domNode,i.get(46));var n=i.get(133);return this._contentLeft=n.contentLeft,(0,a.Z)((0,s.Z)(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(t.prototype),"_viewOverlaysRender",this).call(this,e);var i=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}]),t}(v)},89378:function(e,i,t){t.d(i,{E:function(){return u},K:function(){return c}});var n=t(15671),o=t(43144),r=t(97326),a=t(11752),s=t(61120),d=t(60136),l=t(27277),u=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var o;return(0,n.Z)(this,t),(o=i.call(this))._context=e,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this)}}]),t}(t(82978).O),c=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,null,[{key:"write",value:function(e,i){e.setAttribute("data-mprt",String(i))}},{key:"read",value:function(e){var i=e.getAttribute("data-mprt");return null===i?0:parseInt(i,10)}},{key:"collect",value:function(e,i){for(var t=[],n=0;e&&e!==document.body&&e!==i;)e.nodeType===e.ELEMENT_NODE&&(t[n++]=this.read(e)),e=e.parentElement;for(var o=new Uint8Array(n),r=0;r<n;r++)o[r]=t[n-r-1];return o}}]),e}()},57687:function(e,i,t){t.d(i,{q:function(){return r}});var n=t(15671),o=t(43144),r=function(){function e(i){(0,n.Z)(this,e),this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=i}return(0,o.Z)(e,[{key:"emitKeyDown",value:function(e){var i;null===(i=this.onKeyDown)||void 0===i||i.call(this,e)}},{key:"emitKeyUp",value:function(e){var i;null===(i=this.onKeyUp)||void 0===i||i.call(this,e)}},{key:"emitContextMenu",value:function(e){var i;null===(i=this.onContextMenu)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseMove",value:function(e){var i;null===(i=this.onMouseMove)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseLeave",value:function(e){var i;null===(i=this.onMouseLeave)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDown",value:function(e){var i;null===(i=this.onMouseDown)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseUp",value:function(e){var i;null===(i=this.onMouseUp)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrag",value:function(e){var i;null===(i=this.onMouseDrag)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrop",value:function(e){var i;null===(i=this.onMouseDrop)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDropCanceled",value:function(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}},{key:"emitMouseWheel",value:function(e){var i;null===(i=this.onMouseWheel)||void 0===i||i.call(this,e)}},{key:"_convertViewToModelMouseEvent",value:function(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}},{key:"_convertViewToModelMouseTarget",value:function(i){return e.convertViewToModelMouseTarget(i,this._coordinatesConverter)}}],[{key:"convertViewToModelMouseTarget",value:function(e,i){var t=Object.assign({},e);return t.position&&(t.position=i.convertViewPositionToModelPosition(t.position)),t.range&&(t.range=i.convertViewRangeToModelRange(t.range)),t}}]),e}()},48483:function(e,i,t){t.d(i,{Gm:function(){return te}});var n=t(29439),o=t(74165),r=t(37762),a=t(97326),s=t(11752),d=t(61120),l=t(60136),u=t(27277),c=t(15671),h=t(43144),v=(t(2893),t(87697)),g=t(53210),f=t(68552),m=t(28941),_=t(10526),p=t(16496),y=t(68915),C=t(98351),w=t(56692),D=t(94885),b=t(57687),L=t(31492),S=t(48454),N=t(34538),E=t(10849),k=t(30788),M=t(52091),I=t(72048),R=t(52925),T=t(44474),O=t(77161),x=t(2374),P=t(6574),V=t(80270),Z=t(89850),W=t(49525),F=t(8850),A=t(30045),H=t(13023),Q=t(3553),z=t(99277),U=t(64272),B=t(49304),K=t(36652),q=t(13805),j=t(26765),X=t(6815),J=t(45161),Y=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},G=function(e,i){return function(t,n){i(t,n,e)}},$=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},ee=0,ie=function(){function e(i,t,n,o,r){(0,c.Z)(this,e),this.model=i,this.viewModel=t,this.view=n,this.hasRealView=o,this.listenersToRemove=r}return(0,h.Z)(e,[{key:"dispose",value:function(){(0,_.B9)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}]),e}(),te=function(e){(0,l.Z)(t,e);var i=(0,u.Z)(t);function t(e,n,s,d,l,u,h,v,_,p,y,w){var D;(0,c.Z)(this,t),(D=i.call(this)).languageConfigurationService=y,D._deliveryQueue=new m.F3,D._onDidDispose=D._register(new m.Q5),D.onDidDispose=D._onDidDispose.event,D._onDidChangeModelContent=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelContent=D._onDidChangeModelContent.event,D._onDidChangeModelLanguage=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelLanguage=D._onDidChangeModelLanguage.event,D._onDidChangeModelLanguageConfiguration=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelLanguageConfiguration=D._onDidChangeModelLanguageConfiguration.event,D._onDidChangeModelOptions=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelOptions=D._onDidChangeModelOptions.event,D._onDidChangeModelDecorations=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelDecorations=D._onDidChangeModelDecorations.event,D._onDidChangeModelTokens=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModelTokens=D._onDidChangeModelTokens.event,D._onDidChangeConfiguration=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeConfiguration=D._onDidChangeConfiguration.event,D._onDidChangeModel=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeModel=D._onDidChangeModel.event,D._onDidChangeCursorPosition=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeCursorPosition=D._onDidChangeCursorPosition.event,D._onDidChangeCursorSelection=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeCursorSelection=D._onDidChangeCursorSelection.event,D._onDidAttemptReadOnlyEdit=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidAttemptReadOnlyEdit=D._onDidAttemptReadOnlyEdit.event,D._onDidLayoutChange=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidLayoutChange=D._onDidLayoutChange.event,D._editorTextFocus=D._register(new ne({deliveryQueue:D._deliveryQueue})),D.onDidFocusEditorText=D._editorTextFocus.onDidChangeToTrue,D.onDidBlurEditorText=D._editorTextFocus.onDidChangeToFalse,D._editorWidgetFocus=D._register(new ne({deliveryQueue:D._deliveryQueue})),D.onDidFocusEditorWidget=D._editorWidgetFocus.onDidChangeToTrue,D.onDidBlurEditorWidget=D._editorWidgetFocus.onDidChangeToFalse,D._onWillType=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onWillType=D._onWillType.event,D._onDidType=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidType=D._onDidType.event,D._onDidCompositionStart=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidCompositionStart=D._onDidCompositionStart.event,D._onDidCompositionEnd=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidCompositionEnd=D._onDidCompositionEnd.event,D._onDidPaste=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidPaste=D._onDidPaste.event,D._onMouseUp=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseUp=D._onMouseUp.event,D._onMouseDown=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseDown=D._onMouseDown.event,D._onMouseDrag=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseDrag=D._onMouseDrag.event,D._onMouseDrop=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseDrop=D._onMouseDrop.event,D._onMouseDropCanceled=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseDropCanceled=D._onMouseDropCanceled.event,D._onDropIntoEditor=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDropIntoEditor=D._onDropIntoEditor.event,D._onContextMenu=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onContextMenu=D._onContextMenu.event,D._onMouseMove=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseMove=D._onMouseMove.event,D._onMouseLeave=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseLeave=D._onMouseLeave.event,D._onMouseWheel=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onMouseWheel=D._onMouseWheel.event,D._onKeyUp=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onKeyUp=D._onKeyUp.event,D._onKeyDown=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onKeyDown=D._onKeyDown.event,D._onDidContentSizeChange=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidContentSizeChange=D._onDidContentSizeChange.event,D._onDidScrollChange=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidScrollChange=D._onDidScrollChange.event,D._onDidChangeViewZones=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeViewZones=D._onDidChangeViewZones.event,D._onDidChangeHiddenAreas=D._register(new m.Q5({deliveryQueue:D._deliveryQueue})),D.onDidChangeHiddenAreas=D._onDidChangeHiddenAreas.event,D._bannerDomNode=null,D._dropIntoEditorDecorations=D.createDecorationsCollection();var b,L=Object.assign({},n);D._domElement=e,D._overflowWidgetsDomNode=L.overflowWidgetsDomNode,delete L.overflowWidgetsDomNode,D._id=++ee,D._decorationTypeKeysToIds={},D._decorationTypeSubtypes={},D._telemetryData=s.telemetryData,D._configuration=D._register(D._createConfiguration(s.isSimpleWidget||!1,L,p)),D._register(D._configuration.onDidChange((function(e){D._onDidChangeConfiguration.fire(e);var i=D._configuration.options;if(e.hasChanged(133)){var t=i.get(133);D._onDidLayoutChange.fire(t)}}))),D._contextKeyService=D._register(h.createScoped(D._domElement)),D._notificationService=_,D._codeEditorService=l,D._commandService=u,D._themeService=v,D._register(new oe((0,a.Z)(D),D._contextKeyService)),D._register(new re((0,a.Z)(D),D._contextKeyService,w)),D._instantiationService=d.createChild(new A.y([W.i6,D._contextKeyService])),D._modelData=null,D._contributions={},D._actions={},D._focusTracker=new ae(e),D._register(D._focusTracker.onChange((function(){D._editorWidgetFocus.setValue(D._focusTracker.hasFocus())}))),D._contentWidgets={},D._overlayWidgets={},b=Array.isArray(s.contributions)?s.contributions:C.Uc.getEditorContributions();var S,N=(0,r.Z)(b);try{for(N.s();!(S=N.n()).done;){var E=S.value;if(D._contributions[E.id])(0,f.dL)(new Error("Cannot have two contributions with the same id ".concat(E.id)));else try{var k=D._instantiationService.createInstance(E.ctor,(0,a.Z)(D));D._contributions[E.id]=k}catch(R){(0,f.dL)(R)}}}catch(R){N.e(R)}finally{N.f()}C.Uc.getEditorActions().forEach((function(e){if(D._actions[e.id])(0,f.dL)(new Error("Cannot have two actions with the same id ".concat(e.id)));else{var i=new I.p(e.id,e.label,e.alias,(0,U.f6)(e.precondition),(function(){return D._instantiationService.invokeFunction((function(i){return Promise.resolve(e.runEditorCommand(i,(0,a.Z)(D),null))}))}),D._contextKeyService);D._actions[i.id]=i}}));var M=function(){return!D._configuration.options.get(83)&&D._configuration.options.get(32).enabled};return D._register(new g.DragAndDropObserver(D._domElement,{onDragEnter:function(){},onDragOver:function(e){if(M()){var i=D.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&D.showDropIndicatorAt(i.position)}},onDrop:function(e){return $((0,a.Z)(D),void 0,void 0,(0,o.Z)().mark((function i(){var t;return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(M()){i.next=2;break}return i.abrupt("return");case 2:if(this.removeDropIndicator(),e.dataTransfer){i.next=5;break}return i.abrupt("return");case 5:(null===(t=this.getTargetAtClientPoint(e.clientX,e.clientY))||void 0===t?void 0:t.position)&&this._onDropIntoEditor.fire({position:t.position,event:e});case 7:case"end":return i.stop()}}),i,this)})))},onDragLeave:function(){D.removeDropIndicator()},onDragEnd:function(){D.removeDropIndicator()}})),D._codeEditorService.addCodeEditor((0,a.Z)(D)),D}return(0,h.Z)(t,[{key:"isSimpleWidget",get:function(){return this._configuration.isSimpleWidget}},{key:"_createConfiguration",value:function(e,i,t){return new y.z(e,i,this._domElement,t)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return R.g.ICodeEditor}},{key:"dispose",value:function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();for(var e=Object.keys(this._contributions),i=0,n=e.length;i<n;i++){var o=e[i];this._contributions[o].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),(0,s.Z)((0,d.Z)(t.prototype),"dispose",this).call(this)}},{key:"invokeWithinContext",value:function(e){return this._instantiationService.invokeFunction(e)}},{key:"updateOptions",value:function(e){this._configuration.updateOptions(e||{})}},{key:"getOptions",value:function(){return this._configuration.options}},{key:"getOption",value:function(e){return this._configuration.options.get(e)}},{key:"getRawOptions",value:function(){return this._configuration.getRawOptions()}},{key:"getOverflowWidgetsDomNode",value:function(){return this._overflowWidgetsDomNode}},{key:"getConfiguredWordAtPosition",value:function(e){return this._modelData?q.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";var i=!(!e||!e.preserveBOM),t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}},{key:"setValue",value:function(e){this._modelData&&this._modelData.model.setValue(e)}},{key:"getModel",value:function(){return this._modelData?this._modelData.model:null}},{key:"setModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=e;if((null!==this._modelData||null!==i)&&(!this._modelData||this._modelData.model!==i)){var t=this.hasTextFocus(),n=this._detachModel();this._attachModel(i),t&&this.hasModel()&&this.focus();var o={oldModelUrl:n?n.uri:null,newModelUrl:i?i.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(n)}}},{key:"_removeDecorationTypes",value:function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var i=this._decorationTypeSubtypes[e];for(var t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}},{key:"getVisibleRanges",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}},{key:"getWhitespaces",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}},{key:"getTopForLineNumber",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,1,i):-1}},{key:"getTopForPosition",value:function(e,i){return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,i,!1):-1}},{key:"getBottomForLineNumber",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?t._getVerticalOffsetAfterPosition(this._modelData,e,1,i):-1}},{key:"setHiddenAreas",value:function(e){var i;null===(i=this._modelData)||void 0===i||i.viewModel.setHiddenAreas(e.map((function(e){return k.e.lift(e)})))}},{key:"getVisibleColumnFromPosition",value:function(e){if(!this._modelData)return e.column;var i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return N.i.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}},{key:"getPosition",value:function(){return this._modelData?this._modelData.viewModel.getPosition():null}},{key:"setPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!E.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}},{key:"_sendRevealRange",value:function(e,i,t,n){if(this._modelData){if(!k.e.isIRange(e))throw new Error("Invalid arguments");var o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",t,r,i,n)}}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,i)}},{key:"_revealLine",value:function(e,i,t){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e,1,e,1),i,!1,t)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,i)}},{key:"_revealPosition",value:function(e,i,t,n){if(!E.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e.lineNumber,e.column,e.lineNumber,e.column),i,t,n)}},{key:"getSelection",value:function(){return this._modelData?this._modelData.viewModel.getSelection():null}},{key:"getSelections",value:function(){return this._modelData?this._modelData.viewModel.getSelections():null}},{key:"setSelection",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=M.Y.isISelection(e),n=k.e.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e,i);else if(n){var o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,i)}}},{key:"_setSelectionImpl",value:function(e,i){if(this._modelData){var t=new M.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[t])}}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,0,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,1,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,2,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,5,t)}},{key:"_revealLines",value:function(e,i,t,n){if("number"!==typeof e||"number"!==typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new k.e(e,1,i,1),t,!1,n)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,t?1:0,n,i)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,i)}},{key:"_revealRange",value:function(e,i,t,n){if(!k.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(k.e.lift(e),i,t,n)}},{key:"setSelections",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var n=0,o=e.length;n<o;n++)if(!M.Y.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}},{key:"getContentWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}},{key:"getScrollWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}},{key:"getScrollLeft",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}},{key:"getContentHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}},{key:"getScrollHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}},{key:"getScrollTop",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}},{key:"setScrollLeft",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}},{key:"setScrollTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}},{key:"setScrollPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}},{key:"saveViewState",value:function(){if(!this._modelData)return null;for(var e={},i=0,t=Object.keys(this._contributions);i<t.length;i++){var n=t[i],o=this._contributions[n];"function"===typeof o.saveViewState&&(e[n]=o.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}},{key:"restoreViewState",value:function(e){if(this._modelData&&this._modelData.hasRealView){var i=e;if(i&&i.cursorState&&i.viewState){var t=i.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]);for(var n=i.contributionsState||{},o=Object.keys(this._contributions),r=0,a=o.length;r<a;r++){var s=o[r],d=this._contributions[s];"function"===typeof d.restoreViewState&&d.restoreViewState(n[s])}var l=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(l)}}}},{key:"getContribution",value:function(e){return this._contributions[e]||null}},{key:"getActions",value:function(){for(var e=[],i=Object.keys(this._actions),t=0,n=i.length;t<n;t++){var o=i[t];e.push(this._actions[o])}return e}},{key:"getSupportedActions",value:function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()}))}},{key:"getAction",value:function(e){return this._actions[e]||null}},{key:"trigger",value:function(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":var n=t;return void this._type(e,n.text||"");case"replacePreviousChar":var o=t;return void this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);case"compositionType":var r=t;return void this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);case"paste":var a=t;return void this._paste(e,a.text||"",a.pasteOnNewLine||!1,a.multicursorText||null,a.mode||null);case"cut":return void this._cut(e)}var s=this.getAction(i);s?Promise.resolve(s.run()).then(void 0,f.dL):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}},{key:"_triggerCommand",value:function(e,i){this._commandService.executeCommand(e,i)}},{key:"_startComposition",value:function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}},{key:"_endComposition",value:function(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}},{key:"_type",value:function(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}},{key:"_compositionType",value:function(e,i,t,n,o){this._modelData&&this._modelData.viewModel.compositionType(i,t,n,o,e)}},{key:"_paste",value:function(e,i,t,n,o){if(this._modelData&&0!==i.length){var r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(i,t,n,e);var s=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new k.e(a.lineNumber,a.column,s.lineNumber,s.column),languageId:o})}}},{key:"_cut",value:function(e){this._modelData&&this._modelData.viewModel.cut(e)}},{key:"_triggerEditorCommand",value:function(e,i,t){var n=this,o=C.Uc.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(o.runEditorCommand(e,n,t)).then(void 0,f.dL)})),!0)}},{key:"_getViewModel",value:function(){return this._modelData?this._modelData.viewModel:null}},{key:"pushUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(83)&&(this._modelData.model.pushStackElement(),!0))}},{key:"popUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(83)&&(this._modelData.model.popStackElement(),!0))}},{key:"executeEdits",value:function(e,i,t){return!!this._modelData&&(!this._configuration.options.get(83)&&(n=t?Array.isArray(t)?function(){return t}:t:function(){return null},this._modelData.viewModel.executeEdits(e,i,n),!0));var n}},{key:"executeCommand",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}},{key:"executeCommands",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}},{key:"createDecorationsCollection",value:function(e){return new se(this,e)}},{key:"changeDecorations",value:function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}},{key:"getLineDecorations",value:function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,L.$J)(this._configuration.options)):null}},{key:"getDecorationsInRange",value:function(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,L.$J)(this._configuration.options)):null}},{key:"deltaDecorations",value:function(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}},{key:"removeDecorations",value:function(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((function(i){i.deltaDecorations(e,[])}))}},{key:"removeDecorationsByType",value:function(e){var i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}},{key:"getLayoutInfo",value:function(){return this._configuration.options.get(133)}},{key:"createOverviewRuler",value:function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getDomNode",value:function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}},{key:"layout",value:function(e){this._configuration.observeContainer(e),this.render()}},{key:"focus",value:function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}},{key:"hasTextFocus",value:function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}},{key:"hasWidgetFocus",value:function(){return this._focusTracker&&this._focusTracker.hasFocus()}},{key:"addContentWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}},{key:"layoutContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}},{key:"removeContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(t)}}},{key:"addOverlayWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}},{key:"layoutOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}},{key:"removeOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(t)}}},{key:"changeViewZones",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}},{key:"getTargetAtClientPoint",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}},{key:"getScrolledVisiblePosition",value:function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var i=this._modelData.model.validatePosition(e),n=this._configuration.options,o=n.get(133);return{top:t._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:n.get(61)}}},{key:"getOffsetForColumn",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}},{key:"setAriaOptions",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}},{key:"applyFontInfo",value:function(e){(0,X.N)(e,this._configuration.options.get(46))}},{key:"setBanner",value:function(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}},{key:"_attachModel",value:function(e){var i=this;if(e){var t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();var o=new V.j(this._id,this._configuration,e,K.C.create(),B.p.create(this._configuration.options),(function(e){return g.scheduleAtNextAnimationFrame(e)}),this.languageConfigurationService,this._themeService);t.push(e.onWillDispose((function(){return i.setModel(null)}))),t.push(o.onEvent((function(t){switch(t.kind){case 0:i._onDidContentSizeChange.fire(t);break;case 1:i._editorTextFocus.setValue(t.hasFocus);break;case 2:i._onDidScrollChange.fire(t);break;case 3:i._onDidChangeViewZones.fire();break;case 4:i._onDidChangeHiddenAreas.fire();break;case 5:i._onDidAttemptReadOnlyEdit.fire();break;case 6:t.reachedMaxCursorCount&&i._notificationService.warn(v.NC("cursors.maximum","The number of cursors has been limited to {0}.",S.U.MAX_CURSOR_COUNT));for(var n=[],o=0,r=t.selections.length;o<r;o++)n[o]=t.selections[o].getPosition();var a={position:n[0],secondaryPositions:n.slice(1),reason:t.reason,source:t.source};i._onDidChangeCursorPosition.fire(a);var s={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};i._onDidChangeCursorSelection.fire(s);break;case 7:i._onDidChangeModelDecorations.fire(t.event);break;case 8:i._domElement.setAttribute("data-mode-id",e.getLanguageId()),i._onDidChangeModelLanguage.fire(t.event);break;case 9:i._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:i._onDidChangeModelContent.fire(t.event);break;case 11:i._onDidChangeModelOptions.fire(t.event);break;case 12:i._onDidChangeModelTokens.fire(t.event)}})));var r=this._createView(o),a=(0,n.Z)(r,2),s=a[0],d=a[1];if(d){this._domElement.appendChild(s.domNode.domNode);for(var l=Object.keys(this._contentWidgets),u=0,c=l.length;u<c;u++){var h=l[u];s.addContentWidget(this._contentWidgets[h])}for(var f=0,m=(l=Object.keys(this._overlayWidgets)).length;f<m;f++){var _=l[f];s.addOverlayWidget(this._overlayWidgets[_])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ie(e,o,s,d,t)}else this._modelData=null}},{key:"_createView",value:function(e){var i,t=this;i=this.isSimpleWidget?{paste:function(e,i,n,o){t._paste("keyboard",e,i,n,o)},type:function(e){t._type("keyboard",e)},compositionType:function(e,i,n,o){t._compositionType("keyboard",e,i,n,o)},startComposition:function(){t._startComposition()},endComposition:function(){t._endComposition("keyboard")},cut:function(){t._cut("keyboard")}}:{paste:function(e,i,n,o){var r={text:e,pasteOnNewLine:i,multicursorText:n,mode:o};t._commandService.executeCommand("paste",r)},type:function(e){var i={text:e};t._commandService.executeCommand("type",i)},compositionType:function(e,i,n,o){if(n||o){var r={text:e,replacePrevCharCnt:i,replaceNextCharCnt:n,positionDelta:o};t._commandService.executeCommand("compositionType",r)}else{var a={text:e,replaceCharCnt:i};t._commandService.executeCommand("replacePreviousChar",a)}},startComposition:function(){t._commandService.executeCommand("compositionStart",{})},endComposition:function(){t._commandService.executeCommand("compositionEnd",{})},cut:function(){t._commandService.executeCommand("cut",{})}};var n=new b.q(e.coordinatesConverter);return n.onKeyDown=function(e){return t._onKeyDown.fire(e)},n.onKeyUp=function(e){return t._onKeyUp.fire(e)},n.onContextMenu=function(e){return t._onContextMenu.fire(e)},n.onMouseMove=function(e){return t._onMouseMove.fire(e)},n.onMouseLeave=function(e){return t._onMouseLeave.fire(e)},n.onMouseDown=function(e){return t._onMouseDown.fire(e)},n.onMouseUp=function(e){return t._onMouseUp.fire(e)},n.onMouseDrag=function(e){return t._onMouseDrag.fire(e)},n.onMouseDrop=function(e){return t._onMouseDrop.fire(e)},n.onMouseDropCanceled=function(e){return t._onMouseDropCanceled.fire(e)},n.onMouseWheel=function(e){return t._onMouseWheel.fire(e)},[new D.G(i,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}},{key:"_postDetachModelCleanup",value:function(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}},{key:"_detachModel",value:function(){if(!this._modelData)return null;var e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}},{key:"_removeDecorationType",value:function(e){this._codeEditorService.removeDecorationType(e)}},{key:"hasModel",value:function(){return null!==this._modelData}},{key:"showDropIndicatorAt",value:function(e){var i=[{range:new k.e(e.lineNumber,e.column,e.lineNumber,e.column),options:t.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(e,1)}},{key:"removeDropIndicator",value:function(){this._dropIntoEditorDecorations.clear()}}],[{key:"_getVerticalOffsetAfterPosition",value:function(e,i,t,n){var o=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}},{key:"_getVerticalOffsetForPosition",value:function(e,i,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}}]),t}(_.JT);te.dropIntoEditorDecorationOptions=O.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),te=Y([G(3,F.TG),G(4,w.$),G(5,Z.Hy),G(6,W.i6),G(7,Q.XE),G(8,H.lT),G(9,z.F),G(10,j.c_),G(11,J.p)],te);var ne=function(e){(0,l.Z)(t,e);var i=(0,u.Z)(t);function t(e){var n;return(0,c.Z)(this,t),(n=i.call(this))._emitterOptions=e,n._onDidChangeToTrue=n._register(new m.Q5(n._emitterOptions)),n.onDidChangeToTrue=n._onDidChangeToTrue.event,n._onDidChangeToFalse=n._register(new m.Q5(n._emitterOptions)),n.onDidChangeToFalse=n._onDidChangeToFalse.event,n._value=0,n}return(0,h.Z)(t,[{key:"setValue",value:function(e){var i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}]),t}(_.JT),oe=function(e){(0,l.Z)(t,e);var i=(0,u.Z)(t);function t(e,n){var o;return(0,c.Z)(this,t),(o=i.call(this))._editor=e,n.createKey("editorId",e.getId()),o._editorSimpleInput=T.u.editorSimpleInput.bindTo(n),o._editorFocus=T.u.focus.bindTo(n),o._textInputFocus=T.u.textInputFocus.bindTo(n),o._editorTextFocus=T.u.editorTextFocus.bindTo(n),o._editorTabMovesFocus=T.u.tabMovesFocus.bindTo(n),o._editorReadonly=T.u.readOnly.bindTo(n),o._inDiffEditor=T.u.inDiffEditor.bindTo(n),o._editorColumnSelection=T.u.columnSelection.bindTo(n),o._hasMultipleSelections=T.u.hasMultipleSelections.bindTo(n),o._hasNonEmptySelection=T.u.hasNonEmptySelection.bindTo(n),o._canUndo=T.u.canUndo.bindTo(n),o._canRedo=T.u.canRedo.bindTo(n),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromConfig()}))),o._register(o._editor.onDidChangeCursorSelection((function(){return o._updateFromSelection()}))),o._register(o._editor.onDidFocusEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidFocusEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidChangeModel((function(){return o._updateFromModel()}))),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromModel()}))),o._updateFromConfig(),o._updateFromSelection(),o._updateFromFocus(),o._updateFromModel(),o._editorSimpleInput.set(o._editor.isSimpleWidget),o}return(0,h.Z)(t,[{key:"_updateFromConfig",value:function(){var e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}},{key:"_updateFromSelection",value:function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}},{key:"_updateFromFocus",value:function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}},{key:"_updateFromModel",value:function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}]),t}(_.JT),re=function(e){(0,l.Z)(t,e);var i=(0,u.Z)(t);function t(e,n,o){var r;(0,c.Z)(this,t),(r=i.call(this))._editor=e,r._contextKeyService=n,r._languageFeaturesService=o,r._langId=T.u.languageId.bindTo(n),r._hasCompletionItemProvider=T.u.hasCompletionItemProvider.bindTo(n),r._hasCodeActionsProvider=T.u.hasCodeActionsProvider.bindTo(n),r._hasCodeLensProvider=T.u.hasCodeLensProvider.bindTo(n),r._hasDefinitionProvider=T.u.hasDefinitionProvider.bindTo(n),r._hasDeclarationProvider=T.u.hasDeclarationProvider.bindTo(n),r._hasImplementationProvider=T.u.hasImplementationProvider.bindTo(n),r._hasTypeDefinitionProvider=T.u.hasTypeDefinitionProvider.bindTo(n),r._hasHoverProvider=T.u.hasHoverProvider.bindTo(n),r._hasDocumentHighlightProvider=T.u.hasDocumentHighlightProvider.bindTo(n),r._hasDocumentSymbolProvider=T.u.hasDocumentSymbolProvider.bindTo(n),r._hasReferenceProvider=T.u.hasReferenceProvider.bindTo(n),r._hasRenameProvider=T.u.hasRenameProvider.bindTo(n),r._hasSignatureHelpProvider=T.u.hasSignatureHelpProvider.bindTo(n),r._hasInlayHintsProvider=T.u.hasInlayHintsProvider.bindTo(n),r._hasDocumentFormattingProvider=T.u.hasDocumentFormattingProvider.bindTo(n),r._hasDocumentSelectionFormattingProvider=T.u.hasDocumentSelectionFormattingProvider.bindTo(n),r._hasMultipleDocumentFormattingProvider=T.u.hasMultipleDocumentFormattingProvider.bindTo(n),r._hasMultipleDocumentSelectionFormattingProvider=T.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),r._isInWalkThrough=T.u.isInWalkThroughSnippet.bindTo(n);var a=function(){return r._update()};return r._register(e.onDidChangeModel(a)),r._register(e.onDidChangeModelLanguage(a)),r._register(o.completionProvider.onDidChange(a)),r._register(o.codeActionProvider.onDidChange(a)),r._register(o.codeLensProvider.onDidChange(a)),r._register(o.definitionProvider.onDidChange(a)),r._register(o.declarationProvider.onDidChange(a)),r._register(o.implementationProvider.onDidChange(a)),r._register(o.typeDefinitionProvider.onDidChange(a)),r._register(o.hoverProvider.onDidChange(a)),r._register(o.documentHighlightProvider.onDidChange(a)),r._register(o.documentSymbolProvider.onDidChange(a)),r._register(o.referenceProvider.onDidChange(a)),r._register(o.renameProvider.onDidChange(a)),r._register(o.documentFormattingEditProvider.onDidChange(a)),r._register(o.documentRangeFormattingEditProvider.onDidChange(a)),r._register(o.signatureHelpProvider.onDidChange(a)),r._register(o.inlayHintsProvider.onDidChange(a)),a(),r}return(0,h.Z)(t,[{key:"dispose",value:function(){(0,s.Z)((0,d.Z)(t.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInWalkThrough.reset()}))}},{key:"_update",value:function(){var e=this,i=this._editor.getModel();i?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(i.getLanguageId()),e._hasCompletionItemProvider.set(e._languageFeaturesService.completionProvider.has(i)),e._hasCodeActionsProvider.set(e._languageFeaturesService.codeActionProvider.has(i)),e._hasCodeLensProvider.set(e._languageFeaturesService.codeLensProvider.has(i)),e._hasDefinitionProvider.set(e._languageFeaturesService.definitionProvider.has(i)),e._hasDeclarationProvider.set(e._languageFeaturesService.declarationProvider.has(i)),e._hasImplementationProvider.set(e._languageFeaturesService.implementationProvider.has(i)),e._hasTypeDefinitionProvider.set(e._languageFeaturesService.typeDefinitionProvider.has(i)),e._hasHoverProvider.set(e._languageFeaturesService.hoverProvider.has(i)),e._hasDocumentHighlightProvider.set(e._languageFeaturesService.documentHighlightProvider.has(i)),e._hasDocumentSymbolProvider.set(e._languageFeaturesService.documentSymbolProvider.has(i)),e._hasReferenceProvider.set(e._languageFeaturesService.referenceProvider.has(i)),e._hasRenameProvider.set(e._languageFeaturesService.renameProvider.has(i)),e._hasSignatureHelpProvider.set(e._languageFeaturesService.signatureHelpProvider.has(i)),e._hasInlayHintsProvider.set(e._languageFeaturesService.inlayHintsProvider.has(i)),e._hasDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.has(i)||e._languageFeaturesService.documentRangeFormattingEditProvider.has(i)),e._hasDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.has(i)),e._hasMultipleDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.all(i).length+e._languageFeaturesService.documentRangeFormattingEditProvider.all(i).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.all(i).length>1),e._isInWalkThrough.set(i.uri.scheme===p.lg.walkThroughSnippet)})):this.reset()}}]),t}(_.JT),ae=function(e){(0,l.Z)(t,e);var i=(0,u.Z)(t);function t(e){var n;return(0,c.Z)(this,t),(n=i.call(this))._onChange=n._register(new m.Q5),n.onChange=n._onChange.event,n._hasFocus=!1,n._domFocusTracker=n._register(g.trackFocus(e)),n._register(n._domFocusTracker.onDidFocus((function(){n._hasFocus=!0,n._onChange.fire(void 0)}))),n._register(n._domFocusTracker.onDidBlur((function(){n._hasFocus=!1,n._onChange.fire(void 0)}))),n}return(0,h.Z)(t,[{key:"hasFocus",value:function(){return this._hasFocus}}]),t}(_.JT),se=function(){function e(i,t){(0,c.Z)(this,e),this._editor=i,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}return(0,h.Z)(e,[{key:"length",get:function(){return this._decorationIds.length}},{key:"onDidChange",value:function(e,i,t){var n=this;return this._editor.onDidChangeModelDecorations((function(t){n._isChangingDecorations||e.call(i,t)}),t)}},{key:"getRange",value:function(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}},{key:"getRanges",value:function(){if(!this._editor.hasModel())return[];var e,i=this._editor.getModel(),t=[],n=(0,r.Z)(this._decorationIds);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=i.getDecorationRange(o);a&&t.push(a)}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"has",value:function(e){return this._decorationIds.includes(e.id)}},{key:"clear",value:function(){0!==this._decorationIds.length&&this.set([])}},{key:"set",value:function(e){var i=this;try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(t){i._decorationIds=t.deltaDecorations(i._decorationIds,e)}))}finally{this._isChangingDecorations=!1}}}]),e}(),de=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),le=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function ue(e){return de+encodeURIComponent(e.toString())+le}var ce=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),he=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,Q.Ic)((function(e,i){var t=e.getColor(P.b6y);t&&i.addRule(".monaco-editor .".concat("squiggly-error"," { border-bottom: 4px double ",t,"; }"));var n=e.getColor(P.lXJ);n&&i.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',ue(n),'") repeat-x bottom left; }'));var o=e.getColor(P.L_H);o&&i.addRule(".monaco-editor .".concat("squiggly-error","::before { display: block; content: ''; width: 100%; height: 100%; background: ",o,"; }"));var r=e.getColor(P.pW3);r&&i.addRule(".monaco-editor .".concat("squiggly-warning"," { border-bottom: 4px double ",r,"; }"));var a=e.getColor(P.uoC);a&&i.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',ue(a),'") repeat-x bottom left; }'));var s=e.getColor(P.gpD);s&&i.addRule(".monaco-editor .".concat("squiggly-warning","::before { display: block; content: ''; width: 100%; height: 100%; background: ",s,"; }"));var d=e.getColor(P.T83);d&&i.addRule(".monaco-editor .".concat("squiggly-info"," { border-bottom: 4px double ",d,"; }"));var l=e.getColor(P.c63);l&&i.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',ue(l),'") repeat-x bottom left; }'));var u=e.getColor(P.few);u&&i.addRule(".monaco-editor .".concat("squiggly-info","::before { display: block; content: ''; width: 100%; height: 100%; background: ",u,"; }"));var c=e.getColor(P.fEB);c&&i.addRule(".monaco-editor .".concat("squiggly-hint"," { border-bottom: 2px dotted ",c,"; }"));var h=e.getColor(P.Dut);h&&i.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',ce+encodeURIComponent(h.toString())+he,'") no-repeat bottom left; }'));var v=e.getColor(x.zu);v&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",v.rgba.a,"; }"));var g=e.getColor(x.kp);g&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-unnecessary"," { border-bottom: 2px dashed ",g,"; }"));var f=e.getColor(P.NOs)||"inherit";i.addRule(".monaco-editor.showDeprecated .".concat("squiggly-inline-deprecated"," { text-decoration: line-through; text-decoration-color: ",f,"}"))}))},90203:function(e,i,t){t.d(i,{p:function(){return Ne}});var n,o=t(97326),r=t(11752),a=t(61120),s=t(60136),d=t(27277),l=t(37762),u=t(15671),c=t(43144),h=t(87697),v=t(53210),g=t(65361),f=t(16688),m=t(98883),_=t(32590),p=t(28941),y=t(10526),C=t(6815),w=t(15520),D=t(56692),b=t(48483),L=t(74165),S=t(95454),N=t(48301),E=t(89663),k=t(98351),M=t(31492),I=t(58705),R=t(10849),T=t(2374),O=t(87627),x=t(50187),P=t(49525),V=t(6574),Z=t(3553),W=t(7579),F=t(18191),A=t(63024),H=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},Q=function(e,i){return function(t,n){i(t,n,e)}},z=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},U=function(){function e(i,t,n,o){(0,u.Z)(this,e),this.originalLineStart=i,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=o}return(0,c.Z)(e,[{key:"getType",value:function(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}]),e}(),B=(0,c.Z)((function e(i){(0,u.Z)(this,e),this.entries=i})),K=(0,F.q5)("diff-review-insert",W.lA.add,h.NC("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),q=(0,F.q5)("diff-review-remove",W.lA.remove,h.NC("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),j=(0,F.q5)("diff-review-close",W.lA.close,h.NC("diffReviewCloseIcon","Icon for 'Close' in diff review.")),X=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;return(0,u.Z)(this,t),(r=i.call(this))._languageService=n,r._width=0,r._diffEditor=e,r._isVisible=!1,r.shadow=(0,f.X)(document.createElement("div")),r.shadow.setClassName("diff-review-shadow"),r.actionBarContainer=(0,f.X)(document.createElement("div")),r.actionBarContainer.setClassName("diff-review-actions"),r._actionBar=r._register(new S.o(r.actionBarContainer.domNode)),r._actionBar.push(new E.aU("diffreview.close",h.NC("label.close","Close"),"close-diff-review "+Z.kS.asClassName(j),!0,(function(){return z((0,o.Z)(r),void 0,void 0,(0,L.Z)().mark((function e(){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.hide());case 1:case"end":return e.stop()}}),e,this)})))})),{label:!1,icon:!0}),r.domNode=(0,f.X)(document.createElement("div")),r.domNode.setClassName("diff-review monaco-editor-background"),r._content=(0,f.X)(document.createElement("div")),r._content.setClassName("diff-review-content"),r._content.setAttribute("role","code"),r.scrollbar=r._register(new N.s$(r._content.domNode,{})),r.domNode.domNode.appendChild(r.scrollbar.getDomNode()),r._register(e.onDidUpdateDiff((function(){r._isVisible&&(r._diffs=r._compute(),r._render())}))),r._register(e.getModifiedEditor().onDidChangeCursorPosition((function(){r._isVisible&&r._render()}))),r._register(v.addStandardDisposableListener(r.domNode.domNode,"click",(function(e){e.preventDefault();var i=v.findParentWithClass(e.target,"diff-review-row");i&&r._goToRow(i)}))),r._register(v.addStandardDisposableListener(r.domNode.domNode,"keydown",(function(e){(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),r._goToRow(r._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),r._goToRow(r._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),r.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),r.accept())}))),r._diffs=[],r._currentDiff=null,r}return(0,c.Z)(t,[{key:"prev",value:function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var i=-1,t=0,n=this._diffs.length;t<n;t++)if(this._diffs[t]===this._currentDiff){i=t;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0!==this._diffs.length){e%=this._diffs.length;var o=this._diffs[e].entries;this._diffEditor.setPosition(new R.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}}},{key:"next",value:function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var i=-1,t=0,n=this._diffs.length;t<n;t++)if(this._diffs[t]===this._currentDiff){i=t;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0!==this._diffs.length){e%=this._diffs.length;var o=this._diffs[e].entries;this._diffEditor.setPosition(new R.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}}},{key:"accept",value:function(){var e=-1,i=this._getCurrentFocusedRow();if(i){var t=parseInt(i.getAttribute("data-line"),10);isNaN(t)||(e=t)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new R.L(e,1)),this._diffEditor.revealPosition(new R.L(e,1),1))}},{key:"hide",value:function(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}},{key:"_getPrevRow",value:function(){var e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}},{key:"_getNextRow",value:function(){var e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}},{key:"_getFirstRow",value:function(){return this.domNode.domNode.querySelector(".diff-review-row")}},{key:"_getCurrentFocusedRow",value:function(){var e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}},{key:"_goToRow",value:function(e){var i=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),i&&i!==e&&(i.tabIndex=-1),this.scrollbar.scanDomNode()}},{key:"isVisible",value:function(){return this._isVisible}},{key:"layout",value:function(e,i,t){this._width=i,this.shadow.setTop(e-6),this.shadow.setWidth(i),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(i),this.domNode.setHeight(t),this._content.setHeight(t),this._content.setWidth(i),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}},{key:"_compute",value:function(){var e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];var i=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return i&&n?t._mergeAdjacent(e,i.getLineCount(),n.getLineCount()):[]}},{key:"_findDiffIndex",value:function(e){for(var i=e.lineNumber,t=0,n=this._diffs.length;t<n;t++){var o=this._diffs[t].entries;if(i<=o[o.length-1].modifiedLineEnd)return t}return 0}},{key:"_render",value:function(){var e=this._diffEditor.getOriginalEditor().getOptions(),i=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),a=o.getOptions();if(!this._isVisible||!n||!o)return v.clearNode(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});var s=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[s]!==this._currentDiff){this._currentDiff=this._diffs[s];var d=this._diffs[s].entries,l=document.createElement("div");l.className="diff-review-table",l.setAttribute("role","list"),l.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,C.N)(l,i.get(46));for(var u=0,c=0,g=0,f=0,m=0,_=d.length;m<_;m++){var p=d[m],y=p.originalLineStart,w=p.originalLineEnd,D=p.modifiedLineStart,b=p.modifiedLineEnd;0!==y&&(0===u||y<u)&&(u=y),0!==w&&(0===c||w>c)&&(c=w),0!==D&&(0===g||D<g)&&(g=D),0!==b&&(0===f||b>f)&&(f=b)}var L=document.createElement("div");L.className="diff-review-row";var S=document.createElement("div");S.className="diff-review-cell diff-review-summary";var N=c-u+1,E=f-g+1;S.appendChild(document.createTextNode("".concat(s+1,"/").concat(this._diffs.length,": @@ -").concat(u,",").concat(N," +").concat(g,",").concat(E," @@"))),L.setAttribute("data-line",String(g));var k=function(e){return 0===e?h.NC("no_lines_changed","no lines changed"):1===e?h.NC("one_line_changed","1 line changed"):h.NC("more_lines_changed","{0} lines changed",e)},M=k(N),I=k(E);L.setAttribute("aria-label",h.NC({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",s+1,this._diffs.length,u,M,g,I)),L.appendChild(S),L.setAttribute("role","listitem"),l.appendChild(L);for(var R=i.get(61),T=g,O=0,x=d.length;O<x;O++){var P=d[O];t._renderSection(l,P,T,R,this._width,e,n,r,i,o,a,this._languageService.languageIdCodec),0!==P.modifiedLineStart&&(T=P.modifiedLineEnd)}v.clearNode(this._content.domNode),this._content.domNode.appendChild(l),this.scrollbar.scanDomNode()}}}],[{key:"_mergeAdjacent",value:function(e,i,t){if(!e||0===e.length)return[];for(var n=[],o=0,r=0,a=e.length;r<a;r++){var s=e[r],d=s.originalStartLineNumber,l=s.originalEndLineNumber,u=s.modifiedStartLineNumber,c=s.modifiedEndLineNumber,h=[],v=0,g=0===l?d:d-1,f=0===c?u:u-1,m=1,_=1;if(r>0){var p=e[r-1];m=0===p.originalEndLineNumber?p.originalStartLineNumber+1:p.originalEndLineNumber+1,_=0===p.modifiedEndLineNumber?p.modifiedStartLineNumber+1:p.modifiedEndLineNumber+1}var y=g-3+1,C=f-3+1;if(y<m){var w=m-y;y+=w,C+=w}if(C<_){var D=_-C;y+=D,C+=D}h[v++]=new U(y,g,C,f),0!==l&&(h[v++]=new U(d,l,0,0)),0!==c&&(h[v++]=new U(0,0,u,c));var b=0===l?d+1:l+1,L=0===c?u+1:c+1,S=i,N=t;if(r+1<a){var E=e[r+1];S=0===E.originalEndLineNumber?E.originalStartLineNumber:E.originalStartLineNumber-1,N=0===E.modifiedEndLineNumber?E.modifiedStartLineNumber:E.modifiedStartLineNumber-1}var k=b+3-1,M=L+3-1;if(k>S){var I=S-k;k+=I,M+=I}if(M>N){var R=N-M;k+=R,M+=R}h[v++]=new U(b,k,L,M),n[o++]=new B(h)}for(var T=n[0].entries,O=[],x=0,P=1,V=n.length;P<V;P++){var Z=n[P].entries,W=T[T.length-1],F=Z[0];0===W.getType()&&0===F.getType()&&F.originalLineStart<=W.originalLineEnd?(T[T.length-1]=new U(W.originalLineStart,F.originalLineEnd,W.modifiedLineStart,F.modifiedLineEnd),T=T.concat(Z.slice(1))):(O[x++]=new B(T),T=Z)}return O[x++]=new B(T),O}},{key:"_renderSection",value:function(e,i,n,o,r,a,s,d,l,u,c,v){var g=i.getType(),f="diff-review-row",m="",_=null;switch(g){case 1:f="diff-review-row line-insert",m=" char-insert",_=K;break;case 2:f="diff-review-row line-delete",m=" char-delete",_=q}for(var p=i.originalLineStart,y=i.originalLineEnd,C=i.modifiedLineStart,w=i.modifiedLineEnd,D=Math.max(w-C,y-p),b=a.get(133),L=b.glyphMarginWidth+b.lineNumbersWidth,S=l.get(133),N=10+S.glyphMarginWidth+S.lineNumbersWidth,E=0;E<=D;E++){var k=0===p?0:p+E,M=0===C?0:C+E,I=document.createElement("div");I.style.minWidth=r+"px",I.className=f,I.setAttribute("role","listitem"),0!==M&&(n=M),I.setAttribute("data-line",String(n));var R=document.createElement("div");R.className="diff-review-cell",R.style.height="".concat(o,"px"),I.appendChild(R);var T=document.createElement("span");T.style.width=L+"px",T.style.minWidth=L+"px",T.className="diff-review-line-number"+m,0!==k?T.appendChild(document.createTextNode(String(k))):T.innerText="\xa0",R.appendChild(T);var O=document.createElement("span");O.style.width=N+"px",O.style.minWidth=N+"px",O.style.paddingRight="10px",O.className="diff-review-line-number"+m,0!==M?O.appendChild(document.createTextNode(String(M))):O.innerText="\xa0",R.appendChild(O);var x=document.createElement("span");if(x.className="diff-review-spacer",_){var P=document.createElement("span");P.className=Z.kS.asClassName(_),P.innerText="\xa0\xa0",x.appendChild(P)}else x.innerText="\xa0\xa0";R.appendChild(x);var V=void 0;if(0!==M){var W=this._renderLine(u,l,c.tabSize,M,v);t._ttPolicy&&(W=t._ttPolicy.createHTML(W)),R.insertAdjacentHTML("beforeend",W),V=u.getLineContent(M)}else{var F=this._renderLine(s,a,d.tabSize,k,v);t._ttPolicy&&(F=t._ttPolicy.createHTML(F)),R.insertAdjacentHTML("beforeend",F),V=s.getLineContent(k)}0===V.length&&(V=h.NC("blankLine","blank"));var A="";switch(g){case 0:A=k===M?h.NC({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",V,k):h.NC("equalLine","{0} original line {1} modified line {2}",V,k,M);break;case 1:A=h.NC("insertLine","+ {0} modified line {1}",V,M);break;case 2:A=h.NC("deleteLine","- {0} original line {1}",V,k)}I.setAttribute("aria-label",A),e.appendChild(I)}}},{key:"_renderLine",value:function(e,i,t,n,o){var r=e.getLineContent(n),a=i.get(46),s=I.A.createEmpty(r,o),d=x.wA.isBasicASCII(r,e.mightContainNonBasicASCII()),l=x.wA.containsRTL(r,d,e.mightContainRTL());return(0,O.tF)(new O.IJ(a.isMonospace&&!i.get(29),a.canUseHalfwidthRightwardsArrow,r,!1,d,l,0,s,[],t,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,i.get(107),i.get(90),i.get(85),i.get(47)!==M.n0.OFF,null)).html}}]),t}(y.JT);X._ttPolicy=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("diffReview",{createHTML:function(e){return e}}),X=H([Q(1,A.O)],X),(0,Z.Ic)((function(e,i){var t=e.getColor(T.hw);t&&i.addRule(".monaco-diff-editor .diff-review-line-number { color: ".concat(t,"; }"));var n=e.getColor(V._wn);n&&i.addRule(".monaco-diff-editor .diff-review-shadow { box-shadow: ".concat(n," 0 -6px 6px -6px inset; }"))}));var J=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){return(0,u.Z)(this,t),i.call(this,{id:"editor.action.diffReview.next",label:h.NC("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:P.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}return(0,c.Z)(t,[{key:"run",value:function(e,i){var t=G(e);t&&t.diffReviewNext()}}]),t}(k.R6),Y=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){return(0,u.Z)(this,t),i.call(this,{id:"editor.action.diffReview.prev",label:h.NC("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:P.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}return(0,c.Z)(t,[{key:"run",value:function(e,i){var t=G(e);t&&t.diffReviewPrev()}}]),t}(k.R6);function G(e){var i=e.get(D.$),t=i.listDiffEditors(),n=i.getActiveCodeEditor();if(!n)return null;for(var o=0,r=t.length;o<r;o++){var a=t[o];if(a.getModifiedEditor().getId()===n.getId()||a.getOriginalEditor().getId()===n.getId())return a}return null}(0,k.Qr)(J),(0,k.Qr)(Y);var $,ee=t(30788),ie=t(63633),te=t(52925),ne=t(77161),oe=t(70437),re=t(55522),ae=t(50381),se=t(8850),de=t(30045),le=t(13023),ue=t(30291),ce=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},he=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d){var l;(0,u.Z)(this,t),(l=i.call(this))._viewZoneId=e,l._marginDomNode=n,l.editor=r,l.diff=a,l._contextMenuService=s,l._clipboardService=d,l._visibility=!1,l._marginDomNode.style.zIndex="10",l._diffActions=document.createElement("div"),l._diffActions.className=W.lA.lightBulb.classNames+" lightbulb-glyph",l._diffActions.style.position="absolute";var c=r.getOption(61),g=r.getModel().getEOL();l._diffActions.style.right="0px",l._diffActions.style.visibility="hidden",l._diffActions.style.height="".concat(c,"px"),l._diffActions.style.lineHeight="".concat(c,"px"),l._marginDomNode.appendChild(l._diffActions);var f=[],m=0===a.modifiedEndLineNumber;f.push(new E.aU("diff.clipboard.copyDeletedContent",m?a.originalEndLineNumber>a.modifiedStartLineNumber?h.NC("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):h.NC("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):a.originalEndLineNumber>a.modifiedStartLineNumber?h.NC("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):h.NC("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(function(){return ce((0,o.Z)(l),void 0,void 0,(0,L.Z)().mark((function e(){var i,t;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new ee.e(a.originalStartLineNumber,1,a.originalEndLineNumber+1,1),t=a.originalModel.getValueInRange(i),e.next=4,this._clipboardService.writeText(t);case 4:case"end":return e.stop()}}),e,this)})))})));var _=0,p=void 0;a.originalEndLineNumber>a.modifiedStartLineNumber&&(p=new E.aU("diff.clipboard.copyDeletedLineContent",m?h.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber):h.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber),void 0,!0,(function(){return ce((0,o.Z)(l),void 0,void 0,(0,L.Z)().mark((function e(){var i,t;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(i=a.originalModel.getLineContent(a.originalStartLineNumber+_))){e.next=7;break}return t=a.originalModel.getEndOfLineSequence(),e.next=5,this._clipboardService.writeText(0===t?"\n":"\r\n");case 5:e.next=9;break;case 7:return e.next=9,this._clipboardService.writeText(i);case 9:case"end":return e.stop()}}),e,this)})))})),f.push(p)),r.getOption(83)||f.push(new E.aU("diff.inline.revertChange",h.NC("diff.inline.revertChange.label","Revert this change"),void 0,!0,(function(){return ce((0,o.Z)(l),void 0,void 0,(0,L.Z)().mark((function e(){var i,t,n,o;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new ee.e(a.originalStartLineNumber,1,a.originalEndLineNumber,a.originalModel.getLineMaxColumn(a.originalEndLineNumber)),t=a.originalModel.getValueInRange(i),0===a.modifiedEndLineNumber?(n=r.getModel().getLineMaxColumn(a.modifiedStartLineNumber),r.executeEdits("diffEditor",[{range:new ee.e(a.modifiedStartLineNumber,n,a.modifiedStartLineNumber,n),text:g+t}])):(o=r.getModel().getLineMaxColumn(a.modifiedEndLineNumber),r.executeEdits("diffEditor",[{range:new ee.e(a.modifiedStartLineNumber,1,a.modifiedEndLineNumber,o),text:t}]));case 3:case"end":return e.stop()}}),e)})))})));var y=function(e,i){l._contextMenuService.showContextMenu({getAnchor:function(){return{x:e,y:i}},getActions:function(){return p&&(p.label=m?h.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber+_):h.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber+_)),f},autoSelectFirstItem:!0})};return l._register(v.addStandardDisposableListener(l._diffActions,"mousedown",(function(e){var i=v.getDomNodePagePosition(l._diffActions),t=i.top,n=i.height,o=Math.floor(c/3);e.preventDefault(),y(e.posx,t+n+o)}))),l._register(r.onMouseMove((function(e){8===e.target.type||5===e.target.type?e.target.detail.viewZoneId===l._viewZoneId?(l.visibility=!0,_=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,c)):l.visibility=!1:l.visibility=!1}))),l._register(r.onMouseDown((function(e){e.event.rightButton&&(8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId===l._viewZoneId&&(e.event.preventDefault(),_=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,c),y(e.event.posx,e.event.posy+c)))}))),l}return(0,c.Z)(t,[{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}},{key:"_updateLightBulbPosition",value:function(e,i,t){var n=i-v.getDomNodePagePosition(e).top,o=Math.floor(n/t),r=o*t;if(this._diffActions.style.top="".concat(r,"px"),this.diff.viewLineCounts)for(var a=0,s=0;s<this.diff.viewLineCounts.length;s++)if(o<(a+=this.diff.viewLineCounts[s]))return s;return o}}]),t}(y.JT),ve=t(88532),ge=t(68552),fe=t(26562),me=t(72380),_e=t(68537),pe=t(11761),ye=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},Ce=function(e,i){return function(t,n){i(t,n,e)}},we=function(){function e(i,t){(0,u.Z)(this,e),this._contextMenuService=i,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}return(0,c.Z)(e,[{key:"getForeignViewZones",value:function(e){var i=this;return e.filter((function(e){return!i._zonesMap[String(e.id)]}))}},{key:"clean",value:function(e){var i=this;this._zones.length>0&&e.changeViewZones((function(e){var t,n=(0,l.Z)(i._zones);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.removeZone(o)}}catch(r){n.e(r)}finally{n.f()}})),this._zones=[],this._zonesMap={},e.changeDecorations((function(e){i._decorations=e.deltaDecorations(i._decorations,[])}))}},{key:"apply",value:function(e,i,t,n){var o=this,r=n?w.Z.capture(e):null;e.changeViewZones((function(i){var n,r,a=(0,l.Z)(o._zones);try{for(a.s();!(r=a.n()).done;){var s=r.value;i.removeZone(s)}}catch(f){a.e(f)}finally{a.f()}var d,u=(0,l.Z)(o._inlineDiffMargins);try{for(u.s();!(d=u.n()).done;){d.value.dispose()}}catch(f){u.e(f)}finally{u.f()}o._zones=[],o._zonesMap={},o._inlineDiffMargins=[];for(var c=0,h=t.zones.length;c<h;c++){var v=t.zones[c];v.suppressMouseDown=!0;var g=i.addZone(v);o._zones.push(g),o._zonesMap[String(g)]=!0,t.zones[c].diff&&v.marginDomNode&&(v.suppressMouseDown=!1,0!==(null===(n=t.zones[c].diff)||void 0===n?void 0:n.originalModel.getValueLength())&&o._inlineDiffMargins.push(new he(g,v.marginDomNode,e,t.zones[c].diff,o._contextMenuService,o._clipboardService)))}})),null===r||void 0===r||r.restore(e),e.changeDecorations((function(e){o._decorations=e.deltaDecorations(o._decorations,t.decorations)})),null===i||void 0===i||i.setZones(t.overviewZones)}}]),e}(),De=0,be=(0,F.q5)("diff-insert",W.lA.add,h.NC("diffInsertIcon","Line decoration for inserts in the diff editor.")),Le=(0,F.q5)("diff-remove",W.lA.remove,h.NC("diffRemoveIcon","Line decoration for removals in the diff editor.")),Se=null===($=window.trustedTypes)||void 0===$?void 0:$.createPolicy("diffEditorWidget",{createHTML:function(e){return e}}),Ne=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d,c,h,g,m,y,C){var w;(0,u.Z)(this,t),(w=i.call(this))._editorProgressService=C,w._onDidDispose=w._register(new p.Q5),w.onDidDispose=w._onDidDispose.event,w._onDidUpdateDiff=w._register(new p.Q5),w.onDidUpdateDiff=w._onDidUpdateDiff.event,w._onDidContentSizeChange=w._register(new p.Q5),w._lastOriginalWarning=null,w._lastModifiedWarning=null,w._editorWorkerService=s,w._codeEditorService=h,w._contextKeyService=w._register(d.createScoped(e)),w._instantiationService=c.createChild(new de.y([P.i6,w._contextKeyService])),w._contextKeyService.createKey("isInDiffEditor",!0),w._themeService=g,w._notificationService=m,w._id=++De,w._state=0,w._updatingDiffProgress=null,w._domElement=e,n=n||{},w._options=Qe(n,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),"undefined"!==typeof n.isInEmbeddedEditor?w._contextKeyService.createKey("isInEmbeddedDiffEditor",n.isInEmbeddedEditor):w._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),w._updateDecorationsRunner=w._register(new _.pY((function(){return w._updateDecorations()}),0)),w._containerDomElement=document.createElement("div"),w._containerDomElement.className=t._getClassName(w._themeService.getColorTheme(),w._options.renderSideBySide),w._containerDomElement.style.position="relative",w._containerDomElement.style.height="100%",w._domElement.appendChild(w._containerDomElement),w._overviewViewportDomElement=(0,f.X)(document.createElement("div")),w._overviewViewportDomElement.setClassName("diffViewport"),w._overviewViewportDomElement.setPosition("absolute"),w._overviewDomElement=document.createElement("div"),w._overviewDomElement.className="diffOverview",w._overviewDomElement.style.position="absolute",w._overviewDomElement.appendChild(w._overviewViewportDomElement.domNode),w._register(v.addStandardDisposableListener(w._overviewDomElement,v.EventType.POINTER_DOWN,(function(e){w._modifiedEditor.delegateVerticalScrollbarPointerDown(e)}))),w._options.renderOverviewRuler&&w._containerDomElement.appendChild(w._overviewDomElement),w._originalDomNode=document.createElement("div"),w._originalDomNode.className="editor original",w._originalDomNode.style.position="absolute",w._originalDomNode.style.height="100%",w._containerDomElement.appendChild(w._originalDomNode),w._modifiedDomNode=document.createElement("div"),w._modifiedDomNode.className="editor modified",w._modifiedDomNode.style.position="absolute",w._modifiedDomNode.style.height="100%",w._containerDomElement.appendChild(w._modifiedDomNode),w._beginUpdateDecorationsTimeout=-1,w._currentlyChangingViewZones=!1,w._diffComputationToken=0,w._originalEditorState=new we(y,a),w._modifiedEditorState=new we(y,a),w._isVisible=!0,w._isHandlingScrollEvent=!1,w._elementSizeObserver=w._register(new me.I(w._containerDomElement,n.dimension)),w._register(w._elementSizeObserver.onDidChange((function(){return w._onDidContainerSizeChanged()}))),n.automaticLayout&&w._elementSizeObserver.startObserving(),w._diffComputationResult=null,w._originalEditor=w._createLeftHandSideEditor(n,r.originalEditor||{}),w._modifiedEditor=w._createRightHandSideEditor(n,r.modifiedEditor||{}),w._originalOverviewRuler=null,w._modifiedOverviewRuler=null,w._reviewPane=c.createInstance(X,(0,o.Z)(w)),w._containerDomElement.appendChild(w._reviewPane.domNode.domNode),w._containerDomElement.appendChild(w._reviewPane.shadow.domNode),w._containerDomElement.appendChild(w._reviewPane.actionBarContainer.domNode),w._options.renderSideBySide?w._setStrategy(new Te(w._createDataSource(),w._options.enableSplitViewResizing)):w._setStrategy(new xe(w._createDataSource(),w._options.enableSplitViewResizing)),w._register(g.onDidColorThemeChange((function(e){w._strategy&&w._strategy.applyColors(e)&&w._updateDecorationsRunner.schedule(),w._containerDomElement.className=t._getClassName(w._themeService.getColorTheme(),w._options.renderSideBySide)})));var D,b=k.Uc.getDiffEditorContributions(),L=(0,l.Z)(b);try{for(L.s();!(D=L.n()).done;){var S=D.value;try{w._register(c.createInstance(S.ctor,(0,o.Z)(w)))}catch(N){(0,ge.dL)(N)}}}catch(N){L.e(N)}finally{L.f()}return w._codeEditorService.addDiffEditor((0,o.Z)(w)),w}return(0,c.Z)(t,[{key:"_setState",value:function(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}},{key:"diffReviewNext",value:function(){this._reviewPane.next()}},{key:"diffReviewPrev",value:function(){this._reviewPane.prev()}},{key:"_disposeOverviewRulers",value:function(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}},{key:"_createOverviewRulers",value:function(){this._options.renderOverviewRuler&&(g.ok(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}},{key:"_createLeftHandSideEditor",value:function(e,i){var n=this,o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),i);this._register(o.onDidScrollChange((function(e){n._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(n._isHandlingScrollEvent=!0,n._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),n._isHandlingScrollEvent=!1,n._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){n._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((function(e){o.getModel()&&(e.hasChanged(46)&&n._updateDecorationsRunner.schedule(),e.hasChanged(134)&&(n._updateDecorationsRunner.cancel(),n._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((function(){n._updateDecorationsRunner.cancel(),n._updateDecorations()}))),this._register(o.onDidChangeModelContent((function(){n._isVisible&&n._beginUpdateDecorationsSoon()})));var r=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((function(){return r.set(!0)}))),this._register(o.onDidBlurEditorWidget((function(){return r.set(!1)}))),this._register(o.onDidContentSizeChange((function(e){var i=n._originalEditor.getContentWidth()+n._modifiedEditor.getContentWidth()+t.ONE_OVERVIEW_WIDTH,o=Math.max(n._modifiedEditor.getContentHeight(),n._originalEditor.getContentHeight());n._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),o}},{key:"_createRightHandSideEditor",value:function(e,i){var n=this,o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),i);this._register(o.onDidScrollChange((function(e){n._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(n._isHandlingScrollEvent=!0,n._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),n._isHandlingScrollEvent=!1,n._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){n._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((function(e){o.getModel()&&(e.hasChanged(46)&&n._updateDecorationsRunner.schedule(),e.hasChanged(134)&&(n._updateDecorationsRunner.cancel(),n._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((function(){n._updateDecorationsRunner.cancel(),n._updateDecorations()}))),this._register(o.onDidChangeModelContent((function(){n._isVisible&&n._beginUpdateDecorationsSoon()}))),this._register(o.onDidChangeModelOptions((function(e){e.tabSize&&n._updateDecorationsRunner.schedule()})));var r=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((function(){return r.set(!0)}))),this._register(o.onDidBlurEditorWidget((function(){return r.set(!1)}))),this._register(o.onDidContentSizeChange((function(e){var i=n._originalEditor.getContentWidth()+n._modifiedEditor.getContentWidth()+t.ONE_OVERVIEW_WIDTH,o=Math.max(n._modifiedEditor.getContentHeight(),n._originalEditor.getContentHeight());n._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),this._register(o.onMouseDown((function(e){var i,t;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("arrow-revert-change"))){var o=e.target.position.lineNumber,r=null===(t=n._diffComputationResult)||void 0===t?void 0:t.changes.find((function(e){return e.modifiedStartLineNumber===o-1||e.modifiedStartLineNumber===o}));return r&&n.revertChange(r),e.event.stopPropagation(),void n._updateDecorations()}}))),o}},{key:"revertChange",value:function(e){var i=this._modifiedEditor,t=this._originalEditor.getModel(),n=this._modifiedEditor.getModel();if(t&&n&&i){var o=e.originalEndLineNumber>0?new ee.e(e.originalStartLineNumber,1,e.originalEndLineNumber,t.getLineMaxColumn(e.originalEndLineNumber)):null,r=o?t.getValueInRange(o):null,a=e.modifiedEndLineNumber>0?new ee.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,n.getLineMaxColumn(e.modifiedEndLineNumber)):null,s=n.getEOL();if(0===e.originalEndLineNumber&&a){var d=a;e.modifiedStartLineNumber>1?d=a.setStartPosition(e.modifiedStartLineNumber-1,n.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<n.getLineCount()&&(d=a.setEndPosition(e.modifiedEndLineNumber+1,1)),i.executeEdits("diffEditor",[{range:d,text:""}])}else if(0===e.modifiedEndLineNumber&&null!==r){var l=e.modifiedStartLineNumber<n.getLineCount()?new R.L(e.modifiedStartLineNumber+1,1):new R.L(e.modifiedStartLineNumber,n.getLineMaxColumn(e.modifiedStartLineNumber));i.executeEdits("diffEditor",[{range:ee.e.fromPositions(l,l),text:e.modifiedStartLineNumber<n.getLineCount()?r+s:s+r}])}else a&&null!==r&&i.executeEdits("diffEditor",[{range:a,text:r}])}}},{key:"_createInnerEditor",value:function(e,i,t,n){return e.createInstance(b.Gm,i,t,n)}},{key:"dispose",value:function(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),(0,r.Z)((0,a.Z)(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return te.g.IDiffEditor}},{key:"getLineChanges",value:function(){return this._diffComputationResult?this._diffComputationResult.changes:null}},{key:"getOriginalEditor",value:function(){return this._originalEditor}},{key:"getModifiedEditor",value:function(){return this._modifiedEditor}},{key:"updateOptions",value:function(e){var i,n,o=Qe(e,this._options),r=(i=this._options,n=o,{enableSplitViewResizing:i.enableSplitViewResizing!==n.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==n.renderSideBySide,renderMarginRevertIcon:i.renderMarginRevertIcon!==n.renderMarginRevertIcon,maxComputationTime:i.maxComputationTime!==n.maxComputationTime,maxFileSize:i.maxFileSize!==n.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==n.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==n.renderIndicators,originalEditable:i.originalEditable!==n.originalEditable,diffCodeLens:i.diffCodeLens!==n.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==n.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==n.diffWordWrap});this._options=o;var a=r.ignoreTrimWhitespace||r.renderIndicators||r.renderMarginRevertIcon,s=this._isVisible&&(r.maxComputationTime||r.maxFileSize);a?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),r.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Te(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new xe(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=t._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),r.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}},{key:"getModel",value:function(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}},{key:"setModel",value:function(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getVisibleColumnFromPosition",value:function(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}},{key:"getPosition",value:function(){return this._modifiedEditor.getPosition()}},{key:"setPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._modifiedEditor.setPosition(e,i)}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLine(e,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineInCenter(e,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineNearTop(e,i)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPosition(e,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionInCenter(e,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionNearTop(e,i)}},{key:"getSelection",value:function(){return this._modifiedEditor.getSelection()}},{key:"getSelections",value:function(){return this._modifiedEditor.getSelections()}},{key:"setSelection",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._modifiedEditor.setSelection(e,i)}},{key:"setSelections",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._modifiedEditor.setSelections(e,i)}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLines(e,i,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesInCenter(e,i,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesNearTop(e,i,t)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._modifiedEditor.revealRange(e,i,t,n)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeInCenter(e,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeNearTop(e,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeAtTop(e,i)}},{key:"getSupportedActions",value:function(){return this._modifiedEditor.getSupportedActions()}},{key:"saveViewState",value:function(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}},{key:"restoreViewState",value:function(e){if(e&&e.original&&e.modified){var i=e;this._originalEditor.restoreViewState(i.original),this._modifiedEditor.restoreViewState(i.modified)}}},{key:"layout",value:function(e){this._elementSizeObserver.observe(e)}},{key:"focus",value:function(){this._modifiedEditor.focus()}},{key:"hasTextFocus",value:function(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}},{key:"trigger",value:function(e,i,t){this._modifiedEditor.trigger(e,i,t)}},{key:"createDecorationsCollection",value:function(e){return this._modifiedEditor.createDecorationsCollection(e)}},{key:"changeDecorations",value:function(e){return this._modifiedEditor.changeDecorations(e)}},{key:"_onDidContainerSizeChanged",value:function(){this._doLayout()}},{key:"_getReviewHeight",value:function(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}},{key:"_layoutOverviewRulers",value:function(){if(this._options.renderOverviewRuler&&this._originalOverviewRuler&&this._modifiedOverviewRuler){var e=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),n=t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*t.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:t.ONE_OVERVIEW_WIDTH,right:n+t.ONE_OVERVIEW_WIDTH,height:e-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:t.ONE_OVERVIEW_WIDTH,height:e-i}))}}},{key:"_onViewZonesChanged",value:function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}},{key:"_beginUpdateDecorationsSoon",value:function(){var e=this;-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((function(){return e._beginUpdateDecorations()}),t.UPDATE_DIFF_DECORATIONS_DELAY)}},{key:"_beginUpdateDecorations",value:function(){var e=this;this._beginUpdateDecorationsTimeout=-1;var i=this._originalEditor.getModel(),n=this._modifiedEditor.getModel();if(i&&n){this._diffComputationToken++;var o=this._diffComputationToken,r=1024*this._options.maxFileSize*1024,a=function(e){var i=e.getValueLength();return 0===r||i<=r};a(i)&&a(n)?(this._setState(1),this._editorWorkerService.computeDiff(i.uri,n.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then((function(t){o===e._diffComputationToken&&i===e._originalEditor.getModel()&&n===e._modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=t,e._updateDecorationsRunner.schedule(),e._onDidUpdateDiff.fire())}),(function(t){o===e._diffComputationToken&&i===e._originalEditor.getModel()&&n===e._modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=null,e._updateDecorationsRunner.schedule())}))):t._equals(i.uri,this._lastOriginalWarning)&&t._equals(n.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=i.uri,this._lastModifiedWarning=n.uri,this._notificationService.warn(h.NC("diff.tooLarge","Cannot compare files because one file is too large.")))}}},{key:"_cleanViewZonesAndDecorations",value:function(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}},{key:"_updateDecorations",value:function(){if(this._originalEditor.getModel()&&this._modifiedEditor.getModel()){var e=this._diffComputationResult?this._diffComputationResult.changes:[],i=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),t=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),n=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,i,t);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,n.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,n.modified,!0)}finally{this._currentlyChangingViewZones=!1}}}},{key:"_adjustOptionsForSubEditor",value:function(e){var i=Object.assign({},e);return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens,i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,i}},{key:"_adjustOptionsForLeftHandSide",value:function(e){var i=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?i.wordWrapOverride1=this._options.diffWordWrap:(i.wordWrapOverride1="off",i.wordWrapOverride2="off"),e.originalAriaLabel&&(i.ariaLabel=e.originalAriaLabel),i.readOnly=!this._options.originalEditable,i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}},{key:"_adjustOptionsForRightHandSide",value:function(e){var i=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(i.ariaLabel=e.modifiedAriaLabel),i.wordWrapOverride1=this._options.diffWordWrap,i.revealHorizontalRightPadding=M.BH.revealHorizontalRightPadding.defaultValue+t.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}},{key:"doLayout",value:function(){this._elementSizeObserver.observe(),this._doLayout()}},{key:"_doLayout",value:function(){var e=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),o=this._strategy.layout();this._originalDomNode.style.width=o+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-o+"px",this._modifiedDomNode.style.left=o+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-n+"px",this._overviewDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(t.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:o,height:i-n}),this._modifiedEditor.layout({width:e-o-(this._options.renderOverviewRuler?t.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-n,e,n),this._layoutOverviewViewport()}},{key:"_layoutOverviewViewport",value:function(){var e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}},{key:"_computeOverviewViewport",value:function(){var e=this._modifiedEditor.getLayoutInfo();if(!e)return null;var i=this._modifiedEditor.getScrollTop(),t=this._modifiedEditor.getScrollHeight(),n=Math.max(0,e.height),o=Math.max(0,n-0),r=t>0?o/t:0;return{height:Math.max(0,Math.floor(e.height*r)),top:Math.floor(i*r)}}},{key:"_createDataSource",value:function(){var e=this;return{getWidth:function(){return e._elementSizeObserver.getWidth()},getHeight:function(){return e._elementSizeObserver.getHeight()-e._getReviewHeight()},getOptions:function(){return{renderOverviewRuler:e._options.renderOverviewRuler}},getContainerDomNode:function(){return e._containerDomElement},relayoutEditors:function(){e._doLayout()},getOriginalEditor:function(){return e._originalEditor},getModifiedEditor:function(){return e._modifiedEditor}}}},{key:"_setStrategy",value:function(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}},{key:"_getLineChangeAtOrBeforeLineNumber",value:function(e,i){var t=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===t.length||e<i(t[0]))return null;for(var n=0,o=t.length-1;n<o;){var r=Math.floor((n+o)/2),a=i(t[r]),s=r+1<=o?i(t[r+1]):1073741824;e<a?o=r-1:e>=s?n=r+1:(n=r,o=r)}return t[n]}},{key:"_getEquivalentLineForOriginalLineNumber",value:function(e){var i=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.originalStartLineNumber}));if(!i)return e;var t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),n=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),o=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,a=e-t;return a<=o?n+Math.min(a,r):n+r-o+a}},{key:"_getEquivalentLineForModifiedLineNumber",value:function(e){var i=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.modifiedStartLineNumber}));if(!i)return e;var t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),n=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),o=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,a=e-n;return a<=r?t+Math.min(a,o):t+o-r+a}},{key:"getDiffLineInformationForOriginal",value:function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}},{key:"getDiffLineInformationForModified",value:function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}}],[{key:"_getClassName",value:function(e,i){var t="monaco-diff-editor monaco-editor-background ";return i&&(t+="side-by-side "),t+=(0,Z.m6)(e.type)}},{key:"_equals",value:function(e,i){return!e&&!i||!(!e||!i)&&e.toString()===i.toString()}}]),t}(y.JT);Ne.ONE_OVERVIEW_WIDTH=15,Ne.ENTIRE_DIFF_OVERVIEW_WIDTH=30,Ne.UPDATE_DIFF_DECORATIONS_DELAY=200,Ne=ye([Ce(3,ve.p),Ce(4,oe.p),Ce(5,P.i6),Ce(6,se.TG),Ce(7,D.$),Ce(8,Z.XE),Ce(9,le.lT),Ce(10,ue.i),Ce(11,fe.ek)],Ne);var Ee=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e){var n;return(0,u.Z)(this,t),(n=i.call(this))._dataSource=e,n._insertColor=null,n._removeColor=null,n}return(0,c.Z)(t,[{key:"applyColors",value:function(e){var i=e.getColor(V.P6Y)||(e.getColor(V.ypS)||V.CzK).transparent(2),t=e.getColor(V.F9q)||(e.getColor(V.P4M)||V.keg).transparent(2),n=!i.equals(this._insertColor)||!t.equals(this._removeColor);return this._insertColor=i,this._removeColor=t,n}},{key:"getEditorsDiffDecorations",value:function(e,i,t,n,o,r){r=r.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber})),o=o.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber}));var a=this._getViewZones(e,o,r,t),s=this._getOriginalEditorDecorations(a,e,i,t),d=this._getModifiedEditorDecorations(a,e,i,t,n);return{original:{decorations:s.decorations,overviewZones:s.overviewZones,zones:a.original},modified:{decorations:d.decorations,overviewZones:d.overviewZones,zones:a.modified}}}}]),t}(y.JT),ke=function(){function e(i){(0,u.Z)(this,e),this._source=i,this._index=-1,this.current=null,this.advance()}return(0,c.Z)(e,[{key:"advance",value:function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}]),e}(),Me=function(){function e(i,t,n,o,r){(0,u.Z)(this,e),this._lineChanges=i,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=o,this._modifiedEditor=r}return(0,c.Z)(e,[{key:"getViewZones",value:function(){for(var i=this._originalEditor.getOption(61),t=this._modifiedEditor.getOption(61),n=-1!==this._originalEditor.getOption(134).wrappingColumn,o=-1!==this._modifiedEditor.getOption(134).wrappingColumn,r=n||o,a=this._originalEditor.getModel(),s=this._originalEditor._getViewModel().coordinatesConverter,d=this._modifiedEditor._getViewModel().coordinatesConverter,l=[],u=[],c=0,h=0,v=0,g=0,f=0,m=0,_=function(e,i){return e.afterLineNumber-i.afterLineNumber},p=function(e,i){if(null===i.domNode&&e.length>0){var t=e[e.length-1];if(t.afterLineNumber===i.afterLineNumber&&null===t.domNode)return void(t.heightInLines+=i.heightInLines)}e.push(i)},y=new ke(this._modifiedForeignVZ),C=new ke(this._originalForeignVZ),w=1,D=1,b=0,L=this._lineChanges.length;b<=L;b++){var S=b<L?this._lineChanges[b]:null;null!==S?(v=S.originalStartLineNumber+(S.originalEndLineNumber>0?-1:0),g=S.modifiedStartLineNumber+(S.modifiedEndLineNumber>0?-1:0),h=S.originalEndLineNumber>0?e._getViewLineCount(this._originalEditor,S.originalStartLineNumber,S.originalEndLineNumber):0,c=S.modifiedEndLineNumber>0?e._getViewLineCount(this._modifiedEditor,S.modifiedStartLineNumber,S.modifiedEndLineNumber):0,f=Math.max(S.originalStartLineNumber,S.originalEndLineNumber),m=Math.max(S.modifiedStartLineNumber,S.modifiedEndLineNumber)):(f=v+=1e7+h,m=g+=1e7+c);var N=[],E=[];if(r){var k=void 0;k=S?S.originalEndLineNumber>0?S.originalStartLineNumber-w:S.modifiedStartLineNumber-D:a.getLineCount()-w+1;for(var M=0;M<k;M++){var I=w+M,R=D+M,T=s.getModelLineViewLineCount(I),O=d.getModelLineViewLineCount(R);T<O?N.push({afterLineNumber:I,heightInLines:O-T,domNode:null,marginDomNode:null}):T>O&&E.push({afterLineNumber:R,heightInLines:T-O,domNode:null,marginDomNode:null})}S&&(w=(S.originalEndLineNumber>0?S.originalEndLineNumber:S.originalStartLineNumber)+1,D=(S.modifiedEndLineNumber>0?S.modifiedEndLineNumber:S.modifiedStartLineNumber)+1)}for(;y.current&&y.current.afterLineNumber<=m;){var x=void 0;x=y.current.afterLineNumber<=g?v-g+y.current.afterLineNumber:f;var P=null;S&&S.modifiedStartLineNumber<=y.current.afterLineNumber&&y.current.afterLineNumber<=S.modifiedEndLineNumber&&(P=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),N.push({afterLineNumber:x,heightInLines:y.current.height/t,domNode:null,marginDomNode:P}),y.advance()}for(;C.current&&C.current.afterLineNumber<=f;){var V=void 0;V=C.current.afterLineNumber<=v?g-v+C.current.afterLineNumber:m,E.push({afterLineNumber:V,heightInLines:C.current.height/i,domNode:null}),C.advance()}if(null!==S&&Ve(S)){var Z=this._produceOriginalFromDiff(S,h,c);Z&&N.push(Z)}if(null!==S&&Ze(S)){var W=this._produceModifiedFromDiff(S,h,c);W&&E.push(W)}var F=0,A=0;for(N=N.sort(_),E=E.sort(_);F<N.length&&A<E.length;){var H=N[F],Q=E[A],z=H.afterLineNumber-v,U=Q.afterLineNumber-g;z<U?(p(l,H),F++):U<z?(p(u,Q),A++):H.shouldNotShrink?(p(l,H),F++):Q.shouldNotShrink?(p(u,Q),A++):H.heightInLines>=Q.heightInLines?(H.heightInLines-=Q.heightInLines,A++):(Q.heightInLines-=H.heightInLines,F++)}for(;F<N.length;)p(l,N[F]),F++;for(;A<E.length;)p(u,E[A]),A++}return{original:e._ensureDomNodes(l),modified:e._ensureDomNodes(u)}}}],[{key:"_getViewLineCount",value:function(e,i,t){var n=e.getModel(),o=e._getViewModel();if(n&&o){var r=He(n,o,i,t);return r.endLineNumber-r.startLineNumber+1}return t-i+1}},{key:"_ensureDomNodes",value:function(e){return e.map((function(e){return e.domNode||(e.domNode=Ae()),e}))}}]),e}();function Ie(e,i,t,n,o){return{range:new ee.e(e,i,t,n),options:o}}var Re={arrowRevertChange:ne.qx.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+Z.kS.asClassName(W.lA.arrowRight)}),charDelete:ne.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:ne.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:ne.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:ne.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:ne.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:ne.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+Z.kS.asClassName(be),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:ne.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:ne.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+Z.kS.asClassName(Le),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:ne.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})},Te=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;return(0,u.Z)(this,t),(r=i.call(this,e))._disableSash=!1===n,r._sashRatio=null,r._sashPosition=null,r._startSashPosition=null,r._sash=r._register(new m.g(r._dataSource.getContainerDomNode(),(0,o.Z)(r),{orientation:0})),r._disableSash&&(r._sash.state=0),r._sash.onDidStart((function(){return r._onSashDragStart()})),r._sash.onDidChange((function(e){return r._onSashDrag(e)})),r._sash.onDidEnd((function(){return r._onSashDragEnd()})),r._sash.onDidReset((function(){return r._onSashReset()})),r}return(0,c.Z)(t,[{key:"setEnableSplitViewResizing",value:function(e){var i=!1===e;this._disableSash!==i&&(this._disableSash=i,this._sash.state=this._disableSash?0:3)}},{key:"layout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sashRatio,i=this._dataSource.getWidth(),n=i-(this._dataSource.getOptions().renderOverviewRuler?Ne.ENTIRE_DIFF_OVERVIEW_WIDTH:0),o=Math.floor((e||.5)*n),r=Math.floor(.5*n);return o=this._disableSash?r:o||r,n>2*t.MINIMUM_EDITOR_WIDTH?(o<t.MINIMUM_EDITOR_WIDTH&&(o=t.MINIMUM_EDITOR_WIDTH),o>n-t.MINIMUM_EDITOR_WIDTH&&(o=n-t.MINIMUM_EDITOR_WIDTH)):o=r,this._sashPosition!==o&&(this._sashPosition=o),this._sash.layout(),this._sashPosition}},{key:"_onSashDragStart",value:function(){this._startSashPosition=this._sashPosition}},{key:"_onSashDrag",value:function(e){var i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Ne.ENTIRE_DIFF_OVERVIEW_WIDTH:0),t=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=t/i,this._dataSource.relayoutEditors()}},{key:"_onSashDragEnd",value:function(){this._sash.layout()}},{key:"_onSashReset",value:function(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}},{key:"getVerticalSashTop",value:function(e){return 0}},{key:"getVerticalSashLeft",value:function(e){return this._sashPosition}},{key:"getVerticalSashHeight",value:function(e){return this._dataSource.getHeight()}},{key:"_getViewZones",value:function(e,i,t){var n=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new Oe(e,i,t,n,o).getViewZones()}},{key:"_getOriginalEditorDecorations",value:function(e,i,t,n){var o,r=this._dataSource.getOriginalEditor(),a=String(this._removeColor),s={decorations:[],overviewZones:[]},d=r.getModel(),u=r._getViewModel(),c=(0,l.Z)(i);try{for(c.s();!(o=c.n()).done;){var h=o.value;if(Ze(h)){s.decorations.push({range:new ee.e(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:n?Re.lineDeleteWithSign:Re.lineDelete}),Ve(h)&&h.charChanges||s.decorations.push(Ie(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824,Re.charDeleteWholeLine));var v=He(d,u,h.originalStartLineNumber,h.originalEndLineNumber);if(s.overviewZones.push(new re.EY(v.startLineNumber,v.endLineNumber,0,a)),h.charChanges){var g,f=(0,l.Z)(h.charChanges);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(Fe(m))if(t)for(var _=m.originalStartLineNumber;_<=m.originalEndLineNumber;_++){var p=void 0,y=void 0;p=_===m.originalStartLineNumber?m.originalStartColumn:d.getLineFirstNonWhitespaceColumn(_),y=_===m.originalEndLineNumber?m.originalEndColumn:d.getLineLastNonWhitespaceColumn(_),s.decorations.push(Ie(_,p,_,y,Re.charDelete))}else s.decorations.push(Ie(m.originalStartLineNumber,m.originalStartColumn,m.originalEndLineNumber,m.originalEndColumn,Re.charDelete))}}catch(C){f.e(C)}finally{f.f()}}}}}catch(C){c.e(C)}finally{c.f()}return s}},{key:"_getModifiedEditorDecorations",value:function(e,i,t,n,o){var r,a=this._dataSource.getModifiedEditor(),s=String(this._insertColor),d={decorations:[],overviewZones:[]},u=a.getModel(),c=a._getViewModel(),h=(0,l.Z)(i);try{var g=function(){var i=r.value;if(o)if(i.modifiedEndLineNumber>0)d.decorations.push({range:new ee.e(i.modifiedStartLineNumber,1,i.modifiedStartLineNumber,1),options:Re.arrowRevertChange});else{var a=e.modified.find((function(e){return e.afterLineNumber===i.modifiedStartLineNumber}));a&&(a.marginDomNode=function(){var e=document.createElement("div");return e.className="arrow-revert-change "+Z.kS.asClassName(W.lA.arrowRight),v.$("div",{},e)}())}if(Ve(i)){d.decorations.push({range:new ee.e(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,1073741824),options:n?Re.lineInsertWithSign:Re.lineInsert}),Ze(i)&&i.charChanges||d.decorations.push(Ie(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,1073741824,Re.charInsertWholeLine));var h=He(u,c,i.modifiedStartLineNumber,i.modifiedEndLineNumber);if(d.overviewZones.push(new re.EY(h.startLineNumber,h.endLineNumber,0,s)),i.charChanges){var g,f=(0,l.Z)(i.charChanges);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(We(m))if(t)for(var _=m.modifiedStartLineNumber;_<=m.modifiedEndLineNumber;_++){var p=void 0,y=void 0;p=_===m.modifiedStartLineNumber?m.modifiedStartColumn:u.getLineFirstNonWhitespaceColumn(_),y=_===m.modifiedEndLineNumber?m.modifiedEndColumn:u.getLineLastNonWhitespaceColumn(_),d.decorations.push(Ie(_,p,_,y,Re.charInsert))}else d.decorations.push(Ie(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,Re.charInsert))}}catch(C){f.e(C)}finally{f.f()}}}};for(h.s();!(r=h.n()).done;)g()}catch(f){h.e(f)}finally{h.f()}return d}}]),t}(Ee);Te.MINIMUM_EDITOR_WIDTH=100;var Oe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,o,r,a){return(0,u.Z)(this,t),i.call(this,e,n,o,r,a)}return(0,c.Z)(t,[{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function(){return null}},{key:"_produceOriginalFromDiff",value:function(e,i,t){return t>i?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t-i,domNode:null}:null}},{key:"_produceModifiedFromDiff",value:function(e,i,t){return i>t?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:i-t,domNode:null}:null}}]),t}(Me),xe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var o;return(0,u.Z)(this,t),(o=i.call(this,e))._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,o._register(e.getOriginalEditor().onDidLayoutChange((function(i){o._decorationsLeft!==i.decorationsLeft&&(o._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))),o}return(0,c.Z)(t,[{key:"setEnableSplitViewResizing",value:function(e){}},{key:"_getViewZones",value:function(e,i,t,n){var o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new Pe(e,i,t,o,r,n).getViewZones()}},{key:"_getOriginalEditorDecorations",value:function(e,i,t,n){var o,r=String(this._removeColor),a={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),d=s.getModel(),u=s._getViewModel(),c=0,h=(0,l.Z)(i);try{for(h.s();!(o=h.n()).done;){var v=o.value;if(Ze(v)){for(a.decorations.push({range:new ee.e(v.originalStartLineNumber,1,v.originalEndLineNumber,1073741824),options:Re.lineDeleteMargin});c<e.modified.length;){var g=e.modified[c];if(g.diff&&g.diff.originalStartLineNumber>=v.originalStartLineNumber)break;c++}var f=0;if(c<e.modified.length){var m=e.modified[c];m.diff&&m.diff.originalStartLineNumber===v.originalStartLineNumber&&m.diff.originalEndLineNumber===v.originalEndLineNumber&&m.diff.modifiedStartLineNumber===v.modifiedStartLineNumber&&m.diff.modifiedEndLineNumber===v.modifiedEndLineNumber&&(f=m.heightInLines)}var _=He(d,u,v.originalStartLineNumber,v.originalEndLineNumber);a.overviewZones.push(new re.EY(_.startLineNumber,_.endLineNumber,f,r))}}}catch(p){h.e(p)}finally{h.f()}return a}},{key:"_getModifiedEditorDecorations",value:function(e,i,t,n,o){var r,a=this._dataSource.getModifiedEditor(),s=String(this._insertColor),d={decorations:[],overviewZones:[]},u=a.getModel(),c=a._getViewModel(),h=(0,l.Z)(i);try{for(h.s();!(r=h.n()).done;){var v=r.value;if(Ve(v)){d.decorations.push({range:new ee.e(v.modifiedStartLineNumber,1,v.modifiedEndLineNumber,1073741824),options:n?Re.lineInsertWithSign:Re.lineInsert});var g=He(u,c,v.modifiedStartLineNumber,v.modifiedEndLineNumber);if(d.overviewZones.push(new re.EY(g.startLineNumber,g.endLineNumber,0,s)),v.charChanges){var f,m=(0,l.Z)(v.charChanges);try{for(m.s();!(f=m.n()).done;){var _=f.value;if(We(_))if(t)for(var p=_.modifiedStartLineNumber;p<=_.modifiedEndLineNumber;p++){var y=void 0,C=void 0;y=p===_.modifiedStartLineNumber?_.modifiedStartColumn:u.getLineFirstNonWhitespaceColumn(p),C=p===_.modifiedEndLineNumber?_.modifiedEndColumn:u.getLineLastNonWhitespaceColumn(p),d.decorations.push(Ie(p,y,p,C,Re.charInsert))}else d.decorations.push(Ie(_.modifiedStartLineNumber,_.modifiedStartColumn,_.modifiedEndLineNumber,_.modifiedEndColumn,Re.charInsert))}}catch(w){m.e(w)}finally{m.f()}}else d.decorations.push(Ie(v.modifiedStartLineNumber,1,v.modifiedEndLineNumber,1073741824,Re.charInsertWholeLine))}}}catch(w){h.e(w)}finally{h.f()}return d}},{key:"layout",value:function(){return Math.max(5,this._decorationsLeft)}}]),t}(Ee),Pe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,o,r,a,s){var d;return(0,u.Z)(this,t),(d=i.call(this,e,n,o,r,a))._originalModel=r.getModel(),d._renderIndicators=s,d._pendingLineChange=[],d._pendingViewZones=[],d._lineBreaksComputer=d._modifiedEditor._getViewModel().createLineBreaksComputer(),d}return(0,c.Z)(t,[{key:"getViewZones",value:function(){var e=(0,r.Z)((0,a.Z)(t.prototype),"getViewZones",this).call(this);return this._finalize(e),e}},{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function(){var e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}},{key:"_produceOriginalFromDiff",value:function(e,i,t){var n=document.createElement("div");return n.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t,domNode:document.createElement("div"),marginDomNode:n}}},{key:"_produceModifiedFromDiff",value:function(e,i,t){var n=document.createElement("div");n.className="view-lines line-delete ".concat(_e.S);var o=document.createElement("div");o.className="inline-deleted-margin-view-zone";for(var r={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:i,minWidthInPx:0,domNode:n,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}},a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}},{key:"_finalize",value:function(e){for(var i=this._modifiedEditor.getOptions(),t=this._modifiedEditor.getModel().getOptions().tabSize,n=i.get(46),o=i.get(29),r=n.typicalHalfwidthCharacterWidth,a=i.get(95),s=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),u=i.get(61),c=i.get(133).decorationsWidth,h=i.get(107),v=i.get(90),g=i.get(85),f=i.get(47),m=this._lineBreaksComputer.finalize(),_=0,p=0;p<this._pendingLineChange.length;p++){var y=this._pendingLineChange[p],w=this._pendingViewZones[p],D=w.domNode;(0,C.N)(D,n);var b=w.marginDomNode;(0,C.N)(b,n);var L=[];if(y.charChanges){var S,N=(0,l.Z)(y.charChanges);try{for(N.s();!(S=N.n()).done;){var E=S.value;Fe(E)&&L.push(new x.$t(new ee.e(E.originalStartLineNumber,E.originalStartColumn,E.originalEndLineNumber,E.originalEndColumn),"char-delete",0))}}catch(J){N.e(J)}finally{N.f()}}for(var k=L.length>0,M=(0,ie.l$)(1e4),I=0,R=0,T=null,O=y.originalStartLineNumber;O<=y.originalEndLineNumber;O++){var P=O-y.originalStartLineNumber,V=this._originalModel.tokenization.getLineTokens(O),Z=V.getLineContent(),W=m[_++],F=ae.Kp.filter(L,O,1,Z.length+1);if(W){var A,H=0,Q=(0,l.Z)(W.breakOffsets);try{for(Q.s();!(A=Q.n()).done;){var z=A.value,U=V.sliceAndInflate(H,z,0),B=Z.substring(H,z);I=Math.max(I,this._renderOriginalLine(R++,B,U,ae.Kp.extractWrapped(F,H,z),k,s,d,n,o,u,c,h,v,g,f,t,M,b)),H=z}}catch(J){Q.e(J)}finally{Q.f()}for(T||(T=[]);T.length<P;)T[T.length]=1;T[P]=W.breakOffsets.length,w.heightInLines+=W.breakOffsets.length-1;var K=document.createElement("div");K.className="gutter-delete",e.original.push({afterLineNumber:O,afterColumn:0,heightInLines:W.breakOffsets.length-1,domNode:Ae(),marginDomNode:K})}else I=Math.max(I,this._renderOriginalLine(R++,Z,V,F,k,s,d,n,o,u,c,h,v,g,f,t,M,b))}I+=a;var q=M.build(),j=Se?Se.createHTML(q):q;if(D.innerHTML=j,w.minWidthInPx=I*r,T)for(var X=y.originalEndLineNumber-y.originalStartLineNumber;T.length<=X;)T[T.length]=1;w.diff.viewLineCounts=T}e.original.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber}))}},{key:"_renderOriginalLine",value:function(e,i,t,n,o,r,a,s,d,l,u,c,h,v,g,f,m,_){m.appendASCIIString('<div class="view-line'),o||m.appendASCIIString(" char-delete"),m.appendASCIIString('" style="top:'),m.appendASCIIString(String(e*l)),m.appendASCIIString('px;width:1000000px;">');var p=x.wA.isBasicASCII(i,r),y=x.wA.containsRTL(i,p,a),C=(0,O.d1)(new O.IJ(s.isMonospace&&!d,s.canUseHalfwidthRightwardsArrow,i,!1,p,y,0,t,n,f,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,c,h,v,g!==M.n0.OFF,null),m);if(m.appendASCIIString("</div>"),this._renderIndicators){var w=document.createElement("div");w.className="delete-sign ".concat(Z.kS.asClassName(Le)),w.setAttribute("style","position:absolute;top:".concat(e*l,"px;width:").concat(u,"px;height:").concat(l,"px;right:0;")),_.appendChild(w)}return C.characterMapping.getHorizontalOffset(C.characterMapping.length)}}]),t}(Me);function Ve(e){return e.modifiedEndLineNumber>0}function Ze(e){return e.originalEndLineNumber>0}function We(e){return e.modifiedStartLineNumber===e.modifiedEndLineNumber?e.modifiedEndColumn-e.modifiedStartColumn>0:e.modifiedEndLineNumber-e.modifiedStartLineNumber>0}function Fe(e){return e.originalStartLineNumber===e.originalEndLineNumber?e.originalEndColumn-e.originalStartColumn>0:e.originalEndLineNumber-e.originalStartLineNumber>0}function Ae(){var e=document.createElement("div");return e.className="diagonal-fill",e}function He(e,i,t,n){var o=e.getLineCount();return t=Math.min(o,Math.max(1,t)),n=Math.min(o,Math.max(1,n)),i.coordinatesConverter.convertModelRangeToViewRange(new ee.e(t,e.getLineMinColumn(t),n,e.getLineMaxColumn(n)))}function Qe(e,i){return{enableSplitViewResizing:(0,M.O7)(e.enableSplitViewResizing,i.enableSplitViewResizing),renderSideBySide:(0,M.O7)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,M.O7)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,M.Zc)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,M.Zc)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,M.O7)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,M.O7)(e.renderIndicators,i.renderIndicators),originalEditable:(0,M.O7)(e.originalEditable,i.originalEditable),diffCodeLens:(0,M.O7)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,M.O7)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(t=e.diffWordWrap,n=i.diffWordWrap,(0,M.NY)(t,n,["off","on","inherit"]))};var t,n}(0,Z.Ic)((function(e,i){var t=e.getColor(V.ypS);t&&i.addRule(".monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ".concat(t,"; }"));var n=e.getColor(V.hzo)||t;n&&i.addRule(".monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ".concat(n,"; }"));var o=e.getColor(V.j51)||n;o&&(i.addRule(".monaco-editor .inline-added-margin-view-zone { background-color: ".concat(o,"; }")),i.addRule(".monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ".concat(o,"; }")));var r=e.getColor(V.P4M);r&&i.addRule(".monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ".concat(r,"; }"));var a=e.getColor(V.xi6)||r;a&&i.addRule(".monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ".concat(a,"; }"));var s=e.getColor(V.zOm)||a;s&&(i.addRule(".monaco-editor .inline-deleted-margin-view-zone { background-color: ".concat(s,"; }")),i.addRule(".monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ".concat(s,"; }")));var d=e.getColor(V.XL$);d&&i.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ".concat((0,pe.c3)(e.type)?"dashed":"solid"," ").concat(d,"; }"));var l=e.getColor(V.mHy);l&&i.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ".concat((0,pe.c3)(e.type)?"dashed":"solid"," ").concat(l,"; }"));var u=e.getColor(V._wn);u&&i.addRule(".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ".concat(u,"; }"));var c=e.getColor(V.LLc);c&&i.addRule(".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ".concat(c,"; }"));var h=e.getColor(V.etL);h&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ".concat(h,";\n\t\t\t}\n\t\t"));var v=e.getColor(V.ABB);v&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ".concat(v,";\n\t\t\t}\n\t\t"));var g=e.getColor(V.ynu);g&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ".concat(g,";\n\t\t\t}\n\t\t"));var f=e.getColor(V.L_t);i.addRule("\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t".concat(f," 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t").concat(f," 50%, ").concat(f," 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t"))}))},77141:function(e,i,t){t.d(i,{F:function(){return f}});var n=t(15671),o=t(43144),r=t(11752),a=t(61120),s=t(60136),d=t(27277),l=t(65361),u=t(28941),c=t(10526),h=t(57151),v=t(30788),g={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},f=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(this,t),(o=i.call(this))._onDidUpdate=o._register(new u.Q5),o._editor=e,o._options=h.jB(r,g,!1),o.disposed=!1,o.nextIdx=-1,o.ranges=[],o.ignoreSelectionChange=!1,o.revealFirst=Boolean(o._options.alwaysRevealFirst),o._register(o._editor.onDidDispose((function(){return o.dispose()}))),o._register(o._editor.onDidUpdateDiff((function(){return o._onDiffUpdated()}))),o._options.followsCaret&&o._register(o._editor.getModifiedEditor().onDidChangeCursorPosition((function(e){o.ignoreSelectionChange||(o.nextIdx=-1)}))),o._options.alwaysRevealFirst&&o._register(o._editor.getModifiedEditor().onDidChangeModel((function(e){o.revealFirst=!0}))),o._init(),o}return(0,o.Z)(t,[{key:"_init",value:function(){this._editor.getLineChanges()}},{key:"_onDiffUpdated",value:function(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}},{key:"_compute",value:function(e){var i=this;this.ranges=[],e&&e.forEach((function(e){!i._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((function(e){i.ranges.push({rhs:!0,range:new v.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):0===e.modifiedEndLineNumber?i.ranges.push({rhs:!0,range:new v.e(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):i.ranges.push({rhs:!0,range:new v.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})})),this.ranges.sort((function(e,i){return v.e.compareRangesUsingStarts(e.range,i.range)})),this._onDidUpdate.fire(this)}},{key:"_initIdx",value:function(e){var i=!1,t=this._editor.getPosition();if(t){for(var n=0,o=this.ranges.length;n<o&&!i;n++){var r=this.ranges[n].range;t.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=n+(e?0:-1),i=!0)}i||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}},{key:"_move",value:function(e,i){if(l.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),this.canNavigate()){-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var n=t.range.getStartPosition();this._editor.setPosition(n),this._editor.revealRangeInCenter(t.range,i)}finally{this.ignoreSelectionChange=!1}}}},{key:"canNavigate",value:function(){return this.ranges&&this.ranges.length>0}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._move(!0,e)}},{key:"previous",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._move(!1,e)}},{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(t.prototype),"dispose",this).call(this),this.ranges=[],this.disposed=!0}}]),t}(c.JT)},77087:function(e,i,t){t.d(i,{H:function(){return b}});var n=t(15671),o=t(43144),r=t(97326),a=t(60136),s=t(27277),d=t(11752),l=t(61120),u=t(57151),c=t(56692),h=t(48483),v=t(89850),g=t(49525),f=t(8850),m=t(13023),_=t(3553),p=t(99277),y=t(26765),C=t(45161),w=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},D=function(e,i){return function(t,n){i(t,n,e)}},b=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(e,o,a,s,u,c,h,v,g,f,m,_){var p,y;return(0,n.Z)(this,t),(y=i.call(this,e,Object.assign(Object.assign({},a.getRawOptions()),{overflowWidgetsDomNode:a.getOverflowWidgetsDomNode()}),{},s,u,c,h,v,g,f,m,_))._parentEditor=a,y._overwriteOptions=o,(0,d.Z)((p=(0,r.Z)(y),(0,l.Z)(t.prototype)),"updateOptions",p).call(p,y._overwriteOptions),y._register(a.onDidChangeConfiguration((function(e){return y._onParentConfigurationChanged(e)}))),y}return(0,o.Z)(t,[{key:"getParentEditor",value:function(){return this._parentEditor}},{key:"_onParentConfigurationChanged",value:function(e){(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions()),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}},{key:"updateOptions",value:function(e){u.jB(this._overwriteOptions,e,!0),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}}]),t}(h.Gm);b=w([D(3,f.TG),D(4,c.$),D(5,v.Hy),D(6,g.i6),D(7,_.XE),D(8,m.lT),D(9,p.F),D(10,y.c_),D(11,C.p)],b)}}]);
//# sourceMappingURL=monaco-editor-vendor.55a95165.65683474.js.map