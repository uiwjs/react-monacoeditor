"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[929],{52308:function(e,t,n){n.r(t);var i=n(15671),r=n(43144),o=n(60136),s=n(43668),a=n(98351),u=n(22055),c=n(87697),l=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomIn",label:c.N("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(u.C.getZoomLevel()+1)}}]),n}(a.R6),d=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomOut",label:c.N("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(u.C.getZoomLevel()-1)}}]),n}(a.R6),h=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomReset",label:c.N("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(0)}}]),n}(a.R6);(0,a.Qr)(l),(0,a.Qr)(d),(0,a.Qr)(h)},44817:function(e,t,n){n.d(t,{Qq:function(){return F},Qs:function(){return K},Zg:function(){return I},x$:function(){return T},xC:function(){return L}});var i=n(29439),r=n(93433),o=n(15671),s=n(43144),a=n(37762),u=n(87757),c=n.n(u),l=n(58340),d=n(71881),h=n(32124),f=n(68552),g=n(25138),v=n(49511),p=n(64272),m=n(50605),_=n(50004),k=n(21872),y=n(10849),b=n(30788),w=n(52091),x=n(70437),M=n(26777),C=n(77582),S=n(87697),D=n(89850),P=n(73649),Z=n(8850),R=n(45161),N=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};function I(e){if((e=e.filter((function(e){return e.range}))).length){for(var t=e[0].range,n=1;n<e.length;n++)t=b.e.plusRange(t,e[n].range);var i=t,r=i.startLineNumber,o=i.endLineNumber;r===o?1===e.length?(0,l.Z9)(S.N("hint11","Made 1 formatting edit on line {0}",r)):(0,l.Z9)(S.N("hintn1","Made {0} formatting edits on line {1}",e.length,r)):1===e.length?(0,l.Z9)(S.N("hint1n","Made 1 formatting edit between lines {0} and {1}",r,o)):(0,l.Z9)(S.N("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,r,o))}}function E(e,t,n){var i,r=[],o=new Set,s=e.ordered(n),u=(0,a.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;r.push(c),c.extensionId&&o.add(P.k.toKey(c.extensionId))}}catch(g){u.e(g)}finally{u.f()}var l,d=t.ordered(n),h=(0,a.Z)(d);try{var f=function(){var e=l.value;if(e.extensionId){if(o.has(P.k.toKey(e.extensionId)))return"continue";o.add(P.k.toKey(e.extensionId))}r.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:function(t,n,i){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),n,i)}})};for(h.s();!(l=h.n()).done;)f()}catch(g){h.e(g)}finally{h.f()}return r}var L=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"setFormatterSelector",value:function(t){return{dispose:e._selectors.unshift(t)}}},{key:"select",value:function(t,n,i){return N(this,void 0,void 0,c().mark((function r(){var o;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==t.length){r.next=2;break}return r.abrupt("return",void 0);case 2:if(!(o=g.$.first(e._selectors))){r.next=7;break}return r.next=6,o(t,n,i);case 6:return r.abrupt("return",r.sent);case 7:return r.abrupt("return",void 0);case 8:case"end":return r.stop()}}),r)})))}}]),e}();function T(e,t,n,i,r,o){return N(this,void 0,void 0,c().mark((function s(){var a,u,l,d,h,f;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.get(Z.TG),u=e.get(R.p),l=u.documentRangeFormattingEditProvider,d=(0,k.CL)(t)?t.getModel():t,h=l.ordered(d),s.next=6,L.select(h,d,i);case 6:if(!(f=s.sent)){s.next=11;break}return r.report(f),s.next=11,a.invokeFunction(O,f,t,n,o);case 11:case"end":return s.stop()}}),s)})))}function O(e,t,n,i,o){return N(this,void 0,void 0,c().mark((function s(){var u,l,h,f,g,v,p,m,y,M,S,D,P,Z,R,E,L,T,O,F,A,W,B,K,G,H=this;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=e.get(x.p),(0,k.CL)(n)?(l=n.getModel(),h=new _.Dl(n,5,void 0,o)):(l=n,h=new _.YQ(n,o)),f=[],g=0,v=(0,a.Z)((0,d._2)(i).sort(b.e.compareRangesUsingStarts));try{for(v.s();!(p=v.n()).done;)m=p.value,g>0&&b.e.areIntersectingOrTouching(f[g-1],m)?f[g-1]=b.e.fromPositions(f[g-1].getStartPosition(),m.getEndPosition()):g=f.push(m)}catch(U){v.e(U)}finally{v.f()}y=function(e){return N(H,void 0,void 0,c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.provideDocumentRangeFormattingEdits(l,e,l.getFormattingOptions(),h.token);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0=[];case 5:return n.abrupt("return",n.t0);case 6:case"end":return n.stop()}}),n)})))},M=function(e,t){if(!e.length||!t.length)return!1;var n=e.reduce((function(e,t){return b.e.plusRange(e,t.range)}),e[0].range);if(!t.some((function(e){return b.e.intersectRanges(n,e.range)})))return!1;var i,r=(0,a.Z)(e);try{for(r.s();!(i=r.n()).done;){var o,s=i.value,u=(0,a.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(b.e.intersectRanges(s.range,c.range))return!0}}catch(U){u.e(U)}finally{u.f()}}}catch(U){r.e(U)}finally{r.f()}return!1},S=[],D=[],s.prev=10,P=0,Z=f;case 12:if(!(P<Z.length)){s.next=24;break}if(R=Z[P],!h.token.isCancellationRequested){s.next=16;break}return s.abrupt("return",!0);case 16:return s.t0=D,s.next=19,y(R);case 19:s.t1=s.sent,s.t0.push.call(s.t0,s.t1);case 21:P++,s.next=12;break;case 24:E=0;case 25:if(!(E<f.length)){s.next=49;break}L=E+1;case 27:if(!(L<f.length)){s.next=46;break}if(!h.token.isCancellationRequested){s.next=30;break}return s.abrupt("return",!0);case 30:if(!M(D[E],D[L])){s.next=43;break}return T=b.e.plusRange(f[E],f[L]),s.next=34,y(T);case 34:O=s.sent,f.splice(L,1),f.splice(E,1),f.push(T),D.splice(L,1),D.splice(E,1),D.push(O),E=0,L=0;case 43:++L,s.next=27;break;case 46:++E,s.next=25;break;case 49:F=0,A=D;case 50:if(!(F<A.length)){s.next=61;break}if(W=A[F],!h.token.isCancellationRequested){s.next=54;break}return s.abrupt("return",!0);case 54:return s.next=56,u.computeMoreMinimalEdits(l.uri,W);case 56:(B=s.sent)&&S.push.apply(S,(0,r.Z)(B));case 58:F++,s.next=50;break;case 61:return s.prev=61,h.dispose(),s.finish(61);case 64:if(0!==S.length){s.next=66;break}return s.abrupt("return",!1);case 66:return(0,k.CL)(n)?(C.V.execute(n,S,!0),I(S),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1)):(K=S[0].range,G=new w.Y(K.startLineNumber,K.startColumn,K.endLineNumber,K.endColumn),l.pushEditOperations([G],S.map((function(e){return{text:e.text,range:b.e.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.range;if(b.e.areIntersectingOrTouching(i,G))return[new w.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}}catch(U){n.e(U)}finally{n.f()}return null}))),s.abrupt("return",!0);case 68:case"end":return s.stop()}}),s,null,[[10,,61,64]])})))}function F(e,t,n,i,r){return N(this,void 0,void 0,c().mark((function o(){var s,a,u,l,d;return c().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=e.get(Z.TG),a=e.get(R.p),u=(0,k.CL)(t)?t.getModel():t,l=E(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,u),o.next=6,L.select(l,u,n);case 6:if(!(d=o.sent)){o.next=11;break}return i.report(d),o.next=11,s.invokeFunction(A,d,t,n,r);case 11:case"end":return o.stop()}}),o)})))}function A(e,t,n,r,o){return N(this,void 0,void 0,c().mark((function s(){var u,l,d,h,f,g,v,p,m;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return u=e.get(x.p),(0,k.CL)(n)?(l=n.getModel(),d=new _.Dl(n,5,void 0,o)):(l=n,d=new _.YQ(n,o)),s.prev=2,s.next=5,t.provideDocumentFormattingEdits(l,l.getFormattingOptions(),d.token);case 5:return f=s.sent,s.next=8,u.computeMoreMinimalEdits(l.uri,f);case 8:if(h=s.sent,!d.token.isCancellationRequested){s.next=11;break}return s.abrupt("return",!0);case 11:return s.prev=11,d.dispose(),s.finish(11);case 14:if(h&&0!==h.length){s.next=16;break}return s.abrupt("return",!1);case 16:return(0,k.CL)(n)?(C.V.execute(n,h,2!==r),2!==r&&(I(h),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1))):(g=h,v=(0,i.Z)(g,1),p=v[0].range,m=new w.Y(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn),l.pushEditOperations([m],h.map((function(e){return{text:e.text,range:b.e.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.range;if(b.e.areIntersectingOrTouching(i,m))return[new w.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}}catch(r){n.e(r)}finally{n.f()}return null}))),s.abrupt("return",!0);case 18:case"end":return s.stop()}}),s,null,[[2,,11,14]])})))}function W(e,t,n,i,r,o){return N(this,void 0,void 0,c().mark((function s(){var u,l,h,g,v;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=t.documentRangeFormattingEditProvider.ordered(n),l=(0,a.Z)(u),s.prev=2,l.s();case 4:if((h=l.n()).done){s.next=15;break}return g=h.value,s.next=8,Promise.resolve(g.provideDocumentRangeFormattingEdits(n,i,r,o)).catch(f.Cp);case 8:if(v=s.sent,!(0,d.Of)(v)){s.next=13;break}return s.next=12,e.computeMoreMinimalEdits(n.uri,v);case 12:return s.abrupt("return",s.sent);case 13:s.next=4;break;case 15:s.next=20;break;case 17:s.prev=17,s.t0=s.catch(2),l.e(s.t0);case 20:return s.prev=20,l.f(),s.finish(20);case 23:return s.abrupt("return",void 0);case 24:case"end":return s.stop()}}),s,null,[[2,17,20,23]])})))}function B(e,t,n,i,r){return N(this,void 0,void 0,c().mark((function o(){var s,u,l,h,g;return c().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s=E(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,n),u=(0,a.Z)(s),o.prev=2,u.s();case 4:if((l=u.n()).done){o.next=15;break}return h=l.value,o.next=8,Promise.resolve(h.provideDocumentFormattingEdits(n,i,r)).catch(f.Cp);case 8:if(g=o.sent,!(0,d.Of)(g)){o.next=13;break}return o.next=12,e.computeMoreMinimalEdits(n.uri,g);case 12:return o.abrupt("return",o.sent);case 13:o.next=4;break;case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(2),u.e(o.t0);case 20:return o.prev=20,u.f(),o.finish(20);case 23:return o.abrupt("return",void 0);case 24:case"end":return o.stop()}}),o,null,[[2,17,20,23]])})))}function K(e,t,n,i,r,o,s){var a=t.onTypeFormattingEditProvider.ordered(n);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(n,i,r,o,s)).catch(f.Cp).then((function(t){return e.computeMoreMinimalEdits(n.uri,t)}))}L._selectors=new v.S,D.P0.registerCommand("_executeFormatRangeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,c().mark((function t(){var i,r,o,s,a,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],o=n[2],(0,p.p_)(m.o.isUri(i)),(0,p.p_)(b.e.isIRange(r)),s=e.get(M.S),a=e.get(x.p),u=e.get(R.p),t.next=8,s.createModelReference(i);case 8:return l=t.sent,t.prev=9,t.abrupt("return",W(a,u,l.object.textEditorModel,b.e.lift(r),o,h.T.None));case 11:return t.prev=11,l.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[9,,11,14]])})))})),D.P0.registerCommand("_executeFormatDocumentProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,c().mark((function t(){var i,r,o,s,a,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],(0,p.p_)(m.o.isUri(i)),o=e.get(M.S),s=e.get(x.p),a=e.get(R.p),t.next=7,o.createModelReference(i);case 7:return u=t.sent,t.prev=8,t.abrupt("return",B(s,a,u.object.textEditorModel,r,h.T.None));case 10:return t.prev=10,u.dispose(),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[8,,10,13]])})))})),D.P0.registerCommand("_executeFormatOnTypeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,c().mark((function t(){var i,r,o,s,a,u,l,d;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],o=n[2],s=n[3],(0,p.p_)(m.o.isUri(i)),(0,p.p_)(y.L.isIPosition(r)),(0,p.p_)("string"===typeof o),a=e.get(M.S),u=e.get(x.p),l=e.get(R.p),t.next=9,a.createModelReference(i);case 9:return d=t.sent,t.prev=10,t.abrupt("return",K(u,l,d.object.textEditorModel,y.L.lift(r),o,s,h.T.None));case 12:return t.prev=12,d.dispose(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[10,,12,15]])})))}))},70479:function(e,t,n){n.r(t);var i=n(60136),r=n(43668),o=n(37762),s=n(29439),a=n(15671),u=n(43144),c=n(87757),l=n.n(c),d=n(71881),h=n(32124),f=n(68552),g=n(27924),v=n(10526),p=n(98351),m=n(56692),_=n(70779),k=n(30788),y=n(44474),b=n(70437),w=n(45161),x=n(44817),M=n(77582),C=n(87697),S=n(89850),D=n(49525),P=n(8850),Z=n(26562),R=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},N=function(e,t){return function(n,i){t(n,i,e)}},I=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},E=function(){function e(t,n,i){var r=this;(0,a.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._workerService=i,this._disposables=new v.SL,this._sessionDisposables=new v.SL,this._disposables.add(n.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(t.onDidChangeModel((function(){return r._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(49)&&r._update()})))}return(0,u.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._sessionDisposables.dispose()}},{key:"_update",value:function(){var e=this;if(this._sessionDisposables.clear(),this._editor.getOption(49)&&this._editor.hasModel()){var t=this._editor.getModel(),n=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(t),i=(0,s.Z)(n,1)[0];if(i&&i.autoFormatTriggerCharacters){var r,a=new _.q,u=(0,o.Z)(i.autoFormatTriggerCharacters);try{for(u.s();!(r=u.n()).done;){var c=r.value;a.add(c.charCodeAt(0))}}catch(l){u.e(l)}finally{u.f()}this._sessionDisposables.add(this._editor.onDidType((function(t){var n=t.charCodeAt(t.length-1);a.has(n)&&e._trigger(String.fromCharCode(n))})))}}}},{key:"_trigger",value:function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)&&this._editor.getSelection().isEmpty()){var n=this._editor.getModel(),i=this._editor.getPosition(),r=new h.A,o=this._editor.onDidChangeModelContent((function(e){if(e.isFlush)return r.cancel(),void o.dispose();for(var t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r.cancel(),void o.dispose()}}));(0,x.Qs)(this._workerService,this._languageFeaturesService,n,i,e,n.getFormattingOptions(),r.token).then((function(e){r.token.isCancellationRequested||(0,d.Of)(e)&&(M.V.execute(t._editor,e,!0),(0,x.Zg)(e))})).finally((function(){o.dispose()}))}}}]),e}();E.ID="editor.contrib.autoFormat",E=R([N(1,w.p),N(2,b.p)],E);var L=function(){function e(t,n,i){var r=this;(0,a.Z)(this,e),this.editor=t,this._languageFeaturesService=n,this._instantiationService=i,this._callOnDispose=new v.SL,this._callOnModel=new v.SL,this._callOnDispose.add(t.onDidChangeConfiguration((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._callOnDispose.add(n.documentRangeFormattingEditProvider.onDidChange(this._update,this))}return(0,u.Z)(e,[{key:"dispose",value:function(){this._callOnDispose.dispose(),this._callOnModel.dispose()}},{key:"_update",value:function(){var e=this;this._callOnModel.clear(),this.editor.getOption(48)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;return e._trigger(n)})))}},{key:"_trigger",value:function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(x.x$,this.editor,e,2,Z.Ex.None,h.T.None).catch(f.dL))}}]),e}();L.ID="editor.contrib.formatOnPaste",L=R([N(1,w.p),N(2,P.TG)],L);var T=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.formatDocument",label:C.N("formatDocument.label","Format Document"),alias:"Format Document",precondition:D.Ao.and(y.u.notInCompositeEditor,y.u.writable,y.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:y.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}return(0,u.Z)(n,[{key:"run",value:function(e,t){return I(this,void 0,void 0,l().mark((function n(){var i,r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hasModel()){n.next=5;break}return i=e.get(P.TG),r=e.get(Z.ek),n.next=5,r.showWhile(i.invokeFunction(x.Qq,t,1,Z.Ex.None,h.T.None),250);case 5:case"end":return n.stop()}}),n)})))}}]),n}(p.R6),O=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.action.formatSelection",label:C.N("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:D.Ao.and(y.u.writable,y.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:y.u.editorTextFocus,primary:(0,g.gx)(2089,2084),weight:100},contextMenuOpts:{when:y.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}return(0,u.Z)(n,[{key:"run",value:function(e,t){return I(this,void 0,void 0,l().mark((function n(){var i,r,o,s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hasModel()){n.next=2;break}return n.abrupt("return");case 2:return i=e.get(P.TG),r=t.getModel(),o=t.getSelections().map((function(e){return e.isEmpty()?new k.e(e.startLineNumber,1,e.startLineNumber,r.getLineMaxColumn(e.startLineNumber)):e})),s=e.get(Z.ek),n.next=8,s.showWhile(i.invokeFunction(x.x$,t,o,1,Z.Ex.None,h.T.None),250);case 8:case"end":return n.stop()}}),n)})))}}]),n}(p.R6);(0,p._K)(E.ID,E),(0,p._K)(L.ID,L),(0,p.Qr)(T),(0,p.Qr)(O),S.P0.registerCommand("editor.action.format",(function(e){return I(void 0,void 0,void 0,l().mark((function t(){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.get(m.$).getFocusedCodeEditor())&&n.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(i=e.get(S.Hy),!n.getSelection().isEmpty()){t.next=9;break}return t.next=7,i.executeCommand("editor.action.formatDocument");case 7:t.next=11;break;case 9:return t.next=11,i.executeCommand("editor.action.formatSelection");case 11:case"end":return t.stop()}}),t)})))}))},77582:function(e,t,n){n.d(t,{V:function(){return u}});var i=n(37762),r=n(15671),o=n(43144),s=n(15261),a=n(30788),u=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"_handleEolEdits",value:function(e,t){var n,r=void 0,o=[],s=(0,i.Z)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;"number"===typeof a.eol&&(r=a.eol),a.range&&"string"===typeof a.text&&o.push(a)}}catch(u){s.e(u)}finally{s.f()}return"number"===typeof r&&e.hasModel()&&e.getModel().pushEOL(r),o}},{key:"_isFullModelReplaceEdit",value:function(e,t){if(!e.hasModel())return!1;var n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}},{key:"execute",value:function(t,n,i){i&&t.pushUndoStop();var r=e._handleEolEdits(t,n);1===r.length&&e._isFullModelReplaceEdit(t,r[0])?t.executeEdits("formatEditsCommand",r.map((function(e){return s.h.replace(a.e.lift(e.range),e.text)}))):t.executeEdits("formatEditsCommand",r.map((function(e){return s.h.replaceMove(a.e.lift(e.range),e.text)}))),i&&t.pushUndoStop()}}]),e}()},68344:function(e,t,n){n.r(t),n.d(t,{MarkerController:function(){return ge},NextMarkerAction:function(){return pe}});var i=n(60136),r=n(43668),o=n(15671),s=n(43144),a=n(87757),u=n.n(a),c=n(7579),l=n(10526),d=n(98351),h=n(56692),f=n(10849),g=n(30788),v=n(44474),p=n(37762),m=n(71881),_=n(28941),k=n(49511),y=n(26684),b=n(50605),w=n(11280),x=n(8850),M=n(52721),C=n(64644),S=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},D=function(e,t){return function(n,i){t(n,i,e)}},P=(0,s.Z)((function e(t,n,i){(0,o.Z)(this,e),this.marker=t,this.index=n,this.total=i})),Z=function(){function e(t,n,i){var r=this;(0,o.Z)(this,e),this._markerService=n,this._configService=i,this._onDidChange=new _.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new l.SL,this._markers=[],this._nextIdx=-1,b.o.isUri(t)?this._resourceFilter=function(e){return e.toString()===t.toString()}:t&&(this._resourceFilter=t);var s=this._configService.getValue("problems.sortOrder"),a=function(e,t){var n=(0,y.qu)(e.resource.toString(),t.resource.toString());return 0===n&&(n="position"===s?g.e.compareRangesUsingStarts(e,t)||M.ZL.compare(e.severity,t.severity):M.ZL.compare(e.severity,t.severity)||g.e.compareRangesUsingStarts(e,t)),n},u=function(){r._markers=r._markerService.read({resource:b.o.isUri(t)?t:void 0,severities:M.ZL.Error|M.ZL.Warning|M.ZL.Info}),"function"===typeof t&&(r._markers=r._markers.filter((function(e){return r._resourceFilter(e.resource)}))),r._markers.sort(a)};u(),this._dispoables.add(n.onMarkerChanged((function(e){r._resourceFilter&&!e.some((function(e){return r._resourceFilter(e)}))||(u(),r._nextIdx=-1,r._onDidChange.fire())})))}return(0,s.Z)(e,[{key:"dispose",value:function(){this._dispoables.dispose(),this._onDidChange.dispose()}},{key:"matches",value:function(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}},{key:"selected",get:function(){var e=this._markers[this._nextIdx];return e&&new P(e,this._nextIdx+1,this._markers.length)}},{key:"_initIdx",value:function(e,t,n){var i=!1,r=this._markers.findIndex((function(t){return t.resource.toString()===e.uri.toString()}));r<0&&(r=(0,m.ry)(this._markers,{resource:e.uri},(function(e,t){return(0,y.qu)(e.resource.toString(),t.resource.toString())})))<0&&(r=~r);for(var o=r;o<this._markers.length;o++){var s=g.e.lift(this._markers[o]);if(s.isEmpty()){var a=e.getWordAtPosition(s.getStartPosition());a&&(s=new g.e(s.startLineNumber,a.startColumn,s.startLineNumber,a.endColumn))}if(t&&(s.containsPosition(t)||t.isBeforeOrEqual(s.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}},{key:"resetIndex",value:function(){this._nextIdx=-1}},{key:"move",value:function(e,t,n){if(0===this._markers.length)return!1;var i=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}},{key:"find",value:function(e,t){var n=this._markers.findIndex((function(t){return t.resource.toString()===e.toString()}));if(!(n<0))for(;n<this._markers.length;n++)if(g.e.containsPosition(this._markers[n],t))return new P(this._markers[n],n+1,this._markers.length)}}]),e}();Z=S([D(1,M.lT),D(2,C.Ui)],Z);var R=(0,x.yh)("IMarkerNavigationService"),N=function(){function e(t,n){(0,o.Z)(this,e),this._markerService=t,this._configService=n,this._provider=new k.S}return(0,s.Z)(e,[{key:"getMarkerList",value:function(e){var t,n=(0,p.Z)(this._provider);try{for(n.s();!(t=n.n()).done;){var i=t.value.getMarkerList(e);if(i)return i}}catch(r){n.e(r)}finally{n.f()}return new Z(e,this._markerService,this._configService)}}]),e}();N=S([D(0,M.lT),D(1,C.Ui)],N),(0,w.z)(R,N,!0);var I=n(87697),E=n(23911),L=n(49525),T=n(18191),O=n(97326),F=n(11752),A=n(61120),W=n(53210),B=n(48301),K=n(17424),G=n(66570),H=n(34408),U=n(99892),V=n(42306),j=n(27518),Q=n(74990),q=n(37054),X=n(6574),J=n(3553),z=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},$=function(e,t){return function(n,i){t(n,i,e)}},Y=function(){function e(t,n,i,r,s){var a=this;(0,o.Z)(this,e),this._openerService=r,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new l.SL,this._editor=n;var u=document.createElement("div");u.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),u.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),u.appendChild(this._relatedBlock),this._disposables.add(W.addStandardDisposableListener(this._relatedBlock,"click",(function(e){e.preventDefault();var t=a._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new B.NB(u,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((function(e){u.style.left="-".concat(e.scrollLeft,"px"),u.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,l.B9)(this._disposables)}},{key:"update",value:function(e){var t=this,n=e.source,i=e.message,r=e.relatedInformation,o=e.code,s=((null===n||void 0===n?void 0:n.length)||0)+"()".length;o&&(s+="string"===typeof o?o.length:o.value.length);var a=(0,y.uq)(i);this._lines=a.length,this._longestLineLength=0;var u,c=(0,p.Z)(a);try{for(c.s();!(u=c.n()).done;){var l=u.value;this._longestLineLength=Math.max(l.length+s,this._longestLineLength)}}catch(N){c.e(N)}finally{c.f()}W.clearNode(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);var d,h=this._messageBlock,f=(0,p.Z)(a);try{for(f.s();!(d=f.n()).done;){var g=d.value;(h=document.createElement("div")).innerText=g,""===g&&(h.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(h)}}catch(N){f.e(N)}finally{f.f()}if(n||o){var v=document.createElement("span");if(v.classList.add("details"),h.appendChild(v),n){var _=document.createElement("span");_.innerText=n,_.classList.add("source"),v.appendChild(_)}if(o)if("string"===typeof o){var k=document.createElement("span");k.innerText="(".concat(o,")"),k.classList.add("code"),v.appendChild(k)}else{this._codeLink=W.$("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=function(e){t._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()},W.append(this._codeLink,W.$("span")).innerText=o.value,v.appendChild(this._codeLink)}}if(W.clearNode(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,m.Of)(r)){var b=this._relatedBlock.appendChild(document.createElement("div"));b.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(59)),"px"),this._lines+=1;var w,x=(0,p.Z)(r);try{for(x.s();!(w=x.n()).done;){var M=w.value,C=document.createElement("div"),S=document.createElement("a");S.classList.add("filename"),S.innerText="".concat((0,G.p)(M.resource),"(").concat(M.startLineNumber,", ").concat(M.startColumn,"): "),S.title=this._labelService.getUriLabel(M.resource),this._relatedDiagnostics.set(S,M);var D=document.createElement("span");D.innerText=M.message,C.appendChild(S),C.appendChild(D),this._lines+=1,b.appendChild(C)}}catch(N){x.e(N)}finally{x.f()}}var P=this._editor.getOption(44),Z=Math.ceil(P.typicalFullwidthCharacterWidth*this._longestLineLength*.75),R=P.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:Z,scrollHeight:R})}},{key:"layout",value:function(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}},{key:"getHeightInLines",value:function(){return Math.min(17,this._lines)}},{key:"getAriaLabel",value:function(e){var t="";switch(e.severity){case M.ZL.Error:t=I.N("Error","Error");break;case M.ZL.Warning:t=I.N("Warning","Warning");break;case M.ZL.Info:t=I.N("Info","Info");break;case M.ZL.Hint:t=I.N("Hint","Hint")}var n=I.N("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),i=this._editor.getModel();if(i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1){var r=i.getLineContent(e.startLineNumber);n="".concat(r,", ").concat(n)}return n}}]),e}(),ee=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r,s,a,u,c){var d;return(0,o.Z)(this,n),(d=t.call(this,e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},a))._themeService=i,d._openerService=r,d._menuService=s,d._contextKeyService=u,d._labelService=c,d._callOnDispose=new l.SL,d._onDidSelectRelatedInformation=new _.Q5,d.onDidSelectRelatedInformation=d._onDidSelectRelatedInformation.event,d._severity=M.ZL.Warning,d._backgroundColor=K.Il.white,d._applyTheme(i.getColorTheme()),d._callOnDispose.add(i.onDidColorThemeChange(d._applyTheme.bind((0,O.Z)(d)))),d.create(),d}return(0,s.Z)(n,[{key:"_applyTheme",value:function(e){this._backgroundColor=e.getColor(le);var t=re,n=oe;this._severity===M.ZL.Warning?(t=se,n=ae):this._severity===M.ZL.Info&&(t=ue,n=ce);var i=e.getColor(t),r=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:r,primaryHeadingColor:e.getColor(U.IH),secondaryHeadingColor:e.getColor(U.R7)})}},{key:"_applyStyles",value:function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),(0,F.Z)((0,A.Z)(n.prototype),"_applyStyles",this).call(this)}},{key:"dispose",value:function(){this._callOnDispose.dispose(),(0,F.Z)((0,A.Z)(n.prototype),"dispose",this).call(this)}},{key:"_fillHead",value:function(e){var t=this;(0,F.Z)((0,A.Z)(n.prototype),"_fillHead",this).call(this,e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((function(e){return t.editor.focus()})));var i=[],r=this._menuService.createMenu(n.TitleMenu,this._contextKeyService);(0,V.vr)(r,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),r.dispose()}},{key:"_fillTitleIcon",value:function(e){this._icon=W.append(e,W.$(""))}},{key:"_fillBody",value:function(e){var t=this;this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Y(this._container,this.editor,(function(e){return t._onDidSelectRelatedInformation.fire(e)}),this._openerService,this._labelService),this._disposables.add(this._message)}},{key:"show",value:function(){throw new Error("call showAtMarker")}},{key:"showAtMarker",value:function(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());var r=g.e.lift(e),o=this.editor.getPosition(),s=o&&r.containsPosition(o)?o:r.getStartPosition();(0,F.Z)((0,A.Z)(n.prototype),"show",this).call(this,s,this.computeRequiredHeight());var a=this.editor.getModel();if(a){var u=i>1?I.N("problems","{0} of {1} problems",t,i):I.N("change","{0} of {1} problem",t,i);this.setTitle((0,H.EZ)(a.uri),u)}this._icon.className="codicon ".concat(q.j.className(M.ZL.toSeverity(this._severity))),this.editor.revealPositionNearTop(s,0),this.editor.focus()}},{key:"updateMarker",value:function(e){this._container.classList.remove("stale"),this._message.update(e)}},{key:"showStale",value:function(){this._container.classList.add("stale"),this._relayout()}},{key:"_doLayoutBody",value:function(e,t){(0,F.Z)((0,A.Z)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height="".concat(e,"px")}},{key:"_onWidth",value:function(e){this._message.layout(this._heightInPixel,e)}},{key:"_relayout",value:function(){(0,F.Z)((0,A.Z)(n.prototype),"_relayout",this).call(this,this.computeRequiredHeight())}},{key:"computeRequiredHeight",value:function(){return 3+this._message.getHeightInLines()}}]),n}(U.vk);ee.TitleMenu=new E.eH("gotoErrorTitleMenu"),ee=z([$(1,J.XE),$(2,Q.v4),$(3,E.co),$(4,x.TG),$(5,L.i6),$(6,j.e)],ee);var te=(0,X.kwl)(X.lXJ,X.b6y),ne=(0,X.kwl)(X.uoC,X.pW3),ie=(0,X.kwl)(X.c63,X.T83),re=(0,X.P6G)("editorMarkerNavigationError.background",{dark:te,light:te,hc:X.lRK},I.N("editorMarkerNavigationError","Editor marker navigation widget error color.")),oe=(0,X.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,X.ZnX)(re,.1),light:(0,X.ZnX)(re,.1),hc:null},I.N("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),se=(0,X.P6G)("editorMarkerNavigationWarning.background",{dark:ne,light:ne,hc:X.lRK},I.N("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),ae=(0,X.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,X.ZnX)(se,.1),light:(0,X.ZnX)(se,.1),hc:"#0C141F"},I.N("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ue=(0,X.P6G)("editorMarkerNavigationInfo.background",{dark:ie,light:ie,hc:X.lRK},I.N("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),ce=(0,X.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,X.ZnX)(ue,.1),light:(0,X.ZnX)(ue,.1),hc:null},I.N("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),le=(0,X.P6G)("editorMarkerNavigation.background",{dark:X.cvW,light:X.cvW,hc:X.cvW},I.N("editorMarkerNavigationBackground","Editor marker navigation widget background.")),de=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},he=function(e,t){return function(n,i){t(n,i,e)}},fe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},ge=function(){function e(t,n,i,r,s){(0,o.Z)(this,e),this._markerNavigationService=n,this._contextKeyService=i,this._editorService=r,this._instantiationService=s,this._sessionDispoables=new l.SL,this._editor=t,this._widgetVisible=ye.bindTo(this._contextKeyService)}return(0,s.Z)(e,[{key:"dispose",value:function(){this._cleanUp(),this._sessionDispoables.dispose()}},{key:"_cleanUp",value:function(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}},{key:"_getOrCreateModel",value:function(e){var t=this;if(this._model&&this._model.matches(e))return this._model;var n=!1;return this._model&&(n=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),n&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(ee,this._editor),this._widget.onDidClose((function(){return t.close()}),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((function(e){var n,i,r;(null===(n=t._model)||void 0===n?void 0:n.selected)&&g.e.containsPosition(null===(i=t._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(r=t._model)||void 0===r||r.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((function(){if(t._widget&&t._widget.position&&t._model){var e=t._model.find(t._editor.getModel().uri,t._widget.position);e?t._widget.updateMarker(e.marker):t._widget.showStale()}}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((function(e){t._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:g.e.lift(e).collapseToStart()}},t._editor),t.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((function(){return t._cleanUp()}))),this._model}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}},{key:"showAtMarker",value:function(e){if(this._editor.hasModel()){var t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new f.L(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}},{key:"nagivate",value:function(t,n){var i,r;return fe(this,void 0,void 0,u().mark((function o(){var s,a;return u().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._editor.hasModel()){o.next=14;break}if((s=this._getOrCreateModel(n?void 0:this._editor.getModel().uri)).move(t,this._editor.getModel(),this._editor.getPosition()),s.selected){o.next=5;break}return o.abrupt("return");case 5:if(s.selected.marker.resource.toString()===this._editor.getModel().uri.toString()){o.next=13;break}return this._cleanUp(),o.next=9,this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);case 9:(a=o.sent)&&(null===(i=e.get(a))||void 0===i||i.close(),null===(r=e.get(a))||void 0===r||r.nagivate(t,n)),o.next=14;break;case 13:this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total);case 14:case"end":return o.stop()}}),o,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();ge.ID="editor.contrib.markerController",ge=de([he(1,R),he(2,L.i6),he(3,h.$),he(4,x.TG)],ge);var ve=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r){var s;return(0,o.Z)(this,n),(s=t.call(this,r))._next=e,s._multiFile=i,s}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return fe(this,void 0,void 0,u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hasModel()&&(null===(n=ge.get(t))||void 0===n||n.nagivate(this._next,this._multiFile));case 1:case"end":return e.stop()}}),e,this)})))}}]),n}(d.R6),pe=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!0,!1,{id:n.ID,label:n.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:v.u.focus,primary:578,weight:100},menuOpts:{menuId:ee.TitleMenu,title:n.LABEL,icon:(0,T.q5)("marker-navigation-next",c.lA.arrowDown,I.N("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}return(0,s.Z)(n)}(ve);pe.ID="editor.action.marker.next",pe.LABEL=I.N("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var me=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!1,!1,{id:n.ID,label:n.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:v.u.focus,primary:1602,weight:100},menuOpts:{menuId:ee.TitleMenu,title:n.LABEL,icon:(0,T.q5)("marker-navigation-previous",c.lA.arrowUp,I.N("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}return(0,s.Z)(n)}(ve);me.ID="editor.action.marker.prev",me.LABEL=I.N("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var _e=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:I.N("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:v.u.focus,primary:66,weight:100},menuOpts:{menuId:E.eH.MenubarGoMenu,title:I.N({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}return(0,s.Z)(n)}(ve),ke=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:I.N("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:v.u.focus,primary:1090,weight:100},menuOpts:{menuId:E.eH.MenubarGoMenu,title:I.N({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}return(0,s.Z)(n)}(ve);(0,d._K)(ge.ID,ge),(0,d.Qr)(pe),(0,d.Qr)(me),(0,d.Qr)(_e),(0,d.Qr)(ke);var ye=new L.uy("markersNavigationVisible",!1),be=d._l.bindToContribution(ge.get);(0,d.fK)(new be({id:"closeMarkersNavigation",precondition:ye,handler:function(e){return e.close()},kbOpts:{weight:150,kbExpr:v.u.focus,primary:9,secondary:[1033]}}))},55584:function(e,t,n){n.r(t),n.d(t,{DefinitionAction:function(){return he},SymbolNavigationAction:function(){return de},SymbolNavigationAnchor:function(){return le}});var i=n(11752),r=n(61120),o=n(60136),s=n(43668),a=n(15671),u=n(43144),c=n(87757),l=n.n(c),d=n(12426),h=n(58340),f=n(32590),g=n(27924),v=n(4827),p=n(64272),m=n(50605),_=n(50004),k=n(21872),y=n(98351),b=n(56692),w=n(77087),x=n(10849),M=n(30788),C=n(44474),S=n(56417),D=n(57317),P=n(62302),Z=n(37762),R=n(28941),N=n(10526),I=n(34408),E=n(87697),L=n(49525),T=n(11280),O=n(8850),F=n(45753),A=n(90031),W=n(13023),B=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},K=function(e,t){return function(n,i){t(n,i,e)}},G=new L.uy("hasSymbols",!1,(0,E.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),H=(0,O.yh)("ISymbolNavigationService"),U=function(){function e(t,n,i,r){(0,a.Z)(this,e),this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=G.bindTo(t)}return(0,u.Z)(e,[{key:"reset",value:function(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}},{key:"put",value:function(e){var t=this,n=e.parent.parent;if(n.references.length<=1)this.reset();else{this._currentModel=n,this._currentIdx=n.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new V(this._editorService),r=i.onDidChange((function(e){if(!t._ignoreEditorChange){var i=t._editorService.getActiveCodeEditor();if(i){var r=i.getModel(),o=i.getPosition();if(r&&o){var s,a=!1,u=!1,c=(0,Z.Z)(n.references);try{for(c.s();!(s=c.n()).done;){var l=s.value;if((0,I.Xy)(l.uri,r.uri))a=!0,u=u||M.e.containsPosition(l.range,o);else if(a)break}}catch(d){c.e(d)}finally{c.f()}a&&u||t.reset()}}}}));this._currentState=(0,N.F8)(i,r)}}},{key:"revealNext",value:function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var n=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:n.uri,options:{selection:M.e.collapseToStart(n.range),selectionRevealType:3}},e).finally((function(){t._ignoreEditorChange=!1}))}},{key:"_showMessage",value:function(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();var t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?(0,E.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,E.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}}]),e}();U=B([K(0,L.i6),K(1,b.$),K(2,W.lT),K(3,F.d)],U),(0,T.z)(H,U,!0),(0,y.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:G,kbOpts:{weight:100,primary:70}})}return(0,u.Z)(n,[{key:"runEditorCommand",value:function(e,t){return e.get(H).revealNext(t)}}]),n}(y._l))),A.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:G,primary:9,handler:function(e){e.get(H).reset()}});var V=function(){function e(t){(0,a.Z)(this,e),this._listener=new Map,this._disposables=new N.SL,this._onDidChange=new R.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}return(0,u.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose(),(0,N.B9)(this._listener.values())}},{key:"_onDidAddEditor",value:function(e){var t=this;this._listener.set(e,(0,N.F8)(e.onDidChangeCursorPosition((function(n){return t._onDidChange.fire({editor:e})})),e.onDidChangeModelContent((function(n){return t._onDidChange.fire({editor:e})}))))}},{key:"_onDidRemoveEditor",value:function(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}}]),e}();V=B([K(0,b.$)],V);var j,Q,q,X,J,z,$,Y,ee=n(94719),te=n(99892),ne=n(23911),ie=n(89850),re=n(26562),oe=n(66900),se=n(45161),ae=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};ne.BH.appendMenuItem(ne.eH.EditorContext,{submenu:ne.eH.EditorContextPeek,title:E.N("peek.submenu","Peek"),group:"navigation",order:100});var ue=new Set;function ce(e){var t=new e;return(0,y.QG)(t),ue.add(t.id),t}var le=function(){function e(t,n){(0,a.Z)(this,e),this.model=t,this.position=n}return(0,u.Z)(e,null,[{key:"is",value:function(t){return!(!t||"object"!==typeof t)&&(t instanceof e||!(!x.L.isIPosition(t.position)||!t.model))}}]),e}(),de=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var r;return(0,a.Z)(this,n),(r=t.call(this,i)).configuration=e,r}return(0,u.Z)(n,[{key:"run",value:function(e,t,n){var i=this;if(!t.hasModel())return Promise.resolve(void 0);var r=e.get(W.lT),o=e.get(b.$),s=e.get(re.ek),a=e.get(H),u=e.get(se.p),c=t.getModel(),d=t.getPosition(),g=le.is(n)?n:new le(c,d),v=new _.Dl(t,5),p=(0,f.eP)(this._getLocationModel(u,g.model,g.position,v.token),v.token).then((function(e){return ae(i,void 0,void 0,l().mark((function n(){var i,r,s,u,f;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!v.token.isCancellationRequested){n.next=2;break}return n.abrupt("return");case 2:if((0,h.Z9)(e.ariaMessage),e.referenceAt(c.uri,d)&&(s=this._getAlternativeCommand(t))!==this.id&&ue.has(s)&&(r=t.getAction(s)),0!==(u=e.references.length)){n.next=9;break}this.configuration.muteMessage||(f=c.getWordAtPosition(d),null===(i=ee.O.get(t))||void 0===i||i.showMessage(this._getNoResultFoundMessage(f),d)),n.next=14;break;case 9:if(1!==u||!r){n.next=13;break}r.run(),n.next=14;break;case 13:return n.abrupt("return",this._onResult(o,a,t,e));case 14:case"end":return n.stop()}}),n,this)})))}),(function(e){r.error(e)})).finally((function(){v.dispose()}));return s.showWhile(p,250),p}},{key:"_onResult",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){var o,s,a,u;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this._getGoToPreference(n),n instanceof w.H||!(this.configuration.openInPeek||"peek"===o&&i.references.length>1)){r.next=5;break}this._openInPeek(n,i),r.next=12;break;case 5:return s=i.firstReference(),a=i.references.length>1&&"gotoAndPeek"===o,r.next=9,this._openReference(n,e,s,this.configuration.openToSide,!a);case 9:u=r.sent,a&&u?this._openInPeek(u,i):i.dispose(),"goto"===o&&t.put(s);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"_openReference",value:function(e,t,n,i,r){return ae(this,void 0,void 0,l().mark((function o(){var s,a,u,c;return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=void 0,(0,S.vx)(n)&&(s=n.targetSelectionRange),s||(s=n.range),s){o.next=5;break}return o.abrupt("return",void 0);case 5:return o.next=7,t.openCodeEditor({resource:n.uri,options:{selection:M.e.collapseToStart(s),selectionRevealType:3,selectionSource:"code.jump"}},e,i);case 7:if(a=o.sent){o.next=10;break}return o.abrupt("return",void 0);case 10:return r&&(u=a.getModel(),c=a.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]),setTimeout((function(){a.getModel()===u&&a.deltaDecorations(c,[])}),350)),o.abrupt("return",a);case 12:case"end":return o.stop()}}),o)})))}},{key:"_openInPeek",value:function(e,t){var n=D.J.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),(0,f.PG)((function(e){return Promise.resolve(t)})),this.configuration.openInPeek):t.dispose()}}]),n}(y.R6),he=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.nD)(e.definitionProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=E.N("def.title","Definitions"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?E.N("noResultWord","No definition found for '{0}'",e.word):E.N("generic.noResults","No definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleDefinitions}}]),n}(de),fe=v.$L&&!d.isStandalone?2118:70;ce(((j=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:E.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:L.Ao.and(C.u.hasDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:fe,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),ie.P0.registerCommandAlias("editor.action.goToDeclaration",n.id),e}return(0,u.Z)(n)}(he)).id="editor.action.revealDefinition",j)),ce(((Q=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.call(this,{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:n.id,label:E.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:L.Ao.and(C.u.hasDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,g.gx)(2089,fe),weight:100}}),ie.P0.registerCommandAlias("editor.action.openDeclarationToTheSide",n.id),e}return(0,u.Z)(n)}(he)).id="editor.action.revealDefinitionAside",Q)),ce(((q=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.id,label:E.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:L.Ao.and(C.u.hasDefinitionProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:2}}),ie.P0.registerCommandAlias("editor.action.previewDeclaration",n.id),e}return(0,u.Z)(n)}(he)).id="editor.action.peekDefinition",q));var ge=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.zq)(e.declarationProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=E.N("decl.title","Declarations"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?E.N("decl.noResultWord","No declaration found for '{0}'",e.word):E.N("decl.generic.noResults","No declaration found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeDeclarationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleDeclarations}}]),n}(de);ce(((X=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:E.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:L.Ao.and(C.u.hasDeclarationProvider,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?E.N("decl.noResultWord","No declaration found for '{0}'",e.word):E.N("decl.generic.noResults","No declaration found")}}]),n}(ge)).id="editor.action.revealDeclaration",X)),ce(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:E.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:L.Ao.and(C.u.hasDeclarationProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:3}})}return(0,u.Z)(n)}(ge));var ve=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.L3)(e.typeDefinitionProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=E.N("typedef.title","Type Definitions"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?E.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):E.N("goToTypeDefinition.generic.noResults","No type definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeTypeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleTypeDefinitions}}]),n}(de);ce(((J=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:E.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:L.Ao.and(C.u.hasTypeDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}return(0,u.Z)(n)}(ve)).ID="editor.action.goToTypeDefinition",J)),ce(((z=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:E.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:L.Ao.and(C.u.hasTypeDefinitionProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:4}})}return(0,u.Z)(n)}(ve)).ID="editor.action.peekTypeDefinition",z));var pe=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.f4)(e.implementationProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=E.N("impl.title","Implementations"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?E.N("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):E.N("goToImplementation.generic.noResults","No implementation found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeImplementationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleImplementations}}]),n}(de);ce((($=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:E.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:L.Ao.and(C.u.hasImplementationProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return(0,u.Z)(n)}(pe)).ID="editor.action.goToImplementation",$)),ce(((Y=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:E.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:L.Ao.and(C.u.hasImplementationProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:5}})}return(0,u.Z)(n)}(pe)).ID="editor.action.peekImplementation",Y));var me=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e?E.N("references.no","No references found for '{0}'",e.word):E.N("references.noGeneric","No references found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeReferenceCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleReferences}}]),n}(de);ce(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:E.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:L.Ao.and(C.u.hasReferenceProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.aA)(e.referenceProvider,t,n,!0,i);case 3:return r.t1=r.sent,r.t2=E.N("ref.title","References"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}}]),n}(me)),ce(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:E.N("references.action.label","Peek References"),alias:"Peek References",precondition:L.Ao.and(C.u.hasReferenceProvider,te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:6}})}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.aA)(e.referenceProvider,t,n,!1,i);case 3:return r.t1=r.sent,r.t2=E.N("ref.title","References"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}}]),n}(me));var _e=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,r){var o;return(0,a.Z)(this,n),(o=t.call(this,e,{id:"editor.action.goToLocation",label:E.N("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:L.Ao.and(te.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated())}))._references=i,o._gotoMultipleBehaviour=r,o}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ae(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new P.oQ(this._references,E.N("generic.title","Locations")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&E.N("generic.noResult","No results for '{0}'",e.word)||""}},{key:"_getGoToPreference",value:function(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(51).multipleReferences}},{key:"_getAlternativeCommand",value:function(){return""}}]),n}(de);ie.P0.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:m.o},{name:"position",description:"The position at which to start",constraint:x.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(e,t,n,c,d,h,f){return ae(void 0,void 0,void 0,l().mark((function g(){var v,_;return l().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return(0,p.p_)(m.o.isUri(t)),(0,p.p_)(x.L.isIPosition(n)),(0,p.p_)(Array.isArray(c)),(0,p.p_)("undefined"===typeof d||"string"===typeof d),(0,p.p_)("undefined"===typeof f||"boolean"===typeof f),v=e.get(b.$),l.next=8,v.openCodeEditor({resource:t},v.getFocusedCodeEditor());case 8:if(_=l.sent,!(0,k.CL)(_)){l.next=13;break}return _.setPosition(n),_.revealPositionInCenterIfOutsideViewport(n,0),l.abrupt("return",_.invokeWithinContext((function(e){var t=new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return h||(0,i.Z)((0,r.Z)(n.prototype),"_getNoResultFoundMessage",this).call(this,e)}}]),n}(_e))({muteMessage:!Boolean(h),openInPeek:Boolean(f),openToSide:!1},c,d);e.get(O.TG).invokeFunction(t.run.bind(t),_)})));case 13:case"end":return l.stop()}}),g)})))}}),ie.P0.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:m.o},{name:"position",description:"The position at which to start",constraint:x.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:function(e,t,n,i,r){return ae(void 0,void 0,void 0,l().mark((function o(){return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.get(ie.Hy).executeCommand("editor.action.goToLocations",t,n,i,r,void 0,!0);case 1:case"end":return o.stop()}}),o)})))}}),ie.P0.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){(0,p.p_)(m.o.isUri(t)),(0,p.p_)(x.L.isIPosition(n));var i=e.get(se.p),r=e.get(b.$);return r.openCodeEditor({resource:t},r.getFocusedCodeEditor()).then((function(e){if((0,k.CL)(e)&&e.hasModel()){var t=D.J.get(e);if(t){var r=(0,f.PG)((function(t){return(0,oe.aA)(i.referenceProvider,e.getModel(),x.L.lift(n),!1,t).then((function(e){return new P.oQ(e,E.N("ref.title","References"))}))})),o=new M.e(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(o,r,!1))}}}))}}),ie.P0.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),ne.BH.appendMenuItems([{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:E.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:E.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:E.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:E.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:E.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},66900:function(e,t,n){n.d(t,{L3:function(){return m},aA:function(){return _},f4:function(){return p},nD:function(){return g},zq:function(){return v}});var i=n(93433),r=n(37762),o=n(87757),s=n.n(o),a=n(32124),u=n(68552),c=n(98351),l=n(62302),d=n(45161),h=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))};function f(e,t,n,o){var s=n.ordered(e).map((function(n){return Promise.resolve(o(n,e,t)).then(void 0,(function(e){(0,u.Cp)(e)}))}));return Promise.all(s).then((function(e){var t,n=[],o=(0,r.Z)(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;Array.isArray(s)?n.push.apply(n,(0,i.Z)(s)):s&&n.push(s)}}catch(a){o.e(a)}finally{o.f()}return n}))}function g(e,t,n,i){return f(t,n,e,(function(e,t,n){return e.provideDefinition(t,n,i)}))}function v(e,t,n,i){return f(t,n,e,(function(e,t,n){return e.provideDeclaration(t,n,i)}))}function p(e,t,n,i){return f(t,n,e,(function(e,t,n){return e.provideImplementation(t,n,i)}))}function m(e,t,n,i){return f(t,n,e,(function(e,t,n){return e.provideTypeDefinition(t,n,i)}))}function _(e,t,n,i,r){var o=this;return f(t,n,e,(function(e,t,n){return h(o,void 0,void 0,s().mark((function o(){var a,u;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.provideReferences(t,n,{includeDeclaration:!0},r);case 2:if(a=o.sent,i&&a&&2===a.length){o.next=5;break}return o.abrupt("return",a);case 5:return o.next=7,e.provideReferences(t,n,{includeDeclaration:!1},r);case 7:if(!(u=o.sent)||1!==u.length){o.next=10;break}return o.abrupt("return",u);case 10:return o.abrupt("return",a);case 11:case"end":return o.stop()}}),o)})))}))}function k(e){return h(this,void 0,void 0,s().mark((function t(){var n,i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,i=new l.oQ(n,""),r=i.references.map((function(e){return e.link})),i.dispose(),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))}(0,c.sb)("_executeDefinitionProvider",(function(e,t,n){var i=g(e.get(d.p).definitionProvider,t,n,a.T.None);return k((function(){return i}))})),(0,c.sb)("_executeTypeDefinitionProvider",(function(e,t,n){var i=m(e.get(d.p).typeDefinitionProvider,t,n,a.T.None);return k((function(){return i}))})),(0,c.sb)("_executeDeclarationProvider",(function(e,t,n){var i=v(e.get(d.p).declarationProvider,t,n,a.T.None);return k((function(){return i}))})),(0,c.sb)("_executeReferenceProvider",(function(e,t,n){var i=_(e.get(d.p).referenceProvider,t,n,!1,a.T.None);return k((function(){return i}))})),(0,c.sb)("_executeImplementationProvider",(function(e,t,n){var i=p(e.get(d.p).implementationProvider,t,n,a.T.None);return k((function(){return i}))}))},61826:function(e,t,n){n.d(t,{yN:function(){return v}});var i=n(60136),r=n(43668),o=n(43144),s=n(15671),a=n(28941),u=n(10526),c=n(4827);function l(e,t){return!!e[t]}var d=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.target=t.target,this.hasTriggerModifier=l(t.event,n.triggerModifier),this.hasSideBySideModifier=l(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1})),h=(0,o.Z)((function e(t,n){(0,s.Z)(this,e),this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=l(t,n.triggerModifier)})),f=function(){function e(t,n,i,r){(0,s.Z)(this,e),this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}]),e}();function g(e){return"altKey"===e?c.dz?new f(57,"metaKey",6,"altKey"):new f(5,"ctrlKey",6,"altKey"):c.dz?new f(6,"altKey",57,"metaKey"):new f(6,"altKey",5,"ctrlKey")}var v=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this))._onMouseMoveOrRelevantKeyDown=i._register(new a.Q5),i.onMouseMoveOrRelevantKeyDown=i._onMouseMoveOrRelevantKeyDown.event,i._onExecute=i._register(new a.Q5),i.onExecute=i._onExecute.event,i._onCancel=i._register(new a.Q5),i.onCancel=i._onCancel.event,i._editor=e,i._opts=g(i._editor.getOption(70)),i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._register(i._editor.onDidChangeConfiguration((function(e){if(e.hasChanged(70)){var t=g(i._editor.getOption(70));if(i._opts.equals(t))return;i._opts=t,i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._onCancel.fire()}}))),i._register(i._editor.onMouseMove((function(e){return i._onEditorMouseMove(new d(e,i._opts))}))),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(new d(e,i._opts))}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(new d(e,i._opts))}))),i._register(i._editor.onKeyDown((function(e){return i._onEditorKeyDown(new h(e,i._opts))}))),i._register(i._editor.onKeyUp((function(e){return i._onEditorKeyUp(new h(e,i._opts))}))),i._register(i._editor.onMouseDrag((function(){return i._resetHandler()}))),i._register(i._editor.onDidChangeCursorSelection((function(e){return i._onDidChangeCursorSelection(e)}))),i._register(i._editor.onDidChangeModel((function(e){return i._resetHandler()}))),i._register(i._editor.onDidChangeModelContent((function(){return i._resetHandler()}))),i._register(i._editor.onDidScrollChange((function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&i._resetHandler()}))),i}return(0,o.Z)(n,[{key:"_onDidChangeCursorSelection",value:function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}},{key:"_onEditorMouseMove",value:function(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}},{key:"_onEditorMouseDown",value:function(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}},{key:"_onEditorMouseUp",value:function(e){var t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}},{key:"_onEditorKeyDown",value:function(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}},{key:"_onEditorKeyUp",value:function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}},{key:"_resetHandler",value:function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}]),n}(u.JT)},24034:function(e,t,n){n.r(t),n.d(t,{GotoDefinitionAtPositionEditorContribution:function(){return P}});var i=n(29439),r=n(15671),o=n(43144),s=n(32590),a=n(68552),u=n(67277),c=n(10526),l=n(64272),d=n(50004),h=n(98351),f=n(10849),g=n(30788),v=n(63024),p=n(26777),m=n(61826),_=n(99892),k=n(87697),y=n(49525),b=n(6574),w=n(3553),x=n(55584),M=n(66900),C=n(45161),S=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},D=function(e,t){return function(n,i){t(n,i,e)}},P=function(){function e(t,n,o,s){var u=this;(0,r.Z)(this,e),this.textModelResolverService=n,this.languageService=o,this.languageFeaturesService=s,this.toUnhook=new c.SL,this.toUnhookForKeyboard=new c.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t;var d=new m.yN(t);this.toUnhook.add(d),this.toUnhook.add(d.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];u.startFindDefinitionFromMouse(n,(0,l.f6)(r))}))),this.toUnhook.add(d.onExecute((function(e){u.isEnabled(e)&&u.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((function(){u.removeLinkDecorations()}),(function(e){u.removeLinkDecorations(),(0,a.dL)(e)}))}))),this.toUnhook.add(d.onCancel((function(){u.removeLinkDecorations(),u.currentWordAtPosition=null})))}return(0,o.Z)(e,[{key:"startFindDefinitionFromCursor",value:function(e){var t=this;return this.startFindDefinition(e).then((function(){t.toUnhookForKeyboard.add(t.editor.onDidChangeCursorPosition((function(){t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear()}))),t.toUnhookForKeyboard.add(t.editor.onKeyDown((function(e){e&&(t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear())})))}))}},{key:"startFindDefinitionFromMouse",value:function(e,t){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var n=e.target.position;this.startFindDefinition(n)}}},{key:"startFindDefinition",value:function(e){var t,n=this;this.toUnhookForKeyboard.clear();var i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;var r=new d.yy(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,s.PG)((function(t){return n.findDefinition(e,t)})),this.previousPromise.then((function(t){if(t&&t.length&&r.validate(n.editor))if(t.length>1)n.addDecoration(new g.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new u.W5).appendText(k.N("multipleResults","Click to show {0} definitions.",t.length)));else{var o=t[0];if(!o.uri)return;n.textModelResolverService.createModelReference(o.uri).then((function(t){if(t.object&&t.object.textEditorModel){var r=t.object.textEditorModel,s=o.range.startLineNumber;if(s<1||s>r.getLineCount())t.dispose();else{var a,c=n.getPreviewValue(r,s,o);a=o.originSelectionRange?g.e.lift(o.originSelectionRange):new g.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);var l=n.languageService.guessLanguageIdByFilepathOrFirstLine(r.uri);n.addDecoration(a,(new u.W5).appendCodeblock(l||"",c)),t.dispose()}}else t.dispose()}))}else n.removeLinkDecorations()})).then(void 0,a.dL)}},{key:"getPreviewValue",value:function(t,n,i){var r=i.targetSelectionRange?i.range:this.getPreviewRangeBasedOnBrackets(t,n);return r.endLineNumber-r.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,r)}},{key:"stripIndentationFromPreviewRange",value:function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),r=t+1;r<n.endLineNumber;r++){var o=e.getLineFirstNonWhitespaceColumn(r);i=Math.min(i,o)}return e.getValueInRange(n).replace(new RegExp("^\\s{".concat(i-1,"}"),"gm"),"").trim()}},{key:"getPreviewRangeBasedOnIndentation",value:function(t,n){for(var i=t.getLineFirstNonWhitespaceColumn(n),r=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),o=n+1;o<r;o++){if(i===t.getLineFirstNonWhitespaceColumn(o))break}return new g.e(n,1,o+1,1)}},{key:"getPreviewRangeBasedOnBrackets",value:function(t,n){for(var i=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),r=[],o=!0,s=t.bracketPairs.findNextBracket(new f.L(n,1));null!==s;){if(0===r.length)r.push(s);else{var a=r[r.length-1];if(a.open[0]===s.open[0]&&a.isOpen&&!s.isOpen?r.pop():r.push(s),0===r.length){if(!o)return new g.e(n,1,s.range.endLineNumber+1,1);o=!1}}var u=t.getLineMaxColumn(n),c=s.range.endLineNumber,l=s.range.endColumn;if(u===s.range.endColumn&&(c++,l=1),c>i)return new g.e(n,1,i+1,1);s=t.bracketPairs.findNextBracket(new f.L(c,l))}return new g.e(n,1,i+1,1)}},{key:"addDecoration",value:function(e,t){var n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}},{key:"removeLinkDecorations",value:function(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}},{key:"isEnabled",value:function(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}},{key:"findDefinition",value:function(e,t){var n=this.editor.getModel();return n?(0,M.nD)(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}},{key:"gotoDefinition",value:function(e,t){var n=this;return this.editor.setPosition(e),this.editor.invokeWithinContext((function(e){var i=!t&&n.editor.getOption(78)&&!n.isInPeekEditor(e);return new x.DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(e,n.editor)}))}},{key:"isInPeekEditor",value:function(e){var t=e.get(y.i6);return _.Jy.inPeekEditor.getValue(t)}},{key:"dispose",value:function(){this.toUnhook.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();P.ID="editor.contrib.gotodefinitionatposition",P.MAX_SOURCE_PREVIEW_LINES=8,P=S([D(1,p.S),D(2,v.O),D(3,C.p)],P),(0,h._K)(P.ID,P),(0,w.Ic)((function(e,t){var n=e.getColor(b._Yy);n&&t.addRule(".monaco-editor .goto-definition-link { color: ".concat(n," !important; }"))}))},57317:function(e,t,n){n.d(t,{J:function(){return xe}});var i=n(15671),r=n(43144),o=n(87757),s=n.n(o),a=n(32590),u=n(68552),c=n(27924),l=n(10526),d=n(56692),h=n(10849),f=n(30788),g=n(99892),v=n(87697),p=n(89850),m=n(64644),_=n(49525),k=n(8850),y=n(90031),b=n(48379),w=n(13023),x=n(63019),M=n(62302),C=n(97326),S=n(11752),D=n(61120),P=n(60136),Z=n(43668),R=n(93433),N=n(29439),I=n(37762),E=n(53210),L=n(96622),T=n(17424),O=n(28941),F=n(16496),A=n(34408),W=n(77087),B=n(27959),K=n(89125),G=n(73833),H=n(63024),U=n(26777),V=n(67944),j=n(94811),Q=n(65149),q=n(45842),X=n(66570),J=n(45753),z=n(27518),$=n(81660),Y=n(3553),ee=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},te=function(e,t){return function(n,i){t(n,i,e)}},ne=function(){function e(t){(0,i.Z)(this,e),this._resolverService=t}return(0,r.Z)(e,[{key:"hasChildren",value:function(e){return e instanceof M.oQ||e instanceof M.F2}},{key:"getChildren",value:function(e){if(e instanceof M.oQ)return e.groups;if(e instanceof M.F2)return e.resolve(this._resolverService).then((function(e){return e.children}));throw new Error("bad tree")}}]),e}();ne=ee([te(0,U.S)],ne);var ie=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getHeight",value:function(){return 23}},{key:"getTemplateId",value:function(e){return e instanceof M.F2?ae.id:ce.id}}]),e}(),re=function(){function e(t){(0,i.Z)(this,e),this._keybindingService=t}return(0,r.Z)(e,[{key:"getKeyboardNavigationLabel",value:function(e){var t;if(e instanceof M.WX){var n=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(n)return n.value}return(0,A.EZ)(e.uri)}}]),e}();re=ee([te(0,J.d)],re);var oe=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getId",value:function(e){return e instanceof M.WX?e.id:e.uri}}]),e}(),se=function(e){(0,P.Z)(n,e);var t=(0,Z.Z)(n);function n(e,r,o){var s;(0,i.Z)(this,n),(s=t.call(this))._uriLabel=r;var a=document.createElement("div");return a.classList.add("reference-file"),s.file=s._register(new Q.g(a,{supportHighlights:!0})),s.badge=new V.Z(E.append(a,E.$(".count"))),s._register((0,$.WZ)(s.badge,o)),e.appendChild(a),s}return(0,r.Z)(n,[{key:"set",value:function(e,t){var n=(0,A.XX)(e.uri);this.file.setLabel((0,X.p)(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat((0,v.N)("referencesCount","{0} references",i)):this.badge.setTitleFormat((0,v.N)("referenceCount","{0} reference",i))}}]),n}(l.JT);se=ee([te(1,z.e),te(2,Y.XE)],se);var ae=function(){function e(t){(0,i.Z)(this,e),this._instantiationService=t,this.templateId=e.id}return(0,r.Z)(e,[{key:"renderTemplate",value:function(e){return this._instantiationService.createInstance(se,e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,(0,q.mB)(e.filterData))}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}();ae.id="FileReferencesRenderer",ae=ee([te(0,k.TG)],ae);var ue=function(){function e(t){(0,i.Z)(this,e),this.label=new j.q(t)}return(0,r.Z)(e,[{key:"set",value:function(e,t){var n,i=null===(n=e.parent.getPreview(e))||void 0===n?void 0:n.preview(e.range);if(i&&i.value){var r=i.value,o=i.highlight;t&&!q.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,(0,q.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}else this.label.set("".concat((0,A.EZ)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}]),e}(),ce=function(){function e(){(0,i.Z)(this,e),this.templateId=e.id}return(0,r.Z)(e,[{key:"renderTemplate",value:function(e){return new ue(e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,e.filterData)}},{key:"disposeTemplate",value:function(){}}]),e}();ce.id="OneReferenceRenderer";var le=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getWidgetAriaLabel",value:function(){return(0,v.N)("treeAriaLabel","References")}},{key:"getAriaLabel",value:function(e){return e.ariaMessage}}]),e}(),de=n(10217),he=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},fe=function(e,t){return function(n,i){t(n,i,e)}},ge=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},ve=function(){function e(t,n){var r=this;(0,i.Z)(this,e),this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new l.SL,this._callOnModelChange=new l.SL,this._callOnDispose.add(this._editor.onDidChangeModel((function(){return r._onModelChanged()}))),this._onModelChanged()}return(0,r.Z)(e,[{key:"dispose",value:function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}},{key:"_onModelChanged",value:function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e){var t,n=(0,I.Z)(this._model.references);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.uri.toString()===e.uri.toString())return void this._addDecorations(i.parent)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"_addDecorations",value:function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return n._onDecorationChanged()})));for(var i=[],r=[],o=0,s=t.children.length;o<s;o++){var a=t.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:a.range,options:e.DecorationOptions}),r.push(o))}for(var u=this._editor.deltaDecorations([],i),c=0;c<u.length;c++)this._decorations.set(u[c],t.children[r[c]])}}},{key:"_onDecorationChanged",value:function(){var e=[],t=this._editor.getModel();if(t){var n,i=(0,I.Z)(this._decorations);try{for(i.s();!(n=i.n()).done;){var r=(0,N.Z)(n.value,2),o=r[0],s=r[1],a=t.getDecorationRange(o);if(a){var u=!1;if(!f.e.equalsRange(a,s.range)){if(f.e.spansMultipleLines(a))u=!0;else s.range.endColumn-s.range.startColumn!==a.endColumn-a.startColumn&&(u=!0);u?(this._decorationIgnoreSet.add(s.id),e.push(o)):s.range=a}}}}catch(d){i.e(d)}finally{i.f()}for(var c=0,l=e.length;c<l;c++)this._decorations.delete(e[c]);this._editor.deltaDecorations(e,[])}}},{key:"removeDecorations",value:function(){this._editor.deltaDecorations((0,R.Z)(this._decorations.keys()),[]),this._decorations.clear()}}]),e}();ve.DecorationOptions=B.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var pe=function(){function e(){(0,i.Z)(this,e),this.ratio=.7,this.heightInLines=18}return(0,r.Z)(e,null,[{key:"fromJSON",value:function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(r){}return{ratio:t||.7,heightInLines:n||18}}}]),e}(),me=function(e){(0,P.Z)(n,e);var t=(0,Z.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(b.ls),_e=function(e){(0,P.Z)(n,e);var t=(0,Z.Z)(n);function n(e,r,o,s,a,u,c,d,h,f,g,v){var p;return(0,i.Z)(this,n),(p=t.call(this,e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},u))._defaultTreeKeyboardSupport=r,p.layoutData=o,p._textModelResolverService=a,p._instantiationService=u,p._peekViewService=c,p._uriLabel=d,p._undoRedoService=h,p._keybindingService=f,p._languageService=g,p._languageConfigurationService=v,p._disposeOnNewModel=new l.SL,p._callOnDispose=new l.SL,p._onDidSelectReference=new O.Q5,p.onDidSelectReference=p._onDidSelectReference.event,p._dim=new E.Dimension(0,0),p._applyTheme(s.getColorTheme()),p._callOnDispose.add(s.onDidColorThemeChange(p._applyTheme.bind((0,C.Z)(p)))),p._peekViewService.addExclusiveWidget(e,(0,C.Z)(p)),p.create(),p}return(0,r.Z)(n,[{key:"dispose",value:function(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,l.B9)(this._preview),(0,l.B9)(this._previewNotAvailableMessage),(0,l.B9)(this._tree),(0,l.B9)(this._previewModelReference),this._splitView.dispose(),(0,S.Z)((0,D.Z)(n.prototype),"dispose",this).call(this)}},{key:"_applyTheme",value:function(e){var t=e.getColor(g.SC)||T.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(g.KY)||T.Il.transparent,primaryHeadingColor:e.getColor(g.IH),secondaryHeadingColor:e.getColor(g.R7)})}},{key:"show",value:function(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),(0,S.Z)((0,D.Z)(n.prototype),"show",this).call(this,e,this.layoutData.heightInLines||18)}},{key:"focusOnReferenceTree",value:function(){this._tree.domFocus()}},{key:"focusOnPreviewEditor",value:function(){this._preview.focus()}},{key:"isPreviewEditorFocused",value:function(){return this._preview.hasTextFocus()}},{key:"_onTitleClick",value:function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}},{key:"_fillBody",value:function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=E.append(e,E.$("div.messages")),E.hide(this._messageContainer),this._splitView=new L.z(e,{orientation:1}),this._previewContainer=E.append(e,E.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(W.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),E.hide(this._previewContainer),this._previewNotAvailableMessage=new B.yO(v.N("missingPreviewMessage","no preview available"),G.bd,B.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=E.append(e,E.$("div.ref-tree.inline"));var n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new le,keyboardNavigationLabelProvider:this._instantiationService.createInstance(re),identityProvider:new oe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:g.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(E.addStandardDisposableListener(this._treeContainer,"keydown",(function(e){e.equals(9)&&(t._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(me,"ReferencesWidget",this._treeContainer,new ie,[this._instantiationService.createInstance(ae),this._instantiationService.createInstance(ce)],this._instantiationService.createInstance(ne),n),this._splitView.addView({onDidChange:O.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},L.M.Distribute),this._splitView.addView({onDidChange:O.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height="".concat(t._dim.height,"px"),t._treeContainer.style.width="".concat(e,"px"),t._tree.layout(t._dim.height,e)}},L.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)}),void 0));var i=function(e,n){e instanceof M.WX&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._tree.onDidOpen((function(e){e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),E.hide(this._treeContainer)}},{key:"_onWidth",value:function(e){this._dim&&this._doLayoutBody(this._dim.height,e)}},{key:"_doLayoutBody",value:function(e,t){(0,S.Z)((0,D.Z)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._dim=new E.Dimension(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}},{key:"setSelection",value:function(e){var t=this;return this._revealReference(e,!0).then((function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))}))}},{key:"setModel",value:function(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}},{key:"_onNewModel",value:function(){var e=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v.N("noResults","No results"),E.show(this._messageContainer),Promise.resolve(void 0)):(E.hide(this._messageContainer),this._decorationsManager=new ve(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(t){return e._tree.rerender(t)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(t){var n=t.event,i=t.target;if(2===n.detail){var r=e._getFocusedReference();r&&e._onDidSelectReference.fire({element:{uri:r.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}}))),this.container.classList.add("results-loaded"),E.show(this._treeContainer),E.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}},{key:"_getFocusedReference",value:function(){var e=this._tree.getFocus(),t=(0,N.Z)(e,1)[0];return t instanceof M.WX?t:t instanceof M.F2&&t.children.length>0?t.children[0]:void 0}},{key:"revealReference",value:function(e){return ge(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._revealReference(e,!1);case 2:this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_revealReference",value:function(e,t){return ge(this,void 0,void 0,s().mark((function n(){var i,r,o,a,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._revealedReference!==e){n.next=2;break}return n.abrupt("return");case 2:if(this._revealedReference=e,e.uri.scheme!==F.lg.inMemory?this.setTitle((0,A.Hx)(e.uri),this._uriLabel.getUriLabel((0,A.XX)(e.uri))):this.setTitle(v.N("peekView.alternateTitle","References")),i=this._textModelResolverService.createModelReference(e.uri),this._tree.getInput()!==e.parent){n.next=9;break}this._tree.reveal(e),n.next=13;break;case 9:return t&&this._tree.reveal(e.parent),n.next=12,this._tree.expand(e.parent);case 12:this._tree.reveal(e);case 13:return n.next=15,i;case 15:if(r=n.sent,this._model){n.next=19;break}return r.dispose(),n.abrupt("return");case 19:(0,l.B9)(this._previewModelReference),(o=r.object)?(a=this._preview.getModel()===o.textEditorModel?0:1,u=f.e.lift(e.range).collapseToStart(),this._previewModelReference=r,this._preview.setModel(o.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,a)):(this._preview.setModel(this._previewNotAvailableMessage),r.dispose());case 22:case"end":return n.stop()}}),n,this)})))}}]),n}(g.vk);_e=he([fe(3,Y.XE),fe(4,U.S),fe(5,k.TG),fe(6,g.Fw),fe(7,z.e),fe(8,de.tJ),fe(9,J.d),fe(10,H.O),fe(11,K.c_)],_e);var ke=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},ye=function(e,t){return function(n,i){t(n,i,e)}},be=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},we=new _.uy("referenceSearchVisible",!1,v.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),xe=function(){function e(t,n,r,o,s,a,u,c){(0,i.Z)(this,e),this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=o,this._notificationService=s,this._instantiationService=a,this._storageService=u,this._configurationService=c,this._disposables=new l.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=we.bindTo(r)}return(0,r.Z)(e,[{key:"dispose",value:function(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}},{key:"toggleWidget",value:function(e,t,n){var i,r=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",s=pe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(_e,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(v.N("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((function(){t.cancel(),r._widget&&(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget=void 0),r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(e){var t=e.element,i=e.kind;if(t)switch(i){case"open":"editor"===e.source&&r._configurationService.getValue("editor.stablePeek")||r.openReference(t,!1,!1);break;case"side":r.openReference(t,!0,!1);break;case"goto":n?r._gotoReference(t):r.openReference(t,!1,!0)}})));var a=++this._requestIdPool;t.then((function(t){var n;if(a===r._requestIdPool&&r._widget)return null===(n=r._model)||void 0===n||n.dispose(),r._model=t,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(v.N("metaTitle.N","{0} ({1})",r._model.title,r._model.references.length));var t=r._editor.getModel().uri,n=new h.L(e.startLineNumber,e.startColumn),i=r._model.nearestReference(t,n);if(i)return r._widget.setSelection(i).then((function(){r._widget&&"editor"===r._editor.getOption(77)&&r._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(function(e){r._notificationService.error(e)}))}}},{key:"changeFocusBetweenPreviewAndReferences",value:function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}},{key:"goToNextOrPreviousReference",value:function(e){return be(this,void 0,void 0,s().mark((function t(){var n,i,r,o,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:if(n=this._widget.position){t.next=5;break}return t.abrupt("return");case 5:if(i=this._model.nearestReference(this._editor.getModel().uri,n)){t.next=8;break}return t.abrupt("return");case 8:return r=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),a=this._widget.isPreviewEditorFocused(),t.next=13,this._widget.setSelection(r);case 13:return t.next=15,this._gotoReference(r);case 15:o?this._editor.focus():this._widget&&a&&this._widget.focusOnPreviewEditor();case 16:case"end":return t.stop()}}),t,this)})))}},{key:"revealReference",value:function(e){return be(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._widget.revealReference(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"closeWidget",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,n&&this._editor.focus(),this._requestIdPool+=1}},{key:"_gotoReference",value:function(t){var n=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var i=f.e.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i,selectionSource:"code.jump"}},this._editor).then((function(t){var r;if(n._ignoreModelChangeEvent=!1,t&&n._widget)if(n._editor===t)n._widget.show(i),n._widget.focusOnReferenceTree();else{var o=e.get(t),s=n._model.clone();n.closeWidget(),t.focus(),null===o||void 0===o||o.toggleWidget(i,(0,a.PG)((function(e){return Promise.resolve(s)})),null!==(r=n._peekMode)&&void 0!==r&&r)}else n.closeWidget()}),(function(e){n._ignoreModelChangeEvent=!1,(0,u.dL)(e)}))}},{key:"openReference",value:function(e,t,n){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r,selectionSource:"code.jump",pinned:n}},this._editor,t)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();function Me(e,t){var n=(0,g.rc)(e);if(n){var i=xe.get(n);i&&t(i)}}xe.ID="editor.contrib.referencesController",xe=ke([ye(2,_.i6),ye(3,d.$),ye(4,w.lT),ye(5,k.TG),ye(6,x.Uy),ye(7,m.Ui)],xe),y.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,c.gx)(2089,60),when:_.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Me(e,(function(e){e.changeFocusBetweenPreviewAndReferences()}))}}),y.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:_.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Me(e,(function(e){e.goToNextOrPreviousReference(!0)}))}}),y.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:_.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Me(e,(function(e){e.goToNextOrPreviousReference(!1)}))}}),p.P0.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),p.P0.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),p.P0.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),p.P0.registerCommand("closeReferenceSearch",(function(e){return Me(e,(function(e){return e.closeWidget()}))})),y.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:_.Ao.and(g.Jy.inPeekEditor,_.Ao.not("config.editor.stablePeek"))}),y.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:_.Ao.and(we,_.Ao.not("config.editor.stablePeek"))}),y.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:_.Ao.and(we,b.CQ,b.PS.negate(),b.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof M.WX&&Me(e,(function(e){return e.revealReference(n[0])}))}}),y.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_.Ao.and(we,b.CQ,b.PS.negate(),b.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof M.WX&&Me(e,(function(e){return e.openReference(n[0],!0,!0)}))}}),p.P0.registerCommand("openReference",(function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof M.WX&&Me(e,(function(e){return e.openReference(n[0],!1,!0)}))}))},62302:function(e,t,n){n.d(t,{F2:function(){return b},WX:function(){return k},oQ:function(){return w}});var i=n(29439),r=n(37762),o=n(15671),s=n(43144),a=n(87757),u=n.n(a),c=n(68552),l=n(28941),d=n(21123),h=n(10526),f=n(49584),g=n(34408),v=n(26684),p=n(30788),m=n(87697),_=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},k=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=d.a.nextId()}return(0,s.Z)(e,[{key:"uri",get:function(){return this.link.uri}},{key:"range",get:function(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range},set:function(e){this._range=e,this._rangeCallback(this)}},{key:"ariaMessage",get:function(){var e,t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,m.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,g.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,m.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,g.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}]),e}(),y=function(){function e(t){(0,o.Z)(this,e),this._modelReference=t}return(0,s.Z)(e,[{key:"dispose",value:function(){this._modelReference.dispose()}},{key:"preview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=n.getWordUntilPosition({lineNumber:i,column:r-t}),u=new p.e(i,a.startColumn,i,r),c=new p.e(o,s,o,1073741824),l=n.getValueInRange(u).replace(/^\s+/,""),d=n.getValueInRange(e),h=n.getValueInRange(c).replace(/\s+$/,"");return{value:l+d+h,highlight:{start:l.length,end:l.length+d.length}}}}}]),e}(),b=function(){function e(t,n){(0,o.Z)(this,e),this.parent=t,this.uri=n,this.children=[],this._previews=new f.Y9}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,h.B9)(this._previews.values()),this._previews.clear()}},{key:"getPreview",value:function(e){return this._previews.get(e.uri)}},{key:"ariaMessage",get:function(){var e=this.children.length;return 1===e?(0,m.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,g.EZ)(this.uri),this.uri.fsPath):(0,m.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,g.EZ)(this.uri),this.uri.fsPath)}},{key:"resolve",value:function(e){return _(this,void 0,void 0,u().mark((function t(){var n,i,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this._previews.size){t.next=2;break}return t.abrupt("return",this);case 2:n=(0,r.Z)(this.children),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=21;break}if(o=i.value,!this._previews.has(o.uri)){t.next=9;break}return t.abrupt("continue",19);case 9:return t.prev=9,t.next=12,e.createModelReference(o.uri);case 12:s=t.sent,this._previews.set(o.uri,new y(s)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),(0,c.dL)(t.t0);case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(3),n.e(t.t1);case 26:return t.prev=26,n.f(),t.finish(26);case 29:return t.abrupt("return",this);case 30:case"end":return t.stop()}}),t,this,[[3,23,26,29],[9,16]])})))}}]),e}(),w=function(){function e(t,n){var s=this;(0,o.Z)(this,e),this.groups=[],this.references=[],this._onDidChangeReferenceRange=new l.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;var a,u=(0,i.Z)(t,1)[0];t.sort(e._compareReferences);var c,d=(0,r.Z)(t);try{for(d.s();!(c=d.n()).done;){var h=c.value;if(a&&g.SF.isEqual(a.uri,h.uri,!0)||(a=new b(this,h.uri),this.groups.push(a)),0===a.children.length||0!==e._compareReferences(h,a.children[a.children.length-1])){var f=new k(u===h,a,h,(function(e){return s._onDidChangeReferenceRange.fire(e)}));this.references.push(f),a.children.push(f)}}}catch(v){d.e(v)}finally{d.f()}}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,h.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}},{key:"clone",value:function(){return new e(this._links,this._title)}},{key:"title",get:function(){return this._title}},{key:"isEmpty",get:function(){return 0===this.groups.length}},{key:"ariaMessage",get:function(){return this.isEmpty?(0,m.N)("aria.result.0","No results found"):1===this.references.length?(0,m.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,m.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,m.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}},{key:"nextOrPreviousReference",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return 1===o||t&&i+1<r||!t&&i>0?(i=t?(i+1)%r:(i+r-1)%r,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}},{key:"nearestReference",value:function(e,t){var n=this.references.map((function(n,i){return{idx:i,prefixLen:v.Mh(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}})).sort((function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0}))[0];if(n)return this.references[n.idx]}},{key:"referenceAt",value:function(e,t){var n,i=(0,r.Z)(this.references);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.uri.toString()===e.toString()&&p.e.containsPosition(o.range,t))return o}}catch(s){i.e(s)}finally{i.f()}}},{key:"firstReference",value:function(){var e,t=(0,r.Z)(this.references);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isProviderFirst)return n}}catch(i){t.e(i)}finally{t.f()}return this.references[0]}}],[{key:"_compareReferences",value:function(e,t){return g.SF.compare(e.uri,t.uri)||p.e.compareRangesUsingStarts(e.range,t.range)}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.1b18e904.9b75ae46.js.map