"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[929],{66896:(e,t,o)=>{var i,n=o(51988),s=o(84891),r=o(1094),a=o(17093),c=o(90359),d=o(53137),l=o(21742),h=o(86742),u=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},g=function(e,t){return function(o,i){t(o,i,e)}},p=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const m=new h.N1("selectionAnchorSet",!1);let _=i=class{static get(e){return e.getContribution(i.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=m.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations((t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(c.L.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:(new s.Bc).appendText((0,l.kg)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,n.xE)((0,l.kg)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(c.L.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};_.ID="editor.contrib.selectionAnchorController",_=i=u([g(1,h.fN)],_);class f extends a.ks{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,l.kg)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:d.R.editorTextFocus,primary:(0,r.m5)(2089,2080),weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.setSelectionAnchor()}))}}class v extends a.ks{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,l.kg)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:m})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.goToSelectionAnchor()}))}}class C extends a.ks{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,l.kg)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:m,kbOpts:{kbExpr:d.R.editorTextFocus,primary:(0,r.m5)(2089,2089),weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.selectFromAnchorToCursor()}))}}class b extends a.ks{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,l.kg)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:m,kbOpts:{kbExpr:d.R.editorTextFocus,primary:9,weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.cancelSelectionAnchor()}))}}(0,a.HW)(_.ID,_,4),(0,a.Fl)(f),(0,a.Fl)(v),(0,a.Fl)(C),(0,a.Fl)(b)},34205:(e,t,o)=>{var i=o(46661),n=o(24085),s=o(17093),r=o(45530),a=o(22152),c=o(90359),d=o(53137),l=o(40740),h=o(27141),u=o(21742),g=o(72152),p=o(67801),m=o(83457);const _=(0,p.x1A)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},u.kg("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class f extends s.ks{constructor(){super({id:"editor.action.jumpToBracket",label:u.kg("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:d.R.editorTextFocus,primary:3165,weight:100}})}run(e,t){var o;null===(o=k.get(t))||void 0===o||o.jumpToBracket()}}class v extends s.ks{constructor(){super({id:"editor.action.selectToBracket",label:u.kg("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,o){var i;let n=!0;o&&!1===o.selectBrackets&&(n=!1),null===(i=k.get(t))||void 0===i||i.selectToBracket(n)}}class C extends s.ks{constructor(){super({id:"editor.action.removeBrackets",label:u.kg("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:d.R.editorTextFocus,primary:2561,weight:100}})}run(e,t){var o;null===(o=k.get(t))||void 0===o||o.removeBrackets(this.id)}}class b{constructor(e,t,o){this.position=e,this.brackets=t,this.options=o}}class k extends n.jG{static get(e){return e.getContribution(k.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new i.uC((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(71),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(71)&&(this._matchBrackets=this._editor.getOption(71),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const o=t.getStartPosition(),i=e.bracketPairs.matchBracket(o);let n=null;if(i)i[0].containsPosition(o)&&!i[1].containsPosition(o)?n=i[1].getStartPosition():i[1].containsPosition(o)&&(n=i[0].getStartPosition());else{const t=e.bracketPairs.findEnclosingBrackets(o);if(t)n=t[1].getStartPosition();else{const t=e.bracketPairs.findNextBracket(o);t&&t.range&&(n=t.range.getStartPosition())}}return n?new c.L(n.lineNumber,n.column,n.lineNumber,n.column):new c.L(o.lineNumber,o.column,o.lineNumber,o.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=[];this._editor.getSelections().forEach((i=>{const n=i.getStartPosition();let s=t.bracketPairs.matchBracket(n);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(n),!s)){const e=t.bracketPairs.findNextBracket(n);e&&e.range&&(s=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let r=null,d=null;if(s){s.sort(a.Q.compareRangesUsingStarts);const[t,o]=s;if(r=e?t.getStartPosition():t.getEndPosition(),d=e?o.getEndPosition():o.getStartPosition(),o.containsPosition(n)){const e=r;r=d,d=e}}r&&d&&o.push(new c.L(r.lineNumber,r.column,d.lineNumber,d.column))})),o.length>0&&(this._editor.setSelections(o),this._editor.revealRange(o[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach((o=>{const i=o.getPosition();let n=t.bracketPairs.matchBracket(i);n||(n=t.bracketPairs.findEnclosingBrackets(i)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())}))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();const e=[];let t=0;for(const o of this._lastBracketsData){const i=o.brackets;i&&(e[t++]={range:i[0],options:o.options},e[t++]={range:i[1],options:o.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),o=t.getVersionId();let i=[];this._lastVersionId===o&&(i=this._lastBracketsData);const n=[];let s=0;for(let r=0,h=e.length;r<h;r++){const t=e[r];t.isEmpty()&&(n[s++]=t.getStartPosition())}n.length>1&&n.sort(r.y.compare);const a=[];let c=0,d=0;const l=i.length;for(let r=0,h=n.length;r<h;r++){const e=n[r];for(;d<l&&i[d].position.isBefore(e);)d++;if(d<l&&i[d].position.equals(e))a[c++]=i[d];else{let o=t.bracketPairs.matchBracket(e,20),i=k._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;o||"always"!==this._matchBrackets||(o=t.bracketPairs.findEnclosingBrackets(e,20),i=k._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[c++]=new b(e,o,i)}}this._lastBracketsData=a,this._lastVersionId=o}}k.ID="editor.contrib.bracketMatchingController",k._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h.kI.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,m.Yf)(_),position:l.A5.Center}}),k._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h.kI.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,s.HW)(k.ID,k,1),(0,s.Fl)(v),(0,s.Fl)(f),(0,s.Fl)(C),g.ZG.appendMenuItem(g.D8.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:u.kg({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},61697:(e,t,o)=>{var i=o(17093),n=o(53137),s=o(22152),r=o(90359);class a{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const o=this._selection.startLineNumber,i=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||n!==e.getLineMaxColumn(o)))if(this._isMovingLeft){const r=new s.Q(o,i-1,o,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(o,n,o,n),a)}else{const r=new s.Q(o,n,o,n+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(o,i,o,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new r.L(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new r.L(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var c=o(21742);class d extends i.ks{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const o=[],i=t.getSelections();for(const n of i)o.push(new a(n,this.left));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,i.Fl)(class extends d{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:c.kg("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n.R.writable})}}),(0,i.Fl)(class extends d{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:c.kg("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n.R.writable})}})},36067:(e,t,o)=>{var i=o(17093),n=o(72023),s=o(40527),r=o(22152),a=o(53137),c=o(21742);class d extends i.ks{constructor(){super({id:"editor.action.transposeLetters",label:c.kg("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a.R.writable,kbOpts:{kbExpr:a.R.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const o=t.getModel(),i=[],a=t.getSelections();for(const c of a){if(!c.isEmpty())continue;const e=c.startLineNumber,t=c.startColumn,a=o.getLineMaxColumn(e);if(1===e&&(1===t||2===t&&2===a))continue;const d=t===a?c.getPosition():s.I.rightPosition(o,c.getPosition().lineNumber,c.getPosition().column),l=s.I.leftPosition(o,d),h=s.I.leftPosition(o,l),u=o.getValueInRange(r.Q.fromPositions(h,l)),g=o.getValueInRange(r.Q.fromPositions(l,d)),p=r.Q.fromPositions(h,d);i.push(new n.iu(p,g+u))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}(0,i.Fl)(d)},2977:(e,t,o)=>{var i=o(80848),n=o(53028),s=o(23478),r=o(59803),a=o(17093),c=o(95358),d=o(53137),l=o(21742),h=o(72152),u=o(5995),g=o(86742),p=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const m="9_cutcopypaste",_=s.ib||document.queryCommandSupported("cut"),f=s.ib||document.queryCommandSupported("copy"),v="undefined"!==typeof navigator.clipboard&&!i.gm||document.queryCommandSupported("paste");function C(e){return e.register(),e}const b=_?C(new a.fE({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:s.ib?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:h.D8.MenubarEditMenu,group:"2_ccp",title:l.kg({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:h.D8.EditorContext,group:m,title:l.kg("actions.clipboard.cutLabel","Cut"),when:d.R.writable,order:1},{menuId:h.D8.CommandPalette,group:"",title:l.kg("actions.clipboard.cutLabel","Cut"),order:1},{menuId:h.D8.SimpleEditorContext,group:m,title:l.kg("actions.clipboard.cutLabel","Cut"),when:d.R.writable,order:1}]})):void 0,k=f?C(new a.fE({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:s.ib?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:h.D8.MenubarEditMenu,group:"2_ccp",title:l.kg({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:h.D8.EditorContext,group:m,title:l.kg("actions.clipboard.copyLabel","Copy"),order:2},{menuId:h.D8.CommandPalette,group:"",title:l.kg("actions.clipboard.copyLabel","Copy"),order:1},{menuId:h.D8.SimpleEditorContext,group:m,title:l.kg("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;h.ZG.appendMenuItem(h.D8.MenubarEditMenu,{submenu:h.D8.MenubarCopy,title:{value:l.kg("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),h.ZG.appendMenuItem(h.D8.EditorContext,{submenu:h.D8.EditorContextCopy,title:{value:l.kg("copy as","Copy As"),original:"Copy As"},group:m,order:3}),h.ZG.appendMenuItem(h.D8.EditorContext,{submenu:h.D8.EditorContextShare,title:{value:l.kg("share","Share"),original:"Share"},group:"11_share",order:-1,when:g.M$.and(g.M$.notEquals("resourceScheme","output"),d.R.editorTextFocus)}),h.ZG.appendMenuItem(h.D8.EditorTitleContext,{submenu:h.D8.EditorTitleContextShare,title:{value:l.kg("share","Share"),original:"Share"},group:"11_share",order:-1}),h.ZG.appendMenuItem(h.D8.ExplorerContext,{submenu:h.D8.ExplorerContextShare,title:{value:l.kg("share","Share"),original:"Share"},group:"11_share",order:-1});const y=v?C(new a.fE({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:s.ib?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:h.D8.MenubarEditMenu,group:"2_ccp",title:l.kg({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:h.D8.EditorContext,group:m,title:l.kg("actions.clipboard.pasteLabel","Paste"),when:d.R.writable,order:4},{menuId:h.D8.CommandPalette,group:"",title:l.kg("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:h.D8.SimpleEditorContext,group:m,title:l.kg("actions.clipboard.pasteLabel","Paste"),when:d.R.writable,order:4}]})):void 0;class w extends a.ks{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:l.kg("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:d.R.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(37)&&t.getSelection().isEmpty()||(r.Eq.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),r.Eq.forceCopyWithSyntaxHighlighting=!1)}}function S(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,o)=>{const i=e.get(c.T).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const e=i.getOption(37),o=i.getSelection();return o&&o.isEmpty()&&!e||i.getContainerDomNode().ownerDocument.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,o)=>((0,n.a)().execCommand(t),!0))))}S(b,"cut"),S(k,"copy"),y&&(y.addImplementation(1e4,"code-editor",((e,t)=>{const o=e.get(c.T),i=e.get(u.h),n=o.getFocusedCodeEditor();if(n&&n.hasTextFocus()){return!(!n.getContainerDomNode().ownerDocument.execCommand("paste")&&s.HZ)||p(void 0,void 0,void 0,(function*(){const e=yield i.readText();if(""!==e){const t=r.bs.INSTANCE.get(e);let o=!1,i=null,s=null;t&&(o=n.getOption(37)&&!!t.isFromEmptySelection,i="undefined"!==typeof t.multicursorText?t.multicursorText:null,s=t.mode),n.trigger("keyboard","paste",{text:e,pasteOnNewLine:o,multicursorText:i,mode:s})}}))}return!1})),y.addImplementation(0,"generic-dom",((e,t)=>((0,n.a)().execCommand("paste"),!0)))),f&&(0,a.Fl)(w)},74975:(e,t,o)=>{o.d(t,{C9:()=>x,Qp:()=>I,Rw:()=>D,Uy:()=>L,W4:()=>E,Xj:()=>S,dU:()=>N,k_:()=>k,pQ:()=>y,pR:()=>w});var i=o(43555),n=o(45486),s=o(81530),r=o(24085),a=o(45375),c=o(50854),d=o(22152),l=o(90359),h=o(32709),u=o(86815),g=o(69263),p=o(21742),m=o(88976),_=o(57876),f=o(74612),v=o(14996),C=o(55542),b=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const k="editor.action.codeAction",y="editor.action.quickFix",w="editor.action.autoFix",S="editor.action.refactor",x="editor.action.sourceAction",L="editor.action.organizeImports",D="editor.action.fixAll";class P extends r.jG{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator(e,t){let{action:o}=e,{action:n}=t;return(0,i.EI)(o.diagnostics)?(0,i.EI)(n.diagnostics)?P.codeActionsPreferredComparator(o,n):-1:(0,i.EI)(n.diagnostics)?1:P.codeActionsPreferredComparator(o,n)}constructor(e,t,o){super(),this.documentation=t,this._register(o),this.allActions=[...e].sort(P.codeActionsComparator),this.validActions=this.allActions.filter((e=>{let{action:t}=e;return!t.disabled}))}get hasAutoFix(){return this.validActions.some((e=>{let{action:t}=e;return!!t.kind&&C.gB.QuickFix.contains(new C.gB(t.kind))&&!!t.isPreferred}))}}const A={actions:[],documentation:void 0};function N(e,t,o,n,a,c){var d;return b(this,void 0,void 0,(function*(){const l=n.filter||{},h=Object.assign(Object.assign({},l),{excludes:[...l.excludes||[],C.gB.Notebook]}),u={only:null===(d=l.include)||void 0===d?void 0:d.value,trigger:n.type},p=new g.ER(t,c),m=2===n.type,_=function(e,t,o){return e.all(t).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,C.uJ)(o,new C.gB(e))))))}(e,t,m?h:l),f=new r.Cm,v=_.map((e=>b(this,void 0,void 0,(function*(){try{a.report(e);const i=yield e.provideCodeActions(t,o,u,p.token);if(i&&f.add(i),p.token.isCancellationRequested)return A;const n=((null===i||void 0===i?void 0:i.actions)||[]).filter((e=>e&&(0,C.aF)(l,e))),s=function(e,t,o){if(!e.documentation)return;const i=e.documentation.map((e=>({kind:new C.gB(e.kind),command:e.command})));if(o){let e;for(const t of i)t.kind.contains(o)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null===e||void 0===e?void 0:e.command}for(const n of t)if(n.kind)for(const e of i)if(e.kind.contains(new C.gB(n.kind)))return e.command;return}(e,n,l.include);return{actions:n.map((t=>new C.Vi(t,e))),documentation:s}}catch(i){if((0,s.MB)(i))throw i;return(0,s.M_)(i),A}})))),k=e.onDidChange((()=>{const o=e.all(t);(0,i.aI)(o,_)||p.cancel()}));try{const o=yield Promise.all(v),s=o.map((e=>e.actions)).flat(),r=[...(0,i.Yc)(o.map((e=>e.documentation))),...M(e,t,n,s)];return new P(s,r,f)}finally{k.dispose(),p.dispose()}}))}function*M(e,t,o,i){var n,s,r;if(t&&i.length)for(const a of e.all(t))a._getAdditionalMenuItems&&(yield*null===(n=a._getAdditionalMenuItems)||void 0===n?void 0:n.call(a,{trigger:o.type,only:null===(r=null===(s=o.filter)||void 0===s?void 0:s.include)||void 0===r?void 0:r.value},i.map((e=>e.action))))}var I;function E(e,t,o,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.X.None;var r;return b(this,void 0,void 0,(function*(){const n=e.get(c.nu),a=e.get(m.d),d=e.get(v.k),l=e.get(_.Ot);if(d.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:o}),yield t.resolve(s),!s.isCancellationRequested){if(null===(r=t.action.edit)||void 0===r?void 0:r.edits.length){if(!(yield n.apply(t.action.edit,{editor:null===i||void 0===i?void 0:i.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:o!==I.OnSave,showPreview:null===i||void 0===i?void 0:i.preview})).isApplied)return}if(t.action.command)try{yield a.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(h){const e=function(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}(h);l.error("string"===typeof e?e:p.kg("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}}))}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions"}(I||(I={})),m.w.registerCommand("_executeCodeActionProvider",(function(e,t,o,i,r){return b(this,void 0,void 0,(function*(){if(!(t instanceof a.r))throw(0,s.Qg)();const{codeActionProvider:c}=e.get(h.u),g=e.get(u.S).getModel(t);if(!g)throw(0,s.Qg)();const p=l.L.isISelection(o)?l.L.liftSelection(o):d.Q.isIRange(o)?g.validateRange(o):void 0;if(!p)throw(0,s.Qg)();const m="string"===typeof i?new C.gB(i):void 0,_=yield N(c,g,p,{type:1,triggerAction:C.fo.Default,filter:{includeSourceActions:!0,include:m}},f.ke.None,n.X.None),v=[],b=Math.min(_.validActions.length,"number"===typeof r?r:0);for(let e=0;e<b;e++)v.push(_.validActions[e].resolve(n.X.None));try{return yield Promise.all(v),_.validActions.map((e=>e.action))}finally{setTimeout((()=>_.dispose()),100)}}))}))},84917:(e,t,o)=>{var i=o(17093),n=o(6282),s=o(24939),r=o(53137),a=o(74975),c=o(21742),d=o(86742),l=o(55542),h=o(96154),u=o(81470);function g(e){return d.M$.regex(u.D_.keys()[0],new RegExp("(\\s|^)"+(0,s.bm)(e.value)+"\\b"))}const p={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:c.kg("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:c.kg("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[c.kg("args.schema.apply.first","Always apply the first returned code action."),c.kg("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),c.kg("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:c.kg("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function m(e,t,o,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.fo.Default;if(e.hasModel()){const s=h.C.get(e);null===s||void 0===s||s.manualTriggerAtCurrentPosition(t,n,o,i)}}class _ extends i.ks{constructor(){super({id:a.pQ,label:c.kg("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:d.M$.and(r.R.writable,r.R.hasCodeActionsProvider),kbOpts:{kbExpr:r.R.textInputFocus,primary:2137,weight:100}})}run(e,t){return m(t,c.kg("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,l.fo.QuickFix)}}class f extends i.DX{constructor(){super({id:a.k_,precondition:d.M$.and(r.R.writable,r.R.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:p}]}})}runEditorCommand(e,t,o){const i=l.QA.fromUser(o,{kind:l.gB.Empty,apply:"ifSingle"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.kg("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",o.kind):c.kg("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",o.kind):i.preferred?c.kg("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):c.kg("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class v extends i.ks{constructor(){super({id:a.Xj,label:c.kg("refactor.label","Refactor..."),alias:"Refactor...",precondition:d.M$.and(r.R.writable,r.R.hasCodeActionsProvider),kbOpts:{kbExpr:r.R.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:d.M$.and(r.R.writable,g(l.gB.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.QA.fromUser(o,{kind:l.gB.Refactor,apply:"never"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.kg("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",o.kind):c.kg("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",o.kind):i.preferred?c.kg("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):c.kg("editor.action.refactor.noneMessage","No refactorings available"),{include:l.gB.Refactor.contains(i.kind)?i.kind:l.gB.None,onlyIncludePreferredActions:i.preferred},i.apply,l.fo.Refactor)}}class C extends i.ks{constructor(){super({id:a.C9,label:c.kg("source.label","Source Action..."),alias:"Source Action...",precondition:d.M$.and(r.R.writable,r.R.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:d.M$.and(r.R.writable,g(l.gB.Source))},description:{description:"Source Action...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.QA.fromUser(o,{kind:l.gB.Source,apply:"never"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.kg("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",o.kind):c.kg("editor.action.source.noneMessage.kind","No source actions for '{0}' available",o.kind):i.preferred?c.kg("editor.action.source.noneMessage.preferred","No preferred source actions available"):c.kg("editor.action.source.noneMessage","No source actions available"),{include:l.gB.Source.contains(i.kind)?i.kind:l.gB.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,l.fo.SourceAction)}}class b extends i.ks{constructor(){super({id:a.Uy,label:c.kg("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:d.M$.and(r.R.writable,g(l.gB.SourceOrganizeImports)),kbOpts:{kbExpr:r.R.textInputFocus,primary:1581,weight:100}})}run(e,t){return m(t,c.kg("editor.action.organize.noneMessage","No organize imports action available"),{include:l.gB.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",l.fo.OrganizeImports)}}class k extends i.ks{constructor(){super({id:a.Rw,label:c.kg("fixAll.label","Fix All"),alias:"Fix All",precondition:d.M$.and(r.R.writable,g(l.gB.SourceFixAll))})}run(e,t){return m(t,c.kg("fixAll.noneMessage","No fix all action available"),{include:l.gB.SourceFixAll,includeSourceActions:!0},"ifSingle",l.fo.FixAll)}}class y extends i.ks{constructor(){super({id:a.pR,label:c.kg("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:d.M$.and(r.R.writable,g(l.gB.QuickFix)),kbOpts:{kbExpr:r.R.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return m(t,c.kg("editor.action.autoFix.noneMessage","No auto fixes available"),{include:l.gB.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",l.fo.AutoFix)}}var w=o(41316),S=o(25821),x=o(60512);(0,i.HW)(h.C.ID,h.C,3),(0,i.HW)(w.E.ID,w.E,4),(0,i.Fl)(_),(0,i.Fl)(v),(0,i.Fl)(C),(0,i.Fl)(b),(0,i.Fl)(y),(0,i.Fl)(k),(0,i.E_)(new f),x.O.as(S.Fd.Configuration).registerConfiguration(Object.assign(Object.assign({},n.JJ),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:c.kg("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}})),x.O.as(S.Fd.Configuration).registerConfiguration(Object.assign(Object.assign({},n.JJ),{properties:{"editor.codeActionWidget.includeNearbyQuickfixes":{type:"boolean",scope:5,description:c.kg("includeNearbyQuickfixes","Enable/disable showing nearest quickfix within a line when not currently on a diagnostic."),default:!1}}}))},96154:(e,t,o)=>{o.d(t,{C:()=>W});var i,n=o(53028),s=o(51988),r=o(81530),a=o(1547),c=o(24085),d=o(45530),l=o(27141),h=o(32709),u=o(74975),g=o(55542),p=o(34236),m=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},_=function(e,t){return function(o,i){t(o,i,e)}};let f=i=class{constructor(e){this.keybindingService=e}getResolver(){const e=new a.d((()=>this.keybindingService.getKeybindings().filter((e=>i.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===u.Uy?t={kind:g.gB.SourceOrganizeImports.value}:e.command===u.Rw&&(t={kind:g.gB.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},g.QA.fromUser(t,{kind:g.gB.None,apply:"never"}))}))));return t=>{if(t.kind){const o=this.bestKeybindingForCodeAction(t,e.value);return null===o||void 0===o?void 0:o.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const o=new g.gB(e.kind);return t.filter((e=>e.kind.contains(o))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}};f.codeActionCommands=[u.Xj,u.k_,u.C9,u.Uy,u.Rw],f=i=m([_(0,p.b)],f);o(18668);var v=o(5829),C=(o(53263),o(21742));const b=Object.freeze({kind:g.gB.Empty,title:(0,C.kg)("codeAction.widget.id.more","More Actions...")}),k=Object.freeze([{kind:g.gB.QuickFix,title:(0,C.kg)("codeAction.widget.id.quickfix","Quick Fix")},{kind:g.gB.RefactorExtract,title:(0,C.kg)("codeAction.widget.id.extract","Extract"),icon:v.W.wrench},{kind:g.gB.RefactorInline,title:(0,C.kg)("codeAction.widget.id.inline","Inline"),icon:v.W.wrench},{kind:g.gB.RefactorRewrite,title:(0,C.kg)("codeAction.widget.id.convert","Rewrite"),icon:v.W.wrench},{kind:g.gB.RefactorMove,title:(0,C.kg)("codeAction.widget.id.move","Move"),icon:v.W.wrench},{kind:g.gB.SurroundWith,title:(0,C.kg)("codeAction.widget.id.surround","Surround With"),icon:v.W.symbolSnippet},{kind:g.gB.Source,title:(0,C.kg)("codeAction.widget.id.source","Source Action"),icon:v.W.symbolFile},b]);var y,w=o(41316),S=o(4872),x=o(63082),L=o(88976),D=o(33802),P=o(86742),A=o(13024),N=o(888),M=o(74612),I=o(67801),E=o(24888),R=o(83457),O=o(81470),F=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},B=function(e,t){return function(o,i){t(o,i,e)}},T=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};let W=y=class extends c.jG{static get(e){return e.getContribution(y.ID)}constructor(e,t,o,i,n,s,r,d,l,h){super(),this._commandService=r,this._configurationService=d,this._actionWidgetService=l,this._instantiationService=h,this._activeCodeActions=this._register(new c.HE),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new O.Dc(this._editor,n.codeActionProvider,t,o,s,d)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._lightBulbWidget=new a.d((()=>{const e=this._editor.getContribution(w.E.ID);return e&&this._register(e.onClick((e=>this.showCodeActionList(e.actions,e,{includeDisabledActions:!1,fromLightbulb:!0})))),e})),this._resolver=i.createInstance(f),this._register(this._editor.onDidLayoutChange((()=>this._actionWidgetService.hide())))}dispose(){this._disposed=!0,super.dispose()}showCodeActions(e,t,o){return this.showCodeActionList(t,o,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,o,i){var n;if(!this._editor.hasModel())return;null===(n=S.k.get(this._editor))||void 0===n||n.closeMessage();const s=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:o,autoApply:i,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t,o){return T(this,void 0,void 0,(function*(){try{yield this._instantiationService.invokeFunction(u.W4,e,u.Qp.FromCodeActions,{preview:o,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:g.fo.QuickFix,filter:{}})}}))}update(e){var t,o,i,n,s,a,c;return T(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let d;try{d=yield e.actions}catch(l){return void(0,r.dz)(l)}if(!this._disposed)if(null===(o=this._lightBulbWidget.value)||void 0===o||o.update(d,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,d);if(t){try{null===(n=this._lightBulbWidget.value)||void 0===n||n.hide(),yield this._applyCodeAction(t,!1,!1)}finally{d.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,d);if(t&&t.action.disabled)return null===(s=S.k.get(this._editor))||void 0===s||s.showMessage(t.action.disabled,e.trigger.context.position),void d.dispose()}}const t=!!(null===(a=e.trigger.filter)||void 0===a?void 0:a.include);if(e.trigger.context&&(!d.allActions.length||!t&&!d.validActions.length))return null===(c=S.k.get(this._editor))||void 0===c||c.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=d,void d.dispose();this._activeCodeActions.value=d,this.showCodeActionList(d,this.toCoords(e.position),{includeDisabledActions:t,fromLightbulb:!1})}else this._actionWidgetService.isVisible?d.dispose():this._activeCodeActions.value=d}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((e=>{let{action:t}=e;return t.disabled})):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,o){return T(this,void 0,void 0,(function*(){const i=this._editor.createDecorationsCollection(),n=this._editor.getDomNode();if(!n)return;const r=o.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions;if(!r.length)return;const a=d.y.isIPosition(t)?this.toCoords(t):t,c={onSelect:(e,t)=>T(this,void 0,void 0,(function*(){this._applyCodeAction(e,!0,!!t),this._actionWidgetService.hide(),i.clear()})),onHide:()=>{var e;null===(e=this._editor)||void 0===e||e.focus(),i.clear()},onHover:(e,t)=>T(this,void 0,void 0,(function*(){var o;if(yield e.resolve(t),!t.isCancellationRequested)return{canPreview:!!(null===(o=e.action.edit)||void 0===o?void 0:o.edits.length)}})),onFocus:e=>{var t,o;if(e&&e.highlightRange&&e.action.diagnostics){const n=[{range:e.action.diagnostics[0],options:y.DECORATION}];i.set(n);const r=e.action.diagnostics[0],a=null===(o=null===(t=this._editor.getModel())||void 0===t?void 0:t.getWordAtPosition({lineNumber:r.startLineNumber,column:r.startColumn}))||void 0===o?void 0:o.word;s.h5((0,C.kg)("editingNewSelection","Context: {0} at line {1} and column {2}.",a,r.startLineNumber,r.startColumn))}else i.clear()}};this._actionWidgetService.show("codeActionWidget",!0,function(e,t,o){if(!t)return e.map((e=>{var t;return{kind:"action",item:e,group:b,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}}));const i=k.map((e=>({group:e,actions:[]})));for(const s of e){const e=s.action.kind?new g.gB(s.action.kind):g.gB.None;for(const t of i)if(t.group.kind.contains(e)){t.actions.push(s);break}}const n=[];for(const s of i)if(s.actions.length){n.push({kind:"header",group:s.group});for(const e of s.actions)n.push({kind:"action",item:e,group:s.group,label:e.action.title,disabled:!!e.action.disabled,keybinding:o(e.action)})}return n}(r,this._shouldShowHeaders(),this._resolver.getResolver()),c,a,n,this._getActionBarActions(e,t,o))}))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),o=(0,n.BK)(this._editor.getDomNode());return{x:o.left+t.left,y:o.top+t.top+t.height}}_shouldShowHeaders(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null===t||void 0===t?void 0:t.uri})}_getActionBarActions(e,t,o){if(o.fromLightbulb)return[];const i=e.documentation.map((e=>{var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:()=>{var t;return this._commandService.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}}}));return o.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:(0,C.kg)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,o))}:{id:"showMoreActions",label:(0,C.kg)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,o))}),i}};W.ID="editor.contrib.codeActionController",W.DECORATION=l.kI.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),W=y=F([B(1,N.DR),B(2,P.fN),B(3,A._Y),B(4,h.u),B(5,M.N8),B(6,L.d),B(7,D.pG),B(8,x.$),B(9,A._Y)],W),(0,R.zy)(((e,t)=>{var o,i;o=".quickfix-edit-highlight",(i=e.getColor(I.Ubg))&&t.addRule(".monaco-editor ".concat(o," { background-color: ").concat(i,"; }"));const n=e.getColor(I.ECk);n&&t.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat((0,E.Bb)(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"))}))},81470:(e,t,o)=>{o.d(t,{D_:()=>m,Dc:()=>C});var i=o(46661),n=o(81530),s=o(56637),r=o(24085),a=o(29956),c=o(45530),d=o(90359),l=o(86742),h=o(74612),u=o(55542),g=o(74975),p=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const m=new l.N1("supportedCodeAction","");class _ extends r.jG{constructor(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;super(),this._editor=e,this._markerService=t,this._signalChange=o,this._delay=n,this._autoTriggerTimer=this._register(new i.pc),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._tryAutoTrigger())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,a.n4)(e,t.uri)))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:u.fo.Default})}),this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=this._editor.getSelection();if(o.isEmpty()&&2===e.type){const{lineNumber:e,column:i}=o.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===i){if(/\s/.test(n[0]))return}else if(i===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[i-2])&&/\s/.test(n[i-1]))return}return o}}var f;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,o){this.trigger=e,this.position=t,this._cancellablePromise=o,this.type=1,this.actions=o.catch((e=>{if((0,n.MB)(e))return v;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(f||(f={}));const v=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class C extends r.jG{constructor(e,t,o,i,n,a){super(),this._editor=e,this._registry=t,this._markerService=o,this._progressService=n,this._configurationService=a,this._codeActionOracle=this._register(new r.HE),this._state=f.Empty,this._onDidChangeState=this._register(new s.vl),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=m.bindTo(i),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(f.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickfixes",{resource:null===t||void 0===t?void 0:t.uri})}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(f.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(90)){const t=this._registry.all(e).flatMap((e=>{var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new _(this._editor,this._markerService,(t=>{var o;if(!t)return void this.setState(f.Empty);const n=t.selection.getStartPosition(),s=(0,i.SS)((o=>p(this,void 0,void 0,(function*(){var i,n,s,r,a,l;if(this._settingEnabledNearbyQuickfixes()&&1===t.trigger.type&&(t.trigger.triggerAction===u.fo.QuickFix||(null===(n=null===(i=t.trigger.filter)||void 0===i?void 0:i.include)||void 0===n?void 0:n.contains(u.gB.QuickFix)))){const i=yield(0,g.dU)(this._registry,e,t.selection,t.trigger,h.ke.None,o);if(o.isCancellationRequested)return v;if(!(null===(s=i.validActions)||void 0===s?void 0:s.some((e=>!!e.action.kind&&u.gB.QuickFix.contains(new u.gB(e.action.kind)))))){const n=this._markerService.read({resource:e.uri});if(n.length>0){const s=t.selection.getPosition();let p=s,m=Number.MAX_VALUE,_=!1;for(const e of n){const t=e.endColumn,o=e.endLineNumber,i=e.startLineNumber;(o===s.lineNumber||i===s.lineNumber)&&Math.abs(s.column-t)<m&&(m=Math.abs(s.column-t),_=!0,p=new c.y(o,t))}if(_){const n={type:t.trigger.type,triggerAction:t.trigger.triggerAction,filter:{include:(null===(r=t.trigger.filter)||void 0===r?void 0:r.include)?null===(a=t.trigger.filter)||void 0===a?void 0:a.include:u.gB.QuickFix},autoApply:t.trigger.autoApply,context:{notAvailableMessage:(null===(l=t.trigger.context)||void 0===l?void 0:l.notAvailableMessage)||"",position:p}},s=new d.L(p.lineNumber,p.column,p.lineNumber,p.column),c=yield(0,g.dU)(this._registry,e,s,n,h.ke.None,o),m=[...i.validActions];return 0!==c.validActions.length&&(c.validActions.forEach((e=>{e.highlightRange=e.action.isPreferred})),m.push(...c.validActions)),{validActions:m,allActions:i.allActions,documentation:i.documentation,hasAutoFix:i.hasAutoFix,dispose:()=>{i.dispose()}}}}}}return(0,g.dU)(this._registry,e,t.selection,t.trigger,h.ke.None,o)}))));1===t.trigger.type&&(null===(o=this._progressService)||void 0===o||o.showWhile(s,250)),this.setState(new f.Triggered(t.trigger,n,s))}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:u.fo.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}}},41316:(e,t,o)=>{o.d(t,{E:()=>f});var i,n,s=o(53028),r=o(6555),a=o(5829),c=o(56637),d=o(24085),l=o(81490),h=o(30534),u=o(74975),g=o(21742),p=o(34236),m=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},_=function(e,t){return function(o,i){t(o,i,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,o,i){this.actions=e,this.trigger=t,this.editorPosition=o,this.widgetPosition=i,this.type=1}}}(n||(n={}));let f=i=class extends d.jG{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new c.vl),this.onClick=this._onClick.event,this._state=n.Hidden,this._domNode=s.$("div.lightBulbWidget"),this._register(r.q.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),this._register(s.Xc(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:o}=s.BK(this._domNode),i=this._editor.getOption(66);let n=Math.floor(i/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=i),this._onClick.fire({x:e.posx,y:t+o+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(s.ko(this._domNode,"mouseenter",(e=>{1===(1&e.buttons)&&this.hide()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(64)&&!this._editor.getOption(64).enabled&&this.hide()}))),this._register(c.Jh.runAndSubscribe(t.onDidUpdateKeybindings,(()=>{var e,o,i,n;this._preferredKbLabel=null!==(o=null===(e=t.lookupKeybinding(u.pR))||void 0===e?void 0:e.getLabel())&&void 0!==o?o:void 0,this._quickFixKbLabel=null!==(n=null===(i=t.lookupKeybinding(u.pQ))||void 0===i?void 0:i.getLabel())&&void 0!==n?n:void 0,this._updateLightBulbTitleAndIcon()})))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(e,t,o){if(e.validActions.length<=0)return this.hide();const s=this._editor.getOptions();if(!s.get(64).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:a,column:c}=r.validatePosition(o),d=r.getOptions().tabSize,l=s.get(50),u=r.getLineContent(a),g=(0,h.G)(u,d),p=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let m=a;if(!(l.spaceWidth*g>22))if(a>1&&!p(a-1))m-=1;else if(p(a+1)){if(c*l.spaceWidth<22)return this.hide()}else m+=1;this.state=new n.Showing(e,t,o,{position:{lineNumber:m,column:1},preference:i._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==n.Hidden&&(this.state=n.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){1===this.state.type&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...l.L.asClassNameArray(a.W.lightBulb)),this._domNode.classList.add(...l.L.asClassNameArray(a.W.lightbulbAutofix)),this._preferredKbLabel)?this.title=g.kg("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):(this._domNode.classList.remove(...l.L.asClassNameArray(a.W.lightbulbAutofix)),this._domNode.classList.add(...l.L.asClassNameArray(a.W.lightBulb)),this._quickFixKbLabel?this.title=g.kg("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=g.kg("codeAction","Show Code Actions"))}set title(e){this._domNode.title=e}};f.ID="editor.contrib.lightbulbWidget",f._posPref=[0],f=i=m([_(1,p.b)],f)},55542:(e,t,o)=>{o.d(t,{QA:()=>l,Vi:()=>h,aF:()=>c,fo:()=>i,gB:()=>r,uJ:()=>a});var i,n=o(81530),s=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class r{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+r.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new r(this.value+r.sep+e)}}function a(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((o=>d(t,o,e.include))))&&!(!e.includeSourceActions&&r.Source.contains(t)))}function c(e,t){const o=t.kind?new r(t.kind):void 0;return!!(!e.include||o&&e.include.contains(o))&&(!(e.excludes&&o&&e.excludes.some((t=>d(o,t,e.include))))&&(!(!e.includeSourceActions&&o&&r.Source.contains(o))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function d(e,t,o){return!!t.contains(e)&&(!o||!t.contains(o))}r.sep=".",r.None=new r("@@none@@"),r.Empty=new r(""),r.QuickFix=new r("quickfix"),r.Refactor=new r("refactor"),r.RefactorExtract=r.Refactor.append("extract"),r.RefactorInline=r.Refactor.append("inline"),r.RefactorMove=r.Refactor.append("move"),r.RefactorRewrite=r.Refactor.append("rewrite"),r.Notebook=new r("notebook"),r.Source=new r("source"),r.SourceOrganizeImports=r.Source.append("organizeImports"),r.SourceFixAll=r.Source.append("fixAll"),r.SurroundWith=r.Refactor.append("surround"),function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(i||(i={}));class l{static fromUser(e,t){return e&&"object"===typeof e?new l(l.getKindFromUser(e,t.kind),l.getApplyFromUser(e,t.apply),l.getPreferredUser(e)):new l(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"===typeof e.kind?new r(e.kind):t}static getPreferredUser(e){return"boolean"===typeof e.preferred&&e.preferred}constructor(e,t,o){this.kind=e,this.apply=t,this.preferred=o}}class h{constructor(e,t,o){this.action=e,this.provider=t,this.highlightRange=o}resolve(e){var t;return s(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(o){(0,n.M_)(o)}t&&(this.action.edit=t.edit)}return this}))}}},87876:(e,t,o)=>{var i=o(46661),n=o(81530),s=o(24085),r=o(58337),a=o(17093),c=o(49717),d=o(53137),l=o(45486),h=o(24796),u=o(45375),g=o(86815),p=o(88976),m=o(32709),_=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class f{constructor(){this.lenses=[],this._disposables=new s.Cm}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const o of e.lenses)this.lenses.push({symbol:o,provider:t})}}function v(e,t,o){return _(this,void 0,void 0,(function*(){const i=e.ordered(t),s=new Map,r=new f,a=i.map(((e,i)=>_(this,void 0,void 0,(function*(){s.set(e,i);try{const i=yield Promise.resolve(e.provideCodeLenses(t,o));i&&r.add(i,e)}catch(a){(0,n.M_)(a)}}))));return yield Promise.all(a),r.lenses=r.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:s.get(e.provider)<s.get(t.provider)?-1:s.get(e.provider)>s.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),r}))}p.w.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];let[r,a]=o;(0,h.j)(u.r.isUri(r)),(0,h.j)("number"===typeof a||!a);const{codeLensProvider:c}=e.get(m.u),d=e.get(g.S).getModel(r);if(!d)throw(0,n.Qg)();const p=[],_=new s.Cm;return v(c,d,l.X.None).then((e=>{_.add(e);const t=[];for(const o of e.lenses)void 0===a||null===a||Boolean(o.symbol.command)?p.push(o.symbol):a-- >0&&o.provider.resolveCodeLens&&t.push(Promise.resolve(o.provider.resolveCodeLens(d,o.symbol,l.X.None)).then((e=>p.push(e||o.symbol))));return Promise.all(t)})).then((()=>p)).finally((()=>{setTimeout((()=>_.dispose()),100)}))}));var C=o(56637),b=o(19271),k=o(22152),y=o(67211),w=o(13024),S=o(51296),x=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},L=function(e,t){return function(o,i){t(o,i,e)}};const D=(0,w.u1)("ICodeLensCache");class P{constructor(e,t){this.lineCount=e,this.data=t}}let A=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new b.qK(20,.75);(0,i.cx)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",o=e.get(t,1,"{}");this._deserialize(o),C.Jh.once(e.onWillSaveState)((o=>{o.reason===S.LP.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const o=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new f;i.add({lenses:o,dispose:()=>{}},this._fakeProvider);const n=new P(e.getLineCount(),i);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,o]of this._cache){const i=new Set;for(const e of o.data.lenses)i.add(e.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const o=t[e],i=[];for(const e of o.lines)i.push({range:new k.Q(e,1,e,11)});const n=new f;n.add({lenses:i,dispose(){}},this._fakeProvider),this._cache.set(e,new P(o.lineCount,n))}}catch(t){}}};A=x([L(0,S.CS)],A),(0,y.v)(D,A,1);var N=o(53028),M=o(57891),I=o(27141);class E{constructor(e,t,o){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class R{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-".concat(R._idPool++),this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const o=[];let i=!1;for(let n=0;n<e.length;n++){const t=e[n];if(t&&(i=!0,t.command)){const i=(0,M.n)(t.command.title.trim());t.command.id?(o.push(N.$("a",{id:String(n),title:t.command.tooltip,role:"button"},...i)),this._commands.set(String(n),t.command)):o.push(N.$("span",{title:t.command.tooltip},...i)),n+1<e.length&&o.push(N.$("span",void 0,"\xa0|\xa0"))}}i?(N.Ln(this._domNode,...o),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):N.Ln(this._domNode,N.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}R._idPool=0;class O{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let o=0,i=t.length;o<i;o++)this._addDecorationsCallbacks[o](t[o])}}const F=I.kI.register({collapseOnReplaceEdit:!0,description:"codelens"});class B{constructor(e,t,o,i,n,s){let r;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:F},(e=>this._decorationIds[t]=e)),r=r?k.Q.plusRange(r,e.symbol.range):k.Q.lift(e.symbol.range)})),this._viewZone=new E(r.startLineNumber-1,n,s),this._viewZoneId=i.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new R(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null===t||void 0===t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const o=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!(!o||k.Q.isEmpty(i.range)!==o.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,o)=>{t.addDecoration({range:e.symbol.range,options:F},(e=>this._decorationIds[o]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const o=e[t];if(o){const{symbol:e}=this._data[t];e.command=o.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var T=o(21742),W=o(57876),Q=o(7696),V=o(84141),H=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},j=function(e,t){return function(o,i){t(o,i,e)}},U=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};let z=class{constructor(e,t,o,n,r,a){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=r,this._codeLensCache=a,this._disposables=new s.Cm,this._localToDispose=new s.Cm,this._lenses=[],this._oldCodeLensModels=new s.Cm,this._provideCodeLensDebounce=o.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new i.uC((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle(),e.hasChanged(17)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(66)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(18),i=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight","".concat(e,"px")),n.setProperty("--vscode-editorCodeLens-fontSize","".concat(t,"px")),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),o&&(n.setProperty("--vscode-editorCodeLens-fontFamily",o),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",c.jU.fontFamily)),this._editor.changeViewZones((t=>{for(const o of this._lenses)o.updateHeight(e,t)}))}_localDispose(){var e,t,o;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(o=this._currentCodeLensModel)||void 0===o||o.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&this._localToDispose.add((0,i.EQ)((()=>{const o=this._codeLensCache.get(e);t===o&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const i of this._languageFeaturesService.codeLensProvider.all(e))if("function"===typeof i.onDidChange){const e=i.onDidChange((()=>o.schedule()));this._localToDispose.add(e)}const o=new i.uC((()=>{var t;const s=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.SS)((t=>v(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._provideCodeLensDebounce.update(e,Date.now()-s);o.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.dz)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(o),this._localToDispose.add((0,s.s)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var e;this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=[];let i=-1;this._lenses.forEach((e=>{e.isValid()&&i!==e.getLineNumber()?(e.update(t),i=e.getLineNumber()):o.push(e)}));const n=new O;o.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),o.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{o.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((()=>{o.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,s.s)((()=>{if(this._editor.getModel()){const e=r.D.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null===t||void 0===t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null===t||void 0===t?void 0:t.tagName))for(const o of this._lenses){const e=o.getCommand(t);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),o.schedule()}_disposeAllLenses(e,t){const o=new O;for(const i of this._lenses)i.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),o=[];let i;for(const r of e.lenses){const e=r.symbol.range.startLineNumber;e<1||e>t||(i&&i[i.length-1].symbol.range.startLineNumber===e?i.push(r):(i=[r],o.push(i)))}if(!o.length&&!this._lenses.length)return;const n=r.D.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=new O;let n=0,r=0;for(;r<o.length&&n<this._lenses.length;){const e=o[r][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(o[r],i),r++,n++):(this._lenses.splice(n,0,new B(o[r],this._editor,i,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);for(;r<o.length;)this._lenses.push(new B(o[r],this._editor,i,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;i.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const o=[],s=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(o.push(i),s.push(e))})),0===o.length)return;const r=Date.now(),a=(0,i.SS)((e=>{const i=o.map(((o,i)=>{const r=new Array(o.length),a=o.map(((o,i)=>o.symbol.command||"function"!==typeof o.provider.resolveCodeLens?(r[i]=o.symbol,Promise.resolve(void 0)):Promise.resolve(o.provider.resolveCodeLens(t,o.symbol,e)).then((e=>{r[i]=e}),n.M_)));return Promise.all(a).then((()=>{e.isCancellationRequested||s[i].isDisposed()||s[i].updateCommands(r)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dz)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){var e;return U(this,void 0,void 0,(function*(){return yield this._getCodeLensModelPromise,yield this._resolveCodeLensesPromise,(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel}))}};z.ID="css.editor.codeLens",z=H([j(1,m.u),j(2,V.U),j(3,p.d),j(4,W.Ot),j(5,D)],z),(0,a.HW)(z.ID,z,1),(0,a.Fl)(class extends a.ks{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:d.R.hasCodeLensProvider,label:(0,T.kg)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return U(this,void 0,void 0,(function*(){if(!t.hasModel())return;const o=e.get(Q.GK),i=e.get(p.d),n=e.get(W.Ot),s=t.getSelection().positionLineNumber,r=t.getContribution(z.ID);if(!r)return;const a=yield r.getModel();if(!a)return;const c=[];for(const e of a.lenses)e.symbol.command&&e.symbol.range.startLineNumber===s&&c.push({label:e.symbol.command.title,command:e.symbol.command});if(0===c.length)return;const d=yield o.pick(c,{canPickMany:!1,placeHolder:(0,T.kg)("placeHolder","Select a command")});if(!d)return;let l=d.command;if(a.isDisposed){const e=yield r.getModel(),t=null===e||void 0===e?void 0:e.lenses.find((e=>{var t;return e.symbol.range.startLineNumber===s&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===l.title}));if(!t||!t.symbol.command)return;l=t.symbol.command}try{yield i.executeCommand(l.id,...l.arguments||[])}catch(h){n.error(h)}}))}})},403:(e,t,o)=>{o.d(t,{R:()=>p,j:()=>g});var i=o(45486),n=o(81530),s=o(45375),r=o(22152),a=o(86815),c=o(88976),d=o(32709),l=o(70920),h=o(33802),u=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};function g(e,t,o){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return u(this,void 0,void 0,(function*(){return v(new m,e,t,o,i)}))}function p(e,t,o,i){return Promise.resolve(o.provideColorPresentations(e,t,i))}class m{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const t of n)i.push({colorInfo:t,provider:e});return Array.isArray(n)}))}}class _{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const e of n)i.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(n)}))}}class f{constructor(e){this.colorInfo=e}compute(e,t,o,n){return u(this,void 0,void 0,(function*(){const o=yield e.provideColorPresentations(t,this.colorInfo,i.X.None);return Array.isArray(o)&&n.push(...o),Array.isArray(o)}))}}function v(e,t,o,i,s){return u(this,void 0,void 0,(function*(){let r,a=!1;const c=[],d=t.ordered(o);for(let t=d.length-1;t>=0;t--){const s=d[t];if(s instanceof l.L)r=s;else try{(yield e.compute(s,o,i,c))&&(a=!0)}catch(h){(0,n.M_)(h)}}return a?c:r&&s?(yield e.compute(r,o,i,c),c):[]}))}function C(e,t){const{colorProvider:o}=e.get(d.u),i=e.get(a.S).getModel(t);if(!i)throw(0,n.Qg)();return{model:i,colorProviderRegistry:o,isDefaultColorDecoratorsEnabled:e.get(h.pG).getValue("editor.defaultColorDecorators",{resource:t})}}c.w.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];const[a]=o;if(!(a instanceof s.r))throw(0,n.Qg)();const{model:c,colorProviderRegistry:d,isDefaultColorDecoratorsEnabled:l}=C(e,a);return v(new _,d,c,i.X.None,l)})),c.w.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];const[c,d]=o,{uri:l,range:h}=d;if(!(l instanceof s.r)||!Array.isArray(c)||4!==c.length||!r.Q.isIRange(h))throw(0,n.Qg)();const{model:u,colorProviderRegistry:g,isDefaultColorDecoratorsEnabled:p}=C(e,l),[m,_,b,k]=c;return v(new f({range:h,color:{red:m,green:_,blue:b,alpha:k}}),g,u,i.X.None,p)}))},59116:(e,t,o)=>{var i=o(24085),n=o(17093),s=o(22152),r=o(85045),a=o(38275),c=o(80444),d=o(22624);class l extends i.jG{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(146);if("click"!==t&&"clickAndHover"!==t)return;const o=e.target;if(6!==o.type)return;if(!o.detail.injectedText)return;if(o.detail.injectedText.options.attachedData!==r.nM)return;if(!o.range)return;const i=this._editor.getContribution(c.D.ID);if(i&&!i.isColorPickerVisible){const e=new s.Q(o.range.startLineNumber,o.range.startColumn+1,o.range.endLineNumber,o.range.endColumn+1);i.showContentHover(e,1,0,!1,!0)}}}l.ID="editor.contrib.colorContribution",(0,n.HW)(l.ID,l,2),d.B2.register(a.BJ)},85045:(e,t,o)=>{o.d(t,{mn:()=>w,nM:()=>y});var i,n=o(46661),s=o(77130),r=o(81530),a=o(56637),c=o(24085),d=o(90398),l=o(24939),h=o(12171),u=o(17093),g=o(22152),p=o(27141),m=o(84141),_=o(32709),f=o(403),v=o(33802),C=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},b=function(e,t){return function(o,i){t(o,i,e)}},k=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const y=Object.create({});let w=i=class extends c.jG{constructor(e,t,o,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=o,this._localToDispose=this._register(new c.Cm),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new h.Qn(this._editor),this._decoratorLimitReporter=new S,this._colorDecorationClassRefs=this._register(new c.Cm),this._debounceInformation=n.for(o.colorProvider,"Document Colors",{min:i.RECOMPUTE_TIME}),this._register(e.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(e.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(o.colorProvider.onDidChange((()=>this.updateColors()))),this._register(e.onDidChangeConfiguration((e=>{const t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145);const o=t!==this._isColorDecoratorsEnabled||e.hasChanged(21),i=e.hasChanged(145);(o||i)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),o=this._configurationService.getValue(t);if(o&&"object"===typeof o){const e=o.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new n.pc,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}beginCompute(){return k(this,void 0,void 0,(function*(){this._computePromise=(0,n.SS)((e=>k(this,void 0,void 0,(function*(){const t=this._editor.getModel();if(!t)return[];const o=new d.W(!1),i=yield(0,f.j)(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,o.elapsed()),i}))));try{const e=yield this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,r.dz)(e)}}))}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:p.kI.EMPTY})));this._editor.changeDecorations((o=>{this._decorationsIds=o.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,o)=>this._colorDatas.set(t,e[o])))}))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],o=this._editor.getOption(21);for(let n=0;n<e.length&&t.length<o;n++){const{red:o,green:i,blue:r,alpha:a}=e[n].colorInfo.color,c=new s.bU(Math.round(255*o),Math.round(255*i),Math.round(255*r),a),d="rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", ").concat(c.a,")"),h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:l.S8,inlineClassName:"".concat(h.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:y}}})}const i=o<e.length&&o;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const o=t.getDecorationsInRange(g.Q.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===o.length?null:this._colorDatas.get(o[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};w.ID="editor.contrib.colorDetector",w.RECOMPUTE_TIME=1e3,w=i=C([b(1,v.pG),b(2,_.u),b(3,m.U)],w);class S{constructor(){this._onDidChange=new a.vl,this._computed=0,this._limited=!1}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,u.HW)(w.ID,w,1)},38275:(e,t,o)=>{o.d(t,{BJ:()=>F,WE:()=>T});var i=o(46661),n=o(45486),s=o(77130),r=o(24085),a=o(22152),c=o(403),d=o(85045),l=o(56637);class h{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new l.vl,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new l.vl,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new l.vl,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let o=-1;for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){o=i;break}if(-1===o){const e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){o=t;break}}-1!==o&&o!==this.presentationIndex&&(this.presentationIndex=o,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var u=o(80848),g=o(53028),p=o(23955),m=o(8563),_=o(5829),f=o(81490),v=(o(21341),o(21742)),C=o(67801),b=o(71383);const k=g.$;class y extends r.jG{constructor(e,t,o){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=k(".colorpicker-header"),g.BC(e,this._domNode),this._pickedColorNode=g.BC(this._domNode,k(".picked-color")),g.BC(this._pickedColorNode,k("span.codicon.codicon-color-mode")),this._pickedColorPresentation=g.BC(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const n=(0,v.kg)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=g.BC(this._domNode,k(".original-color")),this._originalColorNode.style.backgroundColor=s.Q1.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(C.WfR)||s.Q1.white,this._register(o.onDidColorThemeChange((e=>{this.backgroundColor=e.getColor(C.WfR)||s.Q1.white}))),this._register(g.ko(this._pickedColorNode,g.Bx.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(g.ko(this._originalColorNode,g.Bx.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=s.Q1.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new w(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=s.Q1.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class w extends r.jG{constructor(e){super(),this._onClicked=this._register(new l.vl),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),g.BC(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),g.BC(this._button,t);g.BC(t,k(".button"+f.L.asCSSSelector((0,b.pU)("color-picker-close",_.W.close,(0,v.kg)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}}class S extends r.jG{constructor(e,t,o){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.pixelRatio=o,this._insertButton=null,this._domNode=k(".colorpicker-body"),g.BC(e,this._domNode),this._saturationBox=new x(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new D(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new P(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new A(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange(e){let{s:t,v:o}=e;const i=this.model.color.hsva;this.model.color=new s.Q1(new s.$J(i.h,t,o,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new s.Q1(new s.$J(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,o=360*(1-e);this.model.color=new s.Q1(new s.$J(360===o?0:o,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class x extends r.jG{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new l.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.vl,this.onColorFlushed=this._onColorFlushed.event,this._domNode=k(".saturation-wrap"),g.BC(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",g.BC(this._domNode,this._canvas),this.selection=k(".saturation-selection"),g.BC(this._domNode,this.selection),this.layout(),this._register(g.ko(this._domNode,g.Bx.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new p._);const t=g.BK(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top)),(()=>null));const o=g.ko(e.target.ownerDocument,g.Bx.POINTER_UP,(()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const o=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,i),this._onDidChange.fire({s:o,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new s.Q1(new s.$J(e.h,1,1,1)),o=this._canvas.getContext("2d"),i=o.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const n=o.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this._canvas.width,this._canvas.height),o.fillStyle=s.Q1.Format.CSS.format(t),o.fill(),o.fillStyle=i,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class L extends r.jG{constructor(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.model=t,this._onDidChange=new l.vl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.vl,this.onColorFlushed=this._onColorFlushed.event,o?(this.domNode=g.BC(e,k(".standalone-strip")),this.overlay=g.BC(this.domNode,k(".standalone-overlay"))):(this.domNode=g.BC(e,k(".strip")),this.overlay=g.BC(this.domNode,k(".overlay"))),this.slider=g.BC(this.domNode,k(".slider")),this.slider.style.top="0px",this._register(g.ko(this.domNode,g.Bx.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new p._),o=g.BK(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangeTop(e.pageY-o.top)),(()=>null));const i=g.ko(e.target.ownerDocument,g.Bx.POINTER_UP,(()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}class D extends L{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:o,b:i}=e.rgba,n=new s.Q1(new s.bU(t,o,i,1)),r=new s.Q1(new s.bU(t,o,i,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(n," 0%, ").concat(r," 100%)")}getValue(e){return e.hsva.a}}class P extends L{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class A extends r.jG{constructor(e){super(),this._onClicked=this._register(new l.vl),this.onClicked=this._onClicked.event,this._button=g.BC(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=e=>{this._onClicked.fire()}}get button(){return this._button}}class N extends m.x{constructor(e,t,o,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.model=t,this.pixelRatio=o,this._register(u.cU.onDidChange((()=>this.layout())));const s=k(".colorpicker-widget");e.appendChild(s),this.header=this._register(new y(s,this.model,i,n)),this.body=this._register(new S(s,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var M=o(83457),I=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},E=function(e,t){return function(o,i){t(o,i,e)}},R=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class O{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let F=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,o){return i.AE.fromPromise(this._computeAsync(e,t,o))}_computeAsync(e,t,o){return R(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=d.mn.get(this._editor);if(!e)return[];for(const o of t){if(!e.isColorDecoration(o))continue;const t=e.getColorData(o.range.getStartPosition());if(t){return[yield W(this,this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}))}renderHoverParts(e,t){return Q(this,this._editor,this._themeService,t,e)}};F=I([E(1,M.Gy)],F);class B{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i}}let T=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}createColorHover(e,t,o){return R(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;if(!d.mn.get(this._editor))return null;const i=yield(0,c.j)(o,this._editor.getModel(),n.X.None);let s=null,r=null;for(const t of i){const o=t.colorInfo;a.Q.containsRange(o.range,e.range)&&(s=o,r=t.provider)}const l=null!==s&&void 0!==s?s:e,h=null!==r&&void 0!==r?r:t,u=!!s;return{colorHover:yield W(this,this._editor.getModel(),l,h),foundInEditor:u}}))}updateEditorModel(e){return R(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=e.model;let o=new a.Q(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(yield H(this._editor.getModel(),t,this._color,o,e),o=V(this._editor,o,t))}))}renderHoverParts(e,t){return Q(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};function W(e,t,o,i){return R(this,void 0,void 0,(function*(){const r=t.getValueInRange(o.range),{red:d,green:l,blue:u,alpha:g}=o.color,p=new s.bU(Math.round(255*d),Math.round(255*l),Math.round(255*u),g),m=new s.Q1(p),_=yield(0,c.R)(t,o,i,n.X.None),f=new h(m,[],0);return f.colorPresentations=_||[],f.guessColorPresentation(m,r),e instanceof F?new O(e,a.Q.lift(o.range),f,i):new B(e,a.Q.lift(o.range),f,i)}))}function Q(e,t,o,i,n){if(0===i.length||!t.hasModel())return r.jG.None;if(n.setMinimumDimensions){const e=t.getOption(66)+8;n.setMinimumDimensions(new g.fg(302,e))}const s=new r.Cm,c=i[0],d=t.getModel(),l=c.model,h=s.add(new N(n.fragment,l,t.getOption(141),o,e instanceof T));n.setColorPicker(h);let u=!1,p=new a.Q(c.range.startLineNumber,c.range.startColumn,c.range.endLineNumber,c.range.endColumn);if(e instanceof T){const t=i[0].model.color;e.color=t,H(d,l,t,p,c),s.add(l.onColorFlushed((t=>{e.color=t})))}else s.add(l.onColorFlushed((e=>R(this,void 0,void 0,(function*(){yield H(d,l,e,p,c),u=!0,p=V(t,p,l,n)})))));return s.add(l.onDidChangeColor((e=>{H(d,l,e,p,c)}))),s.add(t.onDidChangeModelContent((e=>{u?u=!1:(n.hide(),t.focus())}))),s}function V(e,t,o,i){let n,s;if(o.presentation.textEdit){n=[o.presentation.textEdit],s=new a.Q(o.presentation.textEdit.range.startLineNumber,o.presentation.textEdit.range.startColumn,o.presentation.textEdit.range.endLineNumber,o.presentation.textEdit.range.endColumn);const t=e.getModel()._setTrackedRange(null,s,3);e.pushUndoStop(),e.executeEdits("colorpicker",n),s=e.getModel()._getTrackedRange(t)||s}else n=[{range:t,text:o.presentation.label,forceMoveMarkers:!1}],s=t.setEndPosition(t.endLineNumber,t.startColumn+o.presentation.label.length),e.pushUndoStop(),e.executeEdits("colorpicker",n);return o.presentation.additionalTextEdits&&(n=[...o.presentation.additionalTextEdits],e.executeEdits("colorpicker",n),i&&i.hide()),e.pushUndoStop(),s}function H(e,t,o,i,s){return R(this,void 0,void 0,(function*(){const r=yield(0,c.R)(e,{range:i,color:{red:o.rgba.r/255,green:o.rgba.g/255,blue:o.rgba.b/255,alpha:o.rgba.a}},s.provider,n.X.None);t.colorPresentations=r||[]}))}T=I([E(1,M.Gy)],T)},70920:(e,t,o)=>{o.d(t,{L:()=>g});var i=o(77130),n=o(71507),s=o(86815),r=o(46493),a=o(24085),c=o(32709),d=o(87395),l=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},h=function(e,t){return function(o,i){t(o,i,e)}},u=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class g{constructor(e,t){this._editorWorkerClient=new n.Z6(e,!1,"editorWorkerService",t)}provideDocumentColors(e,t){return u(this,void 0,void 0,(function*(){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}))}provideColorPresentations(e,t,o){const n=t.range,s=t.color,r=s.alpha,a=new i.Q1(new i.bU(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),c=r?i.Q1.Format.CSS.formatRGB(a):i.Q1.Format.CSS.formatRGBA(a),d=r?i.Q1.Format.CSS.formatHSL(a):i.Q1.Format.CSS.formatHSLA(a),l=r?i.Q1.Format.CSS.formatHex(a):i.Q1.Format.CSS.formatHexA(a),h=[];return h.push({label:c,textEdit:{range:n,text:c}}),h.push({label:d,textEdit:{range:n,text:d}}),h.push({label:l,textEdit:{range:n,text:l}}),h}}let p=class extends a.jG{constructor(e,t,o){super(),this._register(o.colorProvider.register("*",new g(e,t)))}};p=l([h(0,s.S),h(1,r.JZ),h(2,c.u)],p),(0,d.x)(p)},83306:(e,t,o)=>{var i,n,s=o(17093),r=o(21742),a=o(24085),c=o(38275),d=o(13024),l=o(45610),h=o(34236),u=o(56637),g=o(32709),p=o(53137),m=o(86742),_=o(86815),f=o(46493),v=o(70920),C=o(53028),b=(o(21341),function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r}),k=function(e,t){return function(o,i){t(o,i,e)}},y=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};let w=i=class extends a.jG{constructor(e,t,o,i,n,s,r){super(),this._editor=e,this._modelService=o,this._keybindingService=i,this._instantiationService=n,this._languageFeatureService=s,this._languageConfigurationService=r,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=p.R.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=p.R.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new S(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(e){return e.getContribution(i.ID)}};w.ID="editor.contrib.standaloneColorPickerController",w=i=b([k(1,m.fN),k(2,_.S),k(3,h.b),k(4,d._Y),k(5,g.u),k(6,f.JZ)],w),(0,s.HW)(w.ID,w,1);let S=n=class extends a.jG{constructor(e,t,o,i,n,s,r,a){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=o,this._modelService=n,this._keybindingService=s,this._languageFeaturesService=r,this._languageConfigurationService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new u.vl),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance(c.WE,this._editor),this._position=null===(d=this._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),h=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(C.w5(this._body));this._register(g.onDidBlur((e=>{this.hide()}))),this._register(g.onDidFocus((e=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((e=>{var t;const o=null===(t=e.target.element)||void 0===t?void 0:t.classList;o&&o.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((e=>{this._render(e.value,e.foundInEditor)}))),this._start(h),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return n.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}_start(e){return y(this,void 0,void 0,(function*(){const t=yield this._computeAsync(e);t&&this._onResult.fire(new x(t.result,t.foundInEditor))}))}_computeAsync(e){return y(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},o=yield this._standaloneColorPickerParticipant.createColorHover(t,new v.L(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return o?{result:o.colorHover,foundInEditor:o.foundInEditor}:null}))}_render(e,t){const o=document.createDocumentFragment();let i;const n={fragment:o,statusBar:this._register(new l.L9(this._keybindingService)),setColorPicker:e=>i=e,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[e])),void 0===i)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(o),i.layout();const s=i.body,r=s.saturationBox.domNode.clientWidth,a=s.domNode.clientWidth-r-22-8,c=i.body.enterButton;null===c||void 0===c||c.onClicked((()=>{this.updateEditor(),this.hide()}));const d=i.header;d.pickedColorNode.style.width=r+8+"px";d.originalColorNode.style.width=a+"px";const h=i.header.closeButton;null===h||void 0===h||h.onClicked((()=>{this.hide()})),t&&(c&&(c.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};S.ID="editor.contrib.standaloneColorPickerWidget",S=n=b([k(3,d._Y),k(4,_.S),k(5,h.b),k(6,g.u),k(7,f.JZ)],S);class x{constructor(e,t){this.value=e,this.foundInEditor=t}}var L=o(72152);class D extends s.qO{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:(0,r.kg)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,r.kg)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:L.D8.CommandPalette}]})}runEditorCommand(e,t){var o;null===(o=w.get(t))||void 0===o||o.showOrFocus()}}class P extends s.ks{constructor(){super({id:"editor.action.hideColorPicker",label:(0,r.kg)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:p.R.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var o;null===(o=w.get(t))||void 0===o||o.hide()}}class A extends s.ks{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,r.kg)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:p.R.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var o;null===(o=w.get(t))||void 0===o||o.insertColor()}}(0,s.Fl)(P),(0,s.Fl)(A),(0,L.ug)(D)},28952:(e,t,o)=>{var i=o(1094),n=o(17093),s=o(22152),r=o(53137),a=o(46493),c=o(49748),d=o(45530),l=o(90359);class h{constructor(e,t,o){this.languageConfigurationService=o,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;const i=t.length;if(o+i>e.length)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(o+n),s=t.charCodeAt(n);if(i!==s&&(!(i>=65&&i<=90&&i+32===s)&&!(s>=65&&s<=90&&s+32===i)))return!1}return!0}_createOperationsForBlockComment(e,t,o,i,n,r){const a=e.startLineNumber,c=e.startColumn,d=e.endLineNumber,l=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(d);let p,m=u.lastIndexOf(t,c-1+t.length),_=g.indexOf(o,l-1-o.length);if(-1!==m&&-1!==_)if(a===d){u.substring(m+t.length,_).indexOf(o)>=0&&(m=-1,_=-1)}else{const e=u.substring(m+t.length),i=g.substring(0,_);(e.indexOf(o)>=0||i.indexOf(o)>=0)&&(m=-1,_=-1)}-1!==m&&-1!==_?(i&&m+t.length<u.length&&32===u.charCodeAt(m+t.length)&&(t+=" "),i&&_>0&&32===g.charCodeAt(_-1)&&(o=" "+o,_-=1),p=h._createRemoveBlockCommentOperations(new s.Q(a,m+t.length+1,d,_+1),t,o)):(p=h._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=1===p.length?o:null);for(const s of p)r.addTrackedEditOperation(s.range,s.text)}static _createRemoveBlockCommentOperations(e,t,o){const i=[];return s.Q.isEmpty(e)?i.push(c.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(i.push(c.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(c.k.delete(new s.Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),i}static _createAddBlockCommentOperations(e,t,o,i){const n=[];return s.Q.isEmpty(e)?n.push(c.k.replace(new s.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(c.k.insert(new d.y(e.startLineNumber,e.startColumn),t+(i?" ":""))),n.push(c.k.insert(new d.y(e.endLineNumber,e.endColumn),(i?" ":"")+o))),n}getEditOperations(e,t){const o=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(o);const n=e.getLanguageIdAtPosition(o,i),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const o=t.getInverseEditOperations();if(2===o.length){const e=o[0],t=o[1];return new l.L(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=o[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l.L(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=o(24939);class g{constructor(e,t,o,i,n,s,r){this.languageConfigurationService=e,this._selection=t,this._tabSize=o,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=r||!1}static _gatherPreflightCommentStrings(e,t,o,i){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),s=i.getLanguageConfiguration(n).comments,r=s?s.lineCommentToken:null;if(!r)return null;const a=[];for(let c=0,d=o-t+1;c<d;c++)a[c]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return a}static _analyzeLines(e,t,o,i,n,s,r,a){let c,d=!0;c=0===e||1!==e;for(let l=0,g=i.length;l<g;l++){const a=i[l],g=n+l;if(g===n&&r){a.ignore=!0;continue}const p=o.getLineContent(g),m=u.HG(p);if(-1!==m){if(d=!1,a.ignore=!1,a.commentStrOffset=m,c&&!h._haystackHasNeedleAtOffset(p,a.commentStr,m)&&(0===e?c=!1:1===e||(a.ignore=!0)),c&&t){const e=m+a.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(a.commentStrLength+=1)}}else a.ignore=s,a.commentStrOffset=p.length}if(0===e&&d){c=!1;for(let e=0,t=i.length;e<t;e++)i[e].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:i}}static _gatherPreflightData(e,t,o,i,n,s,r,a){const c=g._gatherPreflightCommentStrings(o,i,n,a);return null===c?{supported:!1}:g._analyzeLines(e,t,o,c,i,s,r,a)}_executeLineComments(e,t,o,i){let n;o.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(g._normalizeInsertionPoint(e,o.lines,i.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));const r=new d.y(i.positionLineNumber,i.positionColumn);for(let a=0,c=n.length;a<c;a++)if(t.addEditOperation(n[a].range,n[a].text),s.Q.isEmpty(n[a].range)&&s.Q.getStartPosition(n[a].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(n[a].text||"").length)}this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,o,i){let n=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let c=e.getLineContent(n).lastIndexOf(o,a-1),d=e.getLineContent(r).indexOf(i,t.endColumn-1-o.length);return-1!==c&&-1===d&&(d=e.getLineContent(n).indexOf(i,c+o.length),r=n),-1===c&&-1!==d&&(c=e.getLineContent(r).lastIndexOf(o,d),n=r),!t.isEmpty()||-1!==c&&-1!==d||(c=e.getLineContent(n).indexOf(o),-1!==c&&(d=e.getLineContent(n).indexOf(i,c+o.length))),-1!==c&&32===e.getLineContent(n).charCodeAt(c+o.length)&&(o+=" "),-1!==d&&32===e.getLineContent(r).charCodeAt(d-1)&&(i=" "+i,d-=1),-1!==c&&-1!==d?h._createRemoveBlockCommentOperations(new s.Q(n,c+o.length+1,r,d+1),o,i):null}_executeBlockComment(e,t,o){e.tokenization.tokenizeIfCheap(o.startLineNumber);const i=e.getLanguageIdAtPosition(o.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,a=n.blockCommentEndToken;let c=this._attemptRemoveBlockComment(e,o,r,a);if(!c){if(o.isEmpty()){const t=e.getLineContent(o.startLineNumber);let i=u.HG(t);-1===i&&(i=t.length),c=h._createAddBlockCommentOperations(new s.Q(o.startLineNumber,i+1,o.startLineNumber,t.length+1),r,a,this._insertSpace)}else c=h._createAddBlockCommentOperations(new s.Q(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),r,a,this._insertSpace);1===c.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(o);for(const s of c)t.addEditOperation(s.range,s.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s.Q(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const i=g._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new l.L(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const o=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.ignore||o.push(c.k.delete(new s.Q(t+i,n.commentStrOffset+1,t+i,n.commentStrOffset+n.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){const o=[],i=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||o.push(c.k.insert(new d.y(t+n,s.commentStrOffset+1),s.commentStr+i))}return o}static nextVisibleColumn(e,t,o,i){return o?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,o,i){let n,s,r=1073741824;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const n=e.getLineContent(o+a);let s=0;for(let e=0,o=t[a].commentStrOffset;s<r&&e<o;e++)s=g.nextVisibleColumn(s,i,9===n.charCodeAt(e),1);s<r&&(r=s)}r=Math.floor(r/i)*i;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const c=e.getLineContent(o+a);let d=0;for(n=0,s=t[a].commentStrOffset;d<r&&n<s;n++)d=g.nextVisibleColumn(d,i,9===c.charCodeAt(n),1);t[a].commentStrOffset=d>r?n-1:n}}}var p=o(21742),m=o(72152);class _ extends n.ks{constructor(e,t){super(t),this._type=e}run(e,t){const o=e.get(a.JZ);if(!t.hasModel())return;const i=[],n=t.getModel().getOptions(),r=t.getOption(23),c=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));c.sort(((e,t)=>s.Q.compareRangesUsingStarts(e.selection,t.selection)));let d=c[0];for(let s=1;s<c.length;s++){const e=c[s];d.selection.endLineNumber===e.selection.startLineNumber&&(d.index<e.index?e.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=e))}for(const s of c)i.push(new g(o,s.selection,n.tabSize,this._type,r.insertSpace,r.ignoreEmptyLines,s.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class f extends n.ks{constructor(){super({id:"editor.action.blockComment",label:p.kg("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:m.D8.MenubarEditMenu,group:"5_insert",title:p.kg({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const o=e.get(a.JZ);if(!t.hasModel())return;const i=t.getOption(23),n=[],s=t.getSelections();for(const r of s)n.push(new h(r,i.insertSpace,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.Fl)(class extends _{constructor(){super(0,{id:"editor.action.commentLine",label:p.kg("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:m.D8.MenubarEditMenu,group:"5_insert",title:p.kg({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Fl)(class extends _{constructor(){super(1,{id:"editor.action.addCommentLine",label:p.kg("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,i.m5)(2089,2081),weight:100}})}}),(0,n.Fl)(class extends _{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p.kg("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,i.m5)(2089,2099),weight:100}})}}),(0,n.Fl)(f)},65981:(e,t,o)=>{var i,n=o(53028),s=o(4834),r=o(7590),a=o(24085),c=o(23478),d=o(17093),l=o(53137),h=o(21742),u=o(72152),g=o(86742),p=o(38237),m=o(34236),_=o(33802),f=o(36144),v=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},C=function(e,t){return function(o,i){t(o,i,e)}};let b=i=class{static get(e){return e.getContribution(i.ID)}constructor(e,t,o,i,s,r,c,d){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=i,this._keybindingService=s,this._menuService=r,this._configurationService=c,this._workspaceContextService=d,this._toDispose=new a.Cm,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),o=e.srcElement;o.shadowRoot&&n.jG(t)===o.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const o of this._editor.getSelections())if(o.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?u.D8.SimpleEditorContext:u.D8.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const o=[],i=this._menuService.createMenu(t,this._contextKeyService),n=i.getActions({arg:e.uri});i.dispose();for(const s of n){const[,t]=s;let i=0;for(const n of t)if(n instanceof u.nI){const t=this._getMenuActions(e,n.item.submenu);t.length>0&&(o.push(new r.YH(n.id,n.label,t)),i++)}else o.push(n),i++;i&&o.push(new r.wv)}return o.length&&o.pop(),o}_doShowContextMenu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._editor.hasModel())return;const o=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=n.BK(this._editor.getDomNode()),o=t.left+e.left,s=t.top+e.top+e.height;i={x:o,y:s}}const r=this._editor.getOption(126)&&!c.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new s.Z4(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const o=e;return"function"===typeof o.getActionViewItem?o.getActionViewItem():new s.Z4(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:o})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;if((0,f.ct)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(72);let o=0;const i=e=>({id:"menu-action-".concat(++o),label:e.label,tooltip:"",class:void 0,enabled:"undefined"===typeof e.enabled||e.enabled,checked:e.checked,run:e.run}),n=(e,t,n,s,a)=>{if(!t)return i({label:e,enabled:t,run:()=>{}});const c=e=>()=>{this._configurationService.updateValue(n,e)},d=[];for(const o of a)d.push(i({label:o.label,checked:s===o.value,run:c(o.value)}));return((e,t)=>new r.YH("menu-action-".concat(++o),e,t,void 0))(e,d)},s=[];s.push(i({label:h.kg("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),s.push(new r.wv),s.push(i({label:h.kg("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),s.push(n(h.kg("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:h.kg("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:h.kg("context.minimap.size.fill","Fill"),value:"fill"},{label:h.kg("context.minimap.size.fit","Fit"),value:"fit"}])),s.push(n(h.kg("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:h.kg("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:h.kg("context.minimap.slider.always","Always"),value:"always"}]));const a=this._editor.getOption(126)&&!c.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:a?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>s,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};b.ID="editor.contrib.contextmenu",b=i=v([C(1,p.Z),C(2,p.l),C(3,g.fN),C(4,m.b),C(5,u.ez),C(6,_.pG),C(7,f.VR)],b);class k extends d.ks{constructor(){super({id:"editor.action.showContextMenu",label:h.kg("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:l.R.textInputFocus,primary:1092,weight:100}})}run(e,t){var o;null===(o=b.get(t))||void 0===o||o.showContextMenu()}}(0,d.HW)(b.ID,b,2),(0,d.Fl)(k)},94997:(e,t,o)=>{var i=o(24085),n=o(17093),s=o(53137),r=o(21742);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class c{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}}class d extends i.jG{static get(e){return e.getContribution(d.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const o=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(o)||(this._undoStack.push(new c(o,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class l extends n.ks{constructor(){super({id:"cursorUndo",label:r.kg("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:s.R.textInputFocus,primary:2099,weight:100}})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorUndo()}}class h extends n.ks{constructor(){super({id:"cursorRedo",label:r.kg("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorRedo()}}(0,n.HW)(d.ID,d,0),(0,n.Fl)(l),(0,n.Fl)(h)},21341:()=>{}}]);
//# sourceMappingURL=monaco-editor-vendor.9fdc3ed8.8977e783.js.map