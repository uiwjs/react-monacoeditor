{"version":3,"file":"static/js/monaco-editor-vendor.9fdc3ed8.c8d1b009.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nclass BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(68 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(68 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(68 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nexport { BracketMatchingController };\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(34 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(34 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(34 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n    static codeActionsPreferredComparator(a, b) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (isNonEmptyArray(a.diagnostics)) {\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n        }\n    }\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const filter = trigger.filter || {};\n        const codeActionContext = {\n            only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n            trigger: trigger.type,\n        };\n        const cts = new TextModelCancellationTokenSource(model, token);\n        const providers = getCodeActionProviders(registry, model, filter);\n        const disposables = new DisposableStore();\n        const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                progress.report(provider);\n                const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n                if (providedCodeActions) {\n                    disposables.add(providedCodeActions);\n                }\n                if (cts.token.isCancellationRequested) {\n                    return emptyCodeActionsResponse;\n                }\n                const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n                const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n                return {\n                    actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                    documentation\n                };\n            }\n            catch (err) {\n                if (isCancellationError(err)) {\n                    throw err;\n                }\n                onUnexpectedExternalError(err);\n                return emptyCodeActionsResponse;\n            }\n        }));\n        const listener = registry.onDidChange(() => {\n            const newProviders = registry.all(model);\n            if (!equals(newProviders, providers)) {\n                cts.cancel();\n            }\n        });\n        try {\n            const actions = yield Promise.all(promises);\n            const allActions = actions.map(x => x.actions).flat();\n            const allDocumentation = [\n                ...coalesce(actions.map(x => x.documentation)),\n                ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\n            ];\n            return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n        }\n        finally {\n            listener.dispose();\n            cts.dispose();\n        }\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n    var _a, _b, _c;\n    if (model && actionsToShow.length) {\n        for (const provider of registry.all(model)) {\n            if (provider._getAdditionalMenuItems) {\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\n            }\n        }\n    }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(token);\n        if (token.isCancellationRequested) {\n            return;\n        }\n        if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\n            const result = yield bulkEditService.apply(item.action.edit, {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n            if (!result.isApplied) {\n                return;\n            }\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet CodeActionKeybindingResolver = class CodeActionKeybindingResolver {\n    constructor(keybindingService) {\n        this.keybindingService = keybindingService;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n};\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\nCodeActionKeybindingResolver = __decorate([\n    __param(0, IKeybindingService)\n], CodeActionKeybindingResolver);\nexport { CodeActionKeybindingResolver };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CodeActionKind } from '../common/types.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { localize } from '../../../../nls.js';\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\nconst codeActionGroups = Object.freeze([\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix...') },\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move...'), icon: Codicon.wrench },\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With...'), icon: Codicon.symbolSnippet },\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action...'), icon: Codicon.symbolFile },\n    uncategorizedCodeActionGroup,\n]);\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\n    if (!showHeaders) {\n        return inputCodeActions.map((action) => {\n            return {\n                kind: \"action\" /* ActionListItemKind.Action */,\n                item: action,\n                group: uncategorizedCodeActionGroup,\n                disabled: !!action.action.disabled,\n                label: action.action.disabled || action.action.title\n            };\n        });\n    }\n    // Group code actions\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\n    for (const action of inputCodeActions) {\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\n        for (const menuEntry of menuEntries) {\n            if (menuEntry.group.kind.contains(kind)) {\n                menuEntry.actions.push(action);\n                break;\n            }\n        }\n    }\n    const allMenuItems = [];\n    for (const menuEntry of menuEntries) {\n        if (menuEntry.actions.length) {\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\n            for (const action of menuEntry.actions) {\n                allMenuItems.push({\n                    kind: \"action\" /* ActionListItemKind.Action */,\n                    item: action,\n                    group: menuEntry.group,\n                    label: action.action.title,\n                    disabled: !!action.action.disabled,\n                    keybinding: keybindingResolver(action.action),\n                });\n            }\n        }\n    }\n    return allMenuItems;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, keybindingService) {\n        super();\n        this._editor = _editor;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = dom.$('div.lightBulbWidget');\n        this._register(Gesture.ignoreTarget(this._domNode));\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(61 /* EditorOption.lightbulb */) && !this._editor.getOption(61 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._register(Event.runAndSubscribe(keybindingService.onDidUpdateKeybindings, () => {\n            var _a, _b;\n            this._preferredKbLabel = withNullAsUndefined((_a = keybindingService.lookupKeybinding(preferredFixActionId)) === null || _a === void 0 ? void 0 : _a.getLabel());\n            this._quickFixKbLabel = withNullAsUndefined((_b = keybindingService.lookupKeybinding(quickFixActionId)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            this._updateLightBulbTitleAndIcon();\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(61 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(47 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        if (this.state === LightBulbState.Hidden) {\n            return;\n        }\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n            if (this._preferredKbLabel) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n        this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n        if (this._quickFixKbLabel) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\nimport { toMenuItems } from './codeActionMenu.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService, _configurationService, _actionWidgetService, _commandService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._configurationService = _configurationService;\n        this._actionWidgetService = _actionWidgetService;\n        this._commandService = _commandService;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        _CodeActionUi_disposed.set(this, false);\n        this._showDisabled = false;\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.value.update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.value.hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._actionWidgetService.isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const editorDom = this._editor.getDomNode();\n            if (!editorDom) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\n            if (!actionsToShow.length) {\n                return;\n            }\n            const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\n            const delegate = {\n                onSelect: (action, preview) => __awaiter(this, void 0, void 0, function* () {\n                    this.delegate.applyCodeAction(action, /* retrigger */ true, !!preview ? preview : false);\n                    this._actionWidgetService.hide();\n                }),\n                onHide: () => {\n                    var _a;\n                    (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\n                }\n            };\n            this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\n        });\n    }\n    toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n    _shouldShowHeaders() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\n    }\n    _getActionBarActions(actions, at, options) {\n        if (options.fromLightbulb) {\n            return [];\n        }\n        const resultActions = actions.documentation.map((command) => {\n            var _a;\n            return ({\n                id: command.id,\n                label: command.title,\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\n                class: undefined,\n                enabled: true,\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.commandArguments) !== null && _a !== void 0 ? _a : [])); },\n            });\n        });\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\n            resultActions.push(this._showDisabled ? {\n                id: 'hideMoreActions',\n                label: localize('hideMoreActions', 'Hide Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = false;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            } : {\n                id: 'showMoreActions',\n                label: localize('showMoreActions', 'Show Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = true;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            });\n        }\n        return resultActions;\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, IConfigurationService),\n    __param(6, IActionWidgetService),\n    __param(7, ICommandService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from '../common/types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const e = {\n            trigger,\n            selection,\n            position: selection.getStartPosition(),\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(86 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { applyCodeAction, ApplyCodeActionReason, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet CodeActionController = class CodeActionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CodeActionController.ID);\n    }\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(_instantiationService.createInstance(CodeActionUi, editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        })));\n    }\n    update(newState) {\n        this._ui.value.update(newState);\n    }\n    showCodeActions(_trigger, actions, at) {\n        return this._ui.value.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nCodeActionController.ID = 'editor.contrib.codeActionController';\nCodeActionController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], CodeActionController);\nexport { CodeActionController };\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = CodeActionController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nclass QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport { QuickFixAction };\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nclass AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nexport { AutoFixAction };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, CodeActionController, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.showHeaders': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n            default: true,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nclass CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\nexport { CodeActionKind };\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n}\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n    collapseOnReplaceEdit: true,\n    description: 'codelens'\n});\nexport class CodeLensWidget {\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(47 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(63 /* EditorOption.lineHeight */) / this._editor.getOption(49 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(49 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(47 /* EditorOption.fontInfo */);\n        const { style } = this._editor.getContainerDomNode();\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n        if (fontFamily) {\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n        }\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        if (!groups.length && !this._lenses.length) {\n            // Nothing to change\n            return;\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration((e) => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            const updated = prevIsEnabled !== this._isEnabled || e.hasChanged(18 /* EditorOption.colorDecoratorsLimit */);\n            if (updated) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        const limit = this._editor.getOption(18 /* EditorOption.colorDecoratorsLimit */);\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        const limited = limit < colorData.length ? limit : false;\n        this._decoratorLimitReporter.update(colorData.length, limited);\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this._computed = 0;\n        this._limited = false;\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        let presentationIndex = -1;\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                presentationIndex = i;\n                break;\n            }\n        }\n        if (presentationIndex === -1) {\n            // check which color presentation text has same prefix as original text's prefix\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n            for (let i = 0; i < this.colorPresentations.length; i++) {\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n                    presentationIndex = i;\n                    break;\n                }\n            }\n        }\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n            this.presentationIndex = presentationIndex;\n            this._onDidChangePresentation.fire(this.presentation);\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(themeService.onDidColorThemeChange(theme => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(136 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nclass ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nexport { ColorContribution };\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(20 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(20 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(21 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(57 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(121 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(69 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(121 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem, UriList } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService, _progressService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        if (this._configurationService.getValue('editor.experimental.pasteActions.enabled', { resource: model.uri })) {\n            return true;\n        }\n        // TODO: This check is only here to support enabling `ipynb.pasteImagesAsAttachments.enabled` by default\n        return model.uri.scheme === Schemas.vscodeNotebookCell;\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(34 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    if (tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                const providerEdit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('pasteProgressTitle', \"Running paste handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return this.getProviderPasteEdit(providers, dataTransfer, model, selections, tokenSource.token);\n                }, () => {\n                    return tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                if (providerEdit) {\n                    const snippet = typeof providerEdit.insertText === 'string' ? SnippetParser.escape(providerEdit.insertText) : providerEdit.insertText.snippet;\n                    const combinedWorkspaceEdit = {\n                        edits: [\n                            new ResourceTextEdit(model.uri, {\n                                range: Selection.liftSelection(this._editor.getSelection()),\n                                text: snippet,\n                                insertAsSnippet: true,\n                            }),\n                            ...((_d = (_c = providerEdit.additionalEdit) === null || _c === void 0 ? void 0 : _c.edits) !== null && _d !== void 0 ? _d : [])\n                        ]\n                    };\n                    yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor });\n                    return;\n                }\n                yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    getProviderPasteEdit(providers, dataTransfer, model, selections, token) {\n        return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n            for (const provider of providers) {\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (!isSupportedProvider(provider, dataTransfer)) {\n                    continue;\n                }\n                const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, token);\n                if (edit) {\n                    return edit;\n                }\n            }\n            return undefined;\n        }))(), token);\n    }\n    applyDefaultPasteHandler(dataTransfer, metadata, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const textDataTransfer = (_a = dataTransfer.get(Mimes.text)) !== null && _a !== void 0 ? _a : dataTransfer.get('text');\n            if (!textDataTransfer) {\n                return;\n            }\n            const text = yield textDataTransfer.asString();\n            if (token.isCancellationRequested) {\n                return;\n            }\n            this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                text: text,\n                pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                multicursorText: null\n            });\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, IProgressService)\n], CopyPasteController);\nexport { CopyPasteController };\nfunction isSupportedProvider(provider, dataTransfer) {\n    return provider.pasteMimeTypes.some(type => {\n        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n            return [...dataTransfer.values()].some(item => item.asFile());\n        }\n        return dataTransfer.has(type);\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController, 0 /* EditorContributionInstantiation.Eager */); // eager because it listens to events on the container dom node of the editor\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nclass CursorUndoRedoController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport { CursorUndoRedoController };\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","_this","_classCallCheck","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","_createClass","_this2","hasModel","position","getPosition","changeDecorations","accessor","decorationId","removeDecoration","addDecoration","Selection","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","start","end","setSelection","cancelSelectionAnchor","_this3","undefined","dispose","getContribution","ID","IContextKeyService","SetSelectionAnchor","_EditorAction","_inherits","_super","_createSuper","call","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","primary","KeyChord","weight","_accessor","_a","_regeneratorRuntime","mark","_callee","wrap","_context","prev","get","setSelectionAnchor","stop","EditorAction","GoToSelectionAnchor","_EditorAction2","_super2","_callee2","_context2","goToSelectionAnchor","SelectFromAnchorToCursor","_EditorAction3","_super3","_callee3","_context3","selectFromAnchorToCursor","CancelSelectionAnchor","_EditorAction4","_super4","_callee4","_context4","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hcDark","hcLight","nls","JumpToBracketAction","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","BracketsData","brackets","options","_Disposable","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","_brackets","_brackets2","_slicedToArray","open","close","getEndPosition","tmp","push","_recomputeBrackets","_step","newDecorations","newDecorationsLen","_iterator","_createForOfIteratorHelper","s","n","bracketData","err","f","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","Disposable","ModelDecorationOptions","overviewRuler","color","themeColorFromId","OverviewRulerLane","MenuRegistry","MenuId","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","pushUndoStop","executeCommands","MoveCaretLeftAction","_MoveCaretAction","MoveCaretRightAction","_MoveCaretAction2","TransposeLettersAction","mac","lastColumn","endPosition","MoveOperations","middlePosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","register","CutAction","MultiCommand","win","secondary","menuOpts","menuId","when","CopyAction","submenu","original","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","focus","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","codeEditorService","clipboardService","IClipboardService","clipboardText","metadata","pasteOnNewLine","multicursorText","mode","readText","sent","InMemoryClipboardMetadataManager","isFromEmptySelection","trigger","text","ApplyCodeActionReason","getAdditionalDocumentationForShowingActions","codeActionCommandId","refactorCommandId","refactorPreviewCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","actions","documentation","disposables","allActions","_toConsumableArray","codeActionsComparator","validActions","filter","_ref","action","disabled","some","_ref2","fix","kind","CodeActionKind","isPreferred","a","b","_ref3","_ref4","isNonEmptyArray","diagnostics","codeActionsPreferredComparator","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","token","codeActionContext","cts","providers","promises","listener","allDocumentation","only","include","TextModelCancellationTokenSource","getCodeActionProviders","DisposableStore","provider","providedCodeActions","filteredActions","report","provideCodeActions","add","isCancellationRequested","abrupt","filtersAction","getDocumentationFromProvider","CodeActionItem","t0","isCancellationError","onUnexpectedExternalError","onDidChange","newProviders","all","cancel","x","flat","concat","coalesce","finish","providedCodeActionKinds","mayIncludeActionsOfKind","actionsToShow","_b","_c","_getAdditionalMenuItems","delegateYield","item","t1","_marked","entry","currentBest","_step2","_iterator2","contains","_step3","_iterator3","_step4","_iterator4","applyCodeAction","codeActionReason","CancellationToken","bulkEditService","commandService","telemetryService","notificationService","message","IBulkEditService","ICommandService","ITelemetryService","INotificationService","publicLog2","codeActionTitle","codeActionKind","codeActionIsPreferred","reason","edit","edits","quotableLabel","code","respectAutoSaveConfig","OnSave","showPreview","preview","isApplied","executeCommand","asMessage","error","Error","CommandsRegistry","resource","itemResolveCount","_accessor$get","codeActionProvider","validatedRangeOrSelection","codeActionSet","resolving","resolveCount","_context5","URI","illegalArgument","ILanguageFeaturesService","IModelService","validateRange","triggerAction","CodeActionTriggerSource","includeSourceActions","Progress","Math","min","setTimeout","CodeActionKeybindingResolver","keybindingService","allCodeActionBindings","Lazy","getKeybindings","codeActionCommands","indexOf","resolvedKeybinding","commandArgs","assign","CodeActionCommandArgs","binding","bestKeybindingForCodeAction","candidates","candidate","preferred","reduceRight","IKeybindingService","uncategorizedCodeActionGroup","freeze","codeActionGroups","icon","Codicon","toMenuItems","inputCodeActions","showHeaders","keybindingResolver","menuEntries","menuEntry","allMenuItems","keybinding","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","LightBulbWidget","quickFixActionId","preferredFixActionId","_onClick","Emitter","onClick","event","_state","_domNode","dom","$","Gesture","addContentWidget","_assertThisInitialized","_","editorModel","state","getLineCount","hide","addStandardDisposableGenericMouseDownListener","preventDefault","_dom$getDomNodePagePo","getDomNodePagePosition","top","height","lineHeight","pad","floor","fire","posx","y","addDisposableListener","buttons","enabled","Event","onDidUpdateKeybindings","_preferredKbLabel","withNullAsUndefined","lookupKeybinding","getLabel","_quickFixKbLabel","_updateLightBulbTitleAndIcon","_get","_getPrototypeOf","prototype","removeContentWidget","atPosition","getOptions","_model$validatePositi","validatePosition","tabSize","fontInfo","lineContent","getLineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","_this$_domNode$classL3","_this$_domNode$classL4","_this$_domNode$classL","_this$_domNode$classL2","hasAutoFix","classList","remove","ThemeIcon","_CodeActionUi_disposed","__classPrivateFieldSet","receiver","TypeError","has","__classPrivateFieldGet","CodeActionUi","delegate","instantiationService","_configurationService","_actionWidgetService","_commandService","_activeCodeActions","MutableDisposable","_showDisabled","_lightBulbWidget","widget","createInstance","showCodeActionList","includeDisabledActions","fromLightbulb","_resolver","onDidLayoutChange","newState","_d","_e","validActionToApply","invalidAction","rawValue","onUnexpectedError","update","tryGetValidActionToApply","context","getInvalidActionThatWouldHaveBeenApplied","MessageController","showMessage","notAvailableMessage","toCoords","isVisible","autoApply","find","at","editorDom","anchor","getDomNode","onSelect","onHide","show","_shouldShowHeaders","getResolver","_getActionBarActions","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getValue","uri","resultActions","tooltip","class","run","_this3$_commandServic","commandArguments","WeakMap","IInstantiationService","IConfigurationService","IActionWidgetService","_CodeActionModel_isDisposed","CodeActionsState","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","isEqual","cancelAndSet","_selection$getPositio","line","test","Empty","Triggered","_cancellablePromise","catch","emptyCodeActionSet","CodeActionModel","_Disposable2","_registry","_progressService","_this4","_codeActionOracle","_onDidChangeState","onDidChangeState","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","_this5","supportedActions","Array","isArray","join","createCancelablePromise","showWhile","skipNotify","contextKeyForSupportedActions","ContextKeyExpr","keys","RegExp","escapeRegExpCharacters","refactorTrigger","userArgs","codeActionFrom","triggerCodeActionsForEditorSelection","onlyIncludePreferredActions","argsSchema","defaultSnippets","body","enum","enumDescriptions","CodeActionController","markerService","progressService","_instantiationService","languageFeaturesService","_model","_ui","QuickFixAction","Id","AutoFixAction","retrigger","_applyCodeAction","_trigger","closeMessage","triggerPosition","invokeFunction","controller","manualTriggerAtCurrentPosition","IMarkerService","IEditorProgressService","CodeActionCommand","_EditorCommand","EditorCommand","RefactorAction","contextMenuOpts","RefactorPreview","_super5","SourceAction","_super6","OrganizeImportsAction","_EditorAction5","_super7","FixAllAction","_EditorAction6","_super8","_EditorAction7","_super9","registerEditorCommand","Registry","Extensions","registerConfiguration","editorConfigurationBaseNode","scope","other","startsWith","sep","part","providedKind","intersects","excludes","exclude","excludesAction","Source","actionKind","None","QuickFix","Refactor","RefactorExtract","append","RefactorInline","RefactorMove","RefactorRewrite","SourceOrganizeImports","SourceFixAll","SurroundWith","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","resolveCodeAction","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","providerRanks","ordered","Map","provideCodeLenses","_len","_key","assertType","codeLensProvider","_loop","Boolean","resolveCodeLens","finally","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","_fakeProvider","_class","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","WillSaveStateReason","store","_serialize","copyItems","copyModel","toString","delete","create","_step$value","lines","Set","values","JSON","stringify","parse","element","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","createElement","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","animate","children","hasSymbol","lens","renderLabelWithIcons","trim","String","role","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","callback","changeAccessor","resultingDecorations","deltaDecorations","codeLensDecorationOptions","collapseOnReplaceEdit","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_data","_decorationIds","codeLensData","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","withCommands","removeZone","layoutZone","symbols","resolved","getCommand","isValid","CodeLensContribution","_languageFeaturesService","debounceService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_localDispose","_currentCodeLensModel","lineHeightFactor","max","fontSize","codeLensHeight","_this$_getLayoutInfo","_getLayoutInfo","fontFamily","editorFontInfo","style","getContainerDomNode","setProperty","fontFeatureSettings","EDITOR_FONT_DEFAULTS","changeViewZones","updateHeight","_getCodeLensModelPromise","_resolveCodeLensesPromise","cachedLenses","_renderCodeLensSymbols","registration","scheduler","Date","now","put","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","getLineNumber","l","splice","commit","onDidScrollChange","scrollTopChanged","scrollState","StableEditorScrollState","_disposeAllLenses","restore","onMouseDown","tagName","disposableTimeout","cachedLensesNow","decChangeAccessor","lastGroup","_step5","maxLineNumber","groups","_iterator5","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","toResolve","request","computeIfNecessary","resolvePromise","resolvedSymbols","updateCommands","ILanguageFeatureDebounceService","ShowLensesInCurrentLine","quickInputService","codelensController","items","_iterator6","_step6","IQuickInputService","positionLineNumber","pick","canPickMany","getColors","colors","reverse","provideDocumentColors","colorInfo","getColorPresentations","provideColorPresentations","colorProviderRegistry","colorProvider","rawCIs","ci","red","green","blue","alpha","_len2","_key2","_color","presentations","ColorDecorationInjectedTextMarker","ColorDetector","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_decoratorLimitReporter","DecoratorLimitReporter","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isEnabled","isEnabled","onModelChanged","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","beginCompute","sw","StopWatch","elapsed","colorInfos","updateDecorations","updateColorDecorators","colorDatas","decorations","colorData","limit","_colorData$i$colorInf","rgba","RGBA","round","g","ref","createClassNameRef","backgroundColor","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","attachedData","limited","removeDecorations","getDecorationsInRange","_onDidChange","_computed","_limited","computed","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_colorPresentations","colorPresentations","presentation","flushColor","originalText","originalTextPrefix","split","ColorPickerHeader","container","themeService","pickedColorNode","setAttribute","colorBox","Color","getColorTheme","getColor","editorHoverBackground","onDidColorThemeChange","theme","EventType","CLICK","selectNextColorPresentation","toggle","isLighter","textContent","prepend","ColorPickerBody","pixelRatio","saturationBox","SaturationBox","onDidSaturationValueChange","opacityStrip","OpacityStrip","onDidOpacityChange","hueStrip","HueStrip","onDidHueChange","v","hsva","HSVA","h","layout","_Disposable3","canvas","POINTER_DOWN","onPointerDown","monitor","Element","GlobalPointerMoveMonitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","pointerId","pageX","pageY","pointerUpListener","POINTER_UP","stopMonitoring","width","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","_Disposable4","overlay","slider","updateSliderPosition","_this6","onDidChangeTop","_Strip","_this7","_color$rgba","opaque","transparent","background","_Strip2","_this8","ColorPickerWidget","_Widget","_this9","PixelRatio","appendChild","header","Widget","ColorHover","owner","forceShowAtRange","ColorHoverParticipant","_themeService","hoverOrdinal","lineDecorations","AsyncIterableObject","_computeAsync","colorDetector","colorHover","isColorDecoration","getColorData","_createColorHover","_colorInfo$color","guessColorPresentation","hoverParts","fragment","setColorPicker","updateEditorModel","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","executeEdits","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","updateColorPresentations","IThemeService","ColorContribution","mouseEvent","detail","injectedText","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","BlockCommentCommand","insertSpace","languageConfigurationService","_insertSpace","_usedEndToken","startToken","endToken","ops","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","charCodeAt","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","tokenization","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","_createOperationsForBlockComment","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","haystack","needle","offset","needleLength","codeA","codeB","res","EditOperation","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","shouldRemoveComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","startTokenAllowedBeforeColumn","_attemptRemoveBlockComment","firstNonWhitespaceIndex","strings","_gatherPreflightData","supported","_executeLineComments","_executeBlockComment","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","lineData","ignore","commentStrOffset","commentStr","lineCommentToken","commentStrLength","onlyWhitespaceLines","lineContentStartOffset","_haystackHasNeedleAtOffset","commentStrEndOffset","_gatherPreflightCommentStrings","_analyzeLines","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","nextVisibleColumn","CommentLineAction","ILanguageConfigurationService","modelOptions","commentsOptions","index","curr","ToggleCommentLineAction","_CommentLineAction","AddLineCommentAction","_CommentLineAction2","RemoveLineCommentAction","_CommentLineAction3","BlockCommentAction","ContextMenuController","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","hideContextView","onKeyDown","keyCode","stopPropagation","showContextMenu","_showScrollbarContextMenu","posy","hasSelectionAtPosition","menuActions","_getMenuActions","isSimpleWidget","_doShowContextMenu","menu","createMenu","getActions","addedItems","SubmenuItemAction","subActions","SubmenuAction","Separator","pop","oldHoverSetting","updateOptions","hover","useShadowDOM","isIOS","domForShadowRoot","getAnchor","getActionViewItem","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","getKeyBinding","wasCancelled","minimapOptions","lastId","createAction","checked","createEnumAction","configName","configuredValue","createRunner","updateValue","option","createSubmenuAction","renderCharacters","size","showSlider","IContextMenuService","IContextViewService","IMenuService","ShowContextMenu","vscodeClipboardMime","CopyPasteController","_bulkEditService","_clipboardService","handleCopy","handlePaste","scheme","Schemas","clipboardData","arePasteActionsEnabled","ranges","primarySelection","wasFromEmptySelection","getLineLength","documentPasteEditProvider","prepareDocumentPaste","dataTransfer","toVSDataTransfer","handle","generateUuid","setCopyMetadata","promise","results","replace","_currentClipboardItem","dataTransferPromise","setData","rawMetadata","tokenSource","toMergeDataTransfer","providerEdit","snippet","combinedWorkspaceEdit","getData","stopImmediatePropagation","EditorStateCancellationTokenSource","Mimes","readResources","createStringDataTransferItem","UriList","withProgress","location","cancellable","getProviderPasteEdit","insertText","SnippetParser","ResourceTextEdit","insertAsSnippet","additionalEdit","applyDefaultPasteHandler","raceCancellation","isSupportedProvider","provideDocumentPasteEdits","textDataTransfer","asString","pasteMimeTypes","DataTransfers","asFile","IProgressService","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","_applyState","stackElement","setScrollPosition","CursorUndo","cursorUndo","CursorRedo","cursorRedo"],"sourceRoot":""}