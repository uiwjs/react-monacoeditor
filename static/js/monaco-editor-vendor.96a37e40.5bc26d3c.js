"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[23],{43837:function(e,t,i){i.d(t,{G:function(){return vt}});var n=i(37762),o=i(15671),r=i(43144),s=i(97326),a=i(11752),l=i(61120),h=i(60136),d=i(27277),u=i(32959),c=i(96601),g=i(65379),m=i(74146),f=i(97737),v=i(70188),_=i(63835),p=i(56783),y=i(50183),C=i(81535),L=i(29439),N=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;return(0,o.Z)(this,i),(r=t.call(this,e))._viewDomNode=n,r._widgets={},r.domNode=(0,g.X)(document.createElement("div")),C.K.write(r.domNode,1),r.domNode.setClassName("contentWidgets"),r.domNode.setPosition("absolute"),r.domNode.setTop(0),r.overflowingContentWidgetsDomNode=(0,g.X)(document.createElement("div")),C.K.write(r.overflowingContentWidgetsDomNode,2),r.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets"),r}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._widgets={}}},{key:"onConfigurationChanged",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].onConfigurationChanged(e)}return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLineMappingChanged",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesChanged",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesDeleted",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesInserted",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_updateAnchorsViewPositions",value:function(){for(var e=0,t=Object.keys(this._widgets);e<t.length;e++){var i=t[e];this._widgets[i].updateAnchorViewPosition()}}},{key:"addWidget",value:function(e){var t=new w(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t,i,n,o){this._widgets[e.getId()].setPosition(t,i,n,o),this.setShouldRender()}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var i=this._widgets[t];delete this._widgets[t];var n=i.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}},{key:"shouldSuppressMouseDownOnWidget",value:function(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}},{key:"onBeforeRender",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].onBeforeRender(e)}}},{key:"prepareRender",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].prepareRender(e)}}},{key:"render",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].render(e)}}}]),i}(C.E),w=function(){function e(t,i,n){(0,o.Z)(this,e),this._primaryAnchor=new b(null,null),this._secondaryAnchor=new b(null,null),this._context=t,this._viewDomNode=i,this._actual=n,this.domNode=(0,g.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;var r=this._context.configuration.options,s=r.get(140);this._fixedOverflowWidgets=r.get(40),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(64),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}return(0,r.Z)(e,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;if(this._lineHeight=t.get(64),e.hasChanged(140)){var i=t.get(140);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}},{key:"updateAnchorViewPosition",value:function(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}},{key:"_setPosition",value:function(e,t,i){function n(e,t,i){if(!e)return new b(null,null);var n=t.model.validatePosition(e);if(t.coordinatesConverter.modelPositionIsVisible(n)){var o=t.coordinatesConverter.convertModelPositionToViewPosition(n,null!==i&&void 0!==i?i:void 0);return new b(e,o)}return new b(e,null)}this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity)}},{key:"_getMaxWidth",value:function(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}},{key:"setPosition",value:function(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}},{key:"_layoutBoxInViewport",value:function(e,t,i,n){var o=e.top,r=o,s=e.top+e.height,a=o-i,l=r>=i,h=s,d=n.viewportHeight-s>=i,u=e.left;return u+t>n.scrollLeft+n.viewportWidth&&(u=n.scrollLeft+n.viewportWidth-t),u<n.scrollLeft&&(u=n.scrollLeft),{fitsAbove:l,aboveTop:a,fitsBelow:d,belowTop:h,left:u}}},{key:"_layoutHorizontalSegmentInPage",value:function(e,t,i,n){var o=Math.max(15,t.left-n),r=Math.min(t.left+t.width+n,e.width-15),s=t.left+i-window.scrollX;if(s+n>r){var a=s-(r-n);s-=a,i-=a}if(s<o){var l=s-o;s-=l,i-=l}return[i,s]}},{key:"_layoutBoxInPage",value:function(e,t,i,n){var o=e.top-i,r=e.top+e.height,s=u.getDomNodePagePosition(this._viewDomNode.domNode),a=s.top+o-window.scrollY,l=s.top+r-window.scrollY,h=u.getClientArea(document.body),d=this._layoutHorizontalSegmentInPage(h,s,e.left-n.scrollLeft+this._contentLeft,t),c=(0,L.Z)(d,2),g=c[0],m=c[1],f=a>=22,v=l+i<=h.height-22;return this._fixedOverflowWidgets?{fitsAbove:f,aboveTop:Math.max(a,22),fitsBelow:v,belowTop:l,left:m}:{fitsAbove:f,aboveTop:o,fitsBelow:v,belowTop:r,left:g}}},{key:"_prepareRenderWidgetAtExactPositionOverflowing",value:function(e){return new k(e.top,e.left+this._contentLeft)}},{key:"_getAnchorsCoordinates",value:function(e){var t,i;return{primary:n(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:n((null===(t=this._secondaryAnchor.viewPosition)||void 0===t?void 0:t.lineNumber)===(null===(i=this._primaryAnchor.viewPosition)||void 0===i?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function n(t,i,n){if(!t)return null;var o=e.visibleRangeForPosition(t);if(!o)return null;var r=1===t.column&&3===i?0:o.left,s=e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop;return new R(s,r,n)}}},{key:"_reduceAnchorCoordinates",value:function(e,t,i){if(!t)return e;var n=this._context.configuration.options.get(48),o=t.left;return o=o<e.left?Math.max(o,e.left-i+n.typicalFullwidthCharacterWidth):Math.min(o,e.left+i-n.typicalFullwidthCharacterWidth),new R(e.top,o,e.height)}},{key:"_prepareRenderWidget",value:function(e){if(!this._preference||0===this._preference.length)return null;var t=this._getAnchorsCoordinates(e),i=t.primary,o=t.secondary;if(!i)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){var r=null;if("function"===typeof this._actual.beforeRender&&(r=x(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{var s=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(s.width),this._cachedDomNodeOffsetHeight=Math.round(s.height)}}var a,l=this._reduceAnchorCoordinates(i,o,this._cachedDomNodeOffsetWidth);a=this.allowEditorOverflow?this._layoutBoxInPage(l,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(l,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(var h=1;h<=2;h++){var d,u=(0,n.Z)(this._preference);try{for(u.s();!(d=u.n()).done;){var c=d.value;if(1===c){if(!a)return null;if(2===h||a.fitsAbove)return{coordinate:new k(a.aboveTop,a.left),position:1}}else{if(2!==c)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new k(l.top,l.left)),position:0}:{coordinate:new k(l.top,l.left),position:0};if(!a)return null;if(2===h||a.fitsBelow)return{coordinate:new k(a.belowTop,a.left),position:2}}}}catch(g){u.e(g)}finally{u.f()}}return null}},{key:"onBeforeRender",value:function(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRenderWidget(e)}},{key:"render",value:function(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&x(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&x(this._actual.afterRender,this._actual,this._renderData.position)}}]),e}(),b=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this.modelPosition=t,this.viewPosition=i})),k=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this.top=t,this.left=i,this._coordinateBrand=void 0})),R=(0,r.Z)((function e(t,i,n){(0,o.Z)(this,e),this.top=t,this.left=i,this.height=n,this._anchorCoordinateBrand=void 0}));function x(e,t){try{for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return e.call.apply(e,[t].concat(n))}catch(r){return null}}var D=i(13209),S=i(59881),W=i(38102),M=i(41335),A=i(39707),H=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options,a=r.get(140);return n._lineHeight=r.get(64),n._renderLineHighlight=r.get(92),n._renderLineHighlightOnlyWhenFocus=r.get(93),n._contentLeft=a.contentLeft,n._contentWidth=a.contentWidth,n._selectionIsEmpty=!0,n._focused=!1,n._cursorLineNumbers=[1],n._selections=[new c.Y(1,1,1,1)],n._renderData=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_readFromSelections",value:function(){var e=!1,t=this._selections.map((function(e){return e.positionLineNumber}));t.sort((function(e,t){return e-t})),W.fS(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);var i=this._selections.every((function(e){return e.isEmpty()}));return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}},{key:"onThemeChanged",value:function(e){return this._readFromSelections()}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(140);return this._lineHeight=t.get(64),this._renderLineHighlight=t.get(92),this._renderLineHighlightOnlyWhenFocus=t.get(93),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._readFromSelections()}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollWidthChanged||e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}},{key:"prepareRender",value:function(e){if(this._shouldRenderThis()){for(var t=this._renderOne(e),i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length,r=0,s=[],a=i;a<=n;a++){for(var l=a-i;r<o&&this._cursorLineNumbers[r]<a;)r++;r<o&&this._cursorLineNumbers[r]===a?s[l]=t:s[l]=""}this._renderData=s}else this._renderData=null}},{key:"render",value:function(e,t){if(!this._renderData)return"";var i=t-e;return i>=this._renderData.length?"":this._renderData[i]}},{key:"_shouldRenderInMargin",value:function(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},{key:"_shouldRenderInContent",value:function(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}]),i}(D.i),Z=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderOther()?" current-line-both":"");return'<div class="'.concat(t,'" style="width:').concat(Math.max(e.scrollWidth,this._contentWidth),"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return this._shouldRenderInContent()}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInMargin()}}]),i}(H),T=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"");return'<div class="'.concat(t,'" style="width:').concat(this._contentLeft,"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return!0}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInContent()}}]),i}(H);(0,M.Ic)((function(e,t){var i=e.getColor(S.Kh);if(i&&(t.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(i,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(i,"; border: none; }"))),!i||i.isTransparent()||e.defines(S.Mm)){var n=e.getColor(S.Mm);n&&(t.addRule(".monaco-editor .view-overlays .current-line { border: 2px solid ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ".concat(n,"; }")),(0,A.c3)(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}}));var O=i(17429),I=i(2890),P=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options;return n._lineHeight=r.get(64),n._typicalHalfwidthCharacterWidth=r.get(48).typicalHalfwidthCharacterWidth,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o];s.options.className&&(i[n++]=s)}i=i.sort((function(e,t){if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;var i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:O.e.compareRangesUsingStarts(e.range,t.range)}));for(var a=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,h=[],d=a;d<=l;d++){h[d-a]=""}this._renderWholeLineDecorations(e,i,h),this._renderNormalDecorations(e,i,h),this._renderResult=h}},{key:"_renderWholeLineDecorations",value:function(e,t,i){for(var n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=0,a=t.length;s<a;s++){var l=t[s];if(l.options.isWholeLine)for(var h='<div class="cdr '+l.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',d=Math.max(l.range.startLineNumber,o),u=Math.min(l.range.endLineNumber,r),c=d;c<=u;c++){i[c-o]+=h}}}},{key:"_renderNormalDecorations",value:function(e,t,i){for(var n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=null,s=!1,a=null,l=0,h=t.length;l<h;l++){var d=t[l];if(!d.options.isWholeLine){var u=d.options.className,c=Boolean(d.options.showIfCollapsed),g=d.range;c&&1===g.endColumn&&g.endLineNumber!==g.startLineNumber&&(g=new O.e(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),r===u&&s===c&&O.e.areIntersectingOrTouching(a,g)?a=O.e.plusRange(a,g):(null!==r&&this._renderNormalDecoration(e,a,r,s,n,o,i),r=u,s=c,a=g)}}null!==r&&this._renderNormalDecoration(e,a,r,s,n,o,i)}},{key:"_renderNormalDecoration",value:function(e,t,i,n,o,r,s){var a=e.linesVisibleRangesForRange(t,"findMatch"===i);if(a)for(var l=0,h=a.length;l<h;l++){var d=a[l];if(!d.outsideRenderedLine){var u=d.lineNumber-r;if(n&&1===d.ranges.length){var c=d.ranges[0];if(c.width<this._typicalHalfwidthCharacterWidth){var g=Math.round(c.left+c.width/2),m=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));d.ranges[0]=new I.yu(m,this._typicalHalfwidthCharacterWidth)}}for(var f=0,v=d.ranges.length;f<v;f++){var _=d.ranges[f],p='<div class="cdr '+i+'" style="left:'+String(_.left)+"px;width:"+String(_.width)+"px;height:"+o+'px;"></div>';s[u]+=p}}}}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(D.i),E=i(84337),F=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,r,s){var a;(0,o.Z)(this,i);var l=(a=t.call(this,e))._context.configuration.options,h=l.get(99),d=l.get(72),c=l.get(38),m=l.get(102),f={listenOnDomNode:r.domNode,className:"editor-scrollable "+(0,M.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:h.vertical,horizontal:h.horizontal,verticalHasArrows:h.verticalHasArrows,horizontalHasArrows:h.horizontalHasArrows,verticalScrollbarSize:h.verticalScrollbarSize,verticalSliderSize:h.verticalSliderSize,horizontalScrollbarSize:h.horizontalScrollbarSize,horizontalSliderSize:h.horizontalSliderSize,handleMouseWheel:h.handleMouseWheel,alwaysConsumeMouseWheel:h.alwaysConsumeMouseWheel,arrowSize:h.arrowSize,mouseWheelScrollSensitivity:d,fastScrollSensitivity:c,scrollPredominantAxis:m,scrollByPage:h.scrollByPage};a.scrollbar=a._register(new E.$Z(n.domNode,f,a._context.viewLayout.getScrollable())),C.K.write(a.scrollbar.getDomNode(),5),a.scrollbarDomNode=(0,g.X)(a.scrollbar.getDomNode()),a.scrollbarDomNode.setPosition("absolute"),a._setLayout();var v=function(e,t,i){var n={};if(t){var o=e.scrollTop;o&&(n.scrollTop=a._context.viewLayout.getCurrentScrollTop()+o,e.scrollTop=0)}if(i){var r=e.scrollLeft;r&&(n.scrollLeft=a._context.viewLayout.getCurrentScrollLeft()+r,e.scrollLeft=0)}a._context.viewModel.viewLayout.setScrollPosition(n,1)};return a._register(u.addDisposableListener(r.domNode,"scroll",(function(e){return v(r.domNode,!0,!0)}))),a._register(u.addDisposableListener(n.domNode,"scroll",(function(e){return v(n.domNode,!0,!1)}))),a._register(u.addDisposableListener(s.domNode,"scroll",(function(e){return v(s.domNode,!0,!1)}))),a._register(u.addDisposableListener(a.scrollbarDomNode.domNode,"scroll",(function(e){return v(a.scrollbarDomNode.domNode,!0,!1)}))),a}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_setLayout",value:function(){var e=this._context.configuration.options,t=e.get(140);this.scrollbarDomNode.setLeft(t.contentLeft),"right"===e.get(70).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}},{key:"getOverviewRulerLayoutInfo",value:function(){return this.scrollbar.getOverviewRulerLayoutInfo()}},{key:"getDomNode",value:function(){return this.scrollbarDomNode}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(99)||e.hasChanged(72)||e.hasChanged(38)){var t=this._context.configuration.options,i=t.get(99),n=t.get(72),o=t.get(38),r=t.get(102),s={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(s)}return e.hasChanged(140)&&this._setLayout(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,M.m6)(this._context.theme.type)),!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this.scrollbar.renderNow()}}]),i}(C.E),B=(0,r.Z)((function e(t,i,n,r,s){(0,o.Z)(this,e),this._decorationToRenderBrand=void 0,this.startLineNumber=+t,this.endLineNumber=+i,this.className=String(n),this.zIndex=null!==r&&void 0!==r?r:0,this.decorationLane=null!==s&&void 0!==s?s:1})),V=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this.className=t,this.zIndex=i})),z=function(){function e(){(0,o.Z)(this,e),this.lanes=[]}return(0,r.Z)(e,[{key:"add",value:function(e,t){for(;e>=this.lanes.length;)this.lanes.push([]);this.lanes[e].push(t)}},{key:"getLaneDecorations",value:function(e){return e<this.lanes.length?this.lanes[e]:[]}},{key:"isEmpty",value:function(){var e,t=(0,n.Z)(this.lanes);try{for(t.s();!(e=t.n()).done;){if(e.value.length>0)return!1}}catch(i){t.e(i)}finally{t.f()}return!0}}]),e}(),G=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_render",value:function(e,t,i,n){for(var o=[],r=e;r<=t;r++){o[r-e]=new z}if(0===i.length)return o;i.sort((function(e,t){return e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1}));for(var s=null,a=0,l=0,h=i.length;l<h;l++){var d=i[l],u=d.className,c=d.zIndex,g=Math.max(d.startLineNumber,e)-e,m=Math.min(d.endLineNumber,t)-e,f=Math.min(d.decorationLane,n);s===u?(g=Math.max(a+1,g),a=Math.max(a,m)):(s=u,a=m);for(var v=g;v<=a;v++)o[v].add(f,new V(u,c))}return o}}]),i}(D.i),U=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options,a=r.get(140);return n._lineHeight=r.get(64),n._glyphMargin=r.get(55),n._glyphMarginLeft=a.glyphMarginLeft,n._glyphMarginWidth=a.glyphMarginWidth,n._glyphMarginDecorationLaneCount=a.glyphMarginDecorationLaneCount,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(140);return this._lineHeight=t.get(64),this._glyphMargin=t.get(55),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t,i=e.getDecorationsInViewport(),n=[],o=0,r=0,s=i.length;r<s;r++){var a=i[r],l=a.options.glyphMarginClassName,h=a.options.zIndex,d=null===(t=a.options.glyphMargin)||void 0===t?void 0:t.position;l&&(n[o++]=new B(a.range.startLineNumber,a.range.endLineNumber,l,h,d))}return n}},{key:"prepareRender",value:function(e){if(this._glyphMargin){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._getDecorations(e),o=this._render(t,i,n,this._glyphMarginDecorationLaneCount),r=this._lineHeight.toString(),s='" style="width:'+Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount).toString()+"px;height:"+r+"px;",a=[],l=t;l<=i;l++){var h=l-t,d=o[h];if(d.isEmpty())a[h]="";else{for(var u="",c=1;c<=this._glyphMarginDecorationLaneCount;c+=1){var g=d.getLaneDecorations(c);if(0!==g.length){g.sort((function(e,t){return t.zIndex-e.zIndex}));for(var m=g[0],f=[m.className],v=1;v<g.length;v+=1){var _=g[v];if(_.zIndex!==m.zIndex)break;f.push(_.className)}var p=(this._glyphMarginLeft+(c-1)*this._lineHeight).toString();u+='<div class="cgmr codicon '+f.join(" ")+s+"left:"+p+'px;"></div>'}}a[h]=u}}this._renderResult=a}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(G),X=i(93433),q=i(65631),K=i(63021),Y=i(75577),j=i(30582),J=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e,n._primaryPosition=null;var r=n._context.configuration.options,a=r.get(141),l=r.get(48);return n._lineHeight=r.get(64),n._spaceWidth=l.spaceWidth,n._maxIndentLeft=-1===a.wrappingColumn?-1:a.wrappingColumn*l.typicalHalfwidthCharacterWidth,n._bracketPairGuideOptions=r.get(14),n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(141),n=t.get(48);return this._lineHeight=t.get(64),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(14),!0}},{key:"onCursorStateChanged",value:function(e){var t,i=e.selections[0].getPosition();return!(null===(t=this._primaryPosition)||void 0===t?void 0:t.equals(i))&&(this._primaryPosition=i,!0)}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLanguageConfigurationChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){var t,i,o,r;if(this._bracketPairGuideOptions.indentation||!1!==this._bracketPairGuideOptions.bracketPairs){for(var s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,h=this._lineHeight,d=this._primaryPosition,u=this.getGuidesByLine(s,Math.min(a+1,this._context.viewModel.getLineCount()),d),c=[],g=s;g<=a;g++){var m,f=g-s,v=u[f],_="",p=null!==(i=null===(t=e.visibleRangeForPosition(new q.L(g,1)))||void 0===t?void 0:t.left)&&void 0!==i?i:0,y=(0,n.Z)(v);try{for(y.s();!(m=y.n()).done;){var C=m.value,L=-1===C.column?p+(C.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new q.L(g,C.column)).left;if(L>l||this._maxIndentLeft>0&&L>this._maxIndentLeft)break;var N=C.horizontalLine?C.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",w=C.horizontalLine?(null!==(r=null===(o=e.visibleRangeForPosition(new q.L(g,C.horizontalLine.endColumn)))||void 0===o?void 0:o.left)&&void 0!==r?r:L+this._spaceWidth)-L:this._spaceWidth;_+='<div class="core-guide '.concat(C.className," ").concat(N,'" style="left:').concat(L,"px;height:").concat(h,"px;width:").concat(w,'px"></div>')}}catch(b){y.e(b)}finally{y.f()}c[f]=_}this._renderResult=c}else this._renderResult=null}},{key:"getGuidesByLine",value:function(e,t,i){var n=this,o=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?j.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?j.s6.EnabledForActive:j.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,s=0,a=0,l=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&i){var h=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);s=h.startLineNumber,a=h.endLineNumber,l=h.indent}for(var d=this._context.viewModel.model.getOptions().indentSize,u=[],c=e;c<=t;c++){var g=new Array;u.push(g);for(var m=o?o[c-e]:[],f=new W.H9(m),v=r?r[c-e]:0,_=function(){var e=(p-1)*d+1,t=("always"===n._bracketPairGuideOptions.highlightActiveIndentation||0===m.length)&&s<=c&&c<=a&&p===l;g.push.apply(g,(0,X.Z)(f.takeWhile((function(t){return t.visibleColumn<e}))||[]));var i=f.peek();i&&i.visibleColumn===e&&!i.horizontalLine||g.push(new j.UO(e,-1,t?"core-guide-indent-active":"core-guide-indent",null,-1,-1))},p=1;p<=v;p++)_();g.push.apply(g,(0,X.Z)(f.takeWhile((function(e){return!0}))||[]))}return u}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(D.i);function $(e){if(!e||!e.isTransparent())return e}(0,M.Ic)((function(e,t){var i=[{bracketColor:S.zJ,guideColor:S.oV,guideColorActive:S.Qb},{bracketColor:S.Vs,guideColor:S.m$,guideColorActive:S.m3},{bracketColor:S.CE,guideColor:S.DS,guideColorActive:S.To},{bracketColor:S.UP,guideColor:S.lS,guideColorActive:S.L7},{bracketColor:S.r0,guideColor:S.Jn,guideColorActive:S.HV},{bracketColor:S.m1,guideColor:S.YF,guideColorActive:S.f9}],n=new Y.W,o=i.map((function(t){var i,n,o=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),s=e.getColor(t.guideColorActive),a=$(null!==(i=$(r))&&void 0!==i?i:null===o||void 0===o?void 0:o.transparent(.3)),l=$(null!==(n=$(s))&&void 0!==n?n:o);if(a&&l)return{guideColor:a,guideColorActive:l}})).filter(K.$K);if(o.length>0){for(var r=0;r<30;r++){var s=o[r%o.length];t.addRule(".monaco-editor .".concat(n.getInlineClassNameOfLevel(r).replace(/ /g,".")," { --guide-color: ").concat(s.guideColor,"; --guide-color-active: ").concat(s.guideColorActive,"; }"))}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .vertical.".concat(n.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),t.addRule(".monaco-editor .horizontal-top.".concat(n.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),t.addRule(".monaco-editor .horizontal-bottom.".concat(n.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}}));var Q=i(26754),ee=i(90650),te=i(71049),ie=i(88616),ne=i(75861),oe=i(30804),re=i(94763),se=function(){function e(t,i){(0,o.Z)(this,e),this._domNode=t,this.endNode=i,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}return(0,r.Z)(e,[{key:"didDomLayout",get:function(){return this._didDomLayout}},{key:"readClientRect",value:function(){if(!this._clientRectRead){this._clientRectRead=!0;var e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}},{key:"clientRectDeltaLeft",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}},{key:"clientRectScale",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}},{key:"markDidDomLayout",value:function(){this._didDomLayout=!0}}]),e}(),ae=function(){function e(){(0,o.Z)(this,e),this._currentVisibleRange=new O.e(1,1,1,1)}return(0,r.Z)(e,[{key:"getCurrentVisibleRange",value:function(){return this._currentVisibleRange}},{key:"setCurrentVisibleRange",value:function(e){this._currentVisibleRange=e}}]),e}(),le=(0,r.Z)((function e(t,i,n,r,s,a,l){(0,o.Z)(this,e),this.minimalReveal=t,this.lineNumber=i,this.startColumn=n,this.endColumn=r,this.startScrollTop=s,this.stopScrollTop=a,this.scrollType=l,this.type="range",this.minLineNumber=i,this.maxLineNumber=i})),he=(0,r.Z)((function e(t,i,n,r,s){(0,o.Z)(this,e),this.minimalReveal=t,this.selections=i,this.startScrollTop=n,this.stopScrollTop=r,this.scrollType=s,this.type="selections";for(var a=i[0].startLineNumber,l=i[0].endLineNumber,h=1,d=i.length;h<d;h++){var u=i[h];a=Math.min(a,u.startLineNumber),l=Math.max(l,u.endLineNumber)}this.minLineNumber=a,this.maxLineNumber=l})),de=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;(0,o.Z)(this,i),(r=t.call(this,e))._linesContent=n,r._textRangeRestingSpot=document.createElement("div"),r._visibleLines=new ne.G((0,s.Z)(r)),r.domNode=r._visibleLines.domNode;var a=r._context.configuration,l=r._context.configuration.options,h=l.get(48),d=l.get(141);return r._lineHeight=l.get(64),r._typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,r._isViewportWrapping=d.isViewportWrapping,r._revealHorizontalRightPadding=l.get(96),r._cursorSurroundingLines=l.get(27),r._cursorSurroundingLinesStyle=l.get(28),r._canUseLayerHinting=!l.get(30),r._viewLineOptions=new oe.o(a,r._context.theme.type),C.K.write(r.domNode,7),r.domNode.setClassName("view-lines ".concat(re.S)),(0,ie.N)(r.domNode,h),r._maxLineWidth=0,r._asyncUpdateLineWidths=new te.pY((function(){r._updateLineWidthsSlow()}),200),r._asyncCheckMonospaceFontAssumptions=new te.pY((function(){r._checkMonospaceFontAssumptions()}),2e3),r._lastRenderedData=new ae,r._horizontalRevealRequest=null,r._stickyScrollEnabled=l.get(111).enabled,r._maxNumberStickyLines=l.get(111).maxLineCount,r}return(0,r.Z)(i,[{key:"dispose",value:function(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new oe.N(this._viewLineOptions)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(141)&&(this._maxLineWidth=0);var t=this._context.configuration.options,i=t.get(48),n=t.get(141);return this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(96),this._cursorSurroundingLines=t.get(27),this._cursorSurroundingLinesStyle=t.get(28),this._canUseLayerHinting=!t.get(30),this._stickyScrollEnabled=t.get(111).enabled,this._maxNumberStickyLines=t.get(111).maxLineCount,(0,ie.N)(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(140)&&(this._maxLineWidth=0),!0}},{key:"_onOptionsMaybeChanged",value:function(){var e=this._context.configuration,t=new oe.o(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;for(var i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=i;o<=n;o++){this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions)}return!0}return!1}},{key:"onCursorStateChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1,o=t;o<=i;o++)n=this._visibleLines.getVisibleLine(o).onSelectionChanged()||n;return n}},{key:"onDecorationsChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged();return!0}},{key:"onFlushed",value:function(e){var t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onRevealRangeRequest",value:function(e){var t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;var i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new le(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new he(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;var n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,n),!0}},{key:"onScrollChanged",value:function(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){var t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}},{key:"onThemeChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"getPositionFromDOMInfo",value:function(e,t){var i=this._getViewLineDomNode(e);if(null===i)return null;var n=this._getLineNumberFor(i);if(-1===n)return null;if(n<1||n>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(n))return new q.L(n,1);var o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<o||n>r)return null;var s=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t),a=this._context.viewModel.getLineMinColumn(n);return s<a&&(s=a),new q.L(n,s)}},{key:"_getViewLineDomNode",value:function(e){for(;e&&1===e.nodeType;){if(e.className===oe.N.CLASS_NAME)return e;e=e.parentElement}return null}},{key:"_getLineNumberFor",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++){if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n}return-1}},{key:"getLineWidth",value:function(e){var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;var n=new se(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}},{key:"linesVisibleRangesForRange",value:function(e,t){if(this.shouldRender())return null;var i=e.endLineNumber,n=O.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;var o=[],r=0,s=new se(this.domNode.domNode,this._textRangeRestingSpot),a=0;t&&(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q.L(n.startLineNumber,1)).lineNumber);for(var l=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber(),d=n.startLineNumber;d<=n.endLineNumber;d++)if(!(d<l||d>h)){var u=d===n.startLineNumber?n.startColumn:1,c=d===n.endLineNumber?n.endColumn:this._context.viewModel.getLineMaxColumn(d),g=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(d,u,c,s);if(g){if(t&&d<i)a!==(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new q.L(d+1,1)).lineNumber)&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth);o[r++]=new I.u7(g.outsideRenderedLine,d,I.yu.from(g.ranges))}}return this._updateLineWidthsSlowIfDomDidLayout(s),0===r?null:o}},{key:"_visibleRangesForLineRange",value:function(e,t,i){if(this.shouldRender())return null;if(e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;var n=new se(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}},{key:"visibleRangeForPosition",value:function(e){var t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new I.D4(t.outsideRenderedLine,t.ranges[0].left):null}},{key:"_updateLineWidthsFast",value:function(){return this._updateLineWidths(!0)}},{key:"_updateLineWidthsSlow",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidthsSlowIfDomDidLayout",value:function(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}},{key:"_updateLineWidths",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0,r=t;r<=i;r++){var s=this._visibleLines.getVisibleLine(r);!e||s.getWidthIsFast()?n=Math.max(n,s.getWidth(null)):o=!1}return o&&1===t&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}},{key:"_checkMonospaceFontAssumptions",value:function(){for(var e=-1,t=-1,i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=i;o<=n;o++){var r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){var s=r.getWidth(null);s>t&&(t=s,e=o)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(var a=i;a<=n;a++){this._visibleLines.getVisibleLine(a).onMonospaceAssumptionsInvalidated()}}},{key:"prepareRender",value:function(){throw new Error("Not supported")}},{key:"render",value:function(){throw new Error("Not supported")}},{key:"renderText",value:function(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var i=this._computeScrollLeftToReveal(t);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),ee.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled())for(var n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber(),r=n;r<=o;r++){if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");var s=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-s),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}},{key:"_ensureMaxLineWidth",value:function(e){var t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}},{key:"_computeScrollTopToRevealRange",value:function(e,t,i,n,o,r){var s,a,l,h=e.top,d=e.height,u=h+d;if(o&&o.length>0){for(var c=o[0].startLineNumber,g=o[0].endLineNumber,m=1,f=o.length;m<f;m++){var v=o[m];c=Math.min(c,v.startLineNumber),g=Math.max(g,v.endLineNumber)}s=!1,a=this._context.viewLayout.getVerticalOffsetForLineNumber(c),l=this._context.viewLayout.getVerticalOffsetForLineNumber(g)+this._lineHeight}else{if(!n)return-1;s=!0,a=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight}var _,p=0,y=0;if(("mouse"===t||i)&&"default"===this._cursorSurroundingLinesStyle)i||(p=this._lineHeight);else{var C=Math.min(d/this._lineHeight/2,this._cursorSurroundingLines);p=this._stickyScrollEnabled?Math.max(C,this._maxNumberStickyLines)*this._lineHeight:C*this._lineHeight,y=Math.max(0,C-1)*this._lineHeight}if(i||0!==r&&4!==r||(y+=this._lineHeight),(l+=y)-(a-=p)>d){if(!s)return-1;_=a}else if(5===r||6===r)if(6===r&&h<=a&&l<=u)_=h;else{var L=a-Math.max(5*this._lineHeight,.2*d),N=l-d;_=Math.max(N,L)}else if(1===r||2===r)if(2===r&&h<=a&&l<=u)_=h;else{var w=(a+l)/2;_=Math.max(0,w-d/2)}else _=this._computeMinimumScrolling(h,u,a,l,3===r,4===r);return _}},{key:"_computeScrollLeftToReveal",value:function(e){var t=this._context.viewLayout.getCurrentViewport(),o=this._context.configuration.options.get(140),r=t.left,s=r+t.width-o.verticalScrollbarWidth,a=1073741824,l=0;if("range"===e.type){var h=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!h)return null;var d,u=(0,n.Z)(h.ranges);try{for(u.s();!(d=u.n()).done;){var c=d.value;a=Math.min(a,Math.round(c.left)),l=Math.max(l,Math.round(c.left+c.width))}}catch(C){u.e(C)}finally{u.f()}}else{var g,m=(0,n.Z)(e.selections);try{for(m.s();!(g=m.n()).done;){var f=g.value;if(f.startLineNumber!==f.endLineNumber)return null;var v=this._visibleRangesForLineRange(f.startLineNumber,f.startColumn,f.endColumn);if(!v)return null;var _,p=(0,n.Z)(v.ranges);try{for(p.s();!(_=p.n()).done;){var y=_.value;a=Math.min(a,Math.round(y.left)),l=Math.max(l,Math.round(y.left+y.width))}}catch(C){p.e(C)}finally{p.f()}}}catch(C){m.e(C)}finally{m.f()}}return e.minimalReveal||(a=Math.max(0,a-i.HORIZONTAL_EXTRA_PX),l+=this._revealHorizontalRightPadding),"selections"===e.type&&l-a>t.width?null:{scrollLeft:this._computeMinimumScrolling(r,s,a,l),maxHorizontalOffset:l}}},{key:"_computeMinimumScrolling",value:function(e,t,i,n,o,r){o=!!o,r=!!r;var s=(t|=0)-(e|=0);return(n|=0)-(i|=0)<s?o?i:r?Math.max(0,n-s):i<e?i:n>t?Math.max(0,n-s):e:i}}]),i}(C.E);de.HORIZONTAL_EXTRA_PX=30;var ue=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options.get(140);return n._decorationsLeft=r.decorationsLeft,n._decorationsWidth=r.decorationsWidth,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(140);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.linesDecorationsClassName,l=s.options.zIndex;a&&(i[n++]=new B(s.range.startLineNumber,s.range.endLineNumber,a,l));var h=s.options.firstLineDecorationClassName;h&&(i[n++]=new B(s.range.startLineNumber,s.range.startLineNumber,h,l))}return i}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._render(t,i,this._getDecorations(e),1),r='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',s=[],a=t;a<=i;a++){var l,h=a-t,d=o[h].getLaneDecorations(1),u="",c=(0,n.Z)(d);try{for(c.s();!(l=c.n()).done;){u+='<div class="cldr '+l.value.className+r}}catch(g){c.e(g)}finally{c.f()}s[h]=u}this._renderResult=s}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),i}(G),ce=i(40309),ge=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this))._context=e,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.marginClassName,l=s.options.zIndex;a&&(i[n++]=new B(s.range.startLineNumber,s.range.endLineNumber,a,l))}return i}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._render(t,i,this._getDecorations(e),1),r=[],s=t;s<=i;s++){var a,l=s-t,h=o[l].getLaneDecorations(1),d="",u=(0,n.Z)(h);try{for(u.s();!(a=u.n()).done;){d+='<div class="cmdr '+a.value.className+'" style=""></div>'}}catch(c){u.e(c)}finally{u.f()}r[l]=d}this._renderResult=r}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),i}(G),me=i(40052),fe=i(65096),ve=i(31906),_e=i(17683),pe=i(28213),ye=i(53255),Ce=i(19484),Le=i(43980),Ne=i(84100),we=function(){for(var e=[],t=32;t<=126;t++)e.push(t);return e.push(65533),e}(),be=i(72480),ke=function(){function e(t,i){(0,o.Z)(this,e),this.scale=i,this._minimapCharRendererBrand=void 0,this.charDataNormal=e.soften(t,.8),this.charDataLight=e.soften(t,50/60)}return(0,r.Z)(e,[{key:"renderChar",value:function(e,t,i,n,o,r,s,a,l,h,d){var u=1*this.scale,c=2*this.scale,g=d?1:c;if(t+u>e.width||i+g>e.height)console.warn("bad render request outside image data");else for(var m=h?this.charDataLight:this.charDataNormal,f=function(e,t){return(e-=32)<0||e>96?t<=2?(e+96)%96:95:e}(n,l),v=4*e.width,_=s.r,p=s.g,y=s.b,C=o.r-_,L=o.g-p,N=o.b-y,w=Math.max(r,a),b=e.data,k=f*u*c,R=i*v+4*t,x=0;x<g;x++){for(var D=R,S=0;S<u;S++){var W=m[k++]/255*(r/255);b[D++]=_+C*W,b[D++]=p+L*W,b[D++]=y+N*W,b[D++]=w}R+=v}}},{key:"blockRenderChar",value:function(e,t,i,n,o,r,s,a){var l=1*this.scale,h=2*this.scale,d=a?1:h;if(t+l>e.width||i+d>e.height)console.warn("bad render request outside image data");else for(var u=4*e.width,c=o/255*.5,g=r.r,m=r.g,f=r.b,v=g+(n.r-g)*c,_=m+(n.g-m)*c,p=f+(n.b-f)*c,y=Math.max(o,s),C=e.data,L=i*u+4*t,N=0;N<d;N++){for(var w=L,b=0;b<l;b++)C[w++]=v,C[w++]=_,C[w++]=p,C[w++]=y;L+=u}}}],[{key:"soften",value:function(e,t){for(var i=new Uint8ClampedArray(e.length),n=0,o=e.length;n<o;n++)i[n]=(0,be.K)(e[n]*t);return i}}]),e}(),Re=i(13660),xe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},De=function(e){for(var t=new Uint8ClampedArray(e.length/2),i=0;i<e.length;i+=2)t[i>>1]=xe[e[i]]<<4|15&xe[e[i+1]];return t},Se={1:(0,Re.I)((function(){return De("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")})),2:(0,Re.I)((function(){return De("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")}))},We=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,null,[{key:"create",value:function(t,i){return this.lastCreated&&t===this.lastCreated.scale&&i===this.lastFontFamily?this.lastCreated:(n=Se[t]?new ke(Se[t](),t):e.createFromSampleData(e.createSampleData(i).data,t),this.lastFontFamily=i,this.lastCreated=n,n);var n}},{key:"createSampleData",value:function(e){var t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="".concat(16,"px"),t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font="bold ".concat(16,"px ",e),i.textBaseline="middle";var o,r=0,s=(0,n.Z)(we);try{for(s.s();!(o=s.n()).done;){var a=o.value;i.fillText(String.fromCharCode(a),r,8),r+=10}}catch(l){s.e(l)}finally{s.f()}return i.getImageData(0,0,960,16)}},{key:"createFromSampleData",value:function(t,i){if(61440!==t.length)throw new Error("Unexpected source in MinimapCharRenderer");var n=e._downsample(t,i);return new ke(n,i)}},{key:"_downsampleChar",value:function(e,t,i,n,o){for(var r=1*o,s=2*o,a=n,l=0,h=0;h<s;h++)for(var d=h/s*16,u=(h+1)/s*16,c=0;c<r;c++){for(var g=c/r*10,m=(c+1)/r*10,f=0,v=0,_=d;_<u;_++)for(var p=t+3840*Math.floor(_),y=1-(_-Math.floor(_)),C=g;C<m;C++){var L=1-(C-Math.floor(C)),N=p+4*Math.floor(C),w=L*y;v+=w,f+=e[N]*e[N+3]/255*w}var b=f/v;l=Math.max(l,b),i[a++]=(0,be.K)(b)}return l}},{key:"_downsample",value:function(e,t){for(var i=2*t*1*t,n=96*i,o=new Uint8ClampedArray(n),r=0,s=0,a=0,l=0;l<96;l++)a=Math.max(a,this._downsampleChar(e,s,o,r,t)),r+=i,s+=40;if(a>0)for(var h=255/a,d=0;d<n;d++)o[d]*=h;return o}}]),e}(),Me=i(20329),Ae=function(){function e(t,i,n){var r=this;(0,o.Z)(this,e);var s=t.options,a=s.get(138),l=s.get(140),h=l.minimap,d=s.get(48),u=s.get(70);this.renderMinimap=h.renderMinimap,this.size=u.size,this.minimapHeightIsEditorHeight=h.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(101),this.paddingTop=s.get(81).top,this.paddingBottom=s.get(81).bottom,this.showSlider=u.showSlider,this.autohide=u.autohide,this.pixelRatio=a,this.typicalHalfwidthCharacterWidth=d.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(64),this.minimapLeft=h.minimapLeft,this.minimapWidth=h.minimapWidth,this.minimapHeight=l.height,this.canvasInnerWidth=h.minimapCanvasInnerWidth,this.canvasInnerHeight=h.minimapCanvasInnerHeight,this.canvasOuterWidth=h.minimapCanvasOuterWidth,this.canvasOuterHeight=h.minimapCanvasOuterHeight,this.isSampling=h.minimapIsSampling,this.editorHeight=l.height,this.fontScale=h.minimapScale,this.minimapLineHeight=h.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,Re.I)((function(){return We.create(r.fontScale,d.fontFamily)})),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=e._getMinimapBackground(i,this.defaultBackgroundColor),this.foregroundAlpha=e._getMinimapForegroundOpacity(i)}return(0,r.Z)(e,[{key:"equals",value:function(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}],[{key:"_getMinimapBackground",value:function(e,t){var i=e.getColor(Le.kVY);return i?new pe.h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}},{key:"_getMinimapForegroundOpacity",value:function(e){var t=e.getColor(Le.Itd);return t?pe.h._clamp(Math.round(255*t.rgba.a)):255}}]),e}(),He=function(){function e(t,i,n,r,s,a,l,h,d){(0,o.Z)(this,e),this.scrollTop=t,this.scrollHeight=i,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=a,this.topPaddingLineCount=l,this.startLineNumber=h,this.endLineNumber=d}return(0,r.Z)(e,[{key:"getDesiredScrollTopFromDelta",value:function(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}},{key:"getDesiredScrollTopFromTouchLocation",value:function(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}},{key:"intersectWithViewport",value:function(e){var t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}},{key:"getYForLineNumber",value:function(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}}],[{key:"create",value:function(t,i,n,o,r,s,a,l,h,d,u){var c,g=t.pixelRatio,m=t.minimapLineHeight,f=Math.floor(t.canvasInnerHeight/m),v=t.lineHeight;if(t.minimapHeightIsEditorHeight){var _=l*t.lineHeight+t.paddingTop+t.paddingBottom;t.scrollBeyondLastLine&&(_+=Math.max(0,r-t.lineHeight-t.paddingBottom));var p=Math.max(1,Math.floor(r*r/_)),y=Math.max(0,t.minimapHeight-p),C=y/(d-r),L=h*C,N=y>0,w=Math.floor(t.canvasInnerHeight/t.minimapLineHeight);return new e(h,d,N,C,L,p,Math.floor(t.paddingTop/t.lineHeight),1,Math.min(a,w))}if(s&&n!==a){var b=n-i+1;c=Math.floor(b*m/g)}else{var k=r/v;c=Math.floor(k*m/g)}var R,x=Math.floor(t.paddingTop/v),D=Math.floor(t.paddingBottom/v);if(t.scrollBeyondLastLine){var S=r/v;D=Math.max(D,S-1)}D>0?R=(x+a+D-r/v-1)*m/g:R=Math.max(0,(x+a)*m/g-c);var W,M,A=(R=Math.min(t.minimapHeight-c,R))/(d-r),H=h*A;if(f>=x+a+D)return new e(h,d,R>0,A,H,c,x,1,a);W=i>1?i+x:Math.max(1,h/v);var Z=Math.max(1,Math.floor(W-H*g/m));Z<x?(M=x-Z+1,Z=1):(M=0,Z=Math.max(1,Z-x)),u&&u.scrollHeight===d&&(u.scrollTop>h&&(Z=Math.min(Z,u.startLineNumber),M=Math.max(M,u.topPaddingLineCount)),u.scrollTop<h&&(Z=Math.max(Z,u.startLineNumber),M=Math.min(M,u.topPaddingLineCount)));var T=Math.min(a,Z-M+f-1),O=(h-o)/v;return new e(h,d,!0,A,h>t.paddingTop?(i-Z+M+O)*m/g:h/t.paddingTop*(M+O)*m/g,c,M,Z,T)}}]),e}(),Ze=function(){function e(t){(0,o.Z)(this,e),this.dy=t}return(0,r.Z)(e,[{key:"onContentChanged",value:function(){this.dy=-1}},{key:"onTokensChanged",value:function(){this.dy=-1}}]),e}();Ze.INVALID=new Ze(-1);var Te=function(){function e(t,i,n){(0,o.Z)(this,e),this.renderedLayout=t,this._imageData=i,this._renderedLines=new ne.F((function(){return Ze.INVALID})),this._renderedLines._set(t.startLineNumber,n)}return(0,r.Z)(e,[{key:"linesEquals",value:function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get().lines,i=0,n=t.length;i<n;i++)if(-1===t[i].dy)return!1;return!0}},{key:"scrollEquals",value:function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}},{key:"_get",value:function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}},{key:"onLinesChanged",value:function(e,t){return this._renderedLines.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){this._renderedLines.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._renderedLines.onLinesInserted(e,t)}},{key:"onTokensChanged",value:function(e){return this._renderedLines.onTokensChanged(e)}}]),e}(),Oe=function(){function e(t,i,n,r){(0,o.Z)(this,e),this._backgroundFillData=e._createBackgroundFillData(i,n,r),this._buffers=[t.createImageData(i,n),t.createImageData(i,n)],this._lastUsedBuffer=0}return(0,r.Z)(e,[{key:"getBuffer",value:function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}}],[{key:"_createBackgroundFillData",value:function(e,t,i){for(var n=i.r,o=i.g,r=i.b,s=i.a,a=new Uint8ClampedArray(e*t*4),l=0,h=0;h<t;h++)for(var d=0;d<e;d++)a[l]=n,a[l+1]=o,a[l+2]=r,a[l+3]=s,l+=4;return a}}]),e}(),Ie=function(){function e(t,i){(0,o.Z)(this,e),this.samplingRatio=t,this.minimapLines=i}return(0,r.Z)(e,[{key:"modelLineToMinimapLine",value:function(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}},{key:"modelLineRangeToMinimapLineRange",value:function(e,t){for(var i=this.modelLineToMinimapLine(e)-1;i>0&&this.minimapLines[i-1]>=e;)i--;for(var n=this.modelLineToMinimapLine(t)-1;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){var o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,n+1]}},{key:"decorationLineRangeToMinimapLineRange",value:function(e,t){var i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}},{key:"onLinesDeleted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length,n=0,o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}},{key:"onLinesInserted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}],[{key:"compute",value:function(t,i,n){if(0===t.renderMinimap||!t.isSampling)return[null,[]];var o=_e.gk.computeContainedMinimapLineCount({viewLineCount:i,scrollBeyondLastLine:t.scrollBeyondLastLine,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:t.editorHeight,lineHeight:t.lineHeight,pixelRatio:t.pixelRatio}).minimapLineCount,r=i/o,s=r/2;if(!n||0===n.minimapLines.length){var a=[];if(a[0]=1,o>1){for(var l=0,h=o-1;l<h;l++)a[l]=Math.round(l*r+s);a[o-1]=i}return[new e(r,a),[]]}for(var d=n.minimapLines,u=d.length,c=[],g=0,m=0,f=1,v=[],_=null,p=0;p<o;p++){for(var y=Math.max(f,Math.round(p*r)),C=Math.max(y,Math.round((p+1)*r));g<u&&d[g]<y;){if(v.length<10){var L=g+1+m;_&&"deleted"===_.type&&_._oldIndex===g-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:g,deleteFromLineNumber:L,deleteToLineNumber:L},v.push(_)),m--}g++}var N=void 0;if(g<u&&d[g]<=C)N=d[g],g++;else if(N=0===p?1:p+1===o?i:Math.round(p*r+s),v.length<10){var w=g+1+m;_&&"inserted"===_.type&&_._i===p-1?_.insertToLineNumber++:(_={type:"inserted",_i:p,insertFromLineNumber:w,insertToLineNumber:w},v.push(_)),m++}c[p]=N,f=N}if(v.length<10)for(;g<u;){var b=g+1+m;_&&"deleted"===_.type&&_._oldIndex===g-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:g,deleteFromLineNumber:b,deleteToLineNumber:b},v.push(_)),m--,g++}else v=[{type:"flush"}];return[new e(r,c),v]}}]),e}(),Pe=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e)).tokensColorTracker=ye.E.getInstance(),n._selections=[],n._minimapSelections=null,n.options=new Ae(n._context.configuration,n._context.theme,n.tokensColorTracker);var r=Ie.compute(n.options,n._context.viewModel.getLineCount(),null),a=(0,L.Z)(r,1)[0];return n._samplingState=a,n._shouldCheckSampling=!1,n._actual=new Ee(e.theme,(0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._actual.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._actual.getDomNode()}},{key:"_onOptionsMaybeChanged",value:function(){var e=new Ae(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}},{key:"onFlushed",value:function(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}},{key:"onLinesChanged",value:function(e){if(this._samplingState){var t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){if(this._samplingState){var t=this._samplingState.onLinesDeleted(e),i=(0,L.Z)(t,2),n=i[0],o=i[1];return n<=o&&this._actual.onLinesChanged(n+1,o-n+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesInserted",value:function(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}},{key:"onScrollChanged",value:function(e){return this._actual.onScrollChanged()}},{key:"onThemeChanged",value:function(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}},{key:"onTokensChanged",value:function(e){if(this._samplingState){var t,i=[],o=(0,n.Z)(e.ranges);try{for(o.s();!(t=o.n()).done;){var r=t.value,s=this._samplingState.modelLineRangeToMinimapLineRange(r.fromLineNumber,r.toLineNumber);s&&i.push({fromLineNumber:s[0],toLineNumber:s[1]})}}catch(a){o.e(a)}finally{o.f()}return!!i.length&&this._actual.onTokensChanged(i)}return this._actual.onTokensChanged(e.ranges)}},{key:"onTokensColorsChanged",value:function(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}},{key:"onZonesChanged",value:function(e){return this._actual.onZonesChanged()}},{key:"prepareRender",value:function(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}},{key:"render",value:function(e){var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));var n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}},{key:"_recreateLineSampling",value:function(){this._minimapSelections=null;var e=Boolean(this._samplingState),t=Ie.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState),i=(0,L.Z)(t,2),o=i[0],r=i[1];if(this._samplingState=o,e&&this._samplingState){var s,a=(0,n.Z)(r);try{for(a.s();!(s=a.n()).done;){var l=s.value;switch(l.type){case"deleted":this._actual.onLinesDeleted(l.deleteFromLineNumber,l.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(l.insertFromLineNumber,l.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}}catch(h){a.e(h)}finally{a.f()}}}},{key:"getLineCount",value:function(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}},{key:"getRealLineCount",value:function(){return this._context.viewModel.getLineCount()}},{key:"getLineContent",value:function(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}},{key:"getLineMaxColumn",value:function(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,i){if(this._samplingState){for(var n=[],o=0,r=t-e+1;o<r;o++)i[o]?n[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}},{key:"getSelections",value:function(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];var e,t=(0,n.Z)(this._selections);try{for(t.s();!(e=t.n()).done;){var i=e.value,o=this._samplingState.decorationLineRangeToMinimapLineRange(i.startLineNumber,i.endLineNumber),r=(0,L.Z)(o,2),s=r[0],a=r[1];this._minimapSelections.push(new c.Y(s,i.startColumn,a,i.endColumn))}}catch(l){t.e(l)}finally{t.f()}}else this._minimapSelections=this._selections;return this._minimapSelections}},{key:"getMinimapDecorationsInViewport",value:function(e,t){var i;if(this._samplingState){var o=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new O.e(o,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new O.e(e,1,t,this._context.viewModel.getLineMaxColumn(t));var s=this._context.viewModel.getMinimapDecorationsInRange(i);if(this._samplingState){var a,l=[],h=(0,n.Z)(s);try{for(h.s();!(a=h.n()).done;){var d=a.value;if(d.options.minimap){var u=d.range,c=this._samplingState.modelLineToMinimapLine(u.startLineNumber),g=this._samplingState.modelLineToMinimapLine(u.endLineNumber);l.push(new Ce.$l(new O.e(c,u.startColumn,g,u.endColumn),d.options))}}}catch(m){h.e(m)}finally{h.f()}return l}return s}},{key:"getOptions",value:function(){return this._context.viewModel.model.getOptions()}},{key:"revealLineNumber",value:function(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new O.e(e,1,e,1),1,0)}},{key:"setScrollTop",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}]),i}(C.E),Ee=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;return(0,o.Z)(this,i),(r=t.call(this))._renderDecorations=!1,r._gestureInProgress=!1,r._theme=e,r._model=n,r._lastRenderData=null,r._buffers=null,r._selectionColor=r._theme.getColor(Le.ov3),r._domNode=(0,g.X)(document.createElement("div")),C.K.write(r._domNode,8),r._domNode.setClassName(r._getMinimapDomNodeClassName()),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._shadow=(0,g.X)(document.createElement("div")),r._shadow.setClassName("minimap-shadow-hidden"),r._domNode.appendChild(r._shadow),r._canvas=(0,g.X)(document.createElement("canvas")),r._canvas.setPosition("absolute"),r._canvas.setLeft(0),r._domNode.appendChild(r._canvas),r._decorationsCanvas=(0,g.X)(document.createElement("canvas")),r._decorationsCanvas.setPosition("absolute"),r._decorationsCanvas.setClassName("minimap-decorations-layer"),r._decorationsCanvas.setLeft(0),r._domNode.appendChild(r._decorationsCanvas),r._slider=(0,g.X)(document.createElement("div")),r._slider.setPosition("absolute"),r._slider.setClassName("minimap-slider"),r._slider.setLayerHinting(!0),r._slider.setContain("strict"),r._domNode.appendChild(r._slider),r._sliderHorizontal=(0,g.X)(document.createElement("div")),r._sliderHorizontal.setPosition("absolute"),r._sliderHorizontal.setClassName("minimap-slider-horizontal"),r._slider.appendChild(r._sliderHorizontal),r._applyLayout(),r._pointerDownListener=u.addStandardDisposableListener(r._domNode.domNode,u.EventType.POINTER_DOWN,(function(e){if(e.preventDefault(),0!==r._model.options.renderMinimap&&r._lastRenderData)if("proportional"===r._model.options.size){var t=r._model.options.minimapLineHeight,i=r._model.options.canvasInnerHeight/r._model.options.canvasOuterHeight*e.offsetY,n=Math.floor(i/t)+r._lastRenderData.renderedLayout.startLineNumber-r._lastRenderData.renderedLayout.topPaddingLineCount;n=Math.min(n,r._model.getLineCount()),r._model.revealLineNumber(n)}else if(0===e.button&&r._lastRenderData){var o=u.getDomNodePagePosition(r._slider.domNode),s=o.top+o.height/2;r._startSliderDragging(e,s,r._lastRenderData.renderedLayout)}})),r._sliderPointerMoveMonitor=new me.C,r._sliderPointerDownListener=u.addStandardDisposableListener(r._slider.domNode,u.EventType.POINTER_DOWN,(function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&r._lastRenderData&&r._startSliderDragging(e,e.pageY,r._lastRenderData.renderedLayout)})),r._gestureDisposable=Ne.o.addTarget(r._domNode.domNode),r._sliderTouchStartListener=u.addDisposableListener(r._domNode.domNode,Ne.t.Start,(function(e){e.preventDefault(),e.stopPropagation(),r._lastRenderData&&(r._slider.toggleClassName("active",!0),r._gestureInProgress=!0,r.scrollDueToTouchEvent(e))}),{passive:!1}),r._sliderTouchMoveListener=u.addDisposableListener(r._domNode.domNode,Ne.t.Change,(function(e){e.preventDefault(),e.stopPropagation(),r._lastRenderData&&r._gestureInProgress&&r.scrollDueToTouchEvent(e)}),{passive:!1}),r._sliderTouchEndListener=u.addStandardDisposableListener(r._domNode.domNode,Ne.t.End,(function(e){e.preventDefault(),e.stopPropagation(),r._gestureInProgress=!1,r._slider.toggleClassName("active",!1)})),r}return(0,r.Z)(i,[{key:"_startSliderDragging",value:function(e,t,i){var n=this;if(e.target&&e.target instanceof Element){var o=e.pageX;this._slider.toggleClassName("active",!0);var r=function(e,r){var s=u.getDomNodePagePosition(n._domNode.domNode),a=Math.min(Math.abs(r-o),Math.abs(r-s.left),Math.abs(r-s.left-s.width));if(ee.ED&&a>140)n._model.setScrollTop(i.scrollTop);else{var l=e-t;n._model.setScrollTop(i.getDesiredScrollTopFromDelta(l))}};e.pageY!==t&&r(e.pageY,o),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return r(e.pageY,e.pageX)}),(function(){n._slider.toggleClassName("active",!1)}))}}},{key:"scrollDueToTouchEvent",value:function(e){var t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}},{key:"dispose",value:function(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_getMinimapDomNodeClassName",value:function(){var e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_applyLayout",value:function(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}},{key:"_getBuffer",value:function(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Oe(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}},{key:"onDidChangeOptions",value:function(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}},{key:"onSelectionChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onDecorationsChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onFlushed",value:function(){return this._lastRenderData=null,!0}},{key:"onLinesChanged",value:function(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesDeleted(e,t),!0}},{key:"onLinesInserted",value:function(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesInserted(e,t),!0}},{key:"onScrollChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onThemeChanged",value:function(){return this._selectionColor=this._theme.getColor(Le.ov3),this._renderDecorations=!0,!0}},{key:"onTokensChanged",value:function(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}},{key:"onTokensColorsChanged",value:function(){return this._lastRenderData=null,this._buffers=null,!0}},{key:"onZonesChanged",value:function(){return this._lastRenderData=null,!0}},{key:"render",value:function(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var t=He.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}},{key:"renderDecorations",value:function(e){if(this._renderDecorations){this._renderDecorations=!1;var t=this._model.getSelections();t.sort(O.e.compareRangesUsingStarts);var i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((function(e,t){return(e.options.zIndex||0)-(t.options.zIndex||0)}));var n=this._model.options,o=n.canvasInnerWidth,r=n.canvasInnerHeight,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,o,r);var d=new Fe(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(h,t,d,e,s),this._renderDecorationsLineHighlights(h,i,d,e,s);var u=new Fe(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(h,t,u,e,s,l,a,o),this._renderDecorationsHighlights(h,i,u,e,s,l,a,o)}}},{key:"_renderSelectionLineHighlights",value:function(e,t,i,o,r){if(this._selectionColor&&!this._selectionColor.isTransparent()){e.fillStyle=this._selectionColor.transparent(.5).toString();var s,a=0,l=0,h=(0,n.Z)(t);try{for(h.s();!(s=h.n()).done;){var d=s.value,u=o.intersectWithViewport(d);if(u){for(var c=(0,L.Z)(u,2),g=c[0],m=c[1],f=g;f<=m;f++)i.set(f,!0);var v=o.getYForLineNumber(g,r),_=o.getYForLineNumber(m,r);l>=v||(l>a&&e.fillRect(_e.y0,a,e.canvas.width,l-a),a=v),l=_}}}catch(p){h.e(p)}finally{h.f()}l>a&&e.fillRect(_e.y0,a,e.canvas.width,l-a)}}},{key:"_renderDecorationsLineHighlights",value:function(e,t,i,n,o){for(var r=new Map,s=t.length-1;s>=0;s--){var a=t[s],l=a.options.minimap;if(l&&l.position===Me.F5.Inline){var h=n.intersectWithViewport(a.range);if(h){var d=(0,L.Z)(h,2),u=d[0],c=d[1],g=l.getColor(this._theme.value);if(g&&!g.isTransparent()){var m=r.get(g.toString());m||(m=g.transparent(.5).toString(),r.set(g.toString(),m)),e.fillStyle=m;for(var f=u;f<=c;f++)if(!i.has(f)){i.set(f,!0);var v=n.getYForLineNumber(u,o);e.fillRect(_e.y0,v,e.canvas.width,o)}}}}}}},{key:"_renderSelectionsHighlights",value:function(e,t,i,o,r,s,a,l){if(this._selectionColor&&!this._selectionColor.isTransparent()){var h,d=(0,n.Z)(t);try{for(d.s();!(h=d.n()).done;){var u=h.value,c=o.intersectWithViewport(u);if(c)for(var g=(0,L.Z)(c,2),m=g[0],f=g[1],v=m;v<=f;v++)this.renderDecorationOnLine(e,i,u,this._selectionColor,o,v,r,r,s,a,l)}}catch(_){d.e(_)}finally{d.f()}}}},{key:"_renderDecorationsHighlights",value:function(e,t,i,o,r,s,a,l){var h,d=(0,n.Z)(t);try{for(d.s();!(h=d.n()).done;){var u=h.value,c=u.options.minimap;if(c){var g=o.intersectWithViewport(u.range);if(g){var m=(0,L.Z)(g,2),f=m[0],v=m[1],_=c.getColor(this._theme.value);if(_&&!_.isTransparent())for(var p=f;p<=v;p++)switch(c.position){case Me.F5.Inline:this.renderDecorationOnLine(e,i,u.range,_,o,p,r,r,s,a,l);continue;case Me.F5.Gutter:var y=o.getYForLineNumber(p,r);this.renderDecoration(e,_,2,y,2,r);continue}}}}}catch(C){d.e(C)}finally{d.f()}}},{key:"renderDecorationOnLine",value:function(e,t,i,n,o,r,s,a,l,h,d){var u=o.getYForLineNumber(r,a);if(!(u+s<0||u>this._model.options.canvasInnerHeight)){var c=i.startLineNumber,g=i.endLineNumber,m=c===r?i.startColumn:1,f=g===r?i.endColumn:this._model.getLineMaxColumn(r),v=this.getXOffsetForPosition(t,r,m,l,h,d),_=this.getXOffsetForPosition(t,r,f,l,h,d);this.renderDecoration(e,n,v,u,_-v,s)}}},{key:"getXOffsetForPosition",value:function(e,t,i,n,o,r){if(1===i)return _e.y0;if((i-1)*o>=r)return r;var s=e.get(t);if(!s){var a=this._model.getLineContent(t);s=[_e.y0];for(var l=_e.y0,h=1;h<a.length+1;h++){var d=a.charCodeAt(h-1),u=l+(9===d?n*o:ve.K7(d)?2*o:o);if(u>=r){s[h]=r;break}s[h]=u,l=u}e.set(t,s)}return i-1<s.length?s[i-1]:r}},{key:"renderDecoration",value:function(e,t,i,n,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,r)}},{key:"renderLines",value:function(e){var t=e.startLineNumber,n=e.endLineNumber,o=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){var r=this._lastRenderData._get();return new Te(e,r.imageData,r.lines)}var s=this._getBuffer();if(!s)return null;for(var a=i._renderUntouchedLines(s,e.topPaddingLineCount,t,n,o,this._lastRenderData),l=(0,L.Z)(a,3),h=l[0],d=l[1],u=l[2],c=this._model.getMinimapLinesRenderingData(t,n,u),g=this._model.getOptions().tabSize,m=this._model.options.defaultBackgroundColor,f=this._model.options.backgroundColor,v=this._model.options.foregroundAlpha,_=this._model.tokensColorTracker,p=_.backgroundIsLight(),y=this._model.options.renderMinimap,C=this._model.options.charRenderer(),N=this._model.options.fontScale,w=this._model.options.minimapCharWidth,b=(1===y?2:3)*N,k=o>b?Math.floor((o-b)/2):0,R=f.a/255,x=new pe.h(Math.round((f.r-m.r)*R+m.r),Math.round((f.g-m.g)*R+m.g),Math.round((f.b-m.b)*R+m.b),255),D=e.topPaddingLineCount*o,S=[],W=0,M=n-t+1;W<M;W++)u[W]&&i._renderLine(s,x,f.a,p,y,w,_,v,C,D,k,g,c[W],N,o),S[W]=new Ze(D),D+=o;var A=-1===h?0:h,H=(-1===d?s.height:d)-A;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,A,s.width,H),new Te(e,s,S)}}],[{key:"_renderUntouchedLines",value:function(e,t,i,n,o,r){var s=[];if(!r){for(var a=0,l=n-i+1;a<l;a++)s[a]=!0;return[-1,-1,s]}for(var h=r._get(),d=h.imageData.data,u=h.rendLineNumberStart,c=h.lines,g=c.length,m=e.width,f=e.data,v=(n-i+1)*o*m*4,_=-1,p=-1,y=-1,C=-1,L=-1,N=-1,w=t*o,b=i;b<=n;b++){var k=b-i,R=b-u,x=R>=0&&R<g?c[R].dy:-1;if(-1!==x){var D=x*m*4,S=(x+o)*m*4,W=w*m*4,M=(w+o)*m*4;C===D&&N===W?(C=S,N=M):(-1!==y&&(f.set(d.subarray(y,C),L),-1===_&&0===y&&y===L&&(_=C),-1===p&&C===v&&y===L&&(p=y)),y=D,C=S,L=W,N=M),s[k]=!1,w+=o}else s[k]=!0,w+=o}return-1!==y&&(f.set(d.subarray(y,C),L),-1===_&&0===y&&y===L&&(_=C),-1===p&&C===v&&y===L&&(p=y)),[-1===_?-1:_/(4*m),-1===p?-1:p/(4*m),s]}},{key:"_renderLine",value:function(e,t,i,n,o,r,s,a,l,h,d,u,c,g,m){for(var f=c.content,v=c.tokens,_=e.width-r,p=1===m,y=_e.y0,C=0,L=0,N=0,w=v.getCount();N<w;N++)for(var b=v.getEndOffset(N),k=v.getForeground(N),R=s.getColor(k);C<b;C++){if(y>_)return;var x=f.charCodeAt(C);if(9===x){var D=u-(C+L)%u;L+=D-1,y+=D*r}else if(32===x)y+=r;else for(var S=ve.K7(x)?2:1,W=0;W<S;W++)if(2===o?l.blockRenderChar(e,y,h+d,R,a,t,i,p):l.renderChar(e,y,h+d,x,R,a,t,i,g,n,p),(y+=r)>_)return}}}]),i}(fe.JT),Fe=function(){function e(t,i,n){(0,o.Z)(this,e),this._startLineNumber=t,this._endLineNumber=i,this._defaultValue=n,this._values=[];for(var r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=n}return(0,r.Z)(e,[{key:"has",value:function(e){return this.get(e)!==this._defaultValue}},{key:"set",value:function(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}},{key:"get",value:function(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}]),e}(),Be=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options.get(140);return n._widgets={},n._verticalScrollbarWidth=r.verticalScrollbarWidth,n._minimapWidth=r.minimap.minimapWidth,n._horizontalScrollbarHeight=r.horizontalScrollbarHeight,n._editorHeight=r.height,n._editorWidth=r.width,n._domNode=(0,g.X)(document.createElement("div")),C.K.write(n._domNode,4),n._domNode.setClassName("overlayWidgets"),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._widgets={}}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(140);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}},{key:"addWidget",value:function(e){var t=(0,g.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t){var i=this._widgets[e.getId()];return i.preference!==t&&(i.preference=t,this.setShouldRender(),!0)}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}},{key:"_renderWidget",value:function(e){var t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){var i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(t.setTop(0),t.domNode.style.right="50%");else t.setTop("")}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._editorWidth);for(var t=Object.keys(this._widgets),i=0,n=t.length;i<n;i++){var o=t[i];this._renderWidget(this._widgets[o])}}}]),i}(C.E),Ve=i(40476),ze=i(70133),Ge=function(){function e(t,i){(0,o.Z)(this,e);var n=t.options;this.lineHeight=n.get(64),this.pixelRatio=n.get(138),this.overviewRulerLanes=n.get(80),this.renderBorder=n.get(79);var r=i.getColor(S.zw);this.borderColor=r?r.toString():null,this.hideCursor=n.get(57);var s=i.getColor(S.n0);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=i.type;var a=n.get(70),l=a.enabled,h=a.side,d=i.getColor(S.e_),u=ze.RW.getDefaultBackground();this.backgroundColor=d||(l&&"right"===h?u:null);var c=n.get(140).overviewRuler;this.top=c.top,this.right=c.right,this.domWidth=c.width,this.domHeight=c.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);var g=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),m=(0,L.Z)(g,2),f=m[0],v=m[1];this.x=f,this.w=v}return(0,r.Z)(e,[{key:"_initLanes",value:function(e,t,i){var n=t-e;if(i>=3){var o=Math.floor(n/3),r=Math.floor(n/3),s=n-o-r,a=e+o;return[[0,e,a,e,e+o+s,e,a,e],[0,o,s,o+s,r,o+s+r,s+r,o+s+r]]}if(2===i){var l=Math.floor(n/2),h=n-l;return[[0,e,e,e,e+l,e,e,e],[0,l,l,l,h,l+h,l+h,l+h]]}return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]]}},{key:"equals",value:function(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&Ve.Il.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}]),e}(),Ue=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e))._domNode=(0,g.X)(document.createElement("canvas")),n._domNode.setClassName("decorationsOverviewRuler"),n._domNode.setPosition("absolute"),n._domNode.setLayerHinting(!0),n._domNode.setContain("strict"),n._domNode.setAttribute("aria-hidden","true"),n._updateSettings(!1),n._tokensColorTrackerListener=ze.RW.onDidChange((function(e){e.changedColorMap&&n._updateSettings(!0)})),n._cursorPositions=[],n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._tokensColorTrackerListener.dispose()}},{key:"_updateSettings",value:function(e){var t=new Ge(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._updateSettings(!1)}},{key:"onCursorStateChanged",value:function(e){this._cursorPositions=[];for(var t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(q.L.compare),!0}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsOverviewRuler}},{key:"onFlushed",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this._updateSettings(!1)}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._render()}},{key:"_render",value:function(){var e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(e?Ve.Il.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");this._domNode.setDisplay("block");var t=this._settings.canvasWidth,i=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,s=i/this._context.viewLayout.getScrollHeight(),a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,h=l/2|0,d=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(d.fillStyle=Ve.Il.Format.CSS.formatHexA(e),d.fillRect(0,0,t,i)):(d.clearRect(0,0,t,i),d.fillStyle=Ve.Il.Format.CSS.formatHexA(e),d.fillRect(0,0,t,i)):d.clearRect(0,0,t,i);var u=this._settings.x,c=this._settings.w;a.sort(Ce.SQ.cmp);var g,m=(0,n.Z)(a);try{for(m.s();!(g=m.n()).done;){var f=g.value,v=f.color,_=f.data;d.fillStyle=v;for(var p=0,y=0,C=0,L=0,N=_.length/3;L<N;L++){var w=_[3*L],b=_[3*L+1],k=_[3*L+2],R=r.getVerticalOffsetForLineNumber(b)*s|0,x=(r.getVerticalOffsetForLineNumber(k)+o)*s|0;if(x-R<l){var D=(R+x)/2|0;D<h?D=h:D+h>i&&(D=i-h),R=D-h,x=D+h}R>C+1||w!==p?(0!==L&&d.fillRect(u[p],y,c[p],C-y),p=w,y=R,C=x):x>C&&(C=x)}d.fillRect(u[p],y,c[p],C-y)}}catch(B){m.e(B)}finally{m.f()}if(!this._settings.hideCursor&&this._settings.cursorColor){var S=2*this._settings.pixelRatio|0,W=S/2|0,M=this._settings.x[7],A=this._settings.w[7];d.fillStyle=this._settings.cursorColor;for(var H=-100,Z=-100,T=0,O=this._cursorPositions.length;T<O;T++){var I=this._cursorPositions[T],P=r.getVerticalOffsetForLineNumber(I.lineNumber)*s|0;P<W?P=W:P+W>i&&(P=i-W);var E=P-W,F=E+S;E>Z+1?(0!==T&&d.fillRect(M,H,A,Z-H),H=E,Z=F):F>Z&&(Z=F)}d.fillRect(M,H,A,Z-H)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,i),d.stroke(),d.moveTo(0,0),d.lineTo(t,0),d.stroke())}}]),i}(C.E),Xe=i(92578),qe=i(7339),Ke=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var r;(0,o.Z)(this,i),(r=t.call(this))._context=e;var a=r._context.configuration.options;return r._domNode=(0,g.X)(document.createElement("canvas")),r._domNode.setClassName(n),r._domNode.setPosition("absolute"),r._domNode.setLayerHinting(!0),r._domNode.setContain("strict"),r._zoneManager=new Xe.Tj((function(e){return r._context.viewLayout.getVerticalOffsetForLineNumber(e)})),r._zoneManager.setDOMWidth(0),r._zoneManager.setDOMHeight(0),r._zoneManager.setOuterHeight(r._context.viewLayout.getScrollHeight()),r._zoneManager.setLineHeight(a.get(64)),r._zoneManager.setPixelRatio(a.get(138)),r._context.addEventHandler((0,s.Z)(r)),r}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return e.hasChanged(64)&&(this._zoneManager.setLineHeight(t.get(64)),this._render()),e.hasChanged(138)&&(this._zoneManager.setPixelRatio(t.get(138)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}},{key:"onFlushed",value:function(e){return this._render(),!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}},{key:"onZonesChanged",value:function(e){return this._render(),!0}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"setLayout",value:function(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);var t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}},{key:"setZones",value:function(e){this._zoneManager.setZones(e),this._render()}},{key:"_render",value:function(){if(0===this._zoneManager.getOuterHeight())return!1;var e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}},{key:"_renderOneLane",value:function(e,t,i,o){var r,s=0,a=0,l=0,h=(0,n.Z)(t);try{for(h.s();!(r=h.n()).done;){var d=r.value,u=d.colorId,c=d.from,g=d.to;u!==s?(e.fillRect(0,a,o,l-a),s=u,e.fillStyle=i[s],a=c,l=g):l>=c?l=Math.max(l,g):(e.fillRect(0,a,o,l-a),a=c,l=g)}}catch(m){h.e(m)}finally{h.f()}e.fillRect(0,a,o,l-a)}}]),i}(qe.O),Ye=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e)).domNode=(0,g.X)(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("view-rulers"),n._renderedRulers=[];var r=n._context.configuration.options;return n._rulers=r.get(98),n._typicalHalfwidthCharacterWidth=r.get(48).typicalHalfwidthCharacterWidth,n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._rulers=t.get(98),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"prepareRender",value:function(e){}},{key:"_ensureRulersCount",value:function(){var e=this._renderedRulers.length,t=this._rulers.length;if(e!==t)if(e<t)for(var i=this._context.viewModel.model.getOptions().tabSize,n=t-e;n>0;){var o=(0,g.X)(document.createElement("div"));o.setClassName("view-ruler"),o.setWidth(i),this.domNode.appendChild(o),this._renderedRulers.push(o),n--}else for(var r=e-t;r>0;){var s=this._renderedRulers.pop();this.domNode.removeChild(s),r--}}},{key:"render",value:function(e){this._ensureRulersCount();for(var t=0,i=this._rulers.length;t<i;t++){var n=this._renderedRulers[t],o=this._rulers[t];n.setBoxShadow(o.color?"1px 0 0 0 ".concat(o.color," inset"):""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}]),i}(C.E),je=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e))._scrollTop=0,n._width=0,n._updateWidth(),n._shouldShow=!1;var r=n._context.configuration.options.get(99);return n._useShadows=r.useShadows,n._domNode=(0,g.X)(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_updateShouldShow",value:function(){var e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_updateWidth",value:function(){var e=this._context.configuration.options.get(140);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(99);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}},{key:"onScrollChanged",value:function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}]),i}(C.E),Je=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null})),$e=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this.lineNumber=t,this.ranges=i}));function Qe(e){return new Je(e)}function et(e){return new $e(e.lineNumber,e.ranges.map(Qe))}var tt=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._previousFrameVisibleRangesWithStyle=[],n._context=e;var r=n._context.configuration.options;return n._lineHeight=r.get(64),n._roundedSelection=r.get(97),n._typicalHalfwidthCharacterWidth=r.get(48).typicalHalfwidthCharacterWidth,n._selections=[],n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(64),this._roundedSelection=t.get(97),this._typicalHalfwidthCharacterWidth=t.get(48).typicalHalfwidthCharacterWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_visibleRangesHaveGaps",value:function(e){for(var t=0,i=e.length;t<i;t++){if(e[t].ranges.length>1)return!0}return!1}},{key:"_enrichVisibleRangesWithStyle",value:function(e,t,i){var n=this._typicalHalfwidthCharacterWidth/4,o=null,r=null;if(i&&i.length>0&&t.length>0){var s=t[0].lineNumber;if(s===e.startLineNumber)for(var a=0;!o&&a<i.length;a++)i[a].lineNumber===s&&(o=i[a].ranges[0]);var l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(var h=i.length-1;!r&&h>=0;h--)i[h].lineNumber===l&&(r=i[h].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(var d=0,u=t.length;d<u;d++){var c=t[d].ranges[0],g=c.left,m=c.left+c.width,f={top:0,bottom:0},v={top:0,bottom:0};if(d>0){var _=t[d-1].ranges[0].left,p=t[d-1].ranges[0].left+t[d-1].ranges[0].width;it(g-_)<n?f.top=2:g>_&&(f.top=1),it(m-p)<n?v.top=2:_<m&&m<p&&(v.top=1)}else o&&(f.top=o.startStyle.top,v.top=o.endStyle.top);if(d+1<u){var y=t[d+1].ranges[0].left,C=t[d+1].ranges[0].left+t[d+1].ranges[0].width;it(g-y)<n?f.bottom=2:y<g&&g<C&&(f.bottom=1),it(m-C)<n?v.bottom=2:m<C&&(v.bottom=1)}else r&&(f.bottom=r.startStyle.bottom,v.bottom=r.endStyle.bottom);c.startStyle=f,c.endStyle=v}}},{key:"_getVisibleRangesWithStyle",value:function(e,t,i){var n=(t.linesVisibleRangesForRange(e,!0)||[]).map(et);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}},{key:"_createSelectionPiece",value:function(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}},{key:"_actualRenderOneSelection",value:function(e,t,n,o){if(0!==o.length)for(var r=!!o[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=o[0].lineNumber,h=o[o.length-1].lineNumber,d=0,u=o.length;d<u;d++){for(var c=o[d],g=c.lineNumber,m=g-t,f=n&&(g===h||g===l)?a:s,v=n&&g===l?1:0,_="",p="",y=0,C=c.ranges.length;y<C;y++){var L=c.ranges[y];if(r){var N=L.startStyle,w=L.endStyle;if(1===N.top||1===N.bottom){_+=this._createSelectionPiece(v,f,i.SELECTION_CLASS_NAME,L.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH);var b=i.EDITOR_BACKGROUND_CLASS_NAME;1===N.top&&(b+=" "+i.SELECTION_TOP_RIGHT),1===N.bottom&&(b+=" "+i.SELECTION_BOTTOM_RIGHT),_+=this._createSelectionPiece(v,f,b,L.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH)}if(1===w.top||1===w.bottom){_+=this._createSelectionPiece(v,f,i.SELECTION_CLASS_NAME,L.left+L.width,i.ROUNDED_PIECE_WIDTH);var k=i.EDITOR_BACKGROUND_CLASS_NAME;1===w.top&&(k+=" "+i.SELECTION_TOP_LEFT),1===w.bottom&&(k+=" "+i.SELECTION_BOTTOM_LEFT),_+=this._createSelectionPiece(v,f,k,L.left+L.width,i.ROUNDED_PIECE_WIDTH)}}var R=i.SELECTION_CLASS_NAME;if(r){var x=L.startStyle,D=L.endStyle;0===x.top&&(R+=" "+i.SELECTION_TOP_LEFT),0===x.bottom&&(R+=" "+i.SELECTION_BOTTOM_LEFT),0===D.top&&(R+=" "+i.SELECTION_TOP_RIGHT),0===D.bottom&&(R+=" "+i.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(v,f,R,L.left,L.width)}e[m][0]+=_,e[m][1]+=p}}},{key:"prepareRender",value:function(e){for(var t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=i;o<=n;o++){t[o-i]=["",""]}for(var r=[],s=0,a=this._selections.length;s<a;s++){var l=this._selections[s];if(l.isEmpty())r[s]=null;else{var h=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);r[s]=h,this._actualRenderOneSelection(t,i,this._selections.length>1,h)}}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map((function(e){var t=(0,L.Z)(e,2);return t[0]+t[1]}))}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(D.i);function it(e){return e<0?-e:e}tt.SELECTION_CLASS_NAME="selected-text",tt.SELECTION_TOP_LEFT="top-left-radius",tt.SELECTION_BOTTOM_LEFT="bottom-left-radius",tt.SELECTION_TOP_RIGHT="top-right-radius",tt.SELECTION_BOTTOM_RIGHT="bottom-right-radius",tt.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",tt.ROUNDED_PIECE_WIDTH=10,(0,M.Ic)((function(e,t){var i=e.getColor(Le.yb5);i&&!i.isTransparent()&&t.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(i,"; }"))}));var nt=(0,r.Z)((function e(t,i,n,r,s,a,l){(0,o.Z)(this,e),this.top=t,this.left=i,this.paddingLeft=n,this.width=r,this.height=s,this.textContent=a,this.textContentClassName=l})),ot=function(){function e(t){(0,o.Z)(this,e),this._context=t;var i=this._context.configuration.options,n=i.get(48);this._cursorStyle=i.get(26),this._lineHeight=i.get(64),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(29),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,g.X)(document.createElement("div")),this._domNode.setClassName("cursor ".concat(re.S)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,ie.N)(this._domNode,n),this._domNode.setDisplay("none"),this._position=new q.L(1,1),this._lastRenderedContent="",this._renderData=null}return(0,r.Z)(e,[{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._position}},{key:"show",value:function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}},{key:"hide",value:function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(48);return this._cursorStyle=t.get(26),this._lineHeight=t.get(64),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(29),this._typicalHalfwidthCharacterWidth),(0,ie.N)(this._domNode,i),!0}},{key:"onCursorPositionChanged",value:function(e,t){return this._domNode.domNode.style.transitionProperty=t?"none":"",this._position=e,!0}},{key:"_getGraphemeAwarePosition",value:function(){var e=this._position,t=e.lineNumber,i=e.column,n=this._context.viewModel.getLineContent(t),o=ve.J_(n,i-1),r=(0,L.Z)(o,2),s=r[0],a=r[1];return[new q.L(t,s+1),n.substring(s,a)]}},{key:"_prepareRender",value:function(e){var t="",i="",n=this._getGraphemeAwarePosition(),o=(0,L.Z)(n,2),r=o[0],s=o[1];if(this._cursorStyle===_e.d2.Line||this._cursorStyle===_e.d2.LineThin){var a,l=e.visibleRangeForPosition(r);if(!l||l.outsideRenderedLine)return null;this._cursorStyle===_e.d2.Line?(a=u.computeScreenAwareSize(this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=s,i=this._getTokenClassName(r)):a=u.computeScreenAwareSize(1);var h=l.left,d=0;a>=2&&h>=1&&(h-=d=1);var c=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta;return new nt(c,h,d,a,this._lineHeight,t,i)}var g=e.linesVisibleRangesForRange(new O.e(r.lineNumber,r.column,r.lineNumber,r.column+s.length),!1);if(!g||0===g.length)return null;var m=g[0];if(m.outsideRenderedLine||0===m.ranges.length)return null;var f=m.ranges[0],v="\t"===s||f.width<1?this._typicalHalfwidthCharacterWidth:f.width;this._cursorStyle===_e.d2.Block&&(t=s,i=this._getTokenClassName(r));var _=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta,p=this._lineHeight;return this._cursorStyle!==_e.d2.Underline&&this._cursorStyle!==_e.d2.UnderlineThin||(_+=this._lineHeight-2,p=2),new nt(_,f.left,0,v,p,t,i)}},{key:"_getTokenClassName",value:function(e){var t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRender(e)}},{key:"render",value:function(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(re.S," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}]),e}(),rt=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options;return n._readOnly=r.get(88),n._cursorBlinking=r.get(24),n._cursorStyle=r.get(26),n._cursorSmoothCaretAnimation=r.get(25),n._selectionIsEmpty=!0,n._isComposingInput=!1,n._isVisible=!1,n._primaryCursor=new ot(n._context),n._secondaryCursors=[],n._renderData=[],n._domNode=(0,g.X)(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n._updateDomClassName(),n._domNode.appendChild(n._primaryCursor.getDomNode()),n._startCursorBlinkAnimation=new te._F,n._cursorFlatBlinkInterval=new te.zh,n._blinkingEnabled=!1,n._editorHasFocus=!1,n._updateBlinking(),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onCompositionStart",value:function(e){return this._isComposingInput=!0,this._updateBlinking(),!0}},{key:"onCompositionEnd",value:function(e){return this._isComposingInput=!1,this._updateBlinking(),!0}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;this._readOnly=t.get(88),this._cursorBlinking=t.get(24),this._cursorStyle=t.get(26),this._cursorSmoothCaretAnimation=t.get(25),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(var i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}},{key:"_onCursorPositionChanged",value:function(e,t,i){var n=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==i;if(this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length)for(var o=t.length-this._secondaryCursors.length,r=0;r<o;r++){var s=new ot(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}else if(this._secondaryCursors.length>t.length)for(var a=this._secondaryCursors.length-t.length,l=0;l<a;l++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var h=0;h<t.length;h++)this._secondaryCursors[h].onCursorPositionChanged(t[h],n)}},{key:"onCursorStateChanged",value:function(e){for(var t=[],i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);var o=e.selections[0].isEmpty();return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,this._updateDomClassName()),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onTokensChanged",value:function(e){var t=function(t){for(var i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;var i,o=(0,n.Z)(this._secondaryCursors);try{for(o.s();!(i=o.n()).done;){if(t(i.value.getPosition()))return!0}}catch(r){o.e(r)}finally{o.f()}return!1}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getCursorBlinking",value:function(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}},{key:"_updateBlinking",value:function(){var e=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var t=this._getCursorBlinking(),n=0===t,o=5===t;n?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),n||o||(1===t?this._cursorFlatBlinkInterval.cancelAndSet((function(){e._isVisible?e._hide():e._show()}),i.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet((function(){e._blinkingEnabled=!0,e._updateDomClassName()}),i.BLINK_INTERVAL))}},{key:"_updateDomClassName",value:function(){this._domNode.setClassName(this._getClassName())}},{key:"_getClassName",value:function(){var e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case _e.d2.Line:e+=" cursor-line-style";break;case _e.d2.Block:e+=" cursor-block-style";break;case _e.d2.Underline:e+=" cursor-underline-style";break;case _e.d2.LineThin:e+=" cursor-line-thin-style";break;case _e.d2.BlockOutline:e+=" cursor-block-outline-style";break;case _e.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return"on"!==this._cursorSmoothCaretAnimation&&"explicit"!==this._cursorSmoothCaretAnimation||(e+=" cursor-smooth-caret-animation"),e}},{key:"_show",value:function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}},{key:"_hide",value:function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}},{key:"prepareRender",value:function(e){this._primaryCursor.prepareRender(e);for(var t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}},{key:"render",value:function(e){var t=[],i=0,n=this._primaryCursor.render(e);n&&(t[i++]=n);for(var o=0,r=this._secondaryCursors.length;o<r;o++){var s=this._secondaryCursors[o].render(e);s&&(t[i++]=s)}this._renderData=t}},{key:"getLastRenderData",value:function(){return this._renderData}}]),i}(C.E);rt.BLINK_INTERVAL=500,(0,M.Ic)((function(e,t){var i=e.getColor(S.n0);if(i){var n=e.getColor(S.fY);n||(n=i.opposite()),t.addRule(".monaco-editor .cursors-layer .cursor { background-color: ".concat(i,"; border-color: ").concat(i,"; color: ").concat(n,"; }")),(0,A.c3)(e.type)&&t.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ".concat(n,"; border-right: 1px solid ").concat(n,"; }"))}}));var st=function(){throw new Error("Invalid change accessor")},at=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options,s=r.get(140);return n._lineHeight=r.get(64),n._contentWidth=s.contentWidth,n._contentLeft=s.contentLeft,n.domNode=(0,g.X)(document.createElement("div")),n.domNode.setClassName("view-zones"),n.domNode.setPosition("absolute"),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.marginDomNode=(0,g.X)(document.createElement("div")),n.marginDomNode.setClassName("margin-view-zones"),n.marginDomNode.setPosition("absolute"),n.marginDomNode.setAttribute("role","presentation"),n.marginDomNode.setAttribute("aria-hidden","true"),n._zones={},n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._zones={}}},{key:"_recomputeWhitespacesProps",value:function(){var e,t=this,i=this._context.viewLayout.getWhitespaces(),o=new Map,r=(0,n.Z)(i);try{for(r.s();!(e=r.n()).done;){var s=e.value;o.set(s.id,s)}}catch(l){r.e(l)}finally{r.f()}var a=!1;return this._context.viewModel.changeWhitespace((function(e){for(var i=Object.keys(t._zones),n=0,r=i.length;n<r;n++){var s=i[n],l=t._zones[s],h=t._computeWhitespaceProps(l.delegate);l.isInHiddenArea=h.isInHiddenArea;var d=o.get(s);!d||d.afterLineNumber===h.afterViewLineNumber&&d.height===h.heightInPx||(e.changeOneWhitespace(s,h.afterViewLineNumber,h.heightInPx),t._safeCallOnComputedHeight(l.delegate,h.heightInPx),a=!0)}})),a}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(140);return this._lineHeight=t.get(64),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(64)&&this._recomputeWhitespacesProps(),!0}},{key:"onLineMappingChanged",value:function(e){return this._recomputeWhitespacesProps()}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"_getZoneOrdinal",value:function(e){var t,i;return null!==(i=null!==(t=e.ordinal)&&void 0!==t?t:e.afterColumn)&&void 0!==i?i:1e4}},{key:"_computeWhitespaceProps",value:function(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};var t,i;if("undefined"!==typeof e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var n=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new q.L(n,this._context.viewModel.model.getLineMaxColumn(n))}i=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});var o=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:o.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}},{key:"changeViewZones",value:function(e){var t=this,i=!1;return this._context.viewModel.changeWhitespace((function(n){var o={addZone:function(e){return i=!0,t._addZone(n,e)},removeZone:function(e){e&&(i=t._removeZone(n,e)||i)},layoutZone:function(e){e&&(i=t._layoutZone(n,e)||i)}};!function(e,t){try{return e(t)}catch(i){(0,m.dL)(i)}}(e,o),o.addZone=st,o.removeZone=st,o.layoutZone=st})),i}},{key:"_addZone",value:function(e,t){var i=this._computeWhitespaceProps(t),n={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:(0,g.X)(t.domNode),marginDomNode:t.marginDomNode?(0,g.X)(t.marginDomNode):null};return this._safeCallOnComputedHeight(n.delegate,i.heightInPx),n.domNode.setPosition("absolute"),n.domNode.domNode.style.width="100%",n.domNode.setDisplay("none"),n.domNode.setAttribute("monaco-view-zone",n.whitespaceId),this.domNode.appendChild(n.domNode),n.marginDomNode&&(n.marginDomNode.setPosition("absolute"),n.marginDomNode.domNode.style.width="100%",n.marginDomNode.setDisplay("none"),n.marginDomNode.setAttribute("monaco-view-zone",n.whitespaceId),this.marginDomNode.appendChild(n.marginDomNode)),this._zones[n.whitespaceId]=n,this.setShouldRender(),n.whitespaceId}},{key:"_removeZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}},{key:"_layoutZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}},{key:"shouldSuppressMouseDownOnViewZone",value:function(e){if(this._zones.hasOwnProperty(e)){var t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}},{key:"_heightInPixels",value:function(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}},{key:"_minWidthInPixels",value:function(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}},{key:"_safeCallOnComputedHeight",value:function(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(i){(0,m.dL)(i)}}},{key:"_safeCallOnDomNodeTop",value:function(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(i){(0,m.dL)(i)}}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t,i=e.viewportData.whitespaceViewportData,o={},r=!1,s=(0,n.Z)(i);try{for(s.s();!(t=s.n()).done;){var a=t.value;this._zones[a.id].isInHiddenArea||(o[a.id]=a,r=!0)}}catch(v){s.e(v)}finally{s.f()}for(var l=Object.keys(this._zones),h=0,d=l.length;h<d;h++){var u=l[h],c=this._zones[u],g=0,m=0,f="none";o.hasOwnProperty(u)?(g=o[u].verticalOffset-e.bigNumbersDelta,m=o[u].height,f="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(o[u].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(g),c.domNode.setHeight(m),c.domNode.setDisplay(f),c.marginDomNode&&(c.marginDomNode.setTop(g),c.marginDomNode.setHeight(m),c.marginDomNode.setDisplay(f))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}]),i}(C.E);var lt=i(98663),ht=i(49855),dt=i(83056),ut=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).blocks=[],n.contentWidth=-1,n.contentLeft=0,n.domNode=(0,g.X)(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("blockDecorations-container"),n.update(),n}return(0,r.Z)(i,[{key:"update",value:function(){var e=!1,t=this._context.configuration.options.get(140),i=t.contentWidth-t.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);var n=t.contentLeft;return this.contentLeft!==n&&(this.contentLeft=n,e=!0),e}},{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this.update()}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollLeftChanged}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t,i,o=0,r=e.getDecorationsInViewport(),s=(0,n.Z)(r);try{for(s.s();!(i=s.n()).done;){var a=i.value;if(a.options.blockClassName){var l=this.blocks[o];l||(l=this.blocks[o]=(0,g.X)(document.createElement("div")),this.domNode.appendChild(l));var h=void 0,d=void 0;a.options.blockIsAfterEnd?(h=e.getVerticalOffsetAfterLineNumber(a.range.endLineNumber,!1),d=e.getVerticalOffsetAfterLineNumber(a.range.endLineNumber,!0)):(h=e.getVerticalOffsetForLineNumber(a.range.startLineNumber,!0),d=a.range.isEmpty()&&!a.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(a.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(a.range.endLineNumber,!0));var u=null!==(t=a.options.blockPadding)&&void 0!==t?t:[0,0,0,0],c=(0,L.Z)(u,4),m=c[0],f=c[1],v=c[2],_=c[3];l.setClassName("blockDecorations-block "+a.options.blockClassName),l.setLeft(this.contentLeft-_),l.setWidth(this.contentWidth+_+f),l.setTop(h-e.scrollTop-m),l.setHeight(d-h+m+v),o++}}}catch(y){s.e(y)}finally{s.f()}for(var p=o;p<this.blocks.length;p++)this.blocks[p].domNode.remove();this.blocks.length=o}}]),i}(C.E),ct=i(83109),gt=i(56606),mt=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this))._context=e,n._options=new ft(n._context.configuration),n._selection=[],n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=new ft(this._context.configuration);return this._options.equals(t)?e.hasChanged(140):(this._options=t,!0)}},{key:"onCursorStateChanged",value:function(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){if("none"!==this._options.renderWhitespace){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,o=new Array(i),r=0;r<i;r++)o[r]=!0;var s=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(var a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){var l=a-e.viewportData.startLineNumber,h=s.data[l],d=null;if("selection"===this._options.renderWhitespace){var u,c=this._selection,g=(0,n.Z)(c);try{for(g.s();!(u=g.n()).done;){var m=u.value;if(!(m.endLineNumber<a||m.startLineNumber>a)){var f=m.startLineNumber===a?m.startColumn:h.minColumn,v=m.endLineNumber===a?m.endColumn:h.maxColumn;f<v&&(d||(d=[]),d.push(new gt.zG(f-1,v-1)))}}}catch(_){g.e(_)}finally{g.f()}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,h)}}else this._renderResult=null}},{key:"_applyRenderWhitespace",value:function(e,t,i,n){if("selection"===this._options.renderWhitespace&&!i)return"";if("trailing"===this._options.renderWhitespace&&n.continuesWithWrappedLine)return"";var o,r=this._context.theme.getColor(S.dI),s=this._options.renderWithSVG,a=n.content,l=-1===this._options.stopRenderingLineAfter?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),h=n.continuesWithWrappedLine,d=n.minColumn-1,u="boundary"===this._options.renderWhitespace,c="trailing"===this._options.renderWhitespace,g=this._options.lineHeight,m=this._options.middotWidth,f=this._options.wsmiddotWidth,v=this._options.spaceWidth,_=Math.abs(f-v)<Math.abs(m-v)?11825:183,p=this._options.canUseHalfwidthRightwardsArrow,y="",C=!1,L=ve.LC(a);-1===L?(C=!0,L=l,o=l):o=ve.ow(a);for(var N=0,w=i&&i[N],b=0,k=d;k<l;k++){var R=a.charCodeAt(k);if(w&&k>=w.endOffset&&(N++,w=i&&i[N]),(9===R||32===R)&&!(c&&!C&&k<=o)){if(u&&k>=L&&k<=o&&32===R){var x=k-1>=0?a.charCodeAt(k-1):0,D=k+1<l?a.charCodeAt(k+1):0;if(32!==x&&32!==D)continue}if(u&&h&&k===l-1){var W=k-1>=0?a.charCodeAt(k-1):0;if(32===R&&32!==W&&9!==W)continue}if(!i||!(!w||w.startOffset>k||w.endOffset<=k)){var M=e.visibleRangeForPosition(new q.L(t,k+1));M&&(s?(b=Math.max(b,M.left),y+=9===R?this._renderArrow(g,v,M.left):'<circle cx="'.concat((M.left+v/2).toFixed(2),'" cy="').concat((g/2).toFixed(2),'" r="').concat((v/7).toFixed(2),'" />')):y+=9===R?'<div class="mwh" style="left:'.concat(M.left,"px;height:").concat(g,'px;">').concat(p?String.fromCharCode(65515):String.fromCharCode(8594),"</div>"):'<div class="mwh" style="left:'.concat(M.left,"px;height:").concat(g,'px;">').concat(String.fromCharCode(_),"</div>"))}}}return s?(b=Math.round(b+v),'<svg style="position:absolute;width:'.concat(b,"px;height:").concat(g,'px" viewBox="0 0 ').concat(b," ").concat(g,'" xmlns="http://www.w3.org/2000/svg" fill="').concat(r,'">')+y+"</svg>"):y}},{key:"_renderArrow",value:function(e,t,i){var n=e/2,o=i,r={x:0,y:t/7/2},s={x:.8*t,y:r.y},a={x:s.x-.2*s.x,y:s.y+.2*s.x},l={x:a.x+.1*s.x,y:a.y+.1*s.x},h={x:l.x+.35*s.x,y:l.y-.35*s.x},d=[r,s,a,l,h,{x:h.x,y:-h.y},{x:l.x,y:-l.y},{x:a.x,y:-a.y},{x:s.x,y:-s.y},{x:r.x,y:-r.y}].map((function(e){return"".concat((o+e.x).toFixed(2)," ").concat((n+e.y).toFixed(2))})).join(" L ");return'<path d="M '.concat(d,'" />')}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(D.i),ft=function(){function e(t){(0,o.Z)(this,e);var i=t.options,n=i.get(48),r=i.get(36);"off"===r?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===r?(this.renderWhitespace=i.get(95),this.renderWithSVG=!0):(this.renderWhitespace=i.get(95),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(64),this.stopRenderingLineAfter=i.get(113)}return(0,r.Z)(e,[{key:"equals",value:function(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}]),e}(),vt=function(e){(0,h.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,r,a,l,h){var d;(0,o.Z)(this,i),(d=t.call(this))._selections=[new c.Y(1,1,1,1)],d._renderAnimationFrame=null;var u=new _.N(n,a,l,e);d._context=new lt.A(n,r,a),d._context.addEventHandler((0,s.Z)(d)),d._viewParts=[],d._textAreaHandler=new v.H(d._context,u,d._createTextAreaHandlerHelper()),d._viewParts.push(d._textAreaHandler),d._linesContent=(0,g.X)(document.createElement("div")),d._linesContent.setClassName("lines-content monaco-editor-background"),d._linesContent.setPosition("absolute"),d.domNode=(0,g.X)(document.createElement("div")),d.domNode.setClassName(d._getEditorClassName()),d.domNode.setAttribute("role","code"),d._overflowGuardContainer=(0,g.X)(document.createElement("div")),C.K.write(d._overflowGuardContainer,3),d._overflowGuardContainer.setClassName("overflow-guard"),d._scrollbar=new F(d._context,d._linesContent,d.domNode,d._overflowGuardContainer),d._viewParts.push(d._scrollbar),d._viewLines=new de(d._context,d._linesContent),d._viewZones=new at(d._context),d._viewParts.push(d._viewZones);var m=new Ue(d._context);d._viewParts.push(m);var p=new je(d._context);d._viewParts.push(p);var L=new y.Ip(d._context);d._viewParts.push(L),L.addDynamicOverlay(new Z(d._context)),L.addDynamicOverlay(new tt(d._context)),L.addDynamicOverlay(new J(d._context)),L.addDynamicOverlay(new P(d._context)),L.addDynamicOverlay(new mt(d._context));var w=new y.Ib(d._context);d._viewParts.push(w),w.addDynamicOverlay(new T(d._context)),w.addDynamicOverlay(new U(d._context)),w.addDynamicOverlay(new ge(d._context)),w.addDynamicOverlay(new ue(d._context)),w.addDynamicOverlay(new Q.x(d._context));var b=new ce.Z(d._context);b.getDomNode().appendChild(d._viewZones.marginDomNode),b.getDomNode().appendChild(w.getDomNode()),d._viewParts.push(b),d._contentWidgets=new N(d._context,d.domNode),d._viewParts.push(d._contentWidgets),d._viewCursors=new rt(d._context),d._viewParts.push(d._viewCursors),d._overlayWidgets=new Be(d._context),d._viewParts.push(d._overlayWidgets);var k=new Ye(d._context);d._viewParts.push(k);var R=new ut(d._context);d._viewParts.push(R);var x=new Pe(d._context);if(d._viewParts.push(x),m){var D=d._scrollbar.getOverviewRulerLayoutInfo();D.parent.insertBefore(m.getDomNode(),D.insertBefore)}return d._linesContent.appendChild(L.getDomNode()),d._linesContent.appendChild(k.domNode),d._linesContent.appendChild(d._viewZones.domNode),d._linesContent.appendChild(d._viewLines.getDomNode()),d._linesContent.appendChild(d._contentWidgets.domNode),d._linesContent.appendChild(d._viewCursors.getDomNode()),d._overflowGuardContainer.appendChild(b.getDomNode()),d._overflowGuardContainer.appendChild(d._scrollbar.getDomNode()),d._overflowGuardContainer.appendChild(p.getDomNode()),d._overflowGuardContainer.appendChild(d._textAreaHandler.textArea),d._overflowGuardContainer.appendChild(d._textAreaHandler.textAreaCover),d._overflowGuardContainer.appendChild(d._overlayWidgets.getDomNode()),d._overflowGuardContainer.appendChild(x.getDomNode()),d._overflowGuardContainer.appendChild(R.domNode),d.domNode.appendChild(d._overflowGuardContainer),h?h.appendChild(d._contentWidgets.overflowingContentWidgetsDomNode.domNode):d.domNode.appendChild(d._contentWidgets.overflowingContentWidgetsDomNode),d._applyLayout(),d._pointerHandler=d._register(new f.a(d._context,u,d._createPointerHandlerHelper())),d}return(0,r.Z)(i,[{key:"_flushAccumulatedAndRenderNow",value:function(){ct.B.onRenderStart(),this._renderNow()}},{key:"_createPointerHandlerHelper",value:function(){var e=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:function(){e.focus()},dispatchTextAreaEvent:function(t){e._textAreaHandler.textArea.domNode.dispatchEvent(t)},getLastRenderData:function(){var t=e._viewCursors.getLastRenderData()||[],i=e._textAreaHandler.getLastRenderData();return new dt.sB(t,i)},renderNow:function(){e.render(!0,!1)},shouldSuppressMouseDownOnViewZone:function(t){return e._viewZones.shouldSuppressMouseDownOnViewZone(t)},shouldSuppressMouseDownOnWidget:function(t){return e._contentWidgets.shouldSuppressMouseDownOnWidget(t)},getPositionFromDOMInfo:function(t,i){return e._flushAccumulatedAndRenderNow(),e._viewLines.getPositionFromDOMInfo(t,i)},visibleRangeForPosition:function(t,i){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(new q.L(t,i))},getLineWidth:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.getLineWidth(t)}}}},{key:"_createTextAreaHandlerHelper",value:function(){var e=this;return{visibleRangeForPosition:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(t)}}}},{key:"_applyLayout",value:function(){var e=this._context.configuration.options.get(140);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}},{key:"_getEditorClassName",value:function(){var e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(137)+" "+(0,M.m6)(this._context.theme.type)+e}},{key:"handleEvents",value:function(e){(0,a.Z)((0,l.Z)(i.prototype),"handleEvents",this).call(this,e),this._scheduleRender()}},{key:"onConfigurationChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,!1}},{key:"onFocusChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"onThemeChanged",value:function(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"dispose",value:function(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();var e,t=(0,n.Z)(this._viewParts);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(o){t.e(o)}finally{t.f()}(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_scheduleRender",value:function(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=u.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))}},{key:"_onRenderScheduled",value:function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}},{key:"_renderNow",value:function(){var e=this;!function(e){try{return e()}catch(t){(0,m.dL)(t)}}((function(){return e._actualRender()}))}},{key:"_getViewPartsToRender",value:function(){var e,t=[],i=0,o=(0,n.Z)(this._viewParts);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.shouldRender()&&(t[i++]=r)}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"_actualRender",value:function(){if(u.isInDOM(this.domNode.domNode)){var e=this._getViewPartsToRender();if(this._viewLines.shouldRender()||0!==e.length){var t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);var i=new ht.x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());var o,r=new I.xh(this._context.viewLayout,i,this._viewLines),s=(0,n.Z)(e);try{for(s.s();!(o=s.n()).done;){o.value.prepareRender(r)}}catch(d){s.e(d)}finally{s.f()}var a,l=(0,n.Z)(e);try{for(l.s();!(a=l.n()).done;){var h=a.value;h.render(r),h.onDidRender()}}catch(d){l.e(d)}finally{l.f()}}}}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}},{key:"restoreState",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}},{key:"getOffsetForColumn",value:function(e,t){var i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();var o=this._viewLines.visibleRangeForPosition(new q.L(n.lineNumber,n.column));return o?o.left:-1}},{key:"getTargetAtClientPoint",value:function(e,t){var i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?p.q.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}},{key:"createOverviewRuler",value:function(e){return new Ke(this._context,e)}},{key:"change",value:function(e){this._viewZones.changeViewZones(e),this._scheduleRender()}},{key:"render",value:function(e,t){if(t){this._viewLines.forceShouldRender();var i,o=(0,n.Z)(this._viewParts);try{for(o.s();!(i=o.n()).done;){i.value.forceShouldRender()}}catch(r){o.e(r)}finally{o.f()}}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}},{key:"writeScreenReaderContent",value:function(e){this._textAreaHandler.writeScreenReaderContent(e)}},{key:"focus",value:function(){this._textAreaHandler.focusTextArea()}},{key:"isFocused",value:function(){return this._textAreaHandler.isFocused()}},{key:"setAriaOptions",value:function(e){this._textAreaHandler.setAriaOptions(e)}},{key:"addContentWidget",value:function(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}},{key:"layoutContentWidget",value:function(e){var t,i,n,o,r,s,a,l;this._contentWidgets.setWidgetPosition(e.widget,null!==(i=null===(t=e.position)||void 0===t?void 0:t.position)&&void 0!==i?i:null,null!==(o=null===(n=e.position)||void 0===n?void 0:n.secondaryPosition)&&void 0!==o?o:null,null!==(s=null===(r=e.position)||void 0===r?void 0:r.preference)&&void 0!==s?s:null,null!==(l=null===(a=e.position)||void 0===a?void 0:a.positionAffinity)&&void 0!==l?l:null),this._scheduleRender()}},{key:"removeContentWidget",value:function(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}},{key:"addOverlayWidget",value:function(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}},{key:"layoutOverlayWidget",value:function(e){var t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}},{key:"removeOverlayWidget",value:function(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}]),i}(qe.O)},47713:function(e,t,i){i.d(t,{C:function(){return c}});var n=i(15671),o=i(43144),r=i(81200),s=i(31906),a=i(88616),l=i(53603),h=i(37248),d=i(61394),u=(0,r.Z)("domLineBreaksComputer",{createHTML:function(e){return e}}),c=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,[{key:"createLineBreaksComputer",value:function(e,t,i,n,o){var r=[],c=[];return{addRequest:function(e,t,i){r.push(e),c.push(t)},finalize:function(){return function(e,t,i,n,o,r,c){var f;function v(t){var i=c[t];if(i){var n=d.gk.applyInjectedText(e[t],i),o=i.map((function(e){return e.options})),r=i.map((function(e){return e.column-1}));return new h.gD(r,o,[n.length],[],0)}return null}if(-1===n){for(var _=[],p=0,y=e.length;p<y;p++)_[p]=v(p);return _}var C=Math.round(n*t.typicalHalfwidthCharacterWidth),L=3===o?2:2===o?1:0,N=Math.round(i*L),w=Math.ceil(t.spaceWidth*N),b=document.createElement("div");(0,a.N)(b,t);for(var k=new l.HT(1e4),R=[],x=[],D=[],S=[],W=[],M=0;M<e.length;M++){var A=d.gk.applyInjectedText(e[M],c[M]),H=0,Z=0,T=C;if(0!==o)if(-1===(H=s.LC(A)))H=0;else{for(var O=0;O<H;O++){Z+=9===A.charCodeAt(O)?i-Z%i:1}var I=Math.ceil(t.spaceWidth*Z);I+t.typicalFullwidthCharacterWidth>C?(H=0,Z=0):T=C-I}var P=A.substr(H),E=g(P,Z,i,T,k,w);R[M]=H,x[M]=Z,D[M]=P,S[M]=E[0],W[M]=E[1]}var F=k.build(),B=null!==(f=null===u||void 0===u?void 0:u.createHTML(F))&&void 0!==f?f:F;b.innerHTML=B,b.style.position="absolute",b.style.top="10000","keepAll"===r?(b.style.wordBreak="keep-all",b.style.overflowWrap="anywhere"):(b.style.wordBreak="inherit",b.style.overflowWrap="break-word");document.body.appendChild(b);for(var V=document.createRange(),z=Array.prototype.slice.call(b.children,0),G=[],U=0;U<e.length;U++){var X=m(V,z[U],D[U],S[U]);if(null!==X){for(var q=R[U],K=x[U]+N,Y=W[U],j=[],J=0,$=X.length;J<$;J++)j[J]=Y[X[J]];if(0!==q)for(var Q=0,ee=X.length;Q<ee;Q++)X[Q]+=q;var te=void 0,ie=void 0,ne=c[U];ne?(te=ne.map((function(e){return e.options})),ie=ne.map((function(e){return e.column-1}))):(te=null,ie=null),G[U]=new h.gD(ie,te,X,j,K)}else G[U]=v(U)}return document.body.removeChild(b),G}(r,e,t,i,n,o,c)}}}}],[{key:"create",value:function(){return new e}}]),e}();function g(e,t,i,n,o,r){if(0!==r){var a=String(r);o.appendString('<div style="text-indent: -'),o.appendString(a),o.appendString("px; padding-left: "),o.appendString(a),o.appendString("px; box-sizing: border-box; width:")}else o.appendString('<div style="width:');o.appendString(String(n)),o.appendString('px;">');var l=e.length,h=t,d=0,u=[],c=[],g=0<l?e.charCodeAt(0):0;o.appendString("<span>");for(var m=0;m<l;m++){0!==m&&m%16384===0&&o.appendString("</span><span>"),u[m]=d,c[m]=h;var f=g;g=m+1<l?e.charCodeAt(m+1):0;var v=1,_=1;switch(f){case 9:_=v=i-h%i;for(var p=1;p<=v;p++)p<v?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 32:32===g?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 60:o.appendString("&lt;");break;case 62:o.appendString("&gt;");break;case 38:o.appendString("&amp;");break;case 0:o.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.appendCharCode(65533);break;default:s.K7(f)&&_++,f<32?o.appendCharCode(9216+f):o.appendCharCode(f)}d+=v,h+=_}return o.appendString("</span>"),u[e.length]=d,c[e.length]=h,o.appendString("</div>"),[u,c]}function m(e,t,i,n){if(i.length<=1)return null;var o=Array.prototype.slice.call(t.children,0),r=[];try{f(e,o,n,0,null,i.length-1,null,r)}catch(s){return console.log(s),null}return 0===r.length?null:(r.push(i.length),r)}function f(e,t,i,n,o,r,s,a){if(n!==r&&(o=o||v(e,t,i[n],i[n+1]),s=s||v(e,t,i[r],i[r+1]),!(Math.abs(o[0].top-s[0].top)<=.1)))if(n+1!==r){var l=n+(r-n)/2|0,h=v(e,t,i[l],i[l+1]);f(e,t,i,n,o,l,h,a),f(e,t,i,l,h,r,s,a)}else a.push(r)}function v(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}},13209:function(e,t,i){i.d(t,{i:function(){return a}});var n=i(43144),o=i(15671),r=i(60136),s=i(27277),a=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(i(7339).O)},26754:function(e,t,i){i.d(t,{x:function(){return f}});var n=i(15671),o=i(43144),r=i(97326),s=i(11752),a=i(61120),l=i(60136),h=i(27277),d=i(90650),u=i(13209),c=i(65631),g=i(41335),m=i(59881),f=function(e){(0,l.Z)(i,e);var t=(0,h.Z)(i);function i(e){var o;return(0,n.Z)(this,i),(o=t.call(this))._context=e,o._readConfig(),o._lastCursorModelPosition=new c.L(1,1),o._renderResult=null,o._activeLineNumber=1,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(i,[{key:"_readConfig",value:function(){var e=this._context.configuration.options;this._lineHeight=e.get(64);var t=e.get(65);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(91);var i=e.get(140);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this._readConfig(),!0}},{key:"onCursorStateChanged",value:function(e){var t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);var i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(i=!0),i}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getLineRenderLineNumber",value:function(e){var t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new c.L(e,1));if(1!==t.column)return"";var i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(2===this._renderLineNumbers){var n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return 0===n?'<span class="relative-current-line-number">'+i+"</span>":String(n)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)}},{key:"prepareRender",value:function(e){if(0!==this._renderLineNumbers){for(var t=d.IJ?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,r=this._context.viewModel.getLineCount(),s=[],a=n;a<=o;a++){var l=a-n,h=this._getLineRenderLineNumber(a);if(h){var u="";if(a===r&&0===this._context.viewModel.getLineLength(a)){if("off"===this._renderFinalNewline){s[l]="";continue}"dimmed"===this._renderFinalNewline&&(u=" dimmed-line-number")}a===this._activeLineNumber&&(u=" active-line-number"),s[l]='<div class="'.concat(i.CLASS_NAME).concat(t).concat(u,'" style="left:').concat(this._lineNumbersLeft,"px;width:").concat(this._lineNumbersWidth,'px;">').concat(h,"</div>")}else s[l]=""}this._renderResult=s}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(u.i);f.CLASS_NAME="line-numbers",(0,g.Ic)((function(e,t){var i=e.getColor(m.hw),n=e.getColor(m.Bj);n?t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(n,"; }")):i&&t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(i.transparent(.4),"; }"))}))},30804:function(e,t,i){i.d(t,{N:function(){return N},o:function(){return L}});var n=i(11752),o=i(61120),r=i(60136),s=i(27277),a=i(37762),l=i(15671),h=i(43144),d=i(30620),u=i(65379),c=i(90650),g=i(2890),m=function(){function e(){(0,l.Z)(this,e)}return(0,h.Z)(e,null,[{key:"_createRange",value:function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}},{key:"_detachRange",value:function(e,t){e.selectNodeContents(t)}},{key:"_readClientRects",value:function(e,t,i,n,o){var r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch(s){return null}finally{this._detachRange(r,o)}}},{key:"_mergeAdjacentRanges",value:function(e){if(1===e.length)return e;e.sort(g.CR.compare);for(var t=[],i=0,n=e[0],o=1,r=e.length;o<r;o++){var s=e[o];n.left+n.width+.9>=s.left?n.width=Math.max(n.width,s.left+s.width-n.left):(t[i++]=n,n=s)}return t[i++]=n,t}},{key:"_createHorizontalRangesFromClientRects",value:function(e,t,i){if(!e||0===e.length)return null;for(var n=[],o=0,r=e.length;o<r;o++){var s=e[o];n[o]=new g.CR(Math.max(0,(s.left-t)/i),s.width/i)}return this._mergeAdjacentRanges(n)}},{key:"readHorizontalRanges",value:function(e,t,i,n,o,r){var s=e.children.length-1;if(0>s)return null;if((t=Math.min(s,Math.max(0,t)))===(n=Math.min(s,Math.max(0,n)))&&i===o&&0===i&&!e.children[t].firstChild){var a=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(a,r.clientRectDeltaLeft,r.clientRectScale)}t!==n&&n>0&&0===o&&(n--,o=1073741824);var l=e.children[t].firstChild,h=e.children[n].firstChild;if(l&&h||(!l&&0===i&&t>0&&(l=e.children[t-1].firstChild,i=1073741824),!h&&0===o&&n>0&&(h=e.children[n-1].firstChild,o=1073741824)),!l||!h)return null;i=Math.min(l.textContent.length,Math.max(0,i)),o=Math.min(h.textContent.length,Math.max(0,o));var d=this._readClientRects(l,i,h,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,r.clientRectDeltaLeft,r.clientRectScale)}}]),e}(),f=i(63465),v=i(56606),_=i(39707),p=i(17683),y=!!c.tY||!(c.IJ||d.isFirefox||d.isSafari),C=!0,L=function(){function e(t,i){(0,l.Z)(this,e),this.themeType=i;var n=t.options,o=n.get(48),r=n.get(36);this.renderWhitespace="off"===r?n.get(95):"none",this.renderControlCharacters=n.get(90),this.spaceWidth=o.spaceWidth,this.middotWidth=o.middotWidth,this.wsmiddotWidth=o.wsmiddotWidth,this.useMonospaceOptimizations=o.isMonospace&&!n.get(31),this.canUseHalfwidthRightwardsArrow=o.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(64),this.stopRenderingLineAfter=n.get(113),this.fontLigatures=n.get(49)}return(0,h.Z)(e,[{key:"equals",value:function(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}]),e}(),N=function(){function e(t){(0,l.Z)(this,e),this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}return(0,h.Z)(e,[{key:"getDomNode",value:function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}},{key:"setDomNode",value:function(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=(0,u.X)(e)}},{key:"onContentChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onTokensChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onDecorationsChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onOptionsChanged",value:function(e){this._isMaybeInvalid=!0,this._options=e}},{key:"onSelectionChanged",value:function(){return!(!(0,_.c3)(this._options.themeType)&&"selection"!==this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}},{key:"renderLine",value:function(t,i,n,o){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;var r=n.getViewLineRenderingData(t),s=this._options,l=f.Kp.filter(r.inlineDecorations,t,r.minColumn,r.maxColumn),h=null;if((0,_.c3)(s.themeType)||"selection"===this._options.renderWhitespace){var d,u=n.selections,c=(0,a.Z)(u);try{for(c.s();!(d=c.n()).done;){var g=d.value;if(!(g.endLineNumber<t||g.startLineNumber>t)){var m=g.startLineNumber===t?g.startColumn:r.minColumn,L=g.endLineNumber===t?g.endColumn:r.maxColumn;m<L&&((0,_.c3)(s.themeType)&&l.push(new f.Kp(m,L,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(h||(h=[]),h.push(new v.zG(m-1,L-1))))}}}catch(x){c.e(x)}finally{c.f()}}var N=new v.IJ(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==p.n0.OFF,h);if(this._renderedViewLine&&this._renderedViewLine.input.equals(N))return!1;o.appendString('<div style="top:'),o.appendString(String(i)),o.appendString("px;height:"),o.appendString(String(this._options.lineHeight)),o.appendString('px;" class="'),o.appendString(e.CLASS_NAME),o.appendString('">');var b=(0,v.d1)(N,o);o.appendString("</div>");var k=null;return C&&y&&r.isBasicASCII&&s.useMonospaceOptimizations&&0===b.containsForeignElements&&(k=new w(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping)),k||(k=R(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping,b.containsRTL,b.containsForeignElements)),this._renderedViewLine=k,!0}},{key:"layoutLine",value:function(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}},{key:"getWidth",value:function(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}},{key:"getWidthIsFast",value:function(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}},{key:"needsMonospaceFontCheck",value:function(){return!!this._renderedViewLine&&this._renderedViewLine instanceof w}},{key:"monospaceAssumptionsAreValid",value:function(){return this._renderedViewLine&&this._renderedViewLine instanceof w?this._renderedViewLine.monospaceAssumptionsAreValid():C}},{key:"onMonospaceAssumptionsInvalidated",value:function(){this._renderedViewLine&&this._renderedViewLine instanceof w&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));var o=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==o&&t>o+1&&i>o+1)return new g.CH(!0,[new g.CR(this.getWidth(n),0)]);-1!==o&&t>o+1&&(t=o+1),-1!==o&&i>o+1&&(i=o+1);var r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return r&&r.length>0?new g.CH(!1,r):null}},{key:"getColumnOfNodeOffset",value:function(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}}]),e}();N.CLASS_NAME="view-line";var w=function(){function e(t,i,n){(0,l.Z)(this,e),this._cachedWidth=-1,this.domNode=t,this.input=i;var o=Math.floor(i.lineContent.length/300);if(o>0){this._keyColumnPixelOffsetCache=new Float32Array(o);for(var r=0;r<o;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=i.spaceWidth}return(0,h.Z)(e,[{key:"getWidth",value:function(e){if(!this.domNode||this.input.lineContent.length<300){var t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null===e||void 0===e||e.markDidDomLayout()),this._cachedWidth}},{key:"getWidthIsFast",value:function(){return this.input.lineContent.length<300||-1!==this._cachedWidth}},{key:"monospaceAssumptionsAreValid",value:function(){if(!this.domNode)return C;if(this.input.lineContent.length<300){var e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),C=!1)}return C}},{key:"toSlowRenderedLine",value:function(){return R(this.domNode,this.input,this._characterMapping,!1,0)}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){var o=this._getColumnPixelOffset(e,t,n),r=this._getColumnPixelOffset(e,i,n);return[new g.CR(o,r-o)]}},{key:"_getColumnPixelOffset",value:function(e,t,i){if(t<=300){var n=this._characterMapping.getHorizontalOffset(t);return this._charWidth*n}var o=Math.floor((t-1)/300)-1,r=300*(o+1)+1,s=-1;if(this._keyColumnPixelOffsetCache&&-1===(s=this._keyColumnPixelOffsetCache[o])&&(s=this._actualReadPixelOffset(e,r,i),this._keyColumnPixelOffsetCache[o]=s),-1===s){var a=this._characterMapping.getHorizontalOffset(t);return this._charWidth*a}var l=this._characterMapping.getHorizontalOffset(r),h=this._characterMapping.getHorizontalOffset(t);return s+this._charWidth*(h-l)}},{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"_actualReadPixelOffset",value:function(e,t,i){if(!this.domNode)return-1;var n=this._characterMapping.getDomPosition(t),o=m.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return o&&0!==o.length?o[0].left:-1}},{key:"getColumnOfNodeOffset",value:function(e,t,i){for(var n=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new v.Nd(o,i),n)}}]),e}(),b=function(){function e(t,i,n,o,r){if((0,l.Z)(this,e),this.domNode=t,this.input=i,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(i.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!o||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}return(0,h.Z)(e,[{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"getWidth",value:function(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null===e||void 0===e||e.markDidDomLayout()),this._cachedWidth):0}},{key:"getWidthIsFast",value:function(){return-1!==this._cachedWidth}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){var o=this._readPixelOffset(this.domNode,e,t,n);if(-1===o)return null;var r=this._readPixelOffset(this.domNode,e,i,n);return-1===r?null:[new g.CR(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}},{key:"_readVisibleRangesForRange",value:function(e,t,i,n,o){if(i===n){var r=this._readPixelOffset(e,t,i,o);return-1===r?null:[new g.CR(r,0)]}return this._readRawVisibleRangesForRange(e,i,n,o)}},{key:"_readPixelOffset",value:function(e,t,i,n){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(n);var o=this._getReadingTarget(e);return o.firstChild?(n.markDidDomLayout(),o.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){var r=this._pixelOffsetCache[i];if(-1!==r)return r;var s=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=s,s}return this._actualReadPixelOffset(e,t,i,n)}},{key:"_actualReadPixelOffset",value:function(e,t,i,n){if(0===this._characterMapping.length){var o=m.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return o&&0!==o.length?o[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(n);var r=this._characterMapping.getDomPosition(i),s=m.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,n);if(!s||0===s.length)return-1;var a=s[0].left;if(this.input.isBasicASCII){var l=this._characterMapping.getHorizontalOffset(i),h=Math.round(this.input.spaceWidth*l);if(Math.abs(h-a)<=1)return h}return a}},{key:"_readRawVisibleRangesForRange",value:function(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new g.CR(0,this.getWidth(n))];var o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return m.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,n)}},{key:"getColumnOfNodeOffset",value:function(e,t,i){for(var n=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new v.Nd(o,i),n)}}]),e}(),k=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,l.Z)(this,i),t.apply(this,arguments)}return(0,h.Z)(i,[{key:"_readVisibleRangesForRange",value:function(e,t,r,s,a){var l=(0,n.Z)((0,o.Z)(i.prototype),"_readVisibleRangesForRange",this).call(this,e,t,r,s,a);if(!l||0===l.length||r===s||1===r&&s===this._characterMapping.length)return l;if(!this.input.containsRTL){var h=this._readPixelOffset(e,t,s,a);if(-1!==h){var d=l[l.length-1];d.left<h&&(d.width=h-d.left)}}return l}}]),i}(b),R=d.isWebKit?x:D;function x(e,t,i,n,o){return new k(e,t,i,n,o)}function D(e,t,i,n,o){return new b(e,t,i,n,o)}},40309:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(15671),o=i(43144),r=i(11752),s=i(61120),a=i(60136),l=i(27277),h=i(65379),d=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;(0,n.Z)(this,i);var r=(o=t.call(this,e))._context.configuration.options,s=r.get(140);return o._canUseLayerHinting=!r.get(30),o._contentLeft=s.contentLeft,o._glyphMarginLeft=s.glyphMarginLeft,o._glyphMarginWidth=s.glyphMarginWidth,o._domNode=(0,h.X)(document.createElement("div")),o._domNode.setClassName(i.OUTER_CLASS_NAME),o._domNode.setPosition("absolute"),o._domNode.setAttribute("role","presentation"),o._domNode.setAttribute("aria-hidden","true"),o._glyphMarginBackgroundDomNode=(0,h.X)(document.createElement("div")),o._glyphMarginBackgroundDomNode.setClassName(i.CLASS_NAME),o._domNode.appendChild(o._glyphMarginBackgroundDomNode),o}return(0,o.Z)(i,[{key:"dispose",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(140);return this._canUseLayerHinting=!t.get(30),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}},{key:"onScrollChanged",value:function(e){return(0,r.Z)((0,s.Z)(i.prototype),"onScrollChanged",this).call(this,e)||e.scrollTopChanged}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");var t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);var i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}]),i}(i(81535).E);d.CLASS_NAME="glyph-margin",d.OUTER_CLASS_NAME="margin"}}]);
//# sourceMappingURL=monaco-editor-vendor.96a37e40.5bc26d3c.js.map