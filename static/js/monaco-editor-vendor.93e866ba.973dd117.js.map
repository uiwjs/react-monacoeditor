{"version":3,"file":"static/js/monaco-editor-vendor.93e866ba.973dd117.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js","../node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js","../node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport './stickyScroll.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nexport class StickyScrollWidgetState {\n    constructor(lineNumbers, lastLineRelativePosition) {\n        this.lineNumbers = lineNumbers;\n        this.lastLineRelativePosition = lastLineRelativePosition;\n    }\n}\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nlet StickyScrollWidget = class StickyScrollWidget extends Disposable {\n    constructor(_editor, _languageFeatureService, _instaService) {\n        super();\n        this._editor = _editor;\n        this._languageFeatureService = _languageFeatureService;\n        this._instaService = _instaService;\n        this._rootDomNode = document.createElement('div');\n        this._disposableStore = this._register(new DisposableStore());\n        this._lineNumbers = [];\n        this._lastLineRelativePosition = 0;\n        this._hoverOnLine = -1;\n        this._hoverOnColumn = -1;\n        this._candidateDefinitionsLength = -1;\n        this._layoutInfo = this._editor.getLayoutInfo();\n        this._rootDomNode = document.createElement('div');\n        this._rootDomNode.className = 'sticky-widget';\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n        this._rootDomNode.style.width = `${this._layoutInfo.width - this._layoutInfo.minimap.minimapCanvasOuterWidth - this._layoutInfo.verticalScrollbarWidth}px`;\n        this._register(this._updateLinkGesture());\n    }\n    _updateLinkGesture() {\n        const linkGestureStore = new DisposableStore();\n        const sessionStore = new DisposableStore();\n        linkGestureStore.add(sessionStore);\n        const gesture = new ClickLinkGesture(this._editor, true);\n        linkGestureStore.add(gesture);\n        linkGestureStore.add(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n            if (!this._editor.hasModel() || !mouseEvent.hasTriggerModifier) {\n                sessionStore.clear();\n                return;\n            }\n            const targetMouseEvent = mouseEvent.target;\n            if (targetMouseEvent.detail === this.getId() && targetMouseEvent.element.innerText === targetMouseEvent.element.innerHTML) {\n                const text = targetMouseEvent.element.innerText;\n                if (this._hoverOnColumn === -1) {\n                    return;\n                }\n                const lineNumber = this._hoverOnLine;\n                const column = this._hoverOnColumn;\n                const stickyPositionProjectedOnEditor = new Range(lineNumber, column, lineNumber, column + text.length);\n                if (!stickyPositionProjectedOnEditor.equalsRange(this._stickyRangeProjectedOnEditor)) {\n                    this._stickyRangeProjectedOnEditor = stickyPositionProjectedOnEditor;\n                    sessionStore.clear();\n                }\n                else if (targetMouseEvent.element.style.textDecoration === 'underline') {\n                    return;\n                }\n                const cancellationToken = new CancellationTokenSource();\n                sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n                let currentHTMLChild;\n                getDefinitionsAtPosition(this._languageFeatureService.definitionProvider, this._editor.getModel(), new Position(lineNumber, column + 1), cancellationToken.token).then((candidateDefinitions => {\n                    if (cancellationToken.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (candidateDefinitions.length !== 0) {\n                        this._candidateDefinitionsLength = candidateDefinitions.length;\n                        const childHTML = targetMouseEvent.element;\n                        if (currentHTMLChild !== childHTML) {\n                            sessionStore.clear();\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                        else if (!currentHTMLChild) {\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                    }\n                    else {\n                        sessionStore.clear();\n                    }\n                }));\n            }\n            else {\n                sessionStore.clear();\n            }\n        }));\n        linkGestureStore.add(gesture.onCancel(() => {\n            sessionStore.clear();\n        }));\n        linkGestureStore.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.target.detail !== this.getId()) {\n                return;\n            }\n            if (e.hasTriggerModifier) {\n                // Control click\n                if (this._candidateDefinitionsLength > 1) {\n                    this._editor.revealPosition({ lineNumber: this._hoverOnLine, column: 1 });\n                }\n                this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\n            }\n            else if (!e.isRightClick) {\n                // Normal click\n                const position = { lineNumber: this._hoverOnLine, column: this._hoverOnColumn };\n                this._editor.revealPosition(position);\n                this._editor.setSelection(Range.fromPositions(position));\n                this._editor.focus();\n            }\n        })));\n        return linkGestureStore;\n    }\n    getCurrentLines() {\n        return this._lineNumbers;\n    }\n    setState(state) {\n        this._disposableStore.clear();\n        this._lineNumbers.length = 0;\n        dom.clearNode(this._rootDomNode);\n        this._lastLineRelativePosition = state.lastLineRelativePosition;\n        this._lineNumbers = state.lineNumbers;\n        this._renderRootNode();\n    }\n    _renderChildNode(index, line) {\n        const child = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        const minimapSide = this._editor.getOption(69 /* EditorOption.minimap */).side;\n        const lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n        const lineNumberOption = this._editor.getOption(64 /* EditorOption.lineNumbers */);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n        const sb = new StringBuilder(2000);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.className = 'sticky-line';\n        lineHTMLNode.classList.add(`stickyLine${line}`);\n        lineHTMLNode.style.lineHeight = `${lineHeight}px`;\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.className = 'sticky-line';\n        lineNumberHTMLNode.style.lineHeight = `${lineHeight}px`;\n        if (minimapSide === 'left') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft}px`;\n        }\n        const innerLineNumberHTML = document.createElement('span');\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n            innerLineNumberHTML.innerText = line.toString();\n        }\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n        }\n        innerLineNumberHTML.className = 'sticky-line-number';\n        innerLineNumberHTML.style.lineHeight = `${lineHeight}px`;\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n        if (minimapSide === 'left') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n        }\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        child.appendChild(lineNumberHTMLNode);\n        child.appendChild(lineHTMLNode);\n        child.className = 'sticky-line-root';\n        child.style.lineHeight = `${lineHeight}px`;\n        child.style.width = `${width}px`;\n        child.style.height = `${lineHeight}px`;\n        child.style.zIndex = '0';\n        // Special case for the last line of sticky scroll\n        if (index === this._lineNumbers.length - 1) {\n            child.style.position = 'relative';\n            child.style.zIndex = '-1';\n            child.style.top = this._lastLineRelativePosition + 'px';\n        }\n        this._disposableStore.add(dom.addDisposableListener(child, 'mouseover', (e) => {\n            if (this._editor.hasModel()) {\n                const mouseOverEvent = new StandardMouseEvent(e);\n                const text = mouseOverEvent.target.innerText;\n                this._hoverOnLine = line;\n                // TODO: workaround to find the column index, perhaps need a more solid solution\n                this._hoverOnColumn = this._editor.getModel().getLineContent(line).indexOf(text) + 1 || -1;\n            }\n        }));\n        return child;\n    }\n    _renderRootNode() {\n        if (!this._editor._getViewModel()) {\n            return;\n        }\n        for (const [index, line] of this._lineNumbers.entries()) {\n            this._rootDomNode.appendChild(this._renderChildNode(index, line));\n        }\n        const editorLineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n        const widgetHeight = this._lineNumbers.length * editorLineHeight + this._lastLineRelativePosition;\n        this._rootDomNode.style.display = widgetHeight > 0 ? 'block' : 'none';\n        this._rootDomNode.style.height = widgetHeight.toString() + 'px';\n        const minimapSide = this._editor.getOption(69 /* EditorOption.minimap */).side;\n        if (minimapSide === 'left') {\n            this._rootDomNode.style.marginLeft = this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth + 'px';\n        }\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        return this._rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n};\nStickyScrollWidget = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], StickyScrollWidget);\nexport { StickyScrollWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { localize } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ToggleStickyScroll extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.action.toggleStickyScroll',\n            title: {\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\n                original: 'Toggle Sticky Scroll',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n                title: localize('stickyScroll', \"Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarViewMenu, group: '5_editor', order: 2 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor.get(IConfigurationService);\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement, OutlineGroup } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, languageFeaturesService) {\n        super();\n        this._onDidChangeStickyScroll = this._store.add(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._sessionStore = new DisposableStore();\n        this._editor = editor;\n        this._languageFeaturesService = languageFeaturesService;\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n    readConfiguration() {\n        const options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._sessionStore.add(this._editor.onDidChangeModel(() => {\n                this.update();\n            }));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                this.update();\n            }));\n            this.update();\n        }\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateOutlineModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateOutlineModel(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            const isDifferentModel = this._model ? !isEqual(this._model.uri, model.uri) : false;\n            // clear sticky scroll to not show stale data for too long\n            const resetHandle = isDifferentModel ? setTimeout(() => {\n                if (!token.isCancellationRequested) {\n                    this._model = new StickyOutlineModel(model.uri, model.getVersionId(), undefined, undefined);\n                    this._onDidChangeStickyScroll.fire();\n                }\n            }, 75) : undefined;\n            // get elements from outline or folding model\n            const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            if (outlineModel.children.size !== 0) {\n                const { stickyOutlineElement, providerID } = StickyOutlineElement.fromOutlineModel(outlineModel, (_a = this._model) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n                this._model = new StickyOutlineModel(model.uri, modelVersionId, stickyOutlineElement, providerID);\n            }\n            else {\n                const foldingController = FoldingController.get(this._editor);\n                const foldingModel = yield (foldingController === null || foldingController === void 0 ? void 0 : foldingController.getFoldingModel());\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (foldingModel && foldingModel.regions.length !== 0) {\n                    const foldingElement = StickyOutlineElement.fromFoldingModel(foldingModel);\n                    this._model = new StickyOutlineModel(model.uri, modelVersionId, foldingElement, undefined);\n                }\n                else {\n                    this._model = undefined;\n                }\n            }\n            clearTimeout(resetHandle);\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromOutline(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromOutline(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromOutline(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromOutline(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };\nclass StickyOutlineElement {\n    static comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    static fromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(StickyOutlineElement.fromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(StickyOutlineElement.fromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this.comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyOutlineElement(range, children, undefined);\n    }\n    static fromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = StickyOutlineElement.findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this.comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(StickyOutlineElement.fromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyOutlineElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    static findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this.findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n    static fromFoldingModel(foldingModel) {\n        const regions = foldingModel.regions;\n        const length = regions.length;\n        let range;\n        const stackOfParents = [];\n        const stickyOutlineElement = new StickyOutlineElement(undefined, [], undefined);\n        let parentStickyOutlineElement = stickyOutlineElement;\n        for (let i = 0; i < length; i++) {\n            range = new StickyRange(regions.getStartLineNumber(i), regions.getEndLineNumber(i) + 1);\n            while (stackOfParents.length !== 0 && (range.startLineNumber < stackOfParents[stackOfParents.length - 1].startLineNumber || range.endLineNumber > stackOfParents[stackOfParents.length - 1].endLineNumber)) {\n                stackOfParents.pop();\n                if (parentStickyOutlineElement.parent !== undefined) {\n                    parentStickyOutlineElement = parentStickyOutlineElement.parent;\n                }\n            }\n            const child = new StickyOutlineElement(range, [], parentStickyOutlineElement);\n            parentStickyOutlineElement.children.push(child);\n            parentStickyOutlineElement = child;\n            stackOfParents.push(range);\n        }\n        return stickyOutlineElement;\n    }\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nclass StickyOutlineModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider, StickyRange } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, languageFeaturesService, instaService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._sessionStore = new DisposableStore();\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor, languageFeaturesService, instaService);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, languageFeaturesService);\n        this._widgetState = new StickyScrollWidgetState([], 0);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(109 /* EditorOption.stickyScroll */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._readConfiguration();\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n    }\n    _onContextMenu(event) {\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(109 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._renderStickyScroll()));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => this._renderStickyScroll()));\n            const lineNumberOption = this._editor.getOption(64 /* EditorOption.lineNumbers */);\n            if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => this._renderStickyScroll()));\n            }\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._renderStickyScroll();\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        this._stickyScrollWidget.getDomNode().style.width = `${width}px`;\n        // make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(63 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n        if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n            this._widgetState = this.getScrollWidgetState();\n            this._stickyScrollWidget.setState(this._widgetState);\n        }\n    }\n    getScrollWidgetState() {\n        const lineHeight = this._editor.getOption(63 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(109 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const lineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                    }\n                    if (lineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        return new StickyScrollWidgetState(lineNumbers, lastLineRelativePosition);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService)\n], StickyScrollController);\nexport { StickyScrollController };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    getItemsByProvider() {\n        this._ensureCachedState();\n        return this._itemsByProvider;\n    }\n    getIncompleteProvider() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, items] of this.getItemsByProvider()) {\n            if (items.length > 0 && items[0].container.incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._itemsByProvider = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // keep all items by their provider\n            const arr = this._itemsByProvider.get(item.provider);\n            if (arr) {\n                arr.push(item);\n            }\n            else {\n                this._itemsByProvider.set(item.provider, [item]);\n            }\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nclass CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.providerItemsToReuse = providerItemsToReuse;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nexport { CompletionOptions };\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            // we have items from a previous session that we can reuse\n            const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\n            if (reuseItems) {\n                reuseItems.forEach(item => result.push(item));\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                // we have items from a previous session that we can reuse\n                if (options.providerItemsToReuse.has(provider)) {\n                    const items = options.providerItemsToReuse.get(provider);\n                    items.forEach(item => result.push(item));\n                    didAddResult = didAddResult || items.length > 0;\n                    return;\n                }\n                // check if this provider is filtered out\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter: triggerCharacter !== null && triggerCharacter !== void 0 ? triggerCharacter : undefined, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(117 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(117 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, model, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(model.onDidSuggest(e => {\n            if (e.completionModel.items.length === 0) {\n                this.reset();\n            }\n        }));\n        this._disposables.add(model.onDidCancel(e => {\n            this.reset();\n        }));\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { assertType } from '../../../../base/common/types.js';\nexport class LineContext {\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n    constructor(model, position, triggerOptions) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.triggerOptions = triggerOptions;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(112 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    var _a, _b;\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions', { overrideIdentifier: (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId(), resource: (_b = editor.getModel()) === null || _b === void 0 ? void 0 : _b.uri });\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    var _a, _b;\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters', { overrideIdentifier: (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId(), resource: (_b = editor.getModel()) === null || _b === void 0 ? void 0 : _b.uri });\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._triggerState = undefined;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing && this._triggerState !== undefined) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(86 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(115 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            var _a;\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const providerItemsToReuse = new Map();\n                if (this._completionModel) {\n                    for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                        if (!supports.has(provider)) {\n                            providerItemsToReuse.set(provider, items);\n                        }\n                    }\n                }\n                this.trigger({\n                    auto: true,\n                    triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                    triggerCharacter: lastChar,\n                    retrigger: Boolean(this._completionModel),\n                    clipboardText: (_a = this._completionModel) === null || _a === void 0 ? void 0 : _a.clipboardText,\n                    completionOptions: { providerFilter: supports, providerItemsToReuse }\n                });\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        if (!this._triggerState) {\n            return 0 /* State.Idle */;\n        }\n        else if (!this._triggerState.auto) {\n            return 1 /* State.Manual */;\n        }\n        else {\n            return 2 /* State.Auto */;\n        }\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._triggerState !== undefined) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._triggerState = undefined;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._triggerState !== undefined) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._triggerState.auto, retrigger: true });\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._triggerState === undefined) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(84 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._triggerState !== undefined) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(84 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true });\n        }, this._editor.getOption(85 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        assertType(this._editor.hasModel());\n        assertType(this._triggerState !== undefined);\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const ctx = new LineContext(model, position, Object.assign(Object.assign({}, this._triggerState), { refilter: true }));\n        this._onNewContext(ctx);\n    }\n    trigger(options) {\n        var _a, _b, _c, _d, _e, _f;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const ctx = new LineContext(model, this._editor.getPosition(), options);\n        // Cancel previous requests, change state & update UI\n        this.cancel(options.retrigger);\n        this._triggerState = options;\n        this._onDidTrigger.fire({ auto: options.auto, shy: (_a = options.shy) !== null && _a !== void 0 ? _a : false, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_b = options.triggerKind) !== null && _b !== void 0 ? _b : 0 /* CompletionTriggerKind.Invoke */ };\n        if (options.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: options.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(106 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, (_d = (_c = options.completionOptions) === null || _c === void 0 ? void 0 : _c.kindFilter) !== null && _d !== void 0 ? _d : itemKindFilter, (_e = options.completionOptions) === null || _e === void 0 ? void 0 : _e.providerFilter, (_f = options.completionOptions) === null || _f === void 0 ? void 0 : _f.providerItemsToReuse, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            (_g = this._requestToken) === null || _g === void 0 ? void 0 : _g.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = options === null || options === void 0 ? void 0 : options.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._triggerState === undefined) {\n                return;\n            }\n            const model = this._editor.getModel();\n            // const items = completions.items;\n            // if (existing) {\n            // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\n            // \titems = items.concat(existing.items).sort(cmpFn);\n            // }\n            const ctx = new LineContext(model, this._editor.getPosition(), options);\n            const fuzzySearchOptions = Object.assign(Object.assign({}, FuzzyScoreOptions.default), { firstMatchCanBeWeak: !this._editor.getOption(112 /* EditorOption.suggest */).matchOnWordStartOnly });\n            this._completionModel = new CompletionModel(completions.items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(112 /* EditorOption.suggest */), this._editor.getOption(106 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(106 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(112 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\n            const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n            if (shouldAutoTrigger && this._context) {\n                // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                // suggestions to be cancelled, which causes `this._context` to be undefined\n                const map = this._completionModel.getItemsByProvider();\n                this.trigger({\n                    auto: this._context.triggerOptions.auto,\n                    retrigger: true,\n                    clipboardText: this._completionModel.clipboardText,\n                    completionOptions: { providerItemsToReuse: map }\n                });\n            }\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const providerItemsToReuse = new Map();\n            const providerFilter = new Set();\n            for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                if (items.length > 0 && items[0].container.incomplete) {\n                    providerFilter.add(provider);\n                }\n                else {\n                    providerItemsToReuse.set(provider, items);\n                }\n            }\n            this.trigger({\n                auto: this._context.triggerOptions.auto,\n                triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\n                retrigger: true,\n                clipboardText: this._completionModel.clipboardText,\n                completionOptions: { providerFilter, providerItemsToReuse }\n            });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n                if (!this._context) {\n                    // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                    // suggestions to be cancelled, which causes `this._context` to be undefined\n                    this.cancel();\n                    return;\n                }\n                if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n                    return;\n                }\n                if (!this._context.triggerOptions.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                triggerOptions: ctx.triggerOptions,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nclass OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._locked = false;\n        this._disposables.add(editor.onWillType(() => {\n            if (this._locked || !editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                if (this._lastOvertyped.length !== 0) {\n                    this._lastOvertyped.length = 0;\n                }\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n        }));\n        this._disposables.add(suggestModel.onDidTrigger(e => {\n            this._locked = true;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            this._locked = false;\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\nexport { OvertypingCapturer };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\n        this._menuId = _menuId;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IMenuService),\n    __param(4, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(47 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(47 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(113 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(114 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(114 /* EditorOption.suggestLineHeight */) || this._editor.getOption(47 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const disposables = new DisposableStore();\n        const root = container;\n        root.classList.add('show-file-icons');\n        const icon = append(container, $('.icon'));\n        const colorspan = append(icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        const iconContainer = append(main, $('.icon-label.codicon'));\n        const left = append(main, $('span.left'));\n        const right = append(main, $('span.right'));\n        const iconLabel = new IconLabel(left, { supportHighlights: true, supportIcons: true });\n        disposables.add(iconLabel);\n        const parametersLabel = append(left, $('span.signature-label'));\n        const qualifierLabel = append(left, $('span.qualifier-label'));\n        const detailsLabel = append(right, $('span.details-label'));\n        const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(47 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(113 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(114 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            root.style.fontSize = fontSizePx;\n            root.style.fontWeight = fontWeight;\n            root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            icon.style.height = lineHeightPx;\n            icon.style.width = lineHeightPx;\n            readMore.style.height = lineHeightPx;\n            readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(47 /* EditorOption.fontInfo */) || e.hasChanged(113 /* EditorOption.suggestFontSize */) || e.hasChanged(114 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return { root, left, right, icon, colorspan, iconLabel, iconContainer, parametersLabel, qualifierLabel, detailsLabel, readMore, disposables };\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(112 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._pendingLayout = new MutableDisposable();\n        this._pendingShowDetails = new MutableDisposable();\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new PauseableEmitter();\n        this._onDidFocus = new PauseableEmitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(112 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._list.style(getListStyles({\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(112 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(112 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._pendingLayout.dispose();\n        this._pendingShowDetails.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        // calling list.splice triggers focus event which this widget forwards. That can lead to\n        // suggestions being cancelled and the widget being cleared (and hidden). All this happens\n        // before revealing and focusing is done which means revealing and focusing will fail when\n        // they get run.\n        this._onDidFocus.pause();\n        this._onDidSelect.pause();\n        try {\n            this._list.splice(0, this._list.length, this._completionModel.items);\n            this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus(noFocus ? [] : [selectionIndex]);\n        }\n        finally {\n            this._onDidFocus.resume();\n            this._onDidSelect.resume();\n        }\n        this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingLayout.clear();\n            this._layout(this.element.size);\n            // Reset focus border\n            this._details.widget.domNode.classList.remove('focused');\n        });\n    }\n    focusSelected() {\n        if (this._list.length > 0) {\n            this._list.setFocus([0]);\n        }\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel\n            && this._list.getFocus().length > 0) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._pendingShowDetails.clear();\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingShowDetails.clear();\n            this._details.show();\n            if (loading) {\n                this._details.widget.renderLoading();\n            }\n            else {\n                this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n            }\n            this._positionDetails();\n            this.editor.focus();\n            this.element.domNode.classList.add('shows-details');\n        });\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        this._pendingLayout.clear();\n        this._pendingShowDetails.clear();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.height = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(47 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(114 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(112 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // default selector\n        this._selectors.register({\n            priority: 0,\n            select: (model, pos, items) => this._memoryService.select(model, pos, items)\n        });\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(112 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(112 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeyCodeChord().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            var _a;\n            if (e.triggerOptions.shy) {\n                return;\n            }\n            let index = -1;\n            for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                if (index !== -1) {\n                    break;\n                }\n            }\n            if (index === -1) {\n                index = 0;\n            }\n            let noFocus = false;\n            if (e.triggerOptions.auto) {\n                // don't \"focus\" item when configured to do so or when in snippet mode (and configured to do so)\n                const options = this.editor.getOption(112 /* EditorOption.suggest */);\n                if (options.snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this.editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n                    // SPECIAL: in snippet mode, we never focus unless the user wants to\n                    noFocus = true;\n                }\n                else if (options.selectionMode === 'never' || options.selectionMode === 'always') {\n                    // simple: always or never\n                    noFocus = options.selectionMode === 'never';\n                }\n                else if (options.selectionMode === 'whenTriggerCharacter') {\n                    // on with trigger character\n                    noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\n                }\n                else if (options.selectionMode === 'whenQuickSuggestion') {\n                    // without trigger character or when refiltering\n                    noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        // cancel -> stops all listening and closes widget\n        this.model.cancel();\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (item.completion.command) {\n            if (item.completion.command.id === TriggerSuggestAction.id) {\n                // retigger\n                this.model.trigger({ auto: true, retrigger: true });\n            }\n            else {\n                // exec command, done\n                tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            }\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(112 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({\n                auto: auto !== null && auto !== void 0 ? auto : false,\n                completionOptions: { providerFilter: onlyFrom, kindFilter: noFilter ? new Set() : undefined }\n            });\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    focusSuggestion() {\n        this.widget.value.focusSelected();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nclass TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nexport { TriggerSuggestAction };\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: x => x.focusSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusAndAcceptSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: c => {\n        c.focusSuggestion();\n        c.acceptSelectedSuggestion(true, false);\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(84 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(112 /* EditorOption.suggest */, model), this._getEditorOption(106 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nclass WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(112 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\nexport { WordDistance };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './symbolIcons.css';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nclass ToggleTabFocusModeAction extends Action2 {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            title: { value: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, 'Toggle Tab Key Moves Focus'), original: 'Toggle Tab Key Moves Focus' },\n            precondition: undefined,\n            keybinding: {\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true\n        });\n    }\n    run(accessor) {\n        const context = accessor.get(IContextKeyService).getContextKeyValue('focusedView') === 'terminal' ? \"terminalFocus\" /* TabFocusContext.Terminal */ : \"editorFocus\" /* TabFocusContext.Editor */;\n        const oldValue = TabFocus.getTabFocusMode(context);\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue, context);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nexport { ToggleTabFocusModeAction };\nregisterAction2(ToggleTabFocusModeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch(true);\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(119 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(119 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(119 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 4;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */:\n                    reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    break;\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], false, index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nclass DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport { DisableHighlightingOfAmbiguousCharactersAction };\nclass DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport { DisableHighlightingOfInvisibleCharactersAction };\nclass DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport { DisableHighlightingOfNonBasicAsciiCharactersAction };\nclass ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nexport { ShowExcludeOptions };\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._isPresentingDialog = false;\n        this._config = this._editor.getOption(120 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(120 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(120 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n        this._checkForUnusualLineTerminators();\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(86 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            if (this._isPresentingDialog) {\n                // we're currently showing the dialog, which is async.\n                // avoid spamming the user\n                return;\n            }\n            let result;\n            try {\n                this._isPresentingDialog = true;\n                result = yield this._dialogService.confirm({\n                    title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                    message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                    detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                    primaryButton: nls.localize({ key: 'unusualLineTerminators.fix', comment: ['&& denotes a mnemonic'] }, \"&&Remove Unusual Line Terminators\"),\n                    cancelButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n                });\n            }\n            finally {\n                this._isPresentingDialog = false;\n            }\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n"],"names":["_a","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","ToggleStickyScroll","_Action","_inherits","_super","_createSuper","_classCallCheck","call","id","title","localize","mnemonicTitle","key","comment","original","category","Categories","toggled","condition","ContextKeyExpr","menu","MenuId","group","order","_createClass","accessor","this","_regeneratorRuntime","mark","_callee","configurationService","newValue","wrap","_context","prev","get","IConfigurationService","getValue","abrupt","updateValue","stop","Action2","__decorate","decorators","target","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","StickyScrollWidgetState","lineNumbers","lastLineRelativePosition","_ttPolicy","window","trustedTypes","createPolicy","createHTML","StickyScrollWidget","_Disposable","_editor","_languageFeatureService","_instaService","_this","_rootDomNode","document","createElement","_disposableStore","_register","DisposableStore","_lineNumbers","_lastLineRelativePosition","_hoverOnLine","_hoverOnColumn","_candidateDefinitionsLength","_layoutInfo","getLayoutInfo","className","classList","toggle","EmbeddedCodeEditorWidget","style","width","concat","minimap","minimapCanvasOuterWidth","verticalScrollbarWidth","_updateLinkGesture","_this2","linkGestureStore","sessionStore","add","gesture","ClickLinkGesture","onMouseMoveOrRelevantKeyDown","_ref","_ref2","_slicedToArray","mouseEvent","hasModel","hasTriggerModifier","targetMouseEvent","detail","getId","element","innerText","innerHTML","text","lineNumber","column","stickyPositionProjectedOnEditor","Range","equalsRange","_stickyRangeProjectedOnEditor","textDecoration","clear","currentHTMLChild","cancellationToken","CancellationTokenSource","toDisposable","dispose","getDefinitionsAtPosition","definitionProvider","getModel","Position","token","candidateDefinitions","isCancellationRequested","childHTML","onCancel","onExecute","position","revealPosition","invokeFunction","goToDefinitionWithLocation","uri","range","isRightClick","setSelection","focus","state","dom","clearNode","_renderRootNode","index","line","actualInlineDecorations","_this3","child","viewModel","_getViewModel","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","lineRenderingData","getViewLineRenderingData","layoutInfo","minimapSide","getOption","side","lineHeight","lineNumberOption","LineDecoration","inlineDecorations","minColumn","maxColumn","err","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","StringBuilder","renderViewLine","build","lineHTMLNode","lineNumberHTMLNode","contentLeft","innerLineNumberHTML","renderType","toString","Math","abs","getPosition","lineNumbersWidth","paddingLeft","lineNumbersLeft","appendChild","applyFontInfo","height","zIndex","top","addDisposableListener","StandardMouseEvent","getLineContent","indexOf","_step","_iterator","_createForOfIteratorHelper","entries","s","n","_step$value","_renderChildNode","f","editorLineHeight","widgetHeight","display","marginLeft","preference","Disposable","ILanguageFeaturesService","IInstantiationService","StickyRange","startLineNumber","endLineNumber","StickyLineCandidate","nestingDepth","StickyLineCandidateProvider","editor","languageFeaturesService","_onDidChangeStickyScroll","_store","Emitter","onDidChangeStickyScroll","event","_sessionStore","_languageFeaturesService","_updateSoon","RunOnceScheduler","update","onDidChangeConfiguration","hasChanged","readConfiguration","_get","_getPrototypeOf","prototype","enabled","onDidChangeModel","onDidChangeHiddenAreas","onDidChangeModelContent","schedule","documentSymbolProvider","onDidChange","_model","version","_cts","updateOutlineModel","fire","_callee2","model","modelVersionId","isDifferentModel","resetHandle","outlineModel","_StickyOutlineElement","stickyOutlineElement","providerID","foldingController","foldingModel","foldingElement","_context2","getVersionId","isEqual","setTimeout","StickyOutlineModel","undefined","OutlineModel","sent","children","size","StickyOutlineElement","fromOutlineModel","outlineProviderId","FoldingController","getFoldingModel","regions","fromFoldingModel","clearTimeout","depth","lastStartLineNumber","lastLine","childrenStartLines","push","lowerBound","updateIndex","binarySearch","a","b","upperBound","childStartLine","childEndLine","getCandidateStickyLinesIntersectingFromOutline","_b","stickyLineCandidates","hiddenRanges","getHiddenAreas","_loop","hiddenRange","filter","stickyLine","parent","range1","range2","outlineElement","previousStartLine","_step2","_this4","_iterator2","values","symbol","selectionRange","fromOutlineElement","_step3","_iterator3","subchild","sort","child1","child2","comparator","preferredProvider","outlineElements","_this5","Iterable","OutlineGroup","provider","outlineGroupOfModel","_step4","tempID","maxTotalSumOfRanges","optimalOutlineGroup","_iterator4","_step4$value","outlineGroup","totalSumRanges","findSumOfRangesOfGroup","_step5","stickyChildren","outlineElementsArray","Array","from","element1","element2","_iterator5","outline","_step6","res","_iterator6","OutlineElement","stackOfParents","parentStickyOutlineElement","getStartLineNumber","getEndLineNumber","pop","StickyScrollController","_contextMenuService","instaService","_maxStickyLines","Number","MAX_SAFE_INTEGER","_stickyScrollWidget","_stickyLineCandidateProvider","_widgetState","_readConfiguration","getDomNode","EventType","CONTEXT_MENU","_assertThisInitialized","_onContextMenu","showContextMenu","menuId","getAnchor","removeOverlayWidget","addOverlayWidget","onDidScrollChange","_renderStickyScroll","onDidLayoutChange","_onDidResize","onDidChangeModelTokens","_onTokensChange","onDidChangeCursorPosition","stickyLineNumbers","getCurrentLines","stickyLineNumber","ranges","fromLineNumber","toLineNumber","_needsUpdate","theoreticalLines","round","stickyLineVersion","getScrollWidgetState","setState","maxNumberStickyLines","min","maxLineCount","scrollTop","getScrollTop","arrayVisibleRanges","getVisibleRanges","fullVisibleRange","candidateRanges","getCandidateStickyLinesIntersecting","start","end","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","ID","IContextMenuService","registerEditorContribution","registerAction2","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","options","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","clipboardText","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_options","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","set","_filteredItems","_ensureCachedState","_itemsByProvider","Set","getItemsByProvider","container","incomplete","_stats","_createCachedState","Map","labelLengths","_this$_lineContext","word","wordLow","source","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","item","isInvalid","arr","overwriteBefore","editStart","wordLen","slice","toLowerCase","score","FuzzyScore","wordPos","ch","charCodeAt","completion","filterText","match","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","idx","distance","pLabelLen","quickSelect","kind","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","RawContextKey","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","type","description","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","label","sortTextLow","sortText","extensionId","startColumn","editInsertEnd","endColumn","editReplaceEnd","insert","replace","resolveCompletionItem","_resolveCache","_isResolved","sub","onCancellationRequested","assign","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","providerItemsToReuse","showDeprecated","getSnippetSuggestSupport","default","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","registry","context","triggerKind","CancellationToken","_callee4","sw","defaultReplaceRange","defaultRange","disposables","onCompletionList","snippetCompletions","_context5","StopWatch","clone","getWordAtPosition","setEndPosition","_c","didAddResult","suggestions","suggestion","has","tags","includes","insertTextRules","SnippetParser","insertText","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","reuseItems","list","forEach","provideCompletionItems","orderedGroups","providerGroup","_context4","all","map","_callee3","_sw","_context3","t0","onUnexpectedExternalError","delegateYield","t1","finish","CancellationError","snippetConfig","_snippetComparators","defaultComparator","showSimpleSuggestions","getContribution","triggerSuggest","CommandsRegistry","_len","args","_key","_callee5","triggerCharacter","maxItemsToResolve","_accessor$get","completionProvider","ref","_result","resolving","completions","_context6","assertType","URI","ITextModelService","createModelReference","object","textEditorModel","QuickSuggestionsOptions","config","other","comments","strings","tokenType","WordContextKey","contextKeyService","_enabled","_ckAtEnd","AtEnd","bindTo","_configListener","_update","_selectionListener","reset","checkForWordEnd","selection","getSelection","getStartPosition","onDidChangeCursorSelection","IContextKeyService","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","_move","fwd","newIndex","additionalTextEdits","CommitCharacterController","widget","accept","_disposables","onDidSuggest","completionModel","onDidCancel","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","triggerOptions","substr","leadingWord","getWordUntilPosition","pos","tokenization","tokenizeIfCheap","isNaN","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_logService","_contextKeyService","_configurationService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_triggerState","_completionDisposables","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidTrigger","_telemetryGate","_currentSelection","Selection","_updateTriggerCharacters","cancel","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","Boolean","getContextKeyValue","allowQuickSuggestions","overrideIdentifier","getLanguageId","resource","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","charAt","supports","_completionModel","_step2$value","trigger","auto","retrigger","completionOptions","onDidType","_requestToken","prevSelection","isEmpty","reason","containsRange","getEndPosition","isBeforeOrEqual","_doTriggerQuickSuggest","cancelAndSet","hasWidgetFocus","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","max","canShowQuickSuggest","ctx","refilter","_onNewContext","_d","_e","_f","shy","suggestCtx","_SuggestModel$_create","_createSuggestFilter","itemKindFilter","itemKind","WordDistance","_g","fuzzySearchOptions","readText","firstMatchCanBeWeak","matchOnWordStartOnly","_reportDurationsTelemetry","catch","onUnexpectedError","publicLog2","data","JSON","stringify","debug","getLeadingWhitespace","getIncompleteProvider","oldLineContext","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","OvertypingCapturer","suggestModel","_lastOvertyped","_locked","selections","getSelections","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","getValueInRange","multiline","StatusBarViewItem","_MenuEntryActionViewI","kb","_keybindingService","lookupKeybinding","_action","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","_menuId","instantiationService","_menuService","_menuDisposables","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","domNode","remove","createMenu","left","right","getActions","actions","_toConsumableArray","renderMenu","IMenuService","canExpandCompletionItem","documentation","SuggestDetailsWidget","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","ThemeIcon","Codicon","nls","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","_item$completion","md","join","MarkdownString","appendCodeblock","cappedDetail","show","test","hide","renderedContents","render","onDidRenderAsync","clientHeight","userSelect","tabIndex","onmousedown","preventDefault","stopPropagation","onclick","clearContents","newSize","equals","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","dimension","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","info","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","find","p","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","_completionItemColor","ColorExtractor","out","_regexStrict","_regexRelaxed","exec","RegExp","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","configureFont","letterSpacing","letterSpacingPx","backgroundColor","labelOptions","labelEscapeNewLines","matches","createMatches","color","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","path","FileKind","detailClasses","extraClasses","hasFolderIcons","flat","_data$iconContainer$c","CompletionItemKinds","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorSuggestWidgetForeground","editorForeground","quickInputListFocusForeground","quickInputListFocusIconForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusBackground","listHighlightForeground","listFocusHighlightForeground","transparent","PersistedWidgetSize","_service","getEditorType","raw","obj","parse","is","lift","store","SuggestWidget","_storageService","_state","_isAuto","_pendingLayout","MutableDisposable","_pendingShowDetails","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","PauseableEmitter","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_resize","south","east","_this$getLayoutInfo","itemHeight","defaultSize","threshold","_this$element$size","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","_item$completion$labe","isResolved","_isDetailsVisible","docs","getListStyles","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","_status","applyStatusBarStyle","showStatusBar","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","contains","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","createCancelablePromise","loading","disposableTimeout","showDetails","splice","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","noFocus","_this6","visibleCount","pause","resume","runAtThisOrScheduleAtNextAnimationFrame","pageDown","focusNextPage","focusNext","scrollBottom","focusLast","pageUp","focusPreviousPage","focusPrevious","focusFirst","getFocus","getFocusedElements","_setDetailsVisible","_this7","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","_this$element$maxSize","placeAtAnchor","clamp","getBoolean","IStorageService","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_this$_widget$element","_this$_widget$getLayo","_afterRender","LineSuffix","getLineMaxColumn","offset","getOffsetAt","getPositionAt","_marker","deltaDecorations","stickiness","isDisposed","getDecorationRange","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","_selectors","PriorityRegistry","priority","register","select","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeyCodeChord","KeyCodeChord","platform","isModifierKey","_overtypingCapturer","_alternatives","showTriggered","itemsOrderedByPriorityDesc","snippetsPreventQuickSuggestions","SnippetController2","isInSnippet","selectionMode","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","getAlternativeVersionId","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","isArray","scrollState","StableEditorScrollState","executeEdits","edit","EditOperation","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","isFlush","changes","change","thisPosition","oldFlags","didType","typeListener","some","applied","trace","_this$_commandService","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","overtypingCapturer","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","finally","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","split","basenameHash","hash","basename","languageId","fileExtension","extname","toggleMode","delta","msg","alert","onlyFrom","noFilter","arg","positionNow","fallback","Event","_","listener","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","focusSelected","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","ISuggestMemoryService","ICommandService","prioritySelector","Error","s1","s2","_EditorAction","alias","precondition","EditorContextKeys","kbOpts","kbExpr","primary","secondary","mac","weight","_accessor","controller","EditorAction","registerEditorAction","SuggestCommand","EditorCommand","registerEditorCommand","handler","x","acceptSelectedSuggestion","menuOpts","when","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","focusSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","toNegated","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","_EditorAction2","_class","_super2","resetWidgetSize","SuggestInlineCompletion","InlineCompletionResults","_RefCountedDisposable","_suggestMemoryService","selectedIndex","first","second","resolveCount","CompletionItemInsertTextRule","snippet","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","selectedSuggestionInfo","_getTriggerCharacterInfo","_lastResult","canBeReused","acquire","providers","boostFullMatch","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","Memory","name","topScore","_items$i","preselect","NoMemory","_Memory","LRUMemory","_Memory2","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","PrefixMemory","_Memory3","_super3","_trie","TernarySearchTree","findSubstr","_items$i$completion","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","_withStrategy","mode","getLanguageIdAtPosition","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","_yield$BracketSelecti","_yield$BracketSelecti2","wordRanges","wordUntilPos","localityBonus","None","canComputeWordRanges","BracketSelectionRangeProvider","provideSelectionRanges","computeWordRanges","_WordDistance","wordLines","isFalsyOrEmpty","bestWordRange","blockDistance","_WordDistance2","_class2","foreground","ToggleTabFocusModeAction","keybinding","f1","TabFocus","ForceRetokenizeAction","resetTokenization","forceTokenization","getLineCount","console","log","BannerController","banner","Banner","setBanner","onClose","_Disposable2","markdownRenderer","ariaLabel","message","setAttribute","messageContainer","getBannerMessage","messageActionsContainer","Link","actionBarContainer","actionBar","Action","widgetClose","setFocusable","warningIcon","UnicodeHighlighter","_workspaceTrustService","_highlighter","_bannerClosed","_updateState","hasMore","ambiguousCharacterCount","nonBasicAsciiCharacterCount","invisibleCharacterCount","DisableHighlightingOfNonBasicAsciiCharactersAction","DisableHighlightingOfAmbiguousCharactersAction","DisableHighlightingOfInvisibleCharactersAction","_bannerController","shortLabel","href","_updateHighlighter","onDidChangeTrust","trusted","nonBasicASCII","inUntrustedWorkspace","ambiguousCharacters","invisibleCharacters","includeComments","includeStrings","allowedCharacters","allowedLocales","resolveOptions","isWorkspaceTrusted","every","option","highlightOptions","allowedCodePoints","keys","codePointAt","locale","Intl","NumberFormat","resolvedOptions","canComputeUnicodeHighlights","DocumentUnicodeHighlighter","ViewportUnicodeHighlighter","decoration","getDecorationInfo","IWorkspaceTrustManagementService","_decorations","createDecorationsCollection","mightContainNonBasicASCII","computedUnicodeHighlights","decorations","Decorations","instance","getDecorationFromOptions","isModelDecorationVisible","computeReason","inComment","isModelDecorationInComment","inString","isModelDecorationInString","_Disposable3","totalResult","UnicodeTextModelHighlighter","UnicodeHighlighterHoverParticipant","_openerService","hoverOrdinal","lineDecorations","unicodeHighlighter","highlightInfo","codePoint","codePointStr","formatCodePointMarkdown","confusableWith","adjustSettingsArgs","adjustSettings","ShowExcludeOptions","encodeURIComponent","markdown","appendMarkdown","appendText","appendLink","MarkdownHover","hoverParts","renderMarkdownHovers","codePointToHex","padStart","InvisibleCharacters","String","fromCodePoint","renderCodePointAsInlineCode","char","IOpenerService","getDecoration","hideInComments","hideInStrings","ModelDecorationOptions","showIfCollapsed","overviewRuler","hideInCommentTokens","hideInStringTokens","DisableHighlightingInCommentsAction","_super4","runAction","unicodeHighlightConfigKeys","DisableHighlightingInStringsAction","_super5","_EditorAction3","_super6","_callee6","_EditorAction4","_super7","_this8","_callee7","_context7","_callee8","_context8","_EditorAction5","_super8","_this9","_callee9","_context9","_callee10","_context10","_EditorAction6","_super9","_callee17","quickPickService","getExcludeCharFromBeingHighlightedLabel","_action2","_action3","_action4","_this10","_context18","IQuickInputService","notAmbiguousInLocales","_context12","run","_callee11","_context11","excludeLocaleFromBeingHighlighted","excludeCharFromBeingHighlighted","_callee12","_context13","_callee13","_context14","_callee14","_context15","_callee15","_context16","_callee16","_context17","expectNever","pick","charCodes","_callee18","existingValue","_iterator7","_step7","charCode","_context19","locales","_callee19","_iterator8","_step8","_context20","inspect","user","HoverParticipantRegistry","ignoreUnusualLineTerminators","writeIgnoreState","codeEditorService","setModelProperty","readIgnoreState","getModelProperty","UnusualLineTerminatorsDetector","_dialogService","_codeEditorService","_isPresentingDialog","_config","_checkForUnusualLineTerminators","isUndoing","mightContainUnusualLineTerminators","removeUnusualLineTerminators","confirm","primaryButton","cancelButton","confirmed","IDialogService"],"sourceRoot":""}