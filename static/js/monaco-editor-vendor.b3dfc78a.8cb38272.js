"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[632],{93127:function(e,t,i){i.r(t),i.d(t,{CommonFindController:function(){return Ct},FindController:function(){return wt},MatchFindAction:function(){return It},MoveToMatchFindAction:function(){return Et},NextMatchFindAction:function(){return Ft},NextSelectionMatchFindAction:function(){return Dt},PreviousMatchFindAction:function(){return Mt},PreviousSelectionMatchFindAction:function(){return At},SelectionMatchFindAction:function(){return Ot},StartFindAction:function(){return kt},StartFindReplaceAction:function(){return Tt},StartFindWithArgsAction:function(){return Rt},StartFindWithSelectionAction:function(){return xt},getSelectionSearchString:function(){return bt}});var n=i(74165),o=i(15671),r=i(43144),s=i(11752),a=i(61120),c=i(60136),d=i(27277),l=i(71049),h=i(65096),u=i(31906),g=i(95253),_=i(59881),p=i(98926),f=i(20329),v=i(38102),m=i(18424),S=i(65631),y=i(17429),b=i(96601),C=i(25717),w=i(93433),k=i(37762),N=i(78519),R=i(43980),x=i(41335),I=function(){function e(t){(0,o.Z)(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return(0,r.Z)(e,[{key:"dispose",value:function(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getDecorationRangeAt",value:function(e){var t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}},{key:"getCurrentMatchesPosition",value:function(t){var i,n=this._editor.getModel().getDecorationsInRange(t),o=(0,k.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=r.options;if(s===e._FIND_MATCH_DECORATION||s===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(r.id)}}catch(a){o.e(a)}finally{o.f()}return 0}},{key:"setCurrentFindMatch",value:function(t){var i=this,n=null,o=0;if(t)for(var r=0,s=this._decorations.length;r<s;r++){var a=this._editor.getModel().getDecorationRange(this._decorations[r]);if(t.equalsRange(a)){n=this._decorations[r],o=r+1;break}}return null===this._highlightedDecorationId&&null===n||this._editor.changeDecorations((function(t){if(null!==i._highlightedDecorationId&&(t.changeDecorationOptions(i._highlightedDecorationId,e._FIND_MATCH_DECORATION),i._highlightedDecorationId=null),null!==n&&(i._highlightedDecorationId=n,t.changeDecorationOptions(i._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==i._rangeHighlightDecorationId&&(t.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),null!==n){var o=i._editor.getModel().getDecorationRange(n);if(o.startLineNumber!==o.endLineNumber&&1===o.endColumn){var r=o.endLineNumber-1,s=i._editor.getModel().getLineMaxColumn(r);o=new y.e(o.startLineNumber,o.startColumn,r,s)}i._rangeHighlightDecorationId=t.addDecoration(o,e._RANGE_HIGHLIGHT_DECORATION)}})),o}},{key:"set",value:function(t,i){var n=this;this._editor.changeDecorations((function(o){var r=e._FIND_MATCH_DECORATION,s=[];if(t.length>1e3){r=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=n._editor.getModel().getLineCount(),c=n._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c)),l=t[0].range.startLineNumber,h=t[0].range.endLineNumber,u=1,g=t.length;u<g;u++){var _=t[u].range;h+d>=_.startLineNumber?_.endLineNumber>h&&(h=_.endLineNumber):(s.push({range:new y.e(l,1,h,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),l=_.startLineNumber,h=_.endLineNumber)}s.push({range:new y.e(l,1,h,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var p=new Array(t.length),f=0,v=t.length;f<v;f++)p[f]={range:t[f].range,options:r};n._decorations=o.deltaDecorations(n._decorations,p),n._overviewRulerApproximateDecorations=o.deltaDecorations(n._overviewRulerApproximateDecorations,s),n._rangeHighlightDecorationId&&(o.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),n._findScopeDecorationIds.length&&(n._findScopeDecorationIds.forEach((function(e){return o.removeDecoration(e)})),n._findScopeDecorationIds=[]),(null===i||void 0===i?void 0:i.length)&&(n._findScopeDecorationIds=i.map((function(t){return o.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,i=this._decorations.length;t<i;t++){var n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];(t=(t=t.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length)&&(e=t).push.apply(e,(0,w.Z)(this._findScopeDecorationIds));return this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}();I._CURRENT_FIND_MATCH_DECORATION=N.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(R.Fm_),position:f.sh.Center},minimap:{color:(0,x.EN)(R.SUY),position:f.F5.Inline}}),I._FIND_MATCH_DECORATION=N.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(R.Fm_),position:f.sh.Center},minimap:{color:(0,x.EN)(R.SUY),position:f.F5.Inline}}),I._FIND_MATCH_NO_OVERVIEW_DECORATION=N.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),I._FIND_MATCH_ONLY_OVERVIEW_DECORATION=N.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,x.EN)(R.Fm_),position:f.sh.Center}}),I._RANGE_HIGHLIGHT_DECORATION=N.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),I._FIND_SCOPE_DECORATION=N.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});var F=function(){function e(t,i,n){(0,o.Z)(this,e),this._editorSelection=t,this._ranges=i,this._replaceStrings=n,this._trackedEditorSelectionId=null}return(0,r.Z)(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var i=[],n=0;n<this._ranges.length;n++)i.push({range:this._ranges[n],text:this._replaceStrings[n]});i.sort((function(e,t){return y.e.compareRangesUsingStarts(e.range,t.range)}));for(var o=[],r=i[0],s=1;s<i.length;s++)r.range.endLineNumber===i[s].range.startLineNumber&&r.range.endColumn===i[s].range.startColumn?(r.range=r.range.plusRange(i[s].range),r.text=r.text+i[s].text):(o.push(r),r=i[s]);o.push(r);for(var a=0,c=o;a<c.length;a++){var d=c[a];t.addEditOperation(d.range,d.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}(),M=i(3498),E=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.staticValue=t,this.kind=0})),O=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.pieces=t,this.kind=1})),D=function(){function e(t){(0,o.Z)(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new E(t[0].staticValue):this._state=new O(t):this._state=new E("")}return(0,r.Z)(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,i){if(0===this._state.kind)return i?(0,M.o)(t,this._state.staticValue):this._state.staticValue;for(var n="",o=0,r=this._state.pieces.length;o<r;o++){var s=this._state.pieces[o];if(null===s.staticValue){var a=e._substitute(s.matchIndex,t);if(null!==s.caseOps&&s.caseOps.length>0){for(var c=[],d=s.caseOps.length,l=0,h=0,u=a.length;h<u;h++){if(l>=d){c.push(a.slice(h));break}switch(s.caseOps[l]){case"U":c.push(a[h].toUpperCase());break;case"u":c.push(a[h].toUpperCase()),l++;break;case"L":c.push(a[h].toLowerCase());break;case"l":c.push(a[h].toLowerCase()),l++;break;default:c.push(a[h])}}a=c.join("")}n+=a}else n+=s.staticValue}return n}}],[{key:"fromStaticValue",value:function(t){return new e([A.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var i="";e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}]),e}(),A=function(){function e(t,i,n){(0,o.Z)(this,e),this.staticValue=t,this.matchIndex=i,n&&0!==n.length?this.caseOps=n.slice(0):this.caseOps=null}return(0,r.Z)(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,i){return new e(null,t,i)}}]),e}(),T=function(){function e(t){(0,o.Z)(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return(0,r.Z)(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=A.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=A.caseOps(e,i),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=A.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new D(this._result)}}]),e}();var W=i(8022),Z=new W.uy("findWidgetVisible",!1),P=(Z.toNegated(),new W.uy("findInputFocussed",!1)),L=new W.uy("replaceInputFocussed",!1),V={primary:545,mac:{primary:2593}},B={primary:565,mac:{primary:2613}},H={primary:560,mac:{primary:2608}},q={primary:554,mac:{primary:2602}},U={primary:558,mac:{primary:2606}},K="actions.find",G="actions.findWithSelection",z="editor.actions.findWithArgs",j="editor.action.nextMatchFindAction",Q="editor.action.previousMatchFindAction",Y="editor.action.goToMatchFindAction",$="editor.action.nextSelectionMatchFindAction",J="editor.action.previousSelectionMatchFindAction",X="editor.action.startFindReplaceAction",ee="closeFindWidget",te="toggleFindCaseSensitive",ie="toggleFindWholeWord",ne="toggleFindRegex",oe="toggleFindInSelection",re="togglePreserveCase",se="editor.action.replaceOne",ae="editor.action.replaceAll",ce="editor.action.selectAllMatches",de=19999,le=function(){function e(t,i){var n=this;(0,o.Z)(this,e),this._toDispose=new h.SL,this._editor=t,this._state=i,this._isDisposed=!1,this._startSearchingTimer=new l._F,this._decorations=new I(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new l.pY((function(){return n.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||n._decorations.setStartPosition(n._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){n._ignoreModelContentChanged||(e.isFlush&&n._decorations.reset(),n._decorations.setStartPosition(n._editor.getPosition()),n._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return n._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return(0,r.Z)(e,[{key:"dispose",value:function(){this._isDisposed=!0,(0,h.B9)(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var i=this,n=null;"undefined"!==typeof t?null!==t&&(n=Array.isArray(t)?t:[t]):n=this._decorations.getFindScopes(),null!==n&&(n=n.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new y.e(e.startLineNumber,1,t,i._editor.getModel().getLineMaxColumn(t))}return e})));var o=this._findMatches(n,!1,de);this._decorations.set(o,n);var r=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(r);if(0===s&&o.length>0){var a=(0,v.lG)(o.map((function(e){return e.range})),(function(e){return y.e.compareRangesUsingStarts(e,r)>=0}));s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(39).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||1===n?(1===i?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new S.L(i,n)}},{key:"_moveToPrevMatch",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<de){var n=this._decorations.matchBeforePosition(t);return n&&n.isEmpty()&&n.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),n=this._decorations.matchBeforePosition(t)),void(n&&this._setCurrentFindMatch(n))}if(!this._cannotFind()){var o=this._decorations.getFindScope(),r=e._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(t)&&(t=r.getEndPosition()),t.isBefore(r.getStartPosition())&&(t=r.getEndPosition());var s=t,a=s.lineNumber,c=s.column,d=this._editor.getModel(),l=new S.L(a,c),h=d.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,!1);if(h&&h.range.isEmpty()&&h.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),h=d.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,!1)),h)return i||r.containsRange(h.range)?void this._setCurrentFindMatch(h.range):this._moveToPrevMatch(h.range.getStartPosition(),!0)}}else{var u=this._decorations.matchAfterPosition(t);u&&this._setCurrentFindMatch(u)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new S.L(i,n)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<de){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var i=this._getNextMatch(e,!1,!0);i&&this._setCurrentFindMatch(i.range)}else{var n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n)}}},{key:"_getNextMatch",value:function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var r=this._decorations.getFindScope(),s=e._getSearchRange(this._editor.getModel(),r);s.getEndPosition().isBefore(t)&&(t=s.getStartPosition()),t.isBefore(s.getStartPosition())&&(t=s.getStartPosition());var a=t,c=a.lineNumber,d=a.column,l=this._editor.getModel(),h=new S.L(c,d),u=l.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),u=l.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i)),u?o||s.containsRange(u.range)?u:this._getNextMatch(u.range.getEndPosition(),i,n,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_moveToMatch",value:function(e){var t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}},{key:"moveToMatch",value:function(e){this._moveToMatch(e)}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new D(null);for(var t=[],i=new T(e),n=0,o=e.length;n<o;n++){var r=e.charCodeAt(n);if(92!==r){if(36===r){if(++n>=o)break;var s=e.charCodeAt(n);if(36===s){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===s||38===s){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=s&&s<=57){var a=s-48;if(n+1<o){var c=e.charCodeAt(n+1);if(48<=c&&c<=57){n++,a=10*a+(c-48),i.emitUnchanged(n-2),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}}else{if(++n>=o)break;var d=e.charCodeAt(n);switch(d){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("\t",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(d))}}}return i.finalize()}(this._state.replaceString):D.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){var n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new m.T4(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new S.L(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}}},{key:"_findMatches",value:function(t,i,n){var o=this,r=(t||[null]).map((function(t){return e._getSearchRange(o._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i,n)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=de?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new C.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var i="mu";t.ignoreCase&&(i+="i"),t.global&&(i+="g"),t=new RegExp(t.source,i)}var n,o=this._editor.getModel(),r=o.getValue(1),s=o.getFullModelRange(),a=this._getReplacePattern(),c=this._state.preserveCase;n=a.hasReplacementPatterns||c?r.replace(t,(function(){return a.buildReplaceString(arguments,c)})):r.replace(t,a.buildReplaceString(null,c));var d=new m.hP(s,n,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[],o=0,r=i.length;o<r;o++)n[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);var s=new F(this._editor.getSelection(),i.map((function(e){return e.range})),n);this._executeEditorCommand("replaceAll",s)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new b.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),i=this._editor.getSelection(),n=0,o=t.length;n<o;n++){if(t[n].equalsRange(i)){t=[i].concat(t.slice(0,n)).concat(t.slice(n+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),he=i(97326),ue=i(32959),ge=i(47163),_e=i(13752),pe=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,r){var s;(0,o.Z)(this,i),(s=t.call(this))._hideSoon=s._register(new l.pY((function(){return s._hide()}),2e3)),s._isVisible=!1,s._editor=e,s._state=n,s._keybindingService=r,s._domNode=document.createElement("div"),s._domNode.className="findOptionsWidget",s._domNode.style.display="none",s._domNode.style.top="10px",s._domNode.style.zIndex="12",s._domNode.setAttribute("role","presentation"),s._domNode.setAttribute("aria-hidden","true");var a={inputActiveOptionBorder:(0,R.n_1)(R.PRb),inputActiveOptionForeground:(0,R.n_1)(R.Pvw),inputActiveOptionBackground:(0,R.n_1)(R.XEs)};return s.caseSensitive=s._register(new ge.rk(Object.assign({appendTitle:s._keybindingLabelFor(te),isChecked:s._state.matchCase},a))),s._domNode.appendChild(s.caseSensitive.domNode),s._register(s.caseSensitive.onChange((function(){s._state.change({matchCase:s.caseSensitive.checked},!1)}))),s.wholeWords=s._register(new ge.Qx(Object.assign({appendTitle:s._keybindingLabelFor(ie),isChecked:s._state.wholeWord},a))),s._domNode.appendChild(s.wholeWords.domNode),s._register(s.wholeWords.onChange((function(){s._state.change({wholeWord:s.wholeWords.checked},!1)}))),s.regex=s._register(new ge.eH(Object.assign({appendTitle:s._keybindingLabelFor(ne),isChecked:s._state.isRegex},a))),s._domNode.appendChild(s.regex.domNode),s._register(s.regex.onChange((function(){s._state.change({isRegex:s.regex.checked},!1)}))),s._editor.addOverlayWidget((0,he.Z)(s)),s._register(s._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(s.regex.checked=s._state.isRegex,t=!0),e.wholeWord&&(s.wholeWords.checked=s._state.wholeWord,t=!0),e.matchCase&&(s.caseSensitive.checked=s._state.matchCase,t=!0),!s._state.isRevealed&&t&&s._revealTemporarily()}))),s._register(ue.addDisposableListener(s._domNode,ue.EventType.MOUSE_LEAVE,(function(e){return s._onMouseLeave()}))),s._register(ue.addDisposableListener(s._domNode,"mouseover",(function(e){return s._onMouseOver()}))),s}return(0,r.Z)(i,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseLeave",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}]),i}(_e.$);pe.ID="editor.contrib.findOptionsWidget";var fe=i(13880);function ve(e,t){return 1===e||2!==e&&t}var me=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.call(this))._onFindReplaceStateChange=e._register(new fe.Q5),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e._isSearching=!1,e._filters=null,e}return(0,r.Z)(i,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return ve(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return ve(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return ve(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return ve(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,i){var n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),"undefined"!==typeof i&&(y.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}},{key:"change",value:function(e,t){var i,n=this,o={moveCursor:t,updateHistory:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1,s=this.isRegex,a=this.wholeWord,c=this.matchCase,d=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(i=e.searchScope)||void 0===i?void 0:i.every((function(e){var t;return null===(t=n._searchScope)||void 0===t?void 0:t.some((function(t){return!y.e.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,o.isSearching=!0,r=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,o.filters=!0,r=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(r=!0,o.isRegex=!0),a!==this.wholeWord&&(r=!0,o.wholeWord=!0),c!==this.matchCase&&(r=!0,o.matchCase=!0),d!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=de}}]),i}(h.JT),Se=i(61841),ye=i(73141),be=i(23954),Ce=i(77409),we=i(74146),ke=i(90650),Ne=i(18420),Re=i(46689),xe=i(24986),Ie=i(87288),Fe=i(79730),Me=i(39707),Ee=i(63021),Oe=i(87103),De=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ae=(0,Ie.q5)("find-selection",Ce.l.selection,Ne.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Te=(0,Ie.q5)("find-collapsed",Ce.l.chevronRight,Ne.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),We=(0,Ie.q5)("find-expanded",Ce.l.chevronDown,Ne.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Ze=(0,Ie.q5)("find-replace",Ce.l.replace,Ne.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Pe=(0,Ie.q5)("find-replace-all",Ce.l.replaceAll,Ne.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Le=(0,Ie.q5)("find-previous-match",Ce.l.arrowUp,Ne.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ve=(0,Ie.q5)("find-next-match",Ce.l.arrowDown,Ne.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Be=Ne.NC("label.find","Find"),He=Ne.NC("placeholder.find","Find"),qe=Ne.NC("label.previousMatchButton","Previous Match"),Ue=Ne.NC("label.nextMatchButton","Next Match"),Ke=Ne.NC("label.toggleSelectionFind","Find in Selection"),Ge=Ne.NC("label.closeButton","Close"),ze=Ne.NC("label.replace","Replace"),je=Ne.NC("placeholder.replace","Replace"),Qe=Ne.NC("label.replaceButton","Replace"),Ye=Ne.NC("label.replaceAllButton","Replace All"),$e=Ne.NC("label.toggleReplaceButton","Toggle Replace"),Je=Ne.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",de),Xe=Ne.NC("label.matchesLocation","{0} of {1}"),et=Ne.NC("label.noResults","No results"),tt=419,it=69,nt="ctrlEnterReplaceAll.windows.donotask",ot=ke.dz?256:2048,rt=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}));function st(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionStart>0&&e.stopPropagation()}function at(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionEnd<i.value.length&&e.stopPropagation()}var ct=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,r,s,a,c,d,u,g,_){var p;return(0,o.Z)(this,i),(p=t.call(this))._cachedHeight=null,p._revealTimeouts=[],p._codeEditor=e,p._controller=r,p._state=s,p._contextViewProvider=a,p._keybindingService=c,p._contextKeyService=d,p._storageService=g,p._notificationService=_,p._ctrlEnterReplaceAllWarningPrompted=!!g.getBoolean(nt,0),p._isVisible=!1,p._isReplaceVisible=!1,p._ignoreChangeEvent=!1,p._updateHistoryDelayer=new l.vp(500),p._register((0,h.OF)((function(){return p._updateHistoryDelayer.cancel()}))),p._register(p._state.onFindReplaceStateChange((function(e){return p._onStateChanged(e)}))),p._buildDomNode(),p._updateButtons(),p._tryUpdateWidgetWidth(),p._findInput.inputBox.layout(),p._register(p._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(88)&&(p._codeEditor.getOption(88)&&p._state.change({isReplaceRevealed:!1},!1),p._updateButtons()),e.hasChanged(140)&&p._tryUpdateWidgetWidth(),e.hasChanged(2)&&p.updateAccessibilitySupport(),e.hasChanged(39)){var t=p._codeEditor.getOption(39).loop;p._state.change({loop:t},!1);var i=p._codeEditor.getOption(39).addExtraSpaceOnTop;i&&!p._viewZone&&(p._viewZone=new rt(0),p._showViewZone()),!i&&p._viewZone&&p._removeViewZone()}}))),p.updateAccessibilitySupport(),p._register(p._codeEditor.onDidChangeCursorSelection((function(){p._isVisible&&p._updateToggleSelectionFindButton()}))),p._register(p._codeEditor.onDidFocusEditorWidget((function(){return De((0,he.Z)(p),void 0,void 0,(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isVisible){e.next=5;break}return e.next=3,this._controller.getGlobalBufferTerm();case 3:(t=e.sent)&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());case 5:case"end":return e.stop()}}),e,this)})))}))),p._findInputFocused=P.bindTo(d),p._findFocusTracker=p._register(ue.trackFocus(p._findInput.inputBox.inputElement)),p._register(p._findFocusTracker.onDidFocus((function(){p._findInputFocused.set(!0),p._updateSearchScope()}))),p._register(p._findFocusTracker.onDidBlur((function(){p._findInputFocused.set(!1)}))),p._replaceInputFocused=L.bindTo(d),p._replaceFocusTracker=p._register(ue.trackFocus(p._replaceInput.inputBox.inputElement)),p._register(p._replaceFocusTracker.onDidFocus((function(){p._replaceInputFocused.set(!0),p._updateSearchScope()}))),p._register(p._replaceFocusTracker.onDidBlur((function(){p._replaceInputFocused.set(!1)}))),p._codeEditor.addOverlayWidget((0,he.Z)(p)),p._codeEditor.getOption(39).addExtraSpaceOnTop&&(p._viewZone=new rt(0)),p._register(p._codeEditor.onDidChangeModel((function(){p._isVisible&&(p._viewZoneId=void 0)}))),p._register(p._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?p._layoutViewZone():setTimeout((function(){p._layoutViewZone()}),0)}))),p}return(0,r.Z)(i,[{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(88)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=ue.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,we.dL)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e;if(this._matchesCount.style.minWidth=it+"px",this._state.matchesCount>=de?this._matchesCount.title=Je:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=de&&(t+="+");var i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=u.WU(Xe,i,t)}else e=et;this._matchesCount.appendChild(document.createTextNode(e)),(0,Se.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),it=Math.max(it,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,i){if(e===et)return""===i?Ne.NC("ariaSearchNoResultEmpty","{0} found",e):Ne.NC("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){var n=Ne.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){var r=o.getLineContent(t.startLineNumber);return"".concat(r,", ").concat(n)}return n}return Ne.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getOption(88);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(39).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var i=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=i}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var n=!0;if(this._codeEditor.getOption(39).seedSearchStringFromSelection&&t){var o=this._codeEditor.getDomNode();if(o){var r=ue.getDomNodePagePosition(o),s=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),a=r.left+(s?s.left:0),c=s?s.top:0;if(this._viewZone&&c<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(n=!1);var d=ue.getTopLeftOffset(this._domNode).left;a>d&&(n=!1);var l=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());r.left+(l?l.left:0)>d&&(n=!1)}}}this._showViewZone(n)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(39).addExtraSpaceOnTop){if(this._isVisible){var i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones((function(n){i.heightInPx=t._getHeight(),t._viewZoneId=n.addZone(i),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+i.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isVisible&&this._codeEditor.getOption(39).addExtraSpaceOnTop){void 0===this._viewZone&&(this._viewZone=new rt(0));var i=this._viewZone;this._codeEditor.changeViewZones((function(n){if(void 0!==e._viewZoneId){var o=e._getHeight();if(o===i.heightInPx)return;var r=o-i.heightInPx;return i.heightInPx=o,n.layoutZone(e._viewZoneId),void(t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+r))}var s=e._getHeight();(s-=e._codeEditor.getOption(81).top)<=0||(i.heightInPx=s,e._viewZoneId=n.addZone(i),t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+s))}))}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&ue.isInDOM(this._domNode)){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,i=e.minimap.minimapWidth,n=!1,o=!1,r=!1;if(this._resized)if(ue.getTotalWidth(this._domNode)>tt)return this._domNode.style.maxWidth="".concat(t-28-i-15,"px"),void(this._replaceInput.width=ue.getTotalWidth(this._findInput.domNode));if(447+i>=t&&(o=!0),447+i-it>=t&&(r=!0),447+i-it>=t+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",o),r||n||(this._domNode.style.maxWidth="".concat(t-28-i-15,"px")),this._findInput.layout({collapsedFindWidget:n,narrowFindWidget:r,reducedFindWidget:o}),this._resized){var s=this._findInput.inputBox.element.clientWidth;s>0&&(this._replaceInput.width=s)}else this._isReplaceVisible&&(this._replaceInput.width=ue.getTotalWidth(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var i=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||y.e.equalsRange(t,i)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|ot)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?at(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|ot)?(this._keybindingService.dispatchEvent(e,e.target)||(ke.ED&&ke.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Ne.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(nt,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?at(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this;this._findInput=this._register(new Re.Yb(null,this._contextViewProvider,{width:221,label:Be,placeholder:He,appendCaseSensitiveLabel:this._keybindingLabelFor(te),appendWholeWordsLabel:this._keybindingLabelFor(ie),appendRegexLabel:this._keybindingLabelFor(ne),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(i){return{content:i.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:function(){return(0,xe.u)(e._keybindingService)},inputBoxStyles:Oe.Hc,toggleStyles:Oe.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),ke.IJ&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new dt({label:qe+this._keybindingLabelFor(Q),icon:Le,onTrigger:function(){(0,Ee.cW)(e._codeEditor.getAction(Q)).run().then(void 0,we.dL)}})),this._nextBtn=this._register(new dt({label:Ue+this._keybindingLabelFor(j),icon:Ve,onTrigger:function(){(0,Ee.cW)(e._codeEditor.getAction(j)).run().then(void 0,we.dL)}}));var t=document.createElement("div");t.className="find-part",t.appendChild(this._findInput.domNode);var i=document.createElement("div");i.className="find-actions",t.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new ye.Z({icon:Ae,title:Ke+this._keybindingLabelFor(oe),isChecked:!1,inputActiveOptionBackground:(0,R.n_1)(R.XEs),inputActiveOptionBorder:(0,R.n_1)(R.PRb),inputActiveOptionForeground:(0,R.n_1)(R.Pvw)})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new dt({label:Ge+this._keybindingLabelFor(ee),icon:Ie.s_,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new Re.Nq(null,void 0,{label:ze,placeholder:je,appendPreserveCaseLabel:this._keybindingLabelFor(re),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:function(){return(0,xe.u)(e._keybindingService)},inputBoxStyles:Oe.Hc,toggleStyles:Oe.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())}))),this._replaceBtn=this._register(new dt({label:Qe+this._keybindingLabelFor(se),icon:Ze,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new dt({label:Ye+this._keybindingLabelFor(ae),icon:Pe,onTrigger:function(){e._controller.replaceAll()}}));var n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);var o=document.createElement("div");o.className="replace-actions",n.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new dt({label:$e,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=ue.getTotalWidth(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="".concat(tt,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n),this._resizeSash=new be.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;var r=tt;this._register(this._resizeSash.onDidStart((function(){r=ue.getTotalWidth(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var i=r+t.startX-t.currentX;i<tt||(i>(parseFloat(ue.getComputedStyle(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=ue.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=ue.getTotalWidth(e._domNode);if(!(t<tt)){var i=tt;if(!e._resized||t===tt){var n=e._codeEditor.getLayoutInfo();i=n.width-28-n.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=ue.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),i}(_e.$);ct.ID="editor.contrib.findWidget";var dt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._opts=e;var r="button";return n._opts.className&&(r=r+" "+n._opts.className),n._opts.icon&&(r=r+" "+Fe.k.asClassName(n._opts.icon)),n._domNode=document.createElement("div"),n._domNode.title=n._opts.label,n._domNode.tabIndex=0,n._domNode.className=r,n._domNode.setAttribute("role","button"),n._domNode.setAttribute("aria-label",n._opts.label),n.onclick(n._domNode,(function(e){n._opts.onTrigger(),e.preventDefault()})),n.onkeydown(n._domNode,(function(e){var t,i;if(e.equals(10)||e.equals(3))return n._opts.onTrigger(),void e.preventDefault();null===(i=(t=n._opts).onKeyDown)||void 0===i||i.call(t,e)})),n}return(0,r.Z)(i,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,i,n,o;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,(0,w.Z)(Fe.k.asClassNameArray(Te))),(i=this._domNode.classList).add.apply(i,(0,w.Z)(Fe.k.asClassNameArray(We)))):((n=this._domNode.classList).remove.apply(n,(0,w.Z)(Fe.k.asClassNameArray(We))),(o=this._domNode.classList).add.apply(o,(0,w.Z)(Fe.k.asClassNameArray(Te))))}}]),i}(_e.$);(0,x.Ic)((function(e,t){var i=function(e,i){i&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(i,"; }"))};i(".findMatch",e.getColor(R.MUv)),i(".currentFindMatch",e.getColor(R.nyM)),i(".findScope",e.getColor(R.jUe)),i(".find-widget",e.getColor(R.D0T));var n=e.getColor(R.rh);n&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(n,"; }"));var o=e.getColor(R.A42);o&&t.addRule(".monaco-editor .find-widget { border-left: 1px solid ".concat(o,"; border-right: 1px solid ").concat(o,"; border-bottom: 1px solid ").concat(o,"; }"));var r=e.getColor(R.EiJ);r&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat((0,Me.c3)(e.type)?"dotted":"solid"," ").concat(r,"; box-sizing: border-box; }"));var s=e.getColor(R.pnM);s&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(s,"; padding: 1px; box-sizing: border-box; }"));var a=e.getColor(R.gkn);a&&t.addRule(".monaco-editor .findScope { border: 1px ".concat((0,Me.c3)(e.type)?"dashed":"solid"," ").concat(a,"; }"));var c=e.getColor(R.lRK);c&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(c,"; }"));var d=e.getColor(R.Hfx);d&&t.addRule(".monaco-editor .find-widget { color: ".concat(d,"; }"));var l=e.getColor(R.Ido);l&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(l,"; }"));var h=e.getColor(R.Ng6);if(h)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(h,"; }"));else{var u=e.getColor(R.D1_);u&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(u,"; }"))}var g=e.getColor(R.lUq);g&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(g," !important;\n\t\t}\n\t"));var _=e.getColor(R.R80);_&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(_,"; }"))}));var lt=i(14443),ht=i(76344),ut=i(92361),gt=i(75256),_t=i(49431),pt=i(67949),ft=i(88463),vt=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},mt=function(e,t){return function(i,n){t(i,n,e)}},St=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},yt=524288;function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t)if(n.isEmpty()){var o=e.getConfiguredWordAtPosition(n.getStartPosition());if(o&&!1===i)return o.word}else if(e.getModel().getValueLengthInRange(n)<yt)return e.getModel().getValueInRange(n);return null}var Ct=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,r,s){var a;return(0,o.Z)(this,i),(a=t.call(this))._editor=e,a._findWidgetVisible=Z.bindTo(n),a._contextKeyService=n,a._storageService=r,a._clipboardService=s,a._updateHistoryDelayer=new l.vp(500),a._state=a._register(new me),a.loadQueryState(),a._register(a._state.onFindReplaceStateChange((function(e){return a._onStateChanged(e)}))),a._model=null,a._register(a._editor.onDidChangeModel((function(){var e=a._editor.getModel()&&a._state.isRevealed;a.disposeModel(),a._state.change({searchScope:null,matchCase:a._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:a._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:a._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:a._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&a._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:a._editor.getOption(39).loop})}))),a}return(0,r.Z)(i,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!P.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=u.ec(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function i(){var o,r,s,a,c;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.disposeModel(),this._editor.hasModel()){i.next=3;break}return i.abrupt("return");case 3:if(o=Object.assign(Object.assign({},t),{isRevealed:!0}),"single"===e.seedSearchStringFromSelection?(r=bt(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(this._state.isRegex?o.searchString=u.ec(r):o.searchString=r):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(s=bt(this._editor,e.seedSearchStringFromSelection))&&(o.searchString=s),o.searchString||!e.seedSearchStringFromGlobalClipboard){i.next=12;break}return i.next=8,this.getGlobalBufferTerm();case 8:if(a=i.sent,this._editor.hasModel()){i.next=11;break}return i.abrupt("return");case 11:a&&(o.searchString=a);case 12:e.forceRevealReplace||o.isReplaceRevealed?o.isReplaceRevealed=!0:this._findWidgetVisible.get()||(o.isReplaceRevealed=!1),e.updateSearchScope&&(c=this._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(o.searchScope=c),o.loop=e.loop,this._state.change(o,!1),this._model||(this._model=new le(this._editor,this._state));case 17:case"end":return i.stop()}}),i,this)})))}},{key:"start",value:function(e,t){return this._start(e,t)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"goToMatch",value:function(e){return!!this._model&&(this._model.moveToMatch(e),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){return!!this._model&&(this._model.replaceAll(),!0)}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._editor.getOption(39).globalFindClipboard||!this._editor.hasModel()||this._editor.getModel().isTooLargeForSyncing()){e.next=2;break}return e.abrupt("return",this._clipboardService.readFindText());case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(h.JT);Ct.ID="editor.contrib.findController";var wt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,r,s,a,c,d,l){var h;return(0,o.Z)(this,i),(h=t.call(this,e,r,d,l))._contextViewService=n,h._keybindingService=s,h._themeService=a,h._notificationService=c,h._widget=null,h._findOptionsWidget=null,h}return(0,r.Z)(i,[{key:"_start",value:function(e,t){var o=this,r=Object.create(null,{_start:{get:function(){return(0,s.Z)((0,a.Z)(i.prototype),"_start",o)}}});return St(this,void 0,void 0,(0,n.Z)().mark((function i(){var o,s,a;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this._widget||this._createFindWidget(),o=this._editor.getSelection(),s=!1,i.t0=this._editor.getOption(39).autoFindInSelection,i.next="always"===i.t0?6:"never"===i.t0?8:"multiline"===i.t0?10:13;break;case 6:return s=!0,i.abrupt("break",14);case 8:return s=!1,i.abrupt("break",14);case 10:return a=!!o&&o.startLineNumber!==o.endLineNumber,s=a,i.abrupt("break",14);case 13:return i.abrupt("break",14);case 14:return e.updateSearchScope=e.updateSearchScope||s,i.next=17,r._start.call(this,e,t);case 17:this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput());case 18:case"end":return i.stop()}}),i,this)})))}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new ct(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new pe(this._editor,this._state,this._keybindingService))}}]),i}(Ct=vt([mt(1,W.i6),mt(2,ft.Uy),mt(3,ht.p)],Ct));wt=vt([mt(1,ut.u),mt(2,W.i6),mt(3,gt.d),mt(4,x.XE),mt(5,_t.lT),mt(6,ft.Uy),mt(7,ht.p)],wt);var kt=(0,g.rn)(new g.jY({id:K,label:Ne.NC("startFindAction","Find"),alias:"Find",precondition:W.Ao.or(p.u.focus,W.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:lt.eH.MenubarEditMenu,group:"3_find",title:Ne.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));kt.addImplementation(0,(function(e,t,i){var n=Ct.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(39).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop})}));var Nt={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:Ne.NC("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:Ne.NC("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:Ne.NC("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:Ne.NC("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]},Rt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:z,label:Ne.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Nt})}return(0,r.Z)(i,[{key:"run",value:function(e,t,i){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var o,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Ct.get(t))){e.next=6;break}return r=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{},e.next=5,o.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===o.getState().searchString.length&&"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===i||void 0===i?void 0:i.findInSelection)||!1,loop:t.getOption(39).loop},r);case 5:o.setGlobalBufferTerm(o.getState().searchString);case 6:case"end":return e.stop()}}),e)})))}}]),i}(g.R6),xt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:G,label:Ne.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ct.get(t))){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 4:i.setGlobalBufferTerm(i.getState().searchString);case 5:case"end":return e.stop()}}),e)})))}}]),i}(g.R6),It=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ct.get(t))||this._run(i)){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 4:this._run(i);case 5:case"end":return e.stop()}}),e,this)})))}}]),i}(g.R6),Ft=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:j,label:Ne.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:p.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:W.Ao.and(p.u.focus,P),primary:3,weight:100}]})}return(0,r.Z)(i,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),i}(It),Mt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:Q,label:Ne.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:p.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:W.Ao.and(p.u.focus,P),primary:1027,weight:100}]})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(It),Et=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.call(this,{id:Y,label:Ne.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Z}))._highlightDecorations=[],e}return(0,r.Z)(i,[{key:"run",value:function(e,t,i){var n=this,o=Ct.get(t);if(o){var r=o.getState().matchesCount;if(r<1){e.get(_t.lT).notify({severity:_t.zb.Warning,message:Ne.NC("findMatchAction.noResults","No matches. Try searching for something else.")})}else{var s=e.get(pt.eJ).createInputBox();s.placeholder=Ne.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",r);var a=function(e){var t=parseInt(e);if(!isNaN(t)){var i=o.getState().matchesCount;return t>0&&t<=i?t-1:t<0&&t>=-i?i+t:void 0}};s.onDidChangeValue((function(e){!function(e){var i=a(e);if("number"===typeof i){s.validationMessage=void 0,o.goToMatch(i);var r=o.getState().currentMatch;r&&n.addDecorations(t,r)}else s.validationMessage=Ne.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",o.getState().matchesCount),n.clearDecorations(t)}(e)})),s.onDidAccept((function(){var e=a(s.value);"number"===typeof e?(o.goToMatch(e),s.hide()):s.validationMessage=Ne.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",o.getState().matchesCount)})),s.onDidHide((function(){n.clearDecorations(t),s.dispose()})),s.show()}}}},{key:"clearDecorations",value:function(e){var t=this;e.changeDecorations((function(e){t._highlightDecorations=e.deltaDecorations(t._highlightDecorations,[])}))}},{key:"addDecorations",value:function(e,t){var i=this;e.changeDecorations((function(e){i._highlightDecorations=e.deltaDecorations(i._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,x.EN)(_.m9),position:f.sh.Full}}}])}))}}]),i}(g.R6),Ot=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ct.get(t)){e.next=3;break}return e.abrupt("return");case 3:if((o=bt(t,"single",!1))&&i.setSearchString(o),this._run(i)){e.next=9;break}return e.next=8,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 8:this._run(i);case 9:case"end":return e.stop()}}),e,this)})))}}]),i}(g.R6),Dt=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:$,label:Ne.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:p.u.focus,primary:2109,weight:100}})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),i}(Ot),At=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:J,label:Ne.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:p.u.focus,primary:3133,weight:100}})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Ot),Tt=(0,g.rn)(new g.jY({id:X,label:Ne.NC("startReplace","Replace"),alias:"Replace",precondition:W.Ao.or(p.u.focus,W.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:lt.eH.MenubarEditMenu,group:"3_find",title:Ne.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Tt.addImplementation(0,(function(e,t,i){if(!t.hasModel()||t.getOption(88))return!1;var n=Ct.get(t);if(!n)return!1;var o=t.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(39).seedSearchStringFromSelection&&!r,a=r||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(39).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop})})),(0,g._K)(Ct.ID,wt,0),(0,g.Qr)(Rt),(0,g.Qr)(xt),(0,g.Qr)(Ft),(0,g.Qr)(Mt),(0,g.Qr)(Et),(0,g.Qr)(Dt),(0,g.Qr)(At);var Wt=g._l.bindToContribution(Ct.get);(0,g.fK)(new Wt({id:ee,precondition:Z,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:W.Ao.and(p.u.focus,W.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,g.fK)(new Wt({id:te,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:V.primary,mac:V.mac,win:V.win,linux:V.linux}})),(0,g.fK)(new Wt({id:ie,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:B.primary,mac:B.mac,win:B.win,linux:B.linux}})),(0,g.fK)(new Wt({id:ne,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:H.primary,mac:H.mac,win:H.win,linux:H.linux}})),(0,g.fK)(new Wt({id:oe,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:q.primary,mac:q.mac,win:q.win,linux:q.linux}})),(0,g.fK)(new Wt({id:re,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:U.primary,mac:U.mac,win:U.win,linux:U.linux}})),(0,g.fK)(new Wt({id:se,precondition:Z,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:3094}})),(0,g.fK)(new Wt({id:se,precondition:Z,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:W.Ao.and(p.u.focus,L),primary:3}})),(0,g.fK)(new Wt({id:ae,precondition:Z,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:2563}})),(0,g.fK)(new Wt({id:ae,precondition:Z,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:W.Ao.and(p.u.focus,L),primary:void 0,mac:{primary:2051}}})),(0,g.fK)(new Wt({id:ce,precondition:Z,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:p.u.focus,primary:515}}))}}]);
//# sourceMappingURL=monaco-editor-vendor.b3dfc78a.8cb38272.js.map