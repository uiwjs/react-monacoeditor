{"version":3,"file":"static/js/monaco-editor-vendor.1b18e904.57a6211d.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/format.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nexport function alertFormattingEdits(edits) {\n    edits = edits.filter(edit => edit.range);\n    if (!edits.length) {\n        return;\n    }\n    let { range } = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n        range = Range.plusRange(range, edits[i].range);\n    }\n    const { startLineNumber, endLineNumber } = range;\n    if (startLineNumber === endLineNumber) {\n        if (edits.length === 1) {\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n        }\n        else {\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n        }\n    }\n    else {\n        if (edits.length === 1) {\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n        }\n        else {\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n        }\n    }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\n    const result = [];\n    const seen = new Set();\n    // (1) add all document formatter\n    const docFormatter = documentFormattingEditProvider.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\n                continue;\n            }\n            seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nclass FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static select(formatter, document, mode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (formatter.length === 0) {\n                return undefined;\n            }\n            const selector = Iterable.first(FormattingConflicts._selectors);\n            if (selector) {\n                return yield selector(formatter, document, mode);\n            }\n            return undefined;\n        });\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport { FormattingConflicts };\nexport function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token);\n        }\n    });\n}\nexport function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        const logService = accessor.get(ILogService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        // make sure that ranges don't overlap nor touch each other\n        const ranges = [];\n        let len = 0;\n        for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n            if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n                ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n            }\n            else {\n                len = ranges.push(range);\n            }\n        }\n        const computeEdits = (range) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, range);\n            const result = (yield provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n            return result;\n        });\n        const hasIntersectingEdit = (a, b) => {\n            if (!a.length || !b.length) {\n                return false;\n            }\n            // quick exit if the list of ranges are completely unrelated [O(n)]\n            const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n            if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n                return false;\n            }\n            // fallback to a complete check [O(n^2)]\n            for (const edit of a) {\n                for (const otherEdit of b) {\n                    if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        const allEdits = [];\n        const rawEditsList = [];\n        try {\n            for (const range of ranges) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                rawEditsList.push(yield computeEdits(range));\n            }\n            for (let i = 0; i < ranges.length; ++i) {\n                for (let j = i + 1; j < ranges.length; ++j) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                        // Merge ranges i and j into a single range, recompute the associated edits\n                        const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                        const edits = yield computeEdits(mergedRange);\n                        ranges.splice(j, 1);\n                        ranges.splice(i, 1);\n                        ranges.push(mergedRange);\n                        rawEditsList.splice(j, 1);\n                        rawEditsList.splice(i, 1);\n                        rawEditsList.push(edits);\n                        // Restart scanning\n                        i = 0;\n                        j = 0;\n                    }\n                }\n            }\n            for (const rawEdits of rawEditsList) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                const minimalEdits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n                if (minimalEdits) {\n                    allEdits.push(...minimalEdits);\n                }\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (allEdits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, allEdits, true);\n            alertFormattingEdits(allEdits);\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = allEdits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], allEdits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token);\n        }\n    });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        let edits;\n        try {\n            const rawEdits = yield provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n            edits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (!edits || edits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\n            if (mode !== 2 /* FormattingMode.Silent */) {\n                alertFormattingEdits(edits);\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n            }\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = edits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], edits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, range, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Range.isIRange(range));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, options] = args;\n        assertType(URI.isUri(resource));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, position, ch, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        assertType(typeof ch === 'string');\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(53 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(53 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(52 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        const singleEdits = [];\n        for (const edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const scrollState = StableEditorScrollState.capture(editor);\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(63 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(47 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nclass NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nexport { NextMarkerAction };\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nexport class SymbolNavigationAnchor {\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n}\nclass SymbolNavigationAction extends EditorAction2 {\n    static all() {\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\n    }\n    static _patchConfig(opts) {\n        const result = Object.assign(Object.assign({}, opts), { f1: true });\n        // patch context menu when clause\n        if (result.menu) {\n            for (const item of Iterable.wrap(result.menu)) {\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\n                }\n            }\n        }\n        return result;\n    }\n    constructor(configuration, opts) {\n        super(SymbolNavigationAction._patchConfig(opts));\n        this.configuration = configuration;\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\n    }\n    runEditorCommand(accessor, editor, arg, range) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const instaService = accessor.get(IInstantiationService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\n                }));\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references, range);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model, range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model, range);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model, range);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model, range) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\nSymbolNavigationAction._activeAlternativeCommands = new Set();\nexport { SymbolNavigationAction };\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone()\n    ? 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */\n    : 70 /* KeyCode.F12 */;\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                title: {\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                    original: 'Go to Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.1\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 2,\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                title: {\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                    original: 'Open Definition to the Side'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, goToDefinitionKb),\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                title: {\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                    original: 'Peek Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                title: {\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                    original: 'Go to Declaration',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.3\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }],\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            title: {\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n                original: 'Peek Declaration'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                title: {\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                    original: 'Go to Type Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.4\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }]\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                title: {\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                    original: 'Peek Type Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                title: {\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                    original: 'Go to Implementations',\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.45\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 4,\n                    }]\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                title: {\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                    original: 'Peek Implementations'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(55 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            title: {\n                value: nls.localize('goToReferences.label', \"Go to References\"),\n                original: 'Go to References',\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            keybinding: {\n                when: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menu: [{\n                    id: MenuId.EditorContext,\n                    group: 'navigation',\n                    order: 1.45\n                }, {\n                    id: MenuId.MenubarGoMenu,\n                    precondition: null,\n                    group: '4_symbol_nav',\n                    order: 5,\n                }]\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            title: {\n                value: nls.localize('references.action.label', \"Peek References\"),\n                original: 'Peek References'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            title: {\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\n                original: 'Go to Any Symbol'\n            },\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(55 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ReferencesModel } from './referencesModel.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        // get results\n        const promises = provider.map((provider) => {\n            return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n                onUnexpectedExternalError(err);\n                return undefined;\n            });\n        });\n        const values = yield Promise.all(promises);\n        return coalesce(values.flat());\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.isLeftClick = source.event.leftButton;\n        this.isMiddleClick = source.event.middleButton;\n        this.isRightClick = source.event.rightButton;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor, alwaysFireOnMouseUp) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._alwaysFireExecuteOnMouseUp = alwaysFireOnMouseUp;\n        this._opts = createOptions(this._editor.getOption(74 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(74 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(74 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber || this._alwaysFireExecuteOnMouseUp) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For issue: https://github.com/microsoft/vscode/issues/46257\n            // equivalent to mouse move with meta/ctrl key\n            // First find the definition and add decorations\n            // to the editor to be shown with the content hover widget\n            yield this.startFindDefinition(position);\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\n            this.toUnhookForKeyboard.clear();\n            // Find word at mouse position\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n            if (!word) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                return;\n            }\n            // Return early if word at position is still the same\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n                return;\n            }\n            this.currentWordAtPosition = word;\n            // Find definition and decorate word if found\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n            if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n            }\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n            let results;\n            try {\n                results = yield this.previousPromise;\n            }\n            catch (error) {\n                onUnexpectedError(error);\n                return;\n            }\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            const linkRange = results[0].originSelectionRange\n                ? Range.lift(results[0].originSelectionRange)\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            // Multiple results\n            if (results.length > 1) {\n                let combinedRange = linkRange;\n                for (const { originSelectionRange } of results) {\n                    if (originSelectionRange) {\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                    }\n                }\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            else {\n                // Single result\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                    ref.dispose();\n                });\n            }\n        });\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(83 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nclass OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\nexport { OneReferenceRenderer };\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element, true);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(82 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target, false);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref, pinned) {\n        var _a;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n"],"names":["EditorFontZoomIn","_EditorAction","_inherits","_super","_createSuper","_classCallCheck","call","id","label","nls","alias","precondition","undefined","_createClass","key","value","accessor","editor","EditorZoom","EditorAction","EditorFontZoomOut","_EditorAction2","_super2","EditorFontZoomReset","_EditorAction3","_super3","registerEditorAction","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","alertFormattingEdits","edits","filter","edit","range","length","i","Range","_range","startLineNumber","endLineNumber","alert","getRealAndSyntheticDocumentFormattersOrdered","documentFormattingEditProvider","documentRangeFormattingEditProvider","model","_step","seen","Set","docFormatter","ordered","_iterator","_createForOfIteratorHelper","s","n","formatter","push","extensionId","add","ExtensionIdentifier","err","f","_step2","rangeFormatter","_iterator2","_loop","has","displayName","provideDocumentFormattingEdits","options","token","provideDocumentRangeFormattingEdits","getFullModelRange","FormattingConflicts","selector","dispose","_selectors","unshift","document","mode","this","_regeneratorRuntime","mark","_callee","wrap","_context","prev","abrupt","Iterable","sent","stop","formatDocumentRangesWithSelectedProvider","editorOrModel","rangeOrRanges","progress","_callee2","instaService","_accessor$get","documentRangeFormattingEditProviderRegistry","provider","selected","_context2","get","IInstantiationService","ILanguageFeaturesService","isCodeEditor","getModel","select","report","invokeFunction","formatDocumentRangesWithProvider","_callee4","workerService","logService","cts","ranges","len","_iterator3","_step3","_range4","computeEdits","hasIntersectingEdit","allEdits","rawEditsList","_i","_ranges","j","mergedRange","_i2","_rawEditsList","rawEdits","minimalEdits","_range2","initialSelection","_this","_context4","IEditorWorkerService","ILogService","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","asArray","sort","getStartPosition","getEndPosition","_callee3","_a","_b","_context3","trace","getFormattingOptions","t0","a","b","mergedA","reduce","acc","val","some","x","_step4","_iterator4","_step5","_iterator5","otherEdit","isCancellationRequested","t1","splice","computeMoreMinimalEdits","uri","_toConsumableArray","finish","FormattingEdit","revealPositionInCenterIfOutsideViewport","getPosition","Selection","startColumn","endColumn","pushEditOperations","map","text","forceMoveMarkers","undoEdits","_step6","_iterator6","formatDocumentWithSelectedProvider","_callee5","languageFeaturesService","_context5","formatDocumentWithProvider","_callee6","_edits","_edits2","_context6","_slicedToArray","_step7","_iterator7","getDocumentRangeFormattingEditsUntilResult","_callee7","providers","_iterator8","_step8","_context7","catch","onUnexpectedExternalError","isNonEmptyArray","getDocumentFormattingEditsUntilResult","_callee8","_iterator9","_step9","_context8","getOnTypeFormattingEdits","position","ch","onTypeFormattingEditProvider","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","LinkedList","CommandsRegistry","_len","arguments","args","Array","_key","_callee9","resource","resolverService","reference","_context9","assertType","URI","ITextModelService","createModelReference","object","textEditorModel","CancellationToken","_len2","_key2","_callee10","_context10","_len3","_key3","_callee11","_context11","Position","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","FormatOnType","_editor","_languageFeaturesService","_workerService","_disposables","DisposableStore","_sessionDisposables","onDidChange","_update","onDidChangeModel","onDidChangeModelLanguage","onDidChangeConfiguration","hasChanged","_this2","clear","getOption","hasModel","_this$_languageFeatur","support","triggerChars","CharacterSet","charCodeAt","onDidType","lastCharCode","_trigger","String","fromCharCode","_this3","getSelections","getSelection","isEmpty","CancellationTokenSource","unbind","onDidChangeModelContent","isFlush","cancel","changes","lineNumber","finally","ID","FormatOnPaste","_instantiationService","_this4","_callOnDispose","_callOnModel","_this5","onDidPaste","_ref","Progress","onUnexpectedError","FormatDocumentAction","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","linux","weight","contextMenuOpts","group","order","progressService","IEditorProgressService","showWhile","FormatSelectionAction","KeyChord","when","getLineMaxColumn","registerEditorContribution","commandService","ICodeEditorService","getFocusedCodeEditor","ICommandService","executeCommand","newEol","singleEdits","eol","pushEOL","editRange","validateRange","equalsRange","addUndoStops","pushUndoStop","scrollState","StableEditorScrollState","_handleEolEdits","_isFullModelReplaceEdit","executeEdits","EditOperation","restoreRelativeVerticalPositionOfCursor","MarkerCoordinate","marker","index","total","MarkerList","resourceFilter","_markerService","_configService","_onDidChange","Emitter","event","_dispoables","_markers","_nextIdx","_resourceFilter","toString","compareOrder","getValue","compareMarker","res","compare","MarkerSeverity","severity","updateMarker","read","severities","m","onMarkerChanged","uris","fire","fwd","found","idx","findIndex","binarySearch","word","getWordAtPosition","containsPosition","isBeforeOrEqual","oldIdx","_initIdx","IMarkerService","IConfigurationService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_provider","getMarkerList","registerSingleton","MessageWidget","parent","onRelatedInformation","_openerService","_labelService","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","domNode","createElement","className","_messageBlock","classList","setAttribute","appendChild","_relatedBlock","dom","addStandardDisposableListener","preventDefault","related","_scrollable","ScrollableElement","horizontal","vertical","useShadows","horizontalScrollbarSize","verticalScrollbarSize","getDomNode","onScroll","style","left","concat","scrollLeft","top","scrollTop","source","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","line","Math","max","clearNode","getAriaLabel","applyFontInfo","lastLineElement","innerText","height","lineHeight","detailsElement","sourceElement","codeElement","_codeLink","$","onclick","open","allowCommands","stopPropagation","append","relatedInformationNode","paddingTop","floor","container","relatedResource","getUriBasenameLabel","title","getUriLabel","set","relatedMessage","fontInfo","scrollWidth","ceil","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","width","min","severityLabel","ariaLabel","getLineCount","lineContent","getLineContent","MarkerNavigationWidget","_PeekViewWidget","_themeService","_menuService","instantiationService","_contextKeyService","showArrow","showFrame","isAccessible","frameWidth","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","Color","_applyTheme","getColorTheme","onDidColorThemeChange","bind","_assertThisInitialized","create","theme","getColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","arrowColor","headerBackgroundColor","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","_parentContainer","backgroundColor","_get","_getPrototypeOf","prototype","_actionbarWidget","actionRunner","onWillRun","focus","actions","menu","createMenu","TitleMenu","createAndFillInActionBarActions","icon","_icon","tabIndex","_container","_message","Error","markerIdx","markerCount","remove","update","editorPosition","computeRequiredHeight","detail","setTitle","basename","SeverityIcon","revealPositionNearTop","_relayout","heightInPixel","widthInPixel","_heightInPixel","layout","getHeightInLines","PeekViewWidget","MenuId","IThemeService","IOpenerService","IMenuService","IContextKeyService","ILabelService","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","registerColor","dark","light","hcDark","contrastBorder","hcLight","transparent","editorBackground","MarkerController","_markerNavigationService","_editorService","_sessionDispoables","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","bindTo","_cleanUp","reset","_widget","_model","matches","reusePosition","move","createInstance","onDidClose","close","onDidChangeCursorPosition","_c","resetIndex","info","find","showStale","openCodeEditor","pinned","revealIfOpened","selection","collapseToStart","focusEditor","_getOrCreateModel","showAtMarker","multiFile","otherEditor","selectionRevealType","nagivate","getContribution","MarkerNavigationAction","_next","_multiFile","opts","_accessor","NextMarkerAction","_MarkerNavigationActi","LABEL","menuOpts","menuId","registerIcon","Codicon","PrevMarkerAction","_MarkerNavigationActi2","NextMarkerInFilesAction","_MarkerNavigationActi3","_super4","comment","PrevMarkerInFilesAction","_MarkerNavigationActi4","_super5","RawContextKey","MarkerCommand","EditorCommand","registerEditorCommand","handler","secondary","ctxHasSymbols","localize","ISymbolNavigationService","SymbolNavigationService","contextKeyService","_notificationService","_keybindingService","_currentModel","_currentIdx","_ignoreEditorChange","_ctxHasSymbols","_currentState","_currentMessage","anchor","refModel","references","_showMessage","editorState","EditorState","listener","_","getActiveCodeEditor","seenUri","seenPosition","isEqual","combinedDisposable","kb","lookupKeybinding","getLabel","status","INotificationService","IKeybindingService","_EditorCommand","_class","revealNext","KeybindingsRegistry","editorService","_listener","Map","onCodeEditorRemove","_onDidRemoveEditor","onCodeEditorAdd","_onDidAddEditor","listCodeEditors","forEach","values","delete","_d","_e","_f","_g","_h","MenuRegistry","submenu","SymbolNavigationAnchor","thing","corePosition","SymbolNavigationAction","configuration","_patchConfig","_allSymbolNavigationCommands","arg","notificationService","symbolNavService","is","promise","raceCancellation","_getLocationModel","altAction","altActionId","referenceCount","ariaMessage","referenceAt","_getAlternativeCommand","_activeAlternativeCommands","muteMessage","MessageController","showMessage","_getNoResultFoundMessage","runEditorCommand","_onResult","error","gotoLocation","peek","targetEditor","_getGoToPreference","EmbeddedCodeEditorWidget","openInPeek","_openInPeek","firstReference","_openReference","openToSide","put","sideBySide","highlight","modelNow","decorations","isLocationLink","targetSelectionRange","selectionSource","createDecorationsCollection","description","setTimeout","controller","ReferencesController","toggleWidget","createCancelablePromise","assign","f1","item","EditorAction2","DefinitionAction","_SymbolNavigationActi","ReferencesModel","getDefinitionsAtPosition","definitionProvider","t2","alternativeDefinitionCommand","multipleDefinitions","goToDefinitionKb","isWeb","isStandalone","registerAction2","_DefinitionAction","GoToDefinitionAction","original","mnemonicTitle","keybinding","_DefinitionAction2","OpenDefinitionToSideAction","_DefinitionAction3","PeekDefinitionAction","_this6","PeekContext","DeclarationAction","_SymbolNavigationActi2","_super6","getDeclarationsAtPosition","declarationProvider","alternativeDeclarationCommand","multipleDeclarations","_DeclarationAction","GoToDeclarationAction","_super7","_DeclarationAction2","PeekDeclarationAction","_super8","TypeDefinitionAction","_SymbolNavigationActi3","_super9","getTypeDefinitionsAtPosition","typeDefinitionProvider","alternativeTypeDefinitionCommand","multipleTypeDefinitions","_TypeDefinitionAction","GoToTypeDefinitionAction","_super10","_TypeDefinitionAction2","PeekTypeDefinitionAction","_super11","ImplementationAction","_SymbolNavigationActi4","_super12","getImplementationsAtPosition","implementationProvider","alternativeImplementationCommand","multipleImplementations","_ImplementationAction","GoToImplementationAction","_super13","_ImplementationAction2","PeekImplementationAction","_super14","ReferencesAction","_SymbolNavigationActi5","_super15","alternativeReferenceCommand","multipleReferences","_ReferencesAction","GoToReferencesAction","_super16","getReferencesAtPosition","referenceProvider","_ReferencesAction2","PeekReferencesAction","_super17","GenericGoToLocationAction","_SymbolNavigationActi6","_super18","config","_references","_gotoMultipleBehaviour","_this7","_position","_token","name","constraint","multiple","noResultsMessage","isArray","setPosition","invokeWithinContext","command","_GenericGoToLocationA","_super19","Boolean","run","_callee12","_context12","codeEditorService","control","column","getLocationLinks","registry","provide","promises","all","coalesce","flat","provideDefinition","provideDeclaration","provideImplementation","provideTypeDefinition","compact","resultWithoutDeclaration","provideReferences","includeDeclaration","_sortedAndDeduped","callback","rawLinks","modelLinks","ref","link","registerModelAndPositionCommand","hasModifier","modifier","ClickLinkMouseEvent","isLeftClick","leftButton","isMiddleClick","middleButton","isRightClick","rightButton","hasTriggerModifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","keyCode","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","other","createOptions","multiCursorModifier","platform","ClickLinkGesture","_Disposable","alwaysFireOnMouseUp","_onMouseMoveOrRelevantKeyDown","_register","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","_alwaysFireExecuteOnMouseUp","_opts","_lastMouseMoveEvent","_hasTriggerKeyOnMouseDown","_lineNumberOnMouseDown","newOpts","equals","onMouseMove","_onEditorMouseMove","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onKeyDown","_onEditorKeyDown","onKeyUp","_onEditorKeyUp","onMouseDrag","_resetHandler","onDidChangeCursorSelection","_onDidChangeCursorSelection","onDidScrollChange","scrollTopChanged","scrollLeftChanged","mouseEvent","currentLineNumber","Disposable","GotoDefinitionAtPositionEditorContribution","textModelResolverService","languageService","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","linkGesture","_ref2","keyboardEvent","startFindDefinitionFromMouse","withNullAsUndefined","isEnabled","gotoDefinition","removeLinkDecorations","startFindDefinition","withKey","type","state","results","linkRange","combinedRange","originSelectionRange","findDefinition","validate","addDecoration","MarkdownString","appendText","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","rangeToUse","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","getLineFirstNonWhitespaceColumn","endIndent","getValueInRange","replace","RegExp","trim","startIndent","maxLineNumber","hoverMessage","newDecorations","inlineClassName","injectedText","ModelDecorationInjectedTextOptions","canPeek","isInPeekEditor","ILanguageService","DataSource","_resolverService","element","FileReferences","groups","children","Delegate","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","OneReference","parts","getPreview","preview","IdentityProvider","FileReferencesTemplate","file","IconLabel","supportHighlights","badge","CountBadge","defaultCountBadgeStyles","dirname","setLabel","relative","setCount","setTitleFormat","templateId","node","template","createMatches","filterData","templateData","OneReferenceTemplate","HighlightedLabel","score","FuzzyScore","toggle","AccessibilityProvider","DecorationsManager","_decorations","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","removeDecorations","_addDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","changeDecorations","changeAccessor","deltaDecorations","toRemove","_step2$value","decorationId","newRange","getDecorationRange","ignore","keys","ModelDecorationOptions","stickiness","LayoutData","ratio","heightInLines","raw","data","JSON","parse","ReferencesTree","_WorkbenchAsyncDataTr","WorkbenchAsyncDataTree","ReferenceWidget","_peekView$PeekViewWid","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_peekViewService","_uriLabel","_undoRedoService","_languageService","_languageConfigurationService","isResizeable","supportOnTitleClick","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","_dim","Dimension","addExclusiveWidget","setModel","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","borderColor","peekView","where","domFocus","hasTextFocus","_getFocusedReference","kind","ctrlKey","metaKey","altKey","containerElement","setCssClass","_messageContainer","hide","SplitView","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","enabled","TextModel","PLAINTEXT_LANGUAGE_ID","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","selectionNavigation","overrideStyles","listBackground","dispatchEvent","addView","Event","minimumSize","maximumSize","Number","MAX_VALUE","Sizing","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","editorOptions","_doLayoutBody","_viewZone","resizeView","setSelection","setFocus","newModel","_onNewModel","show","_decorationsManager","onDidChangeReferenceRange","rerender","focusOnReferenceTree","setInput","_this$_tree$getFocus","getFocus","revealParent","scrollType","sel","_revealedReference","scheme","Schemas","basenameOrAuthority","getInput","reveal","expand","revealRangeInCenter","IUndoRedoService","ILanguageConfigurationService","ctxReferenceSearchVisible","_storageService","_configurationService","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","modelPromise","peekMode","widgetPosition","closeWidget","_peekMode","storageKey","fromJSON","store","stringify","openReference","_gotoReference","requestId","setMetaTitle","pos","nearestReference","focusOnPreviewEditor","isPreviewEditorFocused","currentPosition","editorFocus","previewEditorFocus","nextOrPreviousReference","revealReference","openedEditor","clone","withController","fn","outerEditor","getOuterEditor","IStorageService","changeFocusBetweenPreviewAndReferences","goToNextOrPreviousReference","mac","WorkbenchListFocusContextKey","WorkbenchTreeElementCanCollapse","WorkbenchTreeElementCanExpand","IListService","lastFocusedList","isProviderFirst","_rangeCallback","defaultGenerator","FilePreview","_modelReference","getWordUntilPosition","beforeRange","afterRange","before","inside","start","end","_previews","ResourceMap","child","fsPath","size","links","_onDidChangeReferenceRange","_links","_title","current","providersFirst","_compareReferences","extUri","oneRef","childCount","groupCount","nearest","prefixLen","strings","offsetDist","abs"],"sourceRoot":""}