{"version":3,"file":"static/js/monaco-editor-vendor.4743ffc1.9912c8b8.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxCustom.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxNative.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBox.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/indexTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/compressedObjectTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/tree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './mouseCursor.css';\nexport const MOUSE_CURSOR_TEXT_CSS_CLASS_NAME = `monaco-mouse-cursor-text`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    constructor(container, options) {\n        super();\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n/**\n * After a certain time of showing the progress bar, switch\n * to long-running mode and throttle animations to reduce\n * the pressure on the GPU process.\n *\n * https://github.com/microsoft/vscode/issues/97900\n * https://github.com/microsoft/vscode/issues/138396\n */\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { $, append, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { Delayer } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './sash.css';\n/**\n * Allow the sashes to be visible at runtime.\n * @remark Use for development purposes only.\n */\nconst DEBUG = false;\nexport var OrthogonalEdge;\n(function (OrthogonalEdge) {\n    OrthogonalEdge[\"North\"] = \"north\";\n    OrthogonalEdge[\"South\"] = \"south\";\n    OrthogonalEdge[\"East\"] = \"east\";\n    OrthogonalEdge[\"West\"] = \"west\";\n})(OrthogonalEdge || (OrthogonalEdge = {}));\nlet globalSize = 4;\nconst onDidChangeGlobalSize = new Emitter();\nlet globalHoverDelay = 300;\nconst onDidChangeHoverDelay = new Emitter();\nclass MouseEventFactory {\n    constructor() {\n        this.disposables = new DisposableStore();\n    }\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(window, 'mousemove')).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(window, 'mouseup')).event;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerUp\", null);\nclass GestureEventFactory {\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.Change)).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.End)).event;\n    }\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerUp\", null);\nclass OrthogonalPointerEventFactory {\n    get onPointerMove() {\n        return this.factory.onPointerMove;\n    }\n    get onPointerUp() {\n        return this.factory.onPointerUp;\n    }\n    constructor(factory) {\n        this.factory = factory;\n    }\n    dispose() {\n        // noop\n    }\n}\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerUp\", null);\nconst PointerEventsDisabledCssClass = 'pointer-events-disabled';\n/**\n * The {@link Sash} is the UI component which allows the user to resize other\n * components. It's usually an invisible horizontal or vertical line which, when\n * hovered, becomes highlighted and can be dragged along the perpendicular dimension\n * to its direction.\n *\n * Features:\n * - Touch event handling\n * - Corner sash support\n * - Hover with different mouse cursor support\n * - Configurable hover size\n * - Linked sash support, for 2x2 corner sashes\n */\nexport class Sash extends Disposable {\n    get state() { return this._state; }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    /**\n     * The state of a sash defines whether it can be interacted with by the user\n     * as well as what mouse cursor to use, when hovered.\n     */\n    set state(state) {\n        if (this._state === state) {\n            return;\n        }\n        this.el.classList.toggle('disabled', state === 0 /* SashState.Disabled */);\n        this.el.classList.toggle('minimum', state === 1 /* SashState.AtMinimum */);\n        this.el.classList.toggle('maximum', state === 2 /* SashState.AtMaximum */);\n        this._state = state;\n        this.onDidEnablementChange.fire(state);\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the start of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The start of a horizontal sash is its left-most position.\n     * The start of a vertical sash is its top-most position.\n     */\n    set orthogonalStartSash(sash) {\n        this.orthogonalStartDragHandleDisposables.clear();\n        this.orthogonalStartSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalStartDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalStartDragHandle = append(this.el, $('.orthogonal-drag-handle.start'));\n                    this.orthogonalStartDragHandleDisposables.add(toDisposable(() => this._orthogonalStartDragHandle.remove()));\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                }\n            };\n            this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the end of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The end of a horizontal sash is its right-most position.\n     * The end of a vertical sash is its bottom-most position.\n     */\n    set orthogonalEndSash(sash) {\n        this.orthogonalEndDragHandleDisposables.clear();\n        this.orthogonalEndSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalEndDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalEndDragHandle = append(this.el, $('.orthogonal-drag-handle.end'));\n                    this.orthogonalEndDragHandleDisposables.add(toDisposable(() => this._orthogonalEndDragHandle.remove()));\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                }\n            };\n            this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalEndSash = sash;\n    }\n    constructor(container, layoutProvider, options) {\n        super();\n        this.hoverDelay = globalHoverDelay;\n        this.hoverDelayer = this._register(new Delayer(this.hoverDelay));\n        this._state = 3 /* SashState.Enabled */;\n        this.onDidEnablementChange = this._register(new Emitter());\n        this._onDidStart = this._register(new Emitter());\n        this._onDidChange = this._register(new Emitter());\n        this._onDidReset = this._register(new Emitter());\n        this._onDidEnd = this._register(new Emitter());\n        this.orthogonalStartSashDisposables = this._register(new DisposableStore());\n        this.orthogonalStartDragHandleDisposables = this._register(new DisposableStore());\n        this.orthogonalEndSashDisposables = this._register(new DisposableStore());\n        this.orthogonalEndDragHandleDisposables = this._register(new DisposableStore());\n        /**\n         * An event which fires whenever the user starts dragging this sash.\n         */\n        this.onDidStart = this._onDidStart.event;\n        /**\n         * An event which fires whenever the user moves the mouse while\n         * dragging this sash.\n         */\n        this.onDidChange = this._onDidChange.event;\n        /**\n         * An event which fires whenever the user double clicks this sash.\n         */\n        this.onDidReset = this._onDidReset.event;\n        /**\n         * An event which fires whenever the user stops dragging this sash.\n         */\n        this.onDidEnd = this._onDidEnd.event;\n        /**\n         * A linked sash will be forwarded the same user interactions and events\n         * so it moves exactly the same way as this sash.\n         *\n         * Useful in 2x2 grids. Not meant for widespread usage.\n         */\n        this.linkedSash = undefined;\n        this.el = append(container, $('.monaco-sash'));\n        if (options.orthogonalEdge) {\n            this.el.classList.add(`orthogonal-edge-${options.orthogonalEdge}`);\n        }\n        if (isMacintosh) {\n            this.el.classList.add('mac');\n        }\n        const onMouseDown = this._register(new DomEmitter(this.el, 'mousedown')).event;\n        this._register(onMouseDown(e => this.onPointerStart(e, new MouseEventFactory()), this));\n        const onMouseDoubleClick = this._register(new DomEmitter(this.el, 'dblclick')).event;\n        this._register(onMouseDoubleClick(this.onPointerDoublePress, this));\n        const onMouseEnter = this._register(new DomEmitter(this.el, 'mouseenter')).event;\n        this._register(onMouseEnter(() => Sash.onMouseEnter(this)));\n        const onMouseLeave = this._register(new DomEmitter(this.el, 'mouseleave')).event;\n        this._register(onMouseLeave(() => Sash.onMouseLeave(this)));\n        this._register(Gesture.addTarget(this.el));\n        const onTouchStart = this._register(new DomEmitter(this.el, EventType.Start)).event;\n        this._register(onTouchStart(e => this.onPointerStart(e, new GestureEventFactory(this.el)), this));\n        const onTap = this._register(new DomEmitter(this.el, EventType.Tap)).event;\n        let doubleTapTimeout = undefined;\n        this._register(onTap(event => {\n            if (doubleTapTimeout) {\n                clearTimeout(doubleTapTimeout);\n                doubleTapTimeout = undefined;\n                this.onPointerDoublePress(event);\n                return;\n            }\n            clearTimeout(doubleTapTimeout);\n            doubleTapTimeout = setTimeout(() => doubleTapTimeout = undefined, 250);\n        }, this));\n        if (typeof options.size === 'number') {\n            this.size = options.size;\n            if (options.orientation === 0 /* Orientation.VERTICAL */) {\n                this.el.style.width = `${this.size}px`;\n            }\n            else {\n                this.el.style.height = `${this.size}px`;\n            }\n        }\n        else {\n            this.size = globalSize;\n            this._register(onDidChangeGlobalSize.event(size => {\n                this.size = size;\n                this.layout();\n            }));\n        }\n        this._register(onDidChangeHoverDelay.event(delay => this.hoverDelay = delay));\n        this.layoutProvider = layoutProvider;\n        this.orthogonalStartSash = options.orthogonalStartSash;\n        this.orthogonalEndSash = options.orthogonalEndSash;\n        this.orientation = options.orientation || 0 /* Orientation.VERTICAL */;\n        if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n            this.el.classList.add('horizontal');\n            this.el.classList.remove('vertical');\n        }\n        else {\n            this.el.classList.remove('horizontal');\n            this.el.classList.add('vertical');\n        }\n        this.el.classList.toggle('debug', DEBUG);\n        this.layout();\n    }\n    onPointerStart(event, pointerEventFactory) {\n        EventHelper.stop(event);\n        let isMultisashResize = false;\n        if (!event.__orthogonalSashEvent) {\n            const orthogonalSash = this.getOrthogonalSash(event);\n            if (orthogonalSash) {\n                isMultisashResize = true;\n                event.__orthogonalSashEvent = true;\n                orthogonalSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n            }\n        }\n        if (this.linkedSash && !event.__linkedSashEvent) {\n            event.__linkedSashEvent = true;\n            this.linkedSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n        }\n        if (!this.state) {\n            return;\n        }\n        const iframes = document.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            iframe.classList.add(PointerEventsDisabledCssClass); // disable mouse events on iframes as long as we drag the sash\n        }\n        const startX = event.pageX;\n        const startY = event.pageY;\n        const altKey = event.altKey;\n        const startEvent = { startX, currentX: startX, startY, currentY: startY, altKey };\n        this.el.classList.add('active');\n        this._onDidStart.fire(startEvent);\n        // fix https://github.com/microsoft/vscode/issues/21675\n        const style = createStyleSheet(this.el);\n        const updateStyle = () => {\n            let cursor = '';\n            if (isMultisashResize) {\n                cursor = 'all-scroll';\n            }\n            else if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 's-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'n-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n                }\n            }\n            else {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 'e-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'w-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n                }\n            }\n            style.textContent = `* { cursor: ${cursor} !important; }`;\n        };\n        const disposables = new DisposableStore();\n        updateStyle();\n        if (!isMultisashResize) {\n            this.onDidEnablementChange.event(updateStyle, null, disposables);\n        }\n        const onPointerMove = (e) => {\n            EventHelper.stop(e, false);\n            const event = { startX, currentX: e.pageX, startY, currentY: e.pageY, altKey };\n            this._onDidChange.fire(event);\n        };\n        const onPointerUp = (e) => {\n            EventHelper.stop(e, false);\n            this.el.removeChild(style);\n            this.el.classList.remove('active');\n            this._onDidEnd.fire();\n            disposables.dispose();\n            for (const iframe of iframes) {\n                iframe.classList.remove(PointerEventsDisabledCssClass);\n            }\n        };\n        pointerEventFactory.onPointerMove(onPointerMove, null, disposables);\n        pointerEventFactory.onPointerUp(onPointerUp, null, disposables);\n        disposables.add(pointerEventFactory);\n    }\n    onPointerDoublePress(e) {\n        const orthogonalSash = this.getOrthogonalSash(e);\n        if (orthogonalSash) {\n            orthogonalSash._onDidReset.fire();\n        }\n        if (this.linkedSash) {\n            this.linkedSash._onDidReset.fire();\n        }\n        this._onDidReset.fire();\n    }\n    static onMouseEnter(sash, fromLinkedSash = false) {\n        if (sash.el.classList.contains('active')) {\n            sash.hoverDelayer.cancel();\n            sash.el.classList.add('hover');\n        }\n        else {\n            sash.hoverDelayer.trigger(() => sash.el.classList.add('hover'), sash.hoverDelay).then(undefined, () => { });\n        }\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseEnter(sash.linkedSash, true);\n        }\n    }\n    static onMouseLeave(sash, fromLinkedSash = false) {\n        sash.hoverDelayer.cancel();\n        sash.el.classList.remove('hover');\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseLeave(sash.linkedSash, true);\n        }\n    }\n    /**\n     * Forcefully stop any user interactions with this sash.\n     * Useful when hiding a parent component, while the user is still\n     * interacting with the sash.\n     */\n    clearSashHoverState() {\n        Sash.onMouseLeave(this);\n    }\n    /**\n     * Layout the sash. The sash will size and position itself\n     * based on its provided {@link ISashLayoutProvider layout provider}.\n     */\n    layout() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            const verticalProvider = this.layoutProvider;\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (this.size / 2) + 'px';\n            if (verticalProvider.getVerticalSashTop) {\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n            }\n            if (verticalProvider.getVerticalSashHeight) {\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n            }\n        }\n        else {\n            const horizontalProvider = this.layoutProvider;\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (this.size / 2) + 'px';\n            if (horizontalProvider.getHorizontalSashLeft) {\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n            }\n            if (horizontalProvider.getHorizontalSashWidth) {\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n            }\n        }\n    }\n    getOrthogonalSash(e) {\n        var _a;\n        const target = (_a = e.initialTarget) !== null && _a !== void 0 ? _a : e.target;\n        if (!target || !(target instanceof HTMLElement)) {\n            return undefined;\n        }\n        if (target.classList.contains('orthogonal-drag-handle')) {\n            return target.classList.contains('start') ? this.orthogonalStartSash : this.orthogonalEndSash;\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        this.el.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { Widget } from '../widget.js';\nimport { IntervalTimer, TimeoutTimer } from '../../../common/async.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport * as dom from '../../dom.js';\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\nexport class ScrollbarArrow extends Widget {\n    constructor(opts) {\n        super();\n        this._onActivate = opts.onActivate;\n        this.bgDomNode = document.createElement('div');\n        this.bgDomNode.className = 'arrow-background';\n        this.bgDomNode.style.position = 'absolute';\n        this.bgDomNode.style.width = opts.bgWidth + 'px';\n        this.bgDomNode.style.height = opts.bgHeight + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.bgDomNode.style.top = '0px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.bgDomNode.style.left = '0px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.bgDomNode.style.bottom = '0px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.bgDomNode.style.right = '0px';\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.className = opts.className;\n        this.domNode.classList.add(...ThemeIcon.asClassNameArray(opts.icon));\n        this.domNode.style.position = 'absolute';\n        this.domNode.style.width = ARROW_IMG_SIZE + 'px';\n        this.domNode.style.height = ARROW_IMG_SIZE + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.domNode.style.top = opts.top + 'px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.domNode.style.left = opts.left + 'px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.domNode.style.bottom = opts.bottom + 'px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.domNode.style.right = opts.right + 'px';\n        }\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._register(dom.addStandardDisposableListener(this.bgDomNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._register(dom.addStandardDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._pointerdownRepeatTimer = this._register(new IntervalTimer());\n        this._pointerdownScheduleRepeatTimer = this._register(new TimeoutTimer());\n    }\n    _arrowPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const scheduleRepeater = () => {\n            this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24);\n        };\n        this._onActivate();\n        this._pointerdownRepeatTimer.cancel();\n        this._pointerdownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => { }, () => {\n            this._pointerdownRepeatTimer.cancel();\n            this._pointerdownScheduleRepeatTimer.cancel();\n        });\n        e.preventDefault();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nexport class ScrollbarVisibilityController extends Disposable {\n    constructor(visibility, visibleClassName, invisibleClassName) {\n        super();\n        this._visibility = visibility;\n        this._visibleClassName = visibleClassName;\n        this._invisibleClassName = invisibleClassName;\n        this._domNode = null;\n        this._isVisible = false;\n        this._isNeeded = false;\n        this._rawShouldBeVisible = false;\n        this._shouldBeVisible = false;\n        this._revealTimer = this._register(new TimeoutTimer());\n    }\n    setVisibility(visibility) {\n        if (this._visibility !== visibility) {\n            this._visibility = visibility;\n            this._updateShouldBeVisible();\n        }\n    }\n    // ----------------- Hide / Reveal\n    setShouldBeVisible(rawShouldBeVisible) {\n        this._rawShouldBeVisible = rawShouldBeVisible;\n        this._updateShouldBeVisible();\n    }\n    _applyVisibilitySetting() {\n        if (this._visibility === 2 /* ScrollbarVisibility.Hidden */) {\n            return false;\n        }\n        if (this._visibility === 3 /* ScrollbarVisibility.Visible */) {\n            return true;\n        }\n        return this._rawShouldBeVisible;\n    }\n    _updateShouldBeVisible() {\n        const shouldBeVisible = this._applyVisibilitySetting();\n        if (this._shouldBeVisible !== shouldBeVisible) {\n            this._shouldBeVisible = shouldBeVisible;\n            this.ensureVisibility();\n        }\n    }\n    setIsNeeded(isNeeded) {\n        if (this._isNeeded !== isNeeded) {\n            this._isNeeded = isNeeded;\n            this.ensureVisibility();\n        }\n    }\n    setDomNode(domNode) {\n        this._domNode = domNode;\n        this._domNode.setClassName(this._invisibleClassName);\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n        this.setShouldBeVisible(false);\n    }\n    ensureVisibility() {\n        if (!this._isNeeded) {\n            // Nothing to be rendered\n            this._hide(false);\n            return;\n        }\n        if (this._shouldBeVisible) {\n            this._reveal();\n        }\n        else {\n            this._hide(true);\n        }\n    }\n    _reveal() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        // The CSS animation doesn't play otherwise\n        this._revealTimer.setIfNotSet(() => {\n            var _a;\n            (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._visibleClassName);\n        }, 0);\n    }\n    _hide(withFadeAway) {\n        var _a;\n        this._revealTimer.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { ScrollbarArrow } from './scrollbarArrow.js';\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\nimport { Widget } from '../widget.js';\nimport * as platform from '../../../common/platform.js';\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst POINTER_DRAG_RESET_DISTANCE = 140;\nexport class AbstractScrollbar extends Widget {\n    constructor(opts) {\n        super();\n        this._lazyRender = opts.lazyRender;\n        this._host = opts.host;\n        this._scrollable = opts.scrollable;\n        this._scrollByPage = opts.scrollByPage;\n        this._scrollbarState = opts.scrollbarState;\n        this._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n        this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._shouldRender = true;\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this._visibilityController.setDomNode(this.domNode);\n        this.domNode.setPosition('absolute');\n        this._register(dom.addDisposableListener(this.domNode.domNode, dom.EventType.POINTER_DOWN, (e) => this._domNodePointerDown(e)));\n    }\n    // ----------------- creation\n    /**\n     * Creates the dom node for an arrow & adds it to the container\n     */\n    _createArrow(opts) {\n        const arrow = this._register(new ScrollbarArrow(opts));\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\n        this.domNode.domNode.appendChild(arrow.domNode);\n    }\n    /**\n     * Creates the slider dom node, adds it to the container & hooks up the events\n     */\n    _createSlider(top, left, width, height) {\n        this.slider = createFastDomNode(document.createElement('div'));\n        this.slider.setClassName('slider');\n        this.slider.setPosition('absolute');\n        this.slider.setTop(top);\n        this.slider.setLeft(left);\n        if (typeof width === 'number') {\n            this.slider.setWidth(width);\n        }\n        if (typeof height === 'number') {\n            this.slider.setHeight(height);\n        }\n        this.slider.setLayerHinting(true);\n        this.slider.setContain('strict');\n        this.domNode.domNode.appendChild(this.slider.domNode);\n        this._register(dom.addDisposableListener(this.slider.domNode, dom.EventType.POINTER_DOWN, (e) => {\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }));\n        this.onclick(this.slider.domNode, e => {\n            if (e.leftButton) {\n                e.stopPropagation();\n            }\n        });\n    }\n    // ----------------- Update state\n    _onElementSize(visibleSize) {\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollSize(elementScrollSize) {\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollPosition(elementScrollPosition) {\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    // ----------------- rendering\n    beginReveal() {\n        this._visibilityController.setShouldBeVisible(true);\n    }\n    beginHide() {\n        this._visibilityController.setShouldBeVisible(false);\n    }\n    render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n    }\n    // ----------------- DOM events\n    _domNodePointerDown(e) {\n        if (e.target !== this.domNode.domNode) {\n            return;\n        }\n        this._onPointerDown(e);\n    }\n    delegatePointerDown(e) {\n        const domTop = this.domNode.domNode.getClientRects()[0].top;\n        const sliderStart = domTop + this._scrollbarState.getSliderPosition();\n        const sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n        const pointerPos = this._sliderPointerPosition(e);\n        if (sliderStart <= pointerPos && pointerPos <= sliderStop) {\n            // Act as if it was a pointer down on the slider\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }\n        else {\n            // Act as if it was a pointer down on the scrollbar\n            this._onPointerDown(e);\n        }\n    }\n    _onPointerDown(e) {\n        let offsetX;\n        let offsetY;\n        if (e.target === this.domNode.domNode && typeof e.offsetX === 'number' && typeof e.offsetY === 'number') {\n            offsetX = e.offsetX;\n            offsetY = e.offsetY;\n        }\n        else {\n            const domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n            offsetX = e.pageX - domNodePosition.left;\n            offsetY = e.pageY - domNodePosition.top;\n        }\n        const offset = this._pointerDownRelativePosition(offsetX, offsetY);\n        this._setDesiredScrollPositionNow(this._scrollByPage\n            ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n            : this._scrollbarState.getDesiredScrollPositionFromOffset(offset));\n        if (e.button === 0) {\n            // left button\n            e.preventDefault();\n            this._sliderPointerDown(e);\n        }\n    }\n    _sliderPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const initialPointerPosition = this._sliderPointerPosition(e);\n        const initialPointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(e);\n        const initialScrollbarState = this._scrollbarState.clone();\n        this.slider.toggleClassName('active', true);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => {\n            const pointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(pointerMoveData);\n            const pointerOrthogonalDelta = Math.abs(pointerOrthogonalPosition - initialPointerOrthogonalPosition);\n            if (platform.isWindows && pointerOrthogonalDelta > POINTER_DRAG_RESET_DISTANCE) {\n                // The pointer has wondered away from the scrollbar => reset dragging\n                this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n                return;\n            }\n            const pointerPosition = this._sliderPointerPosition(pointerMoveData);\n            const pointerDelta = pointerPosition - initialPointerPosition;\n            this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(pointerDelta));\n        }, () => {\n            this.slider.toggleClassName('active', false);\n            this._host.onDragEnd();\n        });\n        this._host.onDragStart();\n    }\n    _setDesiredScrollPositionNow(_desiredScrollPosition) {\n        const desiredScrollPosition = {};\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\n    }\n    updateScrollbarSize(scrollbarSize) {\n        this._updateScrollbarSize(scrollbarSize);\n        this._scrollbarState.setScrollbarSize(scrollbarSize);\n        this._shouldRender = true;\n        if (!this._lazyRender) {\n            this.render();\n        }\n    }\n    isNeeded() {\n        return this._scrollbarState.isNeeded();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\nexport class ScrollbarState {\n    constructor(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n        this._arrowSize = Math.round(arrowSize);\n        this._visibleSize = visibleSize;\n        this._scrollSize = scrollSize;\n        this._scrollPosition = scrollPosition;\n        this._computedAvailableSize = 0;\n        this._computedIsNeeded = false;\n        this._computedSliderSize = 0;\n        this._computedSliderRatio = 0;\n        this._computedSliderPosition = 0;\n        this._refreshComputedValues();\n    }\n    clone() {\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n    }\n    setVisibleSize(visibleSize) {\n        const iVisibleSize = Math.round(visibleSize);\n        if (this._visibleSize !== iVisibleSize) {\n            this._visibleSize = iVisibleSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollSize(scrollSize) {\n        const iScrollSize = Math.round(scrollSize);\n        if (this._scrollSize !== iScrollSize) {\n            this._scrollSize = iScrollSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollPosition(scrollPosition) {\n        const iScrollPosition = Math.round(scrollPosition);\n        if (this._scrollPosition !== iScrollPosition) {\n            this._scrollPosition = iScrollPosition;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollbarSize(scrollbarSize) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n    }\n    setOppositeScrollbarSize(oppositeScrollbarSize) {\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n    }\n    static _computeValues(oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\n        const computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n        const computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n        if (!computedIsNeeded) {\n            // There is no need for a slider\n            return {\n                computedAvailableSize: Math.round(computedAvailableSize),\n                computedIsNeeded: computedIsNeeded,\n                computedSliderSize: Math.round(computedRepresentableSize),\n                computedSliderRatio: 0,\n                computedSliderPosition: 0,\n            };\n        }\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n        const computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n        const computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n        const computedSliderPosition = (scrollPosition * computedSliderRatio);\n        return {\n            computedAvailableSize: Math.round(computedAvailableSize),\n            computedIsNeeded: computedIsNeeded,\n            computedSliderSize: Math.round(computedSliderSize),\n            computedSliderRatio: computedSliderRatio,\n            computedSliderPosition: Math.round(computedSliderPosition),\n        };\n    }\n    _refreshComputedValues() {\n        const r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n        this._computedAvailableSize = r.computedAvailableSize;\n        this._computedIsNeeded = r.computedIsNeeded;\n        this._computedSliderSize = r.computedSliderSize;\n        this._computedSliderRatio = r.computedSliderRatio;\n        this._computedSliderPosition = r.computedSliderPosition;\n    }\n    getArrowSize() {\n        return this._arrowSize;\n    }\n    getScrollPosition() {\n        return this._scrollPosition;\n    }\n    getRectangleLargeSize() {\n        return this._computedAvailableSize;\n    }\n    getRectangleSmallSize() {\n        return this._scrollbarSize;\n    }\n    isNeeded() {\n        return this._computedIsNeeded;\n    }\n    getSliderSize() {\n        return this._computedSliderSize;\n    }\n    getSliderPosition() {\n        return this._computedSliderPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\n     */\n    getDesiredScrollPositionFromOffset(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n    /**\n     * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n     * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n     * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n     * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n     */\n    getDesiredScrollPositionFromOffsetPaged(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const correctedOffset = offset - this._arrowSize; // compensate if has arrows\n        let desiredScrollPosition = this._scrollPosition;\n        if (correctedOffset < this._computedSliderPosition) {\n            desiredScrollPosition -= this._visibleSize; // page up/left\n        }\n        else {\n            desiredScrollPosition += this._visibleSize; // page down/right\n        }\n        return desiredScrollPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n     */\n    getDesiredScrollPositionFromDelta(delta) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = this._computedSliderPosition + delta;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class HorizontalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\n            visibility: options.horizontal,\n            extraScrollbarClassName: 'horizontal',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.horizontalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonLeft,\n                top: scrollbarDelta,\n                left: arrowDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonRight,\n                top: scrollbarDelta,\n                left: undefined,\n                bottom: undefined,\n                right: arrowDelta,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n            });\n        }\n        this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setWidth(sliderSize);\n        this.slider.setLeft(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(largeSize);\n        this.domNode.setHeight(smallSize);\n        this.domNode.setLeft(0);\n        this.domNode.setBottom(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetX;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageX;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageY;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setHeight(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollLeft = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize);\n        this._scrollbarState.setOppositeScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        this._visibilityController.setVisibility(options.horizontal);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class VerticalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), \n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\n            visibility: options.vertical,\n            extraScrollbarClassName: 'vertical',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.verticalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonUp,\n                top: arrowDelta,\n                left: scrollbarDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonDown,\n                top: undefined,\n                left: scrollbarDelta,\n                bottom: arrowDelta,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n            });\n        }\n        this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setHeight(sliderSize);\n        this.slider.setTop(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(smallSize);\n        this.domNode.setHeight(largeSize);\n        this.domNode.setRight(0);\n        this.domNode.setTop(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetY;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageY;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageX;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setWidth(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollTop = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n        this._scrollbarState.setOppositeScrollbarSize(0);\n        this._visibilityController.setVisibility(options.vertical);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getZoomFactor } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport './media/scrollbars.css';\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\nclass MouseWheelClassifierItem {\n    constructor(timestamp, deltaX, deltaY) {\n        this.timestamp = timestamp;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.score = 0;\n    }\n}\nexport class MouseWheelClassifier {\n    constructor() {\n        this._capacity = 5;\n        this._memory = [];\n        this._front = -1;\n        this._rear = -1;\n    }\n    isPhysicalMouseWheel() {\n        if (this._front === -1 && this._rear === -1) {\n            // no elements\n            return false;\n        }\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n        let remainingInfluence = 1;\n        let score = 0;\n        let iteration = 1;\n        let index = this._rear;\n        do {\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n            remainingInfluence -= influence;\n            score += this._memory[index].score * influence;\n            if (index === this._front) {\n                break;\n            }\n            index = (this._capacity + index - 1) % this._capacity;\n            iteration++;\n        } while (true);\n        return (score <= 0.5);\n    }\n    acceptStandardWheelEvent(e) {\n        const osZoomFactor = window.devicePixelRatio / getZoomFactor();\n        if (platform.isWindows || platform.isLinux) {\n            // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n            // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n            this.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n        }\n        else {\n            this.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n    }\n    accept(timestamp, deltaX, deltaY) {\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n        item.score = this._computeScore(item);\n        if (this._front === -1 && this._rear === -1) {\n            this._memory[0] = item;\n            this._front = 0;\n            this._rear = 0;\n        }\n        else {\n            this._rear = (this._rear + 1) % this._capacity;\n            if (this._rear === this._front) {\n                // Drop oldest\n                this._front = (this._front + 1) % this._capacity;\n            }\n            this._memory[this._rear] = item;\n        }\n    }\n    /**\n     * A score between 0 and 1 for `item`.\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n     */\n    _computeScore(item) {\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n            // both axes exercised => definitely not a physical mouse wheel\n            return 1;\n        }\n        let score = 0.5;\n        const prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\n        if (prev) {\n            // const deltaT = item.timestamp - prev.timestamp;\n            // if (deltaT < 1000 / 30) {\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n            // \tscore += 0.25;\n            // }\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\n            // \tscore -= 0.25;\n            // }\n        }\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n            // non-integer deltas => indicator that this is not a physical mouse wheel\n            score += 0.25;\n        }\n        return Math.min(Math.max(score, 0), 1);\n    }\n    _isAlmostInt(value) {\n        const delta = Math.abs(Math.round(value) - value);\n        return (delta < 0.01);\n    }\n}\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\nexport class AbstractScrollableElement extends Widget {\n    get options() {\n        return this._options;\n    }\n    constructor(element, options, scrollable) {\n        super();\n        this._onScroll = this._register(new Emitter());\n        this.onScroll = this._onScroll.event;\n        this._onWillScroll = this._register(new Emitter());\n        element.style.overflow = 'hidden';\n        this._options = resolveOptions(options);\n        this._scrollable = scrollable;\n        this._register(this._scrollable.onScroll((e) => {\n            this._onWillScroll.fire(e);\n            this._onDidScroll(e);\n            this._onScroll.fire(e);\n        }));\n        const scrollbarHost = {\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n            onDragStart: () => this._onDragStart(),\n            onDragEnd: () => this._onDragEnd(),\n        };\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.style.position = 'relative';\n        this._domNode.style.overflow = 'hidden';\n        this._domNode.appendChild(element);\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n        if (this._options.useShadows) {\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._leftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topLeftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n        }\n        else {\n            this._leftShadowDomNode = null;\n            this._topShadowDomNode = null;\n            this._topLeftShadowDomNode = null;\n        }\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n        this._mouseWheelToDispose = [];\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n        this.onmouseleave(this._listenOnDomNode, (e) => this._onMouseLeave(e));\n        this._hideTimeout = this._register(new TimeoutTimer());\n        this._isDragging = false;\n        this._mouseIsOver = false;\n        this._shouldRender = true;\n        this._revealOnScroll = true;\n    }\n    dispose() {\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        super.dispose();\n    }\n    /**\n     * Get the generated 'scrollable' dom node\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    getOverviewRulerLayoutInfo() {\n        return {\n            parent: this._domNode,\n            insertBefore: this._verticalScrollbar.domNode.domNode,\n        };\n    }\n    /**\n     * Delegate a pointer down event to the vertical scrollbar.\n     * This is to help with clicking somewhere else and having the scrollbar react.\n     */\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        this._verticalScrollbar.delegatePointerDown(browserEvent);\n    }\n    getScrollDimensions() {\n        return this._scrollable.getScrollDimensions();\n    }\n    setScrollDimensions(dimensions) {\n        this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\n     * Update the class name of the scrollable element.\n     */\n    updateClassName(newClassName) {\n        this._options.className = newClassName;\n        // Defaults are different on Macs\n        if (platform.isMacintosh) {\n            this._options.className += ' mac';\n        }\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\n     * Update configuration options for the scrollbar.\n     */\n    updateOptions(newOptions) {\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        }\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n        }\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n        }\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n        }\n        if (typeof newOptions.horizontal !== 'undefined') {\n            this._options.horizontal = newOptions.horizontal;\n        }\n        if (typeof newOptions.vertical !== 'undefined') {\n            this._options.vertical = newOptions.vertical;\n        }\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n            this._options.horizontalScrollbarSize = newOptions.horizontalScrollbarSize;\n        }\n        if (typeof newOptions.verticalScrollbarSize !== 'undefined') {\n            this._options.verticalScrollbarSize = newOptions.verticalScrollbarSize;\n        }\n        if (typeof newOptions.scrollByPage !== 'undefined') {\n            this._options.scrollByPage = newOptions.scrollByPage;\n        }\n        this._horizontalScrollbar.updateOptions(this._options);\n        this._verticalScrollbar.updateOptions(this._options);\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        this._onMouseWheel(new StandardWheelEvent(browserEvent));\n    }\n    // -------------------- mouse wheel scrolling --------------------\n    _setListeningToMouseWheel(shouldListen) {\n        const isListening = (this._mouseWheelToDispose.length > 0);\n        if (isListening === shouldListen) {\n            // No change\n            return;\n        }\n        // Stop listening (if necessary)\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        // Start listening (if necessary)\n        if (shouldListen) {\n            const onMouseWheel = (browserEvent) => {\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\n            };\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n        }\n    }\n    _onMouseWheel(e) {\n        const classifier = MouseWheelClassifier.INSTANCE;\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n            classifier.acceptStandardWheelEvent(e);\n        }\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n        let didScroll = false;\n        if (e.deltaY || e.deltaX) {\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n            if (this._options.scrollPredominantAxis) {\n                if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n                    deltaX = 0;\n                }\n                else {\n                    deltaY = 0;\n                }\n            }\n            if (this._options.flipAxes) {\n                [deltaY, deltaX] = [deltaX, deltaY];\n            }\n            // Convert vertical scrolling to horizontal if shift is held, this\n            // is handled at a higher level on Mac\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n                deltaX = deltaY;\n                deltaY = 0;\n            }\n            if (e.browserEvent && e.browserEvent.altKey) {\n                // fastScrolling\n                deltaX = deltaX * this._options.fastScrollSensitivity;\n                deltaY = deltaY * this._options.fastScrollSensitivity;\n            }\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\n            let desiredScrollPosition = {};\n            if (deltaY) {\n                const deltaScrollTop = SCROLL_WHEEL_SENSITIVITY * deltaY;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollTop = futureScrollPosition.scrollTop - (deltaScrollTop < 0 ? Math.floor(deltaScrollTop) : Math.ceil(deltaScrollTop));\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n            }\n            if (deltaX) {\n                const deltaScrollLeft = SCROLL_WHEEL_SENSITIVITY * deltaX;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - (deltaScrollLeft < 0 ? Math.floor(deltaScrollLeft) : Math.ceil(deltaScrollLeft));\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n            }\n            // Check that we are scrolling towards a location which is valid\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n                    && this._options.mouseWheelSmoothScroll\n                    && classifier.isPhysicalMouseWheel());\n                if (canPerformSmoothScroll) {\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n                }\n                else {\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\n                }\n                didScroll = true;\n            }\n        }\n        let consumeMouseWheel = didScroll;\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n            consumeMouseWheel = true;\n        }\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n            consumeMouseWheel = true;\n        }\n        if (consumeMouseWheel) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n    _onDidScroll(e) {\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n        if (this._options.useShadows) {\n            this._shouldRender = true;\n        }\n        if (this._revealOnScroll) {\n            this._reveal();\n        }\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    /**\n     * Render / mutate the DOM now.\n     * Should be used together with the ctor option `lazyRender`.\n     */\n    renderNow() {\n        if (!this._options.lazyRender) {\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\n        }\n        this._render();\n    }\n    _render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._horizontalScrollbar.render();\n        this._verticalScrollbar.render();\n        if (this._options.useShadows) {\n            const scrollState = this._scrollable.getCurrentScrollPosition();\n            const enableTop = scrollState.scrollTop > 0;\n            const enableLeft = scrollState.scrollLeft > 0;\n            const leftClassName = (enableLeft ? ' left' : '');\n            const topClassName = (enableTop ? ' top' : '');\n            const topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n            this._leftShadowDomNode.setClassName(`shadow${leftClassName}`);\n            this._topShadowDomNode.setClassName(`shadow${topClassName}`);\n            this._topLeftShadowDomNode.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n        }\n    }\n    // -------------------- fade in / fade out --------------------\n    _onDragStart() {\n        this._isDragging = true;\n        this._reveal();\n    }\n    _onDragEnd() {\n        this._isDragging = false;\n        this._hide();\n    }\n    _onMouseLeave(e) {\n        this._mouseIsOver = false;\n        this._hide();\n    }\n    _onMouseOver(e) {\n        this._mouseIsOver = true;\n        this._reveal();\n    }\n    _reveal() {\n        this._verticalScrollbar.beginReveal();\n        this._horizontalScrollbar.beginReveal();\n        this._scheduleHide();\n    }\n    _hide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._verticalScrollbar.beginHide();\n            this._horizontalScrollbar.beginHide();\n        }\n    }\n    _scheduleHide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n        }\n    }\n}\nexport class ScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n}\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n    constructor(element, options, scrollable) {\n        super(element, options, scrollable);\n    }\n    setScrollPosition(update) {\n        if (update.reuseAnimation) {\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n        }\n        else {\n            this._scrollable.setScrollPositionNow(update);\n        }\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n}\nexport class DomScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: false,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n        this._element = element;\n        this.onScroll((e) => {\n            if (e.scrollTopChanged) {\n                this._element.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this._element.scrollLeft = e.scrollLeft;\n            }\n        });\n        this.scanDomNode();\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n    scanDomNode() {\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n        this.setScrollDimensions({\n            width: this._element.clientWidth,\n            scrollWidth: this._element.scrollWidth,\n            height: this._element.clientHeight,\n            scrollHeight: this._element.scrollHeight\n        });\n        this.setScrollPosition({\n            scrollLeft: this._element.scrollLeft,\n            scrollTop: this._element.scrollTop,\n        });\n    }\n}\nfunction resolveOptions(opts) {\n    const result = {\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* ScrollbarVisibility.Auto */),\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* ScrollbarVisibility.Auto */),\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n    };\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n    // Defaults are different on Macs\n    if (platform.isMacintosh) {\n        result.className += ' mac';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown } from '../../markdownRenderer.js';\nimport { List } from '../list/listWidget.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { KeyCodeUtils } from '../../../common/keyCodes.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBoxCustom.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nconst SELECT_OPTION_ENTRY_TEMPLATE_ID = 'selectOption.entry.template';\nclass SelectListRenderer {\n    get templateId() { return SELECT_OPTION_ENTRY_TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.root = container;\n        data.text = dom.append(container, $('.option-text'));\n        data.detail = dom.append(container, $('.option-detail'));\n        data.decoratorRight = dom.append(container, $('.option-decorator-right'));\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.text;\n        const detail = element.detail;\n        const decoratorRight = element.decoratorRight;\n        const isDisabled = element.isDisabled;\n        data.text.textContent = text;\n        data.detail.textContent = !!detail ? detail : '';\n        data.decoratorRight.innerText = !!decoratorRight ? decoratorRight : '';\n        // pseudo-select disabled option\n        if (isDisabled) {\n            data.root.classList.add('option-disabled');\n        }\n        else {\n            // Make sure we do class removal from prior template rendering\n            data.root.classList.remove('option-disabled');\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nexport class SelectBoxList extends Disposable {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        this.options = [];\n        this._currentSelection = 0;\n        this._hasDetails = false;\n        this._skipLayout = false;\n        this._sticky = false; // for dev purposes only\n        this._isVisible = false;\n        this.styles = styles;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        if (typeof this.selectBoxOptions.minBottomMargin !== 'number') {\n            this.selectBoxOptions.minBottomMargin = SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;\n        }\n        else if (this.selectBoxOptions.minBottomMargin < 0) {\n            this.selectBoxOptions.minBottomMargin = 0;\n        }\n        this.selectElement = document.createElement('select');\n        // Use custom CSS vars for padding calculation\n        this.selectElement.className = 'monaco-select-box monaco-select-box-dropdown-padding';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = new Emitter();\n        this._register(this._onDidSelect);\n        this.registerListeners();\n        this.constructSelectDropDown(contextViewProvider);\n        this.selected = selected || 0;\n        if (options) {\n            this.setOptions(options, selected);\n        }\n        this.initStyleSheet();\n    }\n    // IDelegate - List renderer\n    getHeight() {\n        return 22;\n    }\n    getTemplateId() {\n        return SELECT_OPTION_ENTRY_TEMPLATE_ID;\n    }\n    constructSelectDropDown(contextViewProvider) {\n        // SetUp ContextView container to hold select Dropdown\n        this.contextViewProvider = contextViewProvider;\n        this.selectDropDownContainer = dom.$('.monaco-select-box-dropdown-container');\n        // Use custom CSS vars for padding calculation (shared with parent select)\n        this.selectDropDownContainer.classList.add('monaco-select-box-dropdown-padding');\n        // Setup container for select option details\n        this.selectionDetailsPane = dom.append(this.selectDropDownContainer, $('.select-box-details-pane'));\n        // Create span flex box item/div we can measure and control\n        const widthControlOuterDiv = dom.append(this.selectDropDownContainer, $('.select-box-dropdown-container-width-control'));\n        const widthControlInnerDiv = dom.append(widthControlOuterDiv, $('.width-control-div'));\n        this.widthControlElement = document.createElement('span');\n        this.widthControlElement.className = 'option-text-width-control';\n        dom.append(widthControlInnerDiv, this.widthControlElement);\n        // Always default to below position\n        this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n        // Inline stylesheet for themes\n        this.styleElement = dom.createStyleSheet(this.selectDropDownContainer);\n        // Prevent dragging of dropdown #114329\n        this.selectDropDownContainer.setAttribute('draggable', 'true');\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.DRAG_START, (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n    }\n    registerListeners() {\n        // Parent native select keyboard listeners\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selected = e.target.selectedIndex;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }));\n        // Have to implement both keyboard and mouse controllers to handle disabled options\n        // Intercept mouse events to override normal select actions on parents\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.CLICK, (e) => {\n            dom.EventHelper.stop(e);\n            if (this._isVisible) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.MOUSE_DOWN, (e) => {\n            dom.EventHelper.stop(e);\n        }));\n        // Intercept touch events\n        // The following implementation is slightly different from the mouse event handlers above.\n        // Use the following helper variable, otherwise the list flickers.\n        let listIsVisibleOnTouchStart;\n        this._register(dom.addDisposableListener(this.selectElement, 'touchstart', (e) => {\n            listIsVisibleOnTouchStart = this._isVisible;\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, 'touchend', (e) => {\n            dom.EventHelper.stop(e);\n            if (listIsVisibleOnTouchStart) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        // Intercept keyboard handling\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            let showDropDown = false;\n            // Create and drop down select list on keyboard select\n            if (isMacintosh) {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ || event.keyCode === 16 /* KeyCode.UpArrow */ || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            else {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ && event.altKey || event.keyCode === 16 /* KeyCode.UpArrow */ && event.altKey || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            if (showDropDown) {\n                this.showSelectDropDown();\n                dom.EventHelper.stop(e, true);\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this._hasDetails = false;\n            this._cachedMaxDetailsHeight = undefined;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n                if (typeof option.description === 'string') {\n                    this._hasDetails = true;\n                }\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n            // Set current = selected since this is not necessarily a user exit\n            this._currentSelection = this.selected;\n        }\n    }\n    setOptionsList() {\n        var _a;\n        // Mirror options in drop-down\n        // Populate select list for non-native select mode\n        (_a = this.selectList) === null || _a === void 0 ? void 0 : _a.splice(0, this.selectList.length, this.options);\n    }\n    select(index) {\n        if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        this.container = container;\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.styleSelectElement();\n    }\n    initStyleSheet() {\n        const content = [];\n        // Style non-native select mode\n        if (this.styles.listFocusBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);\n        }\n        if (this.styles.listFocusForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);\n        }\n        if (this.styles.decoratorRightForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);\n        }\n        if (this.styles.selectBackground && this.styles.selectBorder && this.styles.selectBorder !== this.styles.selectBackground) {\n            content.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);\n        }\n        else if (this.styles.selectListBorder) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);\n        }\n        // Hover foreground - ignore for disabled options\n        if (this.styles.listHoverForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);\n        }\n        // Hover background - ignore for disabled options\n        if (this.styles.listHoverBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);\n        }\n        // Match quick input outline styles - ignore for disabled options\n        if (this.styles.listFocusOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        if (this.styles.listHoverOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        // Clear list styles on focus and on hover for disabled options\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        this.styleElement.textContent = content.join('\\n');\n    }\n    styleSelectElement() {\n        var _a, _b, _c;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const foreground = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n        const border = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        this.selectElement.style.backgroundColor = background;\n        this.selectElement.style.color = foreground;\n        this.selectElement.style.borderColor = border;\n    }\n    styleList() {\n        var _a, _b;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const listBackground = dom.asCssValueWithDefault(this.styles.selectListBackground, background);\n        this.selectDropDownListContainer.style.backgroundColor = listBackground;\n        this.selectionDetailsPane.style.backgroundColor = listBackground;\n        const optionsBorder = (_b = this.styles.focusBorder) !== null && _b !== void 0 ? _b : '';\n        this.selectDropDownContainer.style.outlineColor = optionsBorder;\n        this.selectDropDownContainer.style.outlineOffset = '-1px';\n        this.selectList.style(this.styles);\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n    // ContextView dropdown methods\n    showSelectDropDown() {\n        this.selectionDetailsPane.innerText = '';\n        if (!this.contextViewProvider || this._isVisible) {\n            return;\n        }\n        // Lazily create and populate list only at open, moved from constructor\n        this.createSelectList(this.selectDropDownContainer);\n        this.setOptionsList();\n        // This allows us to flip the position based on measurement\n        // Set drop-down position above/below from required height and margins\n        // If pre-layout cannot fit at least one option do not show drop-down\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container, true),\n            layout: () => {\n                this.layoutSelectDropDown();\n            },\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Hide so we can relay out\n        this._isVisible = true;\n        this.hideSelectDropDown(false);\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container),\n            layout: () => this.layoutSelectDropDown(),\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Track initial selection the case user escape, blur\n        this._currentSelection = this.selected;\n        this._isVisible = true;\n        this.selectElement.setAttribute('aria-expanded', 'true');\n    }\n    hideSelectDropDown(focusSelect) {\n        if (!this.contextViewProvider || !this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this.selectElement.setAttribute('aria-expanded', 'false');\n        if (focusSelect) {\n            this.selectElement.focus();\n        }\n        this.contextViewProvider.hideContextView();\n    }\n    renderSelectDropDown(container, preLayoutPosition) {\n        container.appendChild(this.selectDropDownContainer);\n        // Pre-Layout allows us to change position\n        this.layoutSelectDropDown(preLayoutPosition);\n        return {\n            dispose: () => {\n                // contextView will dispose itself if moving from one View to another\n                try {\n                    container.removeChild(this.selectDropDownContainer); // remove to take out the CSS rules we add\n                }\n                catch (error) {\n                    // Ignore, removed already by change of focus\n                }\n            }\n        };\n    }\n    // Iterate over detailed descriptions, find max height\n    measureMaxDetailsHeight() {\n        let maxDetailsPaneHeight = 0;\n        this.options.forEach((_option, index) => {\n            this.updateDetail(index);\n            if (this.selectionDetailsPane.offsetHeight > maxDetailsPaneHeight) {\n                maxDetailsPaneHeight = this.selectionDetailsPane.offsetHeight;\n            }\n        });\n        return maxDetailsPaneHeight;\n    }\n    layoutSelectDropDown(preLayoutPosition) {\n        // Avoid recursion from layout called in onListFocus\n        if (this._skipLayout) {\n            return false;\n        }\n        // Layout ContextView drop down select list and container\n        // Have to manage our vertical overflow, sizing, position below or above\n        // Position has to be determined and set prior to contextView instantiation\n        if (this.selectList) {\n            // Make visible to enable measurements\n            this.selectDropDownContainer.classList.add('visible');\n            const selectPosition = dom.getDomNodePagePosition(this.selectElement);\n            const styles = getComputedStyle(this.selectElement);\n            const verticalPadding = parseFloat(styles.getPropertyValue('--dropdown-padding-top')) + parseFloat(styles.getPropertyValue('--dropdown-padding-bottom'));\n            const maxSelectDropDownHeightBelow = (window.innerHeight - selectPosition.top - selectPosition.height - (this.selectBoxOptions.minBottomMargin || 0));\n            const maxSelectDropDownHeightAbove = (selectPosition.top - SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN);\n            // Determine optimal width - min(longest option), opt(parent select, excluding margins), max(ContextView controlled)\n            const selectWidth = this.selectElement.offsetWidth;\n            const selectMinWidth = this.setWidthControlElement(this.widthControlElement);\n            const selectOptimalWidth = Math.max(selectMinWidth, Math.round(selectWidth)).toString() + 'px';\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Get initial list height and determine space above and below\n            this.selectList.getHTMLElement().style.height = '';\n            this.selectList.layout();\n            let listHeight = this.selectList.contentHeight;\n            if (this._hasDetails && this._cachedMaxDetailsHeight === undefined) {\n                this._cachedMaxDetailsHeight = this.measureMaxDetailsHeight();\n            }\n            const maxDetailsPaneHeight = this._hasDetails ? this._cachedMaxDetailsHeight : 0;\n            const minRequiredDropDownHeight = listHeight + verticalPadding + maxDetailsPaneHeight;\n            const maxVisibleOptionsBelow = ((Math.floor((maxSelectDropDownHeightBelow - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            const maxVisibleOptionsAbove = ((Math.floor((maxSelectDropDownHeightAbove - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            // If we are only doing pre-layout check/adjust position only\n            // Calculate vertical space available, flip up if insufficient\n            // Use reflected padding on parent select, ContextView style\n            // properties not available before DOM attachment\n            if (preLayoutPosition) {\n                // Check if select moved out of viewport , do not open\n                // If at least one option cannot be shown, don't open the drop-down or hide/remove if open\n                if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                    || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                    || ((maxVisibleOptionsBelow < 1) && (maxVisibleOptionsAbove < 1))) {\n                    // Indicate we cannot open\n                    return false;\n                }\n                // Determine if we have to flip up\n                // Always show complete list items - never more than Max available vertical height\n                if (maxVisibleOptionsBelow < SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS\n                    && maxVisibleOptionsAbove > maxVisibleOptionsBelow\n                    && this.options.length > maxVisibleOptionsBelow) {\n                    this._dropDownPosition = 1 /* AnchorPosition.ABOVE */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectionDetailsPane.classList.remove('border-top');\n                    this.selectionDetailsPane.classList.add('border-bottom');\n                }\n                else {\n                    this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectionDetailsPane.classList.remove('border-bottom');\n                    this.selectionDetailsPane.classList.add('border-top');\n                }\n                // Do full layout on showSelectDropDown only\n                return true;\n            }\n            // Check if select out of viewport or cutting into status bar\n            if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                || (this._dropDownPosition === 0 /* AnchorPosition.BELOW */ && maxVisibleOptionsBelow < 1)\n                || (this._dropDownPosition === 1 /* AnchorPosition.ABOVE */ && maxVisibleOptionsAbove < 1)) {\n                // Cannot properly layout, close and hide\n                this.hideSelectDropDown(true);\n                return false;\n            }\n            // SetUp list dimensions and layout - account for container padding\n            // Use position to check above or below available space\n            if (this._dropDownPosition === 0 /* AnchorPosition.BELOW */) {\n                if (this._isVisible && maxVisibleOptionsBelow + maxVisibleOptionsAbove < 1) {\n                    // If drop-down is visible, must be doing a DOM re-layout, hide since we don't fit\n                    // Hide drop-down, hide contextview, focus on parent select\n                    this.hideSelectDropDown(true);\n                    return false;\n                }\n                // Adjust list height to max from select bottom to margin (default/minBottomMargin)\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightBelow) {\n                    listHeight = (maxVisibleOptionsBelow * this.getHeight());\n                }\n            }\n            else {\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightAbove) {\n                    listHeight = (maxVisibleOptionsAbove * this.getHeight());\n                }\n            }\n            // Set adjusted list height and relayout\n            this.selectList.layout(listHeight);\n            this.selectList.domFocus();\n            // Finally set focus on selected item\n            if (this.selectList.length > 0) {\n                this.selectList.setFocus([this.selected || 0]);\n                this.selectList.reveal(this.selectList.getFocus()[0] || 0);\n            }\n            if (this._hasDetails) {\n                // Leave the selectDropDownContainer to size itself according to children (list + details) - #57447\n                this.selectList.getHTMLElement().style.height = (listHeight + verticalPadding) + 'px';\n                this.selectDropDownContainer.style.height = '';\n            }\n            else {\n                this.selectDropDownContainer.style.height = (listHeight + verticalPadding) + 'px';\n            }\n            this.updateDetail(this.selected);\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Maintain focus outline on parent select as well as list container - tabindex for focus\n            this.selectDropDownListContainer.setAttribute('tabindex', '0');\n            this.selectElement.classList.add('synthetic-focus');\n            this.selectDropDownContainer.classList.add('synthetic-focus');\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    setWidthControlElement(container) {\n        let elementWidth = 0;\n        if (container) {\n            let longest = 0;\n            let longestLength = 0;\n            this.options.forEach((option, index) => {\n                const detailLength = !!option.detail ? option.detail.length : 0;\n                const rightDecoratorLength = !!option.decoratorRight ? option.decoratorRight.length : 0;\n                const len = option.text.length + detailLength + rightDecoratorLength;\n                if (len > longestLength) {\n                    longest = index;\n                    longestLength = len;\n                }\n            });\n            container.textContent = this.options[longest].text + (!!this.options[longest].decoratorRight ? (this.options[longest].decoratorRight + ' ') : '');\n            elementWidth = dom.getTotalWidth(container);\n        }\n        return elementWidth;\n    }\n    createSelectList(parent) {\n        // If we have already constructive list on open, skip\n        if (this.selectList) {\n            return;\n        }\n        // SetUp container for list\n        this.selectDropDownListContainer = dom.append(parent, $('.select-box-dropdown-list-container'));\n        this.listRenderer = new SelectListRenderer();\n        this.selectList = new List('SelectBoxCustom', this.selectDropDownListContainer, this, [this.listRenderer], {\n            useShadows: false,\n            verticalScrollMode: 3 /* ScrollbarVisibility.Visible */,\n            keyboardSupport: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    let label = element.text;\n                    if (element.detail) {\n                        label += `. ${element.detail}`;\n                    }\n                    if (element.decoratorRight) {\n                        label += `. ${element.decoratorRight}`;\n                    }\n                    if (element.description) {\n                        label += `. ${element.description}`;\n                    }\n                    return label;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'selectBox', comment: ['Behave like native select dropdown element.'] }, \"Select Box\"),\n                getRole: () => isMacintosh ? '' : 'option',\n                getWidgetRole: () => 'listbox'\n            }\n        });\n        if (this.selectBoxOptions.ariaLabel) {\n            this.selectList.ariaLabel = this.selectBoxOptions.ariaLabel;\n        }\n        // SetUp list keyboard controller - control navigation, disabled items, focus\n        const onKeyDown = this._register(new DomEmitter(this.selectDropDownListContainer, 'keydown'));\n        const onSelectDropDownKeyDown = Event.chain(onKeyDown.event)\n            .filter(() => this.selectList.length > 0)\n            .map(e => new StandardKeyboardEvent(e));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(e => this.onEnter(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */).on(e => this.onEnter(e), this)); // Tab should behave the same as enter, #79339\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(e => this.onEscape(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(e => this.onUpArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(e => this.onDownArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDown, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUp, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 14 /* KeyCode.Home */).on(this.onHome, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 13 /* KeyCode.End */).on(this.onEnd, this));\n        this._register(onSelectDropDownKeyDown.filter(e => (e.keyCode >= 21 /* KeyCode.Digit0 */ && e.keyCode <= 56 /* KeyCode.KeyZ */) || (e.keyCode >= 85 /* KeyCode.Semicolon */ && e.keyCode <= 113 /* KeyCode.NumpadDivide */)).on(this.onCharacter, this));\n        // SetUp list mouse controller - control navigation, disabled items, focus\n        this._register(dom.addDisposableListener(this.selectList.getHTMLElement(), dom.EventType.POINTER_UP, e => this.onPointerUp(e)));\n        this._register(this.selectList.onMouseOver(e => typeof e.index !== 'undefined' && this.selectList.setFocus([e.index])));\n        this._register(this.selectList.onDidChangeFocus(e => this.onListFocus(e)));\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.FOCUS_OUT, e => {\n            if (!this._isVisible || dom.isAncestor(e.relatedTarget, this.selectDropDownContainer)) {\n                return;\n            }\n            this.onListBlur();\n        }));\n        this.selectList.getHTMLElement().setAttribute('aria-label', this.selectBoxOptions.ariaLabel || '');\n        this.selectList.getHTMLElement().setAttribute('aria-expanded', 'true');\n        this.styleList();\n    }\n    // List methods\n    // List mouse controller - active exit, select option, fire onDidSelect if change, return focus to parent select\n    // Also takes in touchend events\n    onPointerUp(e) {\n        if (!this.selectList.length) {\n            return;\n        }\n        dom.EventHelper.stop(e);\n        const target = e.target;\n        if (!target) {\n            return;\n        }\n        // Check our mouse event is on an option (not scrollbar)\n        if (target.classList.contains('slider')) {\n            return;\n        }\n        const listRowElement = target.closest('.monaco-list-row');\n        if (!listRowElement) {\n            return;\n        }\n        const index = Number(listRowElement.getAttribute('data-index'));\n        const disabled = listRowElement.classList.contains('option-disabled');\n        // Ignore mouse selection of disabled options\n        if (index >= 0 && index < this.options.length && !disabled) {\n            this.selected = index;\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n            // Only fire if selection change\n            if (this.selected !== this._currentSelection) {\n                // Set current = selected\n                this._currentSelection = this.selected;\n                this._onDidSelect.fire({\n                    index: this.selectElement.selectedIndex,\n                    selected: this.options[this.selected].text\n                });\n                if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                    this.selectElement.title = this.options[this.selected].text;\n                }\n            }\n            this.hideSelectDropDown(true);\n        }\n    }\n    // List Exit - passive - implicit no selection change, hide drop-down\n    onListBlur() {\n        if (this._sticky) {\n            return;\n        }\n        if (this.selected !== this._currentSelection) {\n            // Reset selected to current if no change\n            this.select(this._currentSelection);\n        }\n        this.hideSelectDropDown(false);\n    }\n    renderDescriptionMarkdown(text, actionHandler) {\n        const cleanRenderedMarkdown = (element) => {\n            for (let i = 0; i < element.childNodes.length; i++) {\n                const child = element.childNodes.item(i);\n                const tagName = child.tagName && child.tagName.toLowerCase();\n                if (tagName === 'img') {\n                    element.removeChild(child);\n                }\n                else {\n                    cleanRenderedMarkdown(child);\n                }\n            }\n        };\n        const rendered = renderMarkdown({ value: text, supportThemeIcons: true }, { actionHandler });\n        rendered.element.classList.add('select-box-description-markdown');\n        cleanRenderedMarkdown(rendered.element);\n        return rendered.element;\n    }\n    // List Focus Change - passive - update details pane with newly focused element's data\n    onListFocus(e) {\n        // Skip during initial layout\n        if (!this._isVisible || !this._hasDetails) {\n            return;\n        }\n        this.updateDetail(e.indexes[0]);\n    }\n    updateDetail(selectedIndex) {\n        var _a, _b;\n        this.selectionDetailsPane.innerText = '';\n        const option = this.options[selectedIndex];\n        const description = (_a = option === null || option === void 0 ? void 0 : option.description) !== null && _a !== void 0 ? _a : '';\n        const descriptionIsMarkdown = (_b = option === null || option === void 0 ? void 0 : option.descriptionIsMarkdown) !== null && _b !== void 0 ? _b : false;\n        if (description) {\n            if (descriptionIsMarkdown) {\n                const actionHandler = option.descriptionMarkdownActionHandler;\n                this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(description, actionHandler));\n            }\n            else {\n                this.selectionDetailsPane.innerText = description;\n            }\n            this.selectionDetailsPane.style.display = 'block';\n        }\n        else {\n            this.selectionDetailsPane.style.display = 'none';\n        }\n        // Avoid recursion\n        this._skipLayout = true;\n        this.contextViewProvider.layout();\n        this._skipLayout = false;\n    }\n    // List keyboard controller\n    // List exit - active - hide ContextView dropdown, reset selection, return focus to parent select\n    onEscape(e) {\n        dom.EventHelper.stop(e);\n        // Reset selection to value when opened\n        this.select(this._currentSelection);\n        this.hideSelectDropDown(true);\n    }\n    // List exit - active - hide ContextView dropdown, return focus to parent select, fire onDidSelect if change\n    onEnter(e) {\n        dom.EventHelper.stop(e);\n        // Only fire if selection change\n        if (this.selected !== this._currentSelection) {\n            this._currentSelection = this.selected;\n            this._onDidSelect.fire({\n                index: this.selectElement.selectedIndex,\n                selected: this.options[this.selected].text\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }\n        this.hideSelectDropDown(true);\n    }\n    // List navigation - have to handle a disabled option (jump over)\n    onDownArrow(e) {\n        if (this.selected < this.options.length - 1) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const nextOptionDisabled = this.options[this.selected + 1].isDisabled;\n            if (nextOptionDisabled && this.options.length > this.selected + 2) {\n                this.selected += 2;\n            }\n            else if (nextOptionDisabled) {\n                return;\n            }\n            else {\n                this.selected++;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onUpArrow(e) {\n        if (this.selected > 0) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const previousOptionDisabled = this.options[this.selected - 1].isDisabled;\n            if (previousOptionDisabled && this.selected > 1) {\n                this.selected -= 2;\n            }\n            else {\n                this.selected--;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onPageUp(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusPreviousPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection down if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected < this.options.length - 1) {\n                this.selected++;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onPageDown(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusNextPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection up if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected > 0) {\n                this.selected--;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onHome(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = 0;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected++;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    onEnd(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = this.options.length - 1;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected--;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    // Mimic option first character navigation of native select\n    onCharacter(e) {\n        const ch = KeyCodeUtils.toString(e.keyCode);\n        let optionIndex = -1;\n        for (let i = 0; i < this.options.length - 1; i++) {\n            optionIndex = (i + this.selected + 1) % this.options.length;\n            if (this.options[optionIndex].text.charAt(0).toUpperCase() === ch && !this.options[optionIndex].isDisabled) {\n                this.select(optionIndex);\n                this.selectList.setFocus([optionIndex]);\n                this.selectList.reveal(this.selectList.getFocus()[0]);\n                dom.EventHelper.stop(e);\n                break;\n            }\n        }\n    }\n    dispose() {\n        this.hideSelectDropDown(false);\n        super.dispose();\n    }\n}\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN = 32;\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN = 2;\nSelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS = 3;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nexport class SelectBoxNative extends Disposable {\n    constructor(options, selected, styles, selectBoxOptions) {\n        super();\n        this.selected = 0;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        this.options = [];\n        this.selectElement = document.createElement('select');\n        this.selectElement.className = 'monaco-select-box';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = this._register(new Emitter());\n        this.styles = styles;\n        this.registerListeners();\n        this.setOptions(options, selected);\n    }\n    registerListeners() {\n        this._register(Gesture.addTarget(this.selectElement));\n        [EventType.Tap].forEach(eventType => {\n            this._register(dom.addDisposableListener(this.selectElement, eventType, (e) => {\n                this.selectElement.focus();\n            }));\n        });\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'click', (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selectElement.title = e.target.value;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'keydown', (e) => {\n            let showSelect = false;\n            if (isMacintosh) {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ || e.keyCode === 16 /* KeyCode.UpArrow */ || e.keyCode === 10 /* KeyCode.Space */) {\n                    showSelect = true;\n                }\n            }\n            else {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ && e.altKey || e.keyCode === 10 /* KeyCode.Space */ || e.keyCode === 3 /* KeyCode.Enter */) {\n                    showSelect = true;\n                }\n            }\n            if (showSelect) {\n                // Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n                e.stopPropagation();\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!this.options || !arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n        }\n    }\n    select(index) {\n        if (this.options.length === 0) {\n            this.selected = 0;\n        }\n        else if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if ((this.selected < this.options.length) && typeof this.options[this.selected].text === 'string') {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n        else {\n            this.selectElement.title = '';\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.setOptions(this.options, this.selected);\n        this.applyStyles();\n    }\n    applyStyles() {\n        var _a, _b, _c;\n        // Style native select\n        if (this.selectElement) {\n            this.selectElement.style.backgroundColor = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n            this.selectElement.style.color = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n            this.selectElement.style.borderColor = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        }\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SelectBoxList } from './selectBoxCustom.js';\nimport { SelectBoxNative } from './selectBoxNative.js';\nimport { Widget } from '../widget.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBox.css';\nexport class SelectBox extends Widget {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        // Default to native SelectBox for OSX unless overridden\n        if (isMacintosh && !(selectBoxOptions === null || selectBoxOptions === void 0 ? void 0 : selectBoxOptions.useCustomDrawn)) {\n            this.selectBoxDelegate = new SelectBoxNative(options, selected, styles, selectBoxOptions);\n        }\n        else {\n            this.selectBoxDelegate = new SelectBoxList(options, selected, contextViewProvider, styles, selectBoxOptions);\n        }\n        this._register(this.selectBoxDelegate);\n    }\n    // Public SelectBox Methods - routed through delegate interface\n    get onDidSelect() {\n        return this.selectBoxDelegate.onDidSelect;\n    }\n    setOptions(options, selected) {\n        this.selectBoxDelegate.setOptions(options, selected);\n    }\n    select(index) {\n        this.selectBoxDelegate.select(index);\n    }\n    focus() {\n        this.selectBoxDelegate.focus();\n    }\n    blur() {\n        this.selectBoxDelegate.blur();\n    }\n    setFocusable(focusable) {\n        this.selectBoxDelegate.setFocusable(focusable);\n    }\n    render(container) {\n        this.selectBoxDelegate.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n        return this.view;\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        });\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'split') {\n            viewSize = this.getViewSize(size.index) / 2;\n        }\n        else if (size.type === 'invisible') {\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n        }\n        else {\n            viewSize = view.minimumSize;\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List, unthemedListStyles } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport './table.css';\nclass TableListRenderer {\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nTableListRenderer.TemplateId = 'row';\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader {\n    get minimumSize() { var _a; return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120; }\n    get maximumSize() { var _a; return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY; }\n    get onDidChange() { var _a; return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None; }\n    constructor(column, index) {\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index, title: column.tooltip }, column.label);\n    }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.disposables = new DisposableStore();\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => new ColumnHeader(c, i));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = this.disposables.add(new SplitView(this.domNode, {\n            orientation: 1 /* Orientation.HORIZONTAL */,\n            scrollbarVisibility: 2 /* ScrollbarVisibility.Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        }));\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = this.disposables.add(new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options));\n        Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size), null, this.disposables);\n        this.splitview.onDidSashReset(index => {\n            const totalWeight = columns.reduce((r, c) => r + c.weight, 0);\n            const size = columns[index].weight / totalWeight * this.cachedWidth;\n            this.splitview.resizeView(index, size);\n        }, null, this.disposables);\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style(unthemedListStyles);\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nTable.InstanceCount = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport './toggle.css';\nexport const unthemedToggleStyles = {\n    inputActiveOptionBorder: '#007ACC00',\n    inputActiveOptionForeground: '#FFFFFF',\n    inputActiveOptionBackground: '#0E639C50'\n};\nexport class Toggle extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = opts;\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-toggle'];\n        if (this._opts.icon) {\n            this._icon = this._opts.icon;\n            classes.push(...ThemeIcon.asClassNameArray(this._icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.title = this._opts.title;\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this._register(this.ignoreGesture(this.domNode));\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* KeyCode.Space */ || keyboardEvent.keyCode === 3 /* KeyCode.Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                keyboardEvent.stopPropagation();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = (this._checked && this._opts.inputActiveOptionBorder) || '';\n            this.domNode.style.color = (this._checked && this._opts.inputActiveOptionForeground) || 'inherit';\n            this.domNode.style.backgroundColor = (this._checked && this._opts.inputActiveOptionBackground) || '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\n        super();\n        this.submenuActionViewItems = [];\n        this.hasSecondaryActions = false;\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n        this.disposables = new DisposableStore();\n        this.options = options;\n        this.lookupKeybindings = typeof this.options.getKeyBinding === 'function';\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => { var _a; return (_a = this.toggleMenuActionViewItem) === null || _a === void 0 ? void 0 : _a.show(); }, options.toggleMenuTitle));\n        this.element = document.createElement('div');\n        this.element.className = 'monaco-toolbar';\n        container.appendChild(this.element);\n        this.actionBar = this._register(new ActionBar(this.element, {\n            orientation: options.orientation,\n            ariaLabel: options.ariaLabel,\n            actionRunner: options.actionRunner,\n            allowContextMenu: options.allowContextMenu,\n            actionViewItemProvider: (action, viewItemOptions) => {\n                var _a;\n                if (action.id === ToggleMenuAction.ID) {\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: ThemeIcon.asClassNameArray((_a = options.moreIcon) !== null && _a !== void 0 ? _a : Codicon.toolBarMore),\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement\n                    });\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n                    return this.toggleMenuActionViewItem;\n                }\n                if (options.actionViewItemProvider) {\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\n                    if (result) {\n                        return result;\n                    }\n                }\n                if (action instanceof SubmenuAction) {\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: action.class,\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement\n                    });\n                    result.setActionContext(this.actionBar.context);\n                    this.submenuActionViewItems.push(result);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n                    return result;\n                }\n                return undefined;\n            }\n        }));\n    }\n    set actionRunner(actionRunner) {\n        this.actionBar.actionRunner = actionRunner;\n    }\n    get actionRunner() {\n        return this.actionBar.actionRunner;\n    }\n    getElement() {\n        return this.element;\n    }\n    getItemAction(indexOrElement) {\n        return this.actionBar.getAction(indexOrElement);\n    }\n    setActions(primaryActions, secondaryActions) {\n        this.clear();\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n        // Inject additional action to open secondary actions if present\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n        if (this.hasSecondaryActions && secondaryActions) {\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\n            primaryActionsToSet.push(this.toggleMenuAction);\n        }\n        primaryActionsToSet.forEach(action => {\n            this.actionBar.push(action, { icon: true, label: false, keybinding: this.getKeybindingLabel(action) });\n        });\n    }\n    getKeybindingLabel(action) {\n        var _a, _b;\n        const key = this.lookupKeybindings ? (_b = (_a = this.options).getKeyBinding) === null || _b === void 0 ? void 0 : _b.call(_a, action) : undefined;\n        return withNullAsUndefined(key === null || key === void 0 ? void 0 : key.getLabel());\n    }\n    clear() {\n        this.submenuActionViewItems = [];\n        this.disposables.clear();\n        this.actionBar.clear();\n    }\n    dispose() {\n        this.clear();\n        super.dispose();\n    }\n}\nexport class ToggleMenuAction extends Action {\n    constructor(toggleDropdownMenu, title) {\n        title = title || nls.localize('moreActions', \"More Actions...\");\n        super(ToggleMenuAction.ID, title, undefined, true);\n        this._menuActions = [];\n        this.toggleDropdownMenu = toggleDropdownMenu;\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.toggleDropdownMenu();\n        });\n    }\n    get menuActions() {\n        return this._menuActions;\n    }\n    set menuActions(actions) {\n        this._menuActions = actions;\n    }\n}\nToggleMenuAction.ID = 'toolbar.toggle.more';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, append, clearNode, createStyleSheet, h, hasParentWithClass } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { FindInput } from '../findinput/findInput.js';\nimport { unthemedInboxStyles } from '../inputbox/inputBox.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { isButton, isInputElement, isMonacoEditor, List, MouseController } from '../list/listWidget.js';\nimport { Toggle, unthemedToggleStyles } from '../toggle/toggle.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { TreeMouseEventTarget } from './tree.js';\nimport { Action } from '../../../common/actions.js';\nimport { distinct, equals, range } from '../../../common/arrays.js';\nimport { disposableTimeout, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { SetMap } from '../../../common/collections.js';\nimport { Emitter, Event, EventBufferer, Relay } from '../../../common/event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { isNumber } from '../../../common/types.js';\nimport './media/tree.css';\nimport { localize } from '../../../../nls.js';\nclass TreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new TreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass TreeNodeListDragAndDrop {\n    constructor(modelProvider, dnd) {\n        this.modelProvider = modelProvider;\n        this.dnd = dnd;\n        this.autoExpandDisposable = Disposable.None;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        const result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n        const didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n        if (didChangeAutoExpandNode) {\n            this.autoExpandDisposable.dispose();\n            this.autoExpandNode = targetNode;\n        }\n        if (typeof targetNode === 'undefined') {\n            return result;\n        }\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n            this.autoExpandDisposable = disposableTimeout(() => {\n                const model = this.modelProvider();\n                const ref = model.getNodeLocation(targetNode);\n                if (model.isCollapsed(ref)) {\n                    model.setCollapsed(ref, false);\n                }\n                this.autoExpandNode = undefined;\n            }, 500);\n        }\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n            if (!raw) {\n                const accept = typeof result === 'boolean' ? result : result.accept;\n                const effect = typeof result === 'boolean' ? undefined : result.effect;\n                return { accept, effect, feedback: [targetIndex] };\n            }\n            return result;\n        }\n        if (result.bubble === 1 /* TreeDragOverBubble.Up */) {\n            const model = this.modelProvider();\n            const ref = model.getNodeLocation(targetNode);\n            const parentRef = model.getParentNodeLocation(ref);\n            const parentNode = model.getNode(parentRef);\n            const parentIndex = parentRef && model.getListIndex(parentRef);\n            return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n        }\n        const model = this.modelProvider();\n        const ref = model.getNodeLocation(targetNode);\n        const start = model.getListIndex(ref);\n        const length = model.getListRenderCount(ref);\n        return Object.assign(Object.assign({}, result), { feedback: range(start, start + length) });\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.autoExpandDisposable.dispose();\n        this.autoExpandNode = undefined;\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asListOptions(modelProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getSetSize(node) {\n                const model = modelProvider();\n                const ref = model.getNodeLocation(node);\n                const parentRef = model.getParentNodeLocation(ref);\n                const parentNode = model.getNode(parentRef);\n                return parentNode.visibleChildrenCount;\n            },\n            getPosInSet(node) {\n                return node.visibleChildIndex + 1;\n            }, isChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n                return options.accessibilityProvider.isChecked(node.element);\n            } : undefined, getRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n                return options.accessibilityProvider.getRole(node.element);\n            } : () => 'treeitem', getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider.getAriaLevel(node.element) : (node) => {\n                return node.depth;\n            }, getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(node) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n            } }) });\n}\nexport class ComposedTreeDelegate {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    getHeight(element) {\n        return this.delegate.getHeight(element.element);\n    }\n    getTemplateId(element) {\n        return this.delegate.getTemplateId(element.element);\n    }\n    hasDynamicHeight(element) {\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n    }\n    setDynamicHeight(element, height) {\n        var _a, _b;\n        (_b = (_a = this.delegate).setDynamicHeight) === null || _b === void 0 ? void 0 : _b.call(_a, element.element, height);\n    }\n}\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n    RenderIndentGuides[\"None\"] = \"none\";\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\n    RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nclass EventCollection {\n    get elements() {\n        return this._elements;\n    }\n    constructor(onDidChange, _elements = []) {\n        this._elements = _elements;\n        this.disposables = new DisposableStore();\n        this.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass TreeRenderer {\n    constructor(renderer, modelProvider, onDidChangeCollapseState, activeNodes, renderedIndentGuides, options = {}) {\n        var _a;\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n        this.activeNodes = activeNodes;\n        this.renderedIndentGuides = renderedIndentGuides;\n        this.renderedElements = new Map();\n        this.renderedNodes = new Map();\n        this.indent = TreeRenderer.DefaultIndent;\n        this.hideTwistiesOfChildlessElements = false;\n        this.shouldRenderIndentGuides = false;\n        this.activeIndentNodes = new Set();\n        this.indentGuidesDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n        this.templateId = renderer.templateId;\n        this.updateOptions(options);\n        Event.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n        (_a = renderer.onDidChangeTwistieState) === null || _a === void 0 ? void 0 : _a.call(renderer, this.onDidChangeTwistieState, this, this.disposables);\n    }\n    updateOptions(options = {}) {\n        if (typeof options.indent !== 'undefined') {\n            const indent = clamp(options.indent, 0, 40);\n            if (indent !== this.indent) {\n                this.indent = indent;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this.renderTreeElement(node, templateData);\n                }\n            }\n        }\n        if (typeof options.renderIndentGuides !== 'undefined') {\n            const shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this._renderIndentGuides(node, templateData);\n                }\n                this.indentGuidesDisposable.dispose();\n                if (shouldRenderIndentGuides) {\n                    const disposables = new DisposableStore();\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n                    this.indentGuidesDisposable = disposables;\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\n                }\n            }\n        }\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n        }\n    }\n    renderTemplate(container) {\n        const el = append(container, $('.monaco-tl-row'));\n        const indent = append(el, $('.monaco-tl-indent'));\n        const twistie = append(el, $('.monaco-tl-twistie'));\n        const contents = append(el, $('.monaco-tl-contents'));\n        const templateData = this.renderer.renderTemplate(contents);\n        return { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderedNodes.set(node, templateData);\n        this.renderedElements.set(node.element, node);\n        this.renderTreeElement(node, templateData);\n        this.renderer.renderElement(node, index, templateData.templateData, height);\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        templateData.indentGuidesDisposable.dispose();\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, node, index, templateData.templateData, height);\n        if (typeof height === 'number') {\n            this.renderedNodes.delete(node);\n            this.renderedElements.delete(node.element);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    onDidChangeTwistieState(element) {\n        const node = this.renderedElements.get(element);\n        if (!node) {\n            return;\n        }\n        this.onDidChangeNodeTwistieState(node);\n    }\n    onDidChangeNodeTwistieState(node) {\n        const templateData = this.renderedNodes.get(node);\n        if (!templateData) {\n            return;\n        }\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\n        this.renderTreeElement(node, templateData);\n    }\n    renderTreeElement(node, templateData) {\n        const indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n        templateData.twistie.style.paddingLeft = `${indent}px`;\n        templateData.indent.style.width = `${indent + this.indent - 16}px`;\n        if (node.collapsible) {\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n        }\n        else {\n            templateData.container.removeAttribute('aria-expanded');\n        }\n        templateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n        let twistieRendered = false;\n        if (this.renderer.renderTwistie) {\n            twistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n        }\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n            if (!twistieRendered) {\n                templateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n            }\n            templateData.twistie.classList.add('collapsible');\n            templateData.twistie.classList.toggle('collapsed', node.collapsed);\n        }\n        else {\n            templateData.twistie.classList.remove('collapsible', 'collapsed');\n        }\n        this._renderIndentGuides(node, templateData);\n    }\n    _renderIndentGuides(node, templateData) {\n        clearNode(templateData.indent);\n        templateData.indentGuidesDisposable.dispose();\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const disposableStore = new DisposableStore();\n        const model = this.modelProvider();\n        while (true) {\n            const ref = model.getNodeLocation(node);\n            const parentRef = model.getParentNodeLocation(ref);\n            if (!parentRef) {\n                break;\n            }\n            const parent = model.getNode(parentRef);\n            const guide = $('.indent-guide', { style: `width: ${this.indent}px` });\n            if (this.activeIndentNodes.has(parent)) {\n                guide.classList.add('active');\n            }\n            if (templateData.indent.childElementCount === 0) {\n                templateData.indent.appendChild(guide);\n            }\n            else {\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n            }\n            this.renderedIndentGuides.add(parent, guide);\n            disposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n            node = parent;\n        }\n        templateData.indentGuidesDisposable = disposableStore;\n    }\n    _onDidChangeActiveNodes(nodes) {\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const set = new Set();\n        const model = this.modelProvider();\n        nodes.forEach(node => {\n            const ref = model.getNodeLocation(node);\n            try {\n                const parentRef = model.getParentNodeLocation(ref);\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n                    set.add(node);\n                }\n                else if (parentRef) {\n                    set.add(model.getNode(parentRef));\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        });\n        this.activeIndentNodes.forEach(node => {\n            if (!set.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n            }\n        });\n        set.forEach(node => {\n            if (!this.activeIndentNodes.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n            }\n        });\n        this.activeIndentNodes = set;\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.renderedElements.clear();\n        this.indentGuidesDisposable.dispose();\n        dispose(this.disposables);\n    }\n}\nTreeRenderer.DefaultIndent = 8;\nclass FindFilter {\n    get totalCount() { return this._totalCount; }\n    get matchCount() { return this._matchCount; }\n    constructor(tree, keyboardNavigationLabelProvider, _filter) {\n        this.tree = tree;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this._filter = _filter;\n        this._totalCount = 0;\n        this._matchCount = 0;\n        this._pattern = '';\n        this._lowercasePattern = '';\n        this.disposables = new DisposableStore();\n        tree.onWillRefilter(this.reset, this, this.disposables);\n    }\n    filter(element, parentVisibility) {\n        let visibility = 1 /* TreeVisibility.Visible */;\n        if (this._filter) {\n            const result = this._filter.filter(element, parentVisibility);\n            if (typeof result === 'boolean') {\n                visibility = result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n            }\n            else if (isFilterResult(result)) {\n                visibility = getVisibleState(result.visibility);\n            }\n            else {\n                visibility = result;\n            }\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                return false;\n            }\n        }\n        this._totalCount++;\n        if (!this._pattern) {\n            this._matchCount++;\n            return { data: FuzzyScore.Default, visibility };\n        }\n        const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n        const labels = Array.isArray(label) ? label : [label];\n        for (const l of labels) {\n            const labelStr = l && l.toString();\n            if (typeof labelStr === 'undefined') {\n                return { data: FuzzyScore.Default, visibility };\n            }\n            let score;\n            if (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n                const index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n                if (index > -1) {\n                    score = [Number.MAX_SAFE_INTEGER, 0];\n                    for (let i = this._lowercasePattern.length; i > 0; i--) {\n                        score.push(index + i - 1);\n                    }\n                }\n            }\n            else {\n                score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n            }\n            if (score) {\n                this._matchCount++;\n                return labels.length === 1 ?\n                    { data: score, visibility } :\n                    { data: { label: labelStr, score: score }, visibility };\n            }\n        }\n        if (this.tree.findMode === TreeFindMode.Filter) {\n            if (typeof this.tree.options.defaultFindVisibility === 'number') {\n                return this.tree.options.defaultFindVisibility;\n            }\n            else if (this.tree.options.defaultFindVisibility) {\n                return this.tree.options.defaultFindVisibility(element);\n            }\n            else {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n        }\n        else {\n            return { data: FuzzyScore.Default, visibility };\n        }\n    }\n    reset() {\n        this._totalCount = 0;\n        this._matchCount = 0;\n    }\n    dispose() {\n        dispose(this.disposables);\n    }\n}\nexport class ModeToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.listFilter,\n            title: localize('filter', \"Filter\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class FuzzyToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.searchFuzzy,\n            title: localize('fuzzySearch', \"Fuzzy Match\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nconst unthemedFindWidgetStyles = {\n    inputBoxStyles: unthemedInboxStyles,\n    toggleStyles: unthemedToggleStyles,\n    listFilterWidgetBackground: undefined,\n    listFilterWidgetNoMatchesOutline: undefined,\n    listFilterWidgetOutline: undefined,\n    listFilterWidgetShadow: undefined\n};\nexport var TreeFindMode;\n(function (TreeFindMode) {\n    TreeFindMode[TreeFindMode[\"Highlight\"] = 0] = \"Highlight\";\n    TreeFindMode[TreeFindMode[\"Filter\"] = 1] = \"Filter\";\n})(TreeFindMode || (TreeFindMode = {}));\nexport var TreeFindMatchType;\n(function (TreeFindMatchType) {\n    TreeFindMatchType[TreeFindMatchType[\"Fuzzy\"] = 0] = \"Fuzzy\";\n    TreeFindMatchType[TreeFindMatchType[\"Contiguous\"] = 1] = \"Contiguous\";\n})(TreeFindMatchType || (TreeFindMatchType = {}));\nclass FindWidget extends Disposable {\n    set mode(mode) {\n        this.modeToggle.checked = mode === TreeFindMode.Filter;\n        this.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n    }\n    set matchType(matchType) {\n        this.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n    }\n    constructor(container, tree, contextViewProvider, mode, matchType, options) {\n        var _a;\n        super();\n        this.tree = tree;\n        this.elements = h('.monaco-tree-type-filter', [\n            h('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n            h('.monaco-tree-type-filter-input@findInput'),\n            h('.monaco-tree-type-filter-actionbar@actionbar'),\n        ]);\n        this.width = 0;\n        this.right = 0;\n        this.top = 0;\n        this._onDidDisable = new Emitter();\n        container.appendChild(this.elements.root);\n        this._register(toDisposable(() => container.removeChild(this.elements.root)));\n        const styles = (_a = options === null || options === void 0 ? void 0 : options.styles) !== null && _a !== void 0 ? _a : unthemedFindWidgetStyles;\n        if (styles.listFilterWidgetBackground) {\n            this.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n        }\n        if (styles.listFilterWidgetShadow) {\n            this.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n        }\n        this.modeToggle = this._register(new ModeToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: mode === TreeFindMode.Filter })));\n        this.matchTypeToggle = this._register(new FuzzyToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: matchType === TreeFindMatchType.Fuzzy })));\n        this.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n        this.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n        this.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n            label: localize('type to search', \"Type to search\"),\n            additionalToggles: [this.modeToggle, this.matchTypeToggle],\n            showCommonFindToggles: false,\n            inputBoxStyles: styles.inputBoxStyles,\n            toggleStyles: styles.toggleStyles,\n            history: options === null || options === void 0 ? void 0 : options.history\n        }));\n        this.actionbar = this._register(new ActionBar(this.elements.actionbar));\n        this.mode = mode;\n        const emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n        const onKeyDown = this._register(Event.chain(emitter.event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onKeyDown((e) => {\n            // Using equals() so we reserve modified keys for future use\n            if (e.equals(3 /* KeyCode.Enter */)) {\n                // This is the only keyboard way to return to the tree from a history item that isn't the last one\n                e.preventDefault();\n                e.stopPropagation();\n                this.findInput.inputBox.addToHistory();\n                this.tree.domFocus();\n                return;\n            }\n            if (e.equals(18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n                    // Retain original pre-history DownArrow behavior\n                    this.findInput.inputBox.addToHistory();\n                    this.tree.domFocus();\n                }\n                else {\n                    // Downward through history\n                    this.findInput.inputBox.showNextValue();\n                }\n                return;\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                // Upward through history\n                this.findInput.inputBox.showPreviousValue();\n                return;\n            }\n        }));\n        const closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n        this.actionbar.push(closeAction, { icon: true, label: false });\n        const onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n        this._register(onGrabMouseDown.event(e => {\n            const disposables = new DisposableStore();\n            const onWindowMouseMove = disposables.add(new DomEmitter(window, 'mousemove'));\n            const onWindowMouseUp = disposables.add(new DomEmitter(window, 'mouseup'));\n            const startRight = this.right;\n            const startX = e.pageX;\n            const startTop = this.top;\n            const startY = e.pageY;\n            this.elements.grab.classList.add('grabbing');\n            const transition = this.elements.root.style.transition;\n            this.elements.root.style.transition = 'unset';\n            const update = (e) => {\n                const deltaX = e.pageX - startX;\n                this.right = startRight - deltaX;\n                const deltaY = e.pageY - startY;\n                this.top = startTop + deltaY;\n                this.layout();\n            };\n            disposables.add(onWindowMouseMove.event(update));\n            disposables.add(onWindowMouseUp.event(e => {\n                update(e);\n                this.elements.grab.classList.remove('grabbing');\n                this.elements.root.style.transition = transition;\n                disposables.dispose();\n            }));\n        }));\n        const onGrabKeyDown = this._register(Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onGrabKeyDown((e) => {\n            let right;\n            let top;\n            if (e.keyCode === 15 /* KeyCode.LeftArrow */) {\n                right = Number.POSITIVE_INFINITY;\n            }\n            else if (e.keyCode === 17 /* KeyCode.RightArrow */) {\n                right = 0;\n            }\n            else if (e.keyCode === 10 /* KeyCode.Space */) {\n                right = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n            }\n            if (e.keyCode === 16 /* KeyCode.UpArrow */) {\n                top = 0;\n            }\n            else if (e.keyCode === 18 /* KeyCode.DownArrow */) {\n                top = Number.POSITIVE_INFINITY;\n            }\n            if (right !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.right = right;\n                this.layout();\n            }\n            if (top !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.top = top;\n                const transition = this.elements.root.style.transition;\n                this.elements.root.style.transition = 'unset';\n                this.layout();\n                setTimeout(() => {\n                    this.elements.root.style.transition = transition;\n                }, 0);\n            }\n        }));\n        this.onDidChangeValue = this.findInput.onDidChange;\n    }\n    layout(width = this.width) {\n        this.width = width;\n        this.right = clamp(this.right, 0, Math.max(0, width - 212));\n        this.elements.root.style.right = `${this.right}px`;\n        this.top = clamp(this.top, 0, 24);\n        this.elements.root.style.top = `${this.top}px`;\n    }\n    showMessage(message) {\n        this.findInput.showMessage(message);\n    }\n    clearMessage() {\n        this.findInput.clearMessage();\n    }\n    dispose() {\n        const _super = Object.create(null, {\n            dispose: { get: () => super.dispose }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            this._onDidDisable.fire();\n            this.elements.root.classList.add('disabled');\n            yield timeout(300);\n            _super.dispose.call(this);\n        });\n    }\n}\nclass FindController {\n    get pattern() { return this._pattern; }\n    get mode() { return this._mode; }\n    set mode(mode) {\n        if (mode === this._mode) {\n            return;\n        }\n        this._mode = mode;\n        if (this.widget) {\n            this.widget.mode = this._mode;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMode.fire(mode);\n    }\n    get matchType() { return this._matchType; }\n    set matchType(matchType) {\n        if (matchType === this._matchType) {\n            return;\n        }\n        this._matchType = matchType;\n        if (this.widget) {\n            this.widget.matchType = this._matchType;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMatchType.fire(matchType);\n    }\n    constructor(tree, model, view, filter, contextViewProvider, options = {}) {\n        var _a, _b;\n        this.tree = tree;\n        this.view = view;\n        this.filter = filter;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this._pattern = '';\n        this.width = 0;\n        this._onDidChangeMode = new Emitter();\n        this.onDidChangeMode = this._onDidChangeMode.event;\n        this._onDidChangeMatchType = new Emitter();\n        this.onDidChangeMatchType = this._onDidChangeMatchType.event;\n        this._onDidChangePattern = new Emitter();\n        this._onDidChangeOpenState = new Emitter();\n        this.onDidChangeOpenState = this._onDidChangeOpenState.event;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this._mode = (_a = tree.options.defaultFindMode) !== null && _a !== void 0 ? _a : TreeFindMode.Highlight;\n        this._matchType = (_b = tree.options.defaultFindMatchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy;\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (optionsUpdate.defaultFindMode !== undefined) {\n            this.mode = optionsUpdate.defaultFindMode;\n        }\n        if (optionsUpdate.defaultFindMatchType !== undefined) {\n            this.matchType = optionsUpdate.defaultFindMatchType;\n        }\n    }\n    onDidSpliceModel() {\n        if (!this.widget || this.pattern.length === 0) {\n            return;\n        }\n        this.tree.refilter();\n        this.render();\n    }\n    render() {\n        var _a, _b, _c, _d;\n        const noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n        if (this.pattern && noMatches) {\n            if ((_a = this.tree.options.showNotFoundMessage) !== null && _a !== void 0 ? _a : true) {\n                (_b = this.widget) === null || _b === void 0 ? void 0 : _b.showMessage({ type: 2 /* MessageType.WARNING */, content: localize('not found', \"No elements found.\") });\n            }\n            else {\n                (_c = this.widget) === null || _c === void 0 ? void 0 : _c.showMessage({ type: 2 /* MessageType.WARNING */ });\n            }\n        }\n        else {\n            (_d = this.widget) === null || _d === void 0 ? void 0 : _d.clearMessage();\n        }\n    }\n    shouldAllowFocus(node) {\n        if (!this.widget || !this.pattern || this._mode === TreeFindMode.Filter) {\n            return true;\n        }\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n            return true;\n        }\n        return !FuzzyScore.isDefault(node.filterData);\n    }\n    layout(width) {\n        var _a;\n        this.width = width;\n        (_a = this.widget) === null || _a === void 0 ? void 0 : _a.layout(width);\n    }\n    dispose() {\n        this._history = undefined;\n        this._onDidChangePattern.dispose();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nfunction asTreeMouseEvent(event) {\n    let target = TreeMouseEventTarget.Unknown;\n    if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-twistie', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Twistie;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-contents', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Element;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tree-type-filter', 'monaco-list')) {\n        target = TreeMouseEventTarget.Filter;\n    }\n    return {\n        browserEvent: event.browserEvent,\n        element: event.element ? event.element.element : null,\n        target\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait {\n    get nodeSet() {\n        if (!this._nodeSet) {\n            this._nodeSet = this.createNodeSet();\n        }\n        return this._nodeSet;\n    }\n    constructor(getFirstViewElementWithTrait, identityProvider) {\n        this.getFirstViewElementWithTrait = getFirstViewElementWithTrait;\n        this.identityProvider = identityProvider;\n        this.nodes = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    set(nodes, browserEvent) {\n        if (!(browserEvent === null || browserEvent === void 0 ? void 0 : browserEvent.__forceEvent) && equals(this.nodes, nodes)) {\n            return;\n        }\n        this._set(nodes, false, browserEvent);\n    }\n    _set(nodes, silent, browserEvent) {\n        this.nodes = [...nodes];\n        this.elements = undefined;\n        this._nodeSet = undefined;\n        if (!silent) {\n            const that = this;\n            this._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n        }\n    }\n    get() {\n        if (!this.elements) {\n            this.elements = this.nodes.map(node => node.element);\n        }\n        return [...this.elements];\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    has(node) {\n        return this.nodeSet.has(node);\n    }\n    onDidModelSplice({ insertedNodes, deletedNodes }) {\n        if (!this.identityProvider) {\n            const set = this.createNodeSet();\n            const visit = (node) => set.delete(node);\n            deletedNodes.forEach(node => dfs(node, visit));\n            this.set([...set.values()]);\n            return;\n        }\n        const deletedNodesIdSet = new Set();\n        const deletedNodesVisitor = (node) => deletedNodesIdSet.add(this.identityProvider.getId(node.element).toString());\n        deletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n        const insertedNodesMap = new Map();\n        const insertedNodesVisitor = (node) => insertedNodesMap.set(this.identityProvider.getId(node.element).toString(), node);\n        insertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n        const nodes = [];\n        for (const node of this.nodes) {\n            const id = this.identityProvider.getId(node.element).toString();\n            const wasDeleted = deletedNodesIdSet.has(id);\n            if (!wasDeleted) {\n                nodes.push(node);\n            }\n            else {\n                const insertedNode = insertedNodesMap.get(id);\n                if (insertedNode && insertedNode.visible) {\n                    nodes.push(insertedNode);\n                }\n            }\n        }\n        if (this.nodes.length > 0 && nodes.length === 0) {\n            const node = this.getFirstViewElementWithTrait();\n            if (node) {\n                nodes.push(node);\n            }\n        }\n        this._set(nodes, true);\n    }\n    createNodeSet() {\n        const set = new Set();\n        for (const node of this.nodes) {\n            set.add(node);\n        }\n        return set;\n    }\n}\nclass TreeNodeListMouseController extends MouseController {\n    constructor(list, tree) {\n        super(list);\n        this.tree = tree;\n    }\n    onViewPointer(e) {\n        if (isButton(e.browserEvent.target) ||\n            isInputElement(e.browserEvent.target) ||\n            isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        const node = e.element;\n        if (!node) {\n            return super.onViewPointer(e);\n        }\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n            return super.onViewPointer(e);\n        }\n        const target = e.browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n        let expandOnlyOnTwistieClick = false;\n        if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n        }\n        else {\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n        }\n        if (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n            return super.onViewPointer(e);\n        }\n        if (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n            return super.onViewPointer(e);\n        }\n        if (node.collapsible) {\n            const location = this.tree.getNodeLocation(node);\n            const recursive = e.browserEvent.altKey;\n            this.tree.setFocus([location]);\n            this.tree.toggleCollapsed(location, recursive);\n            if (expandOnlyOnTwistieClick && onTwistie) {\n                // Do not set this before calling a handler on the super class, because it will reject it as handled\n                e.browserEvent.isHandledByList = true;\n                return;\n            }\n        }\n        super.onViewPointer(e);\n    }\n    onDoubleClick(e) {\n        const onTwistie = e.browserEvent.target.classList.contains('monaco-tl-twistie');\n        if (onTwistie || !this.tree.expandOnDoubleClick) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        super.onDoubleClick(e);\n    }\n}\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList extends List {\n    constructor(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, anchorTrait, options) {\n        super(user, container, virtualDelegate, renderers, options);\n        this.focusTrait = focusTrait;\n        this.selectionTrait = selectionTrait;\n        this.anchorTrait = anchorTrait;\n    }\n    createMouseController(options) {\n        return new TreeNodeListMouseController(this, options.tree);\n    }\n    splice(start, deleteCount, elements = []) {\n        super.splice(start, deleteCount, elements);\n        if (elements.length === 0) {\n            return;\n        }\n        const additionalFocus = [];\n        const additionalSelection = [];\n        let anchor;\n        elements.forEach((node, index) => {\n            if (this.focusTrait.has(node)) {\n                additionalFocus.push(start + index);\n            }\n            if (this.selectionTrait.has(node)) {\n                additionalSelection.push(start + index);\n            }\n            if (this.anchorTrait.has(node)) {\n                anchor = start + index;\n            }\n        });\n        if (additionalFocus.length > 0) {\n            super.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n        }\n        if (additionalSelection.length > 0) {\n            super.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n        }\n        if (typeof anchor === 'number') {\n            super.setAnchor(anchor);\n        }\n    }\n    setFocus(indexes, browserEvent, fromAPI = false) {\n        super.setFocus(indexes, browserEvent);\n        if (!fromAPI) {\n            this.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setSelection(indexes, browserEvent, fromAPI = false) {\n        super.setSelection(indexes, browserEvent);\n        if (!fromAPI) {\n            this.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setAnchor(index, fromAPI = false) {\n        super.setAnchor(index);\n        if (!fromAPI) {\n            if (typeof index === 'undefined') {\n                this.anchorTrait.set([]);\n            }\n            else {\n                this.anchorTrait.set([this.element(index)]);\n            }\n        }\n    }\n}\nexport class AbstractTree {\n    get onDidChangeFocus() { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n    get onDidChangeSelection() { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n    get onMouseDblClick() { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n    get onPointer() { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.view.onDidFocus; }\n    get onDidChangeModel() { return Event.signal(this.model.onDidSplice); }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get findMode() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.mode) !== null && _b !== void 0 ? _b : TreeFindMode.Highlight; }\n    set findMode(findMode) { if (this.findController) {\n        this.findController.mode = findMode;\n    } }\n    get findMatchType() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.matchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy; }\n    set findMatchType(findFuzzy) { if (this.findController) {\n        this.findController.matchType = findFuzzy;\n    } }\n    get expandOnDoubleClick() { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n    get expandOnlyOnTwistieClick() { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n    get onDidDispose() { return this.view.onDidDispose; }\n    constructor(_user, container, delegate, renderers, _options = {}) {\n        var _a;\n        this._user = _user;\n        this._options = _options;\n        this.eventBufferer = new EventBufferer();\n        this.onDidChangeFindOpenState = Event.None;\n        this.disposables = new DisposableStore();\n        this._onWillRefilter = new Emitter();\n        this.onWillRefilter = this._onWillRefilter.event;\n        this._onDidUpdateOptions = new Emitter();\n        const treeDelegate = new ComposedTreeDelegate(delegate);\n        const onDidChangeCollapseStateRelay = new Relay();\n        const onDidChangeActiveNodes = new Relay();\n        const activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n        const renderedIndentGuides = new SetMap();\n        this.renderers = renderers.map(r => new TreeRenderer(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n        for (const r of this.renderers) {\n            this.disposables.add(r);\n        }\n        let filter;\n        if (_options.keyboardNavigationLabelProvider) {\n            filter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n            _options = Object.assign(Object.assign({}, _options), { filter: filter }); // TODO need typescript help here\n            this.disposables.add(filter);\n        }\n        this.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n        this.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n        this.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n        this.view = new TreeNodeList(_user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, Object.assign(Object.assign({}, asListOptions(() => this.model, _options)), { tree: this }));\n        this.model = this.createModel(_user, this.view, _options);\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n        const onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n            this.eventBufferer.bufferEvents(() => {\n                this.focus.onDidModelSplice(e);\n                this.selection.onDidModelSplice(e);\n            });\n        }, this.disposables);\n        // Make sure the `forEach` always runs\n        onDidModelSplice(() => null, null, this.disposables);\n        // Active nodes can change when the model changes or when focus or selection change.\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n        // a nice to have UI feature.\n        onDidChangeActiveNodes.input = Event.chain(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange))\n            .debounce(() => null, 0)\n            .map(() => {\n            const set = new Set();\n            for (const node of this.focus.getNodes()) {\n                set.add(node);\n            }\n            for (const node of this.selection.getNodes()) {\n                set.add(node);\n            }\n            return [...set.values()];\n        }).event;\n        if (_options.keyboardSupport !== false) {\n            const onKeyDown = Event.chain(this.view.onKeyDown)\n                .filter(e => !isInputElement(e.target))\n                .map(e => new StandardKeyboardEvent(e));\n            onKeyDown.filter(e => e.keyCode === 15 /* KeyCode.LeftArrow */).on(this.onLeftArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 17 /* KeyCode.RightArrow */).on(this.onRightArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 10 /* KeyCode.Space */).on(this.onSpace, this, this.disposables);\n        }\n        if (((_a = _options.findWidgetEnabled) !== null && _a !== void 0 ? _a : true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n            const opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n            this.findController = new FindController(this, this.model, this.view, filter, _options.contextViewProvider, opts);\n            this.focusNavigationFilter = node => this.findController.shouldAllowFocus(node);\n            this.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n            this.disposables.add(this.findController);\n            this.onDidChangeFindMode = this.findController.onDidChangeMode;\n            this.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n        }\n        else {\n            this.onDidChangeFindMode = Event.None;\n            this.onDidChangeFindMatchType = Event.None;\n        }\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        for (const renderer of this.renderers) {\n            renderer.updateOptions(optionsUpdate);\n        }\n        this.view.updateOptions(this._options);\n        (_a = this.findController) === null || _a === void 0 ? void 0 : _a.updateOptions(optionsUpdate);\n        this._onDidUpdateOptions.fire(this._options);\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    get options() {\n        return this._options;\n    }\n    // Widget\n    getHTMLElement() {\n        return this.view.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.view.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.view.scrollTop = scrollTop;\n    }\n    domFocus() {\n        this.view.domFocus();\n    }\n    layout(height, width) {\n        var _a;\n        this.view.layout(height, width);\n        if (isNumber(width)) {\n            (_a = this.findController) === null || _a === void 0 ? void 0 : _a.layout(width);\n        }\n    }\n    style(styles) {\n        const suffix = `.${this.view.domId}`;\n        const content = [];\n        if (styles.treeIndentGuidesStroke) {\n            content.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n            content.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n        this.view.style(styles);\n    }\n    // Tree navigation\n    getParentElement(location) {\n        const parentRef = this.model.getParentNodeLocation(location);\n        const parentNode = this.model.getNode(parentRef);\n        return parentNode.element;\n    }\n    getFirstElementChild(location) {\n        return this.model.getFirstElementChild(location);\n    }\n    // Tree\n    getNode(location) {\n        return this.model.getNode(location);\n    }\n    getNodeLocation(node) {\n        return this.model.getNodeLocation(node);\n    }\n    collapse(location, recursive = false) {\n        return this.model.setCollapsed(location, true, recursive);\n    }\n    expand(location, recursive = false) {\n        return this.model.setCollapsed(location, false, recursive);\n    }\n    toggleCollapsed(location, recursive = false) {\n        return this.model.setCollapsed(location, undefined, recursive);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsible) {\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    refilter() {\n        this._onWillRefilter.fire(undefined);\n        this.model.refilter();\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.selection.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setSelection(indexes, browserEvent, true);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.focus.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setFocus(indexes, browserEvent, true);\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    reveal(location, relativeTop) {\n        this.model.expandTo(location);\n        const index = this.model.getListIndex(location);\n        if (index === -1) {\n            return;\n        }\n        this.view.reveal(index, relativeTop);\n    }\n    // List\n    onLeftArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, true);\n        if (!didChange) {\n            const parentLocation = this.model.getParentNodeLocation(location);\n            if (!parentLocation) {\n                return;\n            }\n            const parentListIndex = this.model.getListIndex(parentLocation);\n            this.view.reveal(parentListIndex);\n            this.view.setFocus([parentListIndex]);\n        }\n    }\n    onRightArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, false);\n        if (!didChange) {\n            if (!node.children.some(child => child.visible)) {\n                return;\n            }\n            const [focusedIndex] = this.view.getFocus();\n            const firstChildIndex = focusedIndex + 1;\n            this.view.reveal(firstChildIndex);\n            this.view.setFocus([firstChildIndex]);\n        }\n    }\n    onSpace(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const recursive = e.browserEvent.altKey;\n        this.model.setCollapsed(location, undefined, recursive);\n    }\n    dispose() {\n        dispose(this.disposables);\n        this.view.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { ComposedTreeDelegate } from './abstractTree.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { CompressibleObjectTree, ObjectTree } from './objectTree.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { createCancelablePromise, Promises, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { isCancellationError, onUnexpectedError } from '../../../common/errors.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIterable } from '../../../common/types.js';\nfunction createAsyncDataTreeNode(props) {\n    return Object.assign(Object.assign({}, props), { children: [], refreshPromise: undefined, stale: true, slow: false, collapsedByDefault: undefined });\n}\nfunction isAncestor(ancestor, descendant) {\n    if (!descendant.parent) {\n        return false;\n    }\n    else if (descendant.parent === ancestor) {\n        return true;\n    }\n    else {\n        return isAncestor(ancestor, descendant.parent);\n    }\n}\nfunction intersects(node, other) {\n    return node === other || isAncestor(node, other) || isAncestor(other, node);\n}\nclass AsyncDataTreeNodeWrapper {\n    get element() { return this.node.element.element; }\n    get children() { return this.node.children.map(node => new AsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass AsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n    }\n}\nfunction asTreeEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        elements: e.elements.map(e => e.element)\n    };\n}\nfunction asTreeMouseEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        element: e.element && e.element.element,\n        target: e.target\n    };\n}\nclass AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asAsyncDataTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new AsyncDataTreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass AsyncDataTreeNodeListDragAndDrop {\n    constructor(dnd) {\n        this.dnd = dnd;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asAsyncDataTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.dnd.drop(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asObjectTreeOptions(options) {\n    return options && Object.assign(Object.assign({}, options), { collapseByDefault: true, identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new AsyncDataTreeNodeListDragAndDrop(options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getPosInSet: undefined, getSetSize: undefined, getRole: options.accessibilityProvider.getRole ? (el) => {\n                return options.accessibilityProvider.getRole(el.element);\n            } : () => 'treeitem', isChecked: options.accessibilityProvider.isChecked ? (e) => {\n                var _a;\n                return !!((_a = options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.isChecked(e.element));\n            } : undefined, getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider.getAriaLevel && (node => {\n                return options.accessibilityProvider.getAriaLevel(node.element);\n            }), getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), filter: options.filter && {\n            filter(e, parentVisibility) {\n                return options.filter.filter(e.element, parentVisibility);\n            }\n        }, keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(e) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element);\n            } }), sorter: undefined, expandOnlyOnTwistieClick: typeof options.expandOnlyOnTwistieClick === 'undefined' ? undefined : (typeof options.expandOnlyOnTwistieClick !== 'function' ? options.expandOnlyOnTwistieClick : (e => options.expandOnlyOnTwistieClick(e.element))), defaultFindVisibility: e => {\n            if (e.hasChildren && e.stale) {\n                return 1 /* TreeVisibility.Visible */;\n            }\n            else if (typeof options.defaultFindVisibility === 'number') {\n                return options.defaultFindVisibility;\n            }\n            else if (typeof options.defaultFindVisibility === 'undefined') {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n            else {\n                return options.defaultFindVisibility(e.element);\n            }\n        } });\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\nexport class AsyncDataTree {\n    get onDidChangeFocus() { return Event.map(this.tree.onDidChangeFocus, asTreeEvent); }\n    get onDidChangeSelection() { return Event.map(this.tree.onDidChangeSelection, asTreeEvent); }\n    get onMouseDblClick() { return Event.map(this.tree.onMouseDblClick, asTreeMouseEvent); }\n    get onPointer() { return Event.map(this.tree.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.tree.onDidFocus; }\n    /**\n     * To be used internally only!\n     * @deprecated\n     */\n    get onDidChangeModel() { return this.tree.onDidChangeModel; }\n    get onDidChangeCollapseState() { return this.tree.onDidChangeCollapseState; }\n    get onDidChangeFindOpenState() { return this.tree.onDidChangeFindOpenState; }\n    get onDidDispose() { return this.tree.onDidDispose; }\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        this.user = user;\n        this.dataSource = dataSource;\n        this.nodes = new Map();\n        this.subTreeRefreshPromises = new Map();\n        this.refreshPromises = new Map();\n        this._onDidRender = new Emitter();\n        this._onDidChangeNodeSlowState = new Emitter();\n        this.nodeMapper = new WeakMapper(node => new AsyncDataTreeNodeWrapper(node));\n        this.disposables = new DisposableStore();\n        this.identityProvider = options.identityProvider;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.sorter = options.sorter;\n        this.collapseByDefault = options.collapseByDefault;\n        this.tree = this.createTree(user, container, delegate, renderers, options);\n        this.onDidChangeFindMode = this.tree.onDidChangeFindMode;\n        this.root = createAsyncDataTreeNode({\n            element: undefined,\n            parent: null,\n            hasChildren: true\n        });\n        if (this.identityProvider) {\n            this.root = Object.assign(Object.assign({}, this.root), { id: null });\n        }\n        this.nodes.set(null, this.root);\n        this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState, this, this.disposables);\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new AsyncDataTreeRenderer(r, this.nodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asObjectTreeOptions(options) || {};\n        return new ObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.tree.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.tree.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.tree.scrollTop = scrollTop;\n    }\n    domFocus() {\n        this.tree.domFocus();\n    }\n    layout(height, width) {\n        this.tree.layout(height, width);\n    }\n    style(styles) {\n        this.tree.style(styles);\n    }\n    // Model\n    getInput() {\n        return this.root.element;\n    }\n    setInput(input, viewState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.refreshPromises.forEach(promise => promise.cancel());\n            this.refreshPromises.clear();\n            this.root.element = input;\n            const viewStateContext = viewState && { viewState, focus: [], selection: [] };\n            yield this._updateChildren(input, true, false, viewStateContext);\n            if (viewStateContext) {\n                this.tree.setFocus(viewStateContext.focus);\n                this.tree.setSelection(viewStateContext.selection);\n            }\n            if (viewState && typeof viewState.scrollTop === 'number') {\n                this.scrollTop = viewState.scrollTop;\n            }\n        });\n    }\n    _updateChildren(element = this.root.element, recursive = true, rerender = false, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            yield this.refreshAndRenderNode(node, recursive, viewStateContext, options);\n            if (rerender) {\n                try {\n                    this.tree.rerender(node);\n                }\n                catch (_a) {\n                    // missing nodes are fine, this could've resulted from\n                    // parallel refresh calls, removing `node` altogether\n                }\n            }\n        });\n    }\n    // View\n    rerender(element) {\n        if (element === undefined || element === this.root.element) {\n            this.tree.rerender();\n            return;\n        }\n        const node = this.getDataNode(element);\n        this.tree.rerender(node);\n    }\n    // Tree\n    getNode(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getNode(dataNode === this.root ? null : dataNode);\n        return this.nodeMapper.map(node);\n    }\n    collapse(element, recursive = false) {\n        const node = this.getDataNode(element);\n        return this.tree.collapse(node === this.root ? null : node, recursive);\n    }\n    expand(element, recursive = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            if (this.tree.hasElement(node) && !this.tree.isCollapsible(node)) {\n                return false;\n            }\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            if (node !== this.root && !node.refreshPromise && !this.tree.isCollapsed(node)) {\n                return false;\n            }\n            const result = this.tree.expand(node === this.root ? null : node, recursive);\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            return result;\n        });\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setSelection(nodes, browserEvent);\n    }\n    getSelection() {\n        const nodes = this.tree.getSelection();\n        return nodes.map(n => n.element);\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setFocus(nodes, browserEvent);\n    }\n    getFocus() {\n        const nodes = this.tree.getFocus();\n        return nodes.map(n => n.element);\n    }\n    reveal(element, relativeTop) {\n        this.tree.reveal(this.getDataNode(element), relativeTop);\n    }\n    // Tree navigation\n    getParentElement(element) {\n        const node = this.tree.getParentElement(this.getDataNode(element));\n        return (node && node.element);\n    }\n    getFirstElementChild(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getFirstElementChild(dataNode === this.root ? null : dataNode);\n        return (node && node.element);\n    }\n    // Implementation\n    getDataNode(element) {\n        const node = this.nodes.get((element === this.root.element ? null : element));\n        if (!node) {\n            throw new TreeError(this.user, `Data tree node not found: ${element}`);\n        }\n        return node;\n    }\n    refreshAndRenderNode(node, recursive, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.refreshNode(node, recursive, viewStateContext);\n            this.render(node, viewStateContext, options);\n        });\n    }\n    refreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let result;\n            this.subTreeRefreshPromises.forEach((refreshPromise, refreshNode) => {\n                if (!result && intersects(refreshNode, node)) {\n                    result = refreshPromise.then(() => this.refreshNode(node, recursive, viewStateContext));\n                }\n            });\n            if (result) {\n                return result;\n            }\n            if (node !== this.root) {\n                const treeNode = this.tree.getNode(node);\n                if (treeNode.collapsed) {\n                    node.hasChildren = !!this.dataSource.hasChildren(node.element);\n                    node.stale = true;\n                    return;\n                }\n            }\n            return this.doRefreshSubTree(node, recursive, viewStateContext);\n        });\n    }\n    doRefreshSubTree(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let done;\n            node.refreshPromise = new Promise(c => done = c);\n            this.subTreeRefreshPromises.set(node, node.refreshPromise);\n            node.refreshPromise.finally(() => {\n                node.refreshPromise = undefined;\n                this.subTreeRefreshPromises.delete(node);\n            });\n            try {\n                const childrenToRefresh = yield this.doRefreshNode(node, recursive, viewStateContext);\n                node.stale = false;\n                yield Promises.settled(childrenToRefresh.map(child => this.doRefreshSubTree(child, recursive, viewStateContext)));\n            }\n            finally {\n                done();\n            }\n        });\n    }\n    doRefreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            node.hasChildren = !!this.dataSource.hasChildren(node.element);\n            let childrenPromise;\n            if (!node.hasChildren) {\n                childrenPromise = Promise.resolve(Iterable.empty());\n            }\n            else {\n                const children = this.doGetChildren(node);\n                if (isIterable(children)) {\n                    childrenPromise = Promise.resolve(children);\n                }\n                else {\n                    const slowTimeout = timeout(800);\n                    slowTimeout.then(() => {\n                        node.slow = true;\n                        this._onDidChangeNodeSlowState.fire(node);\n                    }, _ => null);\n                    childrenPromise = children.finally(() => slowTimeout.cancel());\n                }\n            }\n            try {\n                const children = yield childrenPromise;\n                return this.setChildren(node, children, recursive, viewStateContext);\n            }\n            catch (err) {\n                if (node !== this.root && this.tree.hasElement(node)) {\n                    this.tree.collapse(node);\n                }\n                if (isCancellationError(err)) {\n                    return [];\n                }\n                throw err;\n            }\n            finally {\n                if (node.slow) {\n                    node.slow = false;\n                    this._onDidChangeNodeSlowState.fire(node);\n                }\n            }\n        });\n    }\n    doGetChildren(node) {\n        let result = this.refreshPromises.get(node);\n        if (result) {\n            return result;\n        }\n        const children = this.dataSource.getChildren(node.element);\n        if (isIterable(children)) {\n            return this.processChildren(children);\n        }\n        else {\n            result = createCancelablePromise(() => __awaiter(this, void 0, void 0, function* () { return this.processChildren(yield children); }));\n            this.refreshPromises.set(node, result);\n            return result.finally(() => { this.refreshPromises.delete(node); });\n        }\n    }\n    _onDidChangeCollapseState({ node, deep }) {\n        if (node.element === null) {\n            return;\n        }\n        if (!node.collapsed && node.element.stale) {\n            if (deep) {\n                this.collapse(node.element.element);\n            }\n            else {\n                this.refreshAndRenderNode(node.element, false)\n                    .catch(onUnexpectedError);\n            }\n        }\n    }\n    setChildren(node, childrenElementsIterable, recursive, viewStateContext) {\n        const childrenElements = [...childrenElementsIterable];\n        // perf: if the node was and still is a leaf, avoid all this hassle\n        if (node.children.length === 0 && childrenElements.length === 0) {\n            return [];\n        }\n        const nodesToForget = new Map();\n        const childrenTreeNodesById = new Map();\n        for (const child of node.children) {\n            nodesToForget.set(child.element, child);\n            if (this.identityProvider) {\n                const collapsed = this.tree.isCollapsed(child);\n                childrenTreeNodesById.set(child.id, { node: child, collapsed });\n            }\n        }\n        const childrenToRefresh = [];\n        const children = childrenElements.map(element => {\n            const hasChildren = !!this.dataSource.hasChildren(element);\n            if (!this.identityProvider) {\n                const asyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, hasChildren });\n                if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const id = this.identityProvider.getId(element).toString();\n            const result = childrenTreeNodesById.get(id);\n            if (result) {\n                const asyncDataTreeNode = result.node;\n                nodesToForget.delete(asyncDataTreeNode.element);\n                this.nodes.delete(asyncDataTreeNode.element);\n                this.nodes.set(element, asyncDataTreeNode);\n                asyncDataTreeNode.element = element;\n                asyncDataTreeNode.hasChildren = hasChildren;\n                if (recursive) {\n                    if (result.collapsed) {\n                        asyncDataTreeNode.children.forEach(node => dfs(node, node => this.nodes.delete(node.element)));\n                        asyncDataTreeNode.children.splice(0, asyncDataTreeNode.children.length);\n                        asyncDataTreeNode.stale = true;\n                    }\n                    else {\n                        childrenToRefresh.push(asyncDataTreeNode);\n                    }\n                }\n                else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const childAsyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, id, hasChildren });\n            if (viewStateContext && viewStateContext.viewState.focus && viewStateContext.viewState.focus.indexOf(id) > -1) {\n                viewStateContext.focus.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.selection && viewStateContext.viewState.selection.indexOf(id) > -1) {\n                viewStateContext.selection.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.expanded && viewStateContext.viewState.expanded.indexOf(id) > -1) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                childAsyncDataTreeNode.collapsedByDefault = false;\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            return childAsyncDataTreeNode;\n        });\n        for (const node of nodesToForget.values()) {\n            dfs(node, node => this.nodes.delete(node.element));\n        }\n        for (const child of children) {\n            this.nodes.set(child.element, child);\n        }\n        node.children.splice(0, node.children.length, ...children);\n        // TODO@joao this doesn't take filter into account\n        if (node !== this.root && this.autoExpandSingleChildren && children.length === 1 && childrenToRefresh.length === 0) {\n            children[0].collapsedByDefault = false;\n            childrenToRefresh.push(children[0]);\n        }\n        return childrenToRefresh;\n    }\n    render(node, viewStateContext, options) {\n        const children = node.children.map(node => this.asTreeElement(node, viewStateContext));\n        const objectTreeOptions = options && Object.assign(Object.assign({}, options), { diffIdentityProvider: options.diffIdentityProvider && {\n                getId(node) {\n                    return options.diffIdentityProvider.getId(node.element);\n                }\n            } });\n        this.tree.setChildren(node === this.root ? null : node, children, objectTreeOptions);\n        if (node !== this.root) {\n            this.tree.setCollapsible(node, node.hasChildren);\n        }\n        this._onDidRender.fire();\n    }\n    asTreeElement(node, viewStateContext) {\n        if (node.stale) {\n            return {\n                element: node,\n                collapsible: node.hasChildren,\n                collapsed: true\n            };\n        }\n        let collapsed;\n        if (viewStateContext && viewStateContext.viewState.expanded && node.id && viewStateContext.viewState.expanded.indexOf(node.id) > -1) {\n            collapsed = false;\n        }\n        else {\n            collapsed = node.collapsedByDefault;\n        }\n        node.collapsedByDefault = undefined;\n        return {\n            element: node,\n            children: node.hasChildren ? Iterable.map(node.children, child => this.asTreeElement(child, viewStateContext)) : [],\n            collapsible: node.hasChildren,\n            collapsed\n        };\n    }\n    processChildren(children) {\n        if (this.sorter) {\n            children = [...children].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return children;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass CompressibleAsyncDataTreeNodeWrapper {\n    get element() {\n        return {\n            elements: this.node.element.elements.map(e => e.element),\n            incompressible: this.node.element.incompressible\n        };\n    }\n    get children() { return this.node.children.map(node => new CompressibleAsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass CompressibleAsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, compressibleNodeMapperProvider, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.compressibleNodeMapperProvider = compressibleNodeMapperProvider;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.disposables = [];\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderCompressedElements(node, index, templateData, height) {\n        this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeCompressedElements(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.disposables = dispose(this.disposables);\n    }\n}\nfunction asCompressibleObjectTreeOptions(options) {\n    const objectTreeOptions = options && asObjectTreeOptions(options);\n    return objectTreeOptions && Object.assign(Object.assign({}, objectTreeOptions), { keyboardNavigationLabelProvider: objectTreeOptions.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, objectTreeOptions.keyboardNavigationLabelProvider), { getCompressedNodeKeyboardNavigationLabel(els) {\n                return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(els.map(e => e.element));\n            } }) });\n}\nexport class CompressibleAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options = {}) {\n        super(user, container, virtualDelegate, renderers, dataSource, options);\n        this.compressionDelegate = compressionDelegate;\n        this.compressibleNodeMapper = new WeakMapper(node => new CompressibleAsyncDataTreeNodeWrapper(node));\n        this.filter = options.filter;\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new CompressibleAsyncDataTreeRenderer(r, this.nodeMapper, () => this.compressibleNodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asCompressibleObjectTreeOptions(options) || {};\n        return new CompressibleObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    asTreeElement(node, viewStateContext) {\n        return Object.assign({ incompressible: this.compressionDelegate.isIncompressible(node.element) }, super.asTreeElement(node, viewStateContext));\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    render(node, viewStateContext) {\n        if (!this.identityProvider) {\n            return super.render(node, viewStateContext);\n        }\n        // Preserve traits across compressions. Hacky but does the trick.\n        // This is hard to fix properly since it requires rewriting the traits\n        // across trees and lists. Let's just keep it this way for now.\n        const getId = (element) => this.identityProvider.getId(element).toString();\n        const getUncompressedIds = (nodes) => {\n            const result = new Set();\n            for (const node of nodes) {\n                const compressedNode = this.tree.getCompressedTreeNode(node === this.root ? null : node);\n                if (!compressedNode.element) {\n                    continue;\n                }\n                for (const node of compressedNode.element.elements) {\n                    result.add(getId(node.element));\n                }\n            }\n            return result;\n        };\n        const oldSelection = getUncompressedIds(this.tree.getSelection());\n        const oldFocus = getUncompressedIds(this.tree.getFocus());\n        super.render(node, viewStateContext);\n        const selection = this.getSelection();\n        let didChangeSelection = false;\n        const focus = this.getFocus();\n        let didChangeFocus = false;\n        const visit = (node) => {\n            const compressedNode = node.element;\n            if (compressedNode) {\n                for (let i = 0; i < compressedNode.elements.length; i++) {\n                    const id = getId(compressedNode.elements[i].element);\n                    const element = compressedNode.elements[compressedNode.elements.length - 1].element;\n                    // github.com/microsoft/vscode/issues/85938\n                    if (oldSelection.has(id) && selection.indexOf(element) === -1) {\n                        selection.push(element);\n                        didChangeSelection = true;\n                    }\n                    if (oldFocus.has(id) && focus.indexOf(element) === -1) {\n                        focus.push(element);\n                        didChangeFocus = true;\n                    }\n                }\n            }\n            node.children.forEach(visit);\n        };\n        visit(this.tree.getCompressedTreeNode(node === this.root ? null : node));\n        if (didChangeSelection) {\n            this.setSelection(selection);\n        }\n        if (didChangeFocus) {\n            this.setFocus(focus);\n        }\n    }\n    // For compressed async data trees, `TreeVisibility.Recurse` doesn't currently work\n    // and we have to filter everything beforehand\n    // Related to #85193 and #85835\n    processChildren(children) {\n        if (this.filter) {\n            children = Iterable.filter(children, e => {\n                const result = this.filter.filter(e, 1 /* TreeVisibility.Visible */);\n                const visibility = getVisibility(result);\n                if (visibility === 2 /* TreeVisibility.Recurse */) {\n                    throw new Error('Recursive tree visibility not supported in async data compressed trees');\n                }\n                return visibility === 1 /* TreeVisibility.Visible */;\n            });\n        }\n        return super.processChildren(children);\n    }\n}\nfunction getVisibility(filterResult) {\n    if (typeof filterResult === 'boolean') {\n        return filterResult ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n    }\n    else if (isFilterResult(filterResult)) {\n        return getVisibleState(filterResult.visibility);\n    }\n    else {\n        return getVisibleState(filterResult);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AbstractTree } from './abstractTree.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nexport class DataTree extends AbstractTree {\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n        this.dataSource = dataSource;\n        this.identityProvider = options.identityProvider;\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TreeError } from './tree.js';\nimport { splice, tail2 } from '../../../common/arrays.js';\nimport { Delayer } from '../../../common/async.js';\nimport { MicrotaskDelay } from '../../../common/symbols.js';\nimport { LcsDiff } from '../../../common/diff/diff.js';\nimport { Emitter, EventBufferer } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport function isFilterResult(obj) {\n    return typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\nexport function getVisibleState(visibility) {\n    switch (visibility) {\n        case true: return 1 /* TreeVisibility.Visible */;\n        case false: return 0 /* TreeVisibility.Hidden */;\n        default: return visibility;\n    }\n}\nfunction isCollapsibleStateUpdate(update) {\n    return typeof update.collapsible === 'boolean';\n}\nexport class IndexTreeModel {\n    constructor(user, list, rootElement, options = {}) {\n        this.user = user;\n        this.list = list;\n        this.rootRef = [];\n        this.eventBufferer = new EventBufferer();\n        this._onDidChangeCollapseState = new Emitter();\n        this.onDidChangeCollapseState = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n        this._onDidChangeRenderNodeCount = new Emitter();\n        this.onDidChangeRenderNodeCount = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n        this._onDidSplice = new Emitter();\n        this.onDidSplice = this._onDidSplice.event;\n        this.refilterDelayer = new Delayer(MicrotaskDelay);\n        this.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n        this.filter = options.filter;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.root = {\n            parent: undefined,\n            element: rootElement,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: false,\n            collapsed: false,\n            renderNodeCount: 0,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n    }\n    splice(location, deleteCount, toInsert = Iterable.empty(), options = {}) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        if (options.diffIdentityProvider) {\n            this.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n        }\n        else {\n            this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n    }\n    spliceSmart(identity, location, deleteCount, toInsertIterable, options, recurseLevels) {\n        var _a;\n        if (toInsertIterable === void 0) { toInsertIterable = Iterable.empty(); }\n        if (recurseLevels === void 0) { recurseLevels = (_a = options.diffDepth) !== null && _a !== void 0 ? _a : 0; }\n        const { parentNode } = this.getParentNodeWithListIndex(location);\n        if (!parentNode.lastDiffIds) {\n            return this.spliceSimple(location, deleteCount, toInsertIterable, options);\n        }\n        const toInsert = [...toInsertIterable];\n        const index = location[location.length - 1];\n        const diff = new LcsDiff({ getElements: () => parentNode.lastDiffIds }, {\n            getElements: () => [\n                ...parentNode.children.slice(0, index),\n                ...toInsert,\n                ...parentNode.children.slice(index + deleteCount),\n            ].map(e => identity.getId(e.element).toString())\n        }).ComputeDiff(false);\n        // if we were given a 'best effort' diff, use default behavior\n        if (diff.quitEarly) {\n            parentNode.lastDiffIds = undefined;\n            return this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n        const locationPrefix = location.slice(0, -1);\n        const recurseSplice = (fromOriginal, fromModified, count) => {\n            if (recurseLevels > 0) {\n                for (let i = 0; i < count; i++) {\n                    fromOriginal--;\n                    fromModified--;\n                    this.spliceSmart(identity, [...locationPrefix, fromOriginal, 0], Number.MAX_SAFE_INTEGER, toInsert[fromModified].children, options, recurseLevels - 1);\n                }\n            }\n        };\n        let lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n        let lastStartM = toInsert.length;\n        for (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n            recurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n            lastStartO = change.originalStart;\n            lastStartM = change.modifiedStart - index;\n            this.spliceSimple([...locationPrefix, lastStartO], change.originalLength, Iterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength), options);\n        }\n        // at this point, startO === startM === count since any remaining prefix should match\n        recurseSplice(lastStartO, lastStartM, lastStartO);\n    }\n    spliceSimple(location, deleteCount, toInsert = Iterable.empty(), { onDidCreateNode, onDidDeleteNode, diffIdentityProvider }) {\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const treeListElementsToInsert = [];\n        const nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, revealed, treeListElementsToInsert, onDidCreateNode));\n        const lastIndex = location[location.length - 1];\n        const lastHadChildren = parentNode.children.length > 0;\n        // figure out what's the visible child start index right before the\n        // splice point\n        let visibleChildStartIndex = 0;\n        for (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n            const child = parentNode.children[i];\n            if (child.visible) {\n                visibleChildStartIndex = child.visibleChildIndex;\n                break;\n            }\n        }\n        const nodesToInsert = [];\n        let insertedVisibleChildrenCount = 0;\n        let renderNodeCount = 0;\n        for (const child of nodesToInsertIterator) {\n            nodesToInsert.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n            }\n        }\n        const deletedNodes = splice(parentNode.children, lastIndex, deleteCount, nodesToInsert);\n        if (!diffIdentityProvider) {\n            parentNode.lastDiffIds = undefined;\n        }\n        else if (parentNode.lastDiffIds) {\n            splice(parentNode.lastDiffIds, lastIndex, deleteCount, nodesToInsert.map(n => diffIdentityProvider.getId(n.element).toString()));\n        }\n        else {\n            parentNode.lastDiffIds = parentNode.children.map(n => diffIdentityProvider.getId(n.element).toString());\n        }\n        // figure out what is the count of deleted visible children\n        let deletedVisibleChildrenCount = 0;\n        for (const child of deletedNodes) {\n            if (child.visible) {\n                deletedVisibleChildrenCount++;\n            }\n        }\n        // and adjust for all visible children after the splice point\n        if (deletedVisibleChildrenCount !== 0) {\n            for (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n                const child = parentNode.children[i];\n                if (child.visible) {\n                    child.visibleChildIndex -= deletedVisibleChildrenCount;\n                }\n            }\n        }\n        // update parent's visible children count\n        parentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n        if (revealed && visible) {\n            const visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n            this._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n            this.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n        }\n        if (deletedNodes.length > 0 && onDidDeleteNode) {\n            const visit = (node) => {\n                onDidDeleteNode(node);\n                node.children.forEach(visit);\n            };\n            deletedNodes.forEach(visit);\n        }\n        this._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n        const currentlyHasChildren = parentNode.children.length > 0;\n        if (lastHadChildren !== currentlyHasChildren) {\n            this.setCollapsible(location.slice(0, -1), currentlyHasChildren);\n        }\n        let node = parentNode;\n        while (node) {\n            if (node.visibility === 2 /* TreeVisibility.Recurse */) {\n                // delayed to avoid excessive refiltering, see #135941\n                this.refilterDelayer.trigger(() => this.refilter());\n                break;\n            }\n            node = node.parent;\n        }\n    }\n    rerender(location) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        if (node.visible && revealed) {\n            this.list.splice(listIndex, 1, [node]);\n        }\n    }\n    has(location) {\n        return this.hasTreeNode(location);\n    }\n    getListIndex(location) {\n        const { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n        return visible && revealed ? listIndex : -1;\n    }\n    getListRenderCount(location) {\n        return this.getTreeNode(location).renderNodeCount;\n    }\n    isCollapsible(location) {\n        return this.getTreeNode(location).collapsible;\n    }\n    setCollapsible(location, collapsible) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsible === 'undefined') {\n            collapsible = !node.collapsible;\n        }\n        const update = { collapsible };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    isCollapsed(location) {\n        return this.getTreeNode(location).collapsed;\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsed === 'undefined') {\n            collapsed = !node.collapsed;\n        }\n        const update = { collapsed, recursive: recursive || false };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    _setCollapseState(location, update) {\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        const result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n        if (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n            let onlyVisibleChildIndex = -1;\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.visible) {\n                    if (onlyVisibleChildIndex > -1) {\n                        onlyVisibleChildIndex = -1;\n                        break;\n                    }\n                    else {\n                        onlyVisibleChildIndex = i;\n                    }\n                }\n            }\n            if (onlyVisibleChildIndex > -1) {\n                this._setCollapseState([...location, onlyVisibleChildIndex], update);\n            }\n        }\n        return result;\n    }\n    _setListNodeCollapseState(node, listIndex, revealed, update) {\n        const result = this._setNodeCollapseState(node, update, false);\n        if (!revealed || !node.visible || !result) {\n            return result;\n        }\n        const previousRenderNodeCount = node.renderNodeCount;\n        const toInsert = this.updateNodeAfterCollapseChange(node);\n        const deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n        this.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n        return result;\n    }\n    _setNodeCollapseState(node, update, deep) {\n        let result;\n        if (node === this.root) {\n            result = false;\n        }\n        else {\n            if (isCollapsibleStateUpdate(update)) {\n                result = node.collapsible !== update.collapsible;\n                node.collapsible = update.collapsible;\n            }\n            else if (!node.collapsible) {\n                result = false;\n            }\n            else {\n                result = node.collapsed !== update.collapsed;\n                node.collapsed = update.collapsed;\n            }\n            if (result) {\n                this._onDidChangeCollapseState.fire({ node, deep });\n            }\n        }\n        if (!isCollapsibleStateUpdate(update) && update.recursive) {\n            for (const child of node.children) {\n                result = this._setNodeCollapseState(child, update, true) || result;\n            }\n        }\n        return result;\n    }\n    expandTo(location) {\n        this.eventBufferer.bufferEvents(() => {\n            let node = this.getTreeNode(location);\n            while (node.parent) {\n                node = node.parent;\n                location = location.slice(0, location.length - 1);\n                if (node.collapsed) {\n                    this._setCollapseState(location, { collapsed: false, recursive: false });\n                }\n            }\n        });\n    }\n    refilter() {\n        const previousRenderNodeCount = this.root.renderNodeCount;\n        const toInsert = this.updateNodeAfterFilterChange(this.root);\n        this.list.splice(0, previousRenderNodeCount, toInsert);\n        this.refilterDelayer.cancel();\n    }\n    createTreeNode(treeElement, parent, parentVisibility, revealed, treeListElements, onDidCreateNode) {\n        const node = {\n            parent,\n            element: treeElement.element,\n            children: [],\n            depth: parent.depth + 1,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n            collapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n            renderNodeCount: 1,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n        const visibility = this._filterNode(node, parentVisibility);\n        node.visibility = visibility;\n        if (revealed) {\n            treeListElements.push(node);\n        }\n        const childElements = treeElement.children || Iterable.empty();\n        const childRevealed = revealed && visibility !== 0 /* TreeVisibility.Hidden */ && !node.collapsed;\n        let visibleChildrenCount = 0;\n        let renderNodeCount = 1;\n        for (const el of childElements) {\n            const child = this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode);\n            node.children.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildrenCount++;\n            }\n        }\n        node.collapsible = node.collapsible || node.children.length > 0;\n        node.visibleChildrenCount = visibleChildrenCount;\n        node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? visibleChildrenCount > 0 : (visibility === 1 /* TreeVisibility.Visible */);\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                treeListElements.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount = renderNodeCount;\n        }\n        onDidCreateNode === null || onDidCreateNode === void 0 ? void 0 : onDidCreateNode(node);\n        return node;\n    }\n    updateNodeAfterCollapseChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterCollapseChange(node, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterCollapseChange(node, result) {\n        if (node.visible === false) {\n            return 0;\n        }\n        result.push(node);\n        node.renderNodeCount = 1;\n        if (!node.collapsed) {\n            for (const child of node.children) {\n                node.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n            }\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.renderNodeCount;\n    }\n    updateNodeAfterFilterChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterFilterChange(node, node.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterFilterChange(node, parentVisibility, result, revealed = true) {\n        let visibility;\n        if (node !== this.root) {\n            visibility = this._filterNode(node, parentVisibility);\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                node.visible = false;\n                node.renderNodeCount = 0;\n                return false;\n            }\n            if (revealed) {\n                result.push(node);\n            }\n        }\n        const resultStartLength = result.length;\n        node.renderNodeCount = node === this.root ? 0 : 1;\n        let hasVisibleDescendants = false;\n        if (!node.collapsed || visibility !== 0 /* TreeVisibility.Hidden */) {\n            let visibleChildIndex = 0;\n            for (const child of node.children) {\n                hasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility, result, revealed && !node.collapsed) || hasVisibleDescendants;\n                if (child.visible) {\n                    child.visibleChildIndex = visibleChildIndex++;\n                }\n            }\n            node.visibleChildrenCount = visibleChildIndex;\n        }\n        else {\n            node.visibleChildrenCount = 0;\n        }\n        if (node !== this.root) {\n            node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? hasVisibleDescendants : (visibility === 1 /* TreeVisibility.Visible */);\n            node.visibility = visibility;\n        }\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                result.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount += result.length - resultStartLength;\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.visible;\n    }\n    _updateAncestorsRenderNodeCount(node, diff) {\n        if (diff === 0) {\n            return;\n        }\n        while (node) {\n            node.renderNodeCount += diff;\n            this._onDidChangeRenderNodeCount.fire(node);\n            node = node.parent;\n        }\n    }\n    _filterNode(node, parentVisibility) {\n        const result = this.filter ? this.filter.filter(node.element, parentVisibility) : 1 /* TreeVisibility.Visible */;\n        if (typeof result === 'boolean') {\n            node.filterData = undefined;\n            return result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n        }\n        else if (isFilterResult(result)) {\n            node.filterData = result.data;\n            return getVisibleState(result.visibility);\n        }\n        else {\n            node.filterData = undefined;\n            return getVisibleState(result);\n        }\n    }\n    // cheap\n    hasTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return true;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            return false;\n        }\n        return this.hasTreeNode(rest, node.children[index]);\n    }\n    // cheap\n    getTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return node;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        return this.getTreeNode(rest, node.children[index]);\n    }\n    // expensive\n    getTreeNodeWithListIndex(location) {\n        if (location.length === 0) {\n            return { node: this.root, listIndex: -1, revealed: true, visible: false };\n        }\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const index = location[location.length - 1];\n        if (index < 0 || index > parentNode.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const node = parentNode.children[index];\n        return { node, listIndex, revealed, visible: visible && node.visible };\n    }\n    getParentNodeWithListIndex(location, node = this.root, listIndex = 0, revealed = true, visible = true) {\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        // TODO@joao perf!\n        for (let i = 0; i < index; i++) {\n            listIndex += node.children[i].renderNodeCount;\n        }\n        revealed = revealed && !node.collapsed;\n        visible = visible && node.visible;\n        if (rest.length === 0) {\n            return { parentNode: node, listIndex, revealed, visible };\n        }\n        return this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n    }\n    getNode(location = []) {\n        return this.getTreeNode(location);\n    }\n    // TODO@joao perf!\n    getNodeLocation(node) {\n        const location = [];\n        let indexTreeNode = node; // typing woes\n        while (indexTreeNode.parent) {\n            location.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n            indexTreeNode = indexTreeNode.parent;\n        }\n        return location.reverse();\n    }\n    getParentNodeLocation(location) {\n        if (location.length === 0) {\n            return undefined;\n        }\n        else if (location.length === 1) {\n            return [];\n        }\n        else {\n            return tail2(location)[0];\n        }\n    }\n    getFirstElementChild(location) {\n        const node = this.getTreeNode(location);\n        if (node.children.length === 0) {\n            return undefined;\n        }\n        return node.children[0].element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nfunction noCompress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.from(element.children), noCompress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function compress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    let childrenIterator;\n    let children;\n    while (true) {\n        [children, childrenIterator] = Iterable.consume(Iterable.from(element.children), 2);\n        if (children.length !== 1) {\n            break;\n        }\n        if (children[0].incompressible) {\n            break;\n        }\n        element = children[0];\n        elements.push(element.element);\n    }\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.concat(children, childrenIterator), compress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\nfunction _decompress(element, index = 0) {\n    let children;\n    if (index < element.element.elements.length - 1) {\n        children = [_decompress(element, index + 1)];\n    }\n    else {\n        children = Iterable.map(Iterable.from(element.children), el => _decompress(el, 0));\n    }\n    if (index === 0 && element.element.incompressible) {\n        return {\n            element: element.element.elements[index],\n            children,\n            incompressible: true,\n            collapsible: element.collapsible,\n            collapsed: element.collapsed\n        };\n    }\n    return {\n        element: element.element.elements[index],\n        children,\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function decompress(element) {\n    return _decompress(element, 0);\n}\nfunction splice(treeElement, element, children) {\n    if (treeElement.element === element) {\n        return Object.assign(Object.assign({}, treeElement), { children });\n    }\n    return Object.assign(Object.assign({}, treeElement), { children: Iterable.map(Iterable.from(treeElement.children), e => splice(e, element, children)) });\n}\nconst wrapIdentityProvider = (base) => ({\n    getId(node) {\n        return node.elements.map(e => base.getId(e).toString()).join('\\0');\n    }\n});\n// Exported only for test reasons, do not use directly\nexport class CompressedObjectTreeModel {\n    get onDidSplice() { return this.model.onDidSplice; }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get onDidChangeRenderNodeCount() { return this.model.onDidChangeRenderNodeCount; }\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.model = new ObjectTreeModel(user, list, options);\n        this.enabled = typeof options.compressionEnabled === 'undefined' ? true : options.compressionEnabled;\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        // Diffs must be deem, since the compression can affect nested elements.\n        // @see https://github.com/microsoft/vscode/pull/114237#issuecomment-759425034\n        const diffIdentityProvider = options.diffIdentityProvider && wrapIdentityProvider(options.diffIdentityProvider);\n        if (element === null) {\n            const compressedChildren = Iterable.map(children, this.enabled ? compress : noCompress);\n            this._setChildren(null, compressedChildren, { diffIdentityProvider, diffDepth: Infinity });\n            return;\n        }\n        const compressedNode = this.nodes.get(element);\n        if (!compressedNode) {\n            throw new TreeError(this.user, 'Unknown compressed tree node');\n        }\n        const node = this.model.getNode(compressedNode);\n        const compressedParentNode = this.model.getParentNodeLocation(compressedNode);\n        const parent = this.model.getNode(compressedParentNode);\n        const decompressedElement = decompress(node);\n        const splicedElement = splice(decompressedElement, element, children);\n        const recompressedElement = (this.enabled ? compress : noCompress)(splicedElement);\n        const parentChildren = parent.children\n            .map(child => child === node ? recompressedElement : child);\n        this._setChildren(parent.element, parentChildren, {\n            diffIdentityProvider,\n            diffDepth: node.depth - parent.depth,\n        });\n    }\n    setCompressionEnabled(enabled) {\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        const root = this.model.getNode();\n        const rootChildren = root.children;\n        const decompressedRootChildren = Iterable.map(rootChildren, decompress);\n        const recompressedRootChildren = Iterable.map(decompressedRootChildren, enabled ? compress : noCompress);\n        // it should be safe to always use deep diff mode here if an identity\n        // provider is available, since we know the raw nodes are unchanged.\n        this._setChildren(null, recompressedRootChildren, {\n            diffIdentityProvider: this.identityProvider,\n            diffDepth: Infinity,\n        });\n    }\n    _setChildren(node, children, options) {\n        const insertedElements = new Set();\n        const onDidCreateNode = (node) => {\n            for (const element of node.element.elements) {\n                insertedElements.add(element);\n                this.nodes.set(element, node.element);\n            }\n        };\n        const onDidDeleteNode = (node) => {\n            for (const element of node.element.elements) {\n                if (!insertedElements.has(element)) {\n                    this.nodes.delete(element);\n                }\n            }\n        };\n        this.model.setChildren(node, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListIndex(node);\n    }\n    getListRenderCount(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListRenderCount(node);\n    }\n    getNode(location) {\n        if (typeof location === 'undefined') {\n            return this.model.getNode();\n        }\n        const node = this.getCompressedNode(location);\n        return this.model.getNode(node);\n    }\n    // TODO: review this\n    getNodeLocation(node) {\n        const compressedNode = this.model.getNodeLocation(node);\n        if (compressedNode === null) {\n            return null;\n        }\n        return compressedNode.elements[compressedNode.elements.length - 1];\n    }\n    // TODO: review this\n    getParentNodeLocation(location) {\n        const compressedNode = this.getCompressedNode(location);\n        const parentNode = this.model.getParentNodeLocation(compressedNode);\n        if (parentNode === null) {\n            return null;\n        }\n        return parentNode.elements[parentNode.elements.length - 1];\n    }\n    getFirstElementChild(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.getFirstElementChild(compressedNode);\n    }\n    isCollapsible(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsible(compressedNode);\n    }\n    setCollapsible(location, collapsible) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsible(compressedNode, collapsible);\n    }\n    isCollapsed(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsed(compressedNode);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsed(compressedNode, collapsed, recursive);\n    }\n    expandTo(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.expandTo(compressedNode);\n    }\n    rerender(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.rerender(compressedNode);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getCompressedNode(element) {\n        if (element === null) {\n            return null;\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n}\nexport const DefaultElementMapper = elements => elements[elements.length - 1];\nclass CompressedTreeNodeWrapper {\n    get element() { return this.node.element === null ? null : this.unwrapper(this.node.element); }\n    get children() { return this.node.children.map(node => new CompressedTreeNodeWrapper(this.unwrapper, node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(unwrapper, node) {\n        this.unwrapper = unwrapper;\n        this.node = node;\n    }\n}\nfunction mapList(nodeMapper, list) {\n    return {\n        splice(start, deleteCount, toInsert) {\n            list.splice(start, deleteCount, toInsert.map(node => nodeMapper.map(node)));\n        },\n        updateElementHeight(index, height) {\n            list.updateElementHeight(index, height);\n        }\n    };\n}\nfunction mapOptions(compressedNodeUnwrapper, options) {\n    return Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(node) {\n                return options.identityProvider.getId(compressedNodeUnwrapper(node));\n            }\n        }, sorter: options.sorter && {\n            compare(node, otherNode) {\n                return options.sorter.compare(node.elements[0], otherNode.elements[0]);\n            }\n        }, filter: options.filter && {\n            filter(node, parentVisibility) {\n                return options.filter.filter(compressedNodeUnwrapper(node), parentVisibility);\n            }\n        } });\n}\nexport class CompressibleObjectTreeModel {\n    get onDidSplice() {\n        return Event.map(this.model.onDidSplice, ({ insertedNodes, deletedNodes }) => ({\n            insertedNodes: insertedNodes.map(node => this.nodeMapper.map(node)),\n            deletedNodes: deletedNodes.map(node => this.nodeMapper.map(node)),\n        }));\n    }\n    get onDidChangeCollapseState() {\n        return Event.map(this.model.onDidChangeCollapseState, ({ node, deep }) => ({\n            node: this.nodeMapper.map(node),\n            deep\n        }));\n    }\n    get onDidChangeRenderNodeCount() {\n        return Event.map(this.model.onDidChangeRenderNodeCount, node => this.nodeMapper.map(node));\n    }\n    constructor(user, list, options = {}) {\n        this.rootRef = null;\n        this.elementMapper = options.elementMapper || DefaultElementMapper;\n        const compressedNodeUnwrapper = node => this.elementMapper(node.elements);\n        this.nodeMapper = new WeakMapper(node => new CompressedTreeNodeWrapper(compressedNodeUnwrapper, node));\n        this.model = new CompressedObjectTreeModel(user, mapList(this.nodeMapper, list), mapOptions(compressedNodeUnwrapper, options));\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        this.model.setChildren(element, children, options);\n    }\n    setCompressionEnabled(enabled) {\n        this.model.setCompressionEnabled(enabled);\n    }\n    has(location) {\n        return this.model.has(location);\n    }\n    getListIndex(location) {\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(location) {\n        return this.model.getListRenderCount(location);\n    }\n    getNode(location) {\n        return this.nodeMapper.map(this.model.getNode(location));\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(location) {\n        return this.model.getParentNodeLocation(location);\n    }\n    getFirstElementChild(location) {\n        const result = this.model.getFirstElementChild(location);\n        if (result === null || typeof result === 'undefined') {\n            return result;\n        }\n        return this.elementMapper(result.elements);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsed) {\n        return this.model.setCollapsible(location, collapsed);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(location) {\n        return this.model.expandTo(location);\n    }\n    rerender(location) {\n        return this.model.rerender(location);\n    }\n    refilter() {\n        return this.model.refilter();\n    }\n    getCompressedTreeNode(location = null) {\n        return this.model.getNode(location);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AbstractTree } from './abstractTree.js';\nimport { CompressibleObjectTreeModel } from './compressedObjectTreeModel.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTree extends AbstractTree {\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    constructor(user, container, delegate, renderers, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    rerender(element) {\n        if (element === undefined) {\n            this.view.rerender();\n            return;\n        }\n        this.model.rerender(element);\n    }\n    hasElement(element) {\n        return this.model.has(element);\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\nclass CompressibleRenderer {\n    get compressedTreeNodeProvider() {\n        return this._compressedTreeNodeProvider();\n    }\n    constructor(_compressedTreeNodeProvider, renderer) {\n        this._compressedTreeNodeProvider = _compressedTreeNodeProvider;\n        this.renderer = renderer;\n        this.templateId = renderer.templateId;\n        if (renderer.onDidChangeTwistieState) {\n            this.onDidChangeTwistieState = renderer.onDidChangeTwistieState;\n        }\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { compressedTreeNode: undefined, data };\n    }\n    renderElement(node, index, templateData, height) {\n        const compressedTreeNode = this.compressedTreeNodeProvider.getCompressedTreeNode(node.element);\n        if (compressedTreeNode.element.elements.length === 1) {\n            templateData.compressedTreeNode = undefined;\n            this.renderer.renderElement(node, index, templateData.data, height);\n        }\n        else {\n            templateData.compressedTreeNode = compressedTreeNode;\n            this.renderer.renderCompressedElements(compressedTreeNode, index, templateData.data, height);\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b, _c, _d;\n        if (templateData.compressedTreeNode) {\n            (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, templateData.compressedTreeNode, index, templateData.data, height);\n        }\n        else {\n            (_d = (_c = this.renderer).disposeElement) === null || _d === void 0 ? void 0 : _d.call(_c, node, index, templateData.data, height);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.data);\n    }\n    renderTwistie(element, twistieElement) {\n        if (this.renderer.renderTwistie) {\n            return this.renderer.renderTwistie(element, twistieElement);\n        }\n        return false;\n    }\n}\n__decorate([\n    memoize\n], CompressibleRenderer.prototype, \"compressedTreeNodeProvider\", null);\nfunction asObjectTreeOptions(compressedTreeNodeProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            getKeyboardNavigationLabel(e) {\n                let compressedTreeNode;\n                try {\n                    compressedTreeNode = compressedTreeNodeProvider().getCompressedTreeNode(e);\n                }\n                catch (_a) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                if (compressedTreeNode.element.elements.length === 1) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                else {\n                    return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(compressedTreeNode.element.elements);\n                }\n            }\n        } });\n}\nexport class CompressibleObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options = {}) {\n        const compressedTreeNodeProvider = () => this;\n        const compressibleRenderers = renderers.map(r => new CompressibleRenderer(compressedTreeNodeProvider, r));\n        super(user, container, delegate, compressibleRenderers, asObjectTreeOptions(compressedTreeNodeProvider, options));\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    createModel(user, view, options) {\n        return new CompressibleObjectTreeModel(user, view, options);\n    }\n    updateOptions(optionsUpdate = {}) {\n        super.updateOptions(optionsUpdate);\n        if (typeof optionsUpdate.compressionEnabled !== 'undefined') {\n            this.model.setCompressionEnabled(optionsUpdate.compressionEnabled);\n        }\n    }\n    getCompressedTreeNode(element = null) {\n        return this.model.getCompressedTreeNode(element);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IndexTreeModel } from './indexTreeModel.js';\nimport { ObjectTreeElementCollapseState, TreeError } from './tree.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTreeModel {\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.nodesByIdentity = new Map();\n        this.model = new IndexTreeModel(user, list, null, options);\n        this.onDidSplice = this.model.onDidSplice;\n        this.onDidChangeCollapseState = this.model.onDidChangeCollapseState;\n        this.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount;\n        if (options.sorter) {\n            this.sorter = {\n                compare(a, b) {\n                    return options.sorter.compare(a.element, b.element);\n                }\n            };\n        }\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        const location = this.getElementLocation(element);\n        this._setChildren(location, this.preserveCollapseState(children), options);\n    }\n    _setChildren(location, children = Iterable.empty(), options) {\n        const insertedElements = new Set();\n        const insertedElementIds = new Set();\n        const onDidCreateNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            insertedElements.add(tnode.element);\n            this.nodes.set(tnode.element, tnode);\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                insertedElementIds.add(id);\n                this.nodesByIdentity.set(id, tnode);\n            }\n            (_a = options.onDidCreateNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        const onDidDeleteNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            if (!insertedElements.has(tnode.element)) {\n                this.nodes.delete(tnode.element);\n            }\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                if (!insertedElementIds.has(id)) {\n                    this.nodesByIdentity.delete(id);\n                }\n            }\n            (_a = options.onDidDeleteNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        this.model.splice([...location, 0], Number.MAX_VALUE, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    preserveCollapseState(elements = Iterable.empty()) {\n        if (this.sorter) {\n            elements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return Iterable.map(elements, treeElement => {\n            let node = this.nodes.get(treeElement.element);\n            if (!node && this.identityProvider) {\n                const id = this.identityProvider.getId(treeElement.element).toString();\n                node = this.nodesByIdentity.get(id);\n            }\n            if (!node) {\n                let collapsed;\n                if (typeof treeElement.collapsed === 'undefined') {\n                    collapsed = undefined;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n                    collapsed = true;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    collapsed = false;\n                }\n                else {\n                    collapsed = Boolean(treeElement.collapsed);\n                }\n                return Object.assign(Object.assign({}, treeElement), { children: this.preserveCollapseState(treeElement.children), collapsed });\n            }\n            const collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n            let collapsed;\n            if (typeof treeElement.collapsed === 'undefined' || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                collapsed = node.collapsed;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed) {\n                collapsed = true;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded) {\n                collapsed = false;\n            }\n            else {\n                collapsed = Boolean(treeElement.collapsed);\n            }\n            return Object.assign(Object.assign({}, treeElement), { collapsible,\n                collapsed, children: this.preserveCollapseState(treeElement.children) });\n        });\n    }\n    rerender(element) {\n        const location = this.getElementLocation(element);\n        this.model.rerender(location);\n    }\n    getFirstElementChild(ref = null) {\n        const location = this.getElementLocation(ref);\n        return this.model.getFirstElementChild(location);\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListRenderCount(location);\n    }\n    isCollapsible(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(element, collapsible) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(element, collapsed, recursive) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(element) {\n        const location = this.getElementLocation(element);\n        this.model.expandTo(location);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getNode(element = null) {\n        if (element === null) {\n            return this.model.getNode(this.model.rootRef);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(element) {\n        if (element === null) {\n            throw new TreeError(this.user, `Invalid getParentNodeLocation call`);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        const location = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(location);\n        const parent = this.model.getNode(parentLocation);\n        return parent.element;\n    }\n    getElementLocation(element) {\n        if (element === null) {\n            return [];\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return this.model.getNodeLocation(node);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var ObjectTreeElementCollapseState;\n(function (ObjectTreeElementCollapseState) {\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Expanded\"] = 0] = \"Expanded\";\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Collapsed\"] = 1] = \"Collapsed\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, expand it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrExpanded\"] = 2] = \"PreserveOrExpanded\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, collapse it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrCollapsed\"] = 3] = \"PreserveOrCollapsed\";\n})(ObjectTreeElementCollapseState || (ObjectTreeElementCollapseState = {}));\nexport var TreeMouseEventTarget;\n(function (TreeMouseEventTarget) {\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Unknown\"] = 0] = \"Unknown\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Twistie\"] = 1] = \"Twistie\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Element\"] = 2] = \"Element\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Filter\"] = 3] = \"Filter\";\n})(TreeMouseEventTarget || (TreeMouseEventTarget = {}));\nexport class TreeError extends Error {\n    constructor(user, message) {\n        super(`TreeError [${user}] ${message}`);\n    }\n}\nexport class WeakMapper {\n    constructor(fn) {\n        this.fn = fn;\n        this._map = new WeakMap();\n    }\n    map(key) {\n        let result = this._map.get(key);\n        if (!result) {\n            result = this.fn(key);\n            this._map.set(key, result);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../dom.js';\nimport { StandardKeyboardEvent } from '../keyboardEvent.js';\nimport { StandardMouseEvent } from '../mouseEvent.js';\nimport { Gesture } from '../touch.js';\nimport { Disposable } from '../../common/lifecycle.js';\nexport class Widget extends Disposable {\n    onclick(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmousedown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseover(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseleave(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_LEAVE, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onkeydown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    onkeyup(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    oninput(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n    }\n    onblur(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n    }\n    onfocus(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n    }\n    ignoreGesture(domNode) {\n        return Gesture.ignoreTarget(domNode);\n    }\n}\n"],"names":["MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","CSS_DONE","CSS_ACTIVE","CSS_INFINITE","CSS_INFINITE_LONG_RUNNING","CSS_DISCRETE","ProgressBar","_Disposable","_inherits","_super","_createSuper","container","options","_this","_classCallCheck","call","workedVal","showDelayedScheduler","_register","RunOnceScheduler","show","element","longRunningScheduler","infiniteLongRunning","LONG_RUNNING_INFINITE_THRESHOLD","create","_createClass","key","value","this","document","createElement","classList","add","setAttribute","appendChild","bit","style","backgroundColor","progressBarBackground","width","opacity","remove","totalWork","undefined","cancel","doDone","delayed","_this2","contains","setTimeout","off","schedule","Disposable","ResizableHTMLElement","currentSize","_onDidWillResize","Emitter","onDidWillResize","event","_onDidResize","onDidResize","_sashListener","DisposableStore","_size","Dimension","_minSize","_maxSize","Number","MAX_SAFE_INTEGER","domNode","_eastSash","Sash","getVerticalSashLeft","orientation","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","North","_southSash","height","South","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","Event","any","onDidStart","fire","onDidEnd","dimension","done","onDidChange","e","currentX","startX","layout","east","west","currentY","startY","north","south","onDidReset","_preferredSize","dispose","state","arguments","length","size","_this$_minSize","minHeight","minWidth","_this$_maxSize","maxHeight","maxWidth","Math","max","min","newSize","equals","clearSashHoverState","get","set","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","onDidChangeGlobalSize","onDidChangeHoverDelay","MouseEventFactory","disposables","DomEmitter","window","memoize","prototype","GestureEventFactory","el","EventType","Change","End","OrthogonalPointerEventFactory","factory","onPointerMove","onPointerUp","PointerEventsDisabledCssClass","layoutProvider","hoverDelay","hoverDelayer","Delayer","_state","onDidEnablementChange","_onDidStart","_onDidChange","_onDidReset","_onDidEnd","orthogonalStartSashDisposables","orthogonalStartDragHandleDisposables","orthogonalEndSashDisposables","orthogonalEndDragHandleDisposables","linkedSash","append","$","concat","isMacintosh","onMouseDown","onPointerStart","_assertThisInitialized","onMouseDoubleClick","onPointerDoublePress","onMouseEnter","onMouseLeave","Gesture","addTarget","onTouchStart","Start","onTap","Tap","doubleTapTimeout","clearTimeout","delay","toggle","_orthogonalStartSash","sash","clear","onChange","_orthogonalStartDragHandle","toDisposable","_orthogonalEndSash","_this3","_orthogonalEndDragHandle","pointerEventFactory","_this4","EventHelper","stop","isMultisashResize","__orthogonalSashEvent","orthogonalSash","getOrthogonalSash","__linkedSashEvent","_step","iframes","getElementsByTagName","_iterator","_createForOfIteratorHelper","s","n","err","f","pageX","pageY","altKey","startEvent","createStyleSheet","updateStyle","cursor","textContent","removeChild","_step2","_iterator2","verticalProvider","left","getVerticalSashTop","top","getVerticalSashHeight","horizontalProvider","getHorizontalSashLeft","getHorizontalSashWidth","_a","initialTarget","HTMLElement","_get","_getPrototypeOf","fromLinkedSash","trigger","then","ARROW_IMG_SIZE","ScrollbarArrow","_Widget","opts","_this$domNode$classLi","_onActivate","onActivate","bgDomNode","className","position","bgWidth","bgHeight","bottom","right","apply","_toConsumableArray","ThemeIcon","asClassNameArray","icon","_pointerMoveMonitor","GlobalPointerMoveMonitor","dom","addStandardDisposableListener","POINTER_DOWN","_arrowPointerDown","_pointerdownRepeatTimer","IntervalTimer","_pointerdownScheduleRepeatTimer","TimeoutTimer","Element","cancelAndSet","startMonitoring","pointerId","buttons","pointerMoveData","preventDefault","Widget","ScrollbarVisibilityController","visibility","visibleClassName","invisibleClassName","_visibility","_visibleClassName","_invisibleClassName","_domNode","_isVisible","_isNeeded","_rawShouldBeVisible","_shouldBeVisible","_revealTimer","_updateShouldBeVisible","rawShouldBeVisible","shouldBeVisible","_applyVisibilitySetting","ensureVisibility","isNeeded","setClassName","setShouldBeVisible","_reveal","_hide","setIfNotSet","withFadeAway","AbstractScrollbar","_lazyRender","lazyRender","_host","host","_scrollable","scrollable","_scrollByPage","scrollByPage","_scrollbarState","scrollbarState","_visibilityController","extraScrollbarClassName","setIsNeeded","_shouldRender","createFastDomNode","setDomNode","setPosition","addDisposableListener","_domNodePointerDown","arrow","slider","setTop","setLeft","setWidth","setHeight","setLayerHinting","setContain","button","_sliderPointerDown","onclick","leftButton","stopPropagation","visibleSize","setVisibleSize","render","elementScrollSize","setScrollSize","elementScrollPosition","setScrollPosition","_renderDomNode","getRectangleLargeSize","getRectangleSmallSize","_updateSlider","getSliderSize","getArrowSize","getSliderPosition","_onPointerDown","domTop","getClientRects","sliderStart","sliderStop","pointerPos","_sliderPointerPosition","offsetX","offsetY","domNodePosition","getDomNodePagePosition","offset","_pointerDownRelativePosition","_setDesiredScrollPositionNow","getDesiredScrollPositionFromOffsetPaged","getDesiredScrollPositionFromOffset","initialPointerPosition","initialPointerOrthogonalPosition","_sliderOrthogonalPointerPosition","initialScrollbarState","clone","toggleClassName","pointerOrthogonalPosition","pointerOrthogonalDelta","abs","platform","getScrollPosition","pointerDelta","getDesiredScrollPositionFromDelta","onDragEnd","onDragStart","_desiredScrollPosition","desiredScrollPosition","writeScrollPosition","setScrollPositionNow","scrollbarSize","_updateScrollbarSize","setScrollbarSize","ScrollbarState","arrowSize","oppositeScrollbarSize","scrollSize","scrollPosition","_scrollbarSize","round","_oppositeScrollbarSize","_arrowSize","_visibleSize","_scrollSize","_scrollPosition","_computedAvailableSize","_computedIsNeeded","_computedSliderSize","_computedSliderRatio","_computedSliderPosition","_refreshComputedValues","iVisibleSize","iScrollSize","iScrollPosition","_computeValues","computedAvailableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","desiredSliderPosition","correctedOffset","delta","computedRepresentableSize","floor","HorizontalScrollbar","_AbstractScrollbar","scrollDimensions","getScrollDimensions","getCurrentScrollPosition","horizontalHasArrows","horizontal","horizontalScrollbarSize","vertical","verticalScrollbarSize","scrollWidth","scrollLeft","arrowDelta","scrollbarDelta","_createArrow","Codicon","scrollbarButtonLeft","onMouseWheel","StandardWheelEvent","scrollbarButtonRight","_createSlider","horizontalSliderSize","sliderSize","sliderPosition","largeSize","smallSize","setBottom","_onElementScrollSize","_onElementScrollPosition","_onElementSize","updateScrollbarSize","setOppositeScrollbarSize","setVisibility","VerticalScrollbar","verticalHasArrows","scrollHeight","scrollTop","scrollbarButtonUp","scrollbarButtonDown","verticalSliderSize","setRight","MouseWheelClassifierItem","timestamp","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","remainingInfluence","iteration","index","influence","pow","osZoomFactor","devicePixelRatio","getZoomFactor","accept","Date","now","item","_computeScore","_isAlmostInt","INSTANCE","AbstractScrollableElement","_onScroll","onScroll","_onWillScroll","overflow","_options","result","useShadows","handleMouseWheel","flipAxes","consumeMouseWheelIfScrollbarIsNeeded","alwaysConsumeMouseWheel","scrollYToX","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollPredominantAxis","mouseWheelSmoothScroll","listenOnDomNode","resolveOptions","_onDidScroll","scrollbarHost","mouseWheelEvent","_onMouseWheel","_onDragStart","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_leftShadowDomNode","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","onmouseover","_onMouseOver","onmouseleave","_onMouseLeave","_hideTimeout","_isDragging","_mouseIsOver","_revealOnScroll","parent","insertBefore","browserEvent","delegatePointerDown","dimensions","setScrollDimensions","newClassName","newOptions","updateOptions","_render","shouldListen","push","MOUSE_WHEEL","passive","classifier","acceptStandardWheelEvent","didScroll","_ref","shiftConvert","shiftKey","futureScrollPosition","getFutureScrollPosition","deltaScrollTop","desiredScrollTop","ceil","deltaScrollLeft","desiredScrollLeft","validateScrollPosition","isPhysicalMouseWheel","setScrollPositionSmooth","consumeMouseWheel","onDidScroll","Error","scrollState","enableTop","enableLeft","leftClassName","topClassName","topLeftClassName","beginReveal","_scheduleHide","beginHide","ScrollableElement","_AbstractScrollableEl","_super2","Scrollable","forceIntegerValues","smoothScrollDuration","scheduleAtNextAnimationFrame","callback","update","SmoothScrollableElement","_AbstractScrollableEl2","_super3","reuseAnimation","DomScrollableElement","_AbstractScrollableEl3","_super4","_this5","_element","scrollTopChanged","scrollLeftChanged","scanDomNode","clientWidth","clientHeight","SELECT_OPTION_ENTRY_TEMPLATE_ID","SelectListRenderer","data","root","text","detail","decoratorRight","templateData","isDisabled","innerText","_templateData","SelectBoxList","selected","contextViewProvider","styles","selectBoxOptions","_currentSelection","_hasDetails","_skipLayout","_sticky","minBottomMargin","DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN","selectElement","ariaLabel","ariaDescription","_onDidSelect","registerListeners","constructSelectDropDown","setOptions","initStyleSheet","selectDropDownContainer","selectionDetailsPane","widthControlOuterDiv","widthControlInnerDiv","widthControlElement","_dropDownPosition","styleElement","DRAG_START","listIsVisibleOnTouchStart","selectedIndex","title","CLICK","hideSelectDropDown","showSelectDropDown","MOUSE_DOWN","KEY_DOWN","StandardKeyboardEvent","showDropDown","keyCode","arrays","_cachedMaxDetailsHeight","forEach","option","createOption","description","select","selectList","splice","tabIndex","focus","blur","focusable","styleSelectElement","content","listFocusBackground","listFocusForeground","decoratorRightForeground","selectBackground","selectBorder","selectListBorder","listHoverForeground","listHoverBackground","listFocusOutline","listHoverOutline","join","_b","_c","background","foreground","selectForeground","border","color","borderColor","listBackground","asCssValueWithDefault","selectListBackground","selectDropDownListContainer","optionsBorder","focusBorder","outlineColor","outlineOffset","disabled","createSelectList","setOptionsList","showContextView","getAnchor","renderSelectDropDown","layoutSelectDropDown","onHide","anchorPosition","optionsAsChildren","focusSelect","hideContextView","preLayoutPosition","error","_this6","maxDetailsPaneHeight","_option","updateDetail","offsetHeight","selectPosition","getComputedStyle","verticalPadding","parseFloat","getPropertyValue","maxSelectDropDownHeightBelow","innerHeight","maxSelectDropDownHeightAbove","DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN","selectWidth","offsetWidth","selectMinWidth","setWidthControlElement","selectOptimalWidth","toString","getHTMLElement","listHeight","contentHeight","measureMaxDetailsHeight","minRequiredDropDownHeight","maxVisibleOptionsBelow","getHeight","maxVisibleOptionsAbove","DEFAULT_MINIMUM_VISIBLE_OPTIONS","domFocus","setFocus","reveal","getFocus","elementWidth","longest","longestLength","detailLength","rightDecoratorLength","len","getTotalWidth","_this7","listRenderer","List","verticalScrollMode","keyboardSupport","mouseSupport","accessibilityProvider","getAriaLabel","label","getWidgetAriaLabel","localize","comment","getRole","getWidgetRole","onKeyDown","onSelectDropDownKeyDown","chain","filter","map","on","onEnter","onEscape","onUpArrow","onDownArrow","onPageDown","onPageUp","onHome","onEnd","onCharacter","POINTER_UP","onMouseOver","onDidChangeFocus","onListFocus","FOCUS_OUT","isAncestor","relatedTarget","onListBlur","styleList","listRowElement","closest","getAttribute","actionHandler","rendered","renderMarkdown","supportThemeIcons","cleanRenderedMarkdown","childNodes","child","tagName","toLowerCase","indexes","descriptionIsMarkdown","descriptionMarkdownActionHandler","renderDescriptionMarkdown","display","nextOptionDisabled","_this8","focusPreviousPage","_this9","focusNextPage","ch","KeyCodeUtils","optionIndex","charAt","toUpperCase","SelectBoxNative","eventType","showSelect","applyStyles","SelectBox","useCustomDrawn","selectBoxDelegate","onDidSelect","setFocusable","State","Sizing","defaultStyles","separatorBorder","Color","transparent","ViewItem","view","disposable","_cachedVisibleSize","cachedVisibleSize","visible","clamp","viewMinimumSize","viewMaximumSize","setVisible","minimumSize","maximumSize","priority","proportionalLayout","snap","enabled","pointerEvents","layoutContext","layoutContainer","VerticalViewItem","_ViewItem","HorizontalViewItem","_ViewItem2","Distribute","type","Split","Invisible","SplitView","_d","_e","contentSize","proportions","viewItems","sashItems","Idle","_onDidSashChange","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","onDidSashChange","onDidSashReset","inverseAltBehavior","getSashOrthogonalSize","sashContainer","viewContainer","scrollableElement","scrollbarVisibility","onDidScrollViewContainer","_","getDomNode","descriptor","views","viewDescriptor","sizing","types","doAddView","reduce","saveProportions","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeProperty","setProperty","skipLayout","previousSize","total","proportion","range","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","_step3","start","alt","_iterator3","findIndex","combinedDisposable","body","resetSashDragState","sashDragState","current","snapBefore","snapAfter","sizes","minDelta","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","_ref2","_this$sashDragState","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","_step4","_iterator4","indexOf","relayout","Busy","_step5","flexibleViewItems","flexibleSize","_iterator5","_i2","_flexibleViewItems","children","viewSize","onChangeDisposable","onViewChange","containerDisposable","getViewSize","getSashPosition","assign","sashEventMapper","onStartDisposable","onStart","onSashStart","onSashChange","onEndDisposable","onSashEnd","onDidResetDisposable","sashItem","distributeViewSizes","overloadMinDelta","overloadMaxDelta","_step6","_iterator6","pushToStart","_step7","_iterator7","pushToEnd","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","deltaDown","lowPriorityIndex","_step8","emptyDelta","_iterator8","_step9","_iterator9","_step10","_iterator10","updateScrollableElement","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter","_step11","_iterator11","_step12","_iterator12","TableListRenderer","columns","renderers","getColumnSize","templateId","TemplateId","renderedTemplates","Set","rendererMap","Map","column","renderer","rowContainer","cellContainers","cellTemplateData","cellContainer","renderTemplate","cell","project","renderElement","disposeElement","disposeTemplate","clearNode","delete","ColumnHeader","_onDidLayout","onDidLayout","tooltip","minimumWidth","maximumWidth","onDidChangeWidthConstraints","None","Table","user","virtualDelegate","domId","InstanceCount","cachedWidth","cachedHeight","headers","a","b","weight","splitview","headerRowHeight","lineHeight","delegate","list","row","getTemplateId","h","_slicedToArray","layoutColumn","totalWeight","resizeView","unthemedListStyles","onDidChangeSelection","onMouseDblClick","onPointer","onDidFocus","onDidDispose","deleteCount","elements","getSelectedElements","getSelection","unthemedToggleStyles","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","Toggle","_onChange","_onKeyDown","_opts","_checked","isChecked","classes","_icon","actionClassName","split","notFocusable","String","ev","checked","ignoreGesture","onkeydown","keyboardEvent","newIsChecked","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","ToolBar","contextMenuProvider","submenuActionViewItems","hasSecondaryActions","_onDidChangeDropdownVisibility","EventMultiplexer","onDidChangeDropdownVisibility","lookupKeybindings","getKeyBinding","toggleMenuAction","ToggleMenuAction","toggleMenuActionViewItem","toggleMenuTitle","actionBar","ActionBar","actionRunner","allowContextMenu","actionViewItemProvider","action","viewItemOptions","id","ID","DropdownMenuActionViewItem","menuActions","keybindingProvider","classNames","moreIcon","toolBarMore","anchorAlignmentProvider","menuAsChild","renderDropdownAsChildElement","setActionContext","context","onDidChangeVisibility","SubmenuAction","actions","class","indexOrElement","getAction","primaryActions","secondaryActions","primaryActionsToSet","slice","keybinding","getKeybindingLabel","withNullAsUndefined","getLabel","_Action","toggleDropdownMenu","nls","_menuActions","_regeneratorRuntime","mark","_callee","wrap","_context","prev","Action","TreeElementsDragAndDropData","_ElementsDragAndDropD","node","ElementsDragAndDropData","asTreeDragAndDropData","TreeNodeListDragAndDrop","modelProvider","dnd","autoExpandDisposable","getDragURI","nodes","originalEvent","getDragLabel","targetNode","targetIndex","raw","onDragOver","didChangeAutoExpandNode","autoExpandNode","autoExpand","disposableTimeout","model","ref","getNodeLocation","isCollapsed","setCollapsed","bubble","feedback","effect","parentRef","getParentNodeLocation","parentNode","getNode","parentIndex","getListIndex","getListRenderCount","drop","RenderIndentGuides","ComposedTreeDelegate","hasDynamicHeight","setDynamicHeight","EventCollection","_elements","TreeRenderer","onDidChangeCollapseState","activeNodes","renderedIndentGuides","renderedElements","renderedNodes","indent","DefaultIndent","hideTwistiesOfChildlessElements","shouldRenderIndentGuides","activeIndentNodes","indentGuidesDisposable","onDidChangeNodeTwistieState","onDidChangeTwistieState","_step$value","renderTreeElement","renderIndentGuides","_step2$value","_renderIndentGuides","_onDidChangeActiveNodes","twistie","contents","_templateData$twistie","depth","paddingLeft","collapsible","collapsed","removeAttribute","treeItemExpanded","twistieRendered","renderTwistie","visibleChildrenCount","_templateData$twistie2","disposableStore","_loop","guide","has","childElementCount","firstElementChild","line","TreeFindMode","TreeFindMatchType","FindFilter","tree","keyboardNavigationLabelProvider","_filter","_totalCount","_matchCount","_pattern","_lowercasePattern","onWillRefilter","reset","parentVisibility","isFilterResult","getVisibleState","FuzzyScore","Default","getKeyboardNavigationLabel","labels","Array","isArray","l","labelStr","findMatchType","Contiguous","fuzzyScore","firstMatchCanBeWeak","boostFullMatch","findMode","Filter","defaultFindVisibility","unthemedInboxStyles","FindController","_onDidChangeMode","onDidChangeMode","_onDidChangeMatchType","onDidChangeMatchType","_onDidChangePattern","_onDidChangeOpenState","onDidChangeOpenState","enabledDisposables","_mode","defaultFindMode","Highlight","_matchType","defaultFindMatchType","Fuzzy","onDidSplice","onDidSpliceModel","mode","widget","refilter","matchType","optionsUpdate","pattern","noMatches","totalCount","matchCount","showNotFoundMessage","showMessage","clearMessage","isDefault","filterData","_history","asTreeMouseEvent","TreeMouseEventTarget","Unknown","hasParentWithClass","Twistie","dfs","fn","Trait","getFirstViewElementWithTrait","identityProvider","_nodeSet","createNodeSet","__forceEvent","_set","silent","that","nodeSet","insertedNodes","deletedNodes","visit","values","deletedNodesIdSet","deletedNodesVisitor","getId","insertedNodesMap","insertedNodesVisitor","insertedNode","TreeNodeListMouseController","_MouseController","_super6","isButton","isInputElement","isMonacoEditor","isHandledByList","isSelectionRangeChangeEvent","isSelectionSingleChangeEvent","onTwistie","expandOnlyOnTwistieClick","expandOnDoubleClick","location","recursive","toggleCollapsed","MouseController","TreeNodeList","_List","_super7","focusTrait","selectionTrait","anchorTrait","_this10","_this11","anchor","additionalFocus","additionalSelection","distinct","_this12","fromAPI","_this13","AbstractTree","_user","_this14","eventBufferer","EventBufferer","onDidChangeFindOpenState","_onWillRefilter","_onDidUpdateOptions","treeDelegate","onDidChangeCollapseStateRelay","Relay","onDidChangeActiveNodes","SetMap","getFocusedElements","selection","getAnchorElement","multipleSelectionController","getSetSize","getPosInSet","visibleChildIndex","getAriaLevel","getActiveDescendantId","createModel","input","onDidModelSplice","bufferEvents","debounce","getNodes","onLeftArrow","onRightArrow","onSpace","findWidgetEnabled","findWidgetStyles","findController","focusNavigationFilter","shouldAllowFocus","onDidChangeFindMode","onDidChangeFindMatchType","Always","wrapEvent","signal","findFuzzy","isNumber","suffix","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","getFirstElementChild","isCollapsible","setCollapsible","_this15","setSelection","_this16","relativeTop","expandTo","parentLocation","parentListIndex","some","_this$view$getFocus","firstChildIndex","createAsyncDataTreeNode","props","refreshPromise","stale","slow","collapsedByDefault","ancestor","descendant","intersects","other","AsyncDataTreeNodeWrapper","AsyncDataTreeRenderer","nodeMapper","twistieElement","_twistieElement$class","_twistieElement$class2","treeItemLoading","asTreeEvent","AsyncDataTreeElementsDragAndDropData","asAsyncDataTreeDragAndDropData","AsyncDataTreeNodeListDragAndDrop","asObjectTreeOptions","collapseByDefault","sorter","hasChildren","AsyncDataTree","dataSource","subTreeRefreshPromises","refreshPromises","_onDidRender","_onDidChangeNodeSlowState","WeakMapper","autoExpandSingleChildren","createTree","_onDidChangeCollapseState","onDidChangeModel","objectTreeDelegate","objectTreeRenderers","objectTreeOptions","ObjectTree","viewState","viewStateContext","promise","_updateChildren","rerender","_callee2","_context2","TreeError","toPromise","getDataNode","refreshAndRenderNode","dataNode","collapse","_callee3","_context3","hasElement","abrupt","expand","getParentElement","_callee4","_context4","refreshNode","_callee5","_context5","doRefreshSubTree","_callee6","childrenToRefresh","_context6","finally","doRefreshNode","sent","Promises","settled","finish","_callee7","childrenPromise","slowTimeout","_children","_context7","doGetChildren","isIterable","timeout","Iterable","empty","setChildren","t0","isCancellationError","getChildren","processChildren","createCancelablePromise","_callee8","_context8","t1","deep","catch","onUnexpectedError","childrenElementsIterable","_node$children","childrenElements","nodesToForget","childrenTreeNodesById","asyncDataTreeNode","childAsyncDataTreeNode","expanded","asTreeElement","diffIdentityProvider","sort","compare","bind","CompressibleAsyncDataTreeNodeWrapper","incompressible","CompressibleAsyncDataTreeRenderer","compressibleNodeMapperProvider","renderCompressedElements","_twistieElement$class3","_twistieElement$class4","disposeCompressedElements","CompressibleAsyncDataTree","_AsyncDataTree","compressionDelegate","compressibleNodeMapper","getCompressedNodeKeyboardNavigationLabel","els","asCompressibleObjectTreeOptions","CompressibleObjectTree","isIncompressible","getUncompressedIds","compressedNode","getCompressedTreeNode","oldSelection","oldFocus","didChangeSelection","didChangeFocus","filterResult","DataTree","_AbstractTree","ObjectTreeModel","obj","isCollapsibleStateUpdate","IndexTreeModel","rootElement","rootRef","_onDidChangeRenderNodeCount","onDidChangeRenderNodeCount","_onDidSplice","refilterDelayer","MicrotaskDelay","renderNodeCount","toInsert","spliceSmart","spliceSimple","identity","toInsertIterable","recurseLevels","diffDepth","getParentNodeWithListIndex","lastDiffIds","diff","LcsDiff","getElements","ComputeDiff","quitEarly","locationPrefix","recurseSplice","fromOriginal","fromModified","count","lastStartO","lastStartM","changes","originalStart","change","originalLength","modifiedStart","modifiedLength","onDidCreateNode","onDidDeleteNode","_this$getParentNodeWi2","listIndex","revealed","treeListElementsToInsert","nodesToInsertIterator","createTreeNode","lastIndex","lastHadChildren","visibleChildStartIndex","nodesToInsert","insertedVisibleChildrenCount","deletedVisibleChildrenCount","visibleDeleteCount","_updateAncestorsRenderNodeCount","currentlyHasChildren","_this$getTreeNodeWith","getTreeNodeWithListIndex","hasTreeNode","_this$getTreeNodeWith2","getTreeNode","_setCollapseState","_this$getTreeNodeWith3","_setListNodeCollapseState","onlyVisibleChildIndex","_setNodeCollapseState","previousRenderNodeCount","updateNodeAfterCollapseChange","updateNodeAfterFilterChange","treeElement","treeListElements","_filterNode","childElements","childRevealed","pop","_updateNodeAfterCollapseChange","_updateNodeAfterFilterChange","resultStartLength","hasVisibleDescendants","_location","_toArray","rest","_location2","_this$getParentNodeWi3","_location3","indexTreeNode","tail2","noCompress","from","compress","childrenIterator","_Iterable$consume","consume","_Iterable$consume2","_decompress","decompress","CompressedObjectTreeModel","compressionEnabled","base","compressedParentNode","splicedElement","recompressedElement","parentChildren","_setChildren","compressedChildren","Infinity","rootChildren","decompressedRootChildren","recompressedRootChildren","insertedElements","getCompressedNode","DefaultElementMapper","CompressedTreeNodeWrapper","unwrapper","CompressibleObjectTreeModel","elementMapper","compressedNodeUnwrapper","updateElementHeight","mapList","otherNode","mapOptions","setCompressionEnabled","CompressibleRenderer","_compressedTreeNodeProvider","compressedTreeNode","compressedTreeNodeProvider","_ObjectTree","compressibleRenderers","nodesByIdentity","getElementLocation","preserveCollapseState","insertedElementIds","MAX_VALUE","tnode","ObjectTreeElementCollapseState","Collapsed","PreserveOrCollapsed","Expanded","PreserveOrExpanded","Boolean","_Error","message","_wrapNativeSuper","_map","WeakMap","listener","StandardMouseEvent","MOUSE_OVER","MOUSE_LEAVE","KEY_UP","INPUT","BLUR","FOCUS","ignoreTarget"],"sourceRoot":""}