{"version":3,"file":"static/js/monaco-editor-vendor.11aab2e7.ab685af3.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/config/domFontInfo.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/migrateOptions.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/editorConfiguration.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/elementSizeObserver.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/charWidthReader.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/fontMeasurements.js","../node_modules/monaco-editor/esm/vs/editor/browser/config/tabFocus.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseTarget.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/pointerHandler.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaHandler.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaInput.js","../node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaState.js","../node_modules/monaco-editor/esm/vs/editor/browser/coreCommands.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { FastDomNode } from '../../../base/browser/fastDomNode.js';\nexport function applyFontInfo(domNode, fontInfo) {\n    if (domNode instanceof FastDomNode) {\n        domNode.setFontFamily(fontInfo.getMassagedFontFamily());\n        domNode.setFontWeight(fontInfo.fontWeight);\n        domNode.setFontSize(fontInfo.fontSize);\n        domNode.setFontFeatureSettings(fontInfo.fontFeatureSettings);\n        domNode.setFontVariationSettings(fontInfo.fontVariationSettings);\n        domNode.setLineHeight(fontInfo.lineHeight);\n        domNode.setLetterSpacing(fontInfo.letterSpacing);\n    }\n    else {\n        domNode.style.fontFamily = fontInfo.getMassagedFontFamily();\n        domNode.style.fontWeight = fontInfo.fontWeight;\n        domNode.style.fontSize = fontInfo.fontSize + 'px';\n        domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        domNode.style.fontVariationSettings = fontInfo.fontVariationSettings;\n        domNode.style.lineHeight = fontInfo.lineHeight + 'px';\n        domNode.style.letterSpacing = fontInfo.letterSpacing + 'px';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class EditorSettingMigration {\n    constructor(key, migrate) {\n        this.key = key;\n        this.migrate = migrate;\n    }\n    apply(options) {\n        const value = EditorSettingMigration._read(options, this.key);\n        const read = (key) => EditorSettingMigration._read(options, key);\n        const write = (key, value) => EditorSettingMigration._write(options, key, value);\n        this.migrate(value, read, write);\n    }\n    static _read(source, key) {\n        if (typeof source === 'undefined') {\n            return undefined;\n        }\n        const firstDotIndex = key.indexOf('.');\n        if (firstDotIndex >= 0) {\n            const firstSegment = key.substring(0, firstDotIndex);\n            return this._read(source[firstSegment], key.substring(firstDotIndex + 1));\n        }\n        return source[key];\n    }\n    static _write(target, key, value) {\n        const firstDotIndex = key.indexOf('.');\n        if (firstDotIndex >= 0) {\n            const firstSegment = key.substring(0, firstDotIndex);\n            target[firstSegment] = target[firstSegment] || {};\n            this._write(target[firstSegment], key.substring(firstDotIndex + 1), value);\n            return;\n        }\n        target[key] = value;\n    }\n}\nEditorSettingMigration.items = [];\nfunction registerEditorSettingMigration(key, migrate) {\n    EditorSettingMigration.items.push(new EditorSettingMigration(key, migrate));\n}\nfunction registerSimpleEditorSettingMigration(key, values) {\n    registerEditorSettingMigration(key, (value, read, write) => {\n        if (typeof value !== 'undefined') {\n            for (const [oldValue, newValue] of values) {\n                if (value === oldValue) {\n                    write(key, newValue);\n                    return;\n                }\n            }\n        }\n    });\n}\n/**\n * Compatibility with old options\n */\nexport function migrateOptions(options) {\n    EditorSettingMigration.items.forEach(migration => migration.apply(options));\n}\nregisterSimpleEditorSettingMigration('wordWrap', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('lineNumbers', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('cursorBlinking', [['visible', 'solid']]);\nregisterSimpleEditorSettingMigration('renderWhitespace', [[true, 'boundary'], [false, 'none']]);\nregisterSimpleEditorSettingMigration('renderLineHighlight', [[true, 'line'], [false, 'none']]);\nregisterSimpleEditorSettingMigration('acceptSuggestionOnEnter', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('tabCompletion', [[false, 'off'], [true, 'onlySnippets']]);\nregisterSimpleEditorSettingMigration('hover', [[true, { enabled: true }], [false, { enabled: false }]]);\nregisterSimpleEditorSettingMigration('parameterHints', [[true, { enabled: true }], [false, { enabled: false }]]);\nregisterSimpleEditorSettingMigration('autoIndent', [[false, 'advanced'], [true, 'full']]);\nregisterSimpleEditorSettingMigration('matchBrackets', [[true, 'always'], [false, 'never']]);\nregisterSimpleEditorSettingMigration('renderFinalNewline', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('cursorSmoothCaretAnimation', [[true, 'on'], [false, 'off']]);\nregisterEditorSettingMigration('autoClosingBrackets', (value, read, write) => {\n    if (value === false) {\n        write('autoClosingBrackets', 'never');\n        if (typeof read('autoClosingQuotes') === 'undefined') {\n            write('autoClosingQuotes', 'never');\n        }\n        if (typeof read('autoSurround') === 'undefined') {\n            write('autoSurround', 'never');\n        }\n    }\n});\nregisterEditorSettingMigration('renderIndentGuides', (value, read, write) => {\n    if (typeof value !== 'undefined') {\n        write('renderIndentGuides', undefined);\n        if (typeof read('guides.indentation') === 'undefined') {\n            write('guides.indentation', !!value);\n        }\n    }\n});\nregisterEditorSettingMigration('highlightActiveIndentGuide', (value, read, write) => {\n    if (typeof value !== 'undefined') {\n        write('highlightActiveIndentGuide', undefined);\n        if (typeof read('guides.highlightActiveIndentation') === 'undefined') {\n            write('guides.highlightActiveIndentation', !!value);\n        }\n    }\n});\nconst suggestFilteredTypesMapping = {\n    method: 'showMethods',\n    function: 'showFunctions',\n    constructor: 'showConstructors',\n    deprecated: 'showDeprecated',\n    field: 'showFields',\n    variable: 'showVariables',\n    class: 'showClasses',\n    struct: 'showStructs',\n    interface: 'showInterfaces',\n    module: 'showModules',\n    property: 'showProperties',\n    event: 'showEvents',\n    operator: 'showOperators',\n    unit: 'showUnits',\n    value: 'showValues',\n    constant: 'showConstants',\n    enum: 'showEnums',\n    enumMember: 'showEnumMembers',\n    keyword: 'showKeywords',\n    text: 'showWords',\n    color: 'showColors',\n    file: 'showFiles',\n    reference: 'showReferences',\n    folder: 'showFolders',\n    typeParameter: 'showTypeParameters',\n    snippet: 'showSnippets',\n};\nregisterEditorSettingMigration('suggest.filteredTypes', (value, read, write) => {\n    if (value && typeof value === 'object') {\n        for (const entry of Object.entries(suggestFilteredTypesMapping)) {\n            const v = value[entry[0]];\n            if (v === false) {\n                if (typeof read(`suggest.${entry[1]}`) === 'undefined') {\n                    write(`suggest.${entry[1]}`, false);\n                }\n            }\n        }\n        write('suggest.filteredTypes', undefined);\n    }\n});\nregisterEditorSettingMigration('quickSuggestions', (input, read, write) => {\n    if (typeof input === 'boolean') {\n        const value = input ? 'on' : 'off';\n        const newValue = { comments: value, strings: value, other: value };\n        write('quickSuggestions', newValue);\n    }\n});\n// Sticky Scroll\nregisterEditorSettingMigration('experimental.stickyScroll.enabled', (value, read, write) => {\n    if (typeof value === 'boolean') {\n        write('experimental.stickyScroll.enabled', undefined);\n        if (typeof read('stickyScroll.enabled') === 'undefined') {\n            write('stickyScroll.enabled', value);\n        }\n    }\n});\nregisterEditorSettingMigration('experimental.stickyScroll.maxLineCount', (value, read, write) => {\n    if (typeof value === 'number') {\n        write('experimental.stickyScroll.maxLineCount', undefined);\n        if (typeof read('stickyScroll.maxLineCount') === 'undefined') {\n            write('stickyScroll.maxLineCount', value);\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as browser from '../../../base/browser/browser.js';\nimport * as arrays from '../../../base/common/arrays.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { ElementSizeObserver } from './elementSizeObserver.js';\nimport { FontMeasurements } from './fontMeasurements.js';\nimport { migrateOptions } from './migrateOptions.js';\nimport { TabFocus } from './tabFocus.js';\nimport { ComputeOptionsMemory, ConfigurationChangedEvent, editorOptionsRegistry } from '../../common/config/editorOptions.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { BareFontInfo } from '../../common/config/fontInfo.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nexport let EditorConfiguration = class EditorConfiguration extends Disposable {\n    constructor(isSimpleWidget, options, container, _accessibilityService) {\n        super();\n        this._accessibilityService = _accessibilityService;\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidChangeFast = this._register(new Emitter());\n        this.onDidChangeFast = this._onDidChangeFast.event;\n        this._isDominatedByLongLines = false;\n        this._viewLineCount = 1;\n        this._lineNumbersDigitCount = 1;\n        this._reservedHeight = 0;\n        this._glyphMarginDecorationLaneCount = 1;\n        this._computeOptionsMemory = new ComputeOptionsMemory();\n        this.isSimpleWidget = isSimpleWidget;\n        this._containerObserver = this._register(new ElementSizeObserver(container, options.dimension));\n        this._rawOptions = deepCloneAndMigrateOptions(options);\n        this._validatedOptions = EditorOptionsUtil.validateOptions(this._rawOptions);\n        this.options = this._computeOptions();\n        if (this.options.get(11 /* EditorOption.automaticLayout */)) {\n            this._containerObserver.startObserving();\n        }\n        this._register(EditorZoom.onDidChangeZoomLevel(() => this._recomputeOptions()));\n        this._register(TabFocus.onDidChangeTabFocus(() => this._recomputeOptions()));\n        this._register(this._containerObserver.onDidChange(() => this._recomputeOptions()));\n        this._register(FontMeasurements.onDidChange(() => this._recomputeOptions()));\n        this._register(browser.PixelRatio.onDidChange(() => this._recomputeOptions()));\n        this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(() => this._recomputeOptions()));\n    }\n    _recomputeOptions() {\n        const newOptions = this._computeOptions();\n        const changeEvent = EditorOptionsUtil.checkEquals(this.options, newOptions);\n        if (changeEvent === null) {\n            // nothing changed!\n            return;\n        }\n        this.options = newOptions;\n        this._onDidChangeFast.fire(changeEvent);\n        this._onDidChange.fire(changeEvent);\n    }\n    _computeOptions() {\n        const partialEnv = this._readEnvConfiguration();\n        const bareFontInfo = BareFontInfo.createFromValidatedSettings(this._validatedOptions, partialEnv.pixelRatio, this.isSimpleWidget);\n        const fontInfo = this._readFontInfo(bareFontInfo);\n        const env = {\n            memory: this._computeOptionsMemory,\n            outerWidth: partialEnv.outerWidth,\n            outerHeight: partialEnv.outerHeight - this._reservedHeight,\n            fontInfo: fontInfo,\n            extraEditorClassName: partialEnv.extraEditorClassName,\n            isDominatedByLongLines: this._isDominatedByLongLines,\n            viewLineCount: this._viewLineCount,\n            lineNumbersDigitCount: this._lineNumbersDigitCount,\n            emptySelectionClipboard: partialEnv.emptySelectionClipboard,\n            pixelRatio: partialEnv.pixelRatio,\n            tabFocusMode: TabFocus.getTabFocusMode(\"editorFocus\" /* TabFocusContext.Editor */),\n            accessibilitySupport: partialEnv.accessibilitySupport,\n            glyphMarginDecorationLaneCount: this._glyphMarginDecorationLaneCount\n        };\n        return EditorOptionsUtil.computeOptions(this._validatedOptions, env);\n    }\n    _readEnvConfiguration() {\n        return {\n            extraEditorClassName: getExtraEditorClassName(),\n            outerWidth: this._containerObserver.getWidth(),\n            outerHeight: this._containerObserver.getHeight(),\n            emptySelectionClipboard: browser.isWebKit || browser.isFirefox,\n            pixelRatio: browser.PixelRatio.value,\n            accessibilitySupport: (this._accessibilityService.isScreenReaderOptimized()\n                ? 2 /* AccessibilitySupport.Enabled */\n                : this._accessibilityService.getAccessibilitySupport())\n        };\n    }\n    _readFontInfo(bareFontInfo) {\n        return FontMeasurements.readFontInfo(bareFontInfo);\n    }\n    getRawOptions() {\n        return this._rawOptions;\n    }\n    updateOptions(_newOptions) {\n        const newOptions = deepCloneAndMigrateOptions(_newOptions);\n        const didChange = EditorOptionsUtil.applyUpdate(this._rawOptions, newOptions);\n        if (!didChange) {\n            return;\n        }\n        this._validatedOptions = EditorOptionsUtil.validateOptions(this._rawOptions);\n        this._recomputeOptions();\n    }\n    observeContainer(dimension) {\n        this._containerObserver.observe(dimension);\n    }\n    setIsDominatedByLongLines(isDominatedByLongLines) {\n        if (this._isDominatedByLongLines === isDominatedByLongLines) {\n            return;\n        }\n        this._isDominatedByLongLines = isDominatedByLongLines;\n        this._recomputeOptions();\n    }\n    setModelLineCount(modelLineCount) {\n        const lineNumbersDigitCount = digitCount(modelLineCount);\n        if (this._lineNumbersDigitCount === lineNumbersDigitCount) {\n            return;\n        }\n        this._lineNumbersDigitCount = lineNumbersDigitCount;\n        this._recomputeOptions();\n    }\n    setViewLineCount(viewLineCount) {\n        if (this._viewLineCount === viewLineCount) {\n            return;\n        }\n        this._viewLineCount = viewLineCount;\n        this._recomputeOptions();\n    }\n    setReservedHeight(reservedHeight) {\n        if (this._reservedHeight === reservedHeight) {\n            return;\n        }\n        this._reservedHeight = reservedHeight;\n        this._recomputeOptions();\n    }\n    setGlyphMarginDecorationLaneCount(decorationLaneCount) {\n        if (this._glyphMarginDecorationLaneCount === decorationLaneCount) {\n            return;\n        }\n        this._glyphMarginDecorationLaneCount = decorationLaneCount;\n        this._recomputeOptions();\n    }\n};\nEditorConfiguration = __decorate([\n    __param(3, IAccessibilityService)\n], EditorConfiguration);\nfunction digitCount(n) {\n    let r = 0;\n    while (n) {\n        n = Math.floor(n / 10);\n        r++;\n    }\n    return r ? r : 1;\n}\nfunction getExtraEditorClassName() {\n    let extra = '';\n    if (!browser.isSafari && !browser.isWebkitWebView) {\n        // Use user-select: none in all browsers except Safari and native macOS WebView\n        extra += 'no-user-select ';\n    }\n    if (browser.isSafari) {\n        // See https://github.com/microsoft/vscode/issues/108822\n        extra += 'no-minimap-shadow ';\n        extra += 'enable-user-select ';\n    }\n    if (platform.isMacintosh) {\n        extra += 'mac ';\n    }\n    return extra;\n}\nclass ValidatedEditorOptions {\n    constructor() {\n        this._values = [];\n    }\n    _read(option) {\n        return this._values[option];\n    }\n    get(id) {\n        return this._values[id];\n    }\n    _write(option, value) {\n        this._values[option] = value;\n    }\n}\nexport class ComputedEditorOptions {\n    constructor() {\n        this._values = [];\n    }\n    _read(id) {\n        if (id >= this._values.length) {\n            throw new Error('Cannot read uninitialized value');\n        }\n        return this._values[id];\n    }\n    get(id) {\n        return this._read(id);\n    }\n    _write(id, value) {\n        this._values[id] = value;\n    }\n}\nclass EditorOptionsUtil {\n    static validateOptions(options) {\n        const result = new ValidatedEditorOptions();\n        for (const editorOption of editorOptionsRegistry) {\n            const value = (editorOption.name === '_never_' ? undefined : options[editorOption.name]);\n            result._write(editorOption.id, editorOption.validate(value));\n        }\n        return result;\n    }\n    static computeOptions(options, env) {\n        const result = new ComputedEditorOptions();\n        for (const editorOption of editorOptionsRegistry) {\n            result._write(editorOption.id, editorOption.compute(env, result, options._read(editorOption.id)));\n        }\n        return result;\n    }\n    static _deepEquals(a, b) {\n        if (typeof a !== 'object' || typeof b !== 'object' || !a || !b) {\n            return a === b;\n        }\n        if (Array.isArray(a) || Array.isArray(b)) {\n            return (Array.isArray(a) && Array.isArray(b) ? arrays.equals(a, b) : false);\n        }\n        if (Object.keys(a).length !== Object.keys(b).length) {\n            return false;\n        }\n        for (const key in a) {\n            if (!EditorOptionsUtil._deepEquals(a[key], b[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static checkEquals(a, b) {\n        const result = [];\n        let somethingChanged = false;\n        for (const editorOption of editorOptionsRegistry) {\n            const changed = !EditorOptionsUtil._deepEquals(a._read(editorOption.id), b._read(editorOption.id));\n            result[editorOption.id] = changed;\n            if (changed) {\n                somethingChanged = true;\n            }\n        }\n        return (somethingChanged ? new ConfigurationChangedEvent(result) : null);\n    }\n    /**\n     * Returns true if something changed.\n     * Modifies `options`.\n    */\n    static applyUpdate(options, update) {\n        let changed = false;\n        for (const editorOption of editorOptionsRegistry) {\n            if (update.hasOwnProperty(editorOption.name)) {\n                const result = editorOption.applyUpdate(options[editorOption.name], update[editorOption.name]);\n                options[editorOption.name] = result.newValue;\n                changed = changed || result.didChange;\n            }\n        }\n        return changed;\n    }\n}\nfunction deepCloneAndMigrateOptions(_options) {\n    const options = objects.deepClone(_options);\n    migrateOptions(options);\n    return options;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../base/common/event.js';\nexport class ElementSizeObserver extends Disposable {\n    constructor(referenceDomElement, dimension) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._referenceDomElement = referenceDomElement;\n        this._width = -1;\n        this._height = -1;\n        this._resizeObserver = null;\n        this.measureReferenceDomElement(false, dimension);\n    }\n    dispose() {\n        this.stopObserving();\n        super.dispose();\n    }\n    getWidth() {\n        return this._width;\n    }\n    getHeight() {\n        return this._height;\n    }\n    startObserving() {\n        if (!this._resizeObserver && this._referenceDomElement) {\n            this._resizeObserver = new ResizeObserver((entries) => {\n                if (entries && entries[0] && entries[0].contentRect) {\n                    this.observe({ width: entries[0].contentRect.width, height: entries[0].contentRect.height });\n                }\n                else {\n                    this.observe();\n                }\n            });\n            this._resizeObserver.observe(this._referenceDomElement);\n        }\n    }\n    stopObserving() {\n        if (this._resizeObserver) {\n            this._resizeObserver.disconnect();\n            this._resizeObserver = null;\n        }\n    }\n    observe(dimension) {\n        this.measureReferenceDomElement(true, dimension);\n    }\n    measureReferenceDomElement(emitEvent, dimension) {\n        let observedWidth = 0;\n        let observedHeight = 0;\n        if (dimension) {\n            observedWidth = dimension.width;\n            observedHeight = dimension.height;\n        }\n        else if (this._referenceDomElement) {\n            observedWidth = this._referenceDomElement.clientWidth;\n            observedHeight = this._referenceDomElement.clientHeight;\n        }\n        observedWidth = Math.max(5, observedWidth);\n        observedHeight = Math.max(5, observedHeight);\n        if (this._width !== observedWidth || this._height !== observedHeight) {\n            this._width = observedWidth;\n            this._height = observedHeight;\n            if (emitEvent) {\n                this._onDidChange.fire();\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n    constructor(chr, type) {\n        this.chr = chr;\n        this.type = type;\n        this.width = 0;\n    }\n    fulfill(width) {\n        this.width = width;\n    }\n}\nclass DomCharWidthReader {\n    constructor(bareFontInfo, requests) {\n        this._bareFontInfo = bareFontInfo;\n        this._requests = requests;\n        this._container = null;\n        this._testElements = null;\n    }\n    read() {\n        // Create a test container with all these test elements\n        this._createDomElements();\n        // Add the container to the DOM\n        document.body.appendChild(this._container);\n        // Read character widths\n        this._readFromDomElements();\n        // Remove the container from the DOM\n        document.body.removeChild(this._container);\n        this._container = null;\n        this._testElements = null;\n    }\n    _createDomElements() {\n        const container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.top = '-50000px';\n        container.style.width = '50000px';\n        const regularDomNode = document.createElement('div');\n        applyFontInfo(regularDomNode, this._bareFontInfo);\n        container.appendChild(regularDomNode);\n        const boldDomNode = document.createElement('div');\n        applyFontInfo(boldDomNode, this._bareFontInfo);\n        boldDomNode.style.fontWeight = 'bold';\n        container.appendChild(boldDomNode);\n        const italicDomNode = document.createElement('div');\n        applyFontInfo(italicDomNode, this._bareFontInfo);\n        italicDomNode.style.fontStyle = 'italic';\n        container.appendChild(italicDomNode);\n        const testElements = [];\n        for (const request of this._requests) {\n            let parent;\n            if (request.type === 0 /* CharWidthRequestType.Regular */) {\n                parent = regularDomNode;\n            }\n            if (request.type === 2 /* CharWidthRequestType.Bold */) {\n                parent = boldDomNode;\n            }\n            if (request.type === 1 /* CharWidthRequestType.Italic */) {\n                parent = italicDomNode;\n            }\n            parent.appendChild(document.createElement('br'));\n            const testElement = document.createElement('span');\n            DomCharWidthReader._render(testElement, request);\n            parent.appendChild(testElement);\n            testElements.push(testElement);\n        }\n        this._container = container;\n        this._testElements = testElements;\n    }\n    static _render(testElement, request) {\n        if (request.chr === ' ') {\n            let htmlString = '\\u00a0';\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                htmlString += htmlString;\n            }\n            testElement.innerText = htmlString;\n        }\n        else {\n            let testString = request.chr;\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                testString += testString;\n            }\n            testElement.textContent = testString;\n        }\n    }\n    _readFromDomElements() {\n        for (let i = 0, len = this._requests.length; i < len; i++) {\n            const request = this._requests[i];\n            const testElement = this._testElements[i];\n            request.fulfill(testElement.offsetWidth / 256);\n        }\n    }\n}\nexport function readCharWidths(bareFontInfo, requests) {\n    const reader = new DomCharWidthReader(bareFontInfo, requests);\n    reader.read();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../base/browser/browser.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CharWidthRequest, readCharWidths } from './charWidthReader.js';\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\nimport { FontInfo } from '../../common/config/fontInfo.js';\nexport class FontMeasurementsImpl extends Disposable {\n    constructor() {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._cache = new FontMeasurementsCache();\n        this._evictUntrustedReadingsTimeout = -1;\n    }\n    dispose() {\n        if (this._evictUntrustedReadingsTimeout !== -1) {\n            window.clearTimeout(this._evictUntrustedReadingsTimeout);\n            this._evictUntrustedReadingsTimeout = -1;\n        }\n        super.dispose();\n    }\n    /**\n     * Clear all cached font information and trigger a change event.\n     */\n    clearAllFontInfos() {\n        this._cache = new FontMeasurementsCache();\n        this._onDidChange.fire();\n    }\n    _writeToCache(item, value) {\n        this._cache.put(item, value);\n        if (!value.isTrusted && this._evictUntrustedReadingsTimeout === -1) {\n            // Try reading again after some time\n            this._evictUntrustedReadingsTimeout = window.setTimeout(() => {\n                this._evictUntrustedReadingsTimeout = -1;\n                this._evictUntrustedReadings();\n            }, 5000);\n        }\n    }\n    _evictUntrustedReadings() {\n        const values = this._cache.getValues();\n        let somethingRemoved = false;\n        for (const item of values) {\n            if (!item.isTrusted) {\n                somethingRemoved = true;\n                this._cache.remove(item);\n            }\n        }\n        if (somethingRemoved) {\n            this._onDidChange.fire();\n        }\n    }\n    /**\n     * Read font information.\n     */\n    readFontInfo(bareFontInfo) {\n        if (!this._cache.has(bareFontInfo)) {\n            let readConfig = this._actualReadFontInfo(bareFontInfo);\n            if (readConfig.typicalHalfwidthCharacterWidth <= 2 || readConfig.typicalFullwidthCharacterWidth <= 2 || readConfig.spaceWidth <= 2 || readConfig.maxDigitWidth <= 2) {\n                // Hey, it's Bug 14341 ... we couldn't read\n                readConfig = new FontInfo({\n                    pixelRatio: browser.PixelRatio.value,\n                    fontFamily: readConfig.fontFamily,\n                    fontWeight: readConfig.fontWeight,\n                    fontSize: readConfig.fontSize,\n                    fontFeatureSettings: readConfig.fontFeatureSettings,\n                    fontVariationSettings: readConfig.fontVariationSettings,\n                    lineHeight: readConfig.lineHeight,\n                    letterSpacing: readConfig.letterSpacing,\n                    isMonospace: readConfig.isMonospace,\n                    typicalHalfwidthCharacterWidth: Math.max(readConfig.typicalHalfwidthCharacterWidth, 5),\n                    typicalFullwidthCharacterWidth: Math.max(readConfig.typicalFullwidthCharacterWidth, 5),\n                    canUseHalfwidthRightwardsArrow: readConfig.canUseHalfwidthRightwardsArrow,\n                    spaceWidth: Math.max(readConfig.spaceWidth, 5),\n                    middotWidth: Math.max(readConfig.middotWidth, 5),\n                    wsmiddotWidth: Math.max(readConfig.wsmiddotWidth, 5),\n                    maxDigitWidth: Math.max(readConfig.maxDigitWidth, 5),\n                }, false);\n            }\n            this._writeToCache(bareFontInfo, readConfig);\n        }\n        return this._cache.get(bareFontInfo);\n    }\n    _createRequest(chr, type, all, monospace) {\n        const result = new CharWidthRequest(chr, type);\n        all.push(result);\n        monospace === null || monospace === void 0 ? void 0 : monospace.push(result);\n        return result;\n    }\n    _actualReadFontInfo(bareFontInfo) {\n        const all = [];\n        const monospace = [];\n        const typicalHalfwidthCharacter = this._createRequest('n', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const typicalFullwidthCharacter = this._createRequest('\\uff4d', 0 /* CharWidthRequestType.Regular */, all, null);\n        const space = this._createRequest(' ', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit0 = this._createRequest('0', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit1 = this._createRequest('1', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit2 = this._createRequest('2', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit3 = this._createRequest('3', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit4 = this._createRequest('4', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit5 = this._createRequest('5', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit6 = this._createRequest('6', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit7 = this._createRequest('7', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit8 = this._createRequest('8', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit9 = this._createRequest('9', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        // monospace test: used for whitespace rendering\n        const rightwardsArrow = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const halfwidthRightwardsArrow = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, null);\n        // U+00B7 - MIDDLE DOT\n        const middot = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        // U+2E31 - WORD SEPARATOR MIDDLE DOT\n        const wsmiddotWidth = this._createRequest(String.fromCharCode(0x2E31), 0 /* CharWidthRequestType.Regular */, all, null);\n        // monospace test: some characters\n        const monospaceTestChars = '|/-_ilm%';\n        for (let i = 0, len = monospaceTestChars.length; i < len; i++) {\n            this._createRequest(monospaceTestChars.charAt(i), 0 /* CharWidthRequestType.Regular */, all, monospace);\n            this._createRequest(monospaceTestChars.charAt(i), 1 /* CharWidthRequestType.Italic */, all, monospace);\n            this._createRequest(monospaceTestChars.charAt(i), 2 /* CharWidthRequestType.Bold */, all, monospace);\n        }\n        readCharWidths(bareFontInfo, all);\n        const maxDigitWidth = Math.max(digit0.width, digit1.width, digit2.width, digit3.width, digit4.width, digit5.width, digit6.width, digit7.width, digit8.width, digit9.width);\n        let isMonospace = (bareFontInfo.fontFeatureSettings === EditorFontLigatures.OFF);\n        const referenceWidth = monospace[0].width;\n        for (let i = 1, len = monospace.length; isMonospace && i < len; i++) {\n            const diff = referenceWidth - monospace[i].width;\n            if (diff < -0.001 || diff > 0.001) {\n                isMonospace = false;\n                break;\n            }\n        }\n        let canUseHalfwidthRightwardsArrow = true;\n        if (isMonospace && halfwidthRightwardsArrow.width !== referenceWidth) {\n            // using a halfwidth rightwards arrow would break monospace...\n            canUseHalfwidthRightwardsArrow = false;\n        }\n        if (halfwidthRightwardsArrow.width > rightwardsArrow.width) {\n            // using a halfwidth rightwards arrow would paint a larger arrow than a regular rightwards arrow\n            canUseHalfwidthRightwardsArrow = false;\n        }\n        return new FontInfo({\n            pixelRatio: browser.PixelRatio.value,\n            fontFamily: bareFontInfo.fontFamily,\n            fontWeight: bareFontInfo.fontWeight,\n            fontSize: bareFontInfo.fontSize,\n            fontFeatureSettings: bareFontInfo.fontFeatureSettings,\n            fontVariationSettings: bareFontInfo.fontVariationSettings,\n            lineHeight: bareFontInfo.lineHeight,\n            letterSpacing: bareFontInfo.letterSpacing,\n            isMonospace: isMonospace,\n            typicalHalfwidthCharacterWidth: typicalHalfwidthCharacter.width,\n            typicalFullwidthCharacterWidth: typicalFullwidthCharacter.width,\n            canUseHalfwidthRightwardsArrow: canUseHalfwidthRightwardsArrow,\n            spaceWidth: space.width,\n            middotWidth: middot.width,\n            wsmiddotWidth: wsmiddotWidth.width,\n            maxDigitWidth: maxDigitWidth\n        }, true);\n    }\n}\nclass FontMeasurementsCache {\n    constructor() {\n        this._keys = Object.create(null);\n        this._values = Object.create(null);\n    }\n    has(item) {\n        const itemId = item.getId();\n        return !!this._values[itemId];\n    }\n    get(item) {\n        const itemId = item.getId();\n        return this._values[itemId];\n    }\n    put(item, value) {\n        const itemId = item.getId();\n        this._keys[itemId] = item;\n        this._values[itemId] = value;\n    }\n    remove(item) {\n        const itemId = item.getId();\n        delete this._keys[itemId];\n        delete this._values[itemId];\n    }\n    getValues() {\n        return Object.keys(this._keys).map(id => this._values[id]);\n    }\n}\nexport const FontMeasurements = new FontMeasurementsImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nclass TabFocusImpl {\n    constructor() {\n        this._tabFocusTerminal = false;\n        this._tabFocusEditor = false;\n        this._onDidChangeTabFocus = new Emitter();\n        this.onDidChangeTabFocus = this._onDidChangeTabFocus.event;\n    }\n    getTabFocusMode(context) {\n        return context === \"terminalFocus\" /* TabFocusContext.Terminal */ ? this._tabFocusTerminal : this._tabFocusEditor;\n    }\n    setTabFocusMode(tabFocusMode, context) {\n        if (context === \"terminalFocus\" /* TabFocusContext.Terminal */) {\n            this._tabFocusTerminal = tabFocusMode;\n        }\n        else {\n            this._tabFocusEditor = tabFocusMode;\n        }\n        this._onDidChangeTabFocus.fire();\n    }\n}\n/**\n * Control what pressing Tab does.\n * If it is false, pressing Tab or Shift-Tab will be handled by the editor.\n * If it is true, pressing Tab or Shift-Tab will move the browser focus.\n * Defaults to false.\n */\nexport const TabFocus = new TabFocusImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PageCoordinates } from '../editorDom.js';\nimport { PartFingerprints } from '../view/viewPart.js';\nimport { ViewLine } from '../viewParts/lines/viewLine.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range as EditorRange } from '../../common/core/range.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { AtomicTabMoveOperations } from '../../common/cursor/cursorAtomicMoveOperations.js';\nclass UnknownHitTestResult {\n    constructor(hitTarget = null) {\n        this.hitTarget = hitTarget;\n        this.type = 0 /* HitTestResultType.Unknown */;\n    }\n}\nclass ContentHitTestResult {\n    constructor(position, spanNode, injectedText) {\n        this.position = position;\n        this.spanNode = spanNode;\n        this.injectedText = injectedText;\n        this.type = 1 /* HitTestResultType.Content */;\n    }\n}\nvar HitTestResult;\n(function (HitTestResult) {\n    function createFromDOMInfo(ctx, spanNode, offset) {\n        const position = ctx.getPositionFromDOMInfo(spanNode, offset);\n        if (position) {\n            return new ContentHitTestResult(position, spanNode, null);\n        }\n        return new UnknownHitTestResult(spanNode);\n    }\n    HitTestResult.createFromDOMInfo = createFromDOMInfo;\n})(HitTestResult || (HitTestResult = {}));\nexport class PointerHandlerLastRenderData {\n    constructor(lastViewCursorsRenderData, lastTextareaPosition) {\n        this.lastViewCursorsRenderData = lastViewCursorsRenderData;\n        this.lastTextareaPosition = lastTextareaPosition;\n    }\n}\nexport class MouseTarget {\n    static _deduceRage(position, range = null) {\n        if (!range && position) {\n            return new EditorRange(position.lineNumber, position.column, position.lineNumber, position.column);\n        }\n        return range !== null && range !== void 0 ? range : null;\n    }\n    static createUnknown(element, mouseColumn, position) {\n        return { type: 0 /* MouseTargetType.UNKNOWN */, element, mouseColumn, position, range: this._deduceRage(position) };\n    }\n    static createTextarea(element, mouseColumn) {\n        return { type: 1 /* MouseTargetType.TEXTAREA */, element, mouseColumn, position: null, range: null };\n    }\n    static createMargin(type, element, mouseColumn, position, range, detail) {\n        return { type, element, mouseColumn, position, range, detail };\n    }\n    static createViewZone(type, element, mouseColumn, position, detail) {\n        return { type, element, mouseColumn, position, range: this._deduceRage(position), detail };\n    }\n    static createContentText(element, mouseColumn, position, range, detail) {\n        return { type: 6 /* MouseTargetType.CONTENT_TEXT */, element, mouseColumn, position, range: this._deduceRage(position, range), detail };\n    }\n    static createContentEmpty(element, mouseColumn, position, detail) {\n        return { type: 7 /* MouseTargetType.CONTENT_EMPTY */, element, mouseColumn, position, range: this._deduceRage(position), detail };\n    }\n    static createContentWidget(element, mouseColumn, detail) {\n        return { type: 9 /* MouseTargetType.CONTENT_WIDGET */, element, mouseColumn, position: null, range: null, detail };\n    }\n    static createScrollbar(element, mouseColumn, position) {\n        return { type: 11 /* MouseTargetType.SCROLLBAR */, element, mouseColumn, position, range: this._deduceRage(position) };\n    }\n    static createOverlayWidget(element, mouseColumn, detail) {\n        return { type: 12 /* MouseTargetType.OVERLAY_WIDGET */, element, mouseColumn, position: null, range: null, detail };\n    }\n    static createOutsideEditor(mouseColumn, position, outsidePosition, outsideDistance) {\n        return { type: 13 /* MouseTargetType.OUTSIDE_EDITOR */, element: null, mouseColumn, position, range: this._deduceRage(position), outsidePosition, outsideDistance };\n    }\n    static _typeToString(type) {\n        if (type === 1 /* MouseTargetType.TEXTAREA */) {\n            return 'TEXTAREA';\n        }\n        if (type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */) {\n            return 'GUTTER_GLYPH_MARGIN';\n        }\n        if (type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */) {\n            return 'GUTTER_LINE_NUMBERS';\n        }\n        if (type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n            return 'GUTTER_LINE_DECORATIONS';\n        }\n        if (type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n            return 'GUTTER_VIEW_ZONE';\n        }\n        if (type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return 'CONTENT_TEXT';\n        }\n        if (type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            return 'CONTENT_EMPTY';\n        }\n        if (type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            return 'CONTENT_VIEW_ZONE';\n        }\n        if (type === 9 /* MouseTargetType.CONTENT_WIDGET */) {\n            return 'CONTENT_WIDGET';\n        }\n        if (type === 10 /* MouseTargetType.OVERVIEW_RULER */) {\n            return 'OVERVIEW_RULER';\n        }\n        if (type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return 'SCROLLBAR';\n        }\n        if (type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return 'OVERLAY_WIDGET';\n        }\n        return 'UNKNOWN';\n    }\n    static toString(target) {\n        return this._typeToString(target.type) + ': ' + target.position + ' - ' + target.range + ' - ' + JSON.stringify(target.detail);\n    }\n}\nclass ElementPath {\n    static isTextArea(path) {\n        return (path.length === 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 6 /* PartFingerprint.TextArea */);\n    }\n    static isChildOfViewLines(path) {\n        return (path.length >= 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 7 /* PartFingerprint.ViewLines */);\n    }\n    static isStrictChildOfViewLines(path) {\n        return (path.length > 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 7 /* PartFingerprint.ViewLines */);\n    }\n    static isChildOfScrollableElement(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 5 /* PartFingerprint.ScrollableElement */);\n    }\n    static isChildOfMinimap(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 8 /* PartFingerprint.Minimap */);\n    }\n    static isChildOfContentWidgets(path) {\n        return (path.length >= 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 1 /* PartFingerprint.ContentWidgets */);\n    }\n    static isChildOfOverflowingContentWidgets(path) {\n        return (path.length >= 1\n            && path[0] === 2 /* PartFingerprint.OverflowingContentWidgets */);\n    }\n    static isChildOfOverlayWidgets(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 4 /* PartFingerprint.OverlayWidgets */);\n    }\n}\nexport class HitTestContext {\n    constructor(context, viewHelper, lastRenderData) {\n        this.viewModel = context.viewModel;\n        const options = context.configuration.options;\n        this.layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this.viewDomNode = viewHelper.viewDomNode;\n        this.lineHeight = options.get(64 /* EditorOption.lineHeight */);\n        this.stickyTabStops = options.get(112 /* EditorOption.stickyTabStops */);\n        this.typicalHalfwidthCharacterWidth = options.get(48 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n        this.lastRenderData = lastRenderData;\n        this._context = context;\n        this._viewHelper = viewHelper;\n    }\n    getZoneAtCoord(mouseVerticalOffset) {\n        return HitTestContext.getZoneAtCoord(this._context, mouseVerticalOffset);\n    }\n    static getZoneAtCoord(context, mouseVerticalOffset) {\n        // The target is either a view zone or the empty space after the last view-line\n        const viewZoneWhitespace = context.viewLayout.getWhitespaceAtVerticalOffset(mouseVerticalOffset);\n        if (viewZoneWhitespace) {\n            const viewZoneMiddle = viewZoneWhitespace.verticalOffset + viewZoneWhitespace.height / 2;\n            const lineCount = context.viewModel.getLineCount();\n            let positionBefore = null;\n            let position;\n            let positionAfter = null;\n            if (viewZoneWhitespace.afterLineNumber !== lineCount) {\n                // There are more lines after this view zone\n                positionAfter = new Position(viewZoneWhitespace.afterLineNumber + 1, 1);\n            }\n            if (viewZoneWhitespace.afterLineNumber > 0) {\n                // There are more lines above this view zone\n                positionBefore = new Position(viewZoneWhitespace.afterLineNumber, context.viewModel.getLineMaxColumn(viewZoneWhitespace.afterLineNumber));\n            }\n            if (positionAfter === null) {\n                position = positionBefore;\n            }\n            else if (positionBefore === null) {\n                position = positionAfter;\n            }\n            else if (mouseVerticalOffset < viewZoneMiddle) {\n                position = positionBefore;\n            }\n            else {\n                position = positionAfter;\n            }\n            return {\n                viewZoneId: viewZoneWhitespace.id,\n                afterLineNumber: viewZoneWhitespace.afterLineNumber,\n                positionBefore: positionBefore,\n                positionAfter: positionAfter,\n                position: position\n            };\n        }\n        return null;\n    }\n    getFullLineRangeAtCoord(mouseVerticalOffset) {\n        if (this._context.viewLayout.isAfterLines(mouseVerticalOffset)) {\n            // Below the last line\n            const lineNumber = this._context.viewModel.getLineCount();\n            const maxLineColumn = this._context.viewModel.getLineMaxColumn(lineNumber);\n            return {\n                range: new EditorRange(lineNumber, maxLineColumn, lineNumber, maxLineColumn),\n                isAfterLines: true\n            };\n        }\n        const lineNumber = this._context.viewLayout.getLineNumberAtVerticalOffset(mouseVerticalOffset);\n        const maxLineColumn = this._context.viewModel.getLineMaxColumn(lineNumber);\n        return {\n            range: new EditorRange(lineNumber, 1, lineNumber, maxLineColumn),\n            isAfterLines: false\n        };\n    }\n    getLineNumberAtVerticalOffset(mouseVerticalOffset) {\n        return this._context.viewLayout.getLineNumberAtVerticalOffset(mouseVerticalOffset);\n    }\n    isAfterLines(mouseVerticalOffset) {\n        return this._context.viewLayout.isAfterLines(mouseVerticalOffset);\n    }\n    isInTopPadding(mouseVerticalOffset) {\n        return this._context.viewLayout.isInTopPadding(mouseVerticalOffset);\n    }\n    isInBottomPadding(mouseVerticalOffset) {\n        return this._context.viewLayout.isInBottomPadding(mouseVerticalOffset);\n    }\n    getVerticalOffsetForLineNumber(lineNumber) {\n        return this._context.viewLayout.getVerticalOffsetForLineNumber(lineNumber);\n    }\n    findAttribute(element, attr) {\n        return HitTestContext._findAttribute(element, attr, this._viewHelper.viewDomNode);\n    }\n    static _findAttribute(element, attr, stopAt) {\n        while (element && element !== document.body) {\n            if (element.hasAttribute && element.hasAttribute(attr)) {\n                return element.getAttribute(attr);\n            }\n            if (element === stopAt) {\n                return null;\n            }\n            element = element.parentNode;\n        }\n        return null;\n    }\n    getLineWidth(lineNumber) {\n        return this._viewHelper.getLineWidth(lineNumber);\n    }\n    visibleRangeForPosition(lineNumber, column) {\n        return this._viewHelper.visibleRangeForPosition(lineNumber, column);\n    }\n    getPositionFromDOMInfo(spanNode, offset) {\n        return this._viewHelper.getPositionFromDOMInfo(spanNode, offset);\n    }\n    getCurrentScrollTop() {\n        return this._context.viewLayout.getCurrentScrollTop();\n    }\n    getCurrentScrollLeft() {\n        return this._context.viewLayout.getCurrentScrollLeft();\n    }\n}\nclass BareHitTestRequest {\n    constructor(ctx, editorPos, pos, relativePos) {\n        this.editorPos = editorPos;\n        this.pos = pos;\n        this.relativePos = relativePos;\n        this.mouseVerticalOffset = Math.max(0, ctx.getCurrentScrollTop() + this.relativePos.y);\n        this.mouseContentHorizontalOffset = ctx.getCurrentScrollLeft() + this.relativePos.x - ctx.layoutInfo.contentLeft;\n        this.isInMarginArea = (this.relativePos.x < ctx.layoutInfo.contentLeft && this.relativePos.x >= ctx.layoutInfo.glyphMarginLeft);\n        this.isInContentArea = !this.isInMarginArea;\n        this.mouseColumn = Math.max(0, MouseTargetFactory._getMouseColumn(this.mouseContentHorizontalOffset, ctx.typicalHalfwidthCharacterWidth));\n    }\n}\nclass HitTestRequest extends BareHitTestRequest {\n    constructor(ctx, editorPos, pos, relativePos, target) {\n        super(ctx, editorPos, pos, relativePos);\n        this._ctx = ctx;\n        if (target) {\n            this.target = target;\n            this.targetPath = PartFingerprints.collect(target, ctx.viewDomNode);\n        }\n        else {\n            this.target = null;\n            this.targetPath = new Uint8Array(0);\n        }\n    }\n    toString() {\n        return `pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\\n\\ttarget: ${this.target ? this.target.outerHTML : null}`;\n    }\n    _getMouseColumn(position = null) {\n        if (position && position.column < this._ctx.viewModel.getLineMaxColumn(position.lineNumber)) {\n            // Most likely, the line contains foreign decorations...\n            return CursorColumns.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(position.lineNumber), position.column, this._ctx.viewModel.model.getOptions().tabSize) + 1;\n        }\n        return this.mouseColumn;\n    }\n    fulfillUnknown(position = null) {\n        return MouseTarget.createUnknown(this.target, this._getMouseColumn(position), position);\n    }\n    fulfillTextarea() {\n        return MouseTarget.createTextarea(this.target, this._getMouseColumn());\n    }\n    fulfillMargin(type, position, range, detail) {\n        return MouseTarget.createMargin(type, this.target, this._getMouseColumn(position), position, range, detail);\n    }\n    fulfillViewZone(type, position, detail) {\n        return MouseTarget.createViewZone(type, this.target, this._getMouseColumn(position), position, detail);\n    }\n    fulfillContentText(position, range, detail) {\n        return MouseTarget.createContentText(this.target, this._getMouseColumn(position), position, range, detail);\n    }\n    fulfillContentEmpty(position, detail) {\n        return MouseTarget.createContentEmpty(this.target, this._getMouseColumn(position), position, detail);\n    }\n    fulfillContentWidget(detail) {\n        return MouseTarget.createContentWidget(this.target, this._getMouseColumn(), detail);\n    }\n    fulfillScrollbar(position) {\n        return MouseTarget.createScrollbar(this.target, this._getMouseColumn(position), position);\n    }\n    fulfillOverlayWidget(detail) {\n        return MouseTarget.createOverlayWidget(this.target, this._getMouseColumn(), detail);\n    }\n    withTarget(target) {\n        return new HitTestRequest(this._ctx, this.editorPos, this.pos, this.relativePos, target);\n    }\n}\nconst EMPTY_CONTENT_AFTER_LINES = { isAfterLines: true };\nfunction createEmptyContentDataInLines(horizontalDistanceToText) {\n    return {\n        isAfterLines: false,\n        horizontalDistanceToText: horizontalDistanceToText\n    };\n}\nexport class MouseTargetFactory {\n    constructor(context, viewHelper) {\n        this._context = context;\n        this._viewHelper = viewHelper;\n    }\n    mouseTargetIsWidget(e) {\n        const t = e.target;\n        const path = PartFingerprints.collect(t, this._viewHelper.viewDomNode);\n        // Is it a content widget?\n        if (ElementPath.isChildOfContentWidgets(path) || ElementPath.isChildOfOverflowingContentWidgets(path)) {\n            return true;\n        }\n        // Is it an overlay widget?\n        if (ElementPath.isChildOfOverlayWidgets(path)) {\n            return true;\n        }\n        return false;\n    }\n    createMouseTarget(lastRenderData, editorPos, pos, relativePos, target) {\n        const ctx = new HitTestContext(this._context, this._viewHelper, lastRenderData);\n        const request = new HitTestRequest(ctx, editorPos, pos, relativePos, target);\n        try {\n            const r = MouseTargetFactory._createMouseTarget(ctx, request, false);\n            if (r.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n                // Snap to the nearest soft tab boundary if atomic soft tabs are enabled.\n                if (ctx.stickyTabStops && r.position !== null) {\n                    const position = MouseTargetFactory._snapToSoftTabBoundary(r.position, ctx.viewModel);\n                    const range = EditorRange.fromPositions(position, position).plusRange(r.range);\n                    return request.fulfillContentText(position, range, r.detail);\n                }\n            }\n            // console.log(MouseTarget.toString(r));\n            return r;\n        }\n        catch (err) {\n            // console.log(err);\n            return request.fulfillUnknown();\n        }\n    }\n    static _createMouseTarget(ctx, request, domHitTestExecuted) {\n        // console.log(`${domHitTestExecuted ? '=>' : ''}CAME IN REQUEST: ${request}`);\n        // First ensure the request has a target\n        if (request.target === null) {\n            if (domHitTestExecuted) {\n                // Still no target... and we have already executed hit test...\n                return request.fulfillUnknown();\n            }\n            const hitTestResult = MouseTargetFactory._doHitTest(ctx, request);\n            if (hitTestResult.type === 1 /* HitTestResultType.Content */) {\n                return MouseTargetFactory.createMouseTargetFromHitTestPosition(ctx, request, hitTestResult.spanNode, hitTestResult.position, hitTestResult.injectedText);\n            }\n            return this._createMouseTarget(ctx, request.withTarget(hitTestResult.hitTarget), true);\n        }\n        // we know for a fact that request.target is not null\n        const resolvedRequest = request;\n        let result = null;\n        result = result || MouseTargetFactory._hitTestContentWidget(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestOverlayWidget(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestMinimap(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestScrollbarSlider(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewZone(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestMargin(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewCursor(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestTextArea(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewLines(ctx, resolvedRequest, domHitTestExecuted);\n        result = result || MouseTargetFactory._hitTestScrollbar(ctx, resolvedRequest);\n        return (result || request.fulfillUnknown());\n    }\n    static _hitTestContentWidget(ctx, request) {\n        // Is it a content widget?\n        if (ElementPath.isChildOfContentWidgets(request.targetPath) || ElementPath.isChildOfOverflowingContentWidgets(request.targetPath)) {\n            const widgetId = ctx.findAttribute(request.target, 'widgetId');\n            if (widgetId) {\n                return request.fulfillContentWidget(widgetId);\n            }\n            else {\n                return request.fulfillUnknown();\n            }\n        }\n        return null;\n    }\n    static _hitTestOverlayWidget(ctx, request) {\n        // Is it an overlay widget?\n        if (ElementPath.isChildOfOverlayWidgets(request.targetPath)) {\n            const widgetId = ctx.findAttribute(request.target, 'widgetId');\n            if (widgetId) {\n                return request.fulfillOverlayWidget(widgetId);\n            }\n            else {\n                return request.fulfillUnknown();\n            }\n        }\n        return null;\n    }\n    static _hitTestViewCursor(ctx, request) {\n        if (request.target) {\n            // Check if we've hit a painted cursor\n            const lastViewCursorsRenderData = ctx.lastRenderData.lastViewCursorsRenderData;\n            for (const d of lastViewCursorsRenderData) {\n                if (request.target === d.domNode) {\n                    return request.fulfillContentText(d.position, null, { mightBeForeignElement: false, injectedText: null });\n                }\n            }\n        }\n        if (request.isInContentArea) {\n            // Edge has a bug when hit-testing the exact position of a cursor,\n            // instead of returning the correct dom node, it returns the\n            // first or last rendered view line dom node, therefore help it out\n            // and first check if we are on top of a cursor\n            const lastViewCursorsRenderData = ctx.lastRenderData.lastViewCursorsRenderData;\n            const mouseContentHorizontalOffset = request.mouseContentHorizontalOffset;\n            const mouseVerticalOffset = request.mouseVerticalOffset;\n            for (const d of lastViewCursorsRenderData) {\n                if (mouseContentHorizontalOffset < d.contentLeft) {\n                    // mouse position is to the left of the cursor\n                    continue;\n                }\n                if (mouseContentHorizontalOffset > d.contentLeft + d.width) {\n                    // mouse position is to the right of the cursor\n                    continue;\n                }\n                const cursorVerticalOffset = ctx.getVerticalOffsetForLineNumber(d.position.lineNumber);\n                if (cursorVerticalOffset <= mouseVerticalOffset\n                    && mouseVerticalOffset <= cursorVerticalOffset + d.height) {\n                    return request.fulfillContentText(d.position, null, { mightBeForeignElement: false, injectedText: null });\n                }\n            }\n        }\n        return null;\n    }\n    static _hitTestViewZone(ctx, request) {\n        const viewZoneData = ctx.getZoneAtCoord(request.mouseVerticalOffset);\n        if (viewZoneData) {\n            const mouseTargetType = (request.isInContentArea ? 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ : 5 /* MouseTargetType.GUTTER_VIEW_ZONE */);\n            return request.fulfillViewZone(mouseTargetType, viewZoneData.position, viewZoneData);\n        }\n        return null;\n    }\n    static _hitTestTextArea(ctx, request) {\n        // Is it the textarea?\n        if (ElementPath.isTextArea(request.targetPath)) {\n            if (ctx.lastRenderData.lastTextareaPosition) {\n                return request.fulfillContentText(ctx.lastRenderData.lastTextareaPosition, null, { mightBeForeignElement: false, injectedText: null });\n            }\n            return request.fulfillTextarea();\n        }\n        return null;\n    }\n    static _hitTestMargin(ctx, request) {\n        if (request.isInMarginArea) {\n            const res = ctx.getFullLineRangeAtCoord(request.mouseVerticalOffset);\n            const pos = res.range.getStartPosition();\n            let offset = Math.abs(request.relativePos.x);\n            const detail = {\n                isAfterLines: res.isAfterLines,\n                glyphMarginLeft: ctx.layoutInfo.glyphMarginLeft,\n                glyphMarginWidth: ctx.layoutInfo.glyphMarginWidth,\n                lineNumbersWidth: ctx.layoutInfo.lineNumbersWidth,\n                offsetX: offset\n            };\n            offset -= ctx.layoutInfo.glyphMarginLeft;\n            if (offset <= ctx.layoutInfo.glyphMarginWidth) {\n                // On the glyph margin\n                return request.fulfillMargin(2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */, pos, res.range, detail);\n            }\n            offset -= ctx.layoutInfo.glyphMarginWidth;\n            if (offset <= ctx.layoutInfo.lineNumbersWidth) {\n                // On the line numbers\n                return request.fulfillMargin(3 /* MouseTargetType.GUTTER_LINE_NUMBERS */, pos, res.range, detail);\n            }\n            offset -= ctx.layoutInfo.lineNumbersWidth;\n            // On the line decorations\n            return request.fulfillMargin(4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */, pos, res.range, detail);\n        }\n        return null;\n    }\n    static _hitTestViewLines(ctx, request, domHitTestExecuted) {\n        if (!ElementPath.isChildOfViewLines(request.targetPath)) {\n            return null;\n        }\n        if (ctx.isInTopPadding(request.mouseVerticalOffset)) {\n            return request.fulfillContentEmpty(new Position(1, 1), EMPTY_CONTENT_AFTER_LINES);\n        }\n        // Check if it is below any lines and any view zones\n        if (ctx.isAfterLines(request.mouseVerticalOffset) || ctx.isInBottomPadding(request.mouseVerticalOffset)) {\n            // This most likely indicates it happened after the last view-line\n            const lineCount = ctx.viewModel.getLineCount();\n            const maxLineColumn = ctx.viewModel.getLineMaxColumn(lineCount);\n            return request.fulfillContentEmpty(new Position(lineCount, maxLineColumn), EMPTY_CONTENT_AFTER_LINES);\n        }\n        if (domHitTestExecuted) {\n            // Check if we are hitting a view-line (can happen in the case of inline decorations on empty lines)\n            // See https://github.com/microsoft/vscode/issues/46942\n            if (ElementPath.isStrictChildOfViewLines(request.targetPath)) {\n                const lineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n                if (ctx.viewModel.getLineLength(lineNumber) === 0) {\n                    const lineWidth = ctx.getLineWidth(lineNumber);\n                    const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n                    return request.fulfillContentEmpty(new Position(lineNumber, 1), detail);\n                }\n                const lineWidth = ctx.getLineWidth(lineNumber);\n                if (request.mouseContentHorizontalOffset >= lineWidth) {\n                    const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n                    const pos = new Position(lineNumber, ctx.viewModel.getLineMaxColumn(lineNumber));\n                    return request.fulfillContentEmpty(pos, detail);\n                }\n            }\n            // We have already executed hit test...\n            return request.fulfillUnknown();\n        }\n        const hitTestResult = MouseTargetFactory._doHitTest(ctx, request);\n        if (hitTestResult.type === 1 /* HitTestResultType.Content */) {\n            return MouseTargetFactory.createMouseTargetFromHitTestPosition(ctx, request, hitTestResult.spanNode, hitTestResult.position, hitTestResult.injectedText);\n        }\n        return this._createMouseTarget(ctx, request.withTarget(hitTestResult.hitTarget), true);\n    }\n    static _hitTestMinimap(ctx, request) {\n        if (ElementPath.isChildOfMinimap(request.targetPath)) {\n            const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n            const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n            return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n        }\n        return null;\n    }\n    static _hitTestScrollbarSlider(ctx, request) {\n        if (ElementPath.isChildOfScrollableElement(request.targetPath)) {\n            if (request.target && request.target.nodeType === 1) {\n                const className = request.target.className;\n                if (className && /\\b(slider|scrollbar)\\b/.test(className)) {\n                    const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n                    const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n                    return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n                }\n            }\n        }\n        return null;\n    }\n    static _hitTestScrollbar(ctx, request) {\n        // Is it the overview ruler?\n        // Is it a child of the scrollable element?\n        if (ElementPath.isChildOfScrollableElement(request.targetPath)) {\n            const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n            const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n            return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n        }\n        return null;\n    }\n    getMouseColumn(relativePos) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        const mouseContentHorizontalOffset = this._context.viewLayout.getCurrentScrollLeft() + relativePos.x - layoutInfo.contentLeft;\n        return MouseTargetFactory._getMouseColumn(mouseContentHorizontalOffset, options.get(48 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth);\n    }\n    static _getMouseColumn(mouseContentHorizontalOffset, typicalHalfwidthCharacterWidth) {\n        if (mouseContentHorizontalOffset < 0) {\n            return 1;\n        }\n        const chars = Math.round(mouseContentHorizontalOffset / typicalHalfwidthCharacterWidth);\n        return (chars + 1);\n    }\n    static createMouseTargetFromHitTestPosition(ctx, request, spanNode, pos, injectedText) {\n        const lineNumber = pos.lineNumber;\n        const column = pos.column;\n        const lineWidth = ctx.getLineWidth(lineNumber);\n        if (request.mouseContentHorizontalOffset > lineWidth) {\n            const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n            return request.fulfillContentEmpty(pos, detail);\n        }\n        const visibleRange = ctx.visibleRangeForPosition(lineNumber, column);\n        if (!visibleRange) {\n            return request.fulfillUnknown(pos);\n        }\n        const columnHorizontalOffset = visibleRange.left;\n        if (Math.abs(request.mouseContentHorizontalOffset - columnHorizontalOffset) < 1) {\n            return request.fulfillContentText(pos, null, { mightBeForeignElement: !!injectedText, injectedText });\n        }\n        const points = [];\n        points.push({ offset: visibleRange.left, column: column });\n        if (column > 1) {\n            const visibleRange = ctx.visibleRangeForPosition(lineNumber, column - 1);\n            if (visibleRange) {\n                points.push({ offset: visibleRange.left, column: column - 1 });\n            }\n        }\n        const lineMaxColumn = ctx.viewModel.getLineMaxColumn(lineNumber);\n        if (column < lineMaxColumn) {\n            const visibleRange = ctx.visibleRangeForPosition(lineNumber, column + 1);\n            if (visibleRange) {\n                points.push({ offset: visibleRange.left, column: column + 1 });\n            }\n        }\n        points.sort((a, b) => a.offset - b.offset);\n        const mouseCoordinates = request.pos.toClientCoordinates();\n        const spanNodeClientRect = spanNode.getBoundingClientRect();\n        const mouseIsOverSpanNode = (spanNodeClientRect.left <= mouseCoordinates.clientX && mouseCoordinates.clientX <= spanNodeClientRect.right);\n        let rng = null;\n        for (let i = 1; i < points.length; i++) {\n            const prev = points[i - 1];\n            const curr = points[i];\n            if (prev.offset <= request.mouseContentHorizontalOffset && request.mouseContentHorizontalOffset <= curr.offset) {\n                rng = new EditorRange(lineNumber, prev.column, lineNumber, curr.column);\n                // See https://github.com/microsoft/vscode/issues/152819\n                // Due to the use of zwj, the browser's hit test result is skewed towards the left\n                // Here we try to correct that if the mouse horizontal offset is closer to the right than the left\n                const prevDelta = Math.abs(prev.offset - request.mouseContentHorizontalOffset);\n                const nextDelta = Math.abs(curr.offset - request.mouseContentHorizontalOffset);\n                pos = (prevDelta < nextDelta\n                    ? new Position(lineNumber, prev.column)\n                    : new Position(lineNumber, curr.column));\n                break;\n            }\n        }\n        return request.fulfillContentText(pos, rng, { mightBeForeignElement: !mouseIsOverSpanNode || !!injectedText, injectedText });\n    }\n    /**\n     * Most probably WebKit browsers and Edge\n     */\n    static _doHitTestWithCaretRangeFromPoint(ctx, request) {\n        // In Chrome, especially on Linux it is possible to click between lines,\n        // so try to adjust the `hity` below so that it lands in the center of a line\n        const lineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n        const lineStartVerticalOffset = ctx.getVerticalOffsetForLineNumber(lineNumber);\n        const lineEndVerticalOffset = lineStartVerticalOffset + ctx.lineHeight;\n        const isBelowLastLine = (lineNumber === ctx.viewModel.getLineCount()\n            && request.mouseVerticalOffset > lineEndVerticalOffset);\n        if (!isBelowLastLine) {\n            const lineCenteredVerticalOffset = Math.floor((lineStartVerticalOffset + lineEndVerticalOffset) / 2);\n            let adjustedPageY = request.pos.y + (lineCenteredVerticalOffset - request.mouseVerticalOffset);\n            if (adjustedPageY <= request.editorPos.y) {\n                adjustedPageY = request.editorPos.y + 1;\n            }\n            if (adjustedPageY >= request.editorPos.y + request.editorPos.height) {\n                adjustedPageY = request.editorPos.y + request.editorPos.height - 1;\n            }\n            const adjustedPage = new PageCoordinates(request.pos.x, adjustedPageY);\n            const r = this._actualDoHitTestWithCaretRangeFromPoint(ctx, adjustedPage.toClientCoordinates());\n            if (r.type === 1 /* HitTestResultType.Content */) {\n                return r;\n            }\n        }\n        // Also try to hit test without the adjustment (for the edge cases that we are near the top or bottom)\n        return this._actualDoHitTestWithCaretRangeFromPoint(ctx, request.pos.toClientCoordinates());\n    }\n    static _actualDoHitTestWithCaretRangeFromPoint(ctx, coords) {\n        const shadowRoot = dom.getShadowRoot(ctx.viewDomNode);\n        let range;\n        if (shadowRoot) {\n            if (typeof shadowRoot.caretRangeFromPoint === 'undefined') {\n                range = shadowCaretRangeFromPoint(shadowRoot, coords.clientX, coords.clientY);\n            }\n            else {\n                range = shadowRoot.caretRangeFromPoint(coords.clientX, coords.clientY);\n            }\n        }\n        else {\n            range = document.caretRangeFromPoint(coords.clientX, coords.clientY);\n        }\n        if (!range || !range.startContainer) {\n            return new UnknownHitTestResult();\n        }\n        // Chrome always hits a TEXT_NODE, while Edge sometimes hits a token span\n        const startContainer = range.startContainer;\n        if (startContainer.nodeType === startContainer.TEXT_NODE) {\n            // startContainer is expected to be the token text\n            const parent1 = startContainer.parentNode; // expected to be the token span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line container span\n            const parent3 = parent2 ? parent2.parentNode : null; // expected to be the view line div\n            const parent3ClassName = parent3 && parent3.nodeType === parent3.ELEMENT_NODE ? parent3.className : null;\n            if (parent3ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, parent1, range.startOffset);\n            }\n            else {\n                return new UnknownHitTestResult(startContainer.parentNode);\n            }\n        }\n        else if (startContainer.nodeType === startContainer.ELEMENT_NODE) {\n            // startContainer is expected to be the token span\n            const parent1 = startContainer.parentNode; // expected to be the view line container span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line div\n            const parent2ClassName = parent2 && parent2.nodeType === parent2.ELEMENT_NODE ? parent2.className : null;\n            if (parent2ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, startContainer, startContainer.textContent.length);\n            }\n            else {\n                return new UnknownHitTestResult(startContainer);\n            }\n        }\n        return new UnknownHitTestResult();\n    }\n    /**\n     * Most probably Gecko\n     */\n    static _doHitTestWithCaretPositionFromPoint(ctx, coords) {\n        const hitResult = document.caretPositionFromPoint(coords.clientX, coords.clientY);\n        if (hitResult.offsetNode.nodeType === hitResult.offsetNode.TEXT_NODE) {\n            // offsetNode is expected to be the token text\n            const parent1 = hitResult.offsetNode.parentNode; // expected to be the token span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line container span\n            const parent3 = parent2 ? parent2.parentNode : null; // expected to be the view line div\n            const parent3ClassName = parent3 && parent3.nodeType === parent3.ELEMENT_NODE ? parent3.className : null;\n            if (parent3ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, hitResult.offsetNode.parentNode, hitResult.offset);\n            }\n            else {\n                return new UnknownHitTestResult(hitResult.offsetNode.parentNode);\n            }\n        }\n        // For inline decorations, Gecko sometimes returns the `<span>` of the line and the offset is the `<span>` with the inline decoration\n        // Some other times, it returns the `<span>` with the inline decoration\n        if (hitResult.offsetNode.nodeType === hitResult.offsetNode.ELEMENT_NODE) {\n            const parent1 = hitResult.offsetNode.parentNode;\n            const parent1ClassName = parent1 && parent1.nodeType === parent1.ELEMENT_NODE ? parent1.className : null;\n            const parent2 = parent1 ? parent1.parentNode : null;\n            const parent2ClassName = parent2 && parent2.nodeType === parent2.ELEMENT_NODE ? parent2.className : null;\n            if (parent1ClassName === ViewLine.CLASS_NAME) {\n                // it returned the `<span>` of the line and the offset is the `<span>` with the inline decoration\n                const tokenSpan = hitResult.offsetNode.childNodes[Math.min(hitResult.offset, hitResult.offsetNode.childNodes.length - 1)];\n                if (tokenSpan) {\n                    return HitTestResult.createFromDOMInfo(ctx, tokenSpan, 0);\n                }\n            }\n            else if (parent2ClassName === ViewLine.CLASS_NAME) {\n                // it returned the `<span>` with the inline decoration\n                return HitTestResult.createFromDOMInfo(ctx, hitResult.offsetNode, 0);\n            }\n        }\n        return new UnknownHitTestResult(hitResult.offsetNode);\n    }\n    static _snapToSoftTabBoundary(position, viewModel) {\n        const lineContent = viewModel.getLineContent(position.lineNumber);\n        const { tabSize } = viewModel.model.getOptions();\n        const newPosition = AtomicTabMoveOperations.atomicPosition(lineContent, position.column - 1, tabSize, 2 /* Direction.Nearest */);\n        if (newPosition !== -1) {\n            return new Position(position.lineNumber, newPosition + 1);\n        }\n        return position;\n    }\n    static _doHitTest(ctx, request) {\n        let result = new UnknownHitTestResult();\n        if (typeof document.caretRangeFromPoint === 'function') {\n            result = this._doHitTestWithCaretRangeFromPoint(ctx, request);\n        }\n        else if (document.caretPositionFromPoint) {\n            result = this._doHitTestWithCaretPositionFromPoint(ctx, request.pos.toClientCoordinates());\n        }\n        if (result.type === 1 /* HitTestResultType.Content */) {\n            const injectedText = ctx.viewModel.getInjectedTextAt(result.position);\n            const normalizedPosition = ctx.viewModel.normalizePosition(result.position, 2 /* PositionAffinity.None */);\n            if (injectedText || !normalizedPosition.equals(result.position)) {\n                result = new ContentHitTestResult(normalizedPosition, result.spanNode, injectedText);\n            }\n        }\n        return result;\n    }\n}\nfunction shadowCaretRangeFromPoint(shadowRoot, x, y) {\n    const range = document.createRange();\n    // Get the element under the point\n    let el = shadowRoot.elementFromPoint(x, y);\n    if (el !== null) {\n        // Get the last child of the element until its firstChild is a text node\n        // This assumes that the pointer is on the right of the line, out of the tokens\n        // and that we want to get the offset of the last token of the line\n        while (el && el.firstChild && el.firstChild.nodeType !== el.firstChild.TEXT_NODE && el.lastChild && el.lastChild.firstChild) {\n            el = el.lastChild;\n        }\n        // Grab its rect\n        const rect = el.getBoundingClientRect();\n        // And its font (the computed shorthand font property might be empty, see #3217)\n        const fontStyle = window.getComputedStyle(el, null).getPropertyValue('font-style');\n        const fontVariant = window.getComputedStyle(el, null).getPropertyValue('font-variant');\n        const fontWeight = window.getComputedStyle(el, null).getPropertyValue('font-weight');\n        const fontSize = window.getComputedStyle(el, null).getPropertyValue('font-size');\n        const lineHeight = window.getComputedStyle(el, null).getPropertyValue('line-height');\n        const fontFamily = window.getComputedStyle(el, null).getPropertyValue('font-family');\n        const font = `${fontStyle} ${fontVariant} ${fontWeight} ${fontSize}/${lineHeight} ${fontFamily}`;\n        // And also its txt content\n        const text = el.innerText;\n        // Position the pixel cursor at the left of the element\n        let pixelCursor = rect.left;\n        let offset = 0;\n        let step;\n        // If the point is on the right of the box put the cursor after the last character\n        if (x > rect.left + rect.width) {\n            offset = text.length;\n        }\n        else {\n            const charWidthReader = CharWidthReader.getInstance();\n            // Goes through all the characters of the innerText, and checks if the x of the point\n            // belongs to the character.\n            for (let i = 0; i < text.length + 1; i++) {\n                // The step is half the width of the character\n                step = charWidthReader.getCharWidth(text.charAt(i), font) / 2;\n                // Move to the center of the character\n                pixelCursor += step;\n                // If the x of the point is smaller that the position of the cursor, the point is over that character\n                if (x < pixelCursor) {\n                    offset = i;\n                    break;\n                }\n                // Move between the current character and the next\n                pixelCursor += step;\n            }\n        }\n        // Creates a range with the text node of the element and set the offset found\n        range.setStart(el.firstChild, offset);\n        range.setEnd(el.firstChild, offset);\n    }\n    return range;\n}\nclass CharWidthReader {\n    static getInstance() {\n        if (!CharWidthReader._INSTANCE) {\n            CharWidthReader._INSTANCE = new CharWidthReader();\n        }\n        return CharWidthReader._INSTANCE;\n    }\n    constructor() {\n        this._cache = {};\n        this._canvas = document.createElement('canvas');\n    }\n    getCharWidth(char, font) {\n        const cacheKey = char + font;\n        if (this._cache[cacheKey]) {\n            return this._cache[cacheKey];\n        }\n        const context = this._canvas.getContext('2d');\n        context.font = font;\n        const metrics = context.measureText(char);\n        const width = metrics.width;\n        this._cache[cacheKey] = width;\n        return width;\n    }\n}\nCharWidthReader._INSTANCE = null;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardWheelEvent } from '../../../base/browser/mouseEvent.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { HitTestContext, MouseTarget, MouseTargetFactory } from './mouseTarget.js';\nimport { ClientCoordinates, EditorMouseEvent, EditorMouseEventFactory, GlobalEditorPointerMoveMonitor, createEditorPagePosition, createCoordinatesRelativeToEditor, PageCoordinates } from '../editorDom.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { Position } from '../../common/core/position.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nimport { MouseWheelClassifier } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nexport class MouseHandler extends ViewEventHandler {\n    constructor(context, viewController, viewHelper) {\n        super();\n        this._mouseLeaveMonitor = null;\n        this._context = context;\n        this.viewController = viewController;\n        this.viewHelper = viewHelper;\n        this.mouseTargetFactory = new MouseTargetFactory(this._context, viewHelper);\n        this._mouseDownOperation = this._register(new MouseDownOperation(this._context, this.viewController, this.viewHelper, this.mouseTargetFactory, (e, testEventTarget) => this._createMouseTarget(e, testEventTarget), (e) => this._getMouseColumn(e)));\n        this.lastMouseLeaveTime = -1;\n        this._height = this._context.configuration.options.get(140 /* EditorOption.layoutInfo */).height;\n        const mouseEvents = new EditorMouseEventFactory(this.viewHelper.viewDomNode);\n        this._register(mouseEvents.onContextMenu(this.viewHelper.viewDomNode, (e) => this._onContextMenu(e, true)));\n        this._register(mouseEvents.onMouseMove(this.viewHelper.viewDomNode, (e) => {\n            this._onMouseMove(e);\n            // See https://github.com/microsoft/vscode/issues/138789\n            // When moving the mouse really quickly, the browser sometimes forgets to\n            // send us a `mouseleave` or `mouseout` event. We therefore install here\n            // a global `mousemove` listener to manually recover if the mouse goes outside\n            // the editor. As soon as the mouse leaves outside of the editor, we\n            // remove this listener\n            if (!this._mouseLeaveMonitor) {\n                this._mouseLeaveMonitor = dom.addDisposableListener(document, 'mousemove', (e) => {\n                    if (!this.viewHelper.viewDomNode.contains(e.target)) {\n                        // went outside the editor!\n                        this._onMouseLeave(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode));\n                    }\n                });\n            }\n        }));\n        this._register(mouseEvents.onMouseUp(this.viewHelper.viewDomNode, (e) => this._onMouseUp(e)));\n        this._register(mouseEvents.onMouseLeave(this.viewHelper.viewDomNode, (e) => this._onMouseLeave(e)));\n        // `pointerdown` events can't be used to determine if there's a double click, or triple click\n        // because their `e.detail` is always 0.\n        // We will therefore save the pointer id for the mouse and then reuse it in the `mousedown` event\n        // for `element.setPointerCapture`.\n        let capturePointerId = 0;\n        this._register(mouseEvents.onPointerDown(this.viewHelper.viewDomNode, (e, pointerId) => {\n            capturePointerId = pointerId;\n        }));\n        // The `pointerup` listener registered by `GlobalEditorPointerMoveMonitor` does not get invoked 100% of the times.\n        // I speculate that this is because the `pointerup` listener is only registered during the `mousedown` event, and perhaps\n        // the `pointerup` event is already queued for dispatching, which makes it that the new listener doesn't get fired.\n        // See https://github.com/microsoft/vscode/issues/146486 for repro steps.\n        // To compensate for that, we simply register here a `pointerup` listener and just communicate it.\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.POINTER_UP, (e) => {\n            this._mouseDownOperation.onPointerUp();\n        }));\n        this._register(mouseEvents.onMouseDown(this.viewHelper.viewDomNode, (e) => this._onMouseDown(e, capturePointerId)));\n        this._setupMouseWheelZoomListener();\n        this._context.addEventHandler(this);\n    }\n    _setupMouseWheelZoomListener() {\n        const classifier = MouseWheelClassifier.INSTANCE;\n        let prevMouseWheelTime = 0;\n        let gestureStartZoomLevel = EditorZoom.getZoomLevel();\n        let gestureHasZoomModifiers = false;\n        let gestureAccumulatedDelta = 0;\n        const onMouseWheel = (browserEvent) => {\n            this.viewController.emitMouseWheel(browserEvent);\n            if (!this._context.configuration.options.get(73 /* EditorOption.mouseWheelZoom */)) {\n                return;\n            }\n            const e = new StandardWheelEvent(browserEvent);\n            classifier.acceptStandardWheelEvent(e);\n            if (classifier.isPhysicalMouseWheel()) {\n                if (hasMouseWheelZoomModifiers(browserEvent)) {\n                    const zoomLevel = EditorZoom.getZoomLevel();\n                    const delta = e.deltaY > 0 ? 1 : -1;\n                    EditorZoom.setZoomLevel(zoomLevel + delta);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n            else {\n                // we consider mousewheel events that occur within 50ms of each other to be part of the same gesture\n                // we don't want to consider mouse wheel events where ctrl/cmd is pressed during the inertia phase\n                // we also want to accumulate deltaY values from the same gesture and use that to set the zoom level\n                if (Date.now() - prevMouseWheelTime > 50) {\n                    // reset if more than 50ms have passed\n                    gestureStartZoomLevel = EditorZoom.getZoomLevel();\n                    gestureHasZoomModifiers = hasMouseWheelZoomModifiers(browserEvent);\n                    gestureAccumulatedDelta = 0;\n                }\n                prevMouseWheelTime = Date.now();\n                gestureAccumulatedDelta += e.deltaY;\n                if (gestureHasZoomModifiers) {\n                    EditorZoom.setZoomLevel(gestureStartZoomLevel + gestureAccumulatedDelta / 5);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n        };\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { capture: true, passive: false }));\n        function hasMouseWheelZoomModifiers(browserEvent) {\n            return (platform.isMacintosh\n                // on macOS we support cmd + two fingers scroll (`metaKey` set)\n                // and also the two fingers pinch gesture (`ctrKey` set)\n                ? ((browserEvent.metaKey || browserEvent.ctrlKey) && !browserEvent.shiftKey && !browserEvent.altKey)\n                : (browserEvent.ctrlKey && !browserEvent.metaKey && !browserEvent.shiftKey && !browserEvent.altKey));\n        }\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        super.dispose();\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(140 /* EditorOption.layoutInfo */)) {\n            // layout change\n            const height = this._context.configuration.options.get(140 /* EditorOption.layoutInfo */).height;\n            if (this._height !== height) {\n                this._height = height;\n                this._mouseDownOperation.onHeightChanged();\n            }\n        }\n        return false;\n    }\n    onCursorStateChanged(e) {\n        this._mouseDownOperation.onCursorStateChanged(e);\n        return false;\n    }\n    onFocusChanged(e) {\n        return false;\n    }\n    // --- end event handlers\n    getTargetAtClientPoint(clientX, clientY) {\n        const clientPos = new ClientCoordinates(clientX, clientY);\n        const pos = clientPos.toPageCoordinates();\n        const editorPos = createEditorPagePosition(this.viewHelper.viewDomNode);\n        if (pos.y < editorPos.y || pos.y > editorPos.y + editorPos.height || pos.x < editorPos.x || pos.x > editorPos.x + editorPos.width) {\n            return null;\n        }\n        const relativePos = createCoordinatesRelativeToEditor(this.viewHelper.viewDomNode, editorPos, pos);\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), editorPos, pos, relativePos, null);\n    }\n    _createMouseTarget(e, testEventTarget) {\n        let target = e.target;\n        if (!this.viewHelper.viewDomNode.contains(target)) {\n            const shadowRoot = dom.getShadowRoot(this.viewHelper.viewDomNode);\n            if (shadowRoot) {\n                target = shadowRoot.elementsFromPoint(e.posx, e.posy).find((el) => this.viewHelper.viewDomNode.contains(el));\n            }\n        }\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), e.editorPos, e.pos, e.relativePos, testEventTarget ? target : null);\n    }\n    _getMouseColumn(e) {\n        return this.mouseTargetFactory.getMouseColumn(e.relativePos);\n    }\n    _onContextMenu(e, testEventTarget) {\n        this.viewController.emitContextMenu({\n            event: e,\n            target: this._createMouseTarget(e, testEventTarget)\n        });\n    }\n    _onMouseMove(e) {\n        const targetIsWidget = this.mouseTargetFactory.mouseTargetIsWidget(e);\n        if (!targetIsWidget) {\n            e.preventDefault();\n        }\n        if (this._mouseDownOperation.isActive()) {\n            // In selection/drag operation\n            return;\n        }\n        const actualMouseMoveTime = e.timestamp;\n        if (actualMouseMoveTime < this.lastMouseLeaveTime) {\n            // Due to throttling, this event occurred before the mouse left the editor, therefore ignore it.\n            return;\n        }\n        this.viewController.emitMouseMove({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseLeave(e) {\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        this.lastMouseLeaveTime = (new Date()).getTime();\n        this.viewController.emitMouseLeave({\n            event: e,\n            target: null\n        });\n    }\n    _onMouseUp(e) {\n        this.viewController.emitMouseUp({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseDown(e, pointerId) {\n        const t = this._createMouseTarget(e, true);\n        const targetIsContent = (t.type === 6 /* MouseTargetType.CONTENT_TEXT */ || t.type === 7 /* MouseTargetType.CONTENT_EMPTY */);\n        const targetIsGutter = (t.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ || t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ || t.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */);\n        const targetIsLineNumbers = (t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        const selectOnLineNumbers = this._context.configuration.options.get(105 /* EditorOption.selectOnLineNumbers */);\n        const targetIsViewZone = (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */);\n        const targetIsWidget = (t.type === 9 /* MouseTargetType.CONTENT_WIDGET */);\n        let shouldHandle = e.leftButton || e.middleButton;\n        if (platform.isMacintosh && e.leftButton && e.ctrlKey) {\n            shouldHandle = false;\n        }\n        const focus = () => {\n            e.preventDefault();\n            this.viewHelper.focusTextArea();\n        };\n        if (shouldHandle && (targetIsContent || (targetIsLineNumbers && selectOnLineNumbers))) {\n            focus();\n            this._mouseDownOperation.start(t.type, e, pointerId);\n        }\n        else if (targetIsGutter) {\n            // Do not steal focus\n            e.preventDefault();\n        }\n        else if (targetIsViewZone) {\n            const viewZoneData = t.detail;\n            if (shouldHandle && this.viewHelper.shouldSuppressMouseDownOnViewZone(viewZoneData.viewZoneId)) {\n                focus();\n                this._mouseDownOperation.start(t.type, e, pointerId);\n                e.preventDefault();\n            }\n        }\n        else if (targetIsWidget && this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)) {\n            focus();\n            e.preventDefault();\n        }\n        this.viewController.emitMouseDown({\n            event: e,\n            target: t\n        });\n    }\n}\nclass MouseDownOperation extends Disposable {\n    constructor(_context, _viewController, _viewHelper, _mouseTargetFactory, createMouseTarget, getMouseColumn) {\n        super();\n        this._context = _context;\n        this._viewController = _viewController;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._createMouseTarget = createMouseTarget;\n        this._getMouseColumn = getMouseColumn;\n        this._mouseMoveMonitor = this._register(new GlobalEditorPointerMoveMonitor(this._viewHelper.viewDomNode));\n        this._topBottomDragScrolling = this._register(new TopBottomDragScrolling(this._context, this._viewHelper, this._mouseTargetFactory, (position, inSelectionMode, revealType) => this._dispatchMouse(position, inSelectionMode, revealType)));\n        this._mouseState = new MouseDownState();\n        this._currentSelection = new Selection(1, 1, 1, 1);\n        this._isActive = false;\n        this._lastMouseEvent = null;\n    }\n    dispose() {\n        super.dispose();\n    }\n    isActive() {\n        return this._isActive;\n    }\n    _onMouseDownThenMove(e) {\n        this._lastMouseEvent = e;\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, false);\n        if (!position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        if (this._mouseState.isDragAndDrop) {\n            this._viewController.emitMouseDrag({\n                event: e,\n                target: position\n            });\n        }\n        else {\n            if (position.type === 13 /* MouseTargetType.OUTSIDE_EDITOR */ && (position.outsidePosition === 'above' || position.outsidePosition === 'below')) {\n                this._topBottomDragScrolling.start(position, e);\n            }\n            else {\n                this._topBottomDragScrolling.stop();\n                this._dispatchMouse(position, true, 1 /* NavigationCommandRevealType.Minimal */);\n            }\n        }\n    }\n    start(targetType, e, pointerId) {\n        this._lastMouseEvent = e;\n        this._mouseState.setStartedOnLineNumbers(targetType === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        this._mouseState.setStartButtons(e);\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, true);\n        if (!position || !position.position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        this._mouseState.trySetCount(e.detail, position.position);\n        // Overwrite the detail of the MouseEvent, as it will be sent out in an event and contributions might rely on it.\n        e.detail = this._mouseState.count;\n        const options = this._context.configuration.options;\n        if (!options.get(88 /* EditorOption.readOnly */)\n            && options.get(33 /* EditorOption.dragAndDrop */)\n            && !options.get(20 /* EditorOption.columnSelection */)\n            && !this._mouseState.altKey // we don't support multiple mouse\n            && e.detail < 2 // only single click on a selection can work\n            && !this._isActive // the mouse is not down yet\n            && !this._currentSelection.isEmpty() // we don't drag single cursor\n            && (position.type === 6 /* MouseTargetType.CONTENT_TEXT */) // single click on text\n            && position.position && this._currentSelection.containsPosition(position.position) // single click on a selection\n        ) {\n            this._mouseState.isDragAndDrop = true;\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), (browserEvent) => {\n                const position = this._findMousePosition(this._lastMouseEvent, false);\n                if (browserEvent && browserEvent instanceof KeyboardEvent) {\n                    // cancel\n                    this._viewController.emitMouseDropCanceled();\n                }\n                else {\n                    this._viewController.emitMouseDrop({\n                        event: this._lastMouseEvent,\n                        target: (position ? this._createMouseTarget(this._lastMouseEvent, true) : null) // Ignoring because position is unknown, e.g., Content View Zone\n                    });\n                }\n                this._stop();\n            });\n            return;\n        }\n        this._mouseState.isDragAndDrop = false;\n        this._dispatchMouse(position, e.shiftKey, 1 /* NavigationCommandRevealType.Minimal */);\n        if (!this._isActive) {\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), () => this._stop());\n        }\n    }\n    _stop() {\n        this._isActive = false;\n        this._topBottomDragScrolling.stop();\n    }\n    onHeightChanged() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onPointerUp() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onCursorStateChanged(e) {\n        this._currentSelection = e.selections[0];\n    }\n    _getPositionOutsideEditor(e) {\n        const editorContent = e.editorPos;\n        const model = this._context.viewModel;\n        const viewLayout = this._context.viewLayout;\n        const mouseColumn = this._getMouseColumn(e);\n        if (e.posy < editorContent.y) {\n            const outsideDistance = editorContent.y - e.posy;\n            const verticalOffset = Math.max(viewLayout.getCurrentScrollTop() - outsideDistance, 0);\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition, 'above', outsideDistance);\n                }\n            }\n            const aboveLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(aboveLineNumber, 1), 'above', outsideDistance);\n        }\n        if (e.posy > editorContent.y + editorContent.height) {\n            const outsideDistance = e.posy - editorContent.y - editorContent.height;\n            const verticalOffset = viewLayout.getCurrentScrollTop() + e.relativePos.y;\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition, 'below', outsideDistance);\n                }\n            }\n            const belowLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(belowLineNumber, model.getLineMaxColumn(belowLineNumber)), 'below', outsideDistance);\n        }\n        const possibleLineNumber = viewLayout.getLineNumberAtVerticalOffset(viewLayout.getCurrentScrollTop() + e.relativePos.y);\n        if (e.posx < editorContent.x) {\n            const outsideDistance = editorContent.x - e.posx;\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, 1), 'left', outsideDistance);\n        }\n        if (e.posx > editorContent.x + editorContent.width) {\n            const outsideDistance = e.posx - editorContent.x - editorContent.width;\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, model.getLineMaxColumn(possibleLineNumber)), 'right', outsideDistance);\n        }\n        return null;\n    }\n    _findMousePosition(e, testEventTarget) {\n        const positionOutsideEditor = this._getPositionOutsideEditor(e);\n        if (positionOutsideEditor) {\n            return positionOutsideEditor;\n        }\n        const t = this._createMouseTarget(e, testEventTarget);\n        const hintedPosition = t.position;\n        if (!hintedPosition) {\n            return null;\n        }\n        if (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n            const newPosition = this._helpPositionJumpOverViewZone(t.detail);\n            if (newPosition) {\n                return MouseTarget.createViewZone(t.type, t.element, t.mouseColumn, newPosition, t.detail);\n            }\n        }\n        return t;\n    }\n    _helpPositionJumpOverViewZone(viewZoneData) {\n        // Force position on view zones to go above or below depending on where selection started from\n        const selectionStart = new Position(this._currentSelection.selectionStartLineNumber, this._currentSelection.selectionStartColumn);\n        const positionBefore = viewZoneData.positionBefore;\n        const positionAfter = viewZoneData.positionAfter;\n        if (positionBefore && positionAfter) {\n            if (positionBefore.isBefore(selectionStart)) {\n                return positionBefore;\n            }\n            else {\n                return positionAfter;\n            }\n        }\n        return null;\n    }\n    _dispatchMouse(position, inSelectionMode, revealType) {\n        if (!position.position) {\n            return;\n        }\n        this._viewController.dispatchMouse({\n            position: position.position,\n            mouseColumn: position.mouseColumn,\n            startedOnLineNumbers: this._mouseState.startedOnLineNumbers,\n            revealType,\n            inSelectionMode: inSelectionMode,\n            mouseDownCount: this._mouseState.count,\n            altKey: this._mouseState.altKey,\n            ctrlKey: this._mouseState.ctrlKey,\n            metaKey: this._mouseState.metaKey,\n            shiftKey: this._mouseState.shiftKey,\n            leftButton: this._mouseState.leftButton,\n            middleButton: this._mouseState.middleButton,\n            onInjectedText: position.type === 6 /* MouseTargetType.CONTENT_TEXT */ && position.detail.injectedText !== null\n        });\n    }\n}\nclass TopBottomDragScrolling extends Disposable {\n    constructor(_context, _viewHelper, _mouseTargetFactory, _dispatchMouse) {\n        super();\n        this._context = _context;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._dispatchMouse = _dispatchMouse;\n        this._operation = null;\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n    start(position, mouseEvent) {\n        if (this._operation) {\n            this._operation.setPosition(position, mouseEvent);\n        }\n        else {\n            this._operation = new TopBottomDragScrollingOperation(this._context, this._viewHelper, this._mouseTargetFactory, this._dispatchMouse, position, mouseEvent);\n        }\n    }\n    stop() {\n        if (this._operation) {\n            this._operation.dispose();\n            this._operation = null;\n        }\n    }\n}\nclass TopBottomDragScrollingOperation extends Disposable {\n    constructor(_context, _viewHelper, _mouseTargetFactory, _dispatchMouse, position, mouseEvent) {\n        super();\n        this._context = _context;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._dispatchMouse = _dispatchMouse;\n        this._position = position;\n        this._mouseEvent = mouseEvent;\n        this._lastTime = Date.now();\n        this._animationFrameDisposable = dom.scheduleAtNextAnimationFrame(() => this._execute());\n    }\n    dispose() {\n        this._animationFrameDisposable.dispose();\n    }\n    setPosition(position, mouseEvent) {\n        this._position = position;\n        this._mouseEvent = mouseEvent;\n    }\n    /**\n     * update internal state and return elapsed ms since last time\n     */\n    _tick() {\n        const now = Date.now();\n        const elapsed = now - this._lastTime;\n        this._lastTime = now;\n        return elapsed;\n    }\n    /**\n     * get the number of lines per second to auto-scroll\n     */\n    _getScrollSpeed() {\n        const lineHeight = this._context.configuration.options.get(64 /* EditorOption.lineHeight */);\n        const viewportInLines = this._context.configuration.options.get(140 /* EditorOption.layoutInfo */).height / lineHeight;\n        const outsideDistanceInLines = this._position.outsideDistance / lineHeight;\n        if (outsideDistanceInLines <= 1.5) {\n            return Math.max(30, viewportInLines * (1 + outsideDistanceInLines));\n        }\n        if (outsideDistanceInLines <= 3) {\n            return Math.max(60, viewportInLines * (2 + outsideDistanceInLines));\n        }\n        return Math.max(200, viewportInLines * (7 + outsideDistanceInLines));\n    }\n    _execute() {\n        const lineHeight = this._context.configuration.options.get(64 /* EditorOption.lineHeight */);\n        const scrollSpeedInLines = this._getScrollSpeed();\n        const elapsed = this._tick();\n        const scrollInPixels = scrollSpeedInLines * (elapsed / 1000) * lineHeight;\n        const scrollValue = (this._position.outsidePosition === 'above' ? -scrollInPixels : scrollInPixels);\n        this._context.viewModel.viewLayout.deltaScrollNow(0, scrollValue);\n        this._viewHelper.renderNow();\n        const viewportData = this._context.viewLayout.getLinesViewportData();\n        const edgeLineNumber = (this._position.outsidePosition === 'above' ? viewportData.startLineNumber : viewportData.endLineNumber);\n        // First, try to find a position that matches the horizontal position of the mouse\n        let mouseTarget;\n        {\n            const editorPos = createEditorPagePosition(this._viewHelper.viewDomNode);\n            const horizontalScrollbarHeight = this._context.configuration.options.get(140 /* EditorOption.layoutInfo */).horizontalScrollbarHeight;\n            const pos = new PageCoordinates(this._mouseEvent.pos.x, editorPos.y + editorPos.height - horizontalScrollbarHeight - 0.1);\n            const relativePos = createCoordinatesRelativeToEditor(this._viewHelper.viewDomNode, editorPos, pos);\n            mouseTarget = this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(), editorPos, pos, relativePos, null);\n        }\n        if (!mouseTarget.position || mouseTarget.position.lineNumber !== edgeLineNumber) {\n            if (this._position.outsidePosition === 'above') {\n                mouseTarget = MouseTarget.createOutsideEditor(this._position.mouseColumn, new Position(edgeLineNumber, 1), 'above', this._position.outsideDistance);\n            }\n            else {\n                mouseTarget = MouseTarget.createOutsideEditor(this._position.mouseColumn, new Position(edgeLineNumber, this._context.viewModel.getLineMaxColumn(edgeLineNumber)), 'below', this._position.outsideDistance);\n            }\n        }\n        this._dispatchMouse(mouseTarget, true, 2 /* NavigationCommandRevealType.None */);\n        this._animationFrameDisposable = dom.scheduleAtNextAnimationFrame(() => this._execute());\n    }\n}\nclass MouseDownState {\n    get altKey() { return this._altKey; }\n    get ctrlKey() { return this._ctrlKey; }\n    get metaKey() { return this._metaKey; }\n    get shiftKey() { return this._shiftKey; }\n    get leftButton() { return this._leftButton; }\n    get middleButton() { return this._middleButton; }\n    get startedOnLineNumbers() { return this._startedOnLineNumbers; }\n    constructor() {\n        this._altKey = false;\n        this._ctrlKey = false;\n        this._metaKey = false;\n        this._shiftKey = false;\n        this._leftButton = false;\n        this._middleButton = false;\n        this._startedOnLineNumbers = false;\n        this._lastMouseDownPosition = null;\n        this._lastMouseDownPositionEqualCount = 0;\n        this._lastMouseDownCount = 0;\n        this._lastSetMouseDownCountTime = 0;\n        this.isDragAndDrop = false;\n    }\n    get count() {\n        return this._lastMouseDownCount;\n    }\n    setModifiers(source) {\n        this._altKey = source.altKey;\n        this._ctrlKey = source.ctrlKey;\n        this._metaKey = source.metaKey;\n        this._shiftKey = source.shiftKey;\n    }\n    setStartButtons(source) {\n        this._leftButton = source.leftButton;\n        this._middleButton = source.middleButton;\n    }\n    setStartedOnLineNumbers(startedOnLineNumbers) {\n        this._startedOnLineNumbers = startedOnLineNumbers;\n    }\n    trySetCount(setMouseDownCount, newMouseDownPosition) {\n        // a. Invalidate multiple clicking if too much time has passed (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        const currentTime = (new Date()).getTime();\n        if (currentTime - this._lastSetMouseDownCountTime > MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME) {\n            setMouseDownCount = 1;\n        }\n        this._lastSetMouseDownCountTime = currentTime;\n        // b. Ensure that we don't jump from single click to triple click in one go (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        if (setMouseDownCount > this._lastMouseDownCount + 1) {\n            setMouseDownCount = this._lastMouseDownCount + 1;\n        }\n        // c. Invalidate multiple clicking if the logical position is different\n        if (this._lastMouseDownPosition && this._lastMouseDownPosition.equals(newMouseDownPosition)) {\n            this._lastMouseDownPositionEqualCount++;\n        }\n        else {\n            this._lastMouseDownPositionEqualCount = 1;\n        }\n        this._lastMouseDownPosition = newMouseDownPosition;\n        // Finally set the lastMouseDownCount\n        this._lastMouseDownCount = Math.min(setMouseDownCount, this._lastMouseDownPositionEqualCount);\n    }\n}\nMouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME = 400; // ms\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { EventType, Gesture } from '../../../base/browser/touch.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { MouseHandler } from './mouseHandler.js';\nimport { EditorMouseEvent, EditorPointerEventFactory } from '../editorDom.js';\nimport { BrowserFeatures } from '../../../base/browser/canIUse.js';\nimport { TextAreaSyntethicEvents } from './textAreaInput.js';\n/**\n * Currently only tested on iOS 13/ iPadOS.\n */\nexport class PointerEventHandler extends MouseHandler {\n    constructor(context, viewController, viewHelper) {\n        super(context, viewController, viewHelper);\n        this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Tap, (e) => this.onTap(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Change, (e) => this.onChange(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Contextmenu, (e) => this._onContextMenu(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode), false)));\n        this._lastPointerType = 'mouse';\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, 'pointerdown', (e) => {\n            const pointerType = e.pointerType;\n            if (pointerType === 'mouse') {\n                this._lastPointerType = 'mouse';\n                return;\n            }\n            else if (pointerType === 'touch') {\n                this._lastPointerType = 'touch';\n            }\n            else {\n                this._lastPointerType = 'pen';\n            }\n        }));\n        // PonterEvents\n        const pointerEvents = new EditorPointerEventFactory(this.viewHelper.viewDomNode);\n        this._register(pointerEvents.onPointerMove(this.viewHelper.viewDomNode, (e) => this._onMouseMove(e)));\n        this._register(pointerEvents.onPointerUp(this.viewHelper.viewDomNode, (e) => this._onMouseUp(e)));\n        this._register(pointerEvents.onPointerLeave(this.viewHelper.viewDomNode, (e) => this._onMouseLeave(e)));\n        this._register(pointerEvents.onPointerDown(this.viewHelper.viewDomNode, (e, pointerId) => this._onMouseDown(e, pointerId)));\n    }\n    onTap(event) {\n        if (!event.initialTarget || !this.viewHelper.linesContentDomNode.contains(event.initialTarget)) {\n            return;\n        }\n        event.preventDefault();\n        this.viewHelper.focusTextArea();\n        const target = this._createMouseTarget(new EditorMouseEvent(event, false, this.viewHelper.viewDomNode), false);\n        if (target.position) {\n            // this.viewController.moveTo(target.position);\n            this.viewController.dispatchMouse({\n                position: target.position,\n                mouseColumn: target.position.column,\n                startedOnLineNumbers: false,\n                revealType: 1 /* NavigationCommandRevealType.Minimal */,\n                mouseDownCount: event.tapCount,\n                inSelectionMode: false,\n                altKey: false,\n                ctrlKey: false,\n                metaKey: false,\n                shiftKey: false,\n                leftButton: false,\n                middleButton: false,\n                onInjectedText: target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && target.detail.injectedText !== null\n            });\n        }\n    }\n    onChange(e) {\n        if (this._lastPointerType === 'touch') {\n            this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX, -e.translationY);\n        }\n    }\n    _onMouseDown(e, pointerId) {\n        if (e.browserEvent.pointerType === 'touch') {\n            return;\n        }\n        super._onMouseDown(e, pointerId);\n    }\n}\nclass TouchHandler extends MouseHandler {\n    constructor(context, viewController, viewHelper) {\n        super(context, viewController, viewHelper);\n        this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Tap, (e) => this.onTap(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Change, (e) => this.onChange(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Contextmenu, (e) => this._onContextMenu(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode), false)));\n    }\n    onTap(event) {\n        event.preventDefault();\n        this.viewHelper.focusTextArea();\n        const target = this._createMouseTarget(new EditorMouseEvent(event, false, this.viewHelper.viewDomNode), false);\n        if (target.position) {\n            // Send the tap event also to the <textarea> (for input purposes)\n            const event = document.createEvent('CustomEvent');\n            event.initEvent(TextAreaSyntethicEvents.Tap, false, true);\n            this.viewHelper.dispatchTextAreaEvent(event);\n            this.viewController.moveTo(target.position, 1 /* NavigationCommandRevealType.Minimal */);\n        }\n    }\n    onChange(e) {\n        this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX, -e.translationY);\n    }\n}\nexport class PointerHandler extends Disposable {\n    constructor(context, viewController, viewHelper) {\n        super();\n        if ((platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.handler = this._register(new PointerEventHandler(context, viewController, viewHelper));\n        }\n        else if (window.TouchEvent) {\n            this.handler = this._register(new TouchHandler(context, viewController, viewHelper));\n        }\n        else {\n            this.handler = this._register(new MouseHandler(context, viewController, viewHelper));\n        }\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        return this.handler.getTargetAtClientPoint(clientX, clientY);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './textAreaHandler.css';\nimport * as nls from '../../../nls.js';\nimport * as browser from '../../../base/browser/browser.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport * as platform from '../../../base/common/platform.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { CopyOptions, TextAreaInput, TextAreaWrapper } from './textAreaInput.js';\nimport { PagedScreenReaderStrategy, TextAreaState, _debugComposition } from './textAreaState.js';\nimport { PartFingerprints, ViewPart } from '../view/viewPart.js';\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\nimport { Margin } from '../viewParts/margin/margin.js';\nimport { EditorOptions } from '../../common/config/editorOptions.js';\nimport { getMapForWordSeparators } from '../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { Color } from '../../../base/common/color.js';\nimport { IME } from '../../../base/common/ime.js';\nclass VisibleTextAreaData {\n    constructor(_context, modelLineNumber, distanceToModelLineStart, widthOfHiddenLineTextBefore, distanceToModelLineEnd) {\n        this._context = _context;\n        this.modelLineNumber = modelLineNumber;\n        this.distanceToModelLineStart = distanceToModelLineStart;\n        this.widthOfHiddenLineTextBefore = widthOfHiddenLineTextBefore;\n        this.distanceToModelLineEnd = distanceToModelLineEnd;\n        this._visibleTextAreaBrand = undefined;\n        this.startPosition = null;\n        this.endPosition = null;\n        this.visibleTextareaStart = null;\n        this.visibleTextareaEnd = null;\n        /**\n         * When doing composition, the currently composed text might be split up into\n         * multiple tokens, then merged again into a single token, etc. Here we attempt\n         * to keep the presentation of the <textarea> stable by using the previous used\n         * style if multiple tokens come into play. This avoids flickering.\n         */\n        this._previousPresentation = null;\n    }\n    prepareRender(visibleRangeProvider) {\n        const startModelPosition = new Position(this.modelLineNumber, this.distanceToModelLineStart + 1);\n        const endModelPosition = new Position(this.modelLineNumber, this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber) - this.distanceToModelLineEnd);\n        this.startPosition = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(startModelPosition);\n        this.endPosition = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(endModelPosition);\n        if (this.startPosition.lineNumber === this.endPosition.lineNumber) {\n            this.visibleTextareaStart = visibleRangeProvider.visibleRangeForPosition(this.startPosition);\n            this.visibleTextareaEnd = visibleRangeProvider.visibleRangeForPosition(this.endPosition);\n        }\n        else {\n            // TODO: what if the view positions are not on the same line?\n            this.visibleTextareaStart = null;\n            this.visibleTextareaEnd = null;\n        }\n    }\n    definePresentation(tokenPresentation) {\n        if (!this._previousPresentation) {\n            // To avoid flickering, once set, always reuse a presentation throughout the entire IME session\n            if (tokenPresentation) {\n                this._previousPresentation = tokenPresentation;\n            }\n            else {\n                this._previousPresentation = {\n                    foreground: 1 /* ColorId.DefaultForeground */,\n                    italic: false,\n                    bold: false,\n                    underline: false,\n                    strikethrough: false,\n                };\n            }\n        }\n        return this._previousPresentation;\n    }\n}\nconst canUseZeroSizeTextarea = (browser.isFirefox);\nexport class TextAreaHandler extends ViewPart {\n    constructor(context, viewController, visibleRangeProvider) {\n        super(context);\n        this._primaryCursorPosition = new Position(1, 1);\n        this._primaryCursorVisibleRange = null;\n        this._viewController = viewController;\n        this._visibleRangeProvider = visibleRangeProvider;\n        this._scrollLeft = 0;\n        this._scrollTop = 0;\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._setAccessibilityOptions(options);\n        this._contentLeft = layoutInfo.contentLeft;\n        this._contentWidth = layoutInfo.contentWidth;\n        this._contentHeight = layoutInfo.height;\n        this._fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        this._lineHeight = options.get(64 /* EditorOption.lineHeight */);\n        this._emptySelectionClipboard = options.get(35 /* EditorOption.emptySelectionClipboard */);\n        this._copyWithSyntaxHighlighting = options.get(23 /* EditorOption.copyWithSyntaxHighlighting */);\n        this._visibleTextArea = null;\n        this._selections = [new Selection(1, 1, 1, 1)];\n        this._modelSelections = [new Selection(1, 1, 1, 1)];\n        this._lastRenderPosition = null;\n        // Text Area (The focus will always be in the textarea when the cursor is blinking)\n        this.textArea = createFastDomNode(document.createElement('textarea'));\n        PartFingerprints.write(this.textArea, 6 /* PartFingerprint.TextArea */);\n        this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`);\n        this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n        const { tabSize } = this._context.viewModel.model.getOptions();\n        this.textArea.domNode.style.tabSize = `${tabSize * this._fontInfo.spaceWidth}px`;\n        this.textArea.setAttribute('autocorrect', 'off');\n        this.textArea.setAttribute('autocapitalize', 'off');\n        this.textArea.setAttribute('autocomplete', 'off');\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.textArea.setAttribute('aria-label', this._getAriaLabel(options));\n        this.textArea.setAttribute('tabindex', String(options.get(120 /* EditorOption.tabIndex */)));\n        this.textArea.setAttribute('role', 'textbox');\n        this.textArea.setAttribute('aria-roledescription', nls.localize('editor', \"editor\"));\n        this.textArea.setAttribute('aria-multiline', 'true');\n        this.textArea.setAttribute('aria-haspopup', 'false');\n        this.textArea.setAttribute('aria-autocomplete', 'both');\n        this._ensureReadOnlyAttribute();\n        this.textAreaCover = createFastDomNode(document.createElement('div'));\n        this.textAreaCover.setPosition('absolute');\n        const simpleModel = {\n            getLineCount: () => {\n                return this._context.viewModel.getLineCount();\n            },\n            getLineMaxColumn: (lineNumber) => {\n                return this._context.viewModel.getLineMaxColumn(lineNumber);\n            },\n            getValueInRange: (range, eol) => {\n                return this._context.viewModel.getValueInRange(range, eol);\n            },\n            getValueLengthInRange: (range, eol) => {\n                return this._context.viewModel.getValueLengthInRange(range, eol);\n            },\n            modifyPosition: (position, offset) => {\n                return this._context.viewModel.modifyPosition(position, offset);\n            }\n        };\n        const textAreaInputHost = {\n            getDataToCopy: () => {\n                const rawTextToCopy = this._context.viewModel.getPlainTextToCopy(this._modelSelections, this._emptySelectionClipboard, platform.isWindows);\n                const newLineCharacter = this._context.viewModel.model.getEOL();\n                const isFromEmptySelection = (this._emptySelectionClipboard && this._modelSelections.length === 1 && this._modelSelections[0].isEmpty());\n                const multicursorText = (Array.isArray(rawTextToCopy) ? rawTextToCopy : null);\n                const text = (Array.isArray(rawTextToCopy) ? rawTextToCopy.join(newLineCharacter) : rawTextToCopy);\n                let html = undefined;\n                let mode = null;\n                if (CopyOptions.forceCopyWithSyntaxHighlighting || (this._copyWithSyntaxHighlighting && text.length < 65536)) {\n                    const richText = this._context.viewModel.getRichTextToCopy(this._modelSelections, this._emptySelectionClipboard);\n                    if (richText) {\n                        html = richText.html;\n                        mode = richText.mode;\n                    }\n                }\n                return {\n                    isFromEmptySelection,\n                    multicursorText,\n                    text,\n                    html,\n                    mode\n                };\n            },\n            getScreenReaderContent: () => {\n                if (this._accessibilitySupport === 1 /* AccessibilitySupport.Disabled */) {\n                    // We know for a fact that a screen reader is not attached\n                    // On OSX, we write the character before the cursor to allow for \"long-press\" composition\n                    // Also on OSX, we write the word before the cursor to allow for the Accessibility Keyboard to give good hints\n                    const selection = this._selections[0];\n                    if (platform.isMacintosh && selection.isEmpty()) {\n                        const position = selection.getStartPosition();\n                        let textBefore = this._getWordBeforePosition(position);\n                        if (textBefore.length === 0) {\n                            textBefore = this._getCharacterBeforePosition(position);\n                        }\n                        if (textBefore.length > 0) {\n                            return new TextAreaState(textBefore, textBefore.length, textBefore.length, Range.fromPositions(position), 0);\n                        }\n                    }\n                    // on macOS, write current selection into textarea will allow system text services pick selected text,\n                    // but we still want to limit the amount of text given Chromium handles very poorly text even of a few\n                    // thousand chars\n                    // (https://github.com/microsoft/vscode/issues/27799)\n                    const LIMIT_CHARS = 500;\n                    if (platform.isMacintosh && !selection.isEmpty() && simpleModel.getValueLengthInRange(selection, 0 /* EndOfLinePreference.TextDefined */) < LIMIT_CHARS) {\n                        const text = simpleModel.getValueInRange(selection, 0 /* EndOfLinePreference.TextDefined */);\n                        return new TextAreaState(text, 0, text.length, selection, 0);\n                    }\n                    // on Safari, document.execCommand('cut') and document.execCommand('copy') will just not work\n                    // if the textarea has no content selected. So if there is an editor selection, ensure something\n                    // is selected in the textarea.\n                    if (browser.isSafari && !selection.isEmpty()) {\n                        const placeholderText = 'vscode-placeholder';\n                        return new TextAreaState(placeholderText, 0, placeholderText.length, null, undefined);\n                    }\n                    return TextAreaState.EMPTY;\n                }\n                if (browser.isAndroid) {\n                    // when tapping in the editor on a word, Android enters composition mode.\n                    // in the `compositionstart` event we cannot clear the textarea, because\n                    // it then forgets to ever send a `compositionend`.\n                    // we therefore only write the current word in the textarea\n                    const selection = this._selections[0];\n                    if (selection.isEmpty()) {\n                        const position = selection.getStartPosition();\n                        const [wordAtPosition, positionOffsetInWord] = this._getAndroidWordAtPosition(position);\n                        if (wordAtPosition.length > 0) {\n                            return new TextAreaState(wordAtPosition, positionOffsetInWord, positionOffsetInWord, Range.fromPositions(position), 0);\n                        }\n                    }\n                    return TextAreaState.EMPTY;\n                }\n                return PagedScreenReaderStrategy.fromEditorSelection(simpleModel, this._selections[0], this._accessibilityPageSize, this._accessibilitySupport === 0 /* AccessibilitySupport.Unknown */);\n            },\n            deduceModelPosition: (viewAnchorPosition, deltaOffset, lineFeedCnt) => {\n                return this._context.viewModel.deduceModelPositionRelativeToViewPosition(viewAnchorPosition, deltaOffset, lineFeedCnt);\n            }\n        };\n        const textAreaWrapper = this._register(new TextAreaWrapper(this.textArea.domNode));\n        this._textAreaInput = this._register(new TextAreaInput(textAreaInputHost, textAreaWrapper, platform.OS, browser));\n        this._register(this._textAreaInput.onKeyDown((e) => {\n            this._viewController.emitKeyDown(e);\n        }));\n        this._register(this._textAreaInput.onKeyUp((e) => {\n            this._viewController.emitKeyUp(e);\n        }));\n        this._register(this._textAreaInput.onPaste((e) => {\n            let pasteOnNewLine = false;\n            let multicursorText = null;\n            let mode = null;\n            if (e.metadata) {\n                pasteOnNewLine = (this._emptySelectionClipboard && !!e.metadata.isFromEmptySelection);\n                multicursorText = (typeof e.metadata.multicursorText !== 'undefined' ? e.metadata.multicursorText : null);\n                mode = e.metadata.mode;\n            }\n            this._viewController.paste(e.text, pasteOnNewLine, multicursorText, mode);\n        }));\n        this._register(this._textAreaInput.onCut(() => {\n            this._viewController.cut();\n        }));\n        this._register(this._textAreaInput.onType((e) => {\n            if (e.replacePrevCharCnt || e.replaceNextCharCnt || e.positionDelta) {\n                // must be handled through the new command\n                if (_debugComposition) {\n                    console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`);\n                }\n                this._viewController.compositionType(e.text, e.replacePrevCharCnt, e.replaceNextCharCnt, e.positionDelta);\n            }\n            else {\n                if (_debugComposition) {\n                    console.log(` => type: <<${e.text}>>`);\n                }\n                this._viewController.type(e.text);\n            }\n        }));\n        this._register(this._textAreaInput.onSelectionChangeRequest((modelSelection) => {\n            this._viewController.setSelection(modelSelection);\n        }));\n        this._register(this._textAreaInput.onCompositionStart((e) => {\n            // The textarea might contain some content when composition starts.\n            //\n            // When we make the textarea visible, it always has a height of 1 line,\n            // so we don't need to worry too much about content on lines above or below\n            // the selection.\n            //\n            // However, the text on the current line needs to be made visible because\n            // some IME methods allow to move to other glyphs on the current line\n            // (by pressing arrow keys).\n            //\n            // (1) The textarea might contain only some parts of the current line,\n            // like the word before the selection. Also, the content inside the textarea\n            // can grow or shrink as composition occurs. We therefore anchor the textarea\n            // in terms of distance to a certain line start and line end.\n            //\n            // (2) Also, we should not make \\t characters visible, because their rendering\n            // inside the <textarea> will not align nicely with our rendering. We therefore\n            // will hide (if necessary) some of the leading text on the current line.\n            const ta = this.textArea.domNode;\n            const modelSelection = this._modelSelections[0];\n            const { distanceToModelLineStart, widthOfHiddenTextBefore } = (() => {\n                // Find the text that is on the current line before the selection\n                const textBeforeSelection = ta.value.substring(0, Math.min(ta.selectionStart, ta.selectionEnd));\n                const lineFeedOffset1 = textBeforeSelection.lastIndexOf('\\n');\n                const lineTextBeforeSelection = textBeforeSelection.substring(lineFeedOffset1 + 1);\n                // We now search to see if we should hide some part of it (if it contains \\t)\n                const tabOffset1 = lineTextBeforeSelection.lastIndexOf('\\t');\n                const desiredVisibleBeforeCharCount = lineTextBeforeSelection.length - tabOffset1 - 1;\n                const startModelPosition = modelSelection.getStartPosition();\n                const visibleBeforeCharCount = Math.min(startModelPosition.column - 1, desiredVisibleBeforeCharCount);\n                const distanceToModelLineStart = startModelPosition.column - 1 - visibleBeforeCharCount;\n                const hiddenLineTextBefore = lineTextBeforeSelection.substring(0, lineTextBeforeSelection.length - visibleBeforeCharCount);\n                const { tabSize } = this._context.viewModel.model.getOptions();\n                const widthOfHiddenTextBefore = measureText(hiddenLineTextBefore, this._fontInfo, tabSize);\n                return { distanceToModelLineStart, widthOfHiddenTextBefore };\n            })();\n            const { distanceToModelLineEnd } = (() => {\n                // Find the text that is on the current line after the selection\n                const textAfterSelection = ta.value.substring(Math.max(ta.selectionStart, ta.selectionEnd));\n                const lineFeedOffset2 = textAfterSelection.indexOf('\\n');\n                const lineTextAfterSelection = lineFeedOffset2 === -1 ? textAfterSelection : textAfterSelection.substring(0, lineFeedOffset2);\n                const tabOffset2 = lineTextAfterSelection.indexOf('\\t');\n                const desiredVisibleAfterCharCount = (tabOffset2 === -1 ? lineTextAfterSelection.length : lineTextAfterSelection.length - tabOffset2 - 1);\n                const endModelPosition = modelSelection.getEndPosition();\n                const visibleAfterCharCount = Math.min(this._context.viewModel.model.getLineMaxColumn(endModelPosition.lineNumber) - endModelPosition.column, desiredVisibleAfterCharCount);\n                const distanceToModelLineEnd = this._context.viewModel.model.getLineMaxColumn(endModelPosition.lineNumber) - endModelPosition.column - visibleAfterCharCount;\n                return { distanceToModelLineEnd };\n            })();\n            // Scroll to reveal the location in the editor where composition occurs\n            this._context.viewModel.revealRange('keyboard', true, Range.fromPositions(this._selections[0].getStartPosition()), 0 /* viewEvents.VerticalRevealType.Simple */, 1 /* ScrollType.Immediate */);\n            this._visibleTextArea = new VisibleTextAreaData(this._context, modelSelection.startLineNumber, distanceToModelLineStart, widthOfHiddenTextBefore, distanceToModelLineEnd);\n            // We turn off wrapping if the <textarea> becomes visible for composition\n            this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n            this._visibleTextArea.prepareRender(this._visibleRangeProvider);\n            this._render();\n            // Show the textarea\n            this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ime-input`);\n            this._viewController.compositionStart();\n            this._context.viewModel.onCompositionStart();\n        }));\n        this._register(this._textAreaInput.onCompositionUpdate((e) => {\n            if (!this._visibleTextArea) {\n                return;\n            }\n            this._visibleTextArea.prepareRender(this._visibleRangeProvider);\n            this._render();\n        }));\n        this._register(this._textAreaInput.onCompositionEnd(() => {\n            this._visibleTextArea = null;\n            // We turn on wrapping as necessary if the <textarea> hides after composition\n            this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n            this._render();\n            this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`);\n            this._viewController.compositionEnd();\n            this._context.viewModel.onCompositionEnd();\n        }));\n        this._register(this._textAreaInput.onFocus(() => {\n            this._context.viewModel.setHasFocus(true);\n        }));\n        this._register(this._textAreaInput.onBlur(() => {\n            this._context.viewModel.setHasFocus(false);\n        }));\n        this._register(IME.onDidChange(() => {\n            this._ensureReadOnlyAttribute();\n        }));\n    }\n    writeScreenReaderContent(reason) {\n        this._textAreaInput.writeScreenReaderContent(reason);\n    }\n    dispose() {\n        super.dispose();\n    }\n    _getAndroidWordAtPosition(position) {\n        const ANDROID_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\",.<>/?';\n        const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n        const wordSeparators = getMapForWordSeparators(ANDROID_WORD_SEPARATORS);\n        let goingLeft = true;\n        let startColumn = position.column;\n        let goingRight = true;\n        let endColumn = position.column;\n        let distance = 0;\n        while (distance < 50 && (goingLeft || goingRight)) {\n            if (goingLeft && startColumn <= 1) {\n                goingLeft = false;\n            }\n            if (goingLeft) {\n                const charCode = lineContent.charCodeAt(startColumn - 2);\n                const charClass = wordSeparators.get(charCode);\n                if (charClass !== 0 /* WordCharacterClass.Regular */) {\n                    goingLeft = false;\n                }\n                else {\n                    startColumn--;\n                }\n            }\n            if (goingRight && endColumn > lineContent.length) {\n                goingRight = false;\n            }\n            if (goingRight) {\n                const charCode = lineContent.charCodeAt(endColumn - 1);\n                const charClass = wordSeparators.get(charCode);\n                if (charClass !== 0 /* WordCharacterClass.Regular */) {\n                    goingRight = false;\n                }\n                else {\n                    endColumn++;\n                }\n            }\n            distance++;\n        }\n        return [lineContent.substring(startColumn - 1, endColumn - 1), position.column - startColumn];\n    }\n    _getWordBeforePosition(position) {\n        const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n        const wordSeparators = getMapForWordSeparators(this._context.configuration.options.get(126 /* EditorOption.wordSeparators */));\n        let column = position.column;\n        let distance = 0;\n        while (column > 1) {\n            const charCode = lineContent.charCodeAt(column - 2);\n            const charClass = wordSeparators.get(charCode);\n            if (charClass !== 0 /* WordCharacterClass.Regular */ || distance > 50) {\n                return lineContent.substring(column - 1, position.column - 1);\n            }\n            distance++;\n            column--;\n        }\n        return lineContent.substring(0, position.column - 1);\n    }\n    _getCharacterBeforePosition(position) {\n        if (position.column > 1) {\n            const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n            const charBefore = lineContent.charAt(position.column - 2);\n            if (!strings.isHighSurrogate(charBefore.charCodeAt(0))) {\n                return charBefore;\n            }\n        }\n        return '';\n    }\n    _getAriaLabel(options) {\n        const accessibilitySupport = options.get(2 /* EditorOption.accessibilitySupport */);\n        if (accessibilitySupport === 1 /* AccessibilitySupport.Disabled */) {\n            return nls.localize('accessibilityOffAriaLabel', \"The editor is not accessible at this time. Press {0} for options.\", platform.isLinux ? 'Shift+Alt+F1' : 'Alt+F1');\n        }\n        return options.get(4 /* EditorOption.ariaLabel */);\n    }\n    _setAccessibilityOptions(options) {\n        this._accessibilitySupport = options.get(2 /* EditorOption.accessibilitySupport */);\n        const accessibilityPageSize = options.get(3 /* EditorOption.accessibilityPageSize */);\n        if (this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */ && accessibilityPageSize === EditorOptions.accessibilityPageSize.defaultValue) {\n            // If a screen reader is attached and the default value is not set we should automatically increase the page size to 500 for a better experience\n            this._accessibilityPageSize = 500;\n        }\n        else {\n            this._accessibilityPageSize = accessibilityPageSize;\n        }\n        // When wrapping is enabled and a screen reader might be attached,\n        // we will size the textarea to match the width used for wrapping points computation (see `domLineBreaksComputer.ts`).\n        // This is because screen readers will read the text in the textarea and we'd like that the\n        // wrapping points in the textarea match the wrapping points in the editor.\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        const wrappingColumn = layoutInfo.wrappingColumn;\n        if (wrappingColumn !== -1 && this._accessibilitySupport !== 1 /* AccessibilitySupport.Disabled */) {\n            const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n            this._textAreaWrapping = true;\n            this._textAreaWidth = Math.round(wrappingColumn * fontInfo.typicalHalfwidthCharacterWidth);\n        }\n        else {\n            this._textAreaWrapping = false;\n            this._textAreaWidth = (canUseZeroSizeTextarea ? 0 : 1);\n        }\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._setAccessibilityOptions(options);\n        this._contentLeft = layoutInfo.contentLeft;\n        this._contentWidth = layoutInfo.contentWidth;\n        this._contentHeight = layoutInfo.height;\n        this._fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        this._lineHeight = options.get(64 /* EditorOption.lineHeight */);\n        this._emptySelectionClipboard = options.get(35 /* EditorOption.emptySelectionClipboard */);\n        this._copyWithSyntaxHighlighting = options.get(23 /* EditorOption.copyWithSyntaxHighlighting */);\n        this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n        const { tabSize } = this._context.viewModel.model.getOptions();\n        this.textArea.domNode.style.tabSize = `${tabSize * this._fontInfo.spaceWidth}px`;\n        this.textArea.setAttribute('aria-label', this._getAriaLabel(options));\n        this.textArea.setAttribute('tabindex', String(options.get(120 /* EditorOption.tabIndex */)));\n        if (e.hasChanged(32 /* EditorOption.domReadOnly */) || e.hasChanged(88 /* EditorOption.readOnly */)) {\n            this._ensureReadOnlyAttribute();\n        }\n        if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n            this._textAreaInput.writeScreenReaderContent('strategy changed');\n        }\n        return true;\n    }\n    onCursorStateChanged(e) {\n        this._selections = e.selections.slice(0);\n        this._modelSelections = e.modelSelections.slice(0);\n        // We must update the <textarea> synchronously, otherwise long press IME on macos breaks.\n        // See https://github.com/microsoft/vscode/issues/165821\n        this._textAreaInput.writeScreenReaderContent('selection changed');\n        return true;\n    }\n    onDecorationsChanged(e) {\n        // true for inline decorations that can end up relayouting text\n        return true;\n    }\n    onFlushed(e) {\n        return true;\n    }\n    onLinesChanged(e) {\n        return true;\n    }\n    onLinesDeleted(e) {\n        return true;\n    }\n    onLinesInserted(e) {\n        return true;\n    }\n    onScrollChanged(e) {\n        this._scrollLeft = e.scrollLeft;\n        this._scrollTop = e.scrollTop;\n        return true;\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // --- end event handlers\n    // --- begin view API\n    isFocused() {\n        return this._textAreaInput.isFocused();\n    }\n    focusTextArea() {\n        this._textAreaInput.focusTextArea();\n    }\n    getLastRenderData() {\n        return this._lastRenderPosition;\n    }\n    setAriaOptions(options) {\n        if (options.activeDescendant) {\n            this.textArea.setAttribute('aria-haspopup', 'true');\n            this.textArea.setAttribute('aria-autocomplete', 'list');\n            this.textArea.setAttribute('aria-activedescendant', options.activeDescendant);\n        }\n        else {\n            this.textArea.setAttribute('aria-haspopup', 'false');\n            this.textArea.setAttribute('aria-autocomplete', 'both');\n            this.textArea.removeAttribute('aria-activedescendant');\n        }\n        if (options.role) {\n            this.textArea.setAttribute('role', options.role);\n        }\n    }\n    // --- end view API\n    _ensureReadOnlyAttribute() {\n        const options = this._context.configuration.options;\n        // When someone requests to disable IME, we set the \"readonly\" attribute on the <textarea>.\n        // This will prevent composition.\n        const useReadOnly = !IME.enabled || (options.get(32 /* EditorOption.domReadOnly */) && options.get(88 /* EditorOption.readOnly */));\n        if (useReadOnly) {\n            this.textArea.setAttribute('readonly', 'true');\n        }\n        else {\n            this.textArea.removeAttribute('readonly');\n        }\n    }\n    prepareRender(ctx) {\n        var _a;\n        this._primaryCursorPosition = new Position(this._selections[0].positionLineNumber, this._selections[0].positionColumn);\n        this._primaryCursorVisibleRange = ctx.visibleRangeForPosition(this._primaryCursorPosition);\n        (_a = this._visibleTextArea) === null || _a === void 0 ? void 0 : _a.prepareRender(ctx);\n    }\n    render(ctx) {\n        this._textAreaInput.writeScreenReaderContent('render');\n        this._render();\n    }\n    _render() {\n        var _a;\n        if (this._visibleTextArea) {\n            // The text area is visible for composition reasons\n            const visibleStart = this._visibleTextArea.visibleTextareaStart;\n            const visibleEnd = this._visibleTextArea.visibleTextareaEnd;\n            const startPosition = this._visibleTextArea.startPosition;\n            const endPosition = this._visibleTextArea.endPosition;\n            if (startPosition && endPosition && visibleStart && visibleEnd && visibleEnd.left >= this._scrollLeft && visibleStart.left <= this._scrollLeft + this._contentWidth) {\n                const top = (this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber) - this._scrollTop);\n                const lineCount = this._newlinecount(this.textArea.domNode.value.substr(0, this.textArea.domNode.selectionStart));\n                let scrollLeft = this._visibleTextArea.widthOfHiddenLineTextBefore;\n                let left = (this._contentLeft + visibleStart.left - this._scrollLeft);\n                // See https://github.com/microsoft/vscode/issues/141725#issuecomment-1050670841\n                // Here we are adding +1 to avoid flickering that might be caused by having a width that is too small.\n                // This could be caused by rounding errors that might only show up with certain font families.\n                // In other words, a pixel might be lost when doing something like\n                //      `Math.round(end) - Math.round(start)`\n                // vs\n                //      `Math.round(end - start)`\n                let width = visibleEnd.left - visibleStart.left + 1;\n                if (left < this._contentLeft) {\n                    // the textarea would be rendered on top of the margin,\n                    // so reduce its width. We use the same technique as\n                    // for hiding text before\n                    const delta = (this._contentLeft - left);\n                    left += delta;\n                    scrollLeft += delta;\n                    width -= delta;\n                }\n                if (width > this._contentWidth) {\n                    // the textarea would be wider than the content width,\n                    // so reduce its width.\n                    width = this._contentWidth;\n                }\n                // Try to render the textarea with the color/font style to match the text under it\n                const viewLineData = this._context.viewModel.getViewLineData(startPosition.lineNumber);\n                const startTokenIndex = viewLineData.tokens.findTokenIndexAtOffset(startPosition.column - 1);\n                const endTokenIndex = viewLineData.tokens.findTokenIndexAtOffset(endPosition.column - 1);\n                const textareaSpansSingleToken = (startTokenIndex === endTokenIndex);\n                const presentation = this._visibleTextArea.definePresentation((textareaSpansSingleToken ? viewLineData.tokens.getPresentation(startTokenIndex) : null));\n                this.textArea.domNode.scrollTop = lineCount * this._lineHeight;\n                this.textArea.domNode.scrollLeft = scrollLeft;\n                this._doRender({\n                    lastRenderPosition: null,\n                    top: top,\n                    left: left,\n                    width: width,\n                    height: this._lineHeight,\n                    useCover: false,\n                    color: (TokenizationRegistry.getColorMap() || [])[presentation.foreground],\n                    italic: presentation.italic,\n                    bold: presentation.bold,\n                    underline: presentation.underline,\n                    strikethrough: presentation.strikethrough\n                });\n            }\n            return;\n        }\n        if (!this._primaryCursorVisibleRange) {\n            // The primary cursor is outside the viewport => place textarea to the top left\n            this._renderAtTopLeft();\n            return;\n        }\n        const left = this._contentLeft + this._primaryCursorVisibleRange.left - this._scrollLeft;\n        if (left < this._contentLeft || left > this._contentLeft + this._contentWidth) {\n            // cursor is outside the viewport\n            this._renderAtTopLeft();\n            return;\n        }\n        const top = this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber) - this._scrollTop;\n        if (top < 0 || top > this._contentHeight) {\n            // cursor is outside the viewport\n            this._renderAtTopLeft();\n            return;\n        }\n        // The primary cursor is in the viewport (at least vertically) => place textarea on the cursor\n        if (platform.isMacintosh) {\n            // For the popup emoji input, we will make the text area as high as the line height\n            // We will also make the fontSize and lineHeight the correct dimensions to help with the placement of these pickers\n            this._doRender({\n                lastRenderPosition: this._primaryCursorPosition,\n                top,\n                left: this._textAreaWrapping ? this._contentLeft : left,\n                width: this._textAreaWidth,\n                height: this._lineHeight,\n                useCover: false\n            });\n            // In case the textarea contains a word, we're going to try to align the textarea's cursor\n            // with our cursor by scrolling the textarea as much as possible\n            this.textArea.domNode.scrollLeft = this._primaryCursorVisibleRange.left;\n            const lineCount = (_a = this._textAreaInput.textAreaState.newlineCountBeforeSelection) !== null && _a !== void 0 ? _a : this._newlinecount(this.textArea.domNode.value.substr(0, this.textArea.domNode.selectionStart));\n            this.textArea.domNode.scrollTop = lineCount * this._lineHeight;\n            return;\n        }\n        this._doRender({\n            lastRenderPosition: this._primaryCursorPosition,\n            top: top,\n            left: this._textAreaWrapping ? this._contentLeft : left,\n            width: this._textAreaWidth,\n            height: (canUseZeroSizeTextarea ? 0 : 1),\n            useCover: false\n        });\n    }\n    _newlinecount(text) {\n        let result = 0;\n        let startIndex = -1;\n        do {\n            startIndex = text.indexOf('\\n', startIndex + 1);\n            if (startIndex === -1) {\n                break;\n            }\n            result++;\n        } while (true);\n        return result;\n    }\n    _renderAtTopLeft() {\n        // (in WebKit the textarea is 1px by 1px because it cannot handle input to a 0x0 textarea)\n        // specifically, when doing Korean IME, setting the textarea to 0x0 breaks IME badly.\n        this._doRender({\n            lastRenderPosition: null,\n            top: 0,\n            left: 0,\n            width: this._textAreaWidth,\n            height: (canUseZeroSizeTextarea ? 0 : 1),\n            useCover: true\n        });\n    }\n    _doRender(renderData) {\n        this._lastRenderPosition = renderData.lastRenderPosition;\n        const ta = this.textArea;\n        const tac = this.textAreaCover;\n        applyFontInfo(ta, this._fontInfo);\n        ta.setTop(renderData.top);\n        ta.setLeft(renderData.left);\n        ta.setWidth(renderData.width);\n        ta.setHeight(renderData.height);\n        ta.setColor(renderData.color ? Color.Format.CSS.formatHex(renderData.color) : '');\n        ta.setFontStyle(renderData.italic ? 'italic' : '');\n        if (renderData.bold) {\n            // fontWeight is also set by `applyFontInfo`, so only overwrite it if necessary\n            ta.setFontWeight('bold');\n        }\n        ta.setTextDecoration(`${renderData.underline ? ' underline' : ''}${renderData.strikethrough ? ' line-through' : ''}`);\n        tac.setTop(renderData.useCover ? renderData.top : 0);\n        tac.setLeft(renderData.useCover ? renderData.left : 0);\n        tac.setWidth(renderData.useCover ? renderData.width : 0);\n        tac.setHeight(renderData.useCover ? renderData.height : 0);\n        const options = this._context.configuration.options;\n        if (options.get(55 /* EditorOption.glyphMargin */)) {\n            tac.setClassName('monaco-editor-background textAreaCover ' + Margin.OUTER_CLASS_NAME);\n        }\n        else {\n            if (options.get(65 /* EditorOption.lineNumbers */).renderType !== 0 /* RenderLineNumbersType.Off */) {\n                tac.setClassName('monaco-editor-background textAreaCover ' + LineNumbersOverlay.CLASS_NAME);\n            }\n            else {\n                tac.setClassName('monaco-editor-background textAreaCover');\n            }\n        }\n    }\n}\nfunction measureText(text, fontInfo, tabSize) {\n    if (text.length === 0) {\n        return 0;\n    }\n    const container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '-50000px';\n    container.style.width = '50000px';\n    const regularDomNode = document.createElement('span');\n    applyFontInfo(regularDomNode, fontInfo);\n    regularDomNode.style.whiteSpace = 'pre'; // just like the textarea\n    regularDomNode.style.tabSize = `${tabSize * fontInfo.spaceWidth}px`; // just like the textarea\n    regularDomNode.append(text);\n    container.appendChild(regularDomNode);\n    document.body.appendChild(container);\n    const res = regularDomNode.offsetWidth;\n    document.body.removeChild(container);\n    return res;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { inputLatency } from '../../../base/browser/performance.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TextAreaState, _debugComposition } from './textAreaState.js';\nimport { Selection } from '../../common/core/selection.js';\nexport var TextAreaSyntethicEvents;\n(function (TextAreaSyntethicEvents) {\n    TextAreaSyntethicEvents.Tap = '-monaco-textarea-synthetic-tap';\n})(TextAreaSyntethicEvents || (TextAreaSyntethicEvents = {}));\nexport const CopyOptions = {\n    forceCopyWithSyntaxHighlighting: false\n};\n/**\n * Every time we write to the clipboard, we record a bit of extra metadata here.\n * Every time we read from the cipboard, if the text matches our last written text,\n * we can fetch the previous metadata.\n */\nexport class InMemoryClipboardMetadataManager {\n    constructor() {\n        this._lastState = null;\n    }\n    set(lastCopiedValue, data) {\n        this._lastState = { lastCopiedValue, data };\n    }\n    get(pastedText) {\n        if (this._lastState && this._lastState.lastCopiedValue === pastedText) {\n            // match!\n            return this._lastState.data;\n        }\n        this._lastState = null;\n        return null;\n    }\n}\nInMemoryClipboardMetadataManager.INSTANCE = new InMemoryClipboardMetadataManager();\nclass CompositionContext {\n    constructor() {\n        this._lastTypeTextLength = 0;\n    }\n    handleCompositionUpdate(text) {\n        text = text || '';\n        const typeInput = {\n            text: text,\n            replacePrevCharCnt: this._lastTypeTextLength,\n            replaceNextCharCnt: 0,\n            positionDelta: 0\n        };\n        this._lastTypeTextLength = text.length;\n        return typeInput;\n    }\n}\n/**\n * Writes screen reader content to the textarea and is able to analyze its input events to generate:\n *  - onCut\n *  - onPaste\n *  - onType\n *\n * Composition events are generated for presentation purposes (composition input is reflected in onType).\n */\nexport class TextAreaInput extends Disposable {\n    get textAreaState() {\n        return this._textAreaState;\n    }\n    constructor(_host, _textArea, _OS, _browser) {\n        super();\n        this._host = _host;\n        this._textArea = _textArea;\n        this._OS = _OS;\n        this._browser = _browser;\n        this._onFocus = this._register(new Emitter());\n        this.onFocus = this._onFocus.event;\n        this._onBlur = this._register(new Emitter());\n        this.onBlur = this._onBlur.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onKeyUp = this._register(new Emitter());\n        this.onKeyUp = this._onKeyUp.event;\n        this._onCut = this._register(new Emitter());\n        this.onCut = this._onCut.event;\n        this._onPaste = this._register(new Emitter());\n        this.onPaste = this._onPaste.event;\n        this._onType = this._register(new Emitter());\n        this.onType = this._onType.event;\n        this._onCompositionStart = this._register(new Emitter());\n        this.onCompositionStart = this._onCompositionStart.event;\n        this._onCompositionUpdate = this._register(new Emitter());\n        this.onCompositionUpdate = this._onCompositionUpdate.event;\n        this._onCompositionEnd = this._register(new Emitter());\n        this.onCompositionEnd = this._onCompositionEnd.event;\n        this._onSelectionChangeRequest = this._register(new Emitter());\n        this.onSelectionChangeRequest = this._onSelectionChangeRequest.event;\n        this._asyncTriggerCut = this._register(new RunOnceScheduler(() => this._onCut.fire(), 0));\n        this._asyncFocusGainWriteScreenReaderContent = this._register(new RunOnceScheduler(() => this.writeScreenReaderContent('asyncFocusGain'), 0));\n        this._textAreaState = TextAreaState.EMPTY;\n        this._selectionChangeListener = null;\n        this.writeScreenReaderContent('ctor');\n        this._hasFocus = false;\n        this._currentComposition = null;\n        let lastKeyDown = null;\n        this._register(this._textArea.onKeyDown((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            if (e.keyCode === 114 /* KeyCode.KEY_IN_COMPOSITION */\n                || (this._currentComposition && e.keyCode === 1 /* KeyCode.Backspace */)) {\n                // Stop propagation for keyDown events if the IME is processing key input\n                e.stopPropagation();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                // Prevent default always for `Esc`, otherwise it will generate a keypress\n                // See https://msdn.microsoft.com/en-us/library/ie/ms536939(v=vs.85).aspx\n                e.preventDefault();\n            }\n            lastKeyDown = e;\n            this._onKeyDown.fire(e);\n        }));\n        this._register(this._textArea.onKeyUp((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            this._onKeyUp.fire(e);\n        }));\n        this._register(this._textArea.onCompositionStart((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionstart]`, e);\n            }\n            const currentComposition = new CompositionContext();\n            if (this._currentComposition) {\n                // simply reset the composition context\n                this._currentComposition = currentComposition;\n                return;\n            }\n            this._currentComposition = currentComposition;\n            if (this._OS === 2 /* OperatingSystem.Macintosh */\n                && lastKeyDown\n                && lastKeyDown.equals(114 /* KeyCode.KEY_IN_COMPOSITION */)\n                && this._textAreaState.selectionStart === this._textAreaState.selectionEnd\n                && this._textAreaState.selectionStart > 0\n                && this._textAreaState.value.substr(this._textAreaState.selectionStart - 1, 1) === e.data\n                && (lastKeyDown.code === 'ArrowRight' || lastKeyDown.code === 'ArrowLeft')) {\n                // Handling long press case on Chromium/Safari macOS + arrow key => pretend the character was selected\n                if (_debugComposition) {\n                    console.log(`[compositionstart] Handling long press case on macOS + arrow key`, e);\n                }\n                // Pretend the previous character was composed (in order to get it removed by subsequent compositionupdate events)\n                currentComposition.handleCompositionUpdate('x');\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // when tapping on the editor, Android enters composition mode to edit the current word\n                // so we cannot clear the textarea on Android and we must pretend the current word was selected\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            this._onCompositionStart.fire({ data: e.data });\n        }));\n        this._register(this._textArea.onCompositionUpdate((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionupdate]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // should not be possible to receive a 'compositionupdate' without a 'compositionstart'\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionUpdate.fire(e);\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            this._onType.fire(typeInput);\n            this._onCompositionUpdate.fire(e);\n        }));\n        this._register(this._textArea.onCompositionEnd((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionend]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // https://github.com/microsoft/monaco-editor/issues/1663\n                // On iOS 13.2, Chinese system IME randomly trigger an additional compositionend event with empty data\n                return;\n            }\n            this._currentComposition = null;\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionEnd.fire();\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            this._onType.fire(typeInput);\n            this._onCompositionEnd.fire();\n        }));\n        this._register(this._textArea.onInput((e) => {\n            if (_debugComposition) {\n                console.log(`[input]`, e);\n            }\n            // Pretend here we touched the text area, as the `input` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received input event');\n            if (this._currentComposition) {\n                return;\n            }\n            const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            const typeInput = TextAreaState.deduceInput(this._textAreaState, newState, /*couldBeEmojiInput*/ this._OS === 2 /* OperatingSystem.Macintosh */);\n            if (typeInput.replacePrevCharCnt === 0 && typeInput.text.length === 1) {\n                // one character was typed\n                if (strings.isHighSurrogate(typeInput.text.charCodeAt(0))\n                    || typeInput.text.charCodeAt(0) === 0x7f /* Delete */) {\n                    // Ignore invalid input but keep it around for next time\n                    return;\n                }\n            }\n            this._textAreaState = newState;\n            if (typeInput.text !== ''\n                || typeInput.replacePrevCharCnt !== 0\n                || typeInput.replaceNextCharCnt !== 0\n                || typeInput.positionDelta !== 0) {\n                this._onType.fire(typeInput);\n            }\n        }));\n        // --- Clipboard operations\n        this._register(this._textArea.onCut((e) => {\n            // Pretend here we touched the text area, as the `cut` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received cut event');\n            this._ensureClipboardGetsEditorSelection(e);\n            this._asyncTriggerCut.schedule();\n        }));\n        this._register(this._textArea.onCopy((e) => {\n            this._ensureClipboardGetsEditorSelection(e);\n        }));\n        this._register(this._textArea.onPaste((e) => {\n            // Pretend here we touched the text area, as the `paste` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received paste event');\n            e.preventDefault();\n            if (!e.clipboardData) {\n                return;\n            }\n            let [text, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\n            if (!text) {\n                return;\n            }\n            // try the in-memory store\n            metadata = metadata || InMemoryClipboardMetadataManager.INSTANCE.get(text);\n            this._onPaste.fire({\n                text: text,\n                metadata: metadata\n            });\n        }));\n        this._register(this._textArea.onFocus(() => {\n            const hadFocus = this._hasFocus;\n            this._setHasFocus(true);\n            if (this._browser.isSafari && !hadFocus && this._hasFocus) {\n                // When \"tabbing into\" the textarea, immediately after dispatching the 'focus' event,\n                // Safari will always move the selection at offset 0 in the textarea\n                this._asyncFocusGainWriteScreenReaderContent.schedule();\n            }\n        }));\n        this._register(this._textArea.onBlur(() => {\n            if (this._currentComposition) {\n                // See https://github.com/microsoft/vscode/issues/112621\n                // where compositionend is not triggered when the editor\n                // is taken off-dom during a composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('blurWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n            this._setHasFocus(false);\n        }));\n        this._register(this._textArea.onSyntheticTap(() => {\n            if (this._browser.isAndroid && this._currentComposition) {\n                // on Android, tapping does not cancel the current composition, so the\n                // textarea is stuck showing the old composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('tapWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n        }));\n    }\n    _installSelectionChangeListener() {\n        // See https://github.com/microsoft/vscode/issues/27216 and https://github.com/microsoft/vscode/issues/98256\n        // When using a Braille display, it is possible for users to reposition the\n        // system caret. This is reflected in Chrome as a `selectionchange` event.\n        //\n        // The `selectionchange` event appears to be emitted under numerous other circumstances,\n        // so it is quite a challenge to distinguish a `selectionchange` coming in from a user\n        // using a Braille display from all the other cases.\n        //\n        // The problems with the `selectionchange` event are:\n        //  * the event is emitted when the textarea is focused programmatically -- textarea.focus()\n        //  * the event is emitted when the selection is changed in the textarea programmatically -- textarea.setSelectionRange(...)\n        //  * the event is emitted when the value of the textarea is changed programmatically -- textarea.value = '...'\n        //  * the event is emitted when tabbing into the textarea\n        //  * the event is emitted asynchronously (sometimes with a delay as high as a few tens of ms)\n        //  * the event sometimes comes in bursts for a single logical textarea operation\n        // `selectionchange` events often come multiple times for a single logical change\n        // so throttle multiple `selectionchange` events that burst in a short period of time.\n        let previousSelectionChangeEventTime = 0;\n        return dom.addDisposableListener(document, 'selectionchange', (e) => {\n            inputLatency.onSelectionChange();\n            if (!this._hasFocus) {\n                return;\n            }\n            if (this._currentComposition) {\n                return;\n            }\n            if (!this._browser.isChrome) {\n                // Support only for Chrome until testing happens on other browsers\n                return;\n            }\n            const now = Date.now();\n            const delta1 = now - previousSelectionChangeEventTime;\n            previousSelectionChangeEventTime = now;\n            if (delta1 < 5) {\n                // received another `selectionchange` event within 5ms of the previous `selectionchange` event\n                // => ignore it\n                return;\n            }\n            const delta2 = now - this._textArea.getIgnoreSelectionChangeTime();\n            this._textArea.resetSelectionChangeTime();\n            if (delta2 < 100) {\n                // received a `selectionchange` event within 100ms since we touched the textarea\n                // => ignore it, since we caused it\n                return;\n            }\n            if (!this._textAreaState.selection) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newValue = this._textArea.getValue();\n            if (this._textAreaState.value !== newValue) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newSelectionStart = this._textArea.getSelectionStart();\n            const newSelectionEnd = this._textArea.getSelectionEnd();\n            if (this._textAreaState.selectionStart === newSelectionStart && this._textAreaState.selectionEnd === newSelectionEnd) {\n                // Nothing to do...\n                return;\n            }\n            const _newSelectionStartPosition = this._textAreaState.deduceEditorPosition(newSelectionStart);\n            const newSelectionStartPosition = this._host.deduceModelPosition(_newSelectionStartPosition[0], _newSelectionStartPosition[1], _newSelectionStartPosition[2]);\n            const _newSelectionEndPosition = this._textAreaState.deduceEditorPosition(newSelectionEnd);\n            const newSelectionEndPosition = this._host.deduceModelPosition(_newSelectionEndPosition[0], _newSelectionEndPosition[1], _newSelectionEndPosition[2]);\n            const newSelection = new Selection(newSelectionStartPosition.lineNumber, newSelectionStartPosition.column, newSelectionEndPosition.lineNumber, newSelectionEndPosition.column);\n            this._onSelectionChangeRequest.fire(newSelection);\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n    }\n    focusTextArea() {\n        // Setting this._hasFocus and writing the screen reader content\n        // will result in a focus() and setSelectionRange() in the textarea\n        this._setHasFocus(true);\n        // If the editor is off DOM, focus cannot be really set, so let's double check that we have managed to set the focus\n        this.refreshFocusState();\n    }\n    isFocused() {\n        return this._hasFocus;\n    }\n    refreshFocusState() {\n        this._setHasFocus(this._textArea.hasFocus());\n    }\n    _setHasFocus(newHasFocus) {\n        if (this._hasFocus === newHasFocus) {\n            // no change\n            return;\n        }\n        this._hasFocus = newHasFocus;\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n        if (this._hasFocus) {\n            this._selectionChangeListener = this._installSelectionChangeListener();\n        }\n        if (this._hasFocus) {\n            this.writeScreenReaderContent('focusgain');\n        }\n        if (this._hasFocus) {\n            this._onFocus.fire();\n        }\n        else {\n            this._onBlur.fire();\n        }\n    }\n    _setAndWriteTextAreaState(reason, textAreaState) {\n        if (!this._hasFocus) {\n            textAreaState = textAreaState.collapseSelection();\n        }\n        textAreaState.writeToTextArea(reason, this._textArea, this._hasFocus);\n        this._textAreaState = textAreaState;\n    }\n    writeScreenReaderContent(reason) {\n        if (this._currentComposition) {\n            // Do not write to the text area when doing composition\n            return;\n        }\n        this._setAndWriteTextAreaState(reason, this._host.getScreenReaderContent());\n    }\n    _ensureClipboardGetsEditorSelection(e) {\n        const dataToCopy = this._host.getDataToCopy();\n        const storedMetadata = {\n            version: 1,\n            isFromEmptySelection: dataToCopy.isFromEmptySelection,\n            multicursorText: dataToCopy.multicursorText,\n            mode: dataToCopy.mode\n        };\n        InMemoryClipboardMetadataManager.INSTANCE.set(\n        // When writing \"LINE\\r\\n\" to the clipboard and then pasting,\n        // Firefox pastes \"LINE\\n\", so let's work around this quirk\n        (this._browser.isFirefox ? dataToCopy.text.replace(/\\r\\n/g, '\\n') : dataToCopy.text), storedMetadata);\n        e.preventDefault();\n        if (e.clipboardData) {\n            ClipboardEventUtils.setTextData(e.clipboardData, dataToCopy.text, dataToCopy.html, storedMetadata);\n        }\n    }\n}\nclass ClipboardEventUtils {\n    static getTextData(clipboardData) {\n        const text = clipboardData.getData(Mimes.text);\n        let metadata = null;\n        const rawmetadata = clipboardData.getData('vscode-editor-data');\n        if (typeof rawmetadata === 'string') {\n            try {\n                metadata = JSON.parse(rawmetadata);\n                if (metadata.version !== 1) {\n                    metadata = null;\n                }\n            }\n            catch (err) {\n                // no problem!\n            }\n        }\n        if (text.length === 0 && metadata === null && clipboardData.files.length > 0) {\n            // no textual data pasted, generate text from file names\n            const files = Array.prototype.slice.call(clipboardData.files, 0);\n            return [files.map(file => file.name).join('\\n'), null];\n        }\n        return [text, metadata];\n    }\n    static setTextData(clipboardData, text, html, metadata) {\n        clipboardData.setData(Mimes.text, text);\n        if (typeof html === 'string') {\n            clipboardData.setData('text/html', html);\n        }\n        clipboardData.setData('vscode-editor-data', JSON.stringify(metadata));\n    }\n}\nexport class TextAreaWrapper extends Disposable {\n    constructor(_actual) {\n        super();\n        this._actual = _actual;\n        this.onKeyDown = this._register(new DomEmitter(this._actual, 'keydown')).event;\n        this.onKeyUp = this._register(new DomEmitter(this._actual, 'keyup')).event;\n        this.onCompositionStart = this._register(new DomEmitter(this._actual, 'compositionstart')).event;\n        this.onCompositionUpdate = this._register(new DomEmitter(this._actual, 'compositionupdate')).event;\n        this.onCompositionEnd = this._register(new DomEmitter(this._actual, 'compositionend')).event;\n        this.onBeforeInput = this._register(new DomEmitter(this._actual, 'beforeinput')).event;\n        this.onInput = this._register(new DomEmitter(this._actual, 'input')).event;\n        this.onCut = this._register(new DomEmitter(this._actual, 'cut')).event;\n        this.onCopy = this._register(new DomEmitter(this._actual, 'copy')).event;\n        this.onPaste = this._register(new DomEmitter(this._actual, 'paste')).event;\n        this.onFocus = this._register(new DomEmitter(this._actual, 'focus')).event;\n        this.onBlur = this._register(new DomEmitter(this._actual, 'blur')).event;\n        this._onSyntheticTap = this._register(new Emitter());\n        this.onSyntheticTap = this._onSyntheticTap.event;\n        this._ignoreSelectionChangeTime = 0;\n        this._register(this.onKeyDown(() => inputLatency.onKeyDown()));\n        this._register(this.onBeforeInput(() => inputLatency.onBeforeInput()));\n        this._register(this.onInput(() => inputLatency.onInput()));\n        this._register(this.onKeyUp(() => inputLatency.onKeyUp()));\n        this._register(dom.addDisposableListener(this._actual, TextAreaSyntethicEvents.Tap, () => this._onSyntheticTap.fire()));\n    }\n    hasFocus() {\n        const shadowRoot = dom.getShadowRoot(this._actual);\n        if (shadowRoot) {\n            return shadowRoot.activeElement === this._actual;\n        }\n        else if (dom.isInDOM(this._actual)) {\n            return document.activeElement === this._actual;\n        }\n        else {\n            return false;\n        }\n    }\n    setIgnoreSelectionChangeTime(reason) {\n        this._ignoreSelectionChangeTime = Date.now();\n    }\n    getIgnoreSelectionChangeTime() {\n        return this._ignoreSelectionChangeTime;\n    }\n    resetSelectionChangeTime() {\n        this._ignoreSelectionChangeTime = 0;\n    }\n    getValue() {\n        // console.log('current value: ' + this._textArea.value);\n        return this._actual.value;\n    }\n    setValue(reason, value) {\n        const textArea = this._actual;\n        if (textArea.value === value) {\n            // No change\n            return;\n        }\n        // console.log('reason: ' + reason + ', current value: ' + textArea.value + ' => new value: ' + value);\n        this.setIgnoreSelectionChangeTime('setValue');\n        textArea.value = value;\n    }\n    getSelectionStart() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionEnd : this._actual.selectionStart;\n    }\n    getSelectionEnd() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionStart : this._actual.selectionEnd;\n    }\n    setSelectionRange(reason, selectionStart, selectionEnd) {\n        const textArea = this._actual;\n        let activeElement = null;\n        const shadowRoot = dom.getShadowRoot(textArea);\n        if (shadowRoot) {\n            activeElement = shadowRoot.activeElement;\n        }\n        else {\n            activeElement = document.activeElement;\n        }\n        const currentIsFocused = (activeElement === textArea);\n        const currentSelectionStart = textArea.selectionStart;\n        const currentSelectionEnd = textArea.selectionEnd;\n        if (currentIsFocused && currentSelectionStart === selectionStart && currentSelectionEnd === selectionEnd) {\n            // No change\n            // Firefox iframe bug https://github.com/microsoft/monaco-editor/issues/643#issuecomment-367871377\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // console.log('reason: ' + reason + ', setSelectionRange: ' + selectionStart + ' -> ' + selectionEnd);\n        if (currentIsFocused) {\n            // No need to focus, only need to change the selection range\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // If the focus is outside the textarea, browsers will try really hard to reveal the textarea.\n        // Here, we try to undo the browser's desperate reveal.\n        try {\n            const scrollState = dom.saveParentsScrollTop(textArea);\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.focus();\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            dom.restoreParentsScrollTop(textArea, scrollState);\n        }\n        catch (e) {\n            // Sometimes IE throws when setting selection (e.g. textarea is off-DOM)\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { Range } from '../../common/core/range.js';\nexport const _debugComposition = false;\nexport class TextAreaState {\n    constructor(value, \n    /** the offset where selection starts inside `value` */\n    selectionStart, \n    /** the offset where selection ends inside `value` */\n    selectionEnd, \n    /** the editor range in the view coordinate system that matches the selection inside `value` */\n    selection, \n    /** the visible line count (wrapped, not necessarily matching \\n characters) for the text in `value` before `selectionStart` */\n    newlineCountBeforeSelection) {\n        this.value = value;\n        this.selectionStart = selectionStart;\n        this.selectionEnd = selectionEnd;\n        this.selection = selection;\n        this.newlineCountBeforeSelection = newlineCountBeforeSelection;\n    }\n    toString() {\n        return `[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`;\n    }\n    static readFromTextArea(textArea, previousState) {\n        const value = textArea.getValue();\n        const selectionStart = textArea.getSelectionStart();\n        const selectionEnd = textArea.getSelectionEnd();\n        let newlineCountBeforeSelection = undefined;\n        if (previousState) {\n            const valueBeforeSelectionStart = value.substring(0, selectionStart);\n            const previousValueBeforeSelectionStart = previousState.value.substring(0, previousState.selectionStart);\n            if (valueBeforeSelectionStart === previousValueBeforeSelectionStart) {\n                newlineCountBeforeSelection = previousState.newlineCountBeforeSelection;\n            }\n        }\n        return new TextAreaState(value, selectionStart, selectionEnd, null, newlineCountBeforeSelection);\n    }\n    collapseSelection() {\n        if (this.selectionStart === this.value.length) {\n            return this;\n        }\n        return new TextAreaState(this.value, this.value.length, this.value.length, null, undefined);\n    }\n    writeToTextArea(reason, textArea, select) {\n        if (_debugComposition) {\n            console.log(`writeToTextArea ${reason}: ${this.toString()}`);\n        }\n        textArea.setValue(reason, this.value);\n        if (select) {\n            textArea.setSelectionRange(reason, this.selectionStart, this.selectionEnd);\n        }\n    }\n    deduceEditorPosition(offset) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        if (offset <= this.selectionStart) {\n            const str = this.value.substring(offset, this.selectionStart);\n            return this._finishDeduceEditorPosition((_b = (_a = this.selection) === null || _a === void 0 ? void 0 : _a.getStartPosition()) !== null && _b !== void 0 ? _b : null, str, -1);\n        }\n        if (offset >= this.selectionEnd) {\n            const str = this.value.substring(this.selectionEnd, offset);\n            return this._finishDeduceEditorPosition((_d = (_c = this.selection) === null || _c === void 0 ? void 0 : _c.getEndPosition()) !== null && _d !== void 0 ? _d : null, str, 1);\n        }\n        const str1 = this.value.substring(this.selectionStart, offset);\n        if (str1.indexOf(String.fromCharCode(8230)) === -1) {\n            return this._finishDeduceEditorPosition((_f = (_e = this.selection) === null || _e === void 0 ? void 0 : _e.getStartPosition()) !== null && _f !== void 0 ? _f : null, str1, 1);\n        }\n        const str2 = this.value.substring(offset, this.selectionEnd);\n        return this._finishDeduceEditorPosition((_h = (_g = this.selection) === null || _g === void 0 ? void 0 : _g.getEndPosition()) !== null && _h !== void 0 ? _h : null, str2, -1);\n    }\n    _finishDeduceEditorPosition(anchor, deltaText, signum) {\n        let lineFeedCnt = 0;\n        let lastLineFeedIndex = -1;\n        while ((lastLineFeedIndex = deltaText.indexOf('\\n', lastLineFeedIndex + 1)) !== -1) {\n            lineFeedCnt++;\n        }\n        return [anchor, signum * deltaText.length, lineFeedCnt];\n    }\n    static deduceInput(previousState, currentState, couldBeEmojiInput) {\n        if (!previousState) {\n            // This is the EMPTY state\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        if (_debugComposition) {\n            console.log('------------------------deduceInput');\n            console.log(`PREVIOUS STATE: ${previousState.toString()}`);\n            console.log(`CURRENT STATE: ${currentState.toString()}`);\n        }\n        const prefixLength = Math.min(strings.commonPrefixLength(previousState.value, currentState.value), previousState.selectionStart, currentState.selectionStart);\n        const suffixLength = Math.min(strings.commonSuffixLength(previousState.value, currentState.value), previousState.value.length - previousState.selectionEnd, currentState.value.length - currentState.selectionEnd);\n        const previousValue = previousState.value.substring(prefixLength, previousState.value.length - suffixLength);\n        const currentValue = currentState.value.substring(prefixLength, currentState.value.length - suffixLength);\n        const previousSelectionStart = previousState.selectionStart - prefixLength;\n        const previousSelectionEnd = previousState.selectionEnd - prefixLength;\n        const currentSelectionStart = currentState.selectionStart - prefixLength;\n        const currentSelectionEnd = currentState.selectionEnd - prefixLength;\n        if (_debugComposition) {\n            console.log(`AFTER DIFFING PREVIOUS STATE: <${previousValue}>, selectionStart: ${previousSelectionStart}, selectionEnd: ${previousSelectionEnd}`);\n            console.log(`AFTER DIFFING CURRENT STATE: <${currentValue}>, selectionStart: ${currentSelectionStart}, selectionEnd: ${currentSelectionEnd}`);\n        }\n        if (currentSelectionStart === currentSelectionEnd) {\n            // no current selection\n            const replacePreviousCharacters = (previousState.selectionStart - prefixLength);\n            if (_debugComposition) {\n                console.log(`REMOVE PREVIOUS: ${replacePreviousCharacters} chars`);\n            }\n            return {\n                text: currentValue,\n                replacePrevCharCnt: replacePreviousCharacters,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        // there is a current selection => composition case\n        const replacePreviousCharacters = previousSelectionEnd - previousSelectionStart;\n        return {\n            text: currentValue,\n            replacePrevCharCnt: replacePreviousCharacters,\n            replaceNextCharCnt: 0,\n            positionDelta: 0\n        };\n    }\n    static deduceAndroidCompositionInput(previousState, currentState) {\n        if (!previousState) {\n            // This is the EMPTY state\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        if (_debugComposition) {\n            console.log('------------------------deduceAndroidCompositionInput');\n            console.log(`PREVIOUS STATE: ${previousState.toString()}`);\n            console.log(`CURRENT STATE: ${currentState.toString()}`);\n        }\n        if (previousState.value === currentState.value) {\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: currentState.selectionEnd - previousState.selectionEnd\n            };\n        }\n        const prefixLength = Math.min(strings.commonPrefixLength(previousState.value, currentState.value), previousState.selectionEnd);\n        const suffixLength = Math.min(strings.commonSuffixLength(previousState.value, currentState.value), previousState.value.length - previousState.selectionEnd);\n        const previousValue = previousState.value.substring(prefixLength, previousState.value.length - suffixLength);\n        const currentValue = currentState.value.substring(prefixLength, currentState.value.length - suffixLength);\n        const previousSelectionStart = previousState.selectionStart - prefixLength;\n        const previousSelectionEnd = previousState.selectionEnd - prefixLength;\n        const currentSelectionStart = currentState.selectionStart - prefixLength;\n        const currentSelectionEnd = currentState.selectionEnd - prefixLength;\n        if (_debugComposition) {\n            console.log(`AFTER DIFFING PREVIOUS STATE: <${previousValue}>, selectionStart: ${previousSelectionStart}, selectionEnd: ${previousSelectionEnd}`);\n            console.log(`AFTER DIFFING CURRENT STATE: <${currentValue}>, selectionStart: ${currentSelectionStart}, selectionEnd: ${currentSelectionEnd}`);\n        }\n        return {\n            text: currentValue,\n            replacePrevCharCnt: previousSelectionEnd,\n            replaceNextCharCnt: previousValue.length - previousSelectionEnd,\n            positionDelta: currentSelectionEnd - currentValue.length\n        };\n    }\n}\nTextAreaState.EMPTY = new TextAreaState('', 0, 0, null, undefined);\nexport class PagedScreenReaderStrategy {\n    static _getPageOfLine(lineNumber, linesPerPage) {\n        return Math.floor((lineNumber - 1) / linesPerPage);\n    }\n    static _getRangeForPage(page, linesPerPage) {\n        const offset = page * linesPerPage;\n        const startLineNumber = offset + 1;\n        const endLineNumber = offset + linesPerPage;\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    static fromEditorSelection(model, selection, linesPerPage, trimLongText) {\n        // Chromium handles very poorly text even of a few thousand chars\n        // Cut text to avoid stalling the entire UI\n        const LIMIT_CHARS = 500;\n        const selectionStartPage = PagedScreenReaderStrategy._getPageOfLine(selection.startLineNumber, linesPerPage);\n        const selectionStartPageRange = PagedScreenReaderStrategy._getRangeForPage(selectionStartPage, linesPerPage);\n        const selectionEndPage = PagedScreenReaderStrategy._getPageOfLine(selection.endLineNumber, linesPerPage);\n        const selectionEndPageRange = PagedScreenReaderStrategy._getRangeForPage(selectionEndPage, linesPerPage);\n        let pretextRange = selectionStartPageRange.intersectRanges(new Range(1, 1, selection.startLineNumber, selection.startColumn));\n        if (trimLongText && model.getValueLengthInRange(pretextRange, 1 /* EndOfLinePreference.LF */) > LIMIT_CHARS) {\n            const pretextStart = model.modifyPosition(pretextRange.getEndPosition(), -LIMIT_CHARS);\n            pretextRange = Range.fromPositions(pretextStart, pretextRange.getEndPosition());\n        }\n        const pretext = model.getValueInRange(pretextRange, 1 /* EndOfLinePreference.LF */);\n        const lastLine = model.getLineCount();\n        const lastLineMaxColumn = model.getLineMaxColumn(lastLine);\n        let posttextRange = selectionEndPageRange.intersectRanges(new Range(selection.endLineNumber, selection.endColumn, lastLine, lastLineMaxColumn));\n        if (trimLongText && model.getValueLengthInRange(posttextRange, 1 /* EndOfLinePreference.LF */) > LIMIT_CHARS) {\n            const posttextEnd = model.modifyPosition(posttextRange.getStartPosition(), LIMIT_CHARS);\n            posttextRange = Range.fromPositions(posttextRange.getStartPosition(), posttextEnd);\n        }\n        const posttext = model.getValueInRange(posttextRange, 1 /* EndOfLinePreference.LF */);\n        let text;\n        if (selectionStartPage === selectionEndPage || selectionStartPage + 1 === selectionEndPage) {\n            // take full selection\n            text = model.getValueInRange(selection, 1 /* EndOfLinePreference.LF */);\n        }\n        else {\n            const selectionRange1 = selectionStartPageRange.intersectRanges(selection);\n            const selectionRange2 = selectionEndPageRange.intersectRanges(selection);\n            text = (model.getValueInRange(selectionRange1, 1 /* EndOfLinePreference.LF */)\n                + String.fromCharCode(8230)\n                + model.getValueInRange(selectionRange2, 1 /* EndOfLinePreference.LF */));\n        }\n        if (trimLongText && text.length > 2 * LIMIT_CHARS) {\n            text = text.substring(0, LIMIT_CHARS) + String.fromCharCode(8230) + text.substring(text.length - LIMIT_CHARS, text.length);\n        }\n        return new TextAreaState(pretext + text + posttext, pretext.length, pretext.length + text.length, selection, pretextRange.endLineNumber - pretextRange.startLineNumber);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { isFirefox } from '../../base/browser/browser.js';\nimport * as types from '../../base/common/types.js';\nimport { status } from '../../base/browser/ui/aria/aria.js';\nimport { Command, EditorCommand, registerEditorCommand, UndoCommand, RedoCommand, SelectAllCommand } from './editorExtensions.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { ColumnSelection } from '../common/cursor/cursorColumnSelection.js';\nimport { CursorState } from '../common/cursorCommon.js';\nimport { DeleteOperations } from '../common/cursor/cursorDeleteOperations.js';\nimport { CursorMove as CursorMove_, CursorMoveCommands } from '../common/cursor/cursorMoveCommands.js';\nimport { TypeOperations } from '../common/cursor/cursorTypeOperations.js';\nimport { Position } from '../common/core/position.js';\nimport { Range } from '../common/core/range.js';\nimport { EditorContextKeys } from '../common/editorContextKeys.js';\nimport { ContextKeyExpr } from '../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nconst CORE_WEIGHT = 0 /* KeybindingWeight.EditorCore */;\nexport class CoreEditorCommand extends EditorCommand {\n    runEditorCommand(accessor, editor, args) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            // the editor has no view => has no cursors\n            return;\n        }\n        this.runCoreEditorCommand(viewModel, args || {});\n    }\n}\nexport var EditorScroll_;\n(function (EditorScroll_) {\n    const isEditorScrollArgs = function (arg) {\n        if (!types.isObject(arg)) {\n            return false;\n        }\n        const scrollArg = arg;\n        if (!types.isString(scrollArg.to)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.by) && !types.isString(scrollArg.by)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.value) && !types.isNumber(scrollArg.value)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.revealCursor) && !types.isBoolean(scrollArg.revealCursor)) {\n            return false;\n        }\n        return true;\n    };\n    EditorScroll_.description = {\n        description: 'Scroll editor in the given direction',\n        args: [\n            {\n                name: 'Editor scroll argument object',\n                description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t`,\n                constraint: isEditorScrollArgs,\n                schema: {\n                    'type': 'object',\n                    'required': ['to'],\n                    'properties': {\n                        'to': {\n                            'type': 'string',\n                            'enum': ['up', 'down']\n                        },\n                        'by': {\n                            'type': 'string',\n                            'enum': ['line', 'wrappedLine', 'page', 'halfPage', 'editor']\n                        },\n                        'value': {\n                            'type': 'number',\n                            'default': 1\n                        },\n                        'revealCursor': {\n                            'type': 'boolean',\n                        }\n                    }\n                }\n            }\n        ]\n    };\n    /**\n     * Directions in the view for editor scroll command.\n     */\n    EditorScroll_.RawDirection = {\n        Up: 'up',\n        Right: 'right',\n        Down: 'down',\n        Left: 'left'\n    };\n    /**\n     * Units for editor scroll 'by' argument\n     */\n    EditorScroll_.RawUnit = {\n        Line: 'line',\n        WrappedLine: 'wrappedLine',\n        Page: 'page',\n        HalfPage: 'halfPage',\n        Editor: 'editor',\n        Column: 'column'\n    };\n    function parse(args) {\n        let direction;\n        switch (args.to) {\n            case EditorScroll_.RawDirection.Up:\n                direction = 1 /* Direction.Up */;\n                break;\n            case EditorScroll_.RawDirection.Right:\n                direction = 2 /* Direction.Right */;\n                break;\n            case EditorScroll_.RawDirection.Down:\n                direction = 3 /* Direction.Down */;\n                break;\n            case EditorScroll_.RawDirection.Left:\n                direction = 4 /* Direction.Left */;\n                break;\n            default:\n                // Illegal arguments\n                return null;\n        }\n        let unit;\n        switch (args.by) {\n            case EditorScroll_.RawUnit.Line:\n                unit = 1 /* Unit.Line */;\n                break;\n            case EditorScroll_.RawUnit.WrappedLine:\n                unit = 2 /* Unit.WrappedLine */;\n                break;\n            case EditorScroll_.RawUnit.Page:\n                unit = 3 /* Unit.Page */;\n                break;\n            case EditorScroll_.RawUnit.HalfPage:\n                unit = 4 /* Unit.HalfPage */;\n                break;\n            case EditorScroll_.RawUnit.Editor:\n                unit = 5 /* Unit.Editor */;\n                break;\n            case EditorScroll_.RawUnit.Column:\n                unit = 6 /* Unit.Column */;\n                break;\n            default:\n                unit = 2 /* Unit.WrappedLine */;\n        }\n        const value = Math.floor(args.value || 1);\n        const revealCursor = !!args.revealCursor;\n        return {\n            direction: direction,\n            unit: unit,\n            value: value,\n            revealCursor: revealCursor,\n            select: (!!args.select)\n        };\n    }\n    EditorScroll_.parse = parse;\n})(EditorScroll_ || (EditorScroll_ = {}));\nexport var RevealLine_;\n(function (RevealLine_) {\n    const isRevealLineArgs = function (arg) {\n        if (!types.isObject(arg)) {\n            return false;\n        }\n        const reveaLineArg = arg;\n        if (!types.isNumber(reveaLineArg.lineNumber) && !types.isString(reveaLineArg.lineNumber)) {\n            return false;\n        }\n        if (!types.isUndefined(reveaLineArg.at) && !types.isString(reveaLineArg.at)) {\n            return false;\n        }\n        return true;\n    };\n    RevealLine_.description = {\n        description: 'Reveal the given line at the given logical position',\n        args: [\n            {\n                name: 'Reveal line argument object',\n                description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t`,\n                constraint: isRevealLineArgs,\n                schema: {\n                    'type': 'object',\n                    'required': ['lineNumber'],\n                    'properties': {\n                        'lineNumber': {\n                            'type': ['number', 'string'],\n                        },\n                        'at': {\n                            'type': 'string',\n                            'enum': ['top', 'center', 'bottom']\n                        }\n                    }\n                }\n            }\n        ]\n    };\n    /**\n     * Values for reveal line 'at' argument\n     */\n    RevealLine_.RawAtArgument = {\n        Top: 'top',\n        Center: 'center',\n        Bottom: 'bottom'\n    };\n})(RevealLine_ || (RevealLine_ = {}));\nclass EditorOrNativeTextInputCommand {\n    constructor(target) {\n        // 1. handle case when focus is in editor.\n        target.addImplementation(10000, 'code-editor', (accessor, args) => {\n            // Only if editor text focus (i.e. not if editor has widget focus).\n            const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n            if (focusedEditor && focusedEditor.hasTextFocus()) {\n                return this._runEditorCommand(accessor, focusedEditor, args);\n            }\n            return false;\n        });\n        // 2. handle case when focus is in some other `input` / `textarea`.\n        target.addImplementation(1000, 'generic-dom-input-textarea', (accessor, args) => {\n            // Only if focused on an element that allows for entering text\n            const activeElement = document.activeElement;\n            if (activeElement && ['input', 'textarea'].indexOf(activeElement.tagName.toLowerCase()) >= 0) {\n                this.runDOMCommand();\n                return true;\n            }\n            return false;\n        });\n        // 3. (default) handle case when focus is somewhere else.\n        target.addImplementation(0, 'generic-dom', (accessor, args) => {\n            // Redirecting to active editor\n            const activeEditor = accessor.get(ICodeEditorService).getActiveCodeEditor();\n            if (activeEditor) {\n                activeEditor.focus();\n                return this._runEditorCommand(accessor, activeEditor, args);\n            }\n            return false;\n        });\n    }\n    _runEditorCommand(accessor, editor, args) {\n        const result = this.runEditorCommand(accessor, editor, args);\n        if (result) {\n            return result;\n        }\n        return true;\n    }\n}\nexport var CoreNavigationCommands;\n(function (CoreNavigationCommands) {\n    class BaseMoveToCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            const cursorStateChanged = viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.moveTo(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position, args.viewPosition)\n            ]);\n            if (cursorStateChanged && args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, true, true);\n            }\n        }\n    }\n    CoreNavigationCommands.MoveTo = registerEditorCommand(new BaseMoveToCommand({\n        id: '_moveTo',\n        inSelectionMode: false,\n        precondition: undefined\n    }));\n    CoreNavigationCommands.MoveToSelect = registerEditorCommand(new BaseMoveToCommand({\n        id: '_moveToSelect',\n        inSelectionMode: true,\n        precondition: undefined\n    }));\n    class ColumnSelectCommand extends CoreEditorCommand {\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            const result = this._getColumnSelectResult(viewModel, viewModel.getPrimaryCursorState(), viewModel.getCursorColumnSelectData(), args);\n            if (result === null) {\n                // invalid arguments\n                return;\n            }\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, result.viewStates.map((viewState) => CursorState.fromViewState(viewState)));\n            viewModel.setCursorColumnSelectData({\n                isReal: true,\n                fromViewLineNumber: result.fromLineNumber,\n                fromViewVisualColumn: result.fromVisualColumn,\n                toViewLineNumber: result.toLineNumber,\n                toViewVisualColumn: result.toVisualColumn\n            });\n            if (result.reversed) {\n                viewModel.revealTopMostCursor(args.source);\n            }\n            else {\n                viewModel.revealBottomMostCursor(args.source);\n            }\n        }\n    }\n    CoreNavigationCommands.ColumnSelect = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'columnSelect',\n                precondition: undefined\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            if (typeof args.position === 'undefined' || typeof args.viewPosition === 'undefined' || typeof args.mouseColumn === 'undefined') {\n                return null;\n            }\n            // validate `args`\n            const validatedPosition = viewModel.model.validatePosition(args.position);\n            const validatedViewPosition = viewModel.coordinatesConverter.validateViewPosition(new Position(args.viewPosition.lineNumber, args.viewPosition.column), validatedPosition);\n            const fromViewLineNumber = args.doColumnSelect ? prevColumnSelectData.fromViewLineNumber : validatedViewPosition.lineNumber;\n            const fromViewVisualColumn = args.doColumnSelect ? prevColumnSelectData.fromViewVisualColumn : args.mouseColumn - 1;\n            return ColumnSelection.columnSelect(viewModel.cursorConfig, viewModel, fromViewLineNumber, fromViewVisualColumn, validatedViewPosition.lineNumber, args.mouseColumn - 1);\n        }\n    });\n    CoreNavigationCommands.CursorColumnSelectLeft = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'cursorColumnSelectLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                    linux: { primary: 0 }\n                }\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectLeft(viewModel.cursorConfig, viewModel, prevColumnSelectData);\n        }\n    });\n    CoreNavigationCommands.CursorColumnSelectRight = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'cursorColumnSelectRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                    linux: { primary: 0 }\n                }\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectRight(viewModel.cursorConfig, viewModel, prevColumnSelectData);\n        }\n    });\n    class ColumnSelectUpCommand extends ColumnSelectCommand {\n        constructor(opts) {\n            super(opts);\n            this._isPaged = opts.isPaged;\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectUp(viewModel.cursorConfig, viewModel, prevColumnSelectData, this._isPaged);\n        }\n    }\n    CoreNavigationCommands.CursorColumnSelectUp = registerEditorCommand(new ColumnSelectUpCommand({\n        isPaged: false,\n        id: 'cursorColumnSelectUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n            linux: { primary: 0 }\n        }\n    }));\n    CoreNavigationCommands.CursorColumnSelectPageUp = registerEditorCommand(new ColumnSelectUpCommand({\n        isPaged: true,\n        id: 'cursorColumnSelectPageUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */,\n            linux: { primary: 0 }\n        }\n    }));\n    class ColumnSelectDownCommand extends ColumnSelectCommand {\n        constructor(opts) {\n            super(opts);\n            this._isPaged = opts.isPaged;\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectDown(viewModel.cursorConfig, viewModel, prevColumnSelectData, this._isPaged);\n        }\n    }\n    CoreNavigationCommands.CursorColumnSelectDown = registerEditorCommand(new ColumnSelectDownCommand({\n        isPaged: false,\n        id: 'cursorColumnSelectDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n            linux: { primary: 0 }\n        }\n    }));\n    CoreNavigationCommands.CursorColumnSelectPageDown = registerEditorCommand(new ColumnSelectDownCommand({\n        isPaged: true,\n        id: 'cursorColumnSelectPageDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */,\n            linux: { primary: 0 }\n        }\n    }));\n    class CursorMoveImpl extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'cursorMove',\n                precondition: undefined,\n                description: CursorMove_.description\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const parsed = CursorMove_.parse(args);\n            if (!parsed) {\n                // illegal arguments\n                return;\n            }\n            this._runCursorMove(viewModel, args.source, parsed);\n        }\n        _runCursorMove(viewModel, source, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(source, 3 /* CursorChangeReason.Explicit */, CursorMoveImpl._move(viewModel, viewModel.getCursorStates(), args));\n            viewModel.revealPrimaryCursor(source, true);\n        }\n        static _move(viewModel, cursors, args) {\n            const inSelectionMode = args.select;\n            const value = args.value;\n            switch (args.direction) {\n                case 0 /* CursorMove_.Direction.Left */:\n                case 1 /* CursorMove_.Direction.Right */:\n                case 2 /* CursorMove_.Direction.Up */:\n                case 3 /* CursorMove_.Direction.Down */:\n                case 4 /* CursorMove_.Direction.PrevBlankLine */:\n                case 5 /* CursorMove_.Direction.NextBlankLine */:\n                case 6 /* CursorMove_.Direction.WrappedLineStart */:\n                case 7 /* CursorMove_.Direction.WrappedLineFirstNonWhitespaceCharacter */:\n                case 8 /* CursorMove_.Direction.WrappedLineColumnCenter */:\n                case 9 /* CursorMove_.Direction.WrappedLineEnd */:\n                case 10 /* CursorMove_.Direction.WrappedLineLastNonWhitespaceCharacter */:\n                    return CursorMoveCommands.simpleMove(viewModel, cursors, args.direction, inSelectionMode, value, args.unit);\n                case 11 /* CursorMove_.Direction.ViewPortTop */:\n                case 13 /* CursorMove_.Direction.ViewPortBottom */:\n                case 12 /* CursorMove_.Direction.ViewPortCenter */:\n                case 14 /* CursorMove_.Direction.ViewPortIfOutside */:\n                    return CursorMoveCommands.viewportMove(viewModel, cursors, args.direction, inSelectionMode, value);\n                default:\n                    return null;\n            }\n        }\n    }\n    CoreNavigationCommands.CursorMoveImpl = CursorMoveImpl;\n    CoreNavigationCommands.CursorMove = registerEditorCommand(new CursorMoveImpl());\n    class CursorMoveBasedCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._staticArgs = opts.args;\n        }\n        runCoreEditorCommand(viewModel, dynamicArgs) {\n            let args = this._staticArgs;\n            if (this._staticArgs.value === -1 /* Constants.PAGE_SIZE_MARKER */) {\n                // -1 is a marker for page size\n                args = {\n                    direction: this._staticArgs.direction,\n                    unit: this._staticArgs.unit,\n                    select: this._staticArgs.select,\n                    value: dynamicArgs.pageSize || viewModel.cursorConfig.pageSize\n                };\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(dynamicArgs.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.simpleMove(viewModel, viewModel.getCursorStates(), args.direction, args.select, args.value, args.unit));\n            viewModel.revealPrimaryCursor(dynamicArgs.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorLeft = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 0 /* CursorMove_.Direction.Left */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorLeft',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 15 /* KeyCode.LeftArrow */,\n            mac: { primary: 15 /* KeyCode.LeftArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 32 /* KeyCode.KeyB */] }\n        }\n    }));\n    CoreNavigationCommands.CursorLeftSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 0 /* CursorMove_.Direction.Left */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorLeftSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */\n        }\n    }));\n    CoreNavigationCommands.CursorRight = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 1 /* CursorMove_.Direction.Right */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorRight',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 17 /* KeyCode.RightArrow */,\n            mac: { primary: 17 /* KeyCode.RightArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 36 /* KeyCode.KeyF */] }\n        }\n    }));\n    CoreNavigationCommands.CursorRightSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 1 /* CursorMove_.Direction.Right */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorRightSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */\n        }\n    }));\n    CoreNavigationCommands.CursorUp = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 16 /* KeyCode.UpArrow */,\n            mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n        }\n    }));\n    CoreNavigationCommands.CursorUpSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorUpSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n            secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */],\n            mac: { primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n            linux: { primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorPageUp = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 11 /* KeyCode.PageUp */\n        }\n    }));\n    CoreNavigationCommands.CursorPageUpSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageUpSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 11 /* KeyCode.PageUp */\n        }\n    }));\n    CoreNavigationCommands.CursorDown = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 18 /* KeyCode.DownArrow */,\n            mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n        }\n    }));\n    CoreNavigationCommands.CursorDownSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorDownSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n            secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */],\n            mac: { primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n            linux: { primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorPageDown = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 12 /* KeyCode.PageDown */\n        }\n    }));\n    CoreNavigationCommands.CursorPageDownSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageDownSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 12 /* KeyCode.PageDown */\n        }\n    }));\n    CoreNavigationCommands.CreateCursor = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'createCursor',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            let newState;\n            if (args.wholeLine) {\n                newState = CursorMoveCommands.line(viewModel, viewModel.getPrimaryCursorState(), false, args.position, args.viewPosition);\n            }\n            else {\n                newState = CursorMoveCommands.moveTo(viewModel, viewModel.getPrimaryCursorState(), false, args.position, args.viewPosition);\n            }\n            const states = viewModel.getCursorStates();\n            // Check if we should remove a cursor (sort of like a toggle)\n            if (states.length > 1) {\n                const newModelPosition = (newState.modelState ? newState.modelState.position : null);\n                const newViewPosition = (newState.viewState ? newState.viewState.position : null);\n                for (let i = 0, len = states.length; i < len; i++) {\n                    const state = states[i];\n                    if (newModelPosition && !state.modelState.selection.containsPosition(newModelPosition)) {\n                        continue;\n                    }\n                    if (newViewPosition && !state.viewState.selection.containsPosition(newViewPosition)) {\n                        continue;\n                    }\n                    // => Remove the cursor\n                    states.splice(i, 1);\n                    viewModel.model.pushStackElement();\n                    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, states);\n                    return;\n                }\n            }\n            // => Add the new cursor\n            states.push(newState);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, states);\n        }\n    });\n    CoreNavigationCommands.LastCursorMoveToSelect = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: '_lastCursorMoveToSelect',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.moveTo(viewModel, states[lastAddedCursorIndex], true, args.position, args.viewPosition);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    });\n    class HomeCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToBeginningOfLine(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorHome = registerEditorCommand(new HomeCommand({\n        inSelectionMode: false,\n        id: 'cursorHome',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 14 /* KeyCode.Home */,\n            mac: { primary: 14 /* KeyCode.Home */, secondary: [2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */] }\n        }\n    }));\n    CoreNavigationCommands.CursorHomeSelect = registerEditorCommand(new HomeCommand({\n        inSelectionMode: true,\n        id: 'cursorHomeSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */,\n            mac: { primary: 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */, secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */] }\n        }\n    }));\n    class LineStartCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, this._exec(viewModel.getCursorStates()));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n        _exec(cursors) {\n            const result = [];\n            for (let i = 0, len = cursors.length; i < len; i++) {\n                const cursor = cursors[i];\n                const lineNumber = cursor.modelState.position.lineNumber;\n                result[i] = CursorState.fromModelState(cursor.modelState.move(this._inSelectionMode, lineNumber, 1, 0));\n            }\n            return result;\n        }\n    }\n    CoreNavigationCommands.CursorLineStart = registerEditorCommand(new LineStartCommand({\n        inSelectionMode: false,\n        id: 'cursorLineStart',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 31 /* KeyCode.KeyA */ }\n        }\n    }));\n    CoreNavigationCommands.CursorLineStartSelect = registerEditorCommand(new LineStartCommand({\n        inSelectionMode: true,\n        id: 'cursorLineStartSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ }\n        }\n    }));\n    class EndCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToEndOfLine(viewModel, viewModel.getCursorStates(), this._inSelectionMode, args.sticky || false));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorEnd = registerEditorCommand(new EndCommand({\n        inSelectionMode: false,\n        id: 'cursorEnd',\n        precondition: undefined,\n        kbOpts: {\n            args: { sticky: false },\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 13 /* KeyCode.End */,\n            mac: { primary: 13 /* KeyCode.End */, secondary: [2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */] }\n        },\n        description: {\n            description: `Go to End`,\n            args: [{\n                    name: 'args',\n                    schema: {\n                        type: 'object',\n                        properties: {\n                            'sticky': {\n                                description: nls.localize('stickydesc', \"Stick to the end even when going to longer lines\"),\n                                type: 'boolean',\n                                default: false\n                            }\n                        }\n                    }\n                }]\n        }\n    }));\n    CoreNavigationCommands.CursorEndSelect = registerEditorCommand(new EndCommand({\n        inSelectionMode: true,\n        id: 'cursorEndSelect',\n        precondition: undefined,\n        kbOpts: {\n            args: { sticky: false },\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */,\n            mac: { primary: 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */, secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */] }\n        },\n        description: {\n            description: `Select to End`,\n            args: [{\n                    name: 'args',\n                    schema: {\n                        type: 'object',\n                        properties: {\n                            'sticky': {\n                                description: nls.localize('stickydesc', \"Stick to the end even when going to longer lines\"),\n                                type: 'boolean',\n                                default: false\n                            }\n                        }\n                    }\n                }]\n        }\n    }));\n    class LineEndCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, this._exec(viewModel, viewModel.getCursorStates()));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n        _exec(viewModel, cursors) {\n            const result = [];\n            for (let i = 0, len = cursors.length; i < len; i++) {\n                const cursor = cursors[i];\n                const lineNumber = cursor.modelState.position.lineNumber;\n                const maxColumn = viewModel.model.getLineMaxColumn(lineNumber);\n                result[i] = CursorState.fromModelState(cursor.modelState.move(this._inSelectionMode, lineNumber, maxColumn, 0));\n            }\n            return result;\n        }\n    }\n    CoreNavigationCommands.CursorLineEnd = registerEditorCommand(new LineEndCommand({\n        inSelectionMode: false,\n        id: 'cursorLineEnd',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 35 /* KeyCode.KeyE */ }\n        }\n    }));\n    CoreNavigationCommands.CursorLineEndSelect = registerEditorCommand(new LineEndCommand({\n        inSelectionMode: true,\n        id: 'cursorLineEndSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 35 /* KeyCode.KeyE */ }\n        }\n    }));\n    class TopCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToBeginningOfBuffer(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorTop = registerEditorCommand(new TopCommand({\n        inSelectionMode: false,\n        id: 'cursorTop',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 14 /* KeyCode.Home */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorTopSelect = registerEditorCommand(new TopCommand({\n        inSelectionMode: true,\n        id: 'cursorTopSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    class BottomCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToEndOfBuffer(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorBottom = registerEditorCommand(new BottomCommand({\n        inSelectionMode: false,\n        id: 'cursorBottom',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 13 /* KeyCode.End */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorBottomSelect = registerEditorCommand(new BottomCommand({\n        inSelectionMode: true,\n        id: 'cursorBottomSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    class EditorScrollImpl extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'editorScroll',\n                precondition: undefined,\n                description: EditorScroll_.description\n            });\n        }\n        determineScrollMethod(args) {\n            const horizontalUnits = [6 /* EditorScroll_.Unit.Column */];\n            const verticalUnits = [\n                1 /* EditorScroll_.Unit.Line */,\n                2 /* EditorScroll_.Unit.WrappedLine */,\n                3 /* EditorScroll_.Unit.Page */,\n                4 /* EditorScroll_.Unit.HalfPage */,\n                5 /* EditorScroll_.Unit.Editor */,\n                6 /* EditorScroll_.Unit.Column */\n            ];\n            const horizontalDirections = [4 /* EditorScroll_.Direction.Left */, 2 /* EditorScroll_.Direction.Right */];\n            const verticalDirections = [1 /* EditorScroll_.Direction.Up */, 3 /* EditorScroll_.Direction.Down */];\n            if (horizontalUnits.includes(args.unit) && horizontalDirections.includes(args.direction)) {\n                return this._runHorizontalEditorScroll.bind(this);\n            }\n            if (verticalUnits.includes(args.unit) && verticalDirections.includes(args.direction)) {\n                return this._runVerticalEditorScroll.bind(this);\n            }\n            return null;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const parsed = EditorScroll_.parse(args);\n            if (!parsed) {\n                // illegal arguments\n                return;\n            }\n            const runEditorScroll = this.determineScrollMethod(parsed);\n            if (!runEditorScroll) {\n                // Incompatible unit and direction\n                return;\n            }\n            runEditorScroll(viewModel, args.source, parsed);\n        }\n        _runVerticalEditorScroll(viewModel, source, args) {\n            const desiredScrollTop = this._computeDesiredScrollTop(viewModel, args);\n            if (args.revealCursor) {\n                // must ensure cursor is in new visible range\n                const desiredVisibleViewRange = viewModel.getCompletelyVisibleViewRangeAtScrollTop(desiredScrollTop);\n                viewModel.setCursorStates(source, 3 /* CursorChangeReason.Explicit */, [\n                    CursorMoveCommands.findPositionInViewportIfOutside(viewModel, viewModel.getPrimaryCursorState(), desiredVisibleViewRange, args.select)\n                ]);\n            }\n            viewModel.viewLayout.setScrollPosition({ scrollTop: desiredScrollTop }, 0 /* ScrollType.Smooth */);\n        }\n        _computeDesiredScrollTop(viewModel, args) {\n            if (args.unit === 1 /* EditorScroll_.Unit.Line */) {\n                // scrolling by model lines\n                const futureViewport = viewModel.viewLayout.getFutureViewport();\n                const visibleViewRange = viewModel.getCompletelyVisibleViewRangeAtScrollTop(futureViewport.top);\n                const visibleModelRange = viewModel.coordinatesConverter.convertViewRangeToModelRange(visibleViewRange);\n                let desiredTopModelLineNumber;\n                if (args.direction === 1 /* EditorScroll_.Direction.Up */) {\n                    // must go x model lines up\n                    desiredTopModelLineNumber = Math.max(1, visibleModelRange.startLineNumber - args.value);\n                }\n                else {\n                    // must go x model lines down\n                    desiredTopModelLineNumber = Math.min(viewModel.model.getLineCount(), visibleModelRange.startLineNumber + args.value);\n                }\n                const viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(desiredTopModelLineNumber, 1));\n                return viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n            }\n            if (args.unit === 5 /* EditorScroll_.Unit.Editor */) {\n                let desiredTopModelLineNumber = 0;\n                if (args.direction === 3 /* EditorScroll_.Direction.Down */) {\n                    desiredTopModelLineNumber = viewModel.model.getLineCount() - viewModel.cursorConfig.pageSize;\n                }\n                return viewModel.viewLayout.getVerticalOffsetForLineNumber(desiredTopModelLineNumber);\n            }\n            let noOfLines;\n            if (args.unit === 3 /* EditorScroll_.Unit.Page */) {\n                noOfLines = viewModel.cursorConfig.pageSize * args.value;\n            }\n            else if (args.unit === 4 /* EditorScroll_.Unit.HalfPage */) {\n                noOfLines = Math.round(viewModel.cursorConfig.pageSize / 2) * args.value;\n            }\n            else {\n                noOfLines = args.value;\n            }\n            const deltaLines = (args.direction === 1 /* EditorScroll_.Direction.Up */ ? -1 : 1) * noOfLines;\n            return viewModel.viewLayout.getCurrentScrollTop() + deltaLines * viewModel.cursorConfig.lineHeight;\n        }\n        _runHorizontalEditorScroll(viewModel, source, args) {\n            const desiredScrollLeft = this._computeDesiredScrollLeft(viewModel, args);\n            viewModel.viewLayout.setScrollPosition({ scrollLeft: desiredScrollLeft }, 0 /* ScrollType.Smooth */);\n        }\n        _computeDesiredScrollLeft(viewModel, args) {\n            const deltaColumns = (args.direction === 4 /* EditorScroll_.Direction.Left */ ? -1 : 1) * args.value;\n            return viewModel.viewLayout.getCurrentScrollLeft() + deltaColumns * viewModel.cursorConfig.typicalHalfwidthCharacterWidth;\n        }\n    }\n    CoreNavigationCommands.EditorScrollImpl = EditorScrollImpl;\n    CoreNavigationCommands.EditorScroll = registerEditorCommand(new EditorScrollImpl());\n    CoreNavigationCommands.ScrollLineUp = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLineUp',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 11 /* KeyCode.PageUp */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.WrappedLine,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollPageUp = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollPageUp',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */,\n                    win: { primary: 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */ },\n                    linux: { primary: 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.Page,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollEditorTop = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollEditorTop',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.Editor,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollLineDown = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLineDown',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 12 /* KeyCode.PageDown */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.WrappedLine,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollPageDown = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollPageDown',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */,\n                    win: { primary: 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */ },\n                    linux: { primary: 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.Page,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollEditorBottom = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollEditorBottom',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.Editor,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollLeft = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Left,\n                by: EditorScroll_.RawUnit.Column,\n                value: 2,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollRight = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Right,\n                by: EditorScroll_.RawUnit.Column,\n                value: 2,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    class WordCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.word(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position)\n            ]);\n            if (args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, true, true);\n            }\n        }\n    }\n    CoreNavigationCommands.WordSelect = registerEditorCommand(new WordCommand({\n        inSelectionMode: false,\n        id: '_wordSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.WordSelectDrag = registerEditorCommand(new WordCommand({\n        inSelectionMode: true,\n        id: '_wordSelectDrag',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LastCursorWordSelect = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'lastCursorWordSelect',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            const lastAddedState = states[lastAddedCursorIndex];\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.word(viewModel, lastAddedState, lastAddedState.modelState.hasSelection(), args.position);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    });\n    class LineCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.line(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position, args.viewPosition)\n            ]);\n            if (args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, false, true);\n            }\n        }\n    }\n    CoreNavigationCommands.LineSelect = registerEditorCommand(new LineCommand({\n        inSelectionMode: false,\n        id: '_lineSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LineSelectDrag = registerEditorCommand(new LineCommand({\n        inSelectionMode: true,\n        id: '_lineSelectDrag',\n        precondition: undefined\n    }));\n    class LastCursorLineCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.line(viewModel, states[lastAddedCursorIndex], this._inSelectionMode, args.position, args.viewPosition);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    }\n    CoreNavigationCommands.LastCursorLineSelect = registerEditorCommand(new LastCursorLineCommand({\n        inSelectionMode: false,\n        id: 'lastCursorLineSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LastCursorLineSelectDrag = registerEditorCommand(new LastCursorLineCommand({\n        inSelectionMode: true,\n        id: 'lastCursorLineSelectDrag',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.CancelSelection = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'cancelSelection',\n                precondition: EditorContextKeys.hasNonEmptySelection,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 9 /* KeyCode.Escape */,\n                    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.cancelSelection(viewModel, viewModel.getPrimaryCursorState())\n            ]);\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    });\n    CoreNavigationCommands.RemoveSecondaryCursors = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'removeSecondaryCursors',\n                precondition: EditorContextKeys.hasMultipleSelections,\n                kbOpts: {\n                    weight: CORE_WEIGHT + 1,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 9 /* KeyCode.Escape */,\n                    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                viewModel.getPrimaryCursorState()\n            ]);\n            viewModel.revealPrimaryCursor(args.source, true);\n            status(nls.localize('removedCursor', \"Removed secondary cursors\"));\n        }\n    });\n    CoreNavigationCommands.RevealLine = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'revealLine',\n                precondition: undefined,\n                description: RevealLine_.description\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const revealLineArg = args;\n            const lineNumberArg = revealLineArg.lineNumber || 0;\n            let lineNumber = typeof lineNumberArg === 'number' ? (lineNumberArg + 1) : (parseInt(lineNumberArg) + 1);\n            if (lineNumber < 1) {\n                lineNumber = 1;\n            }\n            const lineCount = viewModel.model.getLineCount();\n            if (lineNumber > lineCount) {\n                lineNumber = lineCount;\n            }\n            const range = new Range(lineNumber, 1, lineNumber, viewModel.model.getLineMaxColumn(lineNumber));\n            let revealAt = 0 /* VerticalRevealType.Simple */;\n            if (revealLineArg.at) {\n                switch (revealLineArg.at) {\n                    case RevealLine_.RawAtArgument.Top:\n                        revealAt = 3 /* VerticalRevealType.Top */;\n                        break;\n                    case RevealLine_.RawAtArgument.Center:\n                        revealAt = 1 /* VerticalRevealType.Center */;\n                        break;\n                    case RevealLine_.RawAtArgument.Bottom:\n                        revealAt = 4 /* VerticalRevealType.Bottom */;\n                        break;\n                    default:\n                        break;\n                }\n            }\n            const viewRange = viewModel.coordinatesConverter.convertModelRangeToViewRange(range);\n            viewModel.revealRange(args.source, false, viewRange, revealAt, 0 /* ScrollType.Smooth */);\n        }\n    });\n    CoreNavigationCommands.SelectAll = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(SelectAllCommand);\n        }\n        runDOMCommand() {\n            if (isFirefox) {\n                document.activeElement.focus();\n                document.activeElement.select();\n            }\n            document.execCommand('selectAll');\n        }\n        runEditorCommand(accessor, editor, args) {\n            const viewModel = editor._getViewModel();\n            if (!viewModel) {\n                // the editor has no view => has no cursors\n                return;\n            }\n            this.runCoreEditorCommand(viewModel, args);\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates('keyboard', 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.selectAll(viewModel, viewModel.getPrimaryCursorState())\n            ]);\n        }\n    }();\n    CoreNavigationCommands.SetSelection = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'setSelection',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.selection) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorState.fromModelSelection(args.selection)\n            ]);\n        }\n    });\n})(CoreNavigationCommands || (CoreNavigationCommands = {}));\nconst columnSelectionCondition = ContextKeyExpr.and(EditorContextKeys.textInputFocus, EditorContextKeys.columnSelection);\nfunction registerColumnSelection(id, keybinding) {\n    KeybindingsRegistry.registerKeybindingRule({\n        id: id,\n        primary: keybinding,\n        when: columnSelectionCondition,\n        weight: CORE_WEIGHT + 1\n    });\n}\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectLeft.id, 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectRight.id, 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectUp.id, 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectPageUp.id, 1024 /* KeyMod.Shift */ | 11 /* KeyCode.PageUp */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectDown.id, 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectPageDown.id, 1024 /* KeyMod.Shift */ | 12 /* KeyCode.PageDown */);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport var CoreEditingCommands;\n(function (CoreEditingCommands) {\n    class CoreEditingCommand extends EditorCommand {\n        runEditorCommand(accessor, editor, args) {\n            const viewModel = editor._getViewModel();\n            if (!viewModel) {\n                // the editor has no view => has no cursors\n                return;\n            }\n            this.runCoreEditingCommand(editor, viewModel, args || {});\n        }\n    }\n    CoreEditingCommands.CoreEditingCommand = CoreEditingCommand;\n    CoreEditingCommands.LineBreakInsert = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'lineBreakInsert',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 0,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 45 /* KeyCode.KeyO */ }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.lineBreakInsert(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n        }\n    });\n    CoreEditingCommands.Outdent = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'outdent',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.tabDoesNotMoveFocus),\n                    primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.outdent(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n            editor.pushUndoStop();\n        }\n    });\n    CoreEditingCommands.Tab = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'tab',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.tabDoesNotMoveFocus),\n                    primary: 2 /* KeyCode.Tab */\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.tab(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n            editor.pushUndoStop();\n        }\n    });\n    CoreEditingCommands.DeleteLeft = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'deleteLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 1 /* KeyCode.Backspace */,\n                    secondary: [1024 /* KeyMod.Shift */ | 1 /* KeyCode.Backspace */],\n                    mac: { primary: 1 /* KeyCode.Backspace */, secondary: [1024 /* KeyMod.Shift */ | 1 /* KeyCode.Backspace */, 256 /* KeyMod.WinCtrl */ | 38 /* KeyCode.KeyH */, 256 /* KeyMod.WinCtrl */ | 1 /* KeyCode.Backspace */] }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            const [shouldPushStackElementBefore, commands] = DeleteOperations.deleteLeft(viewModel.getPrevEditOperationType(), viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection), viewModel.getCursorAutoClosedCharacters());\n            if (shouldPushStackElementBefore) {\n                editor.pushUndoStop();\n            }\n            editor.executeCommands(this.id, commands);\n            viewModel.setPrevEditOperationType(2 /* EditOperationType.DeletingLeft */);\n        }\n    });\n    CoreEditingCommands.DeleteRight = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'deleteRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 20 /* KeyCode.Delete */,\n                    mac: { primary: 20 /* KeyCode.Delete */, secondary: [256 /* KeyMod.WinCtrl */ | 34 /* KeyCode.KeyD */, 256 /* KeyMod.WinCtrl */ | 20 /* KeyCode.Delete */] }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            const [shouldPushStackElementBefore, commands] = DeleteOperations.deleteRight(viewModel.getPrevEditOperationType(), viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection));\n            if (shouldPushStackElementBefore) {\n                editor.pushUndoStop();\n            }\n            editor.executeCommands(this.id, commands);\n            viewModel.setPrevEditOperationType(3 /* EditOperationType.DeletingRight */);\n        }\n    });\n    CoreEditingCommands.Undo = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(UndoCommand);\n        }\n        runDOMCommand() {\n            document.execCommand('undo');\n        }\n        runEditorCommand(accessor, editor, args) {\n            if (!editor.hasModel() || editor.getOption(88 /* EditorOption.readOnly */) === true) {\n                return;\n            }\n            return editor.getModel().undo();\n        }\n    }();\n    CoreEditingCommands.Redo = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(RedoCommand);\n        }\n        runDOMCommand() {\n            document.execCommand('redo');\n        }\n        runEditorCommand(accessor, editor, args) {\n            if (!editor.hasModel() || editor.getOption(88 /* EditorOption.readOnly */) === true) {\n                return;\n            }\n            return editor.getModel().redo();\n        }\n    }();\n})(CoreEditingCommands || (CoreEditingCommands = {}));\n/**\n * A command that will invoke a command on the focused editor.\n */\nclass EditorHandlerCommand extends Command {\n    constructor(id, handlerId, description) {\n        super({\n            id: id,\n            precondition: undefined,\n            description: description\n        });\n        this._handlerId = handlerId;\n    }\n    runCommand(accessor, args) {\n        const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!editor) {\n            return;\n        }\n        editor.trigger('keyboard', this._handlerId, args);\n    }\n}\nfunction registerOverwritableCommand(handlerId, description) {\n    registerCommand(new EditorHandlerCommand('default:' + handlerId, handlerId));\n    registerCommand(new EditorHandlerCommand(handlerId, handlerId, description));\n}\nregisterOverwritableCommand(\"type\" /* Handler.Type */, {\n    description: `Type`,\n    args: [{\n            name: 'args',\n            schema: {\n                'type': 'object',\n                'required': ['text'],\n                'properties': {\n                    'text': {\n                        'type': 'string'\n                    }\n                },\n            }\n        }]\n});\nregisterOverwritableCommand(\"replacePreviousChar\" /* Handler.ReplacePreviousChar */);\nregisterOverwritableCommand(\"compositionType\" /* Handler.CompositionType */);\nregisterOverwritableCommand(\"compositionStart\" /* Handler.CompositionStart */);\nregisterOverwritableCommand(\"compositionEnd\" /* Handler.CompositionEnd */);\nregisterOverwritableCommand(\"paste\" /* Handler.Paste */);\nregisterOverwritableCommand(\"cut\" /* Handler.Cut */);\n"],"names":["applyFontInfo","domNode","fontInfo","FastDomNode","setFontFamily","getMassagedFontFamily","setFontWeight","fontWeight","setFontSize","fontSize","setFontFeatureSettings","fontFeatureSettings","setFontVariationSettings","fontVariationSettings","setLineHeight","lineHeight","setLetterSpacing","letterSpacing","style","fontFamily","EditorSettingMigration","key","migrate","_classCallCheck","this","_createClass","value","options","_read","_write","source","firstDotIndex","indexOf","firstSegment","substring","target","registerEditorSettingMigration","items","push","registerSimpleEditorSettingMigration","values","read","write","_step","_iterator","_createForOfIteratorHelper","s","n","done","_step$value","_slicedToArray","oldValue","newValue","err","e","f","enabled","undefined","suggestFilteredTypesMapping","method","function","constructor","deprecated","field","variable","class","struct","interface","module","property","event","operator","unit","constant","enum","enumMember","keyword","text","color","file","reference","folder","typeParameter","snippet","_i","_Object$entries","Object","entries","length","entry","concat","input","comments","strings","other","__decorate","decorators","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","EditorConfiguration","_Disposable","_inherits","_super","_createSuper","isSimpleWidget","container","_accessibilityService","_this","call","_onDidChange","_register","Emitter","onDidChange","_onDidChangeFast","onDidChangeFast","_isDominatedByLongLines","_viewLineCount","_lineNumbersDigitCount","_reservedHeight","_glyphMarginDecorationLaneCount","_computeOptionsMemory","ComputeOptionsMemory","_containerObserver","ElementSizeObserver","dimension","_rawOptions","deepCloneAndMigrateOptions","_validatedOptions","EditorOptionsUtil","validateOptions","_computeOptions","get","startObserving","EditorZoom","onDidChangeZoomLevel","_recomputeOptions","TabFocus","onDidChangeTabFocus","FontMeasurements","browser","PixelRatio","onDidChangeScreenReaderOptimized","newOptions","changeEvent","checkEquals","fire","partialEnv","_readEnvConfiguration","bareFontInfo","BareFontInfo","createFromValidatedSettings","pixelRatio","_readFontInfo","env","memory","outerWidth","outerHeight","extraEditorClassName","isDominatedByLongLines","viewLineCount","lineNumbersDigitCount","emptySelectionClipboard","tabFocusMode","getTabFocusMode","accessibilitySupport","glyphMarginDecorationLaneCount","computeOptions","getExtraEditorClassName","getWidth","getHeight","isWebKit","isFirefox","isScreenReaderOptimized","getAccessibilitySupport","readFontInfo","_newOptions","applyUpdate","observe","modelLineCount","Math","floor","digitCount","reservedHeight","decorationLaneCount","Disposable","extra","isSafari","isWebkitWebView","platform","IAccessibilityService","ValidatedEditorOptions","_values","option","id","ComputedEditorOptions","Error","result","editorOptionsRegistry","editorOption","name","validate","_step2","_iterator2","compute","a","b","Array","isArray","arrays","keys","_deepEquals","_step3","somethingChanged","_iterator3","changed","ConfigurationChangedEvent","update","_step4","_iterator4","hasOwnProperty","didChange","_options","objects","forEach","migration","apply","migrateOptions","referenceDomElement","_referenceDomElement","_width","_height","_resizeObserver","measureReferenceDomElement","stopObserving","_get","_getPrototypeOf","prototype","_this2","ResizeObserver","contentRect","width","height","disconnect","emitEvent","observedWidth","observedHeight","clientWidth","clientHeight","max","CharWidthRequest","chr","type","DomCharWidthReader","requests","_bareFontInfo","_requests","_container","_testElements","_createDomElements","document","body","appendChild","_readFromDomElements","removeChild","createElement","position","top","regularDomNode","boldDomNode","italicDomNode","fontStyle","testElements","request","parent","testElement","_render","len","fulfill","offsetWidth","htmlString","innerText","testString","textContent","FontMeasurementsImpl","_cache","FontMeasurementsCache","_evictUntrustedReadingsTimeout","window","clearTimeout","item","put","isTrusted","setTimeout","_evictUntrustedReadings","getValues","somethingRemoved","remove","has","readConfig","_actualReadFontInfo","typicalHalfwidthCharacterWidth","typicalFullwidthCharacterWidth","spaceWidth","maxDigitWidth","FontInfo","isMonospace","canUseHalfwidthRightwardsArrow","middotWidth","wsmiddotWidth","_writeToCache","all","monospace","typicalHalfwidthCharacter","_createRequest","typicalFullwidthCharacter","space","digit0","digit1","digit2","digit3","digit4","digit5","digit6","digit7","digit8","digit9","rightwardsArrow","halfwidthRightwardsArrow","middot","String","fromCharCode","monospaceTestChars","charAt","readCharWidths","EditorFontLigatures","OFF","referenceWidth","diff","_keys","create","itemId","getId","_this3","map","TabFocusImpl","_tabFocusTerminal","_tabFocusEditor","_onDidChangeTabFocus","context","HitTestResult","UnknownHitTestResult","hitTarget","ContentHitTestResult","spanNode","injectedText","createFromDOMInfo","ctx","offset","getPositionFromDOMInfo","PointerHandlerLastRenderData","lastViewCursorsRenderData","lastTextareaPosition","MouseTarget","range","EditorRange","lineNumber","column","element","mouseColumn","_deduceRage","detail","outsidePosition","outsideDistance","_typeToString","JSON","stringify","ElementPath","path","HitTestContext","viewHelper","lastRenderData","viewModel","configuration","layoutInfo","viewDomNode","stickyTabStops","_context","_viewHelper","mouseVerticalOffset","getZoneAtCoord","viewLayout","isAfterLines","getLineCount","maxLineColumn","getLineMaxColumn","getLineNumberAtVerticalOffset","isInTopPadding","isInBottomPadding","getVerticalOffsetForLineNumber","attr","_findAttribute","getLineWidth","visibleRangeForPosition","getCurrentScrollTop","getCurrentScrollLeft","viewZoneWhitespace","getWhitespaceAtVerticalOffset","viewZoneMiddle","verticalOffset","lineCount","positionBefore","positionAfter","afterLineNumber","Position","viewZoneId","stopAt","hasAttribute","getAttribute","parentNode","HitTestRequest","_BareHitTestRequest","editorPos","pos","relativePos","_ctx","targetPath","PartFingerprints","collect","Uint8Array","x","y","mouseContentHorizontalOffset","outerHTML","CursorColumns","visibleColumnFromColumn","getLineContent","model","getOptions","tabSize","createUnknown","_getMouseColumn","createTextarea","createMargin","createViewZone","createContentText","createContentEmpty","createContentWidget","createScrollbar","createOverlayWidget","BareHitTestRequest","contentLeft","isInMarginArea","glyphMarginLeft","isInContentArea","MouseTargetFactory","EMPTY_CONTENT_AFTER_LINES","createEmptyContentDataInLines","horizontalDistanceToText","t","isChildOfContentWidgets","isChildOfOverflowingContentWidgets","isChildOfOverlayWidgets","_createMouseTarget","_snapToSoftTabBoundary","fromPositions","plusRange","fulfillContentText","fulfillUnknown","domHitTestExecuted","hitTestResult","_doHitTest","createMouseTargetFromHitTestPosition","withTarget","resolvedRequest","_hitTestContentWidget","_hitTestOverlayWidget","_hitTestMinimap","_hitTestScrollbarSlider","_hitTestViewZone","_hitTestMargin","_hitTestViewCursor","_hitTestTextArea","_hitTestViewLines","_hitTestScrollbar","widgetId","findAttribute","fulfillContentWidget","fulfillOverlayWidget","mightBeForeignElement","cursorVerticalOffset","viewZoneData","mouseTargetType","fulfillViewZone","isTextArea","fulfillTextarea","res","getFullLineRangeAtCoord","getStartPosition","abs","glyphMarginWidth","lineNumbersWidth","offsetX","fulfillMargin","isChildOfViewLines","fulfillContentEmpty","isStrictChildOfViewLines","getLineLength","lineWidth","isChildOfMinimap","possibleLineNumber","maxColumn","fulfillScrollbar","isChildOfScrollableElement","nodeType","className","test","round","visibleRange","columnHorizontalOffset","left","points","sort","mouseCoordinates","toClientCoordinates","spanNodeClientRect","getBoundingClientRect","mouseIsOverSpanNode","clientX","right","rng","prev","curr","lineStartVerticalOffset","lineEndVerticalOffset","lineCenteredVerticalOffset","adjustedPageY","adjustedPage","PageCoordinates","_actualDoHitTestWithCaretRangeFromPoint","coords","shadowRoot","dom","caretRangeFromPoint","createRange","el","elementFromPoint","firstChild","TEXT_NODE","lastChild","step","rect","getComputedStyle","getPropertyValue","fontVariant","font","pixelCursor","charWidthReader","CharWidthReader","getInstance","getCharWidth","setStart","setEnd","shadowCaretRangeFromPoint","clientY","startContainer","parent1","parent2","parent3","ELEMENT_NODE","ViewLine","CLASS_NAME","startOffset","hitResult","caretPositionFromPoint","offsetNode","parent1ClassName","parent2ClassName","tokenSpan","childNodes","min","lineContent","newPosition","AtomicTabMoveOperations","atomicPosition","_doHitTestWithCaretRangeFromPoint","_doHitTestWithCaretPositionFromPoint","getInjectedTextAt","normalizedPosition","normalizePosition","equals","_canvas","char","cacheKey","getContext","measureText","_INSTANCE","MouseHandler","_ViewEventHandler","viewController","_mouseLeaveMonitor","mouseTargetFactory","_mouseDownOperation","MouseDownOperation","testEventTarget","lastMouseLeaveTime","mouseEvents","EditorMouseEventFactory","onContextMenu","_onContextMenu","onMouseMove","_onMouseMove","addDisposableListener","contains","_onMouseLeave","EditorMouseEvent","onMouseUp","_onMouseUp","onMouseLeave","capturePointerId","onPointerDown","pointerId","EventType","POINTER_UP","onPointerUp","onMouseDown","_onMouseDown","_setupMouseWheelZoomListener","addEventHandler","_assertThisInitialized","classifier","MouseWheelClassifier","INSTANCE","prevMouseWheelTime","gestureStartZoomLevel","getZoomLevel","gestureHasZoomModifiers","gestureAccumulatedDelta","hasMouseWheelZoomModifiers","browserEvent","metaKey","ctrlKey","shiftKey","altKey","MOUSE_WHEEL","emitMouseWheel","StandardWheelEvent","acceptStandardWheelEvent","isPhysicalMouseWheel","zoomLevel","delta","deltaY","setZoomLevel","preventDefault","stopPropagation","Date","now","capture","passive","removeEventHandler","dispose","hasChanged","onHeightChanged","onCursorStateChanged","ClientCoordinates","toPageCoordinates","createEditorPagePosition","createCoordinatesRelativeToEditor","createMouseTarget","getLastRenderData","getShadowRoot","elementsFromPoint","posx","posy","find","getMouseColumn","emitContextMenu","mouseTargetIsWidget","isActive","timestamp","emitMouseMove","getTime","emitMouseLeave","emitMouseUp","_this4","targetIsContent","targetIsGutter","targetIsLineNumbers","selectOnLineNumbers","targetIsViewZone","targetIsWidget","shouldHandle","leftButton","middleButton","focus","focusTextArea","start","shouldSuppressMouseDownOnViewZone","shouldSuppressMouseDownOnWidget","emitMouseDown","ViewEventHandler","_super2","_viewController","_mouseTargetFactory","_this5","_mouseMoveMonitor","GlobalEditorPointerMoveMonitor","_topBottomDragScrolling","TopBottomDragScrolling","inSelectionMode","revealType","_dispatchMouse","_mouseState","MouseDownState","_currentSelection","Selection","_isActive","_lastMouseEvent","setModifiers","_findMousePosition","isDragAndDrop","emitMouseDrag","stop","targetType","_this6","setStartedOnLineNumbers","setStartButtons","trySetCount","count","isEmpty","containsPosition","startMonitoring","viewLinesDomNode","buttons","_onMouseDownThenMove","KeyboardEvent","emitMouseDropCanceled","emitMouseDrop","_stop","stopMonitoring","selections","editorContent","_helpPositionJumpOverViewZone","createOutsideEditor","aboveLineNumber","belowLineNumber","positionOutsideEditor","_getPositionOutsideEditor","selectionStart","selectionStartLineNumber","selectionStartColumn","isBefore","dispatchMouse","startedOnLineNumbers","mouseDownCount","onInjectedText","_Disposable2","_super3","_this7","_operation","mouseEvent","setPosition","TopBottomDragScrollingOperation","_Disposable3","_super4","_this8","_position","_mouseEvent","_lastTime","_animationFrameDisposable","scheduleAtNextAnimationFrame","_execute","elapsed","viewportInLines","outsideDistanceInLines","_this9","scrollInPixels","_getScrollSpeed","_tick","scrollValue","deltaScrollNow","renderNow","mouseTarget","viewportData","getLinesViewportData","edgeLineNumber","startLineNumber","endLineNumber","horizontalScrollbarHeight","_altKey","_ctrlKey","_metaKey","_shiftKey","_leftButton","_middleButton","_startedOnLineNumbers","_lastMouseDownPosition","_lastMouseDownPositionEqualCount","_lastMouseDownCount","_lastSetMouseDownCountTime","setMouseDownCount","newMouseDownPosition","currentTime","CLEAR_MOUSE_DOWN_COUNT_TIME","PointerEventHandler","_MouseHandler","Gesture","addTarget","linesContentDomNode","Tap","onTap","Change","onChange","Contextmenu","_lastPointerType","pointerType","pointerEvents","EditorPointerEventFactory","onPointerMove","onPointerLeave","initialTarget","tapCount","translationX","translationY","TouchHandler","_MouseHandler2","createEvent","initEvent","TextAreaSyntethicEvents","dispatchTextAreaEvent","moveTo","PointerHandler","BrowserFeatures","handler","TouchEvent","getTargetAtClientPoint","VisibleTextAreaData","modelLineNumber","distanceToModelLineStart","widthOfHiddenLineTextBefore","distanceToModelLineEnd","_visibleTextAreaBrand","startPosition","endPosition","visibleTextareaStart","visibleTextareaEnd","_previousPresentation","visibleRangeProvider","startModelPosition","endModelPosition","coordinatesConverter","convertModelPositionToViewPosition","tokenPresentation","foreground","italic","bold","underline","strikethrough","canUseZeroSizeTextarea","TextAreaHandler","_ViewPart","_primaryCursorPosition","_primaryCursorVisibleRange","_visibleRangeProvider","_scrollLeft","_scrollTop","_setAccessibilityOptions","_contentLeft","_contentWidth","contentWidth","_contentHeight","_fontInfo","_lineHeight","_emptySelectionClipboard","_copyWithSyntaxHighlighting","_visibleTextArea","_selections","_modelSelections","_lastRenderPosition","textArea","createFastDomNode","setClassName","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","setAttribute","_textAreaWrapping","_getAriaLabel","nls","_ensureReadOnlyAttribute","textAreaCover","simpleModel","getValueInRange","eol","getValueLengthInRange","modifyPosition","textAreaInputHost","getDataToCopy","rawTextToCopy","getPlainTextToCopy","newLineCharacter","getEOL","isFromEmptySelection","multicursorText","join","html","mode","CopyOptions","forceCopyWithSyntaxHighlighting","richText","getRichTextToCopy","getScreenReaderContent","_accessibilitySupport","selection","textBefore","_getWordBeforePosition","_getCharacterBeforePosition","TextAreaState","Range","placeholderText","EMPTY","isAndroid","_this$_getAndroidWord","_getAndroidWordAtPosition","_this$_getAndroidWord2","wordAtPosition","positionOffsetInWord","PagedScreenReaderStrategy","fromEditorSelection","_accessibilityPageSize","deduceModelPosition","viewAnchorPosition","deltaOffset","lineFeedCnt","deduceModelPositionRelativeToViewPosition","textAreaWrapper","TextAreaWrapper","_textAreaInput","TextAreaInput","OS","onKeyDown","emitKeyDown","onKeyUp","emitKeyUp","onPaste","pasteOnNewLine","metadata","paste","onCut","cut","onType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","_debugComposition","console","log","compositionType","onSelectionChangeRequest","modelSelection","setSelection","onCompositionStart","ta","_ref","textBeforeSelection","selectionEnd","lineFeedOffset1","lastIndexOf","lineTextBeforeSelection","tabOffset1","desiredVisibleBeforeCharCount","visibleBeforeCharCount","hiddenLineTextBefore","widthOfHiddenTextBefore","whiteSpace","append","textAfterSelection","lineFeedOffset2","lineTextAfterSelection","tabOffset2","desiredVisibleAfterCharCount","getEndPosition","visibleAfterCharCount","revealRange","prepareRender","compositionStart","onCompositionUpdate","onCompositionEnd","compositionEnd","onFocus","setHasFocus","onBlur","IME","reason","writeScreenReaderContent","wordSeparators","getMapForWordSeparators","goingLeft","startColumn","goingRight","endColumn","distance","charCode","charCodeAt","charBefore","accessibilityPageSize","EditorOptions","defaultValue","wrappingColumn","_textAreaWidth","slice","modelSelections","scrollLeft","scrollTop","isFocused","activeDescendant","removeAttribute","role","_a","positionLineNumber","positionColumn","visibleStart","visibleEnd","_newlinecount","substr","viewLineData","getViewLineData","startTokenIndex","tokens","findTokenIndexAtOffset","textareaSpansSingleToken","presentation","definePresentation","getPresentation","_doRender","lastRenderPosition","useCover","TokenizationRegistry","getColorMap","_renderAtTopLeft","textAreaState","newlineCountBeforeSelection","startIndex","renderData","tac","setTop","setLeft","setWidth","setHeight","setColor","Color","Format","CSS","formatHex","setFontStyle","setTextDecoration","Margin","OUTER_CLASS_NAME","renderType","LineNumbersOverlay","ViewPart","InMemoryClipboardMetadataManager","_lastState","lastCopiedValue","data","pastedText","CompositionContext","_lastTypeTextLength","typeInput","_host","_textArea","_OS","_browser","_onFocus","_onBlur","_onKeyDown","_onKeyUp","_onCut","_onPaste","_onType","_onCompositionStart","_onCompositionUpdate","_onCompositionEnd","_onSelectionChangeRequest","_asyncTriggerCut","RunOnceScheduler","_asyncFocusGainWriteScreenReaderContent","_textAreaState","_selectionChangeListener","_hasFocus","_currentComposition","lastKeyDown","_e","StandardKeyboardEvent","keyCode","currentComposition","code","handleCompositionUpdate","newState","readFromTextArea","deduceAndroidCompositionInput","onInput","setIgnoreSelectionChangeTime","deduceInput","_ensureClipboardGetsEditorSelection","schedule","onCopy","clipboardData","_ClipboardEventUtils$","ClipboardEventUtils","getTextData","_ClipboardEventUtils$2","hadFocus","_setHasFocus","onSyntheticTap","previousSelectionChangeEventTime","inputLatency","onSelectionChange","isChrome","delta1","delta2","getIgnoreSelectionChangeTime","resetSelectionChangeTime","getValue","newSelectionStart","getSelectionStart","newSelectionEnd","getSelectionEnd","_newSelectionStartPosition","deduceEditorPosition","newSelectionStartPosition","_newSelectionEndPosition","newSelectionEndPosition","newSelection","refreshFocusState","hasFocus","newHasFocus","_installSelectionChangeListener","collapseSelection","writeToTextArea","_setAndWriteTextAreaState","dataToCopy","storedMetadata","version","set","replace","setTextData","getData","Mimes","rawmetadata","parse","files","setData","_actual","DomEmitter","onBeforeInput","_onSyntheticTap","_ignoreSelectionChangeTime","activeElement","selectionDirection","currentIsFocused","currentSelectionStart","currentSelectionEnd","setSelectionRange","scrollState","select","toString","setValue","_b","_c","_d","_f","_g","_h","str","_finishDeduceEditorPosition","str1","str2","anchor","deltaText","signum","lastLineFeedIndex","previousState","currentState","couldBeEmojiInput","prefixLength","suffixLength","previousValue","currentValue","previousSelectionStart","previousSelectionEnd","replacePreviousCharacters","linesPerPage","page","trimLongText","LIMIT_CHARS","selectionStartPage","_getPageOfLine","selectionStartPageRange","_getRangeForPage","selectionEndPage","selectionEndPageRange","pretextRange","intersectRanges","pretextStart","pretext","lastLine","lastLineMaxColumn","posttextRange","posttextEnd","posttext","selectionRange1","selectionRange2","EditorScroll_","RevealLine_","CoreEditorCommand","_EditorCommand","accessor","editor","args","_getViewModel","runCoreEditorCommand","EditorCommand","description","constraint","arg","types","scrollArg","to","by","revealCursor","schema","RawDirection","Up","Right","Down","Left","RawUnit","Line","WrappedLine","Page","HalfPage","Editor","Column","direction","reveaLineArg","at","RawAtArgument","Top","Center","Bottom","CoreNavigationCommands","EditorOrNativeTextInputCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","_runEditorCommand","tagName","toLowerCase","runDOMCommand","activeEditor","getActiveCodeEditor","runEditorCommand","BaseMoveToCommand","_CoreEditorCommand","opts","_inSelectionMode","pushStackElement","setCursorStates","CursorMoveCommands","getPrimaryCursorState","viewPosition","revealPrimaryCursor","MoveTo","registerEditorCommand","precondition","MoveToSelect","ColumnSelectCommand","_CoreEditorCommand2","_getColumnSelectResult","getCursorColumnSelectData","viewStates","viewState","CursorState","fromViewState","setCursorColumnSelectData","isReal","fromViewLineNumber","fromLineNumber","fromViewVisualColumn","fromVisualColumn","toViewLineNumber","toLineNumber","toViewVisualColumn","toVisualColumn","reversed","revealTopMostCursor","revealBottomMostCursor","ColumnSelect","_ColumnSelectCommand","_class","primary","prevColumnSelectData","validatedPosition","validatePosition","validatedViewPosition","validateViewPosition","doColumnSelect","ColumnSelection","columnSelect","cursorConfig","CursorColumnSelectLeft","_ColumnSelectCommand2","_class2","_super5","kbOpts","weight","kbExpr","EditorContextKeys","textInputFocus","linux","columnSelectLeft","CursorColumnSelectRight","_ColumnSelectCommand3","_class3","_super6","columnSelectRight","ColumnSelectUpCommand","_ColumnSelectCommand4","_super7","_isPaged","isPaged","columnSelectUp","CursorColumnSelectUp","CursorColumnSelectPageUp","ColumnSelectDownCommand","_ColumnSelectCommand5","_super8","columnSelectDown","CursorColumnSelectDown","CursorColumnSelectPageDown","CursorMoveImpl","_CoreEditorCommand3","_super9","CursorMove_","parsed","_runCursorMove","_move","getCursorStates","cursors","simpleMove","viewportMove","CursorMove","CursorMoveBasedCommand","_CoreEditorCommand4","_super10","_staticArgs","dynamicArgs","pageSize","CursorLeft","mac","secondary","CursorLeftSelect","CursorRight","CursorRightSelect","CursorUp","CursorUpSelect","CursorPageUp","CursorPageUpSelect","CursorDown","CursorDownSelect","CursorPageDown","CursorPageDownSelect","CreateCursor","_CoreEditorCommand5","_class4","_super11","wholeLine","line","states","newModelPosition","modelState","newViewPosition","state","splice","LastCursorMoveToSelect","_CoreEditorCommand6","_class5","_super12","lastAddedCursorIndex","getLastAddedCursorIndex","newStates","HomeCommand","_CoreEditorCommand7","_super13","moveToBeginningOfLine","CursorHome","CursorHomeSelect","LineStartCommand","_CoreEditorCommand8","_super14","_exec","cursor","fromModelState","move","CursorLineStart","CursorLineStartSelect","EndCommand","_CoreEditorCommand9","_super15","moveToEndOfLine","sticky","CursorEnd","properties","default","CursorEndSelect","LineEndCommand","_CoreEditorCommand10","_super16","CursorLineEnd","CursorLineEndSelect","TopCommand","_CoreEditorCommand11","_super17","_this10","moveToBeginningOfBuffer","CursorTop","CursorTopSelect","BottomCommand","_CoreEditorCommand12","_super18","_this11","moveToEndOfBuffer","CursorBottom","CursorBottomSelect","EditorScrollImpl","_CoreEditorCommand13","_super19","includes","_runHorizontalEditorScroll","bind","_runVerticalEditorScroll","runEditorScroll","determineScrollMethod","desiredScrollTop","_computeDesiredScrollTop","desiredVisibleViewRange","getCompletelyVisibleViewRangeAtScrollTop","findPositionInViewportIfOutside","setScrollPosition","desiredTopModelLineNumber","futureViewport","getFutureViewport","visibleViewRange","visibleModelRange","convertViewRangeToModelRange","noOfLines","deltaLines","desiredScrollLeft","_computeDesiredScrollLeft","deltaColumns","EditorScroll","ScrollLineUp","_CoreEditorCommand14","_class6","_super20","ScrollPageUp","_CoreEditorCommand15","_class7","_super21","win","ScrollEditorTop","_CoreEditorCommand16","_class8","_super22","ScrollLineDown","_CoreEditorCommand17","_class9","_super23","ScrollPageDown","_CoreEditorCommand18","_class10","_super24","ScrollEditorBottom","_CoreEditorCommand19","_class11","_super25","ScrollLeft","_CoreEditorCommand20","_class12","_super26","ScrollRight","_CoreEditorCommand21","_class13","_super27","WordCommand","_CoreEditorCommand22","_super28","_this12","word","WordSelect","WordSelectDrag","LastCursorWordSelect","_CoreEditorCommand23","_class14","_super29","lastAddedState","hasSelection","LineCommand","_CoreEditorCommand24","_super30","_this13","LineSelect","LineSelectDrag","LastCursorLineCommand","_CoreEditorCommand25","_super31","_this14","LastCursorLineSelect","LastCursorLineSelectDrag","CancelSelection","_CoreEditorCommand26","_class15","_super32","hasNonEmptySelection","cancelSelection","RemoveSecondaryCursors","_CoreEditorCommand27","_class16","_super33","hasMultipleSelections","CORE_WEIGHT","status","RevealLine","_CoreEditorCommand28","_class17","_super34","revealLineArg","lineNumberArg","parseInt","revealAt","viewRange","convertModelRangeToViewRange","SelectAll","_EditorOrNativeTextIn","_class18","_super35","SelectAllCommand","execCommand","selectAll","SetSelection","_CoreEditorCommand29","_class19","_super36","fromModelSelection","CoreEditingCommands","columnSelectionCondition","ContextKeyExpr","and","columnSelection","registerColumnSelection","keybinding","KeybindingsRegistry","registerKeybindingRule","when","registerCommand","command","register","CoreEditingCommand","_EditorCommand2","_super37","runCoreEditingCommand","LineBreakInsert","_CoreEditingCommand","_class20","_super38","writable","pushUndoStop","executeCommands","TypeOperations","lineBreakInsert","Outdent","_CoreEditingCommand2","_class21","_super39","editorTextFocus","tabDoesNotMoveFocus","outdent","Tab","_CoreEditingCommand3","_class22","_super40","tab","DeleteLeft","_CoreEditingCommand4","_class23","_super41","_DeleteOperations$del","DeleteOperations","deleteLeft","getPrevEditOperationType","getCursorAutoClosedCharacters","_DeleteOperations$del2","shouldPushStackElementBefore","commands","setPrevEditOperationType","DeleteRight","_CoreEditingCommand5","_class24","_super42","_DeleteOperations$del3","deleteRight","_DeleteOperations$del4","Undo","_EditorOrNativeTextIn2","_class25","_super43","UndoCommand","hasModel","getOption","getModel","undo","Redo","_EditorOrNativeTextIn3","_class26","_super44","RedoCommand","redo","EditorHandlerCommand","_Command","_super45","handlerId","_this15","_handlerId","trigger","Command","registerOverwritableCommand"],"sourceRoot":""}