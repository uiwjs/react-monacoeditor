{"version":3,"file":"static/js/monaco-editor-vendor.de15e873.39c1da2e.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { asCssVariableName } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates() {\n        return new ClientCoordinates(this.x - dom.StandardWindow.scrollX, this.y - dom.StandardWindow.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates() {\n        return new PageCoordinates(this.clientX + dom.StandardWindow.scrollX, this.clientY + dom.StandardWindow.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', (e) => {\n            const kb = e.toKeybinding();\n            if (kb.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nexport class DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElement = dom.createStyleSheet(_containerElement);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = `var(${asCssVariableName(value.id)})`;\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElement.remove();\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this._description = opts.description;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            description: this._description\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation) {\n        this._implementations.push({ priority, name, implementation });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(withNullAsUndefined(this.precondition))) {\n                // precondition does not hold\n                return;\n            }\n            return this.runEditorCommand(editorAccessor, editor, args);\n        });\n    }\n}\nexport class EditorAction extends EditorCommand {\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\nexport function registerEditorContribution(id, ctor) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor) {\n        this.editorContributions.push({ id, ctor: ctor });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions.slice(0);\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    removeDiffEditor(editor) {\n        if (delete this._diffEditors[editor.getId()]) {\n            this._onDiffEditorRemove.fire(editor);\n        }\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    openCodeEditor(input, source, sideBySide) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const handler of this._codeEditorOpenHandlers) {\n                const candidate = yield handler(input, source, sideBySide);\n                if (candidate !== null) {\n                    return candidate;\n                }\n            }\n            return null;\n        });\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { regExpFlags } from '../../../base/common/strings.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime) {\n        return this._workerManager.withWorker().then(client => client.computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime));\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create(true);\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    provideCompletionItems(model, position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const config = this._configurationService.getValue(model.uri, position, 'editor');\n            if (!config.wordBasedSuggestions) {\n                return undefined;\n            }\n            const models = [];\n            if (config.wordBasedSuggestionsMode === 'currentDocument') {\n                // only current file and only if not too large\n                if (canSyncModel(this._modelService, model.uri)) {\n                    models.push(model.uri);\n                }\n            }\n            else {\n                // either all files or files of same language\n                for (const candidate of this._modelService.getModels()) {\n                    if (!canSyncModel(this._modelService, candidate.uri)) {\n                        continue;\n                    }\n                    if (candidate === model) {\n                        models.unshift(candidate.uri);\n                    }\n                    else if (config.wordBasedSuggestionsMode === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                        models.push(candidate.uri);\n                    }\n                }\n            }\n            if (models.length === 0) {\n                return undefined; // File too large, no other files\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const word = model.getWordAtPosition(position);\n            const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            const insert = replace.setEndPosition(position.lineNumber, position.column);\n            const client = yield this._workerManager.withWorker();\n            const data = yield client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n            if (!data) {\n                return undefined;\n            }\n            return {\n                duration: data.duration,\n                suggestions: data.words.map((word) => {\n                    return {\n                        kind: 18 /* languages.CompletionItemKind.Text */,\n                        label: word,\n                        insertText: word,\n                        range: { insert, replace }\n                    };\n                }),\n            };\n        });\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new IntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    _withSyncedResources(resources, forceLargeModels = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._disposed) {\n                return Promise.reject(canceled());\n            }\n            return this._getProxy().then((proxy) => {\n                this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n                return proxy;\n            });\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), ignoreTrimWhitespace, maxComputationTime);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    textualSuggest(resources, leadingWord, wordDefRegExp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const proxy = yield this._withSyncedResources(resources);\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n        });\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nlet MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nexport { MarkerDecorationsContribution };\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection, matchesScheme, matchesSomeScheme } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!matchesScheme(target, Schemas.command)) {\n                return false;\n            }\n            if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n                // silently ignore commands when command-links are disabled, also\n                // surpress other openers by returning TRUE\n                return true;\n            }\n            // run command or bail out if command isn't known\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            // execute as command\n            let args = [];\n            try {\n                args = parse(decodeURIComponent(target.query));\n            }\n            catch (_a) {\n                // ignore and retry\n                try {\n                    args = parse(target.query);\n                }\n                catch (_b) {\n                    // ignore error\n                }\n            }\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            yield this._commandService.executeCommand(target.path, ...args);\n            return true;\n        });\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            const { selection, uri } = extractSelection(target);\n            target = uri;\n            if (target.scheme === Schemas.file) {\n                target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n            }\n            yield this._editorService.openCodeEditor({\n                resource: target,\n                options: Object.assign({ selection, source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API }, options === null || options === void 0 ? void 0 : options.editorOptions)\n            }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n            return true;\n        });\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: (href) => __awaiter(this, void 0, void 0, function* () {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    window.location.href = href;\n                }\n                return true;\n            })\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: (target, options) => __awaiter(this, void 0, void 0, function* () {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    yield this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            })\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    registerValidator(validator) {\n        const remove = this._validators.push(validator);\n        return { dispose: remove };\n    }\n    registerExternalUriResolver(resolver) {\n        const remove = this._resolvers.push(resolver);\n        return { dispose: remove };\n    }\n    setDefaultExternalOpener(externalOpener) {\n        this._defaultExternalOpener = externalOpener;\n    }\n    registerExternalOpener(opener) {\n        const remove = this._externalOpeners.push(opener);\n        return { dispose: remove };\n    }\n    open(target, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // check with contributed validators\n            const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n            // validate against the original URI that this URI resolves to, if one exists\n            const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n            for (const validator of this._validators) {\n                if (!(yield validator.shouldOpen(validationTarget, options))) {\n                    return false;\n                }\n            }\n            // check with contributed openers\n            for (const opener of this._openers) {\n                const handled = yield opener.open(target, options);\n                if (handled) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    resolveExternalUri(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const resolver of this._resolvers) {\n                try {\n                    const result = yield resolver.resolveExternalUri(resource, options);\n                    if (result) {\n                        if (!this._resolvedUriTargets.has(result.resolved)) {\n                            this._resolvedUriTargets.set(result.resolved, resource);\n                        }\n                        return result;\n                    }\n                }\n                catch (_a) {\n                    // noop\n                }\n            }\n            throw new Error('Could not resolve external URI: ' + resource.toString());\n        });\n    }\n    _doOpenExternal(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n            const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n            let externalUri;\n            try {\n                externalUri = (yield this.resolveExternalUri(uri, options)).resolved;\n            }\n            catch (_a) {\n                externalUri = uri;\n            }\n            let href;\n            if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n                // open the url-string AS IS\n                href = resource;\n            }\n            else {\n                // open URI using the toString(noEncode)+encodeURI-trick\n                href = encodeURI(externalUri.toString(true));\n            }\n            if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n                const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n                for (const opener of this._externalOpeners) {\n                    const didOpen = yield opener.openExternal(href, {\n                        sourceUri: uri,\n                        preferredOpenerId,\n                    }, CancellationToken.None);\n                    if (didOpen) {\n                        return true;\n                    }\n                }\n            }\n            return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n        });\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorWorkerClient } from './editorWorkerService.js';\nimport * as types from '../../../base/common/types.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? types.getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    constructor(_visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    static capture(editor) {\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        if (editor.getScrollTop() !== 0) {\n            const visibleRanges = editor.getVisibleRanges();\n            if (visibleRanges.length > 0) {\n                visiblePosition = visibleRanges[0].getStartPosition();\n                const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n                visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n            }\n        }\n        return new StableEditorScrollState(visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    restore(editor) {\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["isCodeEditor","thing","getEditorType","editorCommon","isDiffEditor","getCodeEditor","getModifiedEditor","PageCoordinates","x","y","this","_pageCoordinatesBrand","undefined","ClientCoordinates","dom","clientX","clientY","_clientCoordinatesBrand","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","e","isFromPointerCapture","_editorMouseEventBrand","posx","posy","relativePos","StandardMouseEvent","EditorMouseEventFactory","_editorViewDomNode","target","callback","_create","pointerId","EditorPointerEventFactory","GlobalEditorPointerMoveMonitor","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","initialElement","initialButtons","pointerMoveCallback","onStopCallback","document","toKeybinding","isModifierKey","stopMonitoring","browserEvent","startMonitoring","dispose","Disposable","DynamicCssRules","_editor","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","options","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","key","computeUniqueKey","existingRule","get","counter","RefCountedCssRule","getContainerDomNode","set","JSON","stringify","values","hasReferences","delete","_containerElement","_referenceCount","_styleElement","textContent","getCssText","str","prop","value","cssValue","asCssVariableName","id","cssPropName","camelToDashes","remove","replace","toLowerCase","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","CommandsRegistry","handler","accessor","runCommand","item","MenuRegistry","menuId","group","command","title","icon","order","MultiCommand","arguments","_implementations","priority","name","implementation","push","sort","a","b","i","length","splice","logService","ILogService","trace","impl","result","ProxyCommand","EditorCommand","codeEditorService","ICodeEditorService","editor","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","IContextKeyService","contextMatchesRules","withNullAsUndefined","runEditorCommand","controllerGetter","_callback","controller","EditorAction","convertOptions","label","alias","reportTelemetry","run","ITelemetryService","publicLog2","withDefaults","MenuId","contextMenuOpts","map","MultiEditorAction","registerModelAndPositionCommand","instaService","IInstantiationService","resource","position","assertType","URI","Position","model","IModelService","getModel","editorPosition","invokeFunction","slice","ITextModelService","createModelReference","then","reference","Promise","resolve","reject","object","textEditorModel","err","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","Object","create","register","registerCommand","Registry","UndoCommand","nls","comment","RedoCommand","SelectAllCommand","__decorate","decorators","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","apply","AbstractCodeEditorService","_themeService","_onCodeEditorAdd","Emitter","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","getId","fire","keys","editorWithWidgetFocus","editors","listCodeEditors","hasTextFocus","hasWidgetFocus","provider","refCount","ed","removeDecorationsByType","dest","key1","toString","has","input","source","sideBySide","candidate","f","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","metadata","edit","edits","ResourceTextEdit","is","lift","ResourceFileEdit","Error","textEdit","versionId","isObject","oldResource","newResource","Boolean","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","uri","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","range","computedUnicodeHighlights","original","modified","ignoreTrimWhitespace","maxComputationTime","computeDiff","isNonEmptyArray","sw","StopWatch","computeMoreMinimalEdits","elapsed","race","timeout","up","navigateValueSet","computeWordRanges","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","config","getValue","wordBasedSuggestions","models","wordBasedSuggestionsMode","getModels","getLanguageId","wordDefRegExp","getLanguageConfiguration","getWordDefinition","word","getWordAtPosition","Range","lineNumber","startColumn","endColumn","insert","setEndPosition","column","textualSuggest","data","duration","suggestions","words","kind","insertText","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","IntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","DisposableStore","add","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","method","fhr","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getOrCreateWorker","getProxyObject","canceled","_getProxy","_getOrCreateModelManager","ensureSyncedResources","_withSyncedResources","computeUnicodeHighlights","leadingWord","wordDef","wordDefFlags","regExpFlags","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","matchesScheme","Schemas","allowCommands","parse","decodeURIComponent","query","_a","_b","executeCommand","path","ICommandService","EditorOpener","_editorService","extractSelection","selection","scheme","normalizePath","openCodeEditor","assign","fromUserGesture","EditorOpenSource","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","href","matchesSomeScheme","window","location","open","_doOpenExternal","opener","validator","resolver","externalOpener","targetURI","validationTarget","shouldOpen","resolveExternalUri","resolved","externalUri","encodeURI","allowContributedOpeners","preferredOpenerId","sourceUri","CancellationToken","clear","createWebWorker","MonacoWebWorkerImpl","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","foreignHostMethods","types","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","prototype","call","foreignProxy","foreignMethod","_getForeignProxy","getProxy","StableEditorScrollState","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","visiblePositionScrollTop","getTopForPosition","setScrollTop","currentCursorPosition","getPosition","offset","getTopForLineNumber","getScrollTop","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition"],"sourceRoot":""}