{"version":3,"file":"static/js/monaco-editor-vendor.a3a53265.73b012f6.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js","../node_modules/monaco-editor/esm/vs/base/browser/formattedTextRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/globalPointerMoveMonitor.js","../node_modules/monaco-editor/esm/vs/base/browser/keyboardEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/iframe.js","../node_modules/monaco-editor/esm/vs/base/browser/mouseEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/touch.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/button/button.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/codicons/codiconStyles.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/countBadge/countBadge.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputToggles.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabelHover.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class FastDomNode {\n    constructor(domNode) {\n        this.domNode = domNode;\n        this._maxWidth = '';\n        this._width = '';\n        this._height = '';\n        this._top = '';\n        this._left = '';\n        this._bottom = '';\n        this._right = '';\n        this._fontFamily = '';\n        this._fontWeight = '';\n        this._fontSize = '';\n        this._fontStyle = '';\n        this._fontFeatureSettings = '';\n        this._textDecoration = '';\n        this._lineHeight = '';\n        this._letterSpacing = '';\n        this._className = '';\n        this._display = '';\n        this._position = '';\n        this._visibility = '';\n        this._color = '';\n        this._backgroundColor = '';\n        this._layerHint = false;\n        this._contain = 'none';\n        this._boxShadow = '';\n    }\n    setMaxWidth(_maxWidth) {\n        const maxWidth = numberAsPixels(_maxWidth);\n        if (this._maxWidth === maxWidth) {\n            return;\n        }\n        this._maxWidth = maxWidth;\n        this.domNode.style.maxWidth = this._maxWidth;\n    }\n    setWidth(_width) {\n        const width = numberAsPixels(_width);\n        if (this._width === width) {\n            return;\n        }\n        this._width = width;\n        this.domNode.style.width = this._width;\n    }\n    setHeight(_height) {\n        const height = numberAsPixels(_height);\n        if (this._height === height) {\n            return;\n        }\n        this._height = height;\n        this.domNode.style.height = this._height;\n    }\n    setTop(_top) {\n        const top = numberAsPixels(_top);\n        if (this._top === top) {\n            return;\n        }\n        this._top = top;\n        this.domNode.style.top = this._top;\n    }\n    setLeft(_left) {\n        const left = numberAsPixels(_left);\n        if (this._left === left) {\n            return;\n        }\n        this._left = left;\n        this.domNode.style.left = this._left;\n    }\n    setBottom(_bottom) {\n        const bottom = numberAsPixels(_bottom);\n        if (this._bottom === bottom) {\n            return;\n        }\n        this._bottom = bottom;\n        this.domNode.style.bottom = this._bottom;\n    }\n    setRight(_right) {\n        const right = numberAsPixels(_right);\n        if (this._right === right) {\n            return;\n        }\n        this._right = right;\n        this.domNode.style.right = this._right;\n    }\n    setFontFamily(fontFamily) {\n        if (this._fontFamily === fontFamily) {\n            return;\n        }\n        this._fontFamily = fontFamily;\n        this.domNode.style.fontFamily = this._fontFamily;\n    }\n    setFontWeight(fontWeight) {\n        if (this._fontWeight === fontWeight) {\n            return;\n        }\n        this._fontWeight = fontWeight;\n        this.domNode.style.fontWeight = this._fontWeight;\n    }\n    setFontSize(_fontSize) {\n        const fontSize = numberAsPixels(_fontSize);\n        if (this._fontSize === fontSize) {\n            return;\n        }\n        this._fontSize = fontSize;\n        this.domNode.style.fontSize = this._fontSize;\n    }\n    setFontStyle(fontStyle) {\n        if (this._fontStyle === fontStyle) {\n            return;\n        }\n        this._fontStyle = fontStyle;\n        this.domNode.style.fontStyle = this._fontStyle;\n    }\n    setFontFeatureSettings(fontFeatureSettings) {\n        if (this._fontFeatureSettings === fontFeatureSettings) {\n            return;\n        }\n        this._fontFeatureSettings = fontFeatureSettings;\n        this.domNode.style.fontFeatureSettings = this._fontFeatureSettings;\n    }\n    setTextDecoration(textDecoration) {\n        if (this._textDecoration === textDecoration) {\n            return;\n        }\n        this._textDecoration = textDecoration;\n        this.domNode.style.textDecoration = this._textDecoration;\n    }\n    setLineHeight(_lineHeight) {\n        const lineHeight = numberAsPixels(_lineHeight);\n        if (this._lineHeight === lineHeight) {\n            return;\n        }\n        this._lineHeight = lineHeight;\n        this.domNode.style.lineHeight = this._lineHeight;\n    }\n    setLetterSpacing(_letterSpacing) {\n        const letterSpacing = numberAsPixels(_letterSpacing);\n        if (this._letterSpacing === letterSpacing) {\n            return;\n        }\n        this._letterSpacing = letterSpacing;\n        this.domNode.style.letterSpacing = this._letterSpacing;\n    }\n    setClassName(className) {\n        if (this._className === className) {\n            return;\n        }\n        this._className = className;\n        this.domNode.className = this._className;\n    }\n    toggleClassName(className, shouldHaveIt) {\n        this.domNode.classList.toggle(className, shouldHaveIt);\n        this._className = this.domNode.className;\n    }\n    setDisplay(display) {\n        if (this._display === display) {\n            return;\n        }\n        this._display = display;\n        this.domNode.style.display = this._display;\n    }\n    setPosition(position) {\n        if (this._position === position) {\n            return;\n        }\n        this._position = position;\n        this.domNode.style.position = this._position;\n    }\n    setVisibility(visibility) {\n        if (this._visibility === visibility) {\n            return;\n        }\n        this._visibility = visibility;\n        this.domNode.style.visibility = this._visibility;\n    }\n    setColor(color) {\n        if (this._color === color) {\n            return;\n        }\n        this._color = color;\n        this.domNode.style.color = this._color;\n    }\n    setBackgroundColor(backgroundColor) {\n        if (this._backgroundColor === backgroundColor) {\n            return;\n        }\n        this._backgroundColor = backgroundColor;\n        this.domNode.style.backgroundColor = this._backgroundColor;\n    }\n    setLayerHinting(layerHint) {\n        if (this._layerHint === layerHint) {\n            return;\n        }\n        this._layerHint = layerHint;\n        this.domNode.style.transform = this._layerHint ? 'translate3d(0px, 0px, 0px)' : '';\n    }\n    setBoxShadow(boxShadow) {\n        if (this._boxShadow === boxShadow) {\n            return;\n        }\n        this._boxShadow = boxShadow;\n        this.domNode.style.boxShadow = boxShadow;\n    }\n    setContain(contain) {\n        if (this._contain === contain) {\n            return;\n        }\n        this._contain = contain;\n        this.domNode.style.contain = this._contain;\n    }\n    setAttribute(name, value) {\n        this.domNode.setAttribute(name, value);\n    }\n    removeAttribute(name) {\n        this.domNode.removeAttribute(name);\n    }\n    appendChild(child) {\n        this.domNode.appendChild(child.domNode);\n    }\n    removeChild(child) {\n        this.domNode.removeChild(child.domNode);\n    }\n}\nfunction numberAsPixels(value) {\n    return (typeof value === 'number' ? `${value}px` : value);\n}\nexport function createFastDomNode(domNode) {\n    return new FastDomNode(domNode);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nexport function renderText(text, options = {}) {\n    const element = createElement(options);\n    element.textContent = text;\n    return element;\n}\nexport function renderFormattedText(formattedText, options = {}) {\n    const element = createElement(options);\n    _renderFormattedText(element, parseFormattedText(formattedText, !!options.renderCodeSegments), options.actionHandler, options.renderCodeSegments);\n    return element;\n}\nexport function createElement(options) {\n    const tagName = options.inline ? 'span' : 'div';\n    const element = document.createElement(tagName);\n    if (options.className) {\n        element.className = options.className;\n    }\n    return element;\n}\nclass StringStream {\n    constructor(source) {\n        this.source = source;\n        this.index = 0;\n    }\n    eos() {\n        return this.index >= this.source.length;\n    }\n    next() {\n        const next = this.peek();\n        this.advance();\n        return next;\n    }\n    peek() {\n        return this.source[this.index];\n    }\n    advance() {\n        this.index++;\n    }\n}\nfunction _renderFormattedText(element, treeNode, actionHandler, renderCodeSegments) {\n    let child;\n    if (treeNode.type === 2 /* FormatType.Text */) {\n        child = document.createTextNode(treeNode.content || '');\n    }\n    else if (treeNode.type === 3 /* FormatType.Bold */) {\n        child = document.createElement('b');\n    }\n    else if (treeNode.type === 4 /* FormatType.Italics */) {\n        child = document.createElement('i');\n    }\n    else if (treeNode.type === 7 /* FormatType.Code */ && renderCodeSegments) {\n        child = document.createElement('code');\n    }\n    else if (treeNode.type === 5 /* FormatType.Action */ && actionHandler) {\n        const a = document.createElement('a');\n        actionHandler.disposables.add(DOM.addStandardDisposableListener(a, 'click', (event) => {\n            actionHandler.callback(String(treeNode.index), event);\n        }));\n        child = a;\n    }\n    else if (treeNode.type === 8 /* FormatType.NewLine */) {\n        child = document.createElement('br');\n    }\n    else if (treeNode.type === 1 /* FormatType.Root */) {\n        child = element;\n    }\n    if (child && element !== child) {\n        element.appendChild(child);\n    }\n    if (child && Array.isArray(treeNode.children)) {\n        treeNode.children.forEach((nodeChild) => {\n            _renderFormattedText(child, nodeChild, actionHandler, renderCodeSegments);\n        });\n    }\n}\nfunction parseFormattedText(content, parseCodeSegments) {\n    const root = {\n        type: 1 /* FormatType.Root */,\n        children: []\n    };\n    let actionViewItemIndex = 0;\n    let current = root;\n    const stack = [];\n    const stream = new StringStream(content);\n    while (!stream.eos()) {\n        let next = stream.next();\n        const isEscapedFormatType = (next === '\\\\' && formatTagType(stream.peek(), parseCodeSegments) !== 0 /* FormatType.Invalid */);\n        if (isEscapedFormatType) {\n            next = stream.next(); // unread the backslash if it escapes a format tag type\n        }\n        if (!isEscapedFormatType && isFormatTag(next, parseCodeSegments) && next === stream.peek()) {\n            stream.advance();\n            if (current.type === 2 /* FormatType.Text */) {\n                current = stack.pop();\n            }\n            const type = formatTagType(next, parseCodeSegments);\n            if (current.type === type || (current.type === 5 /* FormatType.Action */ && type === 6 /* FormatType.ActionClose */)) {\n                current = stack.pop();\n            }\n            else {\n                const newCurrent = {\n                    type: type,\n                    children: []\n                };\n                if (type === 5 /* FormatType.Action */) {\n                    newCurrent.index = actionViewItemIndex;\n                    actionViewItemIndex++;\n                }\n                current.children.push(newCurrent);\n                stack.push(current);\n                current = newCurrent;\n            }\n        }\n        else if (next === '\\n') {\n            if (current.type === 2 /* FormatType.Text */) {\n                current = stack.pop();\n            }\n            current.children.push({\n                type: 8 /* FormatType.NewLine */\n            });\n        }\n        else {\n            if (current.type !== 2 /* FormatType.Text */) {\n                const textCurrent = {\n                    type: 2 /* FormatType.Text */,\n                    content: next\n                };\n                current.children.push(textCurrent);\n                stack.push(current);\n                current = textCurrent;\n            }\n            else {\n                current.content += next;\n            }\n        }\n    }\n    if (current.type === 2 /* FormatType.Text */) {\n        current = stack.pop();\n    }\n    if (stack.length) {\n        // incorrectly formatted string literal\n    }\n    return root;\n}\nfunction isFormatTag(char, supportCodeSegments) {\n    return formatTagType(char, supportCodeSegments) !== 0 /* FormatType.Invalid */;\n}\nfunction formatTagType(char, supportCodeSegments) {\n    switch (char) {\n        case '*':\n            return 3 /* FormatType.Bold */;\n        case '_':\n            return 4 /* FormatType.Italics */;\n        case '[':\n            return 5 /* FormatType.Action */;\n        case ']':\n            return 6 /* FormatType.ActionClose */;\n        case '`':\n            return supportCodeSegments ? 7 /* FormatType.Code */ : 0 /* FormatType.Invalid */;\n        default:\n            return 0 /* FormatType.Invalid */;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from './dom.js';\nimport { DisposableStore, toDisposable } from '../common/lifecycle.js';\nexport class GlobalPointerMoveMonitor {\n    constructor() {\n        this._hooks = new DisposableStore();\n        this._pointerMoveCallback = null;\n        this._onStopCallback = null;\n    }\n    dispose() {\n        this.stopMonitoring(false);\n        this._hooks.dispose();\n    }\n    stopMonitoring(invokeStopCallback, browserEvent) {\n        if (!this.isMonitoring()) {\n            // Not monitoring\n            return;\n        }\n        // Unhook\n        this._hooks.clear();\n        this._pointerMoveCallback = null;\n        const onStopCallback = this._onStopCallback;\n        this._onStopCallback = null;\n        if (invokeStopCallback && onStopCallback) {\n            onStopCallback(browserEvent);\n        }\n    }\n    isMonitoring() {\n        return !!this._pointerMoveCallback;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        if (this.isMonitoring()) {\n            this.stopMonitoring(false);\n        }\n        this._pointerMoveCallback = pointerMoveCallback;\n        this._onStopCallback = onStopCallback;\n        let eventSource = initialElement;\n        try {\n            initialElement.setPointerCapture(pointerId);\n            this._hooks.add(toDisposable(() => {\n                initialElement.releasePointerCapture(pointerId);\n            }));\n        }\n        catch (err) {\n            // See https://github.com/microsoft/vscode/issues/144584\n            // See https://github.com/microsoft/vscode/issues/146947\n            // `setPointerCapture` sometimes fails when being invoked\n            // from a `mousedown` listener on macOS and Windows\n            // and it always fails on Linux with the exception:\n            //     DOMException: Failed to execute 'setPointerCapture' on 'Element':\n            //     No active pointer with the given id is found.\n            // In case of failure, we bind the listeners on the window\n            eventSource = window;\n        }\n        this._hooks.add(dom.addDisposableListener(eventSource, dom.EventType.POINTER_MOVE, (e) => {\n            if (e.buttons !== initialButtons) {\n                // Buttons state has changed in the meantime\n                this.stopMonitoring(true);\n                return;\n            }\n            e.preventDefault();\n            this._pointerMoveCallback(e);\n        }));\n        this._hooks.add(dom.addDisposableListener(eventSource, dom.EventType.POINTER_UP, (e) => this.stopMonitoring(true)));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { EVENT_KEY_CODE_MAP, KeyCodeUtils } from '../common/keyCodes.js';\nimport { SimpleKeybinding } from '../common/keybindings.js';\nimport * as platform from '../common/platform.js';\nfunction extractKeyCode(e) {\n    if (e.charCode) {\n        // \"keypress\" events mostly\n        const char = String.fromCharCode(e.charCode).toUpperCase();\n        return KeyCodeUtils.fromString(char);\n    }\n    const keyCode = e.keyCode;\n    // browser quirks\n    if (keyCode === 3) {\n        return 7 /* KeyCode.PauseBreak */;\n    }\n    else if (browser.isFirefox) {\n        if (keyCode === 59) {\n            return 80 /* KeyCode.Semicolon */;\n        }\n        else if (keyCode === 107) {\n            return 81 /* KeyCode.Equal */;\n        }\n        else if (keyCode === 109) {\n            return 83 /* KeyCode.Minus */;\n        }\n        else if (platform.isMacintosh && keyCode === 224) {\n            return 57 /* KeyCode.Meta */;\n        }\n    }\n    else if (browser.isWebKit) {\n        if (keyCode === 91) {\n            return 57 /* KeyCode.Meta */;\n        }\n        else if (platform.isMacintosh && keyCode === 93) {\n            // the two meta keys in the Mac have different key codes (91 and 93)\n            return 57 /* KeyCode.Meta */;\n        }\n        else if (!platform.isMacintosh && keyCode === 92) {\n            return 57 /* KeyCode.Meta */;\n        }\n    }\n    // cross browser keycodes:\n    return EVENT_KEY_CODE_MAP[keyCode] || 0 /* KeyCode.Unknown */;\n}\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nconst altKeyMod = 512 /* KeyMod.Alt */;\nconst shiftKeyMod = 1024 /* KeyMod.Shift */;\nconst metaKeyMod = (platform.isMacintosh ? 2048 /* KeyMod.CtrlCmd */ : 256 /* KeyMod.WinCtrl */);\nexport class StandardKeyboardEvent {\n    constructor(source) {\n        this._standardKeyboardEventBrand = true;\n        const e = source;\n        this.browserEvent = e;\n        this.target = e.target;\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        this.keyCode = extractKeyCode(e);\n        this.code = e.code;\n        // console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n        this.ctrlKey = this.ctrlKey || this.keyCode === 5 /* KeyCode.Ctrl */;\n        this.altKey = this.altKey || this.keyCode === 6 /* KeyCode.Alt */;\n        this.shiftKey = this.shiftKey || this.keyCode === 4 /* KeyCode.Shift */;\n        this.metaKey = this.metaKey || this.keyCode === 57 /* KeyCode.Meta */;\n        this._asKeybinding = this._computeKeybinding();\n        this._asRuntimeKeybinding = this._computeRuntimeKeybinding();\n        // console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n    }\n    preventDefault() {\n        if (this.browserEvent && this.browserEvent.preventDefault) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent && this.browserEvent.stopPropagation) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n    toKeybinding() {\n        return this._asRuntimeKeybinding;\n    }\n    equals(other) {\n        return this._asKeybinding === other;\n    }\n    _computeKeybinding() {\n        let key = 0 /* KeyCode.Unknown */;\n        if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {\n            key = this.keyCode;\n        }\n        let result = 0;\n        if (this.ctrlKey) {\n            result |= ctrlKeyMod;\n        }\n        if (this.altKey) {\n            result |= altKeyMod;\n        }\n        if (this.shiftKey) {\n            result |= shiftKeyMod;\n        }\n        if (this.metaKey) {\n            result |= metaKeyMod;\n        }\n        result |= key;\n        return result;\n    }\n    _computeRuntimeKeybinding() {\n        let key = 0 /* KeyCode.Unknown */;\n        if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {\n            key = this.keyCode;\n        }\n        return new SimpleKeybinding(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { escapeDoubleQuotes, parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${escapeDoubleQuotes(href)}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${escapeDoubleQuotes(text)}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${escapeDoubleQuotes(title)}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        title = typeof title === 'string' ? escapeDoubleQuotes(removeMarkdownEscapes(title)) : '';\n        href = removeMarkdownEscapes(href);\n        // HTML Encode href\n        href = href.replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n        return `<a href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    // Will collect [id, renderedElement] tuples\n    const codeBlocks = [];\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            codeBlocks.push(value.then(element => [id, element]));\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    markdownHtmlDoc.body.querySelectorAll('a')\n        .forEach(a => {\n        const href = a.getAttribute('href'); // Get the raw 'href' attribute value as text, not the resolved 'href'\n        a.setAttribute('href', ''); // Clear out href. We use the `data-href` for handling clicks instead\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            a.replaceWith(...a.childNodes);\n        }\n        else {\n            let resolvedHref = _href(href, false);\n            if (markdown.baseUri) {\n                resolvedHref = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n            }\n            a.dataset.href = resolvedHref;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    if (codeBlocks.length > 0) {\n        Promise.all(codeBlocks).then((tuples) => {\n            var _a, _b;\n            if (isDisposed) {\n                return;\n            }\n            const renderedElements = new Map(tuples);\n            const placeholderElements = element.querySelectorAll(`div[data-code]`);\n            for (const placeholderElement of placeholderElements) {\n                const renderedElement = renderedElements.get((_a = placeholderElement.dataset['code']) !== null && _a !== void 0 ? _a : '');\n                if (renderedElement) {\n                    DOM.reset(placeholderElement, renderedElement);\n                }\n            }\n            (_b = options.asyncRenderCallback) === null || _b === void 0 ? void 0 : _b.call(options);\n        });\n    }\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    const hook = DOM.hookDomPurifyHrefAndSrcSanitizer(allowedSchemes);\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        hook.dispose();\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nlet hasDifferentOriginAncestorFlag = false;\nlet sameOriginWindowChainCache = null;\nfunction getParentWindowIfSameOrigin(w) {\n    if (!w.parent || w.parent === w) {\n        return null;\n    }\n    // Cannot really tell if we have access to the parent window unless we try to access something in it\n    try {\n        const location = w.location;\n        const parentLocation = w.parent.location;\n        if (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n            hasDifferentOriginAncestorFlag = true;\n            return null;\n        }\n    }\n    catch (e) {\n        hasDifferentOriginAncestorFlag = true;\n        return null;\n    }\n    return w.parent;\n}\nexport class IframeUtils {\n    /**\n     * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n     * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n     * To distinguish if at one point the current execution environment is running inside a window with a different origin, see hasDifferentOriginAncestor()\n     */\n    static getSameOriginWindowChain() {\n        if (!sameOriginWindowChainCache) {\n            sameOriginWindowChainCache = [];\n            let w = window;\n            let parent;\n            do {\n                parent = getParentWindowIfSameOrigin(w);\n                if (parent) {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: w.frameElement || null\n                    });\n                }\n                else {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: null\n                    });\n                }\n                w = parent;\n            } while (w);\n        }\n        return sameOriginWindowChainCache.slice(0);\n    }\n    /**\n     * Returns the position of `childWindow` relative to `ancestorWindow`\n     */\n    static getPositionOfChildWindowRelativeToAncestorWindow(childWindow, ancestorWindow) {\n        if (!ancestorWindow || childWindow === ancestorWindow) {\n            return {\n                top: 0,\n                left: 0\n            };\n        }\n        let top = 0, left = 0;\n        const windowChain = this.getSameOriginWindowChain();\n        for (const windowChainEl of windowChain) {\n            top += windowChainEl.window.scrollY;\n            left += windowChainEl.window.scrollX;\n            if (windowChainEl.window === ancestorWindow) {\n                break;\n            }\n            if (!windowChainEl.iframeElement) {\n                break;\n            }\n            const boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n            top += boundingRect.top;\n            left += boundingRect.left;\n        }\n        return {\n            top: top,\n            left: left\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { IframeUtils } from './iframe.js';\nimport * as platform from '../common/platform.js';\nexport class StandardMouseEvent {\n    constructor(e) {\n        this.timestamp = Date.now();\n        this.browserEvent = e;\n        this.leftButton = e.button === 0;\n        this.middleButton = e.button === 1;\n        this.rightButton = e.button === 2;\n        this.buttons = e.buttons;\n        this.target = e.target;\n        this.detail = e.detail || 1;\n        if (e.type === 'dblclick') {\n            this.detail = 2;\n        }\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        if (typeof e.pageX === 'number') {\n            this.posx = e.pageX;\n            this.posy = e.pageY;\n        }\n        else {\n            // Probably hit by MSGestureEvent\n            this.posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n            this.posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n        }\n        // Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n        const iframeOffsets = IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self, e.view);\n        this.posx -= iframeOffsets.left;\n        this.posy -= iframeOffsets.top;\n    }\n    preventDefault() {\n        this.browserEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent.stopPropagation();\n    }\n}\nexport class StandardWheelEvent {\n    constructor(e, deltaX = 0, deltaY = 0) {\n        this.browserEvent = e || null;\n        this.target = e ? (e.target || e.targetNode || e.srcElement) : null;\n        this.deltaY = deltaY;\n        this.deltaX = deltaX;\n        if (e) {\n            // Old (deprecated) wheel events\n            const e1 = e;\n            const e2 = e;\n            // vertical delta scroll\n            if (typeof e1.wheelDeltaY !== 'undefined') {\n                this.deltaY = e1.wheelDeltaY / 120;\n            }\n            else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n                this.deltaY = -e2.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaY = -e.deltaY / 3;\n                    }\n                    else {\n                        this.deltaY = -e.deltaY;\n                    }\n                }\n                else {\n                    this.deltaY = -e.deltaY / 40;\n                }\n            }\n            // horizontal delta scroll\n            if (typeof e1.wheelDeltaX !== 'undefined') {\n                if (browser.isSafari && platform.isWindows) {\n                    this.deltaX = -(e1.wheelDeltaX / 120);\n                }\n                else {\n                    this.deltaX = e1.wheelDeltaX / 120;\n                }\n            }\n            else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n                this.deltaX = -e.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaX = -e.deltaX / 3;\n                    }\n                    else {\n                        this.deltaX = -e.deltaX;\n                    }\n                }\n                else {\n                    this.deltaX = -e.deltaX / 40;\n                }\n            }\n            // Assume a vertical scroll if nothing else worked\n            if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n                this.deltaY = e.wheelDelta / 120;\n            }\n        }\n    }\n    preventDefault() {\n        if (this.browserEvent) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Disposable } from '../common/lifecycle.js';\nexport var EventType;\n(function (EventType) {\n    EventType.Tap = '-monaco-gesturetap';\n    EventType.Change = '-monaco-gesturechange';\n    EventType.Start = '-monaco-gesturestart';\n    EventType.End = '-monaco-gesturesend';\n    EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport class Gesture extends Disposable {\n    constructor() {\n        super();\n        this.dispatched = false;\n        this.activeTouches = {};\n        this.handle = null;\n        this.targets = [];\n        this.ignoreTargets = [];\n        this._lastSetTapCountTime = 0;\n        this._register(DomUtils.addDisposableListener(document, 'touchstart', (e) => this.onTouchStart(e), { passive: false }));\n        this._register(DomUtils.addDisposableListener(document, 'touchend', (e) => this.onTouchEnd(e)));\n        this._register(DomUtils.addDisposableListener(document, 'touchmove', (e) => this.onTouchMove(e), { passive: false }));\n    }\n    static addTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.targets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.targets = Gesture.INSTANCE.targets.filter(t => t !== element);\n            }\n        };\n    }\n    static ignoreTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.ignoreTargets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.ignoreTargets = Gesture.INSTANCE.ignoreTargets.filter(t => t !== element);\n            }\n        };\n    }\n    static isTouchDevice() {\n        // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n        // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n        return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n    }\n    dispose() {\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        super.dispose();\n    }\n    onTouchStart(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        for (let i = 0, len = e.targetTouches.length; i < len; i++) {\n            const touch = e.targetTouches.item(i);\n            this.activeTouches[touch.identifier] = {\n                id: touch.identifier,\n                initialTarget: touch.target,\n                initialTimeStamp: timestamp,\n                initialPageX: touch.pageX,\n                initialPageY: touch.pageY,\n                rollingTimestamps: [timestamp],\n                rollingPageX: [touch.pageX],\n                rollingPageY: [touch.pageY]\n            };\n            const evt = this.newGestureEvent(EventType.Start, touch.target);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    onTouchEnd(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        const activeTouchCount = Object.keys(this.activeTouches).length;\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('move of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier], holdTime = Date.now() - data.initialTimeStamp;\n            if (holdTime < Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (holdTime >= Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (activeTouchCount === 1) {\n                const finalX = arrays.tail(data.rollingPageX);\n                const finalY = arrays.tail(data.rollingPageY);\n                const deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n                const deltaX = finalX - data.rollingPageX[0];\n                const deltaY = finalY - data.rollingPageY[0];\n                // We need to get all the dispatch targets on the start of the inertia event\n                const dispatchTo = this.targets.filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n                this.inertia(dispatchTo, timestamp, // time now\n                Math.abs(deltaX) / deltaT, // speed\n                deltaX > 0 ? 1 : -1, // x direction\n                finalX, // x now\n                Math.abs(deltaY) / deltaT, // y speed\n                deltaY > 0 ? 1 : -1, // y direction\n                finalY // y now\n                );\n            }\n            this.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n            // forget about this touch\n            delete this.activeTouches[touch.identifier];\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    newGestureEvent(type, initialTarget) {\n        const event = document.createEvent('CustomEvent');\n        event.initEvent(type, false, true);\n        event.initialTarget = initialTarget;\n        event.tapCount = 0;\n        return event;\n    }\n    dispatchEvent(event) {\n        if (event.type === EventType.Tap) {\n            const currentTime = (new Date()).getTime();\n            let setTapCount = 0;\n            if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n                setTapCount = 1;\n            }\n            else {\n                setTapCount = 2;\n            }\n            this._lastSetTapCountTime = currentTime;\n            event.tapCount = setTapCount;\n        }\n        else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n            // tap is canceled by scrolling or context menu\n            this._lastSetTapCountTime = 0;\n        }\n        for (let i = 0; i < this.ignoreTargets.length; i++) {\n            if (event.initialTarget instanceof Node && this.ignoreTargets[i].contains(event.initialTarget)) {\n                return;\n            }\n        }\n        this.targets.forEach(target => {\n            if (event.initialTarget instanceof Node && target.contains(event.initialTarget)) {\n                target.dispatchEvent(event);\n                this.dispatched = true;\n            }\n        });\n    }\n    inertia(dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n        this.handle = DomUtils.scheduleAtNextAnimationFrame(() => {\n            const now = Date.now();\n            // velocity: old speed + accel_over_time\n            const deltaT = now - t1;\n            let delta_pos_x = 0, delta_pos_y = 0;\n            let stopped = true;\n            vX += Gesture.SCROLL_FRICTION * deltaT;\n            vY += Gesture.SCROLL_FRICTION * deltaT;\n            if (vX > 0) {\n                stopped = false;\n                delta_pos_x = dirX * vX * deltaT;\n            }\n            if (vY > 0) {\n                stopped = false;\n                delta_pos_y = dirY * vY * deltaT;\n            }\n            // dispatch translation event\n            const evt = this.newGestureEvent(EventType.Change);\n            evt.translationX = delta_pos_x;\n            evt.translationY = delta_pos_y;\n            dispatchTo.forEach(d => d.dispatchEvent(evt));\n            if (!stopped) {\n                this.inertia(dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n            }\n        });\n    }\n    onTouchMove(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('end of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier];\n            const evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n            evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n            evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n            // only keep a few data points, to average the final speed\n            if (data.rollingPageX.length > 3) {\n                data.rollingPageX.shift();\n                data.rollingPageY.shift();\n                data.rollingTimestamps.shift();\n            }\n            data.rollingPageX.push(touch.pageX);\n            data.rollingPageY.push(touch.pageY);\n            data.rollingTimestamps.push(timestamp);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n}\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([\n    memoize\n], Gesture, \"isTouchDevice\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { setupCustomHover } from '../iconLabel/iconLabelHover.js';\nimport { Action, ActionRunner, Separator } from '../../../common/actions.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nimport * as nls from '../../../../nls.js';\nexport class BaseActionViewItem extends Disposable {\n    constructor(context, action, options = {}) {\n        super();\n        this.options = options;\n        this._context = context || this;\n        this._action = action;\n        if (action instanceof Action) {\n            this._register(action.onDidChange(event => {\n                if (!this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                this.handleActionChangeEvent(event);\n            }));\n        }\n    }\n    get action() {\n        return this._action;\n    }\n    handleActionChangeEvent(event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    }\n    get actionRunner() {\n        if (!this._actionRunner) {\n            this._actionRunner = this._register(new ActionRunner());\n        }\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    getAction() {\n        return this._action;\n    }\n    isEnabled() {\n        return this._action.enabled;\n    }\n    setActionContext(newContext) {\n        this._context = newContext;\n    }\n    render(container) {\n        const element = this.element = container;\n        this._register(Gesture.addTarget(container));\n        const enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n            if (isFirefox) {\n                // Firefox: requires to set a text data transfer to get going\n                this._register(addDisposableListener(container, EventType.DRAG_START, e => { var _a; return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, this._action.label); }));\n            }\n        }\n        this._register(addDisposableListener(element, TouchEventType.Tap, e => this.onClick(e, true))); // Preserve focus on tap #125470\n        this._register(addDisposableListener(element, EventType.MOUSE_DOWN, e => {\n            if (!enableDragging) {\n                EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (this._action.enabled && e.button === 0) {\n                element.classList.add('active');\n            }\n        }));\n        if (platform.isMacintosh) {\n            // macOS: allow to trigger the button when holding Ctrl+key and pressing the\n            // main mouse button. This is for scenarios where e.g. some interaction forces\n            // the Ctrl+key to be pressed and hold but the user still wants to interact\n            // with the actions (for example quick access in quick navigation mode).\n            this._register(addDisposableListener(element, EventType.CONTEXT_MENU, e => {\n                if (e.button === 0 && e.ctrlKey === true) {\n                    this.onClick(e);\n                }\n            }));\n        }\n        this._register(addDisposableListener(element, EventType.CLICK, e => {\n            EventHelper.stop(e, true);\n            // menus do not use the click event\n            if (!(this.options && this.options.isMenu)) {\n                this.onClick(e);\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DBLCLICK, e => {\n            EventHelper.stop(e, true);\n        }));\n        [EventType.MOUSE_UP, EventType.MOUSE_OUT].forEach(event => {\n            this._register(addDisposableListener(element, event, e => {\n                EventHelper.stop(e);\n                element.classList.remove('active');\n            }));\n        });\n    }\n    onClick(event, preserveFocus = false) {\n        var _a;\n        EventHelper.stop(event, true);\n        const context = types.isUndefinedOrNull(this._context) ? ((_a = this.options) === null || _a === void 0 ? void 0 : _a.useEventAsContext) ? event : { preserveFocus } : this._context;\n        this.actionRunner.run(this._action, context);\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.element) {\n            this.element.tabIndex = 0;\n            this.element.focus();\n            this.element.classList.add('focused');\n        }\n    }\n    blur() {\n        if (this.element) {\n            this.element.blur();\n            this.element.tabIndex = -1;\n            this.element.classList.remove('focused');\n        }\n    }\n    setFocusable(focusable) {\n        if (this.element) {\n            this.element.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    get trapsArrowNavigation() {\n        return false;\n    }\n    updateEnabled() {\n        // implement in subclass\n    }\n    updateLabel() {\n        // implement in subclass\n    }\n    getTooltip() {\n        return this.getAction().tooltip;\n    }\n    updateTooltip() {\n        var _a;\n        if (!this.element) {\n            return;\n        }\n        const title = (_a = this.getTooltip()) !== null && _a !== void 0 ? _a : '';\n        this.element.setAttribute('aria-label', title);\n        if (!this.options.hoverDelegate) {\n            this.element.title = title;\n        }\n        else {\n            this.element.title = '';\n            if (!this.customHover) {\n                this.customHover = setupCustomHover(this.options.hoverDelegate, this.element, title);\n                this._store.add(this.customHover);\n            }\n            else {\n                this.customHover.update(title);\n            }\n        }\n    }\n    updateClass() {\n        // implement in subclass\n    }\n    updateChecked() {\n        // implement in subclass\n    }\n    dispose() {\n        if (this.element) {\n            this.element.remove();\n            this.element = undefined;\n        }\n        super.dispose();\n    }\n}\nexport class ActionViewItem extends BaseActionViewItem {\n    constructor(context, action, options = {}) {\n        super(context, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n    }\n    render(container) {\n        super.render(container);\n        if (this.element) {\n            this.label = append(this.element, $('a.action-label'));\n        }\n        if (this.label) {\n            if (this._action.id === Separator.ID) {\n                this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n            }\n            else {\n                if (this.options.isMenu) {\n                    this.label.setAttribute('role', 'menuitem');\n                }\n                else {\n                    this.label.setAttribute('role', 'button');\n                }\n            }\n        }\n        if (this.options.label && this.options.keybinding && this.element) {\n            append(this.element, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.label) {\n            this.label.tabIndex = 0;\n            this.label.focus();\n        }\n    }\n    blur() {\n        if (this.label) {\n            this.label.tabIndex = -1;\n        }\n    }\n    setFocusable(focusable) {\n        if (this.label) {\n            this.label.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this.getAction().label;\n        }\n    }\n    getTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\n            title = this.getAction().label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    updateClass() {\n        var _a;\n        if (this.cssClass && this.label) {\n            this.label.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getAction().class;\n            if (this.label) {\n                this.label.classList.add('codicon');\n                if (this.cssClass) {\n                    this.label.classList.add(...this.cssClass.split(' '));\n                }\n            }\n            this.updateEnabled();\n        }\n        else {\n            (_a = this.label) === null || _a === void 0 ? void 0 : _a.classList.remove('codicon');\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        if (this.getAction().enabled) {\n            if (this.label) {\n                this.label.removeAttribute('aria-disabled');\n                this.label.classList.remove('disabled');\n            }\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.classList.remove('disabled');\n        }\n        else {\n            if (this.label) {\n                this.label.setAttribute('aria-disabled', 'true');\n                this.label.classList.add('disabled');\n            }\n            (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.add('disabled');\n        }\n    }\n    updateChecked() {\n        if (this.label) {\n            if (this.getAction().checked) {\n                this.label.classList.add('checked');\n            }\n            else {\n                this.label.classList.remove('checked');\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as DOM from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from './actionViewItems.js';\nimport { ActionRunner, Separator } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, dispose } from '../../../common/lifecycle.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nexport class ActionBar extends Disposable {\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        super();\n        // Trigger Key Tracking\n        this.triggerKeyDown = false;\n        this.focusable = true;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidCancel = this._register(new Emitter({ onFirstListenerAdd: () => this.cancelHasListener = true }));\n        this.onDidCancel = this._onDidCancel.event;\n        this.cancelHasListener = false;\n        this._onDidRun = this._register(new Emitter());\n        this.onDidRun = this._onDidRun.event;\n        this._onBeforeRun = this._register(new Emitter());\n        this.onBeforeRun = this._onBeforeRun.event;\n        this.options = options;\n        this._context = (_a = options.context) !== null && _a !== void 0 ? _a : null;\n        this._orientation = (_b = this.options.orientation) !== null && _b !== void 0 ? _b : 0 /* ActionsOrientation.HORIZONTAL */;\n        this._triggerKeys = {\n            keyDown: (_d = (_c = this.options.triggerKeys) === null || _c === void 0 ? void 0 : _c.keyDown) !== null && _d !== void 0 ? _d : false,\n            keys: (_f = (_e = this.options.triggerKeys) === null || _e === void 0 ? void 0 : _e.keys) !== null && _f !== void 0 ? _f : [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */]\n        };\n        if (this.options.actionRunner) {\n            this._actionRunner = this.options.actionRunner;\n        }\n        else {\n            this._actionRunner = new ActionRunner();\n            this._register(this._actionRunner);\n        }\n        this._register(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._register(this._actionRunner.onBeforeRun(e => this._onBeforeRun.fire(e)));\n        this._actionIds = [];\n        this.viewItems = [];\n        this.viewItemDisposables = new Map();\n        this.focusedItem = undefined;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-action-bar';\n        if (options.animated !== false) {\n            this.domNode.classList.add('animated');\n        }\n        let previousKeys;\n        let nextKeys;\n        switch (this._orientation) {\n            case 0 /* ActionsOrientation.HORIZONTAL */:\n                previousKeys = [15 /* KeyCode.LeftArrow */];\n                nextKeys = [17 /* KeyCode.RightArrow */];\n                break;\n            case 1 /* ActionsOrientation.VERTICAL */:\n                previousKeys = [16 /* KeyCode.UpArrow */];\n                nextKeys = [18 /* KeyCode.DownArrow */];\n                this.domNode.className += ' vertical';\n                break;\n        }\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = true;\n            const focusedItem = typeof this.focusedItem === 'number' ? this.viewItems[this.focusedItem] : undefined;\n            if (previousKeys && (event.equals(previousKeys[0]) || event.equals(previousKeys[1]))) {\n                eventHandled = this.focusPrevious();\n            }\n            else if (nextKeys && (event.equals(nextKeys[0]) || event.equals(nextKeys[1]))) {\n                eventHandled = this.focusNext();\n            }\n            else if (event.equals(9 /* KeyCode.Escape */) && this.cancelHasListener) {\n                this._onDidCancel.fire();\n            }\n            else if (event.equals(14 /* KeyCode.Home */)) {\n                eventHandled = this.focusFirst();\n            }\n            else if (event.equals(13 /* KeyCode.End */)) {\n                eventHandled = this.focusLast();\n            }\n            else if (event.equals(2 /* KeyCode.Tab */) && focusedItem instanceof BaseActionViewItem && focusedItem.trapsArrowNavigation) {\n                eventHandled = this.focusNext();\n            }\n            else if (this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (this._triggerKeys.keyDown) {\n                    this.doTrigger(event);\n                }\n                else {\n                    this.triggerKeyDown = true;\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (this.isTriggerKeyEvent(event)) {\n                if (!this._triggerKeys.keyDown && this.triggerKeyDown) {\n                    this.triggerKeyDown = false;\n                    this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(2 /* KeyCode.Tab */) || event.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                this.updateFocusedItem();\n            }\n        }));\n        this.focusTracker = this._register(DOM.trackFocus(this.domNode));\n        this._register(this.focusTracker.onDidBlur(() => {\n            if (DOM.getActiveElement() === this.domNode || !DOM.isAncestor(DOM.getActiveElement(), this.domNode)) {\n                this._onDidBlur.fire();\n                this.focusedItem = undefined;\n                this.previouslyFocusedItem = undefined;\n                this.triggerKeyDown = false;\n            }\n        }));\n        this._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n        this.actionsList = document.createElement('ul');\n        this.actionsList.className = 'actions-container';\n        this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        if (this.options.ariaLabel) {\n            this.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        this.domNode.appendChild(this.actionsList);\n        container.appendChild(this.domNode);\n    }\n    refreshRole() {\n        if (this.length() >= 2) {\n            this.actionsList.setAttribute('role', this.options.ariaRole || 'toolbar');\n        }\n        else {\n            this.actionsList.setAttribute('role', 'presentation');\n        }\n    }\n    // Some action bars should not be focusable at times\n    // When an action bar is not focusable make sure to make all the elements inside it not focusable\n    // When an action bar is focusable again, make sure the first item can be focused\n    setFocusable(focusable) {\n        this.focusable = focusable;\n        if (this.focusable) {\n            const firstEnabled = this.viewItems.find(vi => vi instanceof BaseActionViewItem && vi.isEnabled());\n            if (firstEnabled instanceof BaseActionViewItem) {\n                firstEnabled.setFocusable(true);\n            }\n        }\n        else {\n            this.viewItems.forEach(vi => {\n                if (vi instanceof BaseActionViewItem) {\n                    vi.setFocusable(false);\n                }\n            });\n        }\n    }\n    isTriggerKeyEvent(event) {\n        let ret = false;\n        this._triggerKeys.keys.forEach(keyCode => {\n            ret = ret || event.equals(keyCode);\n        });\n        return ret;\n    }\n    updateFocusedItem() {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (DOM.isAncestor(DOM.getActiveElement(), elem)) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    get context() {\n        return this._context;\n    }\n    set context(context) {\n        this._context = context;\n        this.viewItems.forEach(i => i.setActionContext(context));\n    }\n    get actionRunner() {\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        if (actionRunner) {\n            this._actionRunner = actionRunner;\n            this.viewItems.forEach(item => item.actionRunner = actionRunner);\n        }\n    }\n    getContainer() {\n        return this.domNode;\n    }\n    push(arg, options = {}) {\n        const actions = Array.isArray(arg) ? arg : [arg];\n        let index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach((action) => {\n            const actionViewItemElement = document.createElement('li');\n            actionViewItemElement.className = 'action-item';\n            actionViewItemElement.setAttribute('role', 'presentation');\n            let item;\n            if (this.options.actionViewItemProvider) {\n                item = this.options.actionViewItemProvider(action);\n            }\n            if (!item) {\n                item = new ActionViewItem(this.context, action, Object.assign({ hoverDelegate: this.options.hoverDelegate }, options));\n            }\n            // Prevent native context menu on actions\n            if (!this.options.allowContextMenu) {\n                this.viewItemDisposables.set(item, DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, (e) => {\n                    DOM.EventHelper.stop(e, true);\n                }));\n            }\n            item.actionRunner = this._actionRunner;\n            item.setActionContext(this.context);\n            item.render(actionViewItemElement);\n            if (this.focusable && item instanceof BaseActionViewItem && this.viewItems.length === 0) {\n                // We need to allow for the first enabled item to be focused on using tab navigation #106441\n                item.setFocusable(true);\n            }\n            if (index === null || index < 0 || index >= this.actionsList.children.length) {\n                this.actionsList.appendChild(actionViewItemElement);\n                this.viewItems.push(item);\n                this._actionIds.push(action.id);\n            }\n            else {\n                this.actionsList.insertBefore(actionViewItemElement, this.actionsList.children[index]);\n                this.viewItems.splice(index, 0, item);\n                this._actionIds.splice(index, 0, action.id);\n                index++;\n            }\n        });\n        if (typeof this.focusedItem === 'number') {\n            // After a clear actions might be re-added to simply toggle some actions. We should preserve focus #97128\n            this.focus(this.focusedItem);\n        }\n        this.refreshRole();\n    }\n    clear() {\n        dispose(this.viewItems);\n        this.viewItemDisposables.forEach(d => d.dispose());\n        this.viewItemDisposables.clear();\n        this.viewItems = [];\n        this._actionIds = [];\n        DOM.clearNode(this.actionsList);\n        this.refreshRole();\n    }\n    length() {\n        return this.viewItems.length;\n    }\n    focus(arg) {\n        let selectFirst = false;\n        let index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            const firstEnabled = this.viewItems.findIndex(item => item.isEnabled());\n            // Focus the first enabled item\n            this.focusedItem = firstEnabled === -1 ? undefined : firstEnabled;\n            this.updateFocus(undefined, undefined, true);\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus(undefined, undefined, true);\n        }\n    }\n    focusFirst() {\n        this.focusedItem = this.length() - 1;\n        return this.focusNext(true);\n    }\n    focusLast() {\n        this.focusedItem = 0;\n        return this.focusPrevious(true);\n    }\n    focusNext(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            if (!forceLoop && this.options.preventLoopNavigation && this.focusedItem + 1 >= this.viewItems.length) {\n                this.focusedItem = startIndex;\n                return false;\n            }\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus();\n        return true;\n    }\n    focusPrevious(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                if (!forceLoop && this.options.preventLoopNavigation) {\n                    this.focusedItem = startIndex;\n                    return false;\n                }\n                this.focusedItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && ((this.options.focusOnlyEnabledItems && !item.isEnabled()) || item.action.id === Separator.ID));\n        this.updateFocus(true);\n        return true;\n    }\n    updateFocus(fromRight, preventScroll, forceFocus = false) {\n        var _a;\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus({ preventScroll });\n        }\n        if (this.previouslyFocusedItem !== undefined && this.previouslyFocusedItem !== this.focusedItem) {\n            (_a = this.viewItems[this.previouslyFocusedItem]) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        const actionViewItem = this.focusedItem !== undefined && this.viewItems[this.focusedItem];\n        if (actionViewItem) {\n            let focusItem = true;\n            if (!types.isFunction(actionViewItem.focus)) {\n                focusItem = false;\n            }\n            if (this.options.focusOnlyEnabledItems && types.isFunction(actionViewItem.isEnabled) && !actionViewItem.isEnabled()) {\n                focusItem = false;\n            }\n            if (actionViewItem.action.id === Separator.ID) {\n                focusItem = false;\n            }\n            if (!focusItem) {\n                this.actionsList.focus({ preventScroll });\n                this.previouslyFocusedItem = undefined;\n            }\n            else if (forceFocus || this.previouslyFocusedItem !== this.focusedItem) {\n                actionViewItem.focus(fromRight);\n                this.previouslyFocusedItem = this.focusedItem;\n            }\n        }\n    }\n    doTrigger(event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        const actionViewItem = this.viewItems[this.focusedItem];\n        if (actionViewItem instanceof BaseActionViewItem) {\n            const context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\n            this.run(actionViewItem._action, context);\n        }\n    }\n    run(action, context) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._actionRunner.run(action, context);\n        });\n    }\n    dispose() {\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this._actionIds = [];\n        this.getContainer().remove();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './aria.css';\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer;\nlet alertContainer;\nlet alertContainer2;\nlet statusContainer;\nlet statusContainer2;\nexport function setARIAContainer(parent) {\n    ariaContainer = document.createElement('div');\n    ariaContainer.className = 'monaco-aria-container';\n    const createAlertContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-alert';\n        element.setAttribute('role', 'alert');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    alertContainer = createAlertContainer();\n    alertContainer2 = createAlertContainer();\n    const createStatusContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-status';\n        element.setAttribute('role', 'complementary');\n        element.setAttribute('aria-live', 'polite');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    statusContainer = createStatusContainer();\n    statusContainer2 = createStatusContainer();\n    parent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\n    if (alertContainer.textContent !== msg) {\n        dom.clearNode(alertContainer2);\n        insertMessage(alertContainer, msg);\n    }\n    else {\n        dom.clearNode(alertContainer);\n        insertMessage(alertContainer2, msg);\n    }\n}\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    if (isMacintosh) {\n        alert(msg); // VoiceOver does not seem to support status role\n    }\n    else {\n        if (statusContainer.textContent !== msg) {\n            dom.clearNode(statusContainer2);\n            insertMessage(statusContainer, msg);\n        }\n        else {\n            dom.clearNode(statusContainer);\n            insertMessage(statusContainer2, msg);\n        }\n    }\n}\nfunction insertMessage(target, msg) {\n    dom.clearNode(target);\n    if (msg.length > MAX_MESSAGE_LENGTH) {\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n    }\n    target.textContent = msg;\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n    target.style.visibility = 'hidden';\n    target.style.visibility = 'visible';\n}\n","import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { mixin } from '../../../common/objects.js';\nimport './button.css';\nconst defaultOptions = {\n    buttonBackground: Color.fromHex('#0E639C'),\n    buttonHoverBackground: Color.fromHex('#006BB3'),\n    buttonSeparator: Color.white,\n    buttonForeground: Color.white\n};\nexport class Button extends Disposable {\n    constructor(container, options) {\n        super();\n        this._onDidClick = this._register(new Emitter());\n        this.options = options || Object.create(null);\n        mixin(this.options, defaultOptions, false);\n        this.buttonForeground = this.options.buttonForeground;\n        this.buttonBackground = this.options.buttonBackground;\n        this.buttonHoverBackground = this.options.buttonHoverBackground;\n        this.buttonSecondaryForeground = this.options.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = this.options.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = this.options.buttonSecondaryHoverBackground;\n        this.buttonBorder = this.options.buttonBorder;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* KeyCode.Escape */)) {\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.setHoverBackground();\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.applyStyles(); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => { if (this.enabled) {\n            this.setHoverBackground();\n        } }));\n        this._register(this.focusTracker.onDidBlur(() => { if (this.enabled) {\n            this.applyStyles();\n        } }));\n        this.applyStyles();\n    }\n    get onDidClick() { return this._onDidClick.event; }\n    setHoverBackground() {\n        let hoverBackground;\n        if (this.options.secondary) {\n            hoverBackground = this.buttonSecondaryHoverBackground ? this.buttonSecondaryHoverBackground.toString() : null;\n        }\n        else {\n            hoverBackground = this.buttonHoverBackground ? this.buttonHoverBackground.toString() : null;\n        }\n        if (hoverBackground) {\n            this._element.style.backgroundColor = hoverBackground;\n        }\n    }\n    style(styles) {\n        this.buttonForeground = styles.buttonForeground;\n        this.buttonBackground = styles.buttonBackground;\n        this.buttonHoverBackground = styles.buttonHoverBackground;\n        this.buttonSecondaryForeground = styles.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = styles.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = styles.buttonSecondaryHoverBackground;\n        this.buttonBorder = styles.buttonBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this._element) {\n            let background, foreground;\n            if (this.options.secondary) {\n                foreground = this.buttonSecondaryForeground ? this.buttonSecondaryForeground.toString() : '';\n                background = this.buttonSecondaryBackground ? this.buttonSecondaryBackground.toString() : '';\n            }\n            else {\n                foreground = this.buttonForeground ? this.buttonForeground.toString() : '';\n                background = this.buttonBackground ? this.buttonBackground.toString() : '';\n            }\n            const border = this.buttonBorder ? this.buttonBorder.toString() : '';\n            this._element.style.color = foreground;\n            this._element.style.backgroundColor = background;\n            this._element.style.borderWidth = border ? '1px' : '';\n            this._element.style.borderStyle = border ? 'solid' : '';\n            this._element.style.borderColor = border;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        this._element.classList.add('monaco-text-button');\n        if (this.options.supportIcons) {\n            reset(this._element, ...renderLabelWithIcons(value));\n        }\n        else {\n            this._element.textContent = value;\n        }\n        if (typeof this.options.title === 'string') {\n            this._element.title = this.options.title;\n        }\n        else if (this.options.title) {\n            this._element.title = value;\n        }\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../common/codicons.js';\nimport './codicon/codicon.css';\nimport './codicon/codicon-modifiers.css';\nexport function formatRule(c) {\n    let def = c.definition;\n    while (def instanceof Codicon) {\n        def = def.definition;\n    }\n    return `.codicon-${c.id}:before { content: '${def.fontCharacter}'; }`;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        var _a;\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            if (this.shadowRoot) {\n                this.shadowRoot.removeChild(this.view);\n                this.shadowRoot = null;\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n                this.shadowRootHostElement = null;\n            }\n            else {\n                this.container.removeChild(this.view);\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n            this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, (e) => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, (e) => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        var _a, _b;\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = '2575';\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        (_b = (_a = this.delegate).focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        if (this.delegate.layout) {\n            this.delegate.layout();\n        }\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        const anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (DOM.isHTMLElement(anchor)) {\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\n            around = {\n                top: elementPosition.top * zoom,\n                left: elementPosition.left * zoom,\n                width: elementPosition.width * zoom,\n                height: elementPosition.height * zoom\n            };\n        }\n        else {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n        let top;\n        let left;\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n            const verticalAnchor = { offset: around.top - window.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t@font-face {\n\t\tfont-family: \"codicon\";\n\t\tfont-display: block;\n\t\tsrc: url(\"./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6\") format(\"truetype\");\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { format } from '../../../common/strings.js';\nimport './countBadge.css';\nconst defaultOpts = {\n    badgeBackground: Color.fromHex('#4D4D4D'),\n    badgeForeground: Color.fromHex('#FFFFFF')\n};\nexport class CountBadge {\n    constructor(container, options) {\n        this.count = 0;\n        this.options = options || Object.create(null);\n        mixin(this.options, defaultOpts, false);\n        this.badgeBackground = this.options.badgeBackground;\n        this.badgeForeground = this.options.badgeForeground;\n        this.badgeBorder = this.options.badgeBorder;\n        this.element = append(container, $('.monaco-count-badge'));\n        this.countFormat = this.options.countFormat || '{0}';\n        this.titleFormat = this.options.titleFormat || '';\n        this.setCount(this.options.count || 0);\n    }\n    setCount(count) {\n        this.count = count;\n        this.render();\n    }\n    setTitleFormat(titleFormat) {\n        this.titleFormat = titleFormat;\n        this.render();\n    }\n    render() {\n        this.element.textContent = format(this.countFormat, this.count);\n        this.element.title = format(this.titleFormat, this.count);\n        this.applyStyles();\n    }\n    style(styles) {\n        this.badgeBackground = styles.badgeBackground;\n        this.badgeForeground = styles.badgeForeground;\n        this.badgeBorder = styles.badgeBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.element) {\n            const background = this.badgeBackground ? this.badgeBackground.toString() : '';\n            const foreground = this.badgeForeground ? this.badgeForeground.toString() : '';\n            const border = this.badgeBorder ? this.badgeBorder.toString() : '';\n            this.element.style.backgroundColor = background;\n            this.element.style.color = foreground;\n            this.element.style.borderWidth = border ? '1px' : '';\n            this.element.style.borderStyle = border ? 'solid' : '';\n            this.element.style.borderColor = border;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (e instanceof MouseEvent && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, options) {\n        super(container, options);\n        this._actions = [];\n        this._contextMenuProvider = options.contextMenuProvider;\n        this.actions = options.actions || [];\n        this.actionProvider = options.actionProvider;\n        this.menuClassName = options.menuClassName || '';\n        this.menuAsChild = !!options.menuAsChild;\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this.actionProvider) {\n            return this.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: action => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this.menuClassName,\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this.menuAsChild ? this.element : undefined\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            this.element.title = this._action.label || '';\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = Object.assign(Object.assign({}, this.dropdownMenu.menuOptions), { get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                } });\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (this.getAction().label) {\n            title = this.getAction().label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.getAction().enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from './findInputToggles.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nexport class FindInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        var _a;\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.imeSessionInProgress = false;\n        this.additionalToggles = [];\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this.onMouseDown = this._onMouseDown.event;\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onCaseSensitiveKeyDown = this._register(new Emitter());\n        this.onCaseSensitiveKeyDown = this._onCaseSensitiveKeyDown.event;\n        this._onRegexKeyDown = this._register(new Emitter());\n        this.onRegexKeyDown = this._onRegexKeyDown.event;\n        this._lastHighlightFindOptions = 0;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendCaseSensitiveLabel = options.appendCaseSensitiveLabel || '';\n        const appendWholeWordsLabel = options.appendWholeWordsLabel || '';\n        const appendRegexLabel = options.appendRegexLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            placeholder: this.placeholder || '',\n            ariaLabel: this.label || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.regex = this._register(new RegexToggle({\n            appendTitle: appendRegexLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.regex.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.regex.onKeyDown(e => {\n            this._onRegexKeyDown.fire(e);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle({\n            appendTitle: appendWholeWordsLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.wholeWords.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this.caseSensitive = this._register(new CaseSensitiveToggle({\n            appendTitle: appendCaseSensitiveLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground\n        }));\n        this._register(this.caseSensitive.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.caseSensitive.onKeyDown(e => {\n            this._onCaseSensitiveKeyDown.fire(e);\n        }));\n        // Arrow-Key support to navigate between options\n        const indexes = [this.caseSensitive.domNode, this.wholeWords.domNode, this.regex.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        this.controls = document.createElement('div');\n        this.controls.className = 'controls';\n        this.controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        this.controls.appendChild(this.caseSensitive.domNode);\n        this.controls.appendChild(this.wholeWords.domNode);\n        this.controls.appendChild(this.regex.domNode);\n        if (!this._showOptionButtons) {\n            this.caseSensitive.domNode.style.display = 'none';\n            this.wholeWords.domNode.style.display = 'none';\n            this.regex.domNode.style.display = 'none';\n        }\n        for (const toggle of (_a = options === null || options === void 0 ? void 0 : options.additionalToggles) !== null && _a !== void 0 ? _a : []) {\n            this._register(toggle);\n            this.controls.appendChild(toggle.domNode);\n            this._register(toggle.onChange(viaKeyboard => {\n                this._onDidOptionChange.fire(viaKeyboard);\n                if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                    this.inputBox.focus();\n                }\n            }));\n            this.additionalToggles.push(toggle);\n        }\n        if (this.additionalToggles.length > 0) {\n            this.controls.style.display = 'block';\n        }\n        this.inputBox.paddingRight =\n            (this._showOptionButtons ? this.caseSensitive.width() + this.wholeWords.width() + this.regex.width() : 0)\n                + this.additionalToggles.reduce((r, t) => r + t.width(), 0);\n        this.domNode.appendChild(this.controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionstart', (e) => {\n            this.imeSessionInProgress = true;\n        }));\n        this._register(dom.addDisposableListener(this.inputBox.inputElement, 'compositionend', (e) => {\n            this.imeSessionInProgress = false;\n            this._onInput.fire();\n        }));\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    get onDidChange() {\n        return this.inputBox.onDidChange;\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.regex.enable();\n        this.wholeWords.enable();\n        this.caseSensitive.enable();\n        for (const toggle of this.additionalToggles) {\n            toggle.enable();\n        }\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.regex.disable();\n        this.wholeWords.disable();\n        this.caseSensitive.disable();\n        for (const toggle of this.additionalToggles) {\n            toggle.disable();\n        }\n    }\n    setFocusInputOnOptionClick(value) {\n        this.fixFocusOnOptionClickEnabled = value;\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    getValue() {\n        return this.inputBox.value;\n    }\n    setValue(value) {\n        if (this.inputBox.value !== value) {\n            this.inputBox.value = value;\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const toggleStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.regex.style(toggleStyles);\n            this.wholeWords.style(toggleStyles);\n            this.caseSensitive.style(toggleStyles);\n            for (const toggle of this.additionalToggles) {\n                toggle.style(toggleStyles);\n            }\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getCaseSensitive() {\n        return this.caseSensitive.checked;\n    }\n    setCaseSensitive(value) {\n        this.caseSensitive.checked = value;\n    }\n    getWholeWords() {\n        return this.wholeWords.checked;\n    }\n    setWholeWords(value) {\n        this.wholeWords.checked = value;\n    }\n    getRegex() {\n        return this.regex.checked;\n    }\n    setRegex(value) {\n        this.regex.checked = value;\n        this.validate();\n    }\n    focusOnCaseSensitive() {\n        this.caseSensitive.focus();\n    }\n    highlightFindOptions() {\n        this.domNode.classList.remove('highlight-' + (this._lastHighlightFindOptions));\n        this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\n        this.domNode.classList.add('highlight-' + (this._lastHighlightFindOptions));\n    }\n    validate() {\n        this.inputBox.validate();\n    }\n    showMessage(message) {\n        this.inputBox.showMessage(message);\n    }\n    clearMessage() {\n        this.inputBox.hideMessage();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Toggle } from '../toggle/toggle.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport * as nls from '../../../../nls.js';\nconst NLS_CASE_SENSITIVE_TOGGLE_LABEL = nls.localize('caseDescription', \"Match Case\");\nconst NLS_WHOLE_WORD_TOGGLE_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\nconst NLS_REGEX_TOGGLE_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\nexport class CaseSensitiveToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.caseSensitive,\n            title: NLS_CASE_SENSITIVE_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class WholeWordsToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.wholeWord,\n            title: NLS_WHOLE_WORD_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class RegexToggle extends Toggle {\n    constructor(opts) {\n        super({\n            icon: Codicon.regex,\n            title: NLS_REGEX_TOGGLE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nexport class PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground,\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const toggleStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.preserveCase.style(toggleStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        if (this.inputBox) {\n            this.inputBox.validate();\n        }\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.inputBox.width = newWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport * as objects from '../../../common/objects.js';\n/**\n * A widget which can render a label with substring highlights, often\n * originating from a filter function like the fuzzy matcher.\n */\nexport class HighlightedLabel {\n    /**\n     * Create a new {@link HighlightedLabel}.\n     *\n     * @param container The parent container to append to.\n     */\n    constructor(container, options) {\n        var _a;\n        this.text = '';\n        this.title = '';\n        this.highlights = [];\n        this.didEverRender = false;\n        this.supportIcons = (_a = options === null || options === void 0 ? void 0 : options.supportIcons) !== null && _a !== void 0 ? _a : false;\n        this.domNode = dom.append(container, dom.$('span.monaco-highlighted-label'));\n    }\n    /**\n     * The label's DOM node.\n     */\n    get element() {\n        return this.domNode;\n    }\n    /**\n     * Set the label and highlights.\n     *\n     * @param text The label to display.\n     * @param highlights The ranges to highlight.\n     * @param title An optional title for the hover tooltip.\n     * @param escapeNewLines Whether to escape new lines.\n     * @returns\n     */\n    set(text, highlights = [], title = '', escapeNewLines) {\n        if (!text) {\n            text = '';\n        }\n        if (escapeNewLines) {\n            // adjusts highlights inplace\n            text = HighlightedLabel.escapeNewLines(text, highlights);\n        }\n        if (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\n            return;\n        }\n        this.text = text;\n        this.title = title;\n        this.highlights = highlights;\n        this.render();\n    }\n    render() {\n        const children = [];\n        let pos = 0;\n        for (const highlight of this.highlights) {\n            if (highlight.end === highlight.start) {\n                continue;\n            }\n            if (pos < highlight.start) {\n                const substring = this.text.substring(pos, highlight.start);\n                children.push(dom.$('span', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]));\n                pos = highlight.end;\n            }\n            const substring = this.text.substring(highlight.start, highlight.end);\n            const element = dom.$('span.highlight', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]);\n            if (highlight.extraClasses) {\n                element.classList.add(...highlight.extraClasses);\n            }\n            children.push(element);\n            pos = highlight.end;\n        }\n        if (pos < this.text.length) {\n            const substring = this.text.substring(pos);\n            children.push(dom.$('span', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]));\n        }\n        dom.reset(this.domNode, ...children);\n        if (this.title) {\n            this.domNode.title = this.title;\n        }\n        else {\n            this.domNode.removeAttribute('title');\n        }\n        this.didEverRender = true;\n    }\n    static escapeNewLines(text, highlights) {\n        let total = 0;\n        let extra = 0;\n        return text.replace(/\\r\\n|\\r|\\n/g, (match, offset) => {\n            extra = match === '\\r\\n' ? -1 : 0;\n            offset += total;\n            for (const highlight of highlights) {\n                if (highlight.end <= offset) {\n                    continue;\n                }\n                if (highlight.start >= offset) {\n                    highlight.start += extra;\n                }\n                if (highlight.end >= offset) {\n                    highlight.end += extra;\n                }\n            }\n            total += extra;\n            return '\\u23CE';\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iconlabel.css';\nimport * as dom from '../../dom.js';\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\nimport { setupCustomHover, setupNativeHover } from './iconLabelHover.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport { Range } from '../../../common/range.js';\nclass FastLabelNode {\n    constructor(_element) {\n        this._element = _element;\n    }\n    get element() {\n        return this._element;\n    }\n    set textContent(content) {\n        if (this.disposed || content === this._textContent) {\n            return;\n        }\n        this._textContent = content;\n        this._element.textContent = content;\n    }\n    set className(className) {\n        if (this.disposed || className === this._className) {\n            return;\n        }\n        this._className = className;\n        this._element.className = className;\n    }\n    set empty(empty) {\n        if (this.disposed || empty === this._empty) {\n            return;\n        }\n        this._empty = empty;\n        this._element.style.marginLeft = empty ? '0' : '';\n    }\n    dispose() {\n        this.disposed = true;\n    }\n}\nexport class IconLabel extends Disposable {\n    constructor(container, options) {\n        super();\n        this.customHovers = new Map();\n        this.domNode = this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\n        this.labelContainer = dom.append(this.domNode.element, dom.$('.monaco-icon-label-container'));\n        const nameContainer = dom.append(this.labelContainer, dom.$('span.monaco-icon-name-container'));\n        this.descriptionContainer = this._register(new FastLabelNode(dom.append(this.labelContainer, dom.$('span.monaco-icon-description-container'))));\n        if ((options === null || options === void 0 ? void 0 : options.supportHighlights) || (options === null || options === void 0 ? void 0 : options.supportIcons)) {\n            this.nameNode = new LabelWithHighlights(nameContainer, !!options.supportIcons);\n        }\n        else {\n            this.nameNode = new Label(nameContainer);\n        }\n        if (options === null || options === void 0 ? void 0 : options.supportDescriptionHighlights) {\n            this.descriptionNodeFactory = () => new HighlightedLabel(dom.append(this.descriptionContainer.element, dom.$('span.label-description')), { supportIcons: !!options.supportIcons });\n        }\n        else {\n            this.descriptionNodeFactory = () => this._register(new FastLabelNode(dom.append(this.descriptionContainer.element, dom.$('span.label-description'))));\n        }\n        this.hoverDelegate = options === null || options === void 0 ? void 0 : options.hoverDelegate;\n    }\n    get element() {\n        return this.domNode.element;\n    }\n    setLabel(label, description, options) {\n        const classes = ['monaco-icon-label'];\n        if (options) {\n            if (options.extraClasses) {\n                classes.push(...options.extraClasses);\n            }\n            if (options.italic) {\n                classes.push('italic');\n            }\n            if (options.strikethrough) {\n                classes.push('strikethrough');\n            }\n        }\n        this.domNode.className = classes.join(' ');\n        this.setupHover((options === null || options === void 0 ? void 0 : options.descriptionTitle) ? this.labelContainer : this.element, options === null || options === void 0 ? void 0 : options.title);\n        this.nameNode.setLabel(label, options);\n        if (description || this.descriptionNode) {\n            if (!this.descriptionNode) {\n                this.descriptionNode = this.descriptionNodeFactory(); // description node is created lazily on demand\n            }\n            if (this.descriptionNode instanceof HighlightedLabel) {\n                this.descriptionNode.set(description || '', options ? options.descriptionMatches : undefined);\n                this.setupHover(this.descriptionNode.element, options === null || options === void 0 ? void 0 : options.descriptionTitle);\n            }\n            else {\n                this.descriptionNode.textContent = description || '';\n                this.setupHover(this.descriptionNode.element, (options === null || options === void 0 ? void 0 : options.descriptionTitle) || '');\n                this.descriptionNode.empty = !description;\n            }\n        }\n    }\n    setupHover(htmlElement, tooltip) {\n        const previousCustomHover = this.customHovers.get(htmlElement);\n        if (previousCustomHover) {\n            previousCustomHover.dispose();\n            this.customHovers.delete(htmlElement);\n        }\n        if (!tooltip) {\n            htmlElement.removeAttribute('title');\n            return;\n        }\n        if (!this.hoverDelegate) {\n            setupNativeHover(htmlElement, tooltip);\n        }\n        else {\n            const hoverDisposable = setupCustomHover(this.hoverDelegate, htmlElement, tooltip);\n            if (hoverDisposable) {\n                this.customHovers.set(htmlElement, hoverDisposable);\n            }\n        }\n    }\n    dispose() {\n        super.dispose();\n        for (const disposable of this.customHovers.values()) {\n            disposable.dispose();\n        }\n        this.customHovers.clear();\n    }\n}\nclass Label {\n    constructor(container) {\n        this.container = container;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId }));\n            }\n            this.singleLabel.textContent = label;\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\n                dom.append(this.container, dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' }, l));\n                if (i < label.length - 1) {\n                    dom.append(this.container, dom.$('span.label-separator', undefined, (options === null || options === void 0 ? void 0 : options.separator) || '/'));\n                }\n            }\n        }\n    }\n}\nfunction splitMatches(labels, separator, matches) {\n    if (!matches) {\n        return undefined;\n    }\n    let labelStart = 0;\n    return labels.map(label => {\n        const labelRange = { start: labelStart, end: labelStart + label.length };\n        const result = matches\n            .map(match => Range.intersect(labelRange, match))\n            .filter(range => !Range.isEmpty(range))\n            .map(({ start, end }) => ({ start: start - labelStart, end: end - labelStart }));\n        labelStart = labelRange.end + separator.length;\n        return result;\n    });\n}\nclass LabelWithHighlights {\n    constructor(container, supportIcons) {\n        this.container = container;\n        this.supportIcons = supportIcons;\n        this.label = undefined;\n        this.singleLabel = undefined;\n    }\n    setLabel(label, options) {\n        if (this.label === label && equals(this.options, options)) {\n            return;\n        }\n        this.label = label;\n        this.options = options;\n        if (typeof label === 'string') {\n            if (!this.singleLabel) {\n                this.container.innerText = '';\n                this.container.classList.remove('multiple');\n                this.singleLabel = new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', { id: options === null || options === void 0 ? void 0 : options.domId })), { supportIcons: this.supportIcons });\n            }\n            this.singleLabel.set(label, options === null || options === void 0 ? void 0 : options.matches, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n        }\n        else {\n            this.container.innerText = '';\n            this.container.classList.add('multiple');\n            this.singleLabel = undefined;\n            const separator = (options === null || options === void 0 ? void 0 : options.separator) || '/';\n            const matches = splitMatches(label, separator, options === null || options === void 0 ? void 0 : options.matches);\n            for (let i = 0; i < label.length; i++) {\n                const l = label[i];\n                const m = matches ? matches[i] : undefined;\n                const id = (options === null || options === void 0 ? void 0 : options.domId) && `${options === null || options === void 0 ? void 0 : options.domId}_${i}`;\n                const name = dom.$('a.label-name', { id, 'data-icon-label-count': label.length, 'data-icon-label-index': i, 'role': 'treeitem' });\n                const highlightedLabel = new HighlightedLabel(dom.append(this.container, name), { supportIcons: this.supportIcons });\n                highlightedLabel.set(l, m, undefined, options === null || options === void 0 ? void 0 : options.labelEscapeNewLines);\n                if (i < label.length - 1) {\n                    dom.append(name, dom.$('span.label-separator', undefined, separator));\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../dom.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { isMarkdownString } from '../../../common/htmlContent.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isFunction, isString } from '../../../common/types.js';\nimport { localize } from '../../../../nls.js';\nexport function setupNativeHover(htmlElement, tooltip) {\n    if (isString(tooltip)) {\n        // Icons don't render in the native hover so we strip them out\n        htmlElement.title = stripIcons(tooltip);\n    }\n    else if (tooltip === null || tooltip === void 0 ? void 0 : tooltip.markdownNotSupportedFallback) {\n        htmlElement.title = tooltip.markdownNotSupportedFallback;\n    }\n    else {\n        htmlElement.removeAttribute('title');\n    }\n}\nclass UpdatableHoverWidget {\n    constructor(hoverDelegate, target, fadeInAnimation) {\n        this.hoverDelegate = hoverDelegate;\n        this.target = target;\n        this.fadeInAnimation = fadeInAnimation;\n    }\n    update(content, focus, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._cancellationTokenSource) {\n                // there's an computation ongoing, cancel it\n                this._cancellationTokenSource.dispose(true);\n                this._cancellationTokenSource = undefined;\n            }\n            if (this.isDisposed) {\n                return;\n            }\n            let resolvedContent;\n            if (content === undefined || isString(content) || content instanceof HTMLElement) {\n                resolvedContent = content;\n            }\n            else if (!isFunction(content.markdown)) {\n                resolvedContent = (_a = content.markdown) !== null && _a !== void 0 ? _a : content.markdownNotSupportedFallback;\n            }\n            else {\n                // compute the content, potentially long-running\n                // show 'Loading' if no hover is up yet\n                if (!this._hoverWidget) {\n                    this.show(localize('iconLabel.loading', \"Loading...\"), focus);\n                }\n                // compute the content\n                this._cancellationTokenSource = new CancellationTokenSource();\n                const token = this._cancellationTokenSource.token;\n                resolvedContent = yield content.markdown(token);\n                if (resolvedContent === undefined) {\n                    resolvedContent = content.markdownNotSupportedFallback;\n                }\n                if (this.isDisposed || token.isCancellationRequested) {\n                    // either the widget has been closed in the meantime\n                    // or there has been a new call to `update`\n                    return;\n                }\n            }\n            this.show(resolvedContent, focus, options);\n        });\n    }\n    show(content, focus, options) {\n        const oldHoverWidget = this._hoverWidget;\n        if (this.hasContent(content)) {\n            const hoverOptions = Object.assign({ content, target: this.target, showPointer: this.hoverDelegate.placement === 'element', hoverPosition: 2 /* HoverPosition.BELOW */, skipFadeInAnimation: !this.fadeInAnimation || !!oldHoverWidget }, options);\n            this._hoverWidget = this.hoverDelegate.showHover(hoverOptions, focus);\n        }\n        oldHoverWidget === null || oldHoverWidget === void 0 ? void 0 : oldHoverWidget.dispose();\n    }\n    hasContent(content) {\n        if (!content) {\n            return false;\n        }\n        if (isMarkdownString(content)) {\n            return !!content.value;\n        }\n        return true;\n    }\n    get isDisposed() {\n        var _a;\n        return (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.isDisposed;\n    }\n    dispose() {\n        var _a, _b;\n        (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._cancellationTokenSource) === null || _b === void 0 ? void 0 : _b.dispose(true);\n        this._cancellationTokenSource = undefined;\n    }\n}\nexport function setupCustomHover(hoverDelegate, htmlElement, content, options) {\n    let hoverPreparation;\n    let hoverWidget;\n    const hideHover = (disposeWidget, disposePreparation) => {\n        var _a;\n        if (disposeWidget) {\n            hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.dispose();\n            hoverWidget = undefined;\n        }\n        if (disposePreparation) {\n            hoverPreparation === null || hoverPreparation === void 0 ? void 0 : hoverPreparation.dispose();\n            hoverPreparation = undefined;\n        }\n        (_a = hoverDelegate.onDidHideHover) === null || _a === void 0 ? void 0 : _a.call(hoverDelegate);\n    };\n    const triggerShowHover = (delay, focus, target) => {\n        return new TimeoutTimer(() => __awaiter(this, void 0, void 0, function* () {\n            if (!hoverWidget || hoverWidget.isDisposed) {\n                hoverWidget = new UpdatableHoverWidget(hoverDelegate, target || htmlElement, delay > 0);\n                yield hoverWidget.update(content, focus, options);\n            }\n        }), delay);\n    };\n    const onMouseOver = () => {\n        if (hoverPreparation) {\n            return;\n        }\n        const toDispose = new DisposableStore();\n        const onMouseLeave = (e) => hideHover(false, e.fromElement === htmlElement);\n        toDispose.add(dom.addDisposableListener(htmlElement, dom.EventType.MOUSE_LEAVE, onMouseLeave, true));\n        const onMouseDown = () => hideHover(true, true);\n        toDispose.add(dom.addDisposableListener(htmlElement, dom.EventType.MOUSE_DOWN, onMouseDown, true));\n        const target = {\n            targetElements: [htmlElement],\n            dispose: () => { }\n        };\n        if (hoverDelegate.placement === undefined || hoverDelegate.placement === 'mouse') {\n            // track the mouse position\n            const onMouseMove = (e) => {\n                target.x = e.x + 10;\n                if ((e.target instanceof HTMLElement) && e.target.classList.contains('action-label')) {\n                    hideHover(true, true);\n                }\n            };\n            toDispose.add(dom.addDisposableListener(htmlElement, dom.EventType.MOUSE_MOVE, onMouseMove, true));\n        }\n        toDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n        hoverPreparation = toDispose;\n    };\n    const mouseOverDomEmitter = dom.addDisposableListener(htmlElement, dom.EventType.MOUSE_OVER, onMouseOver, true);\n    const hover = {\n        show: focus => {\n            hideHover(false, true); // terminate a ongoing mouse over preparation\n            triggerShowHover(0, focus); // show hover immediately\n        },\n        hide: () => {\n            hideHover(true, true);\n        },\n        update: (newContent, hoverOptions) => __awaiter(this, void 0, void 0, function* () {\n            content = newContent;\n            yield (hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.update(content, undefined, hoverOptions));\n        }),\n        dispose: () => {\n            mouseOverDomEmitter.dispose();\n            hideHover(true, true);\n        }\n    };\n    return hover;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { CSSIcon } from '../../../common/codicons.js';\nconst labelWithIconsRegex = new RegExp(`(\\\\\\\\)?\\\\$\\\\((${CSSIcon.iconNameExpression}(?:${CSSIcon.iconModifierExpression})?)\\\\)`, 'g');\nexport function renderLabelWithIcons(text) {\n    const elements = new Array();\n    let match;\n    let textStart = 0, textStop = 0;\n    while ((match = labelWithIconsRegex.exec(text)) !== null) {\n        textStop = match.index || 0;\n        elements.push(text.substring(textStart, textStop));\n        textStart = (match.index || 0) + match[0].length;\n        const [, escaped, codicon] = match;\n        elements.push(escaped ? `$(${codicon})` : renderIcon({ id: codicon }));\n    }\n    if (textStart < text.length) {\n        elements.push(text.substring(textStart));\n    }\n    return elements;\n}\nexport function renderIcon(icon) {\n    const node = dom.$(`span`);\n    node.classList.add(...CSSIcon.asClassNameArray(icon));\n    return node;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport * as aria from '../aria/aria.js';\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Widget } from '../widget.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { HistoryNavigator } from '../../../common/history.js';\nimport { mixin } from '../../../common/objects.js';\nimport './inputBox.css';\nimport * as nls from '../../../../nls.js';\nconst $ = dom.$;\nconst defaultOpts = {\n    inputBackground: Color.fromHex('#3C3C3C'),\n    inputForeground: Color.fromHex('#CCCCCC'),\n    inputValidationInfoBorder: Color.fromHex('#55AAFF'),\n    inputValidationInfoBackground: Color.fromHex('#063B49'),\n    inputValidationWarningBorder: Color.fromHex('#B89500'),\n    inputValidationWarningBackground: Color.fromHex('#352A05'),\n    inputValidationErrorBorder: Color.fromHex('#BE1100'),\n    inputValidationErrorBackground: Color.fromHex('#5A1D1D')\n};\nexport class InputBox extends Widget {\n    constructor(container, contextViewProvider, options) {\n        var _a;\n        super();\n        this.state = 'idle';\n        this.maxHeight = Number.POSITIVE_INFINITY;\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidHeightChange = this._register(new Emitter());\n        this.onDidHeightChange = this._onDidHeightChange.event;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options || Object.create(null);\n        mixin(this.options, defaultOpts, false);\n        this.message = null;\n        this.placeholder = this.options.placeholder || '';\n        this.tooltip = (_a = this.options.tooltip) !== null && _a !== void 0 ? _a : (this.placeholder || '');\n        this.ariaLabel = this.options.ariaLabel || '';\n        this.inputBackground = this.options.inputBackground;\n        this.inputForeground = this.options.inputForeground;\n        this.inputBorder = this.options.inputBorder;\n        this.inputValidationInfoBorder = this.options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = this.options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = this.options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = this.options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = this.options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = this.options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = this.options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = this.options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = this.options.inputValidationErrorForeground;\n        if (this.options.validationOptions) {\n            this.validation = this.options.validationOptions.validation;\n        }\n        this.element = dom.append(container, $('.monaco-inputbox.idle'));\n        const tagName = this.options.flexibleHeight ? 'textarea' : 'input';\n        const wrapper = dom.append(this.element, $('.ibwrapper'));\n        this.input = dom.append(wrapper, $(tagName + '.input.empty'));\n        this.input.setAttribute('autocorrect', 'off');\n        this.input.setAttribute('autocapitalize', 'off');\n        this.input.setAttribute('spellcheck', 'false');\n        this.onfocus(this.input, () => this.element.classList.add('synthetic-focus'));\n        this.onblur(this.input, () => this.element.classList.remove('synthetic-focus'));\n        if (this.options.flexibleHeight) {\n            this.maxHeight = typeof this.options.flexibleMaxHeight === 'number' ? this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\n            this.mirror = dom.append(wrapper, $('div.mirror'));\n            this.mirror.innerText = '\\u00a0';\n            this.scrollableElement = new ScrollableElement(this.element, { vertical: 1 /* ScrollbarVisibility.Auto */ });\n            if (this.options.flexibleWidth) {\n                this.input.setAttribute('wrap', 'off');\n                this.mirror.style.whiteSpace = 'pre';\n                this.mirror.style.wordWrap = 'initial';\n            }\n            dom.append(container, this.scrollableElement.getDomNode());\n            this._register(this.scrollableElement);\n            // from ScrollableElement to DOM\n            this._register(this.scrollableElement.onScroll(e => this.input.scrollTop = e.scrollTop));\n            const onSelectionChange = this._register(new DomEmitter(document, 'selectionchange'));\n            const onAnchoredSelectionChange = Event.filter(onSelectionChange.event, () => {\n                const selection = document.getSelection();\n                return (selection === null || selection === void 0 ? void 0 : selection.anchorNode) === wrapper;\n            });\n            // from DOM to ScrollableElement\n            this._register(onAnchoredSelectionChange(this.updateScrollDimensions, this));\n            this._register(this.onDidHeightChange(this.updateScrollDimensions, this));\n        }\n        else {\n            this.input.type = this.options.type || 'text';\n            this.input.setAttribute('wrap', 'off');\n        }\n        if (this.ariaLabel) {\n            this.input.setAttribute('aria-label', this.ariaLabel);\n        }\n        if (this.placeholder && !this.options.showPlaceholderOnFocus) {\n            this.setPlaceHolder(this.placeholder);\n        }\n        if (this.tooltip) {\n            this.setTooltip(this.tooltip);\n        }\n        this.oninput(this.input, () => this.onValueChange());\n        this.onblur(this.input, () => this.onBlur());\n        this.onfocus(this.input, () => this.onFocus());\n        this.ignoreGesture(this.input);\n        setTimeout(() => this.updateMirror(), 0);\n        // Support actions\n        if (this.options.actions) {\n            this.actionbar = this._register(new ActionBar(this.element));\n            this.actionbar.push(this.options.actions, { icon: true, label: false });\n        }\n        this.applyStyles();\n    }\n    onBlur() {\n        this._hideMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', '');\n        }\n    }\n    onFocus() {\n        this._showMessage();\n        if (this.options.showPlaceholderOnFocus) {\n            this.input.setAttribute('placeholder', this.placeholder || '');\n        }\n    }\n    setPlaceHolder(placeHolder) {\n        this.placeholder = placeHolder;\n        this.input.setAttribute('placeholder', placeHolder);\n    }\n    setTooltip(tooltip) {\n        this.tooltip = tooltip;\n        this.input.title = tooltip;\n    }\n    setAriaLabel(label) {\n        this.ariaLabel = label;\n        if (label) {\n            this.input.setAttribute('aria-label', this.ariaLabel);\n        }\n        else {\n            this.input.removeAttribute('aria-label');\n        }\n    }\n    getAriaLabel() {\n        return this.ariaLabel;\n    }\n    get inputElement() {\n        return this.input;\n    }\n    get value() {\n        return this.input.value;\n    }\n    set value(newValue) {\n        if (this.input.value !== newValue) {\n            this.input.value = newValue;\n            this.onValueChange();\n        }\n    }\n    get height() {\n        return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\n    }\n    focus() {\n        this.input.focus();\n    }\n    blur() {\n        this.input.blur();\n    }\n    hasFocus() {\n        return document.activeElement === this.input;\n    }\n    select(range = null) {\n        this.input.select();\n        if (range) {\n            this.input.setSelectionRange(range.start, range.end);\n            if (range.end === this.input.value.length) {\n                this.input.scrollLeft = this.input.scrollWidth;\n            }\n        }\n    }\n    isSelectionAtEnd() {\n        return this.input.selectionEnd === this.input.value.length && this.input.selectionStart === this.input.selectionEnd;\n    }\n    enable() {\n        this.input.removeAttribute('disabled');\n    }\n    disable() {\n        this.blur();\n        this.input.disabled = true;\n        this._hideMessage();\n    }\n    get width() {\n        return dom.getTotalWidth(this.input);\n    }\n    set width(width) {\n        if (this.options.flexibleHeight && this.options.flexibleWidth) {\n            // textarea with horizontal scrolling\n            let horizontalPadding = 0;\n            if (this.mirror) {\n                const paddingLeft = parseFloat(this.mirror.style.paddingLeft || '') || 0;\n                const paddingRight = parseFloat(this.mirror.style.paddingRight || '') || 0;\n                horizontalPadding = paddingLeft + paddingRight;\n            }\n            this.input.style.width = (width - horizontalPadding) + 'px';\n        }\n        else {\n            this.input.style.width = width + 'px';\n        }\n        if (this.mirror) {\n            this.mirror.style.width = width + 'px';\n        }\n    }\n    set paddingRight(paddingRight) {\n        // Set width to avoid hint text overlapping buttons\n        this.input.style.width = `calc(100% - ${paddingRight}px)`;\n        if (this.mirror) {\n            this.mirror.style.paddingRight = paddingRight + 'px';\n        }\n    }\n    updateScrollDimensions() {\n        if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\n            return;\n        }\n        const scrollHeight = this.cachedContentHeight;\n        const height = this.cachedHeight;\n        const scrollTop = this.input.scrollTop;\n        this.scrollableElement.setScrollDimensions({ scrollHeight, height });\n        this.scrollableElement.setScrollPosition({ scrollTop });\n    }\n    showMessage(message, force) {\n        this.message = message;\n        this.element.classList.remove('idle');\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add(this.classForType(message.type));\n        const styles = this.stylesForType(this.message.type);\n        this.element.style.border = styles.border ? `1px solid ${styles.border}` : '';\n        if (this.hasFocus() || force) {\n            this._showMessage();\n        }\n    }\n    hideMessage() {\n        this.message = null;\n        this.element.classList.remove('info');\n        this.element.classList.remove('warning');\n        this.element.classList.remove('error');\n        this.element.classList.add('idle');\n        this._hideMessage();\n        this.applyStyles();\n    }\n    validate() {\n        let errorMsg = null;\n        if (this.validation) {\n            errorMsg = this.validation(this.value);\n            if (errorMsg) {\n                this.inputElement.setAttribute('aria-invalid', 'true');\n                this.showMessage(errorMsg);\n            }\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\n                this.inputElement.removeAttribute('aria-invalid');\n                this.hideMessage();\n            }\n        }\n        return errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.type;\n    }\n    stylesForType(type) {\n        switch (type) {\n            case 1 /* MessageType.INFO */: return { border: this.inputValidationInfoBorder, background: this.inputValidationInfoBackground, foreground: this.inputValidationInfoForeground };\n            case 2 /* MessageType.WARNING */: return { border: this.inputValidationWarningBorder, background: this.inputValidationWarningBackground, foreground: this.inputValidationWarningForeground };\n            default: return { border: this.inputValidationErrorBorder, background: this.inputValidationErrorBackground, foreground: this.inputValidationErrorForeground };\n        }\n    }\n    classForType(type) {\n        switch (type) {\n            case 1 /* MessageType.INFO */: return 'info';\n            case 2 /* MessageType.WARNING */: return 'warning';\n            default: return 'error';\n        }\n    }\n    _showMessage() {\n        if (!this.contextViewProvider || !this.message) {\n            return;\n        }\n        let div;\n        const layout = () => div.style.width = dom.getTotalWidth(this.element) + 'px';\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.element,\n            anchorAlignment: 1 /* AnchorAlignment.RIGHT */,\n            render: (container) => {\n                if (!this.message) {\n                    return null;\n                }\n                div = dom.append(container, $('.monaco-inputbox-container'));\n                layout();\n                const renderOptions = {\n                    inline: true,\n                    className: 'monaco-inputbox-message'\n                };\n                const spanElement = (this.message.formatContent\n                    ? renderFormattedText(this.message.content, renderOptions)\n                    : renderText(this.message.content, renderOptions));\n                spanElement.classList.add(this.classForType(this.message.type));\n                const styles = this.stylesForType(this.message.type);\n                spanElement.style.backgroundColor = styles.background ? styles.background.toString() : '';\n                spanElement.style.color = styles.foreground ? styles.foreground.toString() : '';\n                spanElement.style.border = styles.border ? `1px solid ${styles.border}` : '';\n                dom.append(div, spanElement);\n                return null;\n            },\n            onHide: () => {\n                this.state = 'closed';\n            },\n            layout: layout\n        });\n        // ARIA Support\n        let alertText;\n        if (this.message.type === 3 /* MessageType.ERROR */) {\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", this.message.content);\n        }\n        else if (this.message.type === 2 /* MessageType.WARNING */) {\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", this.message.content);\n        }\n        else {\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", this.message.content);\n        }\n        aria.alert(alertText);\n        this.state = 'open';\n    }\n    _hideMessage() {\n        if (!this.contextViewProvider) {\n            return;\n        }\n        if (this.state === 'open') {\n            this.contextViewProvider.hideContextView();\n        }\n        this.state = 'idle';\n    }\n    onValueChange() {\n        this._onDidChange.fire(this.value);\n        this.validate();\n        this.updateMirror();\n        this.input.classList.toggle('empty', !this.value);\n        if (this.state === 'open' && this.contextViewProvider) {\n            this.contextViewProvider.layout();\n        }\n    }\n    updateMirror() {\n        if (!this.mirror) {\n            return;\n        }\n        const value = this.value;\n        const lastCharCode = value.charCodeAt(value.length - 1);\n        const suffix = lastCharCode === 10 ? ' ' : '';\n        const mirrorTextContent = (value + suffix)\n            .replace(/\\u000c/g, ''); // Don't measure with the form feed character, which messes up sizing\n        if (mirrorTextContent) {\n            this.mirror.textContent = value + suffix;\n        }\n        else {\n            this.mirror.innerText = '\\u00a0';\n        }\n        this.layout();\n    }\n    style(styles) {\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        const background = this.inputBackground ? this.inputBackground.toString() : '';\n        const foreground = this.inputForeground ? this.inputForeground.toString() : '';\n        const border = this.inputBorder ? this.inputBorder.toString() : '';\n        this.element.style.backgroundColor = background;\n        this.element.style.color = foreground;\n        this.input.style.backgroundColor = 'inherit';\n        this.input.style.color = foreground;\n        this.element.style.borderWidth = border ? '1px' : '';\n        this.element.style.borderStyle = border ? 'solid' : '';\n        this.element.style.borderColor = border;\n    }\n    layout() {\n        if (!this.mirror) {\n            return;\n        }\n        const previousHeight = this.cachedContentHeight;\n        this.cachedContentHeight = dom.getTotalHeight(this.mirror);\n        if (previousHeight !== this.cachedContentHeight) {\n            this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\n            this.input.style.height = this.cachedHeight + 'px';\n            this._onDidHeightChange.fire(this.cachedContentHeight);\n        }\n    }\n    insertAtCursor(text) {\n        const inputElement = this.inputElement;\n        const start = inputElement.selectionStart;\n        const end = inputElement.selectionEnd;\n        const content = inputElement.value;\n        if (start !== null && end !== null) {\n            this.value = content.substr(0, start) + text + content.substr(end);\n            inputElement.setSelectionRange(start + 1, start + 1);\n            this.layout();\n        }\n    }\n    dispose() {\n        this._hideMessage();\n        this.message = null;\n        if (this.actionbar) {\n            this.actionbar.dispose();\n        }\n        super.dispose();\n    }\n}\nexport class HistoryInputBox extends InputBox {\n    constructor(container, contextViewProvider, options) {\n        const NLS_PLACEHOLDER_HISTORY_HINT = nls.localize({ key: 'history.inputbox.hint', comment: ['Text will be prefixed with \\u21C5 plus a single space, then used as a hint where input field keeps history'] }, \"for history\");\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX = ` or \\u21C5 ${NLS_PLACEHOLDER_HISTORY_HINT}`;\n        const NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS = ` (\\u21C5 ${NLS_PLACEHOLDER_HISTORY_HINT})`;\n        super(container, contextViewProvider, options);\n        this._onDidFocus = this._register(new Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this.history = new HistoryNavigator(options.history, 100);\n        // Function to append the history suffix to the placeholder if necessary\n        const addSuffix = () => {\n            if (options.showHistoryHint && options.showHistoryHint() && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX) && !this.placeholder.endsWith(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS) && this.history.getHistory().length) {\n                const suffix = this.placeholder.endsWith(')') ? NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX : NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS;\n                const suffixedPlaceholder = this.placeholder + suffix;\n                if (options.showPlaceholderOnFocus && document.activeElement !== this.input) {\n                    this.placeholder = suffixedPlaceholder;\n                }\n                else {\n                    this.setPlaceHolder(suffixedPlaceholder);\n                }\n            }\n        };\n        // Spot the change to the textarea class attribute which occurs when it changes between non-empty and empty,\n        // and add the history suffix to the placeholder if not yet present\n        this.observer = new MutationObserver((mutationList, observer) => {\n            mutationList.forEach((mutation) => {\n                if (!mutation.target.textContent) {\n                    addSuffix();\n                }\n            });\n        });\n        this.observer.observe(this.input, { attributeFilter: ['class'] });\n        this.onfocus(this.input, () => addSuffix());\n        this.onblur(this.input, () => {\n            const resetPlaceholder = (historyHint) => {\n                if (!this.placeholder.endsWith(historyHint)) {\n                    return false;\n                }\n                else {\n                    const revertedPlaceholder = this.placeholder.slice(0, this.placeholder.length - historyHint.length);\n                    if (options.showPlaceholderOnFocus) {\n                        this.placeholder = revertedPlaceholder;\n                    }\n                    else {\n                        this.setPlaceHolder(revertedPlaceholder);\n                    }\n                    return true;\n                }\n            };\n            if (!resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS)) {\n                resetPlaceholder(NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX);\n            }\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = undefined;\n        }\n    }\n    addToHistory() {\n        if (this.value && this.value !== this.getCurrentValue()) {\n            this.history.add(this.value);\n        }\n    }\n    showNextValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let next = this.getNextValue();\n        if (next) {\n            next = next === this.value ? this.getNextValue() : next;\n        }\n        if (next) {\n            this.value = next;\n            aria.status(this.value);\n        }\n    }\n    showPreviousValue() {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        let previous = this.getPreviousValue();\n        if (previous) {\n            previous = previous === this.value ? this.getPreviousValue() : previous;\n        }\n        if (previous) {\n            this.value = previous;\n            aria.status(this.value);\n        }\n    }\n    onBlur() {\n        super.onBlur();\n        this._onDidBlur.fire();\n    }\n    onFocus() {\n        super.onFocus();\n        this._onDidFocus.fire();\n    }\n    getCurrentValue() {\n        let currentValue = this.history.current();\n        if (!currentValue) {\n            currentValue = this.history.last();\n            this.history.next();\n        }\n        return currentValue;\n    }\n    getPreviousValue() {\n        return this.history.previous() || this.history.first();\n    }\n    getNextValue() {\n        return this.history.next() || this.history.last();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport class KeybindingLabel {\n    constructor(container, os, options) {\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        this.labelBackground = this.options.keybindingLabelBackground;\n        this.labelForeground = this.options.keybindingLabelForeground;\n        this.labelBorder = this.options.keybindingLabelBorder;\n        this.labelBottomBorder = this.options.keybindingLabelBottomBorder;\n        this.labelShadow = this.options.keybindingLabelShadow;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        this.clear();\n        if (this.keybinding) {\n            const [firstPart, chordPart] = this.keybinding.getParts();\n            if (firstPart) {\n                this.renderPart(this.domNode, firstPart, this.matches ? this.matches.firstPart : null);\n            }\n            if (chordPart) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderPart(this.domNode, chordPart, this.matches ? this.matches.chordPart : null);\n            }\n            this.domNode.title = this.keybinding.getAriaLabel() || '';\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.applyStyles();\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderPart(parent, part, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (part.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\n        }\n        if (part.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\n        }\n        if (part.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\n        }\n        if (part.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = part.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        return keyElement;\n    }\n    style(styles) {\n        this.labelBackground = styles.keybindingLabelBackground;\n        this.labelForeground = styles.keybindingLabelForeground;\n        this.labelBorder = styles.keybindingLabelBorder;\n        this.labelBottomBorder = styles.keybindingLabelBottomBorder;\n        this.labelShadow = styles.keybindingLabelShadow;\n        this.applyStyles();\n    }\n    applyStyles() {\n        var _a;\n        if (this.element) {\n            for (const keyElement of this.keyElements) {\n                if (this.labelBackground) {\n                    keyElement.style.backgroundColor = (_a = this.labelBackground) === null || _a === void 0 ? void 0 : _a.toString();\n                }\n                if (this.labelBorder) {\n                    keyElement.style.borderColor = this.labelBorder.toString();\n                }\n                if (this.labelBottomBorder) {\n                    keyElement.style.borderBottomColor = this.labelBottomBorder.toString();\n                }\n                if (this.labelShadow) {\n                    keyElement.style.boxShadow = `inset 0 -1px 0 ${this.labelShadow}`;\n                }\n            }\n            if (this.labelForeground) {\n                this.element.style.color = this.labelForeground.toString();\n            }\n        }\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    get templateId() { return this.renderer.templateId; }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        if (data.disposable) {\n            data.disposable.dispose();\n        }\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return Object.assign(Object.assign({}, options), { accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider) });\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    constructor() {\n        this.groups = [];\n        this._size = 0;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        let index = 0;\n        let size = 0;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nfunction removeFromParent(element) {\n    var _a;\n    try {\n        (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n    }\n    catch (e) {\n        // this will throw if this happens due to a blur event, nasty business\n    }\n}\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        if (!result) {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return result;\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            domNode.classList.remove('scrolling');\n            removeFromParent(domNode);\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers, StaticDND } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = new RangeMap();\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_a = options.horizontalScrolling) !== null && _a !== void 0 ? _a : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_b = options.transformOptimization) !== null && _b !== void 0 ? _b : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_c = options.smoothScrolling) !== null && _c !== void 0 ? _c : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(cb)\n        });\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_d = options.alwaysConsumeMouseWheel) !== null && _d !== void 0 ? _d : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_e = options.verticalScrollMode) !== null && _e !== void 0 ? _e : DefaultOptions.verticalScrollMode,\n            useShadows: (_f = options.useShadows) !== null && _f !== void 0 ? _f : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_g = options.setRowLineHeight) !== null && _g !== void 0 ? _g : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_h = options.setRowHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_j = options.supportDynamicHeights) !== null && _j !== void 0 ? _j : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_k = options.dnd) !== null && _k !== void 0 ? _k : DefaultOptions.dnd;\n        this.layout();\n    }\n    get contentHeight() { return this.rangeMap.size; }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    updateOptions(options) {\n        if (options.additionalScrollHeight !== undefined) {\n            this.additionalScrollHeight = options.additionalScrollHeight;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            this.scrollableElement.updateOptions({ mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity });\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            this.scrollableElement.updateOptions({ fastScrollSensitivity: options.fastScrollSensitivity });\n        }\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.push(item.row);\n            }\n            item.row = null;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = new RangeMap();\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r));\n        const beforeElement = this.getNextToLastElement(insertRanges);\n        for (const range of insertRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, beforeElement, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(() => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        const beforeElement = this.getNextToLastElement(rangesToInsert);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        for (const range of rangesToInsert) {\n            for (let i = range.start; i < range.end; i++) {\n                this.insertItemInDOM(i, beforeElement);\n            }\n        }\n        for (const range of rangesToRemove) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, beforeElement, row) {\n        const item = this.items[index];\n        if (!item.row) {\n            item.row = row !== null && row !== void 0 ? row : this.cache.alloc(item.templateId);\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(update);\n        }\n        if (!item.row.domNode.parentElement) {\n            if (beforeElement) {\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n            }\n            else {\n                this.rowsContainer.appendChild(item.row.domNode);\n            }\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = isFirefox ? '-moz-fit-content' : 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = window.getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            document.body.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => document.body.removeChild(dragImage), 0);\n        }\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* ListDragOverEffect.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add('drop-target');\n            this.rowsContainer.classList.add('drop-target');\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove('drop-target');\n                this.rowsContainer.classList.remove('drop-target');\n            });\n        }\n        else {\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.add('drop-target');\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove('drop-target');\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n                for (const range of renderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        const afterIndex = i + 1;\n                        const beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n                        const beforeElement = beforeRow ? beforeRow.domNode : null;\n                        this.insertItemInDOM(i, beforeElement);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (!this.setRowHeight && item.row) {\n            const newSize = item.row.domNode.offsetHeight;\n            item.size = newSize;\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return newSize - size;\n        }\n        const row = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (renderer) {\n            renderer.renderElement(item.element, index, row.templateData, undefined);\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        }\n        item.size = row.domNode.offsetHeight;\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getNextToLastElement(ranges) {\n        const lastRange = ranges[ranges.length - 1];\n        if (!lastRange) {\n            return null;\n        }\n        const nextToLastItem = this.items[lastRange.end];\n        if (!nextToLastItem) {\n            return null;\n        }\n        if (!nextToLastItem.row) {\n            return null;\n        }\n        return nextToLastItem.row.domNode;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a;\n        if (this.items) {\n            for (const item of this.items) {\n                if (item.row) {\n                    const renderer = this.renderers.get(item.row.templateId);\n                    if (renderer) {\n                        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                        renderer.disposeTemplate(item.row.templateData);\n                    }\n                }\n            }\n            this.items = [];\n        }\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        dispose(this.disposables);\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createStyleSheet } from '../../dom.js';\nimport { DomEmitter, stopEvent } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { mixin } from '../../../common/objects.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    constructor(_trait) {\n        this._trait = _trait;\n        this.length = 0;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    splice(start, deleteCount, elements) {\n        var _a;\n        deleteCount = Math.max(0, Math.min(deleteCount, this.length - start));\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [\n            ...this.sortedIndexes.filter(i => i < start),\n            ...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1),\n            ...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)\n        ];\n        const length = this.length + diff;\n        if (this.sortedIndexes.length > 0 && sortedIndexes.length === 0 && length > 0) {\n            const first = (_a = this.sortedIndexes.find(index => index >= start)) !== null && _a !== void 0 ? _a : length - 1;\n            sortedIndexes.push(Math.min(first, length - 1));\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n        this.length = length;\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, elements.map(() => false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        const elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider.getId(e).toString()) > -1);\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nexport function isMonacoEditor(e) {\n    if (e.classList.contains('monaco-editor')) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isMonacoEditor(e.parentElement);\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.onKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(this.onEnter, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(this.onUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(this.onDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUpArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDownArrow, this, this.disposables);\n        this.onKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(this.onEscape, this, this.disposables);\n        if (options.multipleSelectionSupport !== false) {\n            this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n        }\n    }\n    get onKeyDown() {\n        return this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event)\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionDisposables.clear();\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.onKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KeyCode.KeyA */).on(this.onCtrlA, this, this.multipleSelectionDisposables);\n            }\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 93 /* KeyCode.Numpad0 */ && event.keyCode <= 102 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 80 /* KeyCode.Semicolon */ && event.keyCode <= 90 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = this.enabledDisposables.add(Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(stopEvent)\n            .map(event => event.browserEvent.key)\n            .event;\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (ariaLabel) {\n                alert(ariaLabel);\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event))\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e));\n        onKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey)\n            .on(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = window.getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return event instanceof MouseEvent && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (document.activeElement !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionRangeChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            if (styles.listBackground.isOpaque()) {\n                content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n            }\n            else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\n                console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`);\n            }\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { outline-color: ${styles.listFocusAndSelectionOutline} !important; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        if (styles.listSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listFocusOutline) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t}`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nconst defaultStyles = {\n    listFocusBackground: Color.fromHex('#7FB0D0'),\n    listActiveSelectionBackground: Color.fromHex('#0E639C'),\n    listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n    listActiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n    listFocusAndSelectionOutline: Color.fromHex('#90C2F9'),\n    listFocusAndSelectionBackground: Color.fromHex('#094771'),\n    listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n    listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n    listInactiveSelectionIconForeground: Color.fromHex('#FFFFFF'),\n    listHoverBackground: Color.fromHex('#2A2D2E'),\n    listDropBackground: Color.fromHex('#383B3D'),\n    treeIndentGuidesStroke: Color.fromHex('#a9a9a9'),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04)\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, container) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        if (ariaLabel) {\n            container.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            container.removeAttribute('aria-label');\n        }\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            container.removeAttribute('aria-level');\n        }\n    }\n    disposeTemplate(templateData) {\n        // noop\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        mixin(_options, defaultStyles, false);\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = Object.assign(Object.assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\n        this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(stopEvent)\n            .filter(() => false)\n            .event;\n        const fromKeyUp = this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event))\n            .forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(stopEvent)\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        })\n            .event;\n        const fromMouse = this.disposables.add(Event.chain(this.view.onContextMenu))\n            .filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: { x: browserEvent.pageX + 1, y: browserEvent.pageY }, browserEvent }))\n            .event;\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusNextPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n            lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n                const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n                if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                    this.setFocus([lastGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([lastPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = this.view.getScrollTop();\n                let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n                if (lastPageIndex > currentlyFocusedElementIndex) {\n                    // scroll last page element to the top only if the last page element is below the focused element\n                    nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n                }\n                this.view.setScrollTop(nextpageScrollTop);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusNextPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusPreviousPage(browserEvent, filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstPageIndex;\n            const scrollTop = this.view.getScrollTop();\n            if (scrollTop === 0) {\n                firstPageIndex = this.view.indexAt(scrollTop);\n            }\n            else {\n                firstPageIndex = this.view.indexAfter(scrollTop - 1);\n            }\n            const currentlyFocusedElementIndex = this.getFocus()[0];\n            if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n                const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n                if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                    this.setFocus([firstGoodPageIndex], browserEvent);\n                }\n                else {\n                    this.setFocus([firstPageIndex], browserEvent);\n                }\n            }\n            else {\n                const previousScrollTop = scrollTop;\n                this.view.setScrollTop(scrollTop - this.view.renderHeight);\n                if (this.view.getScrollTop() !== previousScrollTop) {\n                    this.setFocus([]);\n                    // Let the scroll event listener run\n                    yield timeout(0);\n                    yield this.focusPreviousPage(browserEvent, filter);\n                }\n            }\n        });\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { formatRule } from '../codicons/codiconStyles.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var Direction;\n(function (Direction) {\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\n})(Direction || (Direction = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options = {}) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.menuDisposables = this._register(new DisposableStore());\n        this.initializeOrUpdateStyleSheet(container, {});\n        this._register(Gesture.addTarget(menuElement));\n        addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        });\n        if (options.enableMnemonics) {\n            this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter(a => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    style(style) {\n        const container = this.getContainer();\n        this.initializeOrUpdateStyleSheet(container, style);\n        const fgColor = style.foregroundColor ? `${style.foregroundColor}` : '';\n        const bgColor = style.backgroundColor ? `${style.backgroundColor}` : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        container.style.outline = border;\n        container.style.borderRadius = borderRadius;\n        container.style.color = fgColor;\n        container.style.backgroundColor = bgColor;\n        container.style.boxShadow = shadow;\n        if (this.viewItems) {\n            this.viewItems.forEach(item => {\n                if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\n                    item.style(style);\n                }\n            });\n        }\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true });\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, Object.assign(Object.assign({}, options), { submenuIds: new Set([...(options.submenuIds || []), action.id]) }));\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options = {}) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.getAction().label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + Codicon.menuSelection.cssSelector));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        super.focus();\n        if (this.item) {\n            this.item.focus();\n        }\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.getAction().label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.getAction().class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.getAction().enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.getAction().checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        if (!this.menuStyle) {\n            return;\n        }\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor ? fgColor.toString() : '';\n            this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor ? fgColor.toString() : '';\n        }\n    }\n    style(style) {\n        this.menuStyle = style;\n        this.applyStyle();\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions) {\n        super(action, action, submenuOptions);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + Codicon.menuSubmenu.cssSelector));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection === Direction.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions);\n            if (this.menuStyle) {\n                this.parentData.submenu.style(this.menuStyle);\n            }\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        var _a;\n        super.applyStyle();\n        if (!this.menuStyle) {\n            return;\n        }\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor ? `${fgColor}` : '';\n        }\n        (_a = this.parentData.submenu) === null || _a === void 0 ? void 0 : _a.style(this.menuStyle);\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    style(style) {\n        if (this.label) {\n            this.label.style.borderBottomColor = style.separatorColor ? `${style.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .6em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n"],"names":["FastDomNode","domNode","this","_maxWidth","_width","_height","_top","_left","_bottom","_right","_fontFamily","_fontWeight","_fontSize","_fontStyle","_fontFeatureSettings","_textDecoration","_lineHeight","_letterSpacing","_className","_display","_position","_visibility","_color","_backgroundColor","_layerHint","_contain","_boxShadow","maxWidth","numberAsPixels","style","width","height","top","left","bottom","right","fontFamily","fontWeight","fontSize","fontStyle","fontFeatureSettings","textDecoration","lineHeight","letterSpacing","className","shouldHaveIt","classList","toggle","display","position","visibility","color","backgroundColor","layerHint","transform","boxShadow","contain","name","value","setAttribute","removeAttribute","child","appendChild","removeChild","createFastDomNode","renderText","text","options","element","createElement","textContent","renderFormattedText","formattedText","_renderFormattedText","parseFormattedText","renderCodeSegments","actionHandler","tagName","inline","document","StringStream","source","index","length","next","peek","advance","treeNode","type","createTextNode","content","a","disposables","add","DOM","event","callback","String","Array","isArray","children","forEach","nodeChild","parseCodeSegments","root","actionViewItemIndex","current","stack","stream","eos","isEscapedFormatType","formatTagType","pop","push","textCurrent","newCurrent","char","supportCodeSegments","GlobalPointerMoveMonitor","_hooks","DisposableStore","_pointerMoveCallback","_onStopCallback","stopMonitoring","dispose","invokeStopCallback","browserEvent","isMonitoring","clear","onStopCallback","initialElement","pointerId","initialButtons","pointerMoveCallback","eventSource","setPointerCapture","toDisposable","releasePointerCapture","err","window","dom","e","buttons","preventDefault","ctrlKeyMod","platform","metaKeyMod","StandardKeyboardEvent","_standardKeyboardEventBrand","target","ctrlKey","shiftKey","altKey","metaKey","keyCode","charCode","fromCharCode","toUpperCase","KeyCodeUtils","browser","EVENT_KEY_CODE_MAP","extractKeyCode","code","_asKeybinding","_computeKeybinding","_asRuntimeKeybinding","_computeRuntimeKeybinding","stopPropagation","other","key","result","SimpleKeybinding","renderMarkdown","markdown","_a","markedOptions","isDisposed","_uriMassage","part","data","parse","decodeURIComponent","cloneAndChange","uris","URI","encodeURIComponent","JSON","stringify","_href","href","isDomUri","uri","startsWith","Schemas","FileAccess","toString","query","with","renderer","marked","image","title","dimensions","attributes","parseHrefAndDimensions","escapeDoubleQuotes","concat","join","link","removeMarkdownEscapes","replace","paragraph","codeBlocks","codeBlockRenderer","lang","id","defaultGenerator","then","escape","onClick","DomEmitter","onAuxClick","Event","mouseEvent","StandardMouseEvent","leftButton","middleButton","parentElement","dataset","baseUri","resolveWithBaseUri","onUnexpectedError","supportHtml","sanitizer","html","isTrusted","match","undefined","sanitize","silent","substr","supportThemeIcons","markdownEscapeEscapedIcons","renderedMarkdown","elements","renderLabelWithIcons","map","outerHTML","htmlParser","DOMParser","markdownHtmlDoc","parseFromString","sanitizeRenderedMarkdown","body","querySelectorAll","img","src","getAttribute","test","replaceWith","childNodes","resolvedHref","innerHTML","Promise","all","tuples","_b","renderedElements","Map","placeholderElements","placeholderElement","renderedElement","get","asyncRenderCallback","call","getElementsByTagName","listener","path","endsWith","resolvePath","dirname","allowedSchemes","config","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_UNKNOWN_PROTOCOLS","getSanitizerOptions","dompurify","attrName","keepAttr","attrValue","hook","Object","assign","RETURN_TRUSTED_TYPE","sameOriginWindowChainCache","getParentWindowIfSameOrigin","w","parent","location","parentLocation","origin","IframeUtils","iframeElement","frameElement","slice","childWindow","ancestorWindow","windowChain","getSameOriginWindowChain","windowChainEl","scrollY","scrollX","boundingRect","getBoundingClientRect","timestamp","Date","now","button","rightButton","detail","pageX","posx","posy","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","iframeOffsets","getPositionOfChildWindowRelativeToAncestorWindow","self","view","StandardWheelEvent","deltaX","deltaY","targetNode","srcElement","e1","e2","wheelDeltaY","VERTICAL_AXIS","axis","ev","deltaMode","DOM_DELTA_LINE","isFirefox","wheelDeltaX","isSafari","HORIZONTAL_AXIS","wheelDelta","EventType","__decorate","decorators","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Tap","Change","Start","End","Contextmenu","Gesture","dispatched","activeTouches","handle","targets","ignoreTargets","_lastSetTapCountTime","_register","DomUtils","onTouchStart","passive","onTouchEnd","onTouchMove","len","targetTouches","touch","item","identifier","initialTarget","initialTimeStamp","initialPageX","initialPageY","rollingTimestamps","rollingPageX","rollingPageY","evt","newGestureEvent","dispatchEvent","activeTouchCount","keys","changedTouches","hasOwnProperty","console","warn","holdTime","HOLD_DELAY","Math","abs","arrays","finalX","finalY","deltaT","dispatchTo","filter","t","Node","contains","inertia","createEvent","initEvent","tapCount","currentTime","getTime","setTapCount","CLEAR_TAP_COUNT_TIME","t1","vX","dirX","x","vY","dirY","y","delta_pos_x","delta_pos_y","stopped","SCROLL_FRICTION","translationX","translationY","shift","isTouchDevice","INSTANCE","Disposable","navigator","maxTouchPoints","memoize","BaseActionViewItem","context","action","_context","_action","Action","onDidChange","handleActionChangeEvent","enabled","updateEnabled","checked","updateChecked","class","updateClass","label","updateLabel","updateTooltip","tooltip","_actionRunner","ActionRunner","actionRunner","newContext","container","enableDragging","draggable","addDisposableListener","dataTransfer","setData","DataTransfers","TouchEventType","EventHelper","isMenu","remove","preserveFocus","types","useEventAsContext","run","tabIndex","focus","blur","focusable","getAction","getTooltip","hoverDelegate","customHover","update","setupCustomHover","_store","ActionViewItem","icon","cssClass","append","$","Separator","keybinding","nls","comment","split","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","done","apply","ActionBar","_c","_d","_e","_f","previousKeys","nextKeys","triggerKeyDown","_onDidBlur","Emitter","onDidBlur","_onDidCancel","onFirstListenerAdd","cancelHasListener","onDidCancel","_onDidRun","onDidRun","_onBeforeRun","onBeforeRun","_orientation","orientation","_triggerKeys","keyDown","triggerKeys","fire","_actionIds","viewItems","viewItemDisposables","focusedItem","animated","eventHandled","equals","focusPrevious","focusNext","focusFirst","focusLast","trapsArrowNavigation","isTriggerKeyEvent","doTrigger","updateFocusedItem","focusTracker","previouslyFocusedItem","onDidFocus","actionsList","ariaRole","ariaLabel","firstEnabled","find","vi","isEnabled","setFocusable","ret","elem","setActionContext","arg","actions","actionViewItemElement","actionViewItemProvider","allowContextMenu","set","render","insertBefore","splice","refreshRole","selectFirst","findIndex","updateFocus","forceLoop","startIndex","preventLoopNavigation","focusOnlyEnabledItems","fromRight","preventScroll","forceFocus","actionViewItem","focusItem","getContainer","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","createAlertContainer","createStatusContainer","alert","msg","clearNode","insertMessage","status","isMacintosh","defaultOptions","buttonBackground","Color","buttonHoverBackground","buttonSeparator","buttonForeground","Button","_onDidClick","create","mixin","buttonSecondaryForeground","buttonSecondaryBackground","buttonSecondaryHoverBackground","buttonBorder","_element","eventType","setHoverBackground","applyStyles","trackFocus","hoverBackground","secondary","styles","background","foreground","border","borderWidth","borderStyle","borderColor","supportIcons","reset","formatRule","def","definition","Codicon","fontCharacter","LayoutAnchorMode","layout","viewportSize","viewSize","anchor","layoutAfterAnchorBoundary","mode","ALIGN","offset","size","layoutBeforeAnchorBoundary","max","ContextView","domPosition","delegate","toDisposeOnClean","toDisposeOnSetContainer","shadowRoot","shadowRootHostElement","useFixedPosition","useShadowDOM","setContainer","attachShadow","SHADOW_ROOT_CSS","BUBBLE_UP_EVENTS","onDOMEvent","BUBBLE_DOWN_EVENTS","isVisible","hide","zIndex","doLayout","canRelayout","BrowserFeatures","around","getAnchor","elementPosition","zoom","viewSizeWidth","viewSizeHeight","anchorPosition","anchorAlignment","anchorAxisAlignment","verticalAnchor","pageYOffset","horizontalAnchor","innerHeight","Range","start","end","AVOID","innerWidth","containerPosition","onHide","onCapture","activeElement","defaultOpts","badgeBackground","badgeForeground","CountBadge","count","badgeBorder","countFormat","titleFormat","setCount","format","DropdownMenu","_actions","_contextMenuProvider","contextMenuProvider","actionProvider","menuClassName","menuAsChild","_menuOptions","getActions","showContextMenu","getActionsContext","menuOptions","getActionViewItem","getKeyBinding","getMenuClassName","domForShadowRoot","_onDidChangeVisibility","onDidChangeVisibility","_label","labelRenderer","GestureEventType","MouseEvent","visible","show","cleanupFn","boxContainer","contents","DropdownMenuActionViewItem","menuActionsOrProvider","actionItem","isActionsArray","el","classNames","s","dropdownMenu","keybindingProvider","anchorAlignmentProvider","that","disabled","NLS_DEFAULT_LABEL","FindInput","contextViewProvider","_showOptionButtons","fixFocusOnOptionClickEnabled","imeSessionInProgress","additionalToggles","_onDidOptionChange","onDidOptionChange","_onKeyDown","onKeyDown","_onMouseDown","onMouseDown","_onInput","_onKeyUp","_onCaseSensitiveKeyDown","onCaseSensitiveKeyDown","_onRegexKeyDown","onRegexKeyDown","_lastHighlightFindOptions","placeholder","validation","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","inputBackground","inputForeground","inputBorder","inputValidationInfoBorder","inputValidationInfoBackground","inputValidationInfoForeground","inputValidationWarningBorder","inputValidationWarningBackground","inputValidationWarningForeground","inputValidationErrorBorder","inputValidationErrorBackground","inputValidationErrorForeground","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","history","flexibleHeight","flexibleWidth","flexibleMaxHeight","inputBox","HistoryInputBox","validationOptions","showHistoryHint","regex","RegexToggle","appendTitle","isChecked","onChange","viaKeyboard","validate","wholeWords","WholeWordsToggle","caseSensitive","CaseSensitiveToggle","indexes","onkeydown","indexOf","newIndex","controls","paddingRight","reduce","inputElement","onkeyup","oninput","onmousedown","enable","disable","toggleStyles","inputBoxStyles","select","message","showMessage","hideMessage","Widget","NLS_CASE_SENSITIVE_TOGGLE_LABEL","NLS_WHOLE_WORD_TOGGLE_LABEL","NLS_REGEX_TOGGLE_LABEL","opts","Toggle","NLS_PRESERVE_CASE_LABEL","PreserveCaseToggle","ReplaceInput","cachedOptionsWidth","_onPreserveCaseKeyDown","onPreserveCaseKeyDown","appendPreserveCaseLabel","preserveCase","newWidth","HighlightedLabel","highlights","didEverRender","escapeNewLines","objects","pos","highlight","substring","extraClasses","total","extra","HoverWidget","containerDomNode","contentsDomNode","scrollbar","DomScrollableElement","consumeMouseWheelIfScrollbarIsNeeded","getDomNode","scanDomNode","HoverAction","actionOptions","keybindingLabel","actionContainer","iconClass","CLICK","KEY_UP","setEnabled","FastLabelNode","disposed","_textContent","empty","_empty","marginLeft","IconLabel","customHovers","labelContainer","nameContainer","descriptionContainer","supportHighlights","nameNode","LabelWithHighlights","Label","supportDescriptionHighlights","descriptionNodeFactory","description","classes","italic","strikethrough","setupHover","descriptionTitle","setLabel","descriptionNode","descriptionMatches","htmlElement","previousCustomHover","delete","hoverDisposable","setupNativeHover","values","singleLabel","innerText","domId","l","separator","matches","labelEscapeNewLines","labels","labelStart","labelRange","range","splitMatches","m","isString","stripIcons","markdownNotSupportedFallback","UpdatableHoverWidget","fadeInAnimation","_cancellationTokenSource","HTMLElement","resolvedContent","isFunction","_hoverWidget","localize","CancellationTokenSource","token","isCancellationRequested","oldHoverWidget","hasContent","hoverOptions","showPointer","placement","hoverPosition","skipFadeInAnimation","showHover","isMarkdownString","hoverPreparation","hoverWidget","hideHover","disposeWidget","disposePreparation","onDidHideHover","triggerShowHover","delay","TimeoutTimer","mouseOverDomEmitter","toDispose","fromElement","targetElements","newContent","labelWithIconsRegex","RegExp","CSSIcon","textStart","textStop","exec","escaped","codicon","renderIcon","node","InputBox","state","maxHeight","Number","POSITIVE_INFINITY","_onDidChange","_onDidHeightChange","onDidHeightChange","wrapper","input","onfocus","onblur","mirror","scrollableElement","ScrollableElement","vertical","whiteSpace","wordWrap","onScroll","onSelectionChange","onAnchoredSelectionChange","selection","getSelection","anchorNode","updateScrollDimensions","showPlaceholderOnFocus","setPlaceHolder","setTooltip","onValueChange","onBlur","onFocus","ignoreGesture","setTimeout","updateMirror","actionbar","_hideMessage","_showMessage","placeHolder","newValue","cachedHeight","getTotalHeight","setSelectionRange","scrollWidth","selectionEnd","selectionStart","getTotalWidth","horizontalPadding","parseFloat","paddingLeft","cachedContentHeight","scrollHeight","setScrollDimensions","setScrollPosition","force","classForType","stylesForType","hasFocus","errorMsg","hasAttribute","div","alertText","showContextView","renderOptions","spanElement","formatContent","aria","hideContextView","suffix","charCodeAt","previousHeight","min","NLS_PLACEHOLDER_HISTORY_HINT","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX","NLS_PLACEHOLDER_HISTORY_HINT_SUFFIX_IN_PARENS","_onDidFocus","HistoryNavigator","addSuffix","getHistory","suffixedPlaceholder","observer","MutationObserver","mutationList","mutation","observe","attributeFilter","resetPlaceholder","historyHint","revertedPlaceholder","disconnect","getCurrentValue","has","addToHistory","getNextValue","previous","getPreviousValue","currentValue","last","first","KeybindingLabel","os","keyElements","Set","labelBackground","keybindingLabelBackground","labelForeground","keybindingLabelForeground","labelBorder","keybindingLabelBorder","labelBottomBorder","keybindingLabelBottomBorder","labelShadow","keybindingLabelShadow","areSame","getParts","firstPart","chordPart","renderPart","getAriaLabel","renderUnboundKeybindings","renderUnbound","modifierLabels","UILabelProvider","renderKey","Boolean","keyLabel","createKeyElement","extraClass","keyElement","borderBottomColor","b","PagedRenderer","modelProvider","templateId","renderTemplate","disposable","_","model","isResolved","renderElement","cts","promise","cancel","renderPlaceholder","entry","disposeTemplate","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","fromPagedListOptions","PagedList","user","virtualDelegate","renderers","pagedRenderers","list","List","updateOptions","getHTMLElement","onDidDispose","onMouseDblClick","_model","onPointer","onDidChangeSelection","getFocus","groupIntersect","groups","intersection","much","consolidate","previousGroup","group","g","RangeMap","_size","deleteCount","items","diff","before","after","middle","newSize","floor","indexAt","groupCount","newCount","RowCache","cache","getTemplateCache","templateData","getRenderer","row","releaseRow","removeFromParent","cachedRows","cachedRow","Error","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","ExternalElementsDragAndDropData","NativeDragAndDropData","files","file","ListViewAccessibilityProvider","getSetSize","bind","getPosInSet","getRole","ListView","_g","_h","_j","_k","InstanceCount","renderWidth","_scrollHeight","scrollableElementUpdateDisposable","scrollableElementWidthDelayer","Delayer","splicing","dragOverAnimationStopDisposable","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","_onDidChangeContentHeight","_horizontalScrolling","itemId","rangeMap","lastRenderTop","lastRenderHeight","mouseSupport","additionalScrollHeight","rowsContainer","scrollable","Scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","scheduleAtNextAnimationFrame","cb","SmoothScrollableElement","horizontal","mouseWheelScrollSensitivity","fastScrollSensitivity","onTouchChange","toDragEvent","onDrop","onDragLeave","onDragEnd","measureItemWidth","updateScrollWidth","getContentWidth","setSmoothScrollDuration","_splice","contentHeight","previousRenderRange","getRenderRange","deleteRange","removeRange","rowsToDispose","dragStartDisposable","checkedDisposable","rows","disposeElement","deleted","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","inserted","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","dropTarget","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeItemFromDOM","unrenderedRestRanges","elementsRange","insertRanges","beforeElement","getNextToLastElement","insertItemInDOM","release","eventuallyUpdateScrollDimensions","_rerender","renderHeight","trigger","getScrollDimensions","positionAt","indexAfter","scrollDimensions","getContentHeight","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","alloc","role","eventuallyUpdateScrollWidth","getComputedStyle","elementTop","getElementDomId","getScrollPosition","reuseAnimation","getScrollTop","setScrollTop","toMouseEvent","toGestureEvent","toTouchEvent","getItemIndexFromEventTarget","inSmoothScrolling","error","effectAllowed","setDragImage","getDragLabel","dragImage","currentDragData","StaticDND","setupDragAndDropScrollTopAnimation","feedback","f1","f2","accept","currentDragFeedback","dropEffect","effect","distinct","sort","disposableTimeout","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","upperLimit","rawIndex","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","renderRanges","afterIndex","beforeRow","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","offsetHeight","setDynamicHeight","ranges","lastRange","nextToLastItem","parentNode","prototype","CombinedSpliceable","spliceables","ListError","TraitRenderer","trait","renderedElementIndex","rendered","unrender","renderIndex","insertCount","Trait","_trait","sortedIndexes","_onChange","hasTrait","_set","numericSort","sortedResult","toRender","disjunction","renderIndexes","binarySearch","SelectionTrait","setAriaSelected","TraitSpliceable","identityProvider","pastElementsWithTrait","getId","elementsWithTrait","isInputElement","isMonacoEditor","isButton","TypeNavigationMode","TypeNavigationControllerState","KeyboardController","multipleSelectionDisposables","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","multipleSelectionSupport","onCtrlA","optionsUpdate","setSelection","setAnchor","reveal","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","Idle","Automatic","triggered","previouslyFocused","enabledDisposables","typeNavigationEnabled","typeNavigationMode","typing","onChar","mightProducePrintableCharacter","stopEvent","onClear","onInput","word","Typing","getKeyboardNavigationLabel","labelStr","matchesPrefix","setFocus","DOMFocusController","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","DefaultMultipleSelectionController","MouseController","_onPointer","multipleSelectionController","onContextMenu","onDoubleClick","onMouseClick","onMouseMiddleClick","onTap","onViewPointer","domFocus","changeSelection","isSelectionChangeEvent","currentFocus","rangeSelection","contiguousRange","reverse","getContiguousRangeContaining","newSelection","one","j","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","listBackground","isOpaque","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionOutline","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listSelectionOutline","listFocusOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","tableColumnsBorder","tableOddRowsBackgroundColor","defaultStyles","treeIndentGuidesStroke","transparent","keyboardSupport","PipelineRenderer","_templateId","AccessibiltyRenderer","ariaLevel","getAriaLevel","ListViewDragAndDrop","getSelectedElements","originalEvent","targetElement","targetIndex","_options","eventBufferer","EventBufferer","_ariaLabel","_onDidDispose","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","styleController","createStyleSheet","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","mouseController","createMouseController","onDidChangeFocus","_onFocusChange","_onSelectionChange","wrapEvent","toListEvent","onMouseOver","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","bufferEvents","rerender","firstOrDefault","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","elementHeight","timeout","firstPageIndex","firstGoodPageIndex","focusNth","relativeTop","isNumber","clamp","viewItemBottom","scrollBottom","getActiveDescendantId","Direction","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","Menu","menuElement","doGetActionViewItem","parentData","isLinux","menuDisposables","initializeOrUpdateStyleSheet","enableMnemonics","toLocaleLowerCase","mnemonics","SubmenuMenuActionViewItem","focusItemByElement","relatedTarget","isAncestor","lastFocusedItem","setFocusedItem","verticalScrollbarSize","handleMouseWheel","scrollElement","submenuIds","MenuSeparatorActionViewItem","array","updatePositionInSet","styleSheet","isInShadowDOM","globalStyleSheet","isForShadowDom","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground","getMenuWidgetCSS","fgColor","foregroundColor","bgColor","shadow","shadowColor","outline","borderRadius","BaseMenuActionViewItem","round","SubmenuAction","menuActionViewItem","mnemonic","getMnemonic","actionViewItems","menuItemOptions","getLabel","ctx","runOnceToEnableMouseUp","RunOnceScheduler","check","schedule","applyStyle","setSize","cleanLabel","mnemonicInText","trim","cleanMnemonic","strings","lastIndex","escMatch","replaceDoubleEscapes","str","menuStyle","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","getActiveElement","submenu","updateAriaExpanded","submenuIndicator","submenuContainer","windowDimensions","selectFirstItem","computedStyles","paddingTop","EmptySubmenuAction","entryBox","entryBoxUpdated","viewBox","calculateSubmenuMenuLayout","Dimension","separatorColor"],"sourceRoot":""}