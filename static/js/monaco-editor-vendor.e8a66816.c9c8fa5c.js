"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9],{17577:function(e,t,n){n.d(t,{T:function(){return c}});var i=n(60726),r=n(22951),o=n(91976),a=n(67591),s=n(99616),u=n(59175),c=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,o,a,s,u){return(0,r.Z)(this,n),t.call(this,e,i,o,a,s,u)}return(0,o.Z)(n,[{key:"getCodeEditorCommandPicks",value:function(){var e=this.activeTextEditorControl;if(!e)return[];var t,n=[],r=(0,i.Z)(e.getSupportedActions());try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push({commandId:o.id,commandAlias:o.alias,label:(0,u.x$)(o.label)||o.id})}}catch(a){r.e(a)}finally{r.f()}return n}}]),n}(n(79258).Z)},10993:function(e,t,n){n.d(t,{X:function(){return f}});var i=n(11026),r=n(22951),o=n(91976),a=n(49793),s=n(59652),u=n(71923),c=n(6191),l=n(43232),d=n(78873),h=n(58023),p=n(99079),f=function(){function e(t){(0,r.Z)(this,e),this.options=t,this.rangeHighlightDecorationId=void 0}return(0,o.Z)(e,[{key:"provide",value:function(e,t){var n,i=this,r=new s.SL;e.canAcceptInBackground=!!(null===(n=this.options)||void 0===n?void 0:n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var o=r.add(new s.XK);return o.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange((function(){o.value=void 0,o.value=i.doProvide(e,t)}))),r}},{key:"doProvide",value:function(e,t){var n=this,i=new s.SL,r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){var o={editor:r},l=(0,c.Pi)(r);if(l){var d=(0,u.f6)(r.saveViewState());i.add(l.onDidChangeCursorPosition((function(){d=(0,u.f6)(r.saveViewState())}))),o.restoreViewState=function(){d&&r===n.activeTextEditorControl&&r.restoreViewState(d)},i.add((0,a.I)(t.onCancellationRequested)((function(){var e;return null===(e=o.restoreViewState)||void 0===e?void 0:e.call(o)})))}i.add((0,s.OF)((function(){return n.clearDecorations(r)}))),i.add(this.provideWithTextEditor(o,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}},{key:"canProvideWithTextEditor",value:function(e){return!0}},{key:"gotoLocation",value:function(e,t){var n=e.editor;n.setSelection(t.range),n.revealRangeInCenter(t.range,0),t.preserveFocus||n.focus();var i=n.getModel();i&&"getLineContent"in i&&(0,p.Z9)("".concat(i.getLineContent(t.range.startLineNumber)))}},{key:"getModel",value:function(e){var t;return(0,c.QI)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}},{key:"addDecorations",value:function(e,t){var n=this;e.changeDecorations((function(e){var r=[];n.rangeHighlightDecorationId&&(r.push(n.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(n.rangeHighlightDecorationId.rangeHighlightId),n.rangeHighlightDecorationId=void 0);var o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,h.EN)(d.m9),position:l.sh.Full}}}],a=e.deltaDecorations(r,o),s=(0,i.Z)(a,2),u=s[0],c=s[1];n.rangeHighlightDecorationId={rangeHighlightId:u,overviewRulerDecorationId:c}}))}},{key:"clearDecorations",value:function(e){var t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((function(e){e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}]),e}()},54103:function(e,t,n){n.d(t,{q:function(){return h}});var i=n(11026),r=n(22951),o=n(91976),a=n(67591),s=n(99616),u=n(59652),c=n(6191),l=n(10993),d=n(26511),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.call(this,{canAcceptInBackground:!0})}return(0,o.Z)(n,[{key:"provideWithoutTextEditor",value:function(e){var t=(0,d.NC)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,u.JT.None}},{key:"provideWithTextEditor",value:function(e,t,r){var o=this,a=e.editor,s=new u.SL;s.add(t.onDidAccept((function(n){var r=(0,i.Z)(t.selectedItems,1)[0];if(r){if(!o.isValidLineNumber(a,r.lineNumber))return;o.gotoLocation(e,{range:o.toRange(r.lineNumber,r.column),keyMods:t.keyMods,preserveFocus:n.inBackground}),n.inBackground||t.hide()}})));var l=function(){var e=o.parsePosition(a,t.value.trim().substr(n.PREFIX.length)),i=o.getPickLabel(a,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,o.isValidLineNumber(a,e.lineNumber)){var r=o.toRange(e.lineNumber,e.column);a.revealRangeInCenter(r,0),o.addDecorations(a,r)}else o.clearDecorations(a)};l(),s.add(t.onDidChangeValue((function(){return l()})));var d=(0,c.Pi)(a);d&&(2===d.getOptions().get(65).renderType&&(d.updateOptions({lineNumbers:"on"}),s.add((0,u.OF)((function(){return d.updateOptions({lineNumbers:"relative"})})))));return s}},{key:"toRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}},{key:"parsePosition",value:function(e,t){var n=t.split(/,|:|#/).map((function(e){return parseInt(e,10)})).filter((function(e){return!isNaN(e)})),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}},{key:"getPickLabel",value:function(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?(0,d.NC)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):(0,d.NC)("gotoLineLabel","Go to line {0}.",t);var i=e.getPosition()||{lineNumber:1,column:1},r=this.lineCount(e);return r>1?(0,d.NC)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,r):(0,d.NC)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}},{key:"isValidLineNumber",value:function(e,t){return!(!t||"number"!==typeof t)&&(t>0&&t<=this.lineCount(e))}},{key:"isValidColumn",value:function(e,t,n){if(!n||"number"!==typeof n)return!1;var i=this.getModel(e);if(!i)return!1;var r={lineNumber:t,column:n};return i.validatePosition(r).equals(r)}},{key:"lineCount",value:function(e){var t,n;return null!==(n=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==n?n:0}}]),n}(l.X);h.PREFIX=":"},48376:function(e,t,n){n.d(t,{S:function(){return E}});var i,r=n(64649),o=n(649),a=n(60726),s=n(11026),u=n(11092),c=n(22951),l=n(91976),d=n(67591),h=n(99616),p=n(37368),f=n(21706),v=n(87159),g=n(75246),_=n(38821),m=n(59652),b=n(17224),y=n(55597),k=n(76958),C=n(2842),S=n(10993),x=n(26511),N=n(90024),R=n(88648),w=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t){return function(n,i){t(n,i,e)}},Z=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},E=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return(0,c.Z)(this,n),(r=t.call(this,o))._languageFeaturesService=e,r._outlineModelService=i,r.options=o,r.options.canAcceptInBackground=!0,r}return(0,l.Z)(n,[{key:"provideWithoutTextEditor",value:function(e){return this.provideLabelPick(e,(0,x.NC)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),m.JT.None}},{key:"provideWithTextEditor",value:function(e,t,n){var i=e.editor,r=this.getModel(i);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,n):this.doProvideWithoutEditorSymbols(e,r,t,n):m.JT.None}},{key:"doProvideWithoutEditorSymbols",value:function(e,t,n,i){var r=this,o=new m.SL;return this.provideLabelPick(n,(0,x.NC)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),Z(r,void 0,void 0,(0,u.Z)().mark((function r(){return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.waitForLanguageSymbolRegistry(t,o);case 2:if(r.sent&&!i.isCancellationRequested){r.next=5;break}return r.abrupt("return");case 5:o.add(this.doProvideWithEditorSymbols(e,t,n,i));case 6:case"end":return r.stop()}}),r,this)}))),o}},{key:"provideLabelPick",value:function(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}},{key:"waitForLanguageSymbolRegistry",value:function(e,t){return Z(this,void 0,void 0,(0,u.Z)().mark((function n(){var i,r,o=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._languageFeaturesService.documentSymbolProvider.has(e)){n.next=2;break}return n.abrupt("return",!0);case 2:return i=new p.CR,r=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){o._languageFeaturesService.documentSymbolProvider.has(e)&&(r.dispose(),i.complete(!0))}))),t.add((0,m.OF)((function(){return i.complete(!1)}))),n.abrupt("return",i.p);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"doProvideWithEditorSymbols",value:function(e,t,i,r){var o,a=this,c=e.editor,l=new m.SL;l.add(i.onDidAccept((function(t){var n=(0,s.Z)(i.selectedItems,1)[0];n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())}))),l.add(i.onDidTriggerItemButton((function(t){var n=t.item;n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));var d=this.getDocumentSymbols(t,r),h=void 0,p=function(e){return Z(a,void 0,void 0,(0,u.Z)().mark((function t(){var o,a,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===h||void 0===h||h.dispose(!0),i.busy=!1,h=new f.A(r),i.busy=!0,t.prev=4,o=(0,_.AO)(i.value.substr(n.PREFIX.length).trim()),t.next=8,this.doGetSymbolPicks(d,o,void 0,h.token);case 8:if(a=t.sent,!r.isCancellationRequested){t.next=11;break}return t.abrupt("return");case 11:a.length>0?(i.items=a,e&&0===o.original.length&&(s=(0,R.dF)(a,(function(t){return Boolean("separator"!==t.type&&t.range&&y.e.containsPosition(t.range.decoration,e))})))&&(i.activeItems=[s])):o.original.length>0?this.provideLabelPick(i,(0,x.NC)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,x.NC)("noSymbolResults","No editor symbols"));case 12:return t.prev=12,r.isCancellationRequested||(i.busy=!1),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[4,,12,15]])})))};return l.add(i.onDidChangeValue((function(){return p(void 0)}))),p(null===(o=c.getSelection())||void 0===o?void 0:o.getPosition()),l.add(i.onDidChangeActive((function(){var e=(0,s.Z)(i.activeItems,1)[0];e&&e.range&&(c.revealRangeInCenter(e.range.selection,0),a.addDecorations(c,e.range.decoration))}))),l}},{key:"doGetSymbolPicks",value:function(e,t,i,r){var c,l;return Z(this,void 0,void 0,(0,u.Z)().mark((function d(){var h,p,f,m,C,S,N,R,w,T,Z,E,I,L,M,A,O,F,W,j,V,U,B,q,H,G,z,Y,K,X,J,$,Q,ee,te,ne=this;return(0,u.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e;case 2:if(h=u.sent,!r.isCancellationRequested){u.next=5;break}return u.abrupt("return",[]);case 5:p=0===t.original.indexOf(n.SCOPE_PREFIX),f=p?1:0,t.values&&t.values.length>1?(m=(0,_.Ic)(t.values[0]),C=(0,_.Ic)(t.values.slice(1))):m=t,(N=null===(l=null===(c=this.options)||void 0===c?void 0:c.openSideBySideDirection)||void 0===l?void 0:l.call(c))&&(S=[{iconClass:"right"===N?g.k.asClassName(v.l.splitHorizontal):g.k.asClassName(v.l.splitVertical),tooltip:"right"===N?(0,x.NC)("openToSide","Open to the Side"):(0,x.NC)("openToBottom","Open to the Bottom")}]),R=[],w=0;case 12:if(!(w<h.length)){u.next=43;break}if(T=h[w],Z=(0,b.fy)(T.name),E="$(".concat(k.uZ.toIcon(T.kind).id,") ").concat(Z),I=E.length-Z.length,L=T.containerName,(null===i||void 0===i?void 0:i.extraContainerLabel)&&(L=L?"".concat(i.extraContainerLabel," \u2022 ").concat(L):i.extraContainerLabel),M=void 0,A=void 0,O=void 0,F=void 0,!(t.original.length>f)){u.next=38;break}if(W=!1,m!==t&&(j=(0,_.mt)(E,Object.assign(Object.assign({},t),{values:void 0}),f,I),V=(0,s.Z)(j,2),M=V[0],A=V[1],"number"===typeof M&&(W=!0)),"number"===typeof M){u.next=33;break}if(U=(0,_.mt)(E,m,f,I),B=(0,s.Z)(U,2),M=B[0],A=B[1],"number"===typeof M){u.next=33;break}return u.abrupt("continue",40);case 33:if(W||!C){u.next=38;break}if(L&&C.original.length>0&&(q=(0,_.mt)(L,C),H=(0,s.Z)(q,2),O=H[0],F=H[1]),"number"===typeof O){u.next=37;break}return u.abrupt("continue",40);case 37:"number"===typeof M&&(M+=O);case 38:G=T.tags&&T.tags.indexOf(1)>=0,R.push({index:w,kind:T.kind,score:M,label:E,ariaLabel:Z,description:L,highlights:G?void 0:{label:A,description:F},range:{selection:y.e.collapseToStart(T.selectionRange),decoration:T.range},strikethrough:G,buttons:S});case 40:w++,u.next=12;break;case 43:if(z=R.sort((function(e,t){return p?ne.compareByKindAndScore(e,t):ne.compareByScore(e,t)})),Y=[],p){K=function(){J&&"number"===typeof X&&$>0&&(J.label=(0,b.WU)(D[X]||P,$))},X=void 0,J=void 0,$=0,Q=(0,a.Z)(z);try{for(Q.s();!(ee=Q.n()).done;)te=ee.value,X!==te.kind?(K(),X=te.kind,$=1,J={type:"separator"},Y.push(J)):$++,Y.push(te)}catch(d){Q.e(d)}finally{Q.f()}K()}else z.length>0&&(Y=[{label:(0,x.NC)("symbols","symbols ({0})",R.length),type:"separator"}].concat((0,o.Z)(z)));return u.abrupt("return",Y);case 47:case"end":return u.stop()}}),d,this)})))}},{key:"compareByScore",value:function(e,t){if("number"!==typeof e.score&&"number"===typeof t.score)return 1;if("number"===typeof e.score&&"number"!==typeof t.score)return-1;if("number"===typeof e.score&&"number"===typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}},{key:"compareByKindAndScore",value:function(e,t){var n=D[e.kind]||P,i=D[t.kind]||P,r=n.localeCompare(i);return 0===r?this.compareByScore(e,t):r}},{key:"getDocumentSymbols",value:function(e,t){return Z(this,void 0,void 0,(0,u.Z)().mark((function n(){var i;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._outlineModelService.getOrCreate(e,t);case 2:return i=n.sent,n.abrupt("return",t.isCancellationRequested?[]:i.asListOfDocumentSymbols());case 4:case"end":return n.stop()}}),n,this)})))}}]),n}(S.X);E.PREFIX="@",E.SCOPE_PREFIX=":",E.PREFIX_BY_CATEGORY="".concat(E.PREFIX).concat(E.SCOPE_PREFIX),E=w([T(0,N.p),T(1,C.Je)],E);var P=(0,x.NC)("property","properties ({0})"),D=(i={},(0,r.Z)(i,5,(0,x.NC)("method","methods ({0})")),(0,r.Z)(i,11,(0,x.NC)("function","functions ({0})")),(0,r.Z)(i,8,(0,x.NC)("_constructor","constructors ({0})")),(0,r.Z)(i,12,(0,x.NC)("variable","variables ({0})")),(0,r.Z)(i,4,(0,x.NC)("class","classes ({0})")),(0,r.Z)(i,22,(0,x.NC)("struct","structs ({0})")),(0,r.Z)(i,23,(0,x.NC)("event","events ({0})")),(0,r.Z)(i,24,(0,x.NC)("operator","operators ({0})")),(0,r.Z)(i,10,(0,x.NC)("interface","interfaces ({0})")),(0,r.Z)(i,2,(0,x.NC)("namespace","namespaces ({0})")),(0,r.Z)(i,3,(0,x.NC)("package","packages ({0})")),(0,r.Z)(i,25,(0,x.NC)("typeParameter","type parameters ({0})")),(0,r.Z)(i,1,(0,x.NC)("modules","modules ({0})")),(0,r.Z)(i,6,(0,x.NC)("property","properties ({0})")),(0,r.Z)(i,9,(0,x.NC)("enum","enumerations ({0})")),(0,r.Z)(i,21,(0,x.NC)("enumMember","enumeration members ({0})")),(0,r.Z)(i,14,(0,x.NC)("string","strings ({0})")),(0,r.Z)(i,0,(0,x.NC)("file","files ({0})")),(0,r.Z)(i,17,(0,x.NC)("array","arrays ({0})")),(0,r.Z)(i,15,(0,x.NC)("number","numbers ({0})")),(0,r.Z)(i,16,(0,x.NC)("boolean","booleans ({0})")),(0,r.Z)(i,18,(0,x.NC)("object","objects ({0})")),(0,r.Z)(i,19,(0,x.NC)("key","keys ({0})")),(0,r.Z)(i,7,(0,x.NC)("field","fields ({0})")),(0,r.Z)(i,13,(0,x.NC)("constant","constants ({0})")),i)},70690:function(e,t,n){n.r(t),n.d(t,{ReadOnlyMessageController:function(){return d}});var i=n(22951),r=n(91976),o=n(67591),a=n(99616),s=n(59652),u=n(33344),c=n(38525),l=n(26511),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this)).editor=e,r._register(r.editor.onDidAttemptReadOnlyEdit((function(){return r._onDidAttemptReadOnlyEdit()}))),r}return(0,r.Z)(n,[{key:"_onDidAttemptReadOnlyEdit",value:function(){var e=c.O.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(l.NC("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(l.NC("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}]),n}(s.JT);d.ID="editor.contrib.readOnlyMessageController",(0,u._K)(d.ID,d,2)},2494:function(e,t,n){n.r(t),n.d(t,{RenameAction:function(){return K},rename:function(){return z}});var i=n(11026),r=n(43243),o=n(27597),a=n(67591),s=n(99616),u=n(11092),c=n(22951),l=n(91976),d=n(99079),h=n(37368),p=n(21706),f=n(33309),v=n(59652),g=n(71923),_=n(71308),m=n(67113),b=n(33344),y=n(68578),k=n(3527),C=n(99924),S=n(55597),x=n(90567),N=n(22342),R=n(38525),w=n(26511),T=n(73379),Z=n(10071),E=n(22046),P=n(93442),D=n(37709),I=n(94247),L=n(11410),M=n(85149),A=n(24999),O=n(58023),F=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},W=function(e,t){return function(n,i){t(n,i,e)}},j=new Z.uy("renameInputVisible",!1,(0,w.NC)("renameInputVisible","Whether the rename input widget is visible")),V=function(){function e(t,n,i,r,o){var a=this;(0,c.Z)(this,e),this._editor=t,this._acceptKeybindings=n,this._themeService=i,this._keybindingService=r,this._disposables=new v.SL,this.allowEditorOverflow=!0,this._visibleContextKey=j.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(48)&&a._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"__renameInputWidget"}},{key:"getDomNode",value:function(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,w.NC)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}},{key:"_updateStyles",value:function(e){var t,n,i,r;if(this._input&&this._domNode){var o=e.getColor(A.rh),a=e.getColor(A.A42);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(A.D0T))&&void 0!==t?t:""),this._domNode.style.boxShadow=o?" 0 0 8px 2px ".concat(o):"",this._domNode.style.border=a?"1px solid ".concat(a):"",this._domNode.style.color=String(null!==(n=e.getColor(A.zJb))&&void 0!==n?n:""),this._input.style.backgroundColor=String(null!==(i=e.getColor(A.sEe))&&void 0!==i?i:"");var s=e.getColor(A.dt_);this._input.style.borderWidth=s?"1px":"0px",this._input.style.borderStyle=s?"solid":"none",this._input.style.borderColor=null!==(r=null===s||void 0===s?void 0:s.toString())&&void 0!==r?r:"none"}}},{key:"_updateFont",value:function(){if(this._input&&this._label){var e=this._editor.getOption(48);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize="".concat(e.fontSize,"px"),this._label.style.fontSize="".concat(.8*e.fontSize,"px")}}},{key:"getPosition",value:function(){return this._visible?{position:this._position,preference:[2,1]}:null}},{key:"beforeRender",value:function(){var e,t,n=(0,i.Z)(this._acceptKeybindings,2),r=n[0],o=n[1];return this._label.innerText=(0,w.NC)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(r))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(o))||void 0===t?void 0:t.getLabel()),null}},{key:"afterRender",value:function(e){e||this.cancelInput(!0)}},{key:"acceptInput",value:function(e){var t;null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}},{key:"cancelInput",value:function(e){var t;null===(t=this._currentCancelInput)||void 0===t||t.call(this,e)}},{key:"getInput",value:function(e,t,n,i,r,o){var a=this;this._domNode.classList.toggle("preview",r),this._position=new C.L(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var s=new v.SL;return new Promise((function(e){a._currentCancelInput=function(t){return a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e(t),!0},a._currentAcceptInput=function(n){0!==a._input.value.trim().length&&a._input.value!==t?(a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e({newName:a._input.value,wantsPreview:r&&n})):a.cancelInput(!0)},s.add(o.onCancellationRequested((function(){return a.cancelInput(!0)}))),s.add(a._editor.onDidBlurEditorWidget((function(){return a.cancelInput(!document.hasFocus())}))),a._show()})).finally((function(){s.dispose(),a._hide()}))}},{key:"_show",value:function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((function(){e._input.focus(),e._input.setSelectionRange(parseInt(e._input.getAttribute("selectionStart")),parseInt(e._input.getAttribute("selectionEnd")))}),100)}},{key:"_hide",value:function(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}}]),e}();V=F([W(2,O.XE),W(3,M.d),W(4,Z.i6)],V);var U=n(90024),B=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},q=function(e,t){return function(n,i){t(n,i,e)}},H=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},G=function(){function e(t,n,i){(0,c.Z)(this,e),this.model=t,this.position=n,this._providerRenameIdx=0,this._providers=i.ordered(t)}return(0,l.Z)(e,[{key:"hasProvider",value:function(){return this._providers.length>0}},{key:"resolveRenameLocation",value:function(e){return H(this,void 0,void 0,(0,u.Z)().mark((function t(){var n,i,r,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],this._providerRenameIdx=0;case 2:if(!(this._providerRenameIdx<this._providers.length)){t.next=18;break}if((i=this._providers[this._providerRenameIdx]).resolveRenameLocation){t.next=6;break}return t.abrupt("break",18);case 6:return t.next=8,i.resolveRenameLocation(this.model,this.position,e);case 8:if(r=t.sent){t.next=11;break}return t.abrupt("continue",15);case 11:if(!r.rejectReason){t.next=14;break}return n.push(r.rejectReason),t.abrupt("continue",15);case 14:return t.abrupt("return",r);case 15:this._providerRenameIdx++,t.next=2;break;case 18:if(o=this.model.getWordAtPosition(this.position)){t.next=21;break}return t.abrupt("return",{range:S.e.fromPositions(this.position),text:"",rejectReason:n.length>0?n.join("\n"):void 0});case 21:return t.abrupt("return",{range:new S.e(this.position.lineNumber,o.startColumn,this.position.lineNumber,o.endColumn),text:o.word,rejectReason:n.length>0?n.join("\n"):void 0});case 22:case"end":return t.stop()}}),t,this)})))}},{key:"provideRenameEdits",value:function(e,t){return H(this,void 0,void 0,(0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._provideRenameEdits(e,this._providerRenameIdx,[],t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"_provideRenameEdits",value:function(e,t,n,i){return H(this,void 0,void 0,(0,u.Z)().mark((function r(){var o,a;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this._providers[t]){r.next=3;break}return r.abrupt("return",{edits:[],rejectReason:n.join("\n")});case 3:return r.next=5,o.provideRenameEdits(this.model,this.position,e,i);case 5:if(a=r.sent){r.next=10;break}return r.abrupt("return",this._provideRenameEdits(e,t+1,n.concat(w.NC("no result","No result.")),i));case 10:if(!a.rejectReason){r.next=12;break}return r.abrupt("return",this._provideRenameEdits(e,t+1,n.concat(a.rejectReason),i));case 12:return r.abrupt("return",a);case 13:case"end":return r.stop()}}),r,this)})))}}]),e}();function z(e,t,n,i){return H(this,void 0,void 0,(0,u.Z)().mark((function r(){var o,a;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new G(t,n,e),r.next=3,o.resolveRenameLocation(p.T.None);case 3:if(!(null===(a=r.sent)||void 0===a?void 0:a.rejectReason)){r.next=6;break}return r.abrupt("return",{edits:[],rejectReason:a.rejectReason});case 6:return r.abrupt("return",o.provideRenameEdits(i,p.T.None));case 7:case"end":return r.stop()}}),r)})))}var Y=function(){function e(t,n,i,r,o,a,s,u){(0,c.Z)(this,e),this.editor=t,this._instaService=n,this._notificationService=i,this._bulkEditService=r,this._progressService=o,this._logService=a,this._configService=s,this._languageFeaturesService=u,this._disposableStore=new v.SL,this._cts=new p.A,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(V,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposableStore.dispose(),this._cts.dispose(!0)}},{key:"run",value:function(){var e,t;return H(this,void 0,void 0,(0,u.Z)().mark((function n(){var i,r,o,a,s,c,l,f,v,g,_,b,y=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._cts.dispose(!0),this._cts=new p.A,this.editor.hasModel()){n.next=4;break}return n.abrupt("return",void 0);case 4:if(i=this.editor.getPosition(),(r=new G(this.editor.getModel(),i,this._languageFeaturesService.renameProvider)).hasProvider()){n.next=8;break}return n.abrupt("return",void 0);case 8:return o=new m.Dl(this.editor,5,void 0,this._cts.token),n.prev=9,s=r.resolveRenameLocation(o.token),this._progressService.showWhile(s,250),n.next=14,s;case 14:a=n.sent,n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(9),null===(e=R.O.get(this.editor))||void 0===e||e.showMessage(n.t0||w.NC("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i),n.abrupt("return",void 0);case 21:return n.prev=21,o.dispose(),n.finish(21);case 24:if(a){n.next=26;break}return n.abrupt("return",void 0);case 26:if(!a.rejectReason){n.next=29;break}return null===(t=R.O.get(this.editor))||void 0===t||t.showMessage(a.rejectReason,i),n.abrupt("return",void 0);case 29:if(!o.token.isCancellationRequested){n.next=31;break}return n.abrupt("return",void 0);case 31:return c=new m.Dl(this.editor,5,a.range,this._cts.token),l=this.editor.getSelection(),f=0,v=a.text.length,S.e.isEmpty(l)||S.e.spansMultipleLines(l)||!S.e.containsRange(a.range,l)||(f=Math.max(0,l.startColumn-a.range.startColumn),v=Math.min(a.range.endColumn,l.endColumn)-a.range.startColumn),g=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),n.next=39,this._renameInputField.getInput(a.range,a.text,f,v,g,c.token);case 39:if("boolean"!==typeof(_=n.sent)){n.next=44;break}return _&&this.editor.focus(),c.dispose(),n.abrupt("return",void 0);case 44:return this.editor.focus(),b=(0,h.eP)(r.provideRenameEdits(_.newName,c.token),c.token).then((function(e){return H(y,void 0,void 0,(0,u.Z)().mark((function t(){var n=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&this.editor.hasModel()){t.next=2;break}return t.abrupt("return");case 2:if(!e.rejectReason){t.next=5;break}return this._notificationService.info(e.rejectReason),t.abrupt("return");case 5:this.editor.setSelection(S.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(e,{editor:this.editor,showPreview:_.wantsPreview,label:w.NC("label","Renaming '{0}' to '{1}'",null===a||void 0===a?void 0:a.text,_.newName),code:"undoredo.rename",quotableLabel:w.NC("quotableLabel","Renaming {0} to {1}",null===a||void 0===a?void 0:a.text,_.newName),respectAutoSaveConfig:!0}).then((function(e){e.ariaSummary&&(0,d.Z9)(w.NC("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",a.text,_.newName,e.ariaSummary))})).catch((function(e){n._notificationService.error(w.NC("rename.failedApply","Rename failed to apply edits")),n._logService.error(e)}));case 7:case"end":return t.stop()}}),t,this)})))}),(function(e){y._notificationService.error(w.NC("rename.failed","Rename failed to compute edits")),y._logService.error(e)})).finally((function(){c.dispose()})),this._progressService.showWhile(b,250),n.abrupt("return",b);case 48:case"end":return n.stop()}}),n,this,[[9,17,21,24]])})))}},{key:"acceptRenameInput",value:function(e){this._renameInputField.acceptInput(e)}},{key:"cancelRenameInput",value:function(){this._renameInputField.cancelInput(!0)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();Y.ID="editor.contrib.renameController",Y=B([q(1,E.TG),q(2,D.lT),q(3,y.vu),q(4,I.ek),q(5,P.VZ),q(6,N.V),q(7,U.p)],Y);var K=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{id:"editor.action.rename",label:w.NC("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Z.Ao.and(x.u.writable,x.u.hasRenameProvider),kbOpts:{kbExpr:x.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}return(0,l.Z)(n,[{key:"runCommand",value:function(e,t){var a=this,s=e.get(k.$),u=Array.isArray(t)&&t||[void 0,void 0],c=(0,i.Z)(u,2),l=c[0],d=c[1];return _.o.isUri(l)&&C.L.isIPosition(d)?s.openCodeEditor({resource:l},s.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(d),e.invokeWithinContext((function(t){return a.reportTelemetry(t,e),a.run(t,e)})))}),f.dL):(0,r.Z)((0,o.Z)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=Y.get(t);return n?n.run():Promise.resolve()}}]),n}(b.R6);(0,b._K)(Y.ID,Y,4),(0,b.Qr)(K);var X=b._l.bindToContribution(Y.get);(0,b.fK)(new X({id:"acceptRenameInput",precondition:j,handler:function(e){return e.acceptRenameInput(!1)},kbOpts:{weight:199,kbExpr:Z.Ao.and(x.u.focus,Z.Ao.not("isComposing")),primary:3}})),(0,b.fK)(new X({id:"acceptRenameInputWithPreview",precondition:Z.Ao.and(j,Z.Ao.has("config.editor.rename.enablePreview")),handler:function(e){return e.acceptRenameInput(!0)},kbOpts:{weight:199,kbExpr:Z.Ao.and(x.u.focus,Z.Ao.not("isComposing")),primary:1027}})),(0,b.fK)(new X({id:"cancelRenameInput",precondition:j,handler:function(e){return e.cancelRenameInput()},kbOpts:{weight:199,kbExpr:x.u.focus,primary:9,secondary:[1033]}})),(0,b.sb)("_executeDocumentRenameProvider",(function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a=r[0];return(0,g.p_)("string"===typeof a),z(e.get(U.p).renameProvider,t,n,a)})),(0,b.sb)("_executePrepareRename",(function(e,t,n){return H(this,void 0,void 0,(0,u.Z)().mark((function i(){var r,o,a,s;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.get(U.p),o=r.renameProvider,a=new G(t,n,o),i.next=4,a.resolveRenameLocation(p.T.None);case 4:if(!(null===(s=i.sent)||void 0===s?void 0:s.rejectReason)){i.next=7;break}throw new Error(s.rejectReason);case 7:return i.abrupt("return",s);case 8:case"end":return i.stop()}}),i)})))})),L.B.as(T.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:w.NC("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},15544:function(e,t,n){n.r(t),n.d(t,{DocumentSemanticTokensFeature:function(){return w}});var i=n(60726),r=n(22951),o=n(91976),a=n(43243),s=n(27597),u=n(67591),c=n(99616),l=n(59652),d=n(33309),h=n(79412),p=n(53435),f=n(37368),v=n(21706),g=n(58023),_=n(70117),m=n(89533),b=n(606),y=n(87794),k=n(90024),C=n(87457),S=n(40861),x=n(25844),N=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},R=function(e,t){return function(n,i){t(n,i,e)}},w=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,a,s,u,c){var l;(0,r.Z)(this,n),(l=t.call(this))._watchers=Object.create(null);var d=function(t){l._watchers[t.uri.toString()]=new T(t,e,a,u,c)},h=function(e,t){t.dispose(),delete l._watchers[e.uri.toString()]},p=function(){var e,t=(0,i.Z)(o.getModels());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=l._watchers[n.uri.toString()];(0,x.t)(n,a,s)?r||d(n):r&&h(n,r)}}catch(u){t.e(u)}finally{t.f()}};return l._register(o.onModelAdded((function(e){(0,x.t)(e,a,s)&&d(e)}))),l._register(o.onModelRemoved((function(e){var t=l._watchers[e.uri.toString()];t&&h(e,t)}))),l._register(s.onDidChangeConfiguration((function(e){e.affectsConfiguration(x.e)&&p()}))),l._register(a.onDidColorThemeChange(p)),l}return(0,o.Z)(n,[{key:"dispose",value:function(){for(var e=0,t=Object.values(this._watchers);e<t.length;e++){t[e].dispose()}(0,a.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}}]),n}(l.JT);w=N([R(0,C.s),R(1,h.q),R(2,g.XE),R(3,p.Ui),R(4,b.A),R(5,k.p)],w);var T=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,a,s,u){var c;(0,r.Z)(this,n),(c=t.call(this))._semanticTokensStylingService=o,c._isDisposed=!1,c._model=e,c._provider=u.documentSemanticTokensProvider,c._debounceInformation=s.for(c._provider,"DocumentSemanticTokens",{min:n.REQUEST_MIN_DELAY,max:n.REQUEST_MAX_DELAY}),c._fetchDocumentSemanticTokens=c._register(new f.pY((function(){return c._fetchDocumentSemanticTokensNow()}),n.REQUEST_MIN_DELAY)),c._currentDocumentResponse=null,c._currentDocumentRequestCancellationTokenSource=null,c._documentProvidersChangeListeners=[],c._providersChangedDuringRequest=!1,c._register(c._model.onDidChangeContent((function(){c._fetchDocumentSemanticTokens.isScheduled()||c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._register(c._model.onDidChangeAttached((function(){c._fetchDocumentSemanticTokens.isScheduled()||c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._register(c._model.onDidChangeLanguage((function(){c._currentDocumentResponse&&(c._currentDocumentResponse.dispose(),c._currentDocumentResponse=null),c._currentDocumentRequestCancellationTokenSource&&(c._currentDocumentRequestCancellationTokenSource.cancel(),c._currentDocumentRequestCancellationTokenSource=null),c._setDocumentSemanticTokens(null,null,null,[]),c._fetchDocumentSemanticTokens.schedule(0)})));var d=function(){(0,l.B9)(c._documentProvidersChangeListeners),c._documentProvidersChangeListeners=[];var t,n=(0,i.Z)(c._provider.all(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"===typeof r.onDidChange&&c._documentProvidersChangeListeners.push(r.onDidChange((function(){c._currentDocumentRequestCancellationTokenSource?c._providersChangedDuringRequest=!0:c._fetchDocumentSemanticTokens.schedule(0)})))}}catch(o){n.e(o)}finally{n.f()}};return d(),c._register(c._provider.onDidChange((function(){d(),c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._register(a.onDidColorThemeChange((function(e){c._setDocumentSemanticTokens(null,null,null,[]),c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._fetchDocumentSemanticTokens.schedule(0),c}return(0,o.Z)(n,[{key:"dispose",value:function(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,(0,a.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}},{key:"_fetchDocumentSemanticTokensNow",value:function(){var e=this;if(!this._currentDocumentRequestCancellationTokenSource)if((0,m.Jc)(this._provider,this._model)){if(this._model.isAttachedToEditor()){var t=new v.A,n=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=(0,m.ML)(this._provider,this._model,n,i,t.token);this._currentDocumentRequestCancellationTokenSource=t,this._providersChangedDuringRequest=!1;var o=[],a=this._model.onDidChangeContent((function(e){o.push(e)})),s=new y.G(!1);r.then((function(t){if(e._debounceInformation.update(e._model,s.elapsed()),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),t){var n=t.provider,i=t.tokens,r=e._semanticTokensStylingService.getStyling(n);e._setDocumentSemanticTokens(n,i||null,r,o)}else e._setDocumentSemanticTokens(null,null,null,o)}),(function(t){t&&(d.n2(t)||"string"===typeof t.message&&-1!==t.message.indexOf("busy"))||d.dL(t),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),(o.length>0||e._providersChangedDuringRequest)&&(e._fetchDocumentSemanticTokens.isScheduled()||e._fetchDocumentSemanticTokens.schedule(e._debounceInformation.get(e._model)))}))}}else this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1)}},{key:"_setDocumentSemanticTokens",value:function(e,t,r,o){var a=this,s=this._currentDocumentResponse,u=function(){(o.length>0||a._providersChangedDuringRequest)&&!a._fetchDocumentSemanticTokens.isScheduled()&&a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&t&&e.releaseDocumentSemanticTokens(t.resultId);else if(e&&r){if(!t)return this._model.tokenization.setSemanticTokens(null,!0),void u();if((0,m.Vj)(t)){if(!s)return void this._model.tokenization.setSemanticTokens(null,!0);if(0===t.edits.length)t={resultId:t.resultId,data:s.data};else{var c,l=0,d=(0,i.Z)(t.edits);try{for(d.s();!(c=d.n()).done;){var h=c.value;l+=(h.data?h.data.length:0)-h.deleteCount}}catch(I){d.e(I)}finally{d.f()}for(var p=s.data,f=new Uint32Array(p.length+l),v=p.length,g=f.length,b=t.edits.length-1;b>=0;b--){var y=t.edits[b];if(y.start>p.length)return r.warnInvalidEditStart(s.resultId,t.resultId,b,y.start,p.length),void this._model.tokenization.setSemanticTokens(null,!0);var k=v-(y.start+y.deleteCount);k>0&&(n._copy(p,v-k,f,g-k,k),g-=k),y.data&&(n._copy(y.data,0,f,g-y.data.length,y.data.length),g-=y.data.length),v=y.start}v>0&&n._copy(p,0,f,0,v),t={resultId:t.resultId,data:f}}}if((0,m.Vl)(t)){this._currentDocumentResponse=new Z(e,t.resultId,t.data);var C=(0,_.h)(t,r,this._model.getLanguageId());if(o.length>0){var S,x=(0,i.Z)(o);try{for(x.s();!(S=x.n()).done;){var N,R=S.value,w=(0,i.Z)(C);try{for(w.s();!(N=w.n()).done;){var T,E=N.value,P=(0,i.Z)(R.changes);try{for(P.s();!(T=P.n()).done;){var D=T.value;E.applyEdit(D.range,D.text)}}catch(I){P.e(I)}finally{P.f()}}}catch(I){w.e(I)}finally{w.f()}}}catch(I){x.e(I)}finally{x.f()}}this._model.tokenization.setSemanticTokens(C,!0)}else this._model.tokenization.setSemanticTokens(null,!0);u()}else this._model.tokenization.setSemanticTokens(null,!1)}}],[{key:"_copy",value:function(e,t,n,i,r){r=Math.min(r,n.length-i,e.length-t);for(var o=0;o<r;o++)n[i+o]=e[t+o]}}]),n}(l.JT);T.REQUEST_MIN_DELAY=300,T.REQUEST_MAX_DELAY=2e3,T=N([R(1,C.s),R(2,g.XE),R(3,b.A),R(4,k.p)],T);var Z=function(){function e(t,n,i){(0,r.Z)(this,e),this.provider=t,this.resultId=n,this.data=i}return(0,o.Z)(e,[{key:"dispose",value:function(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}]),e}();(0,S.y)(w)},97302:function(e,t,n){n.r(t),n.d(t,{ViewportSemanticTokensContribution:function(){return C}});var i=n(60726),r=n(22951),o=n(91976),a=n(67591),s=n(99616),u=n(37368),c=n(59652),l=n(33344),d=n(89533),h=n(25844),p=n(70117),f=n(53435),v=n(58023),g=n(606),_=n(87794),m=n(90024),b=n(87457),y=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},k=function(e,t){return function(n,i){t(n,i,e)}},C=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,o,a,s,c){var l;(0,r.Z)(this,n),(l=t.call(this))._semanticTokensStylingService=i,l._themeService=o,l._configurationService=a,l._editor=e,l._provider=c.documentRangeSemanticTokensProvider,l._debounceInformation=s.for(l._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),l._tokenizeViewport=l._register(new u.pY((function(){return l._tokenizeViewportNow()}),100)),l._outstandingRequests=[];var d=function(){l._editor.hasModel()&&l._tokenizeViewport.schedule(l._debounceInformation.get(l._editor.getModel()))};return l._register(l._editor.onDidScrollChange((function(){d()}))),l._register(l._editor.onDidChangeModel((function(){l._cancelAll(),d()}))),l._register(l._editor.onDidChangeModelContent((function(e){l._cancelAll(),d()}))),l._register(l._provider.onDidChange((function(){l._cancelAll(),d()}))),l._register(l._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration(h.e)&&(l._cancelAll(),d())}))),l._register(l._themeService.onDidColorThemeChange((function(){l._cancelAll(),d()}))),d(),l}return(0,o.Z)(n,[{key:"_cancelAll",value:function(){var e,t=(0,i.Z)(this._outstandingRequests);try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this._outstandingRequests=[]}},{key:"_removeOutstandingRequest",value:function(e){for(var t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}},{key:"_tokenizeViewportNow",value:function(){var e=this;if(this._editor.hasModel()){var t=this._editor.getModel();if(!t.tokenization.hasCompleteSemanticTokens())if((0,h.t)(t,this._themeService,this._configurationService))if((0,d.KO)(this._provider,t)){var n=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(n.map((function(n){return e._requestRange(t,n)})))}else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1);else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1)}}},{key:"_requestRange",value:function(e,t){var n=this,i=e.getVersionId(),r=(0,u.PG)((function(i){return Promise.resolve((0,d.OG)(n._provider,e,t,i))})),o=new _.G(!1);return r.then((function(r){if(n._debounceInformation.update(e,o.elapsed()),r&&r.tokens&&!e.isDisposed()&&e.getVersionId()===i){var a=r.provider,s=r.tokens,u=n._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,(0,p.h)(s,u,e.getLanguageId()))}})).then((function(){return n._removeOutstandingRequest(r)}),(function(){return n._removeOutstandingRequest(r)})),r}}]),n}(c.JT);C.ID="editor.contrib.viewportSemanticTokens",C=y([k(1,b.s),k(2,v.XE),k(3,f.Ui),k(4,g.A),k(5,m.p)],C),(0,l._K)(C.ID,C,1)},89533:function(e,t,n){n.d(t,{Jc:function(){return y},KO:function(){return N},ML:function(){return C},OG:function(){return w},Vj:function(){return m},Vl:function(){return _}});var i=n(60726),r=n(11092),o=n(91976),a=n(22951),s=n(21706),u=n(33309),c=n(71308),l=n(79412),d=n(39049),h=n(71923),p=n(64543),f=n(55597),v=n(90024),g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function _(e){return e&&!!e.data}function m(e){return e&&Array.isArray(e.edits)}var b=(0,o.Z)((function e(t,n,i){(0,a.Z)(this,e),this.provider=t,this.tokens=n,this.error=i}));function y(e,t){return e.has(t)}function k(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}function C(e,t,n,o,a){return g(this,void 0,void 0,(0,r.Z)().mark((function s(){var u,c,l,d,h,p=this;return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return u=k(e,t),s.next=3,Promise.all(u.map((function(e){return g(p,void 0,void 0,(0,r.Z)().mark((function i(){var s,u;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=null,i.prev=1,i.next=4,e.provideDocumentSemanticTokens(t,e===n?o:null,a);case 4:s=i.sent,i.next=11;break;case 7:i.prev=7,i.t0=i.catch(1),u=i.t0,s=null;case 11:return s&&(_(s)||m(s))||(s=null),i.abrupt("return",new b(e,s,u));case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))})));case 3:c=s.sent,l=(0,i.Z)(c),s.prev=5,l.s();case 7:if((d=l.n()).done){s.next=15;break}if(!(h=d.value).error){s.next=11;break}throw h.error;case 11:if(!h.tokens){s.next=13;break}return s.abrupt("return",h);case 13:s.next=7;break;case 15:s.next=20;break;case 17:s.prev=17,s.t0=s.catch(5),l.e(s.t0);case 20:return s.prev=20,l.f(),s.finish(20);case 23:if(!(c.length>0)){s.next=25;break}return s.abrupt("return",c[0]);case 25:return s.abrupt("return",null);case 26:case"end":return s.stop()}}),s,null,[[5,17,20,23]])})))}function S(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:null}var x=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.provider=t,this.tokens=n}));function N(e,t){return e.has(t)}function R(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}function w(e,t,n,o){return g(this,void 0,void 0,(0,r.Z)().mark((function a(){var s,c,l,d,h,p=this;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=R(e,t),a.next=3,Promise.all(s.map((function(e){return g(p,void 0,void 0,(0,r.Z)().mark((function i(){var a;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.provideDocumentRangeSemanticTokens(t,n,o);case 3:a=i.sent,i.next=10;break;case 6:i.prev=6,i.t0=i.catch(0),(0,u.Cp)(i.t0),a=null;case 10:return a&&_(a)||(a=null),i.abrupt("return",new x(e,a));case 12:case"end":return i.stop()}}),i,null,[[0,6]])})))})));case 3:c=a.sent,l=(0,i.Z)(c),a.prev=5,l.s();case 7:if((d=l.n()).done){a.next=13;break}if(!(h=d.value).tokens){a.next=11;break}return a.abrupt("return",h);case 11:a.next=7;break;case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(5),l.e(a.t0);case 18:return a.prev=18,l.f(),a.finish(18);case 21:if(!(c.length>0)){a.next=23;break}return a.abrupt("return",c[0]);case 23:return a.abrupt("return",null);case 24:case"end":return a.stop()}}),a,null,[[5,15,18,21]])})))}d.P.registerCommand("_provideDocumentSemanticTokensLegend",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return g(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],(0,h.p_)(i instanceof c.o),o=e.get(l.q).getModel(i)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(a=e.get(v.p),s=a.documentSemanticTokensProvider,u=S(s,o)){t.next=9;break}return t.abrupt("return",e.get(d.H).executeCommand("_provideDocumentRangeSemanticTokensLegend",i));case 9:return t.abrupt("return",u[0].getLegend());case 10:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentSemanticTokens",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return g(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,u,f,g,m,b;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],(0,h.p_)(i instanceof c.o),o=e.get(l.q).getModel(i)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(a=e.get(v.p),y(u=a.documentSemanticTokensProvider,o)){t.next=8;break}return t.abrupt("return",e.get(d.H).executeCommand("_provideDocumentRangeSemanticTokens",i,o.getFullModelRange()));case 8:return t.next=10,C(u,o,null,null,s.T.None);case 10:if(f=t.sent){t.next=13;break}return t.abrupt("return",void 0);case 13:if(g=f.provider,(m=f.tokens)&&_(m)){t.next=16;break}return t.abrupt("return",void 0);case 16:return b=(0,p.C)({id:0,type:"full",data:m.data}),m.resultId&&g.releaseDocumentSemanticTokens(m.resultId),t.abrupt("return",b);case 19:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentRangeSemanticTokensLegend",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return g(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,u,d,p,g;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],o=n[1],(0,h.p_)(i instanceof c.o),a=e.get(l.q).getModel(i)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(u=e.get(v.p),d=u.documentRangeSemanticTokensProvider,0!==(p=R(d,a)).length){t.next=9;break}return t.abrupt("return",void 0);case 9:if(1!==p.length){t.next=11;break}return t.abrupt("return",p[0].getLegend());case 11:if(o&&f.e.isIRange(o)){t.next=14;break}return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),t.abrupt("return",p[0].getLegend());case 14:return t.next=16,w(d,a,f.e.lift(o),s.T.None);case 16:if(g=t.sent){t.next=19;break}return t.abrupt("return",void 0);case 19:return t.abrupt("return",g.provider.getLegend());case 20:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentRangeSemanticTokens",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return g(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var i,o,a,u,d,g;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n[0],o=n[1],(0,h.p_)(i instanceof c.o),(0,h.p_)(f.e.isIRange(o)),a=e.get(l.q).getModel(i)){t.next=6;break}return t.abrupt("return",void 0);case 6:return u=e.get(v.p),d=u.documentRangeSemanticTokensProvider,t.next=9,w(d,a,f.e.lift(o),s.T.None);case 9:if((g=t.sent)&&g.tokens){t.next=12;break}return t.abrupt("return",void 0);case 12:return t.abrupt("return",(0,p.C)({id:0,type:"full",data:g.tokens.data}));case 13:case"end":return t.stop()}}),t)})))}))},25844:function(e,t,n){n.d(t,{e:function(){return i},t:function(){return r}});var i="editor.semanticHighlighting";function r(e,t,n){var r,o=null===(r=n.getValue(i,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===r?void 0:r.enabled;return"boolean"===typeof o?o:t.getColorTheme().semanticHighlighting}},57112:function(e,t,n){n.d(t,{x:function(){return d}});var i=n(11092),r=n(60726),o=n(22951),a=n(91976),s=n(91358),u=n(99924),c=n(55597),l=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},d=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,[{key:"provideSelectionRanges",value:function(t,n){return l(this,void 0,void 0,(0,i.Z)().mark((function o(){var a,s,u,c;return(0,i.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=[],s=(0,r.Z)(n),o.prev=2,c=(0,i.Z)().mark((function n(){var r,o,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=u.value,o=[],a.push(o),s=new Map,n.next=6,new Promise((function(n){return e._bracketsRightYield(n,0,t,r,s)}));case 6:return n.next=8,new Promise((function(n){return e._bracketsLeftYield(n,0,t,r,s,o)}));case 8:case"end":return n.stop()}}),n)})),s.s();case 5:if((u=s.n()).done){o.next=9;break}return o.delegateYield(c(),"t0",7);case 7:o.next=5;break;case 9:o.next=14;break;case 11:o.prev=11,o.t1=o.catch(2),s.e(o.t1);case 14:return o.prev=14,s.f(),o.finish(14);case 17:return o.abrupt("return",a);case 18:case"end":return o.stop()}}),o,null,[[2,11,14,17]])})))}}],[{key:"_bracketsRightYield",value:function(t,n,i,r,o){for(var a=new Map,u=Date.now();;){if(n>=e._maxRounds){t();break}if(!r){t();break}var c=i.bracketPairs.findNextBracket(r);if(!c){t();break}if(Date.now()-u>e._maxDuration){setTimeout((function(){return e._bracketsRightYield(t,n+1,i,r,o)}));break}if(c.bracketInfo.isOpeningBracket){var l=c.bracketInfo.bracketText,d=a.has(l)?a.get(l):0;a.set(l,d+1)}else{var h=c.bracketInfo.getOpeningBrackets()[0].bracketText,p=a.has(h)?a.get(h):0;if(p-=1,a.set(h,Math.max(0,p)),p<0){var f=o.get(h);f||(f=new s.S,o.set(h,f)),f.push(c.range)}}r=c.range.getEndPosition()}}},{key:"_bracketsLeftYield",value:function(t,n,i,r,o,a){for(var s=new Map,u=Date.now();;){if(n>=e._maxRounds&&0===o.size){t();break}if(!r){t();break}var l=i.bracketPairs.findPrevBracket(r);if(!l){t();break}if(Date.now()-u>e._maxDuration){setTimeout((function(){return e._bracketsLeftYield(t,n+1,i,r,o,a)}));break}if(l.bracketInfo.isOpeningBracket){var d=l.bracketInfo.bracketText,h=s.has(d)?s.get(d):0;if(h-=1,s.set(d,Math.max(0,h)),h<0){var p=o.get(d);if(p){var f=p.shift();0===p.size&&o.delete(d);var v=c.e.fromPositions(l.range.getEndPosition(),f.getStartPosition()),g=c.e.fromPositions(l.range.getStartPosition(),f.getEndPosition());a.push({range:v}),a.push({range:g}),e._addBracketLeading(i,g,a)}}}else{var _=l.bracketInfo.getOpeningBrackets()[0].bracketText,m=s.has(_)?s.get(_):0;s.set(_,m+1)}r=l.range.getStartPosition()}}},{key:"_addBracketLeading",value:function(e,t,n){if(t.startLineNumber!==t.endLineNumber){var i=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(i);0!==r&&r!==t.startColumn&&(n.push({range:c.e.fromPositions(new u.L(i,r),t.getEndPosition())}),n.push({range:c.e.fromPositions(new u.L(i,1),t.getEndPosition())}));var o=i-1;if(o>0){var a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:c.e.fromPositions(new u.L(o,a),t.getEndPosition())}),n.push({range:c.e.fromPositions(new u.L(o,1),t.getEndPosition())}))}}}}]),e}();d._maxDuration=30,d._maxRounds=2},59588:function(e,t,n){n.r(t),n.d(t,{SmartSelectController:function(){return P},provideSelectionRanges:function(){return M}});var i=n(60726),r=n(67591),o=n(99616),a=n(11092),s=n(22951),u=n(91976),c=n(88648),l=n(21706),d=n(33309),h=n(33344),p=n(99924),f=n(55597),v=n(80253),g=n(90567),_=n(57112),m=n(17224),b=function(){function e(){(0,s.Z)(this,e)}return(0,u.Z)(e,[{key:"provideSelectionRanges",value:function(e,t){var n,r=[],o=(0,i.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=[];r.push(s),this._addInWordRanges(s,e,a),this._addWordRanges(s,e,a),this._addWhitespaceLine(s,e,a),s.push({range:e.getFullModelRange()})}}catch(u){o.e(u)}finally{o.f()}return r}},{key:"_addInWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);if(i){for(var r=i.word,o=i.startColumn,a=n.column-o,s=a,u=a,c=0;s>=0;s--){var l=r.charCodeAt(s);if(s!==a&&(95===l||45===l))break;if((0,m.mK)(l)&&(0,m.df)(c))break;c=l}for(s+=1;u<r.length;u++){var d=r.charCodeAt(u);if((0,m.df)(d)&&(0,m.mK)(c))break;if(95===d||45===d)break;c=d}s<u&&e.push({range:new f.e(n.lineNumber,o+s,n.lineNumber,o+u)})}}},{key:"_addWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);i&&e.push({range:new f.e(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}},{key:"_addWhitespaceLine",value:function(e,t,n){t.getLineLength(n.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(n.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(n.lineNumber)&&e.push({range:new f.e(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}]),e}(),y=n(26511),k=n(41377),C=n(39049),S=n(90024),x=n(60065),N=n(71923),R=n(71308),w=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},T=function(e,t){return function(n,i){t(n,i,e)}},Z=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},E=function(){function e(t,n){(0,s.Z)(this,e),this.index=t,this.ranges=n}return(0,u.Z)(e,[{key:"mov",value:function(t){var n=this.index+(t?1:-1);if(n<0||n>=this.ranges.length)return this;var i=new e(n,this.ranges);return i.ranges[n].equalsRange(this.ranges[this.index])?i.mov(t):i}}]),e}(),P=function(){function e(t,n){(0,s.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._ignoreSelection=!1}return(0,u.Z)(e,[{key:"dispose",value:function(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}},{key:"run",value:function(e){return Z(this,void 0,void 0,(0,a.Z)().mark((function t(){var n,i,r,o=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=2;break}return t.abrupt("return");case 2:if(n=this._editor.getSelections(),i=this._editor.getModel(),this._state){t.next=7;break}return t.next=7,M(this._languageFeaturesService.selectionRangeProvider,i,n.map((function(e){return e.getPosition()})),this._editor.getOption(109),l.T.None).then((function(e){var t;if(c.Of(e)&&e.length===n.length&&o._editor.hasModel()&&c.fS(o._editor.getSelections(),n,(function(e,t){return e.equalsSelection(t)}))){for(var i=function(t){e[t]=e[t].filter((function(e){return e.containsPosition(n[t].getStartPosition())&&e.containsPosition(n[t].getEndPosition())})),e[t].unshift(n[t])},r=0;r<e.length;r++)i(r);o._state=e.map((function(e){return new E(0,e)})),null===(t=o._selectionListener)||void 0===t||t.dispose(),o._selectionListener=o._editor.onDidChangeCursorPosition((function(){var e;o._ignoreSelection||(null===(e=o._selectionListener)||void 0===e||e.dispose(),o._state=void 0)}))}}));case 7:if(this._state){t.next=9;break}return t.abrupt("return");case 9:this._state=this._state.map((function(t){return t.mov(e)})),r=this._state.map((function(e){return v.Y.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())})),this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}case 13:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();P.ID="editor.contrib.smartSelectController",P=w([T(1,S.p)],P);var D=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e,i){var r;return(0,s.Z)(this,n),(r=t.call(this,i))._forward=e,r}return(0,u.Z)(n,[{key:"run",value:function(e,t){return Z(this,void 0,void 0,(0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=P.get(t))){e.next=4;break}return e.next=4,n.run(this._forward);case 4:case"end":return e.stop()}}),e,this)})))}}]),n}(h.R6),I=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,!0,{id:"editor.action.smartSelect.expand",label:y.NC("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:k.eH.MenubarSelectionMenu,group:"1_basic",title:y.NC({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}return(0,u.Z)(n)}(D);C.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var L=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,!1,{id:"editor.action.smartSelect.shrink",label:y.NC("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:k.eH.MenubarSelectionMenu,group:"1_basic",title:y.NC({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}return(0,u.Z)(n)}(D);function M(e,t,n,r,o){return Z(this,void 0,void 0,(0,a.Z)().mark((function s(){var u,l,h,v,g,m;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:1===(u=e.all(t).concat(new b)).length&&u.unshift(new _.x),l=[],h=[],v=(0,i.Z)(u);try{for(v.s();!(g=v.n()).done;)m=g.value,l.push(Promise.resolve(m.provideSelectionRanges(t,n,o)).then((function(e){if(c.Of(e)&&e.length===n.length)for(var t=0;t<n.length;t++){h[t]||(h[t]=[]);var r,o=(0,i.Z)(e[t]);try{for(o.s();!(r=o.n()).done;){var a=r.value;f.e.isIRange(a.range)&&f.e.containsPosition(a.range,n[t])&&h[t].push(f.e.lift(a.range))}}catch(s){o.e(s)}finally{o.f()}}}),d.Cp))}catch(s){v.e(s)}finally{v.f()}return a.next=8,Promise.all(l);case 8:return a.abrupt("return",h.map((function(e){if(0===e.length)return[];e.sort((function(e,t){return p.L.isBefore(e.getStartPosition(),t.getStartPosition())?1:p.L.isBefore(t.getStartPosition(),e.getStartPosition())||p.L.isBefore(e.getEndPosition(),t.getEndPosition())?-1:p.L.isBefore(t.getEndPosition(),e.getEndPosition())?1:0}));var n,o,a=[],u=(0,i.Z)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;(!n||f.e.containsRange(c,n)&&!f.e.equalsRange(c,n))&&(a.push(c),n=c)}}catch(s){u.e(s)}finally{u.f()}if(!r.selectLeadingAndTrailingWhitespace)return a;for(var l=[a[0]],d=1;d<a.length;d++){var h=a[d-1],v=a[d];if(v.startLineNumber!==h.startLineNumber||v.endLineNumber!==h.endLineNumber){var g=new f.e(h.startLineNumber,t.getLineFirstNonWhitespaceColumn(h.startLineNumber),h.endLineNumber,t.getLineLastNonWhitespaceColumn(h.endLineNumber));g.containsRange(h)&&!g.equalsRange(h)&&v.containsRange(g)&&!v.equalsRange(g)&&l.push(g);var _=new f.e(h.startLineNumber,1,h.endLineNumber,t.getLineMaxColumn(h.endLineNumber));_.containsRange(h)&&!_.equalsRange(g)&&v.containsRange(_)&&!v.equalsRange(_)&&l.push(_)}l.push(v)}return l})));case 9:case"end":return a.stop()}}),s)})))}(0,h._K)(P.ID,P,4),(0,h.Qr)(I),(0,h.Qr)(L),C.P.registerCommand("_executeSelectionRangeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Z(this,void 0,void 0,(0,a.Z)().mark((function t(){var i,r,o,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],(0,N.p_)(R.o.isUri(i)),o=e.get(S.p).selectionRangeProvider,t.next=5,e.get(x.S).createModelReference(i);case 5:return s=t.sent,t.prev=6,t.abrupt("return",M(o,s.object.textEditorModel,r,{selectLeadingAndTrailingWhitespace:!0},l.T.None));case 8:return t.prev=8,s.dispose(),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[6,,8,11]])})))}))},55309:function(e,t,n){n.r(t),n.d(t,{SnippetController2:function(){return y}});var i=n(22951),r=n(91976),o=n(59652),a=n(71923),s=n(33344),u=n(99924),c=n(90567),l=n(41598),d=n(90024),h=n(64008),p=n(26511),f=n(10071),v=n(93442),g=n(63821),_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},m=function(e,t){return function(n,i){t(n,i,e)}},b={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},y=function(){function e(t,n,r,a,s){(0,i.Z)(this,e),this._editor=t,this._logService=n,this._languageFeaturesService=r,this._languageConfigurationService=s,this._snippetListener=new o.SL,this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(a),this._hasNextTabstop=e.HasNextTabstop.bindTo(a),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(a)}return(0,r.Z)(e,[{key:"dispose",value:function(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}},{key:"insert",value:function(e,t){try{this._doInsert(e,"undefined"===typeof t?b:Object.assign(Object.assign({},b),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}},{key:"_doInsert",value:function(e,t){var n,i=this;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&"string"!==typeof e&&this.cancel(),this._session?((0,a.p_)("string"===typeof e),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new g.l(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),null===(n=this._session)||void 0===n?void 0:n.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:function(e,t){if(i._session&&e===i._editor.getModel()&&u.L.equals(i._editor.getPosition(),t)){var n=i._session.activeChoice;if(n&&0!==n.choice.options.length){for(var r=e.getValueInRange(n.range),o=Boolean(n.choice.options.find((function(e){return e.value===r}))),a=[],s=0;s<n.choice.options.length;s++){var c=n.choice.options[s];a.push({kind:13,label:c.value,insertText:c.value,sortText:"a".repeat(s+1),range:n.range,filterText:o?"".concat(r,"_").concat(c.value):void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,p.NC)("next","Go to next placeholder...")}})}return{suggestions:a}}}}};var r=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme,exclusive:!0},this._choiceCompletionItemProvider);this._snippetListener.add(r)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((function(e){return e.isFlush&&i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeModel((function(){return i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((function(){return i._updateState()})))}}},{key:"_updateState",value:function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}},{key:"_handleChoice",value:function(){var e=this;if(this._session&&this._editor.hasModel()){var t=this._session.activeChoice;t&&this._choiceCompletionItemProvider?this._currentChoice!==t.choice&&(this._currentChoice=t.choice,queueMicrotask((function(){(0,h.i5)(e._editor,e._choiceCompletionItemProvider)}))):this._currentChoice=void 0}else this._currentChoice=void 0}},{key:"finish",value:function(){for(;this._inSnippet.get();)this.next()}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,null===(e=this._session)||void 0===e||e.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])}},{key:"prev",value:function(){var e;null===(e=this._session)||void 0===e||e.prev(),this._updateState()}},{key:"next",value:function(){var e;null===(e=this._session)||void 0===e||e.next(),this._updateState()}},{key:"isInSnippet",value:function(){return Boolean(this._inSnippet.get())}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();y.ID="snippetController2",y.InSnippetMode=new f.uy("inSnippetMode",!1,(0,p.NC)("inSnippetMode","Whether the editor in current in snippet mode")),y.HasNextTabstop=new f.uy("hasNextTabstop",!1,(0,p.NC)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),y.HasPrevTabstop=new f.uy("hasPrevTabstop",!1,(0,p.NC)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),y=_([m(1,v.VZ),m(2,d.p),m(3,f.i6),m(4,l.c_)],y),(0,s._K)(y.ID,y,4);var k=s._l.bindToContribution(y.get);(0,s.fK)(new k({id:"jumpToNextSnippetPlaceholder",precondition:f.Ao.and(y.InSnippetMode,y.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:2}})),(0,s.fK)(new k({id:"jumpToPrevSnippetPlaceholder",precondition:f.Ao.and(y.InSnippetMode,y.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:1026}})),(0,s.fK)(new k({id:"leaveSnippet",precondition:y.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,s.fK)(new k({id:"acceptSnippet",precondition:y.InSnippetMode,handler:function(e){return e.finish()}}))},45033:function(e,t,n){n.d(t,{Lv:function(){return m},Vm:function(){return _},Yj:function(){return x},xv:function(){return v},y1:function(){return S}});var i,r=n(43243),o=n(27597),a=n(67591),s=n(99616),u=n(60726),c=n(649),l=n(64649),d=n(22951),h=n(91976),p=function(){function e(){(0,d.Z)(this,e),this.value="",this.pos=0}return(0,h.Z)(e,[{key:"text",value:function(e){this.value=e,this.pos=0}},{key:"tokenText",value:function(e){return this.value.substr(e.pos,e.len)}},{key:"next",value:function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,i=0,r=this.value.charCodeAt(n);if("number"===typeof(t=e._table[r]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(r)){t=8;do{i+=1,r=this.value.charCodeAt(n+i)}while(e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}if(e.isVariableCharacter(r)){t=9;do{r=this.value.charCodeAt(n+ ++i)}while(e.isVariableCharacter(r)||e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}t=10;do{i+=1,r=this.value.charCodeAt(n+i)}while(!isNaN(r)&&"undefined"===typeof e._table[r]&&!e.isDigitCharacter(r)&&!e.isVariableCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}}],[{key:"isDigitCharacter",value:function(e){return e>=48&&e<=57}},{key:"isVariableCharacter",value:function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}}]),e}();p._table=(i={},(0,l.Z)(i,36,0),(0,l.Z)(i,58,1),(0,l.Z)(i,44,2),(0,l.Z)(i,123,3),(0,l.Z)(i,125,4),(0,l.Z)(i,92,5),(0,l.Z)(i,47,6),(0,l.Z)(i,124,7),(0,l.Z)(i,43,11),(0,l.Z)(i,45,12),(0,l.Z)(i,63,13),i);var f=function(){function e(){(0,d.Z)(this,e),this._children=[]}return(0,h.Z)(e,[{key:"appendChild",value:function(e){return e instanceof v&&this._children[this._children.length-1]instanceof v?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}},{key:"replace",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.slice(0);r.splice.apply(r,[i,1].concat((0,c.Z)(t))),n._children=r,function e(t,n){var i,r=(0,u.Z)(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.parent=n,e(o.children,o)}}catch(a){r.e(a)}finally{r.f()}}(t,n)}},{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof S)return e;e=e.parent}}},{key:"toString",value:function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")}},{key:"len",value:function(){return 0}}]),e}(),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,d.Z)(this,n),(i=t.call(this)).value=e,i}return(0,h.Z)(n,[{key:"toString",value:function(){return this.value}},{key:"len",value:function(){return this.value.length}},{key:"clone",value:function(){return new n(this.value)}}]),n}(f),g=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(f),_=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,d.Z)(this,n),(i=t.call(this)).index=e,i}return(0,h.Z)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof m?this._children[0]:void 0}},{key:"clone",value:function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}],[{key:"compareByIndex",value:function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}}]),n}(g),m=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,d.Z)(this,n),(e=t.apply(this,arguments)).options=[],e}return(0,h.Z)(n,[{key:"appendChild",value:function(e){return e instanceof v&&(e.parent=this,this.options.push(e)),this}},{key:"toString",value:function(){return this.options[0].value}},{key:"len",value:function(){return this.options[0].len()}},{key:"clone",value:function(){var e=new n;return this.options.forEach(e.appendChild,e),e}}]),n}(f),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,d.Z)(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}return(0,h.Z)(n,[{key:"resolve",value:function(e){var t=this,n=!1,i=e.replace(this.regexp,(function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!n&&this._children.some((function(e){return e instanceof y&&Boolean(e.elseValue)}))&&(i=this._replace([])),i}},{key:"_replace",value:function(e){var t,n="",i=(0,u.Z)(this._children);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r instanceof y){var o=e[r.index]||"";n+=o=r.resolve(o)}else n+=r.toString()}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"toString",value:function(){return""}},{key:"clone",value:function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e}}]),n}(f),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,r,o){var a;return(0,d.Z)(this,n),(a=t.call(this)).index=e,a.shorthandName=i,a.ifValue=r,a.elseValue=o,a}return(0,h.Z)(n,[{key:"resolve",value:function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:Boolean(e)||"string"!==typeof this.elseValue?e||"":this.elseValue}},{key:"_toPascalCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"_toCamelCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"clone",value:function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)}}]),n}(f),k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,d.Z)(this,n),(i=t.call(this)).name=e,i}return(0,h.Z)(n,[{key:"resolve",value:function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new v(t)],!0)}},{key:"clone",value:function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}]),n}(g);function C(e,t){for(var n=(0,c.Z)(e);n.length>0;){var i=n.shift();if(!t(i))break;n.unshift.apply(n,(0,c.Z)(i.children))}}var S=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return n instanceof _&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}},{key:"offset",value:function(e){var t=0,n=!1;return this.walk((function(i){return i===e?(n=!0,!1):(t+=i.len(),!0)})),n?t:-1}},{key:"fullLen",value:function(e){var t=0;return C([e],(function(e){return t+=e.len(),!0})),t}},{key:"enclosingPlaceholders",value:function(e){for(var t=[],n=e.parent;n;)n instanceof _&&t.push(n),n=n.parent;return t}},{key:"resolveVariables",value:function(e){var t=this;return this.walk((function(n){return n instanceof k&&n.resolve(e)&&(t._placeholders=void 0),!0})),this}},{key:"appendChild",value:function(e){return this._placeholders=void 0,(0,r.Z)((0,o.Z)(n.prototype),"appendChild",this).call(this,e)}},{key:"replace",value:function(e,t){return this._placeholders=void 0,(0,r.Z)((0,o.Z)(n.prototype),"replace",this).call(this,e,t)}},{key:"clone",value:function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e}},{key:"walk",value:function(e){C(this.children,e)}}]),n}(f),x=function(){function e(){(0,d.Z)(this,e),this._scanner=new p,this._token={type:14,pos:0,len:0}}return(0,h.Z)(e,[{key:"parse",value:function(e,t,n){var i=new S;return this.parseFragment(e,i),this.ensureFinalTabstop(i,null!==n&&void 0!==n&&n,null!==t&&void 0!==t&&t),i}},{key:"parseFragment",value:function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var i=new Map,r=[];t.walk((function(e){return e instanceof _&&(e.isFinalTabstop?i.set(0,void 0):!i.has(e.index)&&e.children.length>0?i.set(e.index,e.children):r.push(e)),!0}));for(var o=function e(n,r){var o=i.get(n.index);if(o){var a=new _(n.index);a.transform=n.transform;var s,c=(0,u.Z)(o);try{for(c.s();!(s=c.n()).done;){var l=s.value.clone();a.appendChild(l),l instanceof _&&i.has(l.index)&&!r.has(l.index)&&(r.add(l.index),e(l,r),r.delete(l.index))}}catch(d){c.e(d)}finally{c.f()}t.replace(n,[a])}},a=new Set,s=0,c=r;s<c.length;s++){o(c[s],a)}return t.children.slice(n)}},{key:"ensureFinalTabstop",value:function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new _(0)))}},{key:"_accept",value:function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1}},{key:"_backTo",value:function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}},{key:"_until",value:function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}},{key:"_parse",value:function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}},{key:"_parseEscaped",value:function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new v(t)),!0)}},{key:"_parseTabstopOrVariableName",value:function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new _(Number(t)):new k(t)),!0):this._backTo(n)}},{key:"_parseComplexPlaceholder",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var i=new _(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new v("${"+t+":")),i.children.forEach(e.appendChild,e),!0}else{if(!(i.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(var r=new m;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(i.appendChild(r),this._accept(4)))return e.appendChild(i),!0}return this._backTo(n),!1}}}},{key:"_parseChoiceElement",value:function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var i=void 0;if(!(i=(i=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(i)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new v(n.join(""))),!0)}},{key:"_parseComplexVariable",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var i=new k(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new v("${"+t+":")),i.children.forEach(e.appendChild,e),!0}}},{key:"_parseTransform",value:function(e){for(var t=new b,n="",i="";!this._accept(6);){var r=void 0;if(r=this._accept(5,!0))n+=r=this._accept(6,!0)||r;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new v(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,i)}catch(a){return!1}return e.transform=t,!0}},{key:"_parseFormatString",value:function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var i=this._accept(8,!0);if(!i)return this._backTo(t),!1;if(!n)return e.appendChild(new y(Number(i))),!0;if(this._accept(4))return e.appendChild(new y(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var r=this._accept(9,!0);return r&&this._accept(4)?(e.appendChild(new y(Number(i),r)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new y(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new y(Number(i),void 0,void 0,a)),!0}else if(this._accept(13)){var s=this._until(1);if(s){var u=this._until(4);if(u)return e.appendChild(new y(Number(i),void 0,s,u)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new y(Number(i),void 0,void 0,c)),!0}return this._backTo(t),!1}},{key:"_parseAnything",value:function(e){return 14!==this._token.type&&(e.appendChild(new v(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}},{key:"guessNeedsClipboard",value:function(e){return/\${?CLIPBOARD/.test(e)}}]),e}()},63821:function(e,t,n){n.d(t,{l:function(){return F}});var i=n(11026),r=n(60726),o=n(649),a=n(22951),s=n(91976),u=n(88648),c=n(59652),l=n(17224),d=n(95354),h=n(55597),p=n(80253),f=n(41598),v=n(13101),g=n(93915),_=n(89483),m=n(45033),b=n(8635),y=n(51070),k=n(63670),C=n(95873),S=n(26511),x=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},N=function(e,t){return function(n,i){t(n,i,e)}},R=(Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0}),function(){function e(t){(0,a.Z)(this,e),this._delegates=t}return(0,s.Z)(e,[{key:"resolve",value:function(e){var t,n=(0,r.Z)(this._delegates);try{for(n.s();!(t=n.n()).done;){var i=t.value.resolve(e);if(void 0!==i)return i}}catch(o){n.e(o)}finally{n.f()}}}]),e}()),w=function(){function e(t,n,i,r){(0,a.Z)(this,e),this._model=t,this._selection=n,this._selectionIdx=i,this._overtypingCapturer=r}return(0,s.Z)(e,[{key:"resolve",value:function(e){var t=e.name;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){var n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){var r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,i=r.multiline)}if(n&&i&&e.snippet){var o=this._model.getLineContent(this._selection.startLineNumber),a=(0,l.V8)(o,0,this._selection.startColumn-1),s=a;e.snippet.walk((function(t){return t!==e&&(t instanceof m.xv&&(s=(0,l.V8)((0,l.uq)(t.value).pop())),!0)}));var u=(0,l.Mh)(s,a);n=n.replace(/(\r\n|\r|\n)(.*)/g,(function(e,t,n){return"".concat(t).concat(s.substr(u)).concat(n)}))}return n}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){var c=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return c&&c.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):"CURSOR_INDEX"===t?String(this._selectionIdx):"CURSOR_NUMBER"===t?String(this._selectionIdx+1):void 0}}]),e}(),T=function(){function e(t,n){(0,a.Z)(this,e),this._labelService=t,this._model=n}return(0,s.Z)(e,[{key:"resolve",value:function(e){var t=e.name;if("TM_FILENAME"===t)return y.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){var n=y.EZ(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}return"TM_DIRECTORY"===t?"."===y.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,k.XX)(this._model.uri)):"TM_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}]),e}(),Z=function(){function e(t,n,i,r){(0,a.Z)(this,e),this._readClipboardText=t,this._selectionIdx=n,this._selectionCount=i,this._spread=r}return(0,s.Z)(e,[{key:"resolve",value:function(e){if("CLIPBOARD"===e.name){var t=this._readClipboardText();if(t){if(this._spread){var n=t.split(/\r\n|\n|\r/).filter((function(e){return!(0,l.m5)(e)}));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}}]),e}(),E=function(){function e(t,n,i){(0,a.Z)(this,e),this._model=t,this._selection=n,this._languageConfigurationService=i}return(0,s.Z)(e,[{key:"resolve",value:function(e){var t=e.name,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i)return"LINE_COMMENT"===t?i.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?i.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&i.blockCommentEndToken||void 0}}]),e}();E=x([N(2,f.c_)],E);var P=function(){function e(){(0,a.Z)(this,e),this._date=new Date}return(0,s.Z)(e,[{key:"resolve",value:function(t){var n=t.name;if("CURRENT_YEAR"===n)return String(this._date.getFullYear());if("CURRENT_YEAR_SHORT"===n)return String(this._date.getFullYear()).slice(-2);if("CURRENT_MONTH"===n)return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if("CURRENT_DATE"===n)return String(this._date.getDate().valueOf()).padStart(2,"0");if("CURRENT_HOUR"===n)return String(this._date.getHours().valueOf()).padStart(2,"0");if("CURRENT_MINUTE"===n)return String(this._date.getMinutes().valueOf()).padStart(2,"0");if("CURRENT_SECOND"===n)return String(this._date.getSeconds().valueOf()).padStart(2,"0");if("CURRENT_DAY_NAME"===n)return e.dayNames[this._date.getDay()];if("CURRENT_DAY_NAME_SHORT"===n)return e.dayNamesShort[this._date.getDay()];if("CURRENT_MONTH_NAME"===n)return e.monthNames[this._date.getMonth()];if("CURRENT_MONTH_NAME_SHORT"===n)return e.monthNamesShort[this._date.getMonth()];if("CURRENT_SECONDS_UNIX"===n)return String(Math.floor(this._date.getTime()/1e3));if("CURRENT_TIMEZONE_OFFSET"===n){var i=this._date.getTimezoneOffset(),r=i>0?"-":"+",o=Math.trunc(Math.abs(i/60)),a=o<10?"0"+o:o,s=Math.abs(i)-60*o;return r+a+":"+(s<10?"0"+s:s)}}}]),e}();P.dayNames=[S.NC("Sunday","Sunday"),S.NC("Monday","Monday"),S.NC("Tuesday","Tuesday"),S.NC("Wednesday","Wednesday"),S.NC("Thursday","Thursday"),S.NC("Friday","Friday"),S.NC("Saturday","Saturday")],P.dayNamesShort=[S.NC("SundayShort","Sun"),S.NC("MondayShort","Mon"),S.NC("TuesdayShort","Tue"),S.NC("WednesdayShort","Wed"),S.NC("ThursdayShort","Thu"),S.NC("FridayShort","Fri"),S.NC("SaturdayShort","Sat")],P.monthNames=[S.NC("January","January"),S.NC("February","February"),S.NC("March","March"),S.NC("April","April"),S.NC("May","May"),S.NC("June","June"),S.NC("July","July"),S.NC("August","August"),S.NC("September","September"),S.NC("October","October"),S.NC("November","November"),S.NC("December","December")],P.monthNamesShort=[S.NC("JanuaryShort","Jan"),S.NC("FebruaryShort","Feb"),S.NC("MarchShort","Mar"),S.NC("AprilShort","Apr"),S.NC("MayShort","May"),S.NC("JuneShort","Jun"),S.NC("JulyShort","Jul"),S.NC("AugustShort","Aug"),S.NC("SeptemberShort","Sep"),S.NC("OctoberShort","Oct"),S.NC("NovemberShort","Nov"),S.NC("DecemberShort","Dec")];var D=function(){function e(t){(0,a.Z)(this,e),this._workspaceService=t}return(0,s.Z)(e,[{key:"resolve",value:function(e){if(this._workspaceService){var t=(0,_.uT)(this._workspaceService.getWorkspace());if(!(0,_.c$)(t))return"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0}}},{key:"_resolveWorkspaceName",value:function(e){if((0,_.eb)(e))return y.EZ(e.uri.path);var t=y.EZ(e.configPath.path);return t.endsWith(_.A6)&&(t=t.substr(0,t.length-_.A6.length-1)),t}},{key:"_resoveWorkspacePath",value:function(e){if((0,_.eb)(e))return(0,b.D)(e.uri.fsPath);var t=y.EZ(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?(0,b.D)(n):"/"}}]),e}(),I=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"resolve",value:function(e){var t=e.name;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?(0,C.R)():void 0}}]),e}(),L=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},M=function(e,t){return function(n,i){t(n,i,e)}},A=function(){function e(t,n,i){(0,a.Z)(this,e),this._editor=t,this._snippet=n,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,u.vM)(n.placeholders,m.Vm.compareByIndex),this._placeholderGroupsIdx=-1}return(0,s.Z)(e,[{key:"initialize",value:function(e){this._offset=e.newPosition}},{key:"dispose",value:function(){this._placeholderDecorations&&this._editor.removeDecorations((0,o.Z)(this._placeholderDecorations.values())),this._placeholderGroups.length=0}},{key:"_initDecorations",value:function(){var t=this;if(-1===this._offset)throw new Error("Snippet not initialized!");if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var n=this._editor.getModel();this._editor.changeDecorations((function(i){var o,a=(0,r.Z)(t._snippet.placeholders);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=t._snippet.offset(s),c=t._snippet.fullLen(s),l=h.e.fromPositions(n.getPositionAt(t._offset+u),n.getPositionAt(t._offset+u+c)),d=s.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,p=i.addDecoration(l,d);t._placeholderDecorations.set(s,p)}}catch(f){a.e(f)}finally{a.f()}}))}}},{key:"move",value:function(t){var n=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){var o,a=[],s=(0,r.Z)(this._placeholderGroups[this._placeholderGroupsIdx]);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.transform){for(var c=this._placeholderDecorations.get(u),l=this._editor.getModel().getDecorationRange(c),h=this._editor.getModel().getValueInRange(l),f=u.transform.resolve(h).split(/\r\n|\r|\n/),v=1;v<f.length;v++)f[v]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+f[v]);a.push(d.h.replace(l,f.join(this._editor.getModel().getEOL())))}}}catch(m){s.e(m)}finally{s.f()}a.length>0&&this._editor.executeEdits("snippet.placeholderTransform",a)}var g=!1;!0===t&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,g=!0):!1===t&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,g=!0);var _=this._editor.getModel().changeDecorations((function(t){var o,a=new Set,s=[],u=(0,r.Z)(n._placeholderGroups[n._placeholderGroupsIdx]);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=n._placeholderDecorations.get(c),d=n._editor.getModel().getDecorationRange(l);s.push(new p.Y(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),g=g&&n._hasPlaceholderBeenCollapsed(c),t.changeDecorationOptions(l,c.isFinalTabstop?e._decor.activeFinal:e._decor.active),a.add(c);var h,f=(0,r.Z)(n._snippet.enclosingPlaceholders(c));try{for(f.s();!(h=f.n()).done;){var v=h.value,_=n._placeholderDecorations.get(v);t.changeDecorationOptions(_,v.isFinalTabstop?e._decor.activeFinal:e._decor.active),a.add(v)}}catch(m){f.e(m)}finally{f.f()}}}catch(m){u.e(m)}finally{u.f()}var b,y=(0,r.Z)(n._placeholderDecorations);try{for(y.s();!(b=y.n()).done;){var k=(0,i.Z)(b.value,2),C=k[0],S=k[1];a.has(C)||t.changeDecorationOptions(S,C.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive)}}catch(m){y.e(m)}finally{y.f()}return s}));return g?this.move(t):null!==_&&void 0!==_?_:[]}},{key:"_hasPlaceholderBeenCollapsed",value:function(e){for(var t=e;t;){if(t instanceof m.Vm){var n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}},{key:"isAtFirstPlaceholder",get:function(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}},{key:"isAtLastPlaceholder",get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}},{key:"hasPlaceholder",get:function(){return this._snippet.placeholders.length>0}},{key:"isTrivialSnippet",get:function(){if(0===this._snippet.placeholders.length)return!0;if(1===this._snippet.placeholders.length){var e=(0,i.Z)(this._snippet.placeholders,1)[0];if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}},{key:"computePossibleSelections",value:function(){var e,t=new Map,n=(0,r.Z)(this._placeholderGroups);try{for(n.s();!(e=n.n()).done;){var i,o=e.value,a=void 0,s=(0,r.Z)(o);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u.isFinalTabstop)break;a||(a=[],t.set(u.index,a));var c=this._placeholderDecorations.get(u),l=this._editor.getModel().getDecorationRange(c);if(!l){t.delete(u.index);break}a.push(l)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){n.e(d)}finally{n.f()}return t}},{key:"activeChoice",get:function(){if(this._placeholderDecorations){var e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(null===e||void 0===e?void 0:e.choice){var t=this._placeholderDecorations.get(e);if(t){var n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}}}}},{key:"hasChoice",get:function(){var e=!1;return this._snippet.walk((function(t){return!(e=t instanceof m.Lv)})),e}},{key:"merge",value:function(t){var n=this,i=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((function(o){var a,s=(0,r.Z)(n._placeholderGroups[n._placeholderGroupsIdx]);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=t.shift();console.assert(-1!==l._offset),console.assert(!l._placeholderDecorations);var d,p=l._snippet.placeholderInfo.last.index,f=(0,r.Z)(l._snippet.placeholderInfo.all);try{for(f.s();!(d=f.n()).done;){var v=d.value;v.isFinalTabstop?v.index=c.index+(p+1)/n._nestingLevel:v.index=c.index+v.index/n._nestingLevel}}catch(N){f.e(N)}finally{f.f()}n._snippet.replace(c,l._snippet.children);var g=n._placeholderDecorations.get(c);o.removeDecoration(g),n._placeholderDecorations.delete(c);var _,b=(0,r.Z)(l._snippet.placeholders);try{for(b.s();!(_=b.n()).done;){var y=_.value,k=l._snippet.offset(y),C=l._snippet.fullLen(y),S=h.e.fromPositions(i.getPositionAt(l._offset+k),i.getPositionAt(l._offset+k+C)),x=o.addDecoration(S,e._decor.inactive);n._placeholderDecorations.set(y,x)}}catch(N){b.e(N)}finally{b.f()}}}catch(N){s.e(N)}finally{s.f()}n._placeholderGroups=(0,u.vM)(n._snippet.placeholders,m.Vm.compareByIndex)}))}}]),e}();A._decor={active:v.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:v.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:v.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:v.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var O={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},F=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,r=arguments.length>3?arguments[3]:void 0;(0,a.Z)(this,e),this._editor=t,this._template=n,this._options=i,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,c.B9)(this._snippets)}},{key:"_logInfo",value:function(){return'template="'.concat(this._template,'", merged_templates="').concat(this._templateMerges.join(" -> "),'"')}},{key:"insert",value:function(){var t=this;if(this._editor.hasModel()){var n="string"===typeof this._template?e.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):e.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService),i=n.edits,r=n.snippets;this._snippets=r,this._editor.executeEdits("snippet",i,(function(e){for(var n=e.filter((function(e){return!!e.identifier})),i=0;i<r.length;i++)r[i].initialize(n[i].textChange);return t._snippets[0].hasPlaceholder?t._move(!0):n.map((function(e){return p.Y.fromPositions(e.range.getEndPosition())}))})),this._editor.revealRange(this._editor.getSelections()[0])}}},{key:"merge",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);var o=e.createEditsAndSnippetsFromSelections(this._editor,t,i.overwriteBefore,i.overwriteAfter,!0,i.adjustWhitespace,i.clipboardText,i.overtypingCapturer,this._languageConfigurationService),a=o.edits,s=o.snippets;this._editor.executeEdits("snippet",a,(function(e){for(var t=e.filter((function(e){return!!e.identifier})),i=0;i<s.length;i++)s[i].initialize(t[i].textChange);var o=s[0].isTrivialSnippet;if(!o){var a,u=(0,r.Z)(n._snippets);try{for(u.s();!(a=u.n()).done;){a.value.merge(s)}}catch(c){u.e(c)}finally{u.f()}console.assert(0===s.length)}return n._snippets[0].hasPlaceholder&&!o?n._move(void 0):t.map((function(e){return p.Y.fromPositions(e.range.getEndPosition())}))}))}}},{key:"next",value:function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"prev",value:function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"_move",value:function(e){var t,n=[],i=(0,r.Z)(this._snippets);try{for(i.s();!(t=i.n()).done;){var a=t.value.move(e);n.push.apply(n,(0,o.Z)(a))}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"isAtFirstPlaceholder",get:function(){return this._snippets[0].isAtFirstPlaceholder}},{key:"isAtLastPlaceholder",get:function(){return this._snippets[0].isAtLastPlaceholder}},{key:"hasPlaceholder",get:function(){return this._snippets[0].hasPlaceholder}},{key:"hasChoice",get:function(){return this._snippets[0].hasChoice}},{key:"activeChoice",get:function(){return this._snippets[0].activeChoice}},{key:"isSelectionWithinPlaceholders",value:function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;var t,n=new Map,a=(0,r.Z)(this._snippets);try{var s=function(){var a=t.value.computePossibleSelections();if(0===n.size){var s,u=(0,r.Z)(a);try{for(u.s();!(s=u.n()).done;){var c=(0,i.Z)(s.value,2),l=c[0],d=c[1];d.sort(h.e.compareRangesUsingStarts);var p,f=(0,r.Z)(e);try{for(f.s();!(p=f.n()).done;){var v=p.value;if(d[0].containsRange(v)){n.set(l,[]);break}}}catch(g){f.e(g)}finally{f.f()}}}catch(g){u.e(g)}finally{u.f()}}if(0===n.size)return{v:!1};n.forEach((function(e,t){e.push.apply(e,(0,o.Z)(a.get(t)))}))};for(a.s();!(t=a.n()).done;){var u=s();if("object"===typeof u)return u.v}}catch(g){a.e(g)}finally{a.f()}e.sort(h.e.compareRangesUsingStarts);var c,l=(0,r.Z)(n);try{for(l.s();!(c=l.n()).done;){var d=(0,i.Z)(c.value,2),p=d[0],f=d[1];if(f.length===e.length){f.sort(h.e.compareRangesUsingStarts);for(var v=0;v<f.length;v++)f[v].containsRange(e[v])||n.delete(p)}else n.delete(p)}}catch(g){l.e(g)}finally{l.f()}return n.size>0}}],[{key:"adjustWhitespace",value:function(e,t,n,i,r){var o,a=e.getLineContent(t.lineNumber),s=(0,l.V8)(a,0,t.column-1);return i.walk((function(t){if(!(t instanceof m.xv)||t.parent instanceof m.Lv)return!0;if(r&&!r.has(t))return!0;var a=t.value.split(/\r\n|\r|\n/);if(n){var u=i.offset(t);if(0===u)a[0]=e.normalizeIndentation(a[0]);else{var c=(o=null!==o&&void 0!==o?o:i.toString()).charCodeAt(u-1);10!==c&&13!==c||(a[0]=e.normalizeIndentation(s+a[0]))}for(var l=1;l<a.length;l++)a[l]=e.normalizeIndentation(s+a[l])}var d=a.join(e.getEOL());return d!==t.value&&(t.parent.replace(t,[new m.xv(d)]),o=void 0),!0})),s}},{key:"adjustSelection",value:function(e,t,n,i){if(0!==n||0!==i){var r=t,o=r.positionLineNumber,a=r.positionColumn,s=a-n,u=a+i,c=e.validateRange({startLineNumber:o,startColumn:s,endLineNumber:o,endColumn:u});t=p.Y.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}},{key:"createEditsAndSnippetsFromSelections",value:function(t,n,i,o,a,s,u,c,l){var p=[],f=[];if(!t.hasModel())return{edits:p,snippets:f};var v,b=t.getModel(),y=t.invokeWithinContext((function(e){return e.get(_.ec)})),k=t.invokeWithinContext((function(e){return new T(e.get(g.e),b)})),C=function(){return u},S=b.getValueInRange(e.adjustSelection(b,t.getSelection(),i,0)),x=b.getValueInRange(e.adjustSelection(b,t.getSelection(),0,o)),N=b.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),L=t.getSelections().map((function(e,t){return{selection:e,idx:t}})).sort((function(e,t){return h.e.compareRangesUsingStarts(e.selection,t.selection)})),M=(0,r.Z)(L);try{for(M.s();!(v=M.n()).done;){var O=v.value,F=O.selection,W=O.idx,j=e.adjustSelection(b,F,i,0),V=e.adjustSelection(b,F,0,o);S!==b.getValueInRange(j)&&(j=F),x!==b.getValueInRange(V)&&(V=F);var U=F.setStartPosition(j.startLineNumber,j.startColumn).setEndPosition(V.endLineNumber,V.endColumn),B=(new m.Yj).parse(n,!0,a),q=U.getStartPosition(),H=e.adjustWhitespace(b,q,s||W>0&&N!==b.getLineFirstNonWhitespaceColumn(F.positionLineNumber),B);B.resolveVariables(new R([k,new Z(C,W,L.length,"spread"===t.getOption(76)),new w(b,F,W,c),new E(b,F,l),new P,new D(y),new I])),p[W]=d.h.replace(U,B.toString()),p[W].identifier={major:W,minor:0},p[W]._isTracked=!0,f[W]=new A(t,B,H)}}catch(G){M.e(G)}finally{M.f()}return{edits:p,snippets:f}}},{key:"createEditsAndSnippetsFromEdits",value:function(t,n,i,r,o,a,s){if(!t.hasModel()||0===n.length)return{edits:[],snippets:[]};var u=[],c=t.getModel(),l=new m.Yj,p=new m.y1,f=new R([t.invokeWithinContext((function(e){return new T(e.get(g.e),c)})),new Z((function(){return o}),0,t.getSelections().length,"spread"===t.getOption(76)),new w(c,t.getSelection(),0,a),new E(c,t.getSelection(),s),new P,new D(t.invokeWithinContext((function(e){return e.get(_.ec)}))),new I]);n=n.sort((function(e,t){return h.e.compareRangesUsingStarts(e.range,t.range)}));for(var v=0,b=0;b<n.length;b++){var y=n[b],k=y.range,C=y.template;if(b>0){var S=n[b-1].range,x=h.e.fromPositions(S.getEndPosition(),k.getStartPosition()),N=new m.xv(c.getValueInRange(x));p.appendChild(N),v+=N.value.length}var L=l.parseFragment(C,p);e.adjustWhitespace(c,k.getStartPosition(),!0,p,new Set(L)),p.resolveVariables(f);var M=p.toString(),O=M.slice(v);v=M.length;var F=d.h.replace(k,O);F.identifier={major:b,minor:0},F._isTracked=!0,u.push(F)}return l.ensureFinalTabstop(p,i,!0),{edits:u,snippets:[new A(t,p,"")]}}}]),e}();F=L([M(3,f.c_)],F)}}]);
//# sourceMappingURL=monaco-editor-vendor.e8a66816.c9c8fa5c.js.map