"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[23],{94885:function(e,t,i){i.d(t,{G:function(){return at}});var n=i(37762),o=i(15671),r=i(43144),s=i(97326),a=i(11752),l=i(61120),d=i(60136),h=i(27277),u=i(53210),c=i(52091),g=i(16688),m=i(68552),v=i(58023),_=i(87806),f=i(56580),p=i(57687),y=i(79002),C=i(89378),L=i(29439),N=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this._coordinateBrand=void 0,this.top=t,this.left=i})),b=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,o.Z)(this,i),(r=t.call(this,e))._viewDomNode=n,r._widgets={},r.domNode=(0,g.X)(document.createElement("div")),C.K.write(r.domNode,1),r.domNode.setClassName("contentWidgets"),r.domNode.setPosition("absolute"),r.domNode.setTop(0),r.overflowingContentWidgetsDomNode=(0,g.X)(document.createElement("div")),C.K.write(r.overflowingContentWidgetsDomNode,2),r.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets"),r}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._widgets={}}},{key:"onConfigurationChanged",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].onConfigurationChanged(e)}return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLineMappingChanged",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].onLineMappingChanged(e)}return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"addWidget",value:function(e){var t=new w(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t,i,n){this._widgets[e.getId()].setPosition(t,i,n),this.setShouldRender()}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var i=this._widgets[t];delete this._widgets[t];var n=i.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}},{key:"shouldSuppressMouseDownOnWidget",value:function(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}},{key:"onBeforeRender",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].onBeforeRender(e)}}},{key:"prepareRender",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].prepareRender(e)}}},{key:"render",value:function(e){for(var t=0,i=Object.keys(this._widgets);t<i.length;t++){var n=i[t];this._widgets[n].render(e)}}}]),i}(C.E),w=function(){function e(t,i,n){(0,o.Z)(this,e),this._context=t,this._viewDomNode=i,this._actual=n,this.domNode=(0,g.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;var r=this._context.configuration.options,s=r.get(133);this._fixedOverflowWidgets=r.get(38),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}return(0,r.Z)(e,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;if(this._lineHeight=t.get(61),e.hasChanged(133)){var i=t.get(133);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}},{key:"onLineMappingChanged",value:function(e){this._setPosition(this._range,this._affinity)}},{key:"_setPosition",value:function(e,t){var i;if(this._range=e,this._viewRange=null,this._affinity=t,this._range){var n=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(n,null!==(i=this._affinity)&&void 0!==i?i:void 0))}}},{key:"_getMaxWidth",value:function(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}},{key:"setPosition",value:function(e,t,i){this._setPosition(e,i),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}},{key:"_layoutBoxInViewport",value:function(e,t,i,n,o){var r=e.top,s=r,a=t.top+this._lineHeight,l=r-n,d=s>=n,h=a,u=o.viewportHeight-a>=n,c=e.left,g=t.left;return c+i>o.scrollLeft+o.viewportWidth&&(c=o.scrollLeft+o.viewportWidth-i),g+i>o.scrollLeft+o.viewportWidth&&(g=o.scrollLeft+o.viewportWidth-i),c<o.scrollLeft&&(c=o.scrollLeft),g<o.scrollLeft&&(g=o.scrollLeft),{fitsAbove:d,aboveTop:l,aboveLeft:c,fitsBelow:u,belowTop:h,belowLeft:g}}},{key:"_layoutHorizontalSegmentInPage",value:function(e,t,i,n){var o=Math.max(0,t.left-n),r=Math.min(t.left+t.width+n,e.width),s=t.left+i-u.StandardWindow.scrollX;if(s+n>r){var a=s-(r-n);s-=a,i-=a}if(s<o){var l=s-o;s-=l,i-=l}return[i,s]}},{key:"_layoutBoxInPage",value:function(e,t,i,n,o){var r=e.top-n,s=t.top+this._lineHeight,a=u.getDomNodePagePosition(this._viewDomNode.domNode),l=a.top+r-u.StandardWindow.scrollY,d=a.top+s-u.StandardWindow.scrollY,h=u.getClientArea(document.body),c=this._layoutHorizontalSegmentInPage(h,a,e.left-o.scrollLeft+this._contentLeft,i),g=(0,L.Z)(c,2),m=g[0],v=g[1],_=this._layoutHorizontalSegmentInPage(h,a,t.left-o.scrollLeft+this._contentLeft,i),f=(0,L.Z)(_,2),p=f[0],y=f[1],C=l>=22,N=d+n<=h.height-22;return this._fixedOverflowWidgets?{fitsAbove:C,aboveTop:Math.max(l,22),aboveLeft:v,fitsBelow:N,belowTop:d,belowLeft:y}:{fitsAbove:C,aboveTop:r,aboveLeft:m,fitsBelow:N,belowTop:s,belowLeft:p}}},{key:"_prepareRenderWidgetAtExactPositionOverflowing",value:function(e){return new N(e.top,e.left+this._contentLeft)}},{key:"_getTopAndBottomLeft",value:function(e){if(!this._viewRange)return[null,null];var t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||0===t.length)return[null,null];var i,o=t[0],r=t[0],s=(0,n.Z)(t);try{for(s.s();!(i=s.n()).done;){var a=i.value;a.lineNumber<o.lineNumber&&(o=a),a.lineNumber>r.lineNumber&&(r=a)}}catch(y){s.e(y)}finally{s.f()}var l,d=1073741824,h=(0,n.Z)(o.ranges);try{for(h.s();!(l=h.n()).done;){var u=l.value;u.left<d&&(d=u.left)}}catch(y){h.e(y)}finally{h.f()}var c,g=1073741824,m=(0,n.Z)(r.ranges);try{for(m.s();!(c=m.n()).done;){var v=c.value;v.left<g&&(g=v.left)}}catch(y){m.e(y)}finally{m.f()}var _=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.scrollTop,f=new N(_,d),p=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop;return[f,new N(p,g)]}},{key:"_prepareRenderWidget",value:function(e){if(!this._preference||0===this._preference.length)return null;var t,i=this._getTopAndBottomLeft(e),o=(0,L.Z)(i,2),r=o[0],s=o[1];if(!r||!s)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){var a=null;if("function"===typeof this._actual.beforeRender&&(a=k(this._actual.beforeRender,this._actual)),a)this._cachedDomNodeOffsetWidth=a.width,this._cachedDomNodeOffsetHeight=a.height;else{var l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}t=this.allowEditorOverflow?this._layoutBoxInPage(r,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(r,s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(var d=1;d<=2;d++){var h,u=(0,n.Z)(this._preference);try{for(u.s();!(h=u.n()).done;){var c=h.value;if(1===c){if(!t)return null;if(2===d||t.fitsAbove)return{coordinate:new N(t.aboveTop,t.aboveLeft),position:1}}else{if(2!==c)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(r),position:0}:{coordinate:r,position:0};if(!t)return null;if(2===d||t.fitsBelow)return{coordinate:new N(t.belowTop,t.belowLeft),position:2}}}}catch(g){u.e(g)}finally{u.f()}}return null}},{key:"onBeforeRender",value:function(e){this._viewRange&&this._preference&&(this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRenderWidget(e)}},{key:"render",value:function(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&k(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&k(this._actual.afterRender,this._actual,this._renderData.position)}}]),e}();function k(e,t){try{for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return e.call.apply(e,[t].concat(n))}catch(r){return null}}var R=i(60391),S=i(2374),D=i(71881),x=i(3553),M=i(11761),W=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options,a=r.get(133);return n._lineHeight=r.get(61),n._renderLineHighlight=r.get(87),n._renderLineHighlightOnlyWhenFocus=r.get(88),n._contentLeft=a.contentLeft,n._contentWidth=a.contentWidth,n._selectionIsEmpty=!0,n._focused=!1,n._cursorLineNumbers=[1],n._selections=[new c.Y(1,1,1,1)],n._renderData=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_readFromSelections",value:function(){var e=!1,t=this._selections.map((function(e){return e.positionLineNumber}));t.sort((function(e,t){return e-t})),D.fS(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);var i=this._selections.every((function(e){return e.isEmpty()}));return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}},{key:"onThemeChanged",value:function(e){return this._readFromSelections()}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._renderLineHighlight=t.get(87),this._renderLineHighlightOnlyWhenFocus=t.get(88),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._readFromSelections()}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollWidthChanged||e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}},{key:"prepareRender",value:function(e){if(this._shouldRenderThis()){for(var t=this._renderOne(e),i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length,r=0,s=[],a=i;a<=n;a++){for(var l=a-i;r<o&&this._cursorLineNumbers[r]<a;)r++;r<o&&this._cursorLineNumbers[r]===a?s[l]=t:s[l]=""}this._renderData=s}else this._renderData=null}},{key:"render",value:function(e,t){if(!this._renderData)return"";var i=t-e;return i>=this._renderData.length?"":this._renderData[i]}},{key:"_shouldRenderInMargin",value:function(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},{key:"_shouldRenderInContent",value:function(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}]),i}(R.i),A=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderOther()?" current-line-both":"");return'<div class="'.concat(t,'" style="width:').concat(Math.max(e.scrollWidth,this._contentWidth),"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return this._shouldRenderInContent()}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInMargin()}}]),i}(W),H=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_renderOne",value:function(e){var t="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"");return'<div class="'.concat(t,'" style="width:').concat(this._contentLeft,"px; height:").concat(this._lineHeight,'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return!0}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInContent()}}]),i}(W);(0,x.Ic)((function(e,t){var i=e.getColor(S.Kh);if(i&&(t.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(i,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(i,"; border: none; }"))),!i||i.isTransparent()||e.defines(S.Mm)){var n=e.getColor(S.Mm);n&&(t.addRule(".monaco-editor .view-overlays .current-line { border: 2px solid ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ".concat(n,"; }")),(0,M.c3)(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}}));var I=i(30788),T=i(76310),Z=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options;return n._lineHeight=r.get(61),n._typicalHalfwidthCharacterWidth=r.get(46).typicalHalfwidthCharacterWidth,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o];s.options.className&&(i[n++]=s)}i=i.sort((function(e,t){if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;var i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:I.e.compareRangesUsingStarts(e.range,t.range)}));for(var a=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,d=[],h=a;h<=l;h++){d[h-a]=""}this._renderWholeLineDecorations(e,i,d),this._renderNormalDecorations(e,i,d),this._renderResult=d}},{key:"_renderWholeLineDecorations",value:function(e,t,i){for(var n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=0,a=t.length;s<a;s++){var l=t[s];if(l.options.isWholeLine)for(var d='<div class="cdr '+l.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',h=Math.max(l.range.startLineNumber,o),u=Math.min(l.range.endLineNumber,r),c=h;c<=u;c++){i[c-o]+=d}}}},{key:"_renderNormalDecorations",value:function(e,t,i){for(var n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=null,s=!1,a=null,l=0,d=t.length;l<d;l++){var h=t[l];if(!h.options.isWholeLine){var u=h.options.className,c=Boolean(h.options.showIfCollapsed),g=h.range;c&&1===g.endColumn&&g.endLineNumber!==g.startLineNumber&&(g=new I.e(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),r===u&&s===c&&I.e.areIntersectingOrTouching(a,g)?a=I.e.plusRange(a,g):(null!==r&&this._renderNormalDecoration(e,a,r,s,n,o,i),r=u,s=c,a=g)}}null!==r&&this._renderNormalDecoration(e,a,r,s,n,o,i)}},{key:"_renderNormalDecoration",value:function(e,t,i,n,o,r,s){var a=e.linesVisibleRangesForRange(t,"findMatch"===i);if(a)for(var l=0,d=a.length;l<d;l++){var h=a[l];if(!h.outsideRenderedLine){var u=h.lineNumber-r;if(n&&1===h.ranges.length){var c=h.ranges[0];if(c.width<this._typicalHalfwidthCharacterWidth){var g=Math.round(c.left+c.width/2),m=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new T.yu(m,this._typicalHalfwidthCharacterWidth)}}for(var v=0,_=h.ranges.length;v<_;v++){var f=h.ranges[v],p='<div class="cdr '+i+'" style="left:'+String(f.left)+"px;width:"+String(f.width)+"px;height:"+o+'px;"></div>';s[u]+=p}}}}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(R.i),O=i(48301),E=i(6574),P=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,s){var a;(0,o.Z)(this,i);var l=(a=t.call(this,e))._context.configuration.options,d=l.get(94),h=l.get(69),c=l.get(36),m=l.get(97),v={listenOnDomNode:r.domNode,className:"editor-scrollable "+(0,x.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:d.vertical,horizontal:d.horizontal,verticalHasArrows:d.verticalHasArrows,horizontalHasArrows:d.horizontalHasArrows,verticalScrollbarSize:d.verticalScrollbarSize,verticalSliderSize:d.verticalSliderSize,horizontalScrollbarSize:d.horizontalScrollbarSize,horizontalSliderSize:d.horizontalSliderSize,handleMouseWheel:d.handleMouseWheel,alwaysConsumeMouseWheel:d.alwaysConsumeMouseWheel,arrowSize:d.arrowSize,mouseWheelScrollSensitivity:h,fastScrollSensitivity:c,scrollPredominantAxis:m,scrollByPage:d.scrollByPage};a.scrollbar=a._register(new O.$Z(n.domNode,v,a._context.viewLayout.getScrollable())),C.K.write(a.scrollbar.getDomNode(),5),a.scrollbarDomNode=(0,g.X)(a.scrollbar.getDomNode()),a.scrollbarDomNode.setPosition("absolute"),a._setLayout();var _=function(e,t,i){var n={};if(t){var o=e.scrollTop;o&&(n.scrollTop=a._context.viewLayout.getCurrentScrollTop()+o,e.scrollTop=0)}if(i){var r=e.scrollLeft;r&&(n.scrollLeft=a._context.viewLayout.getCurrentScrollLeft()+r,e.scrollLeft=0)}a._context.viewModel.viewLayout.setScrollPosition(n,1)};return a._register(u.addDisposableListener(r.domNode,"scroll",(function(e){return _(r.domNode,!0,!0)}))),a._register(u.addDisposableListener(n.domNode,"scroll",(function(e){return _(n.domNode,!0,!1)}))),a._register(u.addDisposableListener(s.domNode,"scroll",(function(e){return _(s.domNode,!0,!1)}))),a._register(u.addDisposableListener(a.scrollbarDomNode.domNode,"scroll",(function(e){return _(a.scrollbarDomNode.domNode,!0,!1)}))),a}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_setLayout",value:function(){var e=this._context.configuration.options,t=e.get(133);this.scrollbarDomNode.setLeft(t.contentLeft),"right"===e.get(67).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}},{key:"getOverviewRulerLayoutInfo",value:function(){return this.scrollbar.getOverviewRulerLayoutInfo()}},{key:"getDomNode",value:function(){return this.scrollbarDomNode}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){var t=this._context.configuration.options,i=t.get(94),n=t.get(69),o=t.get(36),r=t.get(97),s={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(s)}return e.hasChanged(133)&&this._setLayout(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,x.m6)(this._context.theme.type)),!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this.scrollbar.renderNow()}}]),i}(C.E);(0,x.Ic)((function(e,t){var i=e.getColor(E._wn);i&&t.addRule("\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tbox-shadow: ".concat(i," 0 6px 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tbox-shadow: ").concat(i," 6px 0 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\tbox-shadow: ").concat(i," 6px 6px 6px -6px inset;\n\t\t\t}\n\t\t"));var n=e.getColor(E.etL);n&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\tbackground: ".concat(n,";\n\t\t\t}\n\t\t"));var o=e.getColor(E.ABB);o&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\tbackground: ".concat(o,";\n\t\t\t}\n\t\t"));var r=e.getColor(E.ynu);r&&t.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\tbackground: ".concat(r,";\n\t\t\t}\n\t\t"))}));var F=(0,r.Z)((function e(t,i,n){(0,o.Z)(this,e),this._decorationToRenderBrand=void 0,this.startLineNumber=+t,this.endLineNumber=+i,this.className=String(n)})),B=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"_render",value:function(e,t,i){for(var n=[],o=e;o<=t;o++){n[o-e]=[]}if(0===i.length)return n;i.sort((function(e,t){return e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1}));for(var r=null,s=0,a=0,l=i.length;a<l;a++){var d=i[a],h=d.className,u=Math.max(d.startLineNumber,e)-e,c=Math.min(d.endLineNumber,t)-e;r===h?(u=Math.max(s+1,u),s=Math.max(s,c)):(r=h,s=c);for(var g=u;g<=s;g++)n[g].push(r)}return n}}]),i}(R.i),V=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options,a=r.get(133);return n._lineHeight=r.get(61),n._glyphMargin=r.get(52),n._glyphMarginLeft=a.glyphMarginLeft,n._glyphMarginWidth=a.glyphMarginWidth,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._glyphMargin=t.get(52),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.glyphMarginClassName;a&&(i[n++]=new F(s.range.startLineNumber,s.range.endLineNumber,a))}return i}},{key:"prepareRender",value:function(e){if(this._glyphMargin){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._lineHeight.toString(),r='" style="left:'+this._glyphMarginLeft.toString()+"px;width:"+this._glyphMarginWidth.toString()+"px;height:"+o+'px;"></div>',s=[],a=t;a<=i;a++){var l=a-t,d=n[l];0===d.length?s[l]="":s[l]='<div class="cgmr codicon '+d.join(" ")+r}this._renderResult=s}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(B),z=i(93433),G=i(10849),U=i(64272),X=i(1715),q=i(54612),K=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e,n._primaryPosition=null;var r=n._context.configuration.options,a=r.get(134),l=r.get(46);return n._lineHeight=r.get(61),n._spaceWidth=l.spaceWidth,n._maxIndentLeft=-1===a.wrappingColumn?-1:a.wrappingColumn*l.typicalHalfwidthCharacterWidth,n._bracketPairGuideOptions=r.get(13),n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(134),n=t.get(46);return this._lineHeight=t.get(61),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}},{key:"onCursorStateChanged",value:function(e){var t,i=e.selections[0].getPosition();return!(null===(t=this._primaryPosition)||void 0===t?void 0:t.equals(i))&&(this._primaryPosition=i,!0)}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLanguageConfigurationChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){var t,i,o,r;if(this._bracketPairGuideOptions.indentation||!1!==this._bracketPairGuideOptions.bracketPairs){for(var s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,d=this._lineHeight,h=this._primaryPosition,u=this.getGuidesByLine(s,a,h),c=[],g=s;g<=a;g++){var m,v=g-s,_=u[v],f="",p=null!==(i=null===(t=e.visibleRangeForPosition(new G.L(g,1)))||void 0===t?void 0:t.left)&&void 0!==i?i:0,y=(0,n.Z)(_);try{for(y.s();!(m=y.n()).done;){var C=m.value,L=-1===C.column?p+(C.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new G.L(g,C.column)).left;if(L>l||this._maxIndentLeft>0&&L>this._maxIndentLeft)break;var N=C.horizontalLine?C.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",b=C.horizontalLine?(null!==(r=null===(o=e.visibleRangeForPosition(new G.L(g,C.horizontalLine.endColumn)))||void 0===o?void 0:o.left)&&void 0!==r?r:L+this._spaceWidth)-L:this._spaceWidth;f+='<div class="core-guide '.concat(C.className," ").concat(N,'" style="left:').concat(L,"px;height:").concat(d,"px;width:").concat(b,'px"></div>')}}catch(w){y.e(w)}finally{y.f()}c[v]=f}this._renderResult=c}else this._renderResult=null}},{key:"getGuidesByLine",value:function(e,t,i){var n=this,o=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?q.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?q.s6.EnabledForActive:q.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,s=0,a=0,l=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&i){var d=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);s=d.startLineNumber,a=d.endLineNumber,l=d.indent}for(var h=this._context.viewModel.model.getOptions().indentSize,u=[],c=e;c<=t;c++){var g=new Array;u.push(g);for(var m=o?o[c-e]:[],v=new D.H9(m),_=r?r[c-e]:[],f=function(e){var t=(e-1)*h+1,i=("always"===n._bracketPairGuideOptions.highlightActiveIndentation||0===m.length)&&s<=c&&c<=a&&e===l;g.push.apply(g,(0,z.Z)(v.takeWhile((function(e){return e.visibleColumn<t}))||[]));var o=v.peek();o&&o.visibleColumn===t&&!o.horizontalLine||g.push(new q.UO(t,-1,i?"core-guide-indent-active":"core-guide-indent",null,-1,-1))},p=1;p<=_;p++)f(p);g.push.apply(g,(0,z.Z)(v.takeWhile((function(e){return!0}))||[]))}return u}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(R.i);function Y(e){if(!e||!e.isTransparent())return e}(0,x.Ic)((function(e,t){var i=e.getColor(S.tR);i&&t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ".concat(i," inset; }"));var n=e.getColor(S.Ym)||i;n&&t.addRule(".monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ".concat(n," inset; }"));var o=[{bracketColor:S.zJ,guideColor:S.oV,guideColorActive:S.Qb},{bracketColor:S.Vs,guideColor:S.m$,guideColorActive:S.m3},{bracketColor:S.CE,guideColor:S.DS,guideColorActive:S.To},{bracketColor:S.UP,guideColor:S.lS,guideColorActive:S.L7},{bracketColor:S.r0,guideColor:S.Jn,guideColorActive:S.HV},{bracketColor:S.m1,guideColor:S.YF,guideColorActive:S.f9}],r=new X.W,s=o.map((function(t){var i,n,o=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),s=e.getColor(t.guideColorActive),a=Y(null!==(i=Y(r))&&void 0!==i?i:null===o||void 0===o?void 0:o.transparent(.3)),l=Y(null!==(n=Y(s))&&void 0!==n?n:o);if(a&&l)return{guideColor:a,guideColorActive:l}})).filter(U.$K);if(s.length>0){for(var a=0;a<30;a++){var l=s[a%s.length];t.addRule(".monaco-editor .".concat(r.getInlineClassNameOfLevel(a).replace(/ /g,".")," { --guide-color: ").concat(l.guideColor,"; --guide-color-active: ").concat(l.guideColorActive,"; }"))}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .vertical.".concat(r.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),t.addRule(".monaco-editor .horizontal-top.".concat(r.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),t.addRule(".monaco-editor .horizontal-bottom.".concat(r.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}}));var j=i(6264),J=i(4827),$=i(32590),Q=i(6815),ee=i(87405),te=i(97766),ie=i(68537),ne=function(){function e(){(0,o.Z)(this,e),this._currentVisibleRange=new I.e(1,1,1,1)}return(0,r.Z)(e,[{key:"getCurrentVisibleRange",value:function(){return this._currentVisibleRange}},{key:"setCurrentVisibleRange",value:function(e){this._currentVisibleRange=e}}]),e}(),oe=(0,r.Z)((function e(t,i,n,r,s,a,l){(0,o.Z)(this,e),this.minimalReveal=t,this.lineNumber=i,this.startColumn=n,this.endColumn=r,this.startScrollTop=s,this.stopScrollTop=a,this.scrollType=l,this.type="range",this.minLineNumber=i,this.maxLineNumber=i})),re=(0,r.Z)((function e(t,i,n,r,s){(0,o.Z)(this,e),this.minimalReveal=t,this.selections=i,this.startScrollTop=n,this.stopScrollTop=r,this.scrollType=s,this.type="selections";for(var a=i[0].startLineNumber,l=i[0].endLineNumber,d=1,h=i.length;d<h;d++){var u=i[d];a=Math.min(a,u.startLineNumber),l=Math.max(l,u.endLineNumber)}this.minLineNumber=a,this.maxLineNumber=l})),se=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;(0,o.Z)(this,i),(r=t.call(this,e))._linesContent=n,r._textRangeRestingSpot=document.createElement("div"),r._visibleLines=new ee.G((0,s.Z)(r)),r.domNode=r._visibleLines.domNode;var a=r._context.configuration,l=r._context.configuration.options,d=l.get(46),h=l.get(134),u=l.get(133);return r._lineHeight=l.get(61),r._typicalHalfwidthCharacterWidth=d.typicalHalfwidthCharacterWidth,r._isViewportWrapping=h.isViewportWrapping,r._revealHorizontalRightPadding=l.get(91),r._horizontalScrollbarHeight=u.horizontalScrollbarHeight,r._cursorSurroundingLines=l.get(25),r._cursorSurroundingLinesStyle=l.get(26),r._canUseLayerHinting=!l.get(28),r._viewLineOptions=new te.ob(a,r._context.theme.type),C.K.write(r.domNode,7),r.domNode.setClassName("view-lines ".concat(ie.S)),(0,Q.N)(r.domNode,d),r._maxLineWidth=0,r._asyncUpdateLineWidths=new $.pY((function(){r._updateLineWidthsSlow()}),200),r._asyncCheckMonospaceFontAssumptions=new $.pY((function(){r._checkMonospaceFontAssumptions()}),2e3),r._lastRenderedData=new ne,r._horizontalRevealRequest=null,r}return(0,r.Z)(i,[{key:"dispose",value:function(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new te.Nt(this._viewLineOptions)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);var t=this._context.configuration.options,i=t.get(46),n=t.get(134),o=t.get(133);return this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(91),this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),(0,Q.N)(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}},{key:"_onOptionsMaybeChanged",value:function(){var e=this._context.configuration,t=new te.ob(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;for(var i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=i;o<=n;o++){this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions)}return!0}return!1}},{key:"onCursorStateChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1,o=t;o<=i;o++)n=this._visibleLines.getVisibleLine(o).onSelectionChanged()||n;return n}},{key:"onDecorationsChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged();return!0}},{key:"onFlushed",value:function(e){var t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onRevealRangeRequest",value:function(e){var t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;var i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new oe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new re(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;var n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,n),!0}},{key:"onScrollChanged",value:function(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){var t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}},{key:"onThemeChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"getPositionFromDOMInfo",value:function(e,t){var i=this._getViewLineDomNode(e);if(null===i)return null;var n=this._getLineNumberFor(i);if(-1===n)return null;if(n<1||n>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(n))return new G.L(n,1);var o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<o||n>r)return null;var s=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t),a=this._context.viewModel.getLineMinColumn(n);return s<a&&(s=a),new G.L(n,s)}},{key:"_getViewLineDomNode",value:function(e){for(;e&&1===e.nodeType;){if(e.className===te.Nt.CLASS_NAME)return e;e=e.parentElement}return null}},{key:"_getLineNumberFor",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++){if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n}return-1}},{key:"getLineWidth",value:function(e){var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()}},{key:"linesVisibleRangesForRange",value:function(e,t){if(this.shouldRender())return null;var i=e.endLineNumber,n=I.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;var o=[],r=0,s=new te.ZE(this.domNode.domNode,this._textRangeRestingSpot),a=0;t&&(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G.L(n.startLineNumber,1)).lineNumber);for(var l=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber(),h=n.startLineNumber;h<=n.endLineNumber;h++)if(!(h<l||h>d)){var u=h===n.startLineNumber?n.startColumn:1,c=h===n.endLineNumber?n.endColumn:this._context.viewModel.getLineMaxColumn(h),g=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,u,c,s);if(g){if(t&&h<i)a!==(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G.L(h+1,1)).lineNumber)&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth);o[r++]=new T.u7(g.outsideRenderedLine,h,T.yu.from(g.ranges))}}return 0===r?null:o}},{key:"_visibleRangesForLineRange",value:function(e,t,i){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,new te.ZE(this.domNode.domNode,this._textRangeRestingSpot))}},{key:"visibleRangeForPosition",value:function(e){var t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new T.D4(t.outsideRenderedLine,t.ranges[0].left):null}},{key:"updateLineWidths",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidthsFast",value:function(){return this._updateLineWidths(!0)}},{key:"_updateLineWidthsSlow",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidths",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0,r=t;r<=i;r++){var s=this._visibleLines.getVisibleLine(r);!e||s.getWidthIsFast()?n=Math.max(n,s.getWidth()):o=!1}return o&&1===t&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}},{key:"_checkMonospaceFontAssumptions",value:function(){for(var e=-1,t=-1,i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),o=i;o<=n;o++){var r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){var s=r.getWidth();s>t&&(t=s,e=o)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(var a=i;a<=n;a++){this._visibleLines.getVisibleLine(a).onMonospaceAssumptionsInvalidated()}}},{key:"prepareRender",value:function(){throw new Error("Not supported")}},{key:"render",value:function(){throw new Error("Not supported")}},{key:"renderText",value:function(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var i=this._computeScrollLeftToReveal(t);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),J.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled())for(var n=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber(),r=n;r<=o;r++){if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");var s=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-s),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}},{key:"_ensureMaxLineWidth",value:function(e){var t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}},{key:"_computeScrollTopToRevealRange",value:function(e,t,i,n,o,r){var s,a,l,d,h=e.top,u=e.height,c=h+u;if(o&&o.length>0){for(var g=o[0].startLineNumber,m=o[0].endLineNumber,v=1,_=o.length;v<_;v++){var f=o[v];g=Math.min(g,f.startLineNumber),m=Math.max(m,f.endLineNumber)}s=!1,a=this._context.viewLayout.getVerticalOffsetForLineNumber(g),l=this._context.viewLayout.getVerticalOffsetForLineNumber(m)+this._lineHeight}else{if(!n)return-1;s=!0,a=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight}if(("mouse"===t||i)&&"default"===this._cursorSurroundingLinesStyle)i||(a-=this._lineHeight);else{var p=Math.min(u/this._lineHeight/2,this._cursorSurroundingLines);a-=p*this._lineHeight,l+=Math.max(0,p-1)*this._lineHeight}if(0!==r&&4!==r||(l+=i?this._horizontalScrollbarHeight:this._lineHeight),l-a>u){if(!s)return-1;d=a}else if(5===r||6===r)if(6===r&&h<=a&&l<=c)d=h;else{var y=a-Math.max(5*this._lineHeight,.2*u),C=l-u;d=Math.max(C,y)}else if(1===r||2===r)if(2===r&&h<=a&&l<=c)d=h;else{var L=(a+l)/2;d=Math.max(0,L-u/2)}else d=this._computeMinimumScrolling(h,c,a,l,3===r,4===r);return d}},{key:"_computeScrollLeftToReveal",value:function(e){var t=this._context.viewLayout.getCurrentViewport(),o=t.left,r=o+t.width,s=1073741824,a=0;if("range"===e.type){var l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;var d,h=(0,n.Z)(l.ranges);try{for(h.s();!(d=h.n()).done;){var u=d.value;s=Math.min(s,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}}catch(y){h.e(y)}finally{h.f()}}else{var c,g=(0,n.Z)(e.selections);try{for(g.s();!(c=g.n()).done;){var m=c.value;if(m.startLineNumber!==m.endLineNumber)return null;var v=this._visibleRangesForLineRange(m.startLineNumber,m.startColumn,m.endColumn);if(!v)return null;var _,f=(0,n.Z)(v.ranges);try{for(f.s();!(_=f.n()).done;){var p=_.value;s=Math.min(s,Math.round(p.left)),a=Math.max(a,Math.round(p.left+p.width))}}catch(y){f.e(y)}finally{f.f()}}}catch(y){g.e(y)}finally{g.f()}}return e.minimalReveal||(s=Math.max(0,s-i.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),"selections"===e.type&&a-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(o,r,s,a),maxHorizontalOffset:a}}},{key:"_computeMinimumScrolling",value:function(e,t,i,n,o,r){o=!!o,r=!!r;var s=(t|=0)-(e|=0);return(n|=0)-(i|=0)<s?o?i:r?Math.max(0,n-s):i<e?i:n>t?Math.max(0,n-s):e:i}}]),i}(C.E);se.HORIZONTAL_EXTRA_PX=30;var ae=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._context=e;var r=n._context.configuration.options.get(133);return n._decorationsLeft=r.decorationsLeft,n._decorationsWidth=r.decorationsWidth,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(133);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.linesDecorationsClassName;a&&(i[n++]=new F(s.range.startLineNumber,s.range.endLineNumber,a));var l=s.options.firstLineDecorationClassName;l&&(i[n++]=new F(s.range.startLineNumber,s.range.startLineNumber,l))}return i}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',r=[],s=t;s<=i;s++){for(var a=s-t,l=n[a],d="",h=0,u=l.length;h<u;h++)d+='<div class="cldr '+l[h]+o;r[a]=d}this._renderResult=r}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),i}(B),le=i(16543),de=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this))._context=e,n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),i=[],n=0,o=0,r=t.length;o<r;o++){var s=t[o],a=s.options.marginClassName;a&&(i[n++]=new F(s.range.startLineNumber,s.range.endLineNumber,a))}return i}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=[],r=t;r<=i;r++){for(var s=r-t,a=n[s],l="",d=0,h=a.length;d<h;d++)l+='<div class="cmdr '+a[d]+'" style=""></div>';o[s]=l}this._renderResult=o}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),i}(B),he=i(83533),ue=i(10526),ce=i(26684),ge=i(31492),me=i(65782),ve=i(85551),_e=i(50187),fe=i(6287),pe=function(){for(var e=[],t=32;t<=126;t++)e.push(t);return e.push(65533),e}(),ye=i(60309),Ce=function(){function e(t,i){(0,o.Z)(this,e),this.scale=i,this._minimapCharRendererBrand=void 0,this.charDataNormal=e.soften(t,.8),this.charDataLight=e.soften(t,50/60)}return(0,r.Z)(e,[{key:"renderChar",value:function(e,t,i,n,o,r,s,a,l,d,h){var u=1*this.scale,c=2*this.scale,g=h?1:c;if(t+u>e.width||i+g>e.height)console.warn("bad render request outside image data");else for(var m=d?this.charDataLight:this.charDataNormal,v=function(e,t){return(e-=32)<0||e>96?t<=2?(e+96)%96:95:e}(n,l),_=4*e.width,f=s.r,p=s.g,y=s.b,C=o.r-f,L=o.g-p,N=o.b-y,b=Math.max(r,a),w=e.data,k=v*u*c,R=i*_+4*t,S=0;S<g;S++){for(var D=R,x=0;x<u;x++){var M=m[k++]/255*(r/255);w[D++]=f+C*M,w[D++]=p+L*M,w[D++]=y+N*M,w[D++]=b}R+=_}}},{key:"blockRenderChar",value:function(e,t,i,n,o,r,s,a){var l=1*this.scale,d=2*this.scale,h=a?1:d;if(t+l>e.width||i+h>e.height)console.warn("bad render request outside image data");else for(var u=4*e.width,c=o/255*.5,g=r.r,m=r.g,v=r.b,_=g+(n.r-g)*c,f=m+(n.g-m)*c,p=v+(n.b-v)*c,y=Math.max(o,s),C=e.data,L=i*u+4*t,N=0;N<h;N++){for(var b=L,w=0;w<l;w++)C[b++]=_,C[b++]=f,C[b++]=p,C[b++]=y;L+=u}}}],[{key:"soften",value:function(e,t){for(var i=new Uint8ClampedArray(e.length),n=0,o=e.length;n<o;n++)i[n]=(0,ye.K)(e[n]*t);return i}}]),e}(),Le=i(33532),Ne={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},be=function(e){for(var t=new Uint8ClampedArray(e.length/2),i=0;i<e.length;i+=2)t[i>>1]=Ne[e[i]]<<4|15&Ne[e[i+1]];return t},we={1:(0,Le.I)((function(){return be("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")})),2:(0,Le.I)((function(){return be("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")}))},ke=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,null,[{key:"create",value:function(t,i){return this.lastCreated&&t===this.lastCreated.scale&&i===this.lastFontFamily?this.lastCreated:(n=we[t]?new Ce(we[t](),t):e.createFromSampleData(e.createSampleData(i).data,t),this.lastFontFamily=i,this.lastCreated=n,n);var n}},{key:"createSampleData",value:function(e){var t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="".concat(16,"px"),t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font="bold ".concat(16,"px ",e),i.textBaseline="middle";var o,r=0,s=(0,n.Z)(pe);try{for(s.s();!(o=s.n()).done;){var a=o.value;i.fillText(String.fromCharCode(a),r,8),r+=10}}catch(l){s.e(l)}finally{s.f()}return i.getImageData(0,0,960,16)}},{key:"createFromSampleData",value:function(t,i){if(61440!==t.length)throw new Error("Unexpected source in MinimapCharRenderer");var n=e._downsample(t,i);return new Ce(n,i)}},{key:"_downsampleChar",value:function(e,t,i,n,o){for(var r=1*o,s=2*o,a=n,l=0,d=0;d<s;d++)for(var h=d/s*16,u=(d+1)/s*16,c=0;c<r;c++){for(var g=c/r*10,m=(c+1)/r*10,v=0,_=0,f=h;f<u;f++)for(var p=t+3840*Math.floor(f),y=1-(f-Math.floor(f)),C=g;C<m;C++){var L=1-(C-Math.floor(C)),N=p+4*Math.floor(C),b=L*y;_+=b,v+=e[N]*e[N+3]/255*b}var w=v/_;l=Math.max(l,w),i[a++]=(0,ye.K)(w)}return l}},{key:"_downsample",value:function(e,t){for(var i=2*t*1*t,n=96*i,o=new Uint8ClampedArray(n),r=0,s=0,a=0,l=0;l<96;l++)a=Math.max(a,this._downsampleChar(e,s,o,r,t)),r+=i,s+=40;if(a>0)for(var d=255/a,h=0;h<n;h++)o[h]*=d;return o}}]),e}(),Re=i(36158),Se=function(){function e(t,i,n){var r=this;(0,o.Z)(this,e);var s=t.options,a=s.get(131),l=s.get(133),d=l.minimap,h=s.get(46),u=s.get(67);this.renderMinimap=d.renderMinimap,this.size=u.size,this.minimapHeightIsEditorHeight=d.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(96),this.showSlider=u.showSlider,this.autohide=u.autohide,this.pixelRatio=a,this.typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(61),this.minimapLeft=d.minimapLeft,this.minimapWidth=d.minimapWidth,this.minimapHeight=l.height,this.canvasInnerWidth=d.minimapCanvasInnerWidth,this.canvasInnerHeight=d.minimapCanvasInnerHeight,this.canvasOuterWidth=d.minimapCanvasOuterWidth,this.canvasOuterHeight=d.minimapCanvasOuterHeight,this.isSampling=d.minimapIsSampling,this.editorHeight=l.height,this.fontScale=d.minimapScale,this.minimapLineHeight=d.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,Le.I)((function(){return ke.create(r.fontScale,h.fontFamily)})),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=e._getMinimapBackground(i,this.defaultBackgroundColor),this.foregroundAlpha=e._getMinimapForegroundOpacity(i)}return(0,r.Z)(e,[{key:"equals",value:function(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}],[{key:"_getMinimapBackground",value:function(e,t){var i=e.getColor(E.kVY);return i?new me.h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}},{key:"_getMinimapForegroundOpacity",value:function(e){var t=e.getColor(E.Itd);return t?me.h._clamp(Math.round(255*t.rgba.a)):255}}]),e}(),De=function(){function e(t,i,n,r,s,a,l,d){(0,o.Z)(this,e),this.scrollTop=t,this.scrollHeight=i,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=a,this.startLineNumber=l,this.endLineNumber=d}return(0,r.Z)(e,[{key:"getDesiredScrollTopFromDelta",value:function(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}},{key:"getDesiredScrollTopFromTouchLocation",value:function(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}}],[{key:"create",value:function(t,i,n,o,r,s,a,l,d,h,u){var c,g,m=t.pixelRatio,v=t.minimapLineHeight,_=Math.floor(t.canvasInnerHeight/v),f=t.lineHeight;if(t.minimapHeightIsEditorHeight){var p=l*t.lineHeight+(t.scrollBeyondLastLine?r-t.lineHeight:0),y=Math.max(1,Math.floor(r*r/p)),C=Math.max(0,t.minimapHeight-y),L=C/(h-r),N=d*L,b=C>0,w=Math.floor(t.canvasInnerHeight/t.minimapLineHeight);return new e(d,h,b,L,N,y,1,Math.min(a,w))}if(s&&n!==a){var k=n-i+1;c=Math.floor(k*v/m)}else{var R=r/f;c=Math.floor(R*v/m)}g=t.scrollBeyondLastLine?(a-1)*v/m:Math.max(0,a*v/m-c);var S=(g=Math.min(t.minimapHeight-c,g))/(h-r),D=d*S,x=0;t.scrollBeyondLastLine&&(x=r/f-1);if(_>=a+x){return new e(d,h,g>0,S,D,c,1,a)}var M=Math.max(1,Math.floor(i-D*m/v));return u&&u.scrollHeight===h&&(u.scrollTop>d&&(M=Math.min(M,u.startLineNumber)),u.scrollTop<d&&(M=Math.max(M,u.startLineNumber))),new e(d,h,!0,S,(i-M+(d-o)/f)*v/m,c,M,Math.min(a,M+_-1))}}]),e}(),xe=function(){function e(t){(0,o.Z)(this,e),this.dy=t}return(0,r.Z)(e,[{key:"onContentChanged",value:function(){this.dy=-1}},{key:"onTokensChanged",value:function(){this.dy=-1}}]),e}();xe.INVALID=new xe(-1);var Me=function(){function e(t,i,n){(0,o.Z)(this,e),this.renderedLayout=t,this._imageData=i,this._renderedLines=new ee.F((function(){return xe.INVALID})),this._renderedLines._set(t.startLineNumber,n)}return(0,r.Z)(e,[{key:"linesEquals",value:function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get().lines,i=0,n=t.length;i<n;i++)if(-1===t[i].dy)return!1;return!0}},{key:"scrollEquals",value:function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}},{key:"_get",value:function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}},{key:"onLinesChanged",value:function(e,t){return this._renderedLines.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){this._renderedLines.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._renderedLines.onLinesInserted(e,t)}},{key:"onTokensChanged",value:function(e){return this._renderedLines.onTokensChanged(e)}}]),e}(),We=function(){function e(t,i,n,r){(0,o.Z)(this,e),this._backgroundFillData=e._createBackgroundFillData(i,n,r),this._buffers=[t.createImageData(i,n),t.createImageData(i,n)],this._lastUsedBuffer=0}return(0,r.Z)(e,[{key:"getBuffer",value:function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}}],[{key:"_createBackgroundFillData",value:function(e,t,i){for(var n=i.r,o=i.g,r=i.b,s=i.a,a=new Uint8ClampedArray(e*t*4),l=0,d=0;d<t;d++)for(var h=0;h<e;h++)a[l]=n,a[l+1]=o,a[l+2]=r,a[l+3]=s,l+=4;return a}}]),e}(),Ae=function(){function e(t,i){(0,o.Z)(this,e),this.samplingRatio=t,this.minimapLines=i}return(0,r.Z)(e,[{key:"modelLineToMinimapLine",value:function(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}},{key:"modelLineRangeToMinimapLineRange",value:function(e,t){for(var i=this.modelLineToMinimapLine(e)-1;i>0&&this.minimapLines[i-1]>=e;)i--;for(var n=this.modelLineToMinimapLine(t)-1;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){var o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,n+1]}},{key:"decorationLineRangeToMinimapLineRange",value:function(e,t){var i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}},{key:"onLinesDeleted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length,n=0,o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}},{key:"onLinesInserted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}],[{key:"compute",value:function(t,i,n){if(0===t.renderMinimap||!t.isSampling)return[null,[]];var o=t.pixelRatio,r=t.lineHeight,s=t.scrollBeyondLastLine,a=ge.gk.computeContainedMinimapLineCount({viewLineCount:i,scrollBeyondLastLine:s,height:t.editorHeight,lineHeight:r,pixelRatio:o}).minimapLineCount,l=i/a,d=l/2;if(!n||0===n.minimapLines.length){var h=[];if(h[0]=1,a>1){for(var u=0,c=a-1;u<c;u++)h[u]=Math.round(u*l+d);h[a-1]=i}return[new e(l,h),[]]}for(var g=n.minimapLines,m=g.length,v=[],_=0,f=0,p=1,y=[],C=null,L=0;L<a;L++){for(var N=Math.max(p,Math.round(L*l)),b=Math.max(N,Math.round((L+1)*l));_<m&&g[_]<N;){if(y.length<10){var w=_+1+f;C&&"deleted"===C.type&&C._oldIndex===_-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:_,deleteFromLineNumber:w,deleteToLineNumber:w},y.push(C)),f--}_++}var k=void 0;if(_<m&&g[_]<=b)k=g[_],_++;else if(k=0===L?1:L+1===a?i:Math.round(L*l+d),y.length<10){var R=_+1+f;C&&"inserted"===C.type&&C._i===L-1?C.insertToLineNumber++:(C={type:"inserted",_i:L,insertFromLineNumber:R,insertToLineNumber:R},y.push(C)),f++}v[L]=k,p=k}if(y.length<10)for(;_<m;){var S=_+1+f;C&&"deleted"===C.type&&C._oldIndex===_-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:_,deleteFromLineNumber:S,deleteToLineNumber:S},y.push(C)),f--,_++}else y=[{type:"flush"}];return[new e(l,v),y]}}]),e}(),He=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e)).tokensColorTracker=ve.E.getInstance(),n._selections=[],n._minimapSelections=null,n.options=new Se(n._context.configuration,n._context.theme,n.tokensColorTracker);var r=Ae.compute(n.options,n._context.viewModel.getLineCount(),null),a=(0,L.Z)(r,1)[0];return n._samplingState=a,n._shouldCheckSampling=!1,n._actual=new Ie(e.theme,(0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._actual.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._actual.getDomNode()}},{key:"_onOptionsMaybeChanged",value:function(){var e=new Se(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}},{key:"onFlushed",value:function(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}},{key:"onLinesChanged",value:function(e){if(this._samplingState){var t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){if(this._samplingState){var t=this._samplingState.onLinesDeleted(e),i=(0,L.Z)(t,2),n=i[0],o=i[1];return n<=o&&this._actual.onLinesChanged(n+1,o-n+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesInserted",value:function(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}},{key:"onScrollChanged",value:function(e){return this._actual.onScrollChanged()}},{key:"onThemeChanged",value:function(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}},{key:"onTokensChanged",value:function(e){if(this._samplingState){var t,i=[],o=(0,n.Z)(e.ranges);try{for(o.s();!(t=o.n()).done;){var r=t.value,s=this._samplingState.modelLineRangeToMinimapLineRange(r.fromLineNumber,r.toLineNumber);s&&i.push({fromLineNumber:s[0],toLineNumber:s[1]})}}catch(a){o.e(a)}finally{o.f()}return!!i.length&&this._actual.onTokensChanged(i)}return this._actual.onTokensChanged(e.ranges)}},{key:"onTokensColorsChanged",value:function(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}},{key:"onZonesChanged",value:function(e){return this._actual.onZonesChanged()}},{key:"prepareRender",value:function(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}},{key:"render",value:function(e){var t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));var n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}},{key:"_recreateLineSampling",value:function(){this._minimapSelections=null;var e=Boolean(this._samplingState),t=Ae.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState),i=(0,L.Z)(t,2),o=i[0],r=i[1];if(this._samplingState=o,e&&this._samplingState){var s,a=(0,n.Z)(r);try{for(a.s();!(s=a.n()).done;){var l=s.value;switch(l.type){case"deleted":this._actual.onLinesDeleted(l.deleteFromLineNumber,l.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(l.insertFromLineNumber,l.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}}catch(d){a.e(d)}finally{a.f()}}}},{key:"getLineCount",value:function(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}},{key:"getRealLineCount",value:function(){return this._context.viewModel.getLineCount()}},{key:"getLineContent",value:function(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}},{key:"getLineMaxColumn",value:function(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,i){if(this._samplingState){for(var n=[],o=0,r=t-e+1;o<r;o++)i[o]?n[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}},{key:"getSelections",value:function(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];var e,t=(0,n.Z)(this._selections);try{for(t.s();!(e=t.n()).done;){var i=e.value,o=this._samplingState.decorationLineRangeToMinimapLineRange(i.startLineNumber,i.endLineNumber),r=(0,L.Z)(o,2),s=r[0],a=r[1];this._minimapSelections.push(new c.Y(s,i.startColumn,a,i.endColumn))}}catch(l){t.e(l)}finally{t.f()}}else this._minimapSelections=this._selections;return this._minimapSelections}},{key:"getMinimapDecorationsInViewport",value:function(e,t){var i;if(this._samplingState){var o=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new I.e(o,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new I.e(e,1,t,this._context.viewModel.getLineMaxColumn(t));var s=this._context.viewModel.getDecorationsInViewport(i);if(this._samplingState){var a,l=[],d=(0,n.Z)(s);try{for(d.s();!(a=d.n()).done;){var h=a.value;if(h.options.minimap){var u=h.range,c=this._samplingState.modelLineToMinimapLine(u.startLineNumber),g=this._samplingState.modelLineToMinimapLine(u.endLineNumber);l.push(new _e.$l(new I.e(c,u.startColumn,g,u.endColumn),h.options))}}}catch(m){d.e(m)}finally{d.f()}return l}return s}},{key:"getOptions",value:function(){return this._context.viewModel.model.getOptions()}},{key:"revealLineNumber",value:function(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new I.e(e,1,e,1),1,0)}},{key:"setScrollTop",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}]),i}(C.E),Ie=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,o.Z)(this,i),(r=t.call(this))._renderDecorations=!1,r._gestureInProgress=!1,r._theme=e,r._model=n,r._lastRenderData=null,r._buffers=null,r._selectionColor=r._theme.getColor(E.ov3),r._domNode=(0,g.X)(document.createElement("div")),C.K.write(r._domNode,8),r._domNode.setClassName(r._getMinimapDomNodeClassName()),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._shadow=(0,g.X)(document.createElement("div")),r._shadow.setClassName("minimap-shadow-hidden"),r._domNode.appendChild(r._shadow),r._canvas=(0,g.X)(document.createElement("canvas")),r._canvas.setPosition("absolute"),r._canvas.setLeft(0),r._domNode.appendChild(r._canvas),r._decorationsCanvas=(0,g.X)(document.createElement("canvas")),r._decorationsCanvas.setPosition("absolute"),r._decorationsCanvas.setClassName("minimap-decorations-layer"),r._decorationsCanvas.setLeft(0),r._domNode.appendChild(r._decorationsCanvas),r._slider=(0,g.X)(document.createElement("div")),r._slider.setPosition("absolute"),r._slider.setClassName("minimap-slider"),r._slider.setLayerHinting(!0),r._slider.setContain("strict"),r._domNode.appendChild(r._slider),r._sliderHorizontal=(0,g.X)(document.createElement("div")),r._sliderHorizontal.setPosition("absolute"),r._sliderHorizontal.setClassName("minimap-slider-horizontal"),r._slider.appendChild(r._sliderHorizontal),r._applyLayout(),r._pointerDownListener=u.addStandardDisposableListener(r._domNode.domNode,u.EventType.POINTER_DOWN,(function(e){if(e.preventDefault(),0!==r._model.options.renderMinimap&&r._lastRenderData)if("proportional"===r._model.options.size){var t=r._model.options.minimapLineHeight,i=r._model.options.canvasInnerHeight/r._model.options.canvasOuterHeight*e.offsetY,n=Math.floor(i/t)+r._lastRenderData.renderedLayout.startLineNumber;n=Math.min(n,r._model.getLineCount()),r._model.revealLineNumber(n)}else if(0===e.button&&r._lastRenderData){var o=u.getDomNodePagePosition(r._slider.domNode),s=o.top+o.height/2;r._startSliderDragging(e,s,r._lastRenderData.renderedLayout)}})),r._sliderPointerMoveMonitor=new he.C,r._sliderPointerDownListener=u.addStandardDisposableListener(r._slider.domNode,u.EventType.POINTER_DOWN,(function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&r._lastRenderData&&r._startSliderDragging(e,e.pageY,r._lastRenderData.renderedLayout)})),r._gestureDisposable=fe.o.addTarget(r._domNode.domNode),r._sliderTouchStartListener=u.addDisposableListener(r._domNode.domNode,fe.t.Start,(function(e){e.preventDefault(),e.stopPropagation(),r._lastRenderData&&(r._slider.toggleClassName("active",!0),r._gestureInProgress=!0,r.scrollDueToTouchEvent(e))}),{passive:!1}),r._sliderTouchMoveListener=u.addDisposableListener(r._domNode.domNode,fe.t.Change,(function(e){e.preventDefault(),e.stopPropagation(),r._lastRenderData&&r._gestureInProgress&&r.scrollDueToTouchEvent(e)}),{passive:!1}),r._sliderTouchEndListener=u.addStandardDisposableListener(r._domNode.domNode,fe.t.End,(function(e){e.preventDefault(),e.stopPropagation(),r._gestureInProgress=!1,r._slider.toggleClassName("active",!1)})),r}return(0,r.Z)(i,[{key:"_startSliderDragging",value:function(e,t,i){var n=this;if(e.target&&e.target instanceof Element){var o=e.pageX;this._slider.toggleClassName("active",!0);var r=function(e,r){var s=Math.abs(r-o);if(J.ED&&s>140)n._model.setScrollTop(i.scrollTop);else{var a=e-t;n._model.setScrollTop(i.getDesiredScrollTopFromDelta(a))}};e.pageY!==t&&r(e.pageY,o),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return r(e.pageY,e.pageX)}),(function(){n._slider.toggleClassName("active",!1)}))}}},{key:"scrollDueToTouchEvent",value:function(e){var t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}},{key:"dispose",value:function(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_getMinimapDomNodeClassName",value:function(){var e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_applyLayout",value:function(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}},{key:"_getBuffer",value:function(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new We(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}},{key:"onDidChangeOptions",value:function(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}},{key:"onSelectionChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onDecorationsChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onFlushed",value:function(){return this._lastRenderData=null,!0}},{key:"onLinesChanged",value:function(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesDeleted(e,t),!0}},{key:"onLinesInserted",value:function(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesInserted(e,t),!0}},{key:"onScrollChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onThemeChanged",value:function(){return this._selectionColor=this._theme.getColor(E.ov3),this._renderDecorations=!0,!0}},{key:"onTokensChanged",value:function(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}},{key:"onTokensColorsChanged",value:function(){return this._lastRenderData=null,this._buffers=null,!0}},{key:"onZonesChanged",value:function(){return this._lastRenderData=null,!0}},{key:"render",value:function(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var t=De.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}},{key:"renderDecorations",value:function(e){if(this._renderDecorations){this._renderDecorations=!1;var t=this._model.getSelections();t.sort(I.e.compareRangesUsingStarts);var i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((function(e,t){return(e.options.zIndex||0)-(t.options.zIndex||0)}));var n=this._model.options,o=n.canvasInnerWidth,r=n.canvasInnerHeight,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,o,r);var h=new Te(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,h,e,s),this._renderDecorationsLineHighlights(d,i,h,e,s);var u=new Te(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,u,e,s,l,a,o),this._renderDecorationsHighlights(d,i,u,e,s,l,a,o)}}},{key:"_renderSelectionLineHighlights",value:function(e,t,i,o,r){if(this._selectionColor&&!this._selectionColor.isTransparent()){e.fillStyle=this._selectionColor.transparent(.5).toString();var s,a=0,l=0,d=(0,n.Z)(t);try{for(d.s();!(s=d.n()).done;){var h=s.value,u=Math.max(o.startLineNumber,h.startLineNumber),c=Math.min(o.endLineNumber,h.endLineNumber);if(!(u>c)){for(var g=u;g<=c;g++)i.set(g,!0);var m=(u-o.startLineNumber)*r,v=(c-o.startLineNumber)*r+r;l>=m||(l>a&&e.fillRect(ge.y0,a,e.canvas.width,l-a),a=m),l=v}}}catch(_){d.e(_)}finally{d.f()}l>a&&e.fillRect(ge.y0,a,e.canvas.width,l-a)}}},{key:"_renderDecorationsLineHighlights",value:function(e,t,i,n,o){for(var r=new Map,s=t.length-1;s>=0;s--){var a=t[s],l=a.options.minimap;if(l&&l.position===Re.F5.Inline){var d=Math.max(n.startLineNumber,a.range.startLineNumber),h=Math.min(n.endLineNumber,a.range.endLineNumber);if(!(d>h)){var u=l.getColor(this._theme.value);if(u&&!u.isTransparent()){var c=r.get(u.toString());c||(c=u.transparent(.5).toString(),r.set(u.toString(),c)),e.fillStyle=c;for(var g=d;g<=h;g++)if(!i.has(g)){i.set(g,!0);var m=(d-n.startLineNumber)*o;e.fillRect(ge.y0,m,e.canvas.width,o)}}}}}}},{key:"_renderSelectionsHighlights",value:function(e,t,i,o,r,s,a,l){if(this._selectionColor&&!this._selectionColor.isTransparent()){var d,h=(0,n.Z)(t);try{for(h.s();!(d=h.n()).done;){var u=d.value,c=Math.max(o.startLineNumber,u.startLineNumber),g=Math.min(o.endLineNumber,u.endLineNumber);if(!(c>g))for(var m=c;m<=g;m++)this.renderDecorationOnLine(e,i,u,this._selectionColor,o,m,r,r,s,a,l)}}catch(v){h.e(v)}finally{h.f()}}}},{key:"_renderDecorationsHighlights",value:function(e,t,i,o,r,s,a,l){var d,h=(0,n.Z)(t);try{for(h.s();!(d=h.n()).done;){var u=d.value,c=u.options.minimap;if(c){var g=Math.max(o.startLineNumber,u.range.startLineNumber),m=Math.min(o.endLineNumber,u.range.endLineNumber);if(!(g>m)){var v=c.getColor(this._theme.value);if(v&&!v.isTransparent())for(var _=g;_<=m;_++)switch(c.position){case Re.F5.Inline:this.renderDecorationOnLine(e,i,u.range,v,o,_,r,r,s,a,l);continue;case Re.F5.Gutter:var f=(_-o.startLineNumber)*r;this.renderDecoration(e,v,2,f,2,r);continue}}}}}catch(p){h.e(p)}finally{h.f()}}},{key:"renderDecorationOnLine",value:function(e,t,i,n,o,r,s,a,l,d,h){var u=(r-o.startLineNumber)*a;if(!(u+s<0||u>this._model.options.canvasInnerHeight)){var c=i.startLineNumber,g=i.endLineNumber,m=c===r?i.startColumn:1,v=g===r?i.endColumn:this._model.getLineMaxColumn(r),_=this.getXOffsetForPosition(t,r,m,l,d,h),f=this.getXOffsetForPosition(t,r,v,l,d,h);this.renderDecoration(e,n,_,u,f-_,s)}}},{key:"getXOffsetForPosition",value:function(e,t,i,n,o,r){if(1===i)return ge.y0;if((i-1)*o>=r)return r;var s=e.get(t);if(!s){var a=this._model.getLineContent(t);s=[ge.y0];for(var l=ge.y0,d=1;d<a.length+1;d++){var h=a.charCodeAt(d-1),u=l+(9===h?n*o:ce.K7(h)?2*o:o);if(u>=r){s[d]=r;break}s[d]=u,l=u}e.set(t,s)}return i-1<s.length?s[i-1]:r}},{key:"renderDecoration",value:function(e,t,i,n,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,r)}},{key:"renderLines",value:function(e){var t=e.startLineNumber,n=e.endLineNumber,o=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){var r=this._lastRenderData._get();return new Me(e,r.imageData,r.lines)}var s=this._getBuffer();if(!s)return null;for(var a=i._renderUntouchedLines(s,t,n,o,this._lastRenderData),l=(0,L.Z)(a,3),d=l[0],h=l[1],u=l[2],c=this._model.getMinimapLinesRenderingData(t,n,u),g=this._model.getOptions().tabSize,m=this._model.options.defaultBackgroundColor,v=this._model.options.backgroundColor,_=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,p=f.backgroundIsLight(),y=this._model.options.renderMinimap,C=this._model.options.charRenderer(),N=this._model.options.fontScale,b=this._model.options.minimapCharWidth,w=(1===y?2:3)*N,k=o>w?Math.floor((o-w)/2):0,R=v.a/255,S=new me.h(Math.round((v.r-m.r)*R+m.r),Math.round((v.g-m.g)*R+m.g),Math.round((v.b-m.b)*R+m.b),255),D=0,x=[],M=0,W=n-t+1;M<W;M++)u[M]&&i._renderLine(s,S,v.a,p,y,b,f,_,C,D,k,g,c[M],N,o),x[M]=new xe(D),D+=o;var A=-1===d?0:d,H=(-1===h?s.height:h)-A;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,A,s.width,H),new Me(e,s,x)}}],[{key:"_renderUntouchedLines",value:function(e,t,i,n,o){var r=[];if(!o){for(var s=0,a=i-t+1;s<a;s++)r[s]=!0;return[-1,-1,r]}for(var l=o._get(),d=l.imageData.data,h=l.rendLineNumberStart,u=l.lines,c=u.length,g=e.width,m=e.data,v=(i-t+1)*n*g*4,_=-1,f=-1,p=-1,y=-1,C=-1,L=-1,N=0,b=t;b<=i;b++){var w=b-t,k=b-h,R=k>=0&&k<c?u[k].dy:-1;if(-1!==R){var S=R*g*4,D=(R+n)*g*4,x=N*g*4,M=(N+n)*g*4;y===S&&L===x?(y=D,L=M):(-1!==p&&(m.set(d.subarray(p,y),C),-1===_&&0===p&&p===C&&(_=y),-1===f&&y===v&&p===C&&(f=p)),p=S,y=D,C=x,L=M),r[w]=!1,N+=n}else r[w]=!0,N+=n}return-1!==p&&(m.set(d.subarray(p,y),C),-1===_&&0===p&&p===C&&(_=y),-1===f&&y===v&&p===C&&(f=p)),[-1===_?-1:_/(4*g),-1===f?-1:f/(4*g),r]}},{key:"_renderLine",value:function(e,t,i,n,o,r,s,a,l,d,h,u,c,g,m){for(var v=c.content,_=c.tokens,f=e.width-r,p=1===m,y=ge.y0,C=0,L=0,N=0,b=_.getCount();N<b;N++)for(var w=_.getEndOffset(N),k=_.getForeground(N),R=s.getColor(k);C<w;C++){if(y>f)return;var S=v.charCodeAt(C);if(9===S){var D=u-(C+L)%u;L+=D-1,y+=D*r}else if(32===S)y+=r;else for(var x=ce.K7(S)?2:1,M=0;M<x;M++)if(2===o?l.blockRenderChar(e,y,d+h,R,a,t,i,p):l.renderChar(e,y,d+h,S,R,a,t,i,g,n,p),(y+=r)>f)return}}}]),i}(ue.JT),Te=function(){function e(t,i,n){(0,o.Z)(this,e),this._startLineNumber=t,this._endLineNumber=i,this._defaultValue=n,this._values=[];for(var r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=n}return(0,r.Z)(e,[{key:"has",value:function(e){return this.get(e)!==this._defaultValue}},{key:"set",value:function(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}},{key:"get",value:function(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}]),e}();(0,x.Ic)((function(e,t){var i=e.getColor(E.CA6);i&&t.addRule(".monaco-editor .minimap-slider .minimap-slider-horizontal { background: ".concat(i,"; }"));var n=e.getColor(E.Xy4);n&&t.addRule(".monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ".concat(n,"; }"));var o=e.getColor(E.brw);o&&t.addRule(".monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ".concat(o,"; }"));var r=e.getColor(E._wn);r&&t.addRule(".monaco-editor .minimap-shadow-visible { box-shadow: ".concat(r," -6px 0 6px -6px inset; }"))}));var Ze=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options.get(133);return n._widgets={},n._verticalScrollbarWidth=r.verticalScrollbarWidth,n._minimapWidth=r.minimap.minimapWidth,n._horizontalScrollbarHeight=r.horizontalScrollbarHeight,n._editorHeight=r.height,n._editorWidth=r.width,n._domNode=(0,g.X)(document.createElement("div")),C.K.write(n._domNode,4),n._domNode.setClassName("overlayWidgets"),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._widgets={}}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}},{key:"addWidget",value:function(e){var t=(0,g.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t){var i=this._widgets[e.getId()];return i.preference!==t&&(i.preference=t,this.setShouldRender(),!0)}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}},{key:"_renderWidget",value:function(e){var t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){var i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(t.setTop(0),t.domNode.style.right="50%");else t.setTop("")}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._editorWidth);for(var t=Object.keys(this._widgets),i=0,n=t.length;i<n;i++){var o=t[i];this._renderWidget(this._widgets[o])}}}]),i}(C.E),Oe=i(17424),Ee=i(56417),Pe=function(){function e(t,i){(0,o.Z)(this,e);var n=t.options;this.lineHeight=n.get(61),this.pixelRatio=n.get(131),this.overviewRulerLanes=n.get(76),this.renderBorder=n.get(75);var r=i.getColor(S.zw);this.borderColor=r?r.toString():null,this.hideCursor=n.get(54);var s=i.getColor(S.n0);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=i.type;var a=n.get(67),l=a.enabled,d=a.side,h=i.getColor(S.e_),u=Ee.RW.getDefaultBackground(),c=null;void 0!==h?c=h:l&&(c=u),this.backgroundColor=null===c||"left"===d?null:Oe.Il.Format.CSS.formatHex(c);var g=n.get(133).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);var m=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),v=(0,L.Z)(m,2),_=v[0],f=v[1];this.x=_,this.w=f}return(0,r.Z)(e,[{key:"_initLanes",value:function(e,t,i){var n=t-e;if(i>=3){var o=Math.floor(n/3),r=Math.floor(n/3),s=n-o-r,a=e+o;return[[0,e,a,e,e+o+s,e,a,e],[0,o,s,o+s,r,o+s+r,s+r,o+s+r]]}if(2===i){var l=Math.floor(n/2),d=n-l;return[[0,e,e,e,e+l,e,e,e],[0,l,l,l,d,l+d,l+d,l+d]]}return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]]}},{key:"equals",value:function(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}]),e}(),Fe=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e))._domNode=(0,g.X)(document.createElement("canvas")),n._domNode.setClassName("decorationsOverviewRuler"),n._domNode.setPosition("absolute"),n._domNode.setLayerHinting(!0),n._domNode.setContain("strict"),n._domNode.setAttribute("aria-hidden","true"),n._updateSettings(!1),n._tokensColorTrackerListener=Ee.RW.onDidChange((function(e){e.changedColorMap&&n._updateSettings(!0)})),n._cursorPositions=[],n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._tokensColorTrackerListener.dispose()}},{key:"_updateSettings",value:function(e){var t=new Pe(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._updateSettings(!1)}},{key:"onCursorStateChanged",value:function(e){this._cursorPositions=[];for(var t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(G.L.compare),!0}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsOverviewRuler}},{key:"onFlushed",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this._updateSettings(!1)}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._render()}},{key:"_render",value:function(){if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),void this._domNode.setDisplay("none");this._domNode.setDisplay("block");var e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,o=this._context.viewLayout,r=t/this._context.viewLayout.getScrollHeight(),s=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),a=6*this._settings.pixelRatio|0,l=a/2|0,d=this._domNode.domNode.getContext("2d");null===this._settings.backgroundColor?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));var h=this._settings.x,u=this._settings.w;s.sort(_e.SQ.cmp);var c,g=(0,n.Z)(s);try{for(g.s();!(c=g.n()).done;){var m=c.value,v=m.color,_=m.data;d.fillStyle=v;for(var f=0,p=0,y=0,C=0,L=_.length/3;C<L;C++){var N=_[3*C],b=_[3*C+1],w=_[3*C+2],k=o.getVerticalOffsetForLineNumber(b)*r|0,R=(o.getVerticalOffsetForLineNumber(w)+i)*r|0;if(R-k<a){var S=(k+R)/2|0;S<l?S=l:S+l>t&&(S=t-l),k=S-l,R=S+l}k>y+1||N!==f?(0!==C&&d.fillRect(h[f],p,u[f],y-p),f=N,p=k,y=R):R>y&&(y=R)}d.fillRect(h[f],p,u[f],y-p)}}catch(F){g.e(F)}finally{g.f()}if(!this._settings.hideCursor&&this._settings.cursorColor){var D=2*this._settings.pixelRatio|0,x=D/2|0,M=this._settings.x[7],W=this._settings.w[7];d.fillStyle=this._settings.cursorColor;for(var A=-100,H=-100,I=0,T=this._cursorPositions.length;I<T;I++){var Z=this._cursorPositions[I],O=o.getVerticalOffsetForLineNumber(Z.lineNumber)*r|0;O<x?O=x:O+x>t&&(O=t-x);var E=O-x,P=E+D;E>H+1?(0!==I&&d.fillRect(M,A,W,H-A),A=E,H=P):P>H&&(H=P)}d.fillRect(M,A,W,H-A)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}]),i}(C.E),Be=i(55522),Ve=i(82978),ze=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;(0,o.Z)(this,i),(r=t.call(this))._context=e;var a=r._context.configuration.options;return r._domNode=(0,g.X)(document.createElement("canvas")),r._domNode.setClassName(n),r._domNode.setPosition("absolute"),r._domNode.setLayerHinting(!0),r._domNode.setContain("strict"),r._zoneManager=new Be.Tj((function(e){return r._context.viewLayout.getVerticalOffsetForLineNumber(e)})),r._zoneManager.setDOMWidth(0),r._zoneManager.setDOMHeight(0),r._zoneManager.setOuterHeight(r._context.viewLayout.getScrollHeight()),r._zoneManager.setLineHeight(a.get(61)),r._zoneManager.setPixelRatio(a.get(131)),r._context.addEventHandler((0,s.Z)(r)),r}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(t.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(t.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}},{key:"onFlushed",value:function(e){return this._render(),!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}},{key:"onZonesChanged",value:function(e){return this._render(),!0}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"setLayout",value:function(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);var t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}},{key:"setZones",value:function(e){this._zoneManager.setZones(e),this._render()}},{key:"_render",value:function(){if(0===this._zoneManager.getOuterHeight())return!1;var e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}},{key:"_renderOneLane",value:function(e,t,i,o){var r,s=0,a=0,l=0,d=(0,n.Z)(t);try{for(d.s();!(r=d.n()).done;){var h=r.value,u=h.colorId,c=h.from,g=h.to;u!==s?(e.fillRect(0,a,o,l-a),s=u,e.fillStyle=i[s],a=c,l=g):l>=c?l=Math.max(l,g):(e.fillRect(0,a,o,l-a),a=c,l=g)}}catch(m){d.e(m)}finally{d.f()}e.fillRect(0,a,o,l-a)}}]),i}(Ve.O),Ge=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e)).domNode=(0,g.X)(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("view-rulers"),n._renderedRulers=[];var r=n._context.configuration.options;return n._rulers=r.get(93),n._typicalHalfwidthCharacterWidth=r.get(46).typicalHalfwidthCharacterWidth,n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._rulers=t.get(93),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"prepareRender",value:function(e){}},{key:"_ensureRulersCount",value:function(){var e=this._renderedRulers.length,t=this._rulers.length;if(e!==t)if(e<t)for(var i=this._context.viewModel.model.getOptions().tabSize,n=t-e;n>0;){var o=(0,g.X)(document.createElement("div"));o.setClassName("view-ruler"),o.setWidth(i),this.domNode.appendChild(o),this._renderedRulers.push(o),n--}else for(var r=e-t;r>0;){var s=this._renderedRulers.pop();this.domNode.removeChild(s),r--}}},{key:"render",value:function(e){this._ensureRulersCount();for(var t=0,i=this._rulers.length;t<i;t++){var n=this._renderedRulers[t],o=this._rulers[t];n.setBoxShadow(o.color?"1px 0 0 0 ".concat(o.color," inset"):""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}]),i}(C.E);(0,x.Ic)((function(e,t){var i=e.getColor(S.zk);i&&t.addRule(".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ".concat(i," inset; }"))}));var Ue=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this,e))._scrollTop=0,n._width=0,n._updateWidth(),n._shouldShow=!1;var r=n._context.configuration.options.get(94);return n._useShadows=r.useShadows,n._domNode=(0,g.X)(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_updateShouldShow",value:function(){var e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_updateWidth",value:function(){var e=this._context.configuration.options.get(133);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(94);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}},{key:"onScrollChanged",value:function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}]),i}(C.E);(0,x.Ic)((function(e,t){var i=e.getColor(E._wn);i&&t.addRule(".monaco-editor .scroll-decoration { box-shadow: ".concat(i," 0 6px 6px -6px inset; }"))}));var Xe=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null})),qe=(0,r.Z)((function e(t,i){(0,o.Z)(this,e),this.lineNumber=t,this.ranges=i}));function Ke(e){return new Xe(e)}function Ye(e){return new qe(e.lineNumber,e.ranges.map(Ke))}var je=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._previousFrameVisibleRangesWithStyle=[],n._context=e;var r=n._context.configuration.options;return n._lineHeight=r.get(61),n._roundedSelection=r.get(92),n._typicalHalfwidthCharacterWidth=r.get(46).typicalHalfwidthCharacterWidth,n._selections=[],n._renderResult=null,n._context.addEventHandler((0,s.Z)(n)),n}return(0,r.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._lineHeight=t.get(61),this._roundedSelection=t.get(92),this._typicalHalfwidthCharacterWidth=t.get(46).typicalHalfwidthCharacterWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_visibleRangesHaveGaps",value:function(e){for(var t=0,i=e.length;t<i;t++){if(e[t].ranges.length>1)return!0}return!1}},{key:"_enrichVisibleRangesWithStyle",value:function(e,t,i){var n=this._typicalHalfwidthCharacterWidth/4,o=null,r=null;if(i&&i.length>0&&t.length>0){var s=t[0].lineNumber;if(s===e.startLineNumber)for(var a=0;!o&&a<i.length;a++)i[a].lineNumber===s&&(o=i[a].ranges[0]);var l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(var d=i.length-1;!r&&d>=0;d--)i[d].lineNumber===l&&(r=i[d].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(var h=0,u=t.length;h<u;h++){var c=t[h].ranges[0],g=c.left,m=c.left+c.width,v={top:0,bottom:0},_={top:0,bottom:0};if(h>0){var f=t[h-1].ranges[0].left,p=t[h-1].ranges[0].left+t[h-1].ranges[0].width;Je(g-f)<n?v.top=2:g>f&&(v.top=1),Je(m-p)<n?_.top=2:f<m&&m<p&&(_.top=1)}else o&&(v.top=o.startStyle.top,_.top=o.endStyle.top);if(h+1<u){var y=t[h+1].ranges[0].left,C=t[h+1].ranges[0].left+t[h+1].ranges[0].width;Je(g-y)<n?v.bottom=2:y<g&&g<C&&(v.bottom=1),Je(m-C)<n?_.bottom=2:m<C&&(_.bottom=1)}else r&&(v.bottom=r.startStyle.bottom,_.bottom=r.endStyle.bottom);c.startStyle=v,c.endStyle=_}}},{key:"_getVisibleRangesWithStyle",value:function(e,t,i){var n=(t.linesVisibleRangesForRange(e,!0)||[]).map(Ye);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}},{key:"_createSelectionPiece",value:function(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}},{key:"_actualRenderOneSelection",value:function(e,t,n,o){if(0!==o.length)for(var r=!!o[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=o[0].lineNumber,d=o[o.length-1].lineNumber,h=0,u=o.length;h<u;h++){for(var c=o[h],g=c.lineNumber,m=g-t,v=n&&(g===d||g===l)?a:s,_=n&&g===l?1:0,f="",p="",y=0,C=c.ranges.length;y<C;y++){var L=c.ranges[y];if(r){var N=L.startStyle,b=L.endStyle;if(1===N.top||1===N.bottom){f+=this._createSelectionPiece(_,v,i.SELECTION_CLASS_NAME,L.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH);var w=i.EDITOR_BACKGROUND_CLASS_NAME;1===N.top&&(w+=" "+i.SELECTION_TOP_RIGHT),1===N.bottom&&(w+=" "+i.SELECTION_BOTTOM_RIGHT),f+=this._createSelectionPiece(_,v,w,L.left-i.ROUNDED_PIECE_WIDTH,i.ROUNDED_PIECE_WIDTH)}if(1===b.top||1===b.bottom){f+=this._createSelectionPiece(_,v,i.SELECTION_CLASS_NAME,L.left+L.width,i.ROUNDED_PIECE_WIDTH);var k=i.EDITOR_BACKGROUND_CLASS_NAME;1===b.top&&(k+=" "+i.SELECTION_TOP_LEFT),1===b.bottom&&(k+=" "+i.SELECTION_BOTTOM_LEFT),f+=this._createSelectionPiece(_,v,k,L.left+L.width,i.ROUNDED_PIECE_WIDTH)}}var R=i.SELECTION_CLASS_NAME;if(r){var S=L.startStyle,D=L.endStyle;0===S.top&&(R+=" "+i.SELECTION_TOP_LEFT),0===S.bottom&&(R+=" "+i.SELECTION_BOTTOM_LEFT),0===D.top&&(R+=" "+i.SELECTION_TOP_RIGHT),0===D.bottom&&(R+=" "+i.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(_,v,R,L.left,L.width)}e[m][0]+=f,e[m][1]+=p}}},{key:"prepareRender",value:function(e){for(var t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=i;o<=n;o++){t[o-i]=["",""]}for(var r=[],s=0,a=this._selections.length;s<a;s++){var l=this._selections[s];if(l.isEmpty())r[s]=null;else{var d=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);r[s]=d,this._actualRenderOneSelection(t,i,this._selections.length>1,d)}}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map((function(e){var t=(0,L.Z)(e,2);return t[0]+t[1]}))}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(R.i);function Je(e){return e<0?-e:e}je.SELECTION_CLASS_NAME="selected-text",je.SELECTION_TOP_LEFT="top-left-radius",je.SELECTION_BOTTOM_LEFT="bottom-left-radius",je.SELECTION_TOP_RIGHT="top-right-radius",je.SELECTION_BOTTOM_RIGHT="bottom-right-radius",je.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",je.ROUNDED_PIECE_WIDTH=10,(0,x.Ic)((function(e,t){var i=e.getColor(E.hEj);i&&t.addRule(".monaco-editor .focused .selected-text { background-color: ".concat(i,"; }"));var n=e.getColor(E.ES4);n&&t.addRule(".monaco-editor .selected-text { background-color: ".concat(n,"; }"));var o=e.getColor(E.yb5);o&&!o.isTransparent()&&t.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(o,"; }"))}));var $e=(0,r.Z)((function e(t,i,n,r,s,a){(0,o.Z)(this,e),this.top=t,this.left=i,this.width=n,this.height=r,this.textContent=s,this.textContentClassName=a})),Qe=function(){function e(t){(0,o.Z)(this,e),this._context=t;var i=this._context.configuration.options,n=i.get(46);this._cursorStyle=i.get(24),this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,g.X)(document.createElement("div")),this._domNode.setClassName("cursor ".concat(ie.S)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,Q.N)(this._domNode,n),this._domNode.setDisplay("none"),this._position=new G.L(1,1),this._lastRenderedContent="",this._renderData=null}return(0,r.Z)(e,[{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._position}},{key:"show",value:function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}},{key:"hide",value:function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(46);return this._cursorStyle=t.get(24),this._lineHeight=t.get(61),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),(0,Q.N)(this._domNode,i),!0}},{key:"onCursorPositionChanged",value:function(e){return this._position=e,!0}},{key:"_getGraphemeAwarePosition",value:function(){var e=this._position,t=e.lineNumber,i=e.column,n=this._context.viewModel.getLineContent(t),o=ce.J_(n,i-1),r=(0,L.Z)(o,2),s=r[0],a=r[1];return[new G.L(t,s+1),n.substring(s,a)]}},{key:"_prepareRender",value:function(e){var t="",i=this._getGraphemeAwarePosition(),n=(0,L.Z)(i,2),o=n[0],r=n[1];if(this._cursorStyle===ge.d2.Line||this._cursorStyle===ge.d2.LineThin){var s,a=e.visibleRangeForPosition(o);if(!a||a.outsideRenderedLine)return null;this._cursorStyle===ge.d2.Line?(s=u.computeScreenAwareSize(this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=r):s=u.computeScreenAwareSize(1);var l=a.left;s>=2&&l>=1&&(l-=1);var d=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta;return new $e(d,l,s,this._lineHeight,t,"")}var h=e.linesVisibleRangesForRange(new I.e(o.lineNumber,o.column,o.lineNumber,o.column+r.length),!1);if(!h||0===h.length)return null;var c=h[0];if(c.outsideRenderedLine||0===c.ranges.length)return null;var g=c.ranges[0],m="\t"===r||g.width<1?this._typicalHalfwidthCharacterWidth:g.width,v="";if(this._cursorStyle===ge.d2.Block){var _=this._context.viewModel.getViewLineData(o.lineNumber);t=r;var f=_.tokens.findTokenIndexAtOffset(o.column-1);v=_.tokens.getClassName(f)}var p=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta,y=this._lineHeight;return this._cursorStyle!==ge.d2.Underline&&this._cursorStyle!==ge.d2.UnderlineThin||(p+=this._lineHeight-2,y=2),new $e(p,g.left,m,y,t,v)}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRender(e)}},{key:"render",value:function(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(ie.S," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}]),e}(),et=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options;return n._readOnly=r.get(83),n._cursorBlinking=r.get(22),n._cursorStyle=r.get(24),n._cursorSmoothCaretAnimation=r.get(23),n._selectionIsEmpty=!0,n._isComposingInput=!1,n._isVisible=!1,n._primaryCursor=new Qe(n._context),n._secondaryCursors=[],n._renderData=[],n._domNode=(0,g.X)(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n._updateDomClassName(),n._domNode.appendChild(n._primaryCursor.getDomNode()),n._startCursorBlinkAnimation=new $._F,n._cursorFlatBlinkInterval=new $.zh,n._blinkingEnabled=!1,n._editorHasFocus=!1,n._updateBlinking(),n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onCompositionStart",value:function(e){return this._isComposingInput=!0,this._updateBlinking(),!0}},{key:"onCompositionEnd",value:function(e){return this._isComposingInput=!1,this._updateBlinking(),!0}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;this._readOnly=t.get(83),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(var i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}},{key:"_onCursorPositionChanged",value:function(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length)for(var i=t.length-this._secondaryCursors.length,n=0;n<i;n++){var o=new Qe(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}else if(this._secondaryCursors.length>t.length)for(var r=this._secondaryCursors.length-t.length,s=0;s<r;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var a=0;a<t.length;a++)this._secondaryCursors[a].onCursorPositionChanged(t[a])}},{key:"onCursorStateChanged",value:function(e){for(var t=[],i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));var o=e.selections[0].isEmpty();return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,this._updateDomClassName()),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onTokensChanged",value:function(e){var t=function(t){for(var i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;var i,o=(0,n.Z)(this._secondaryCursors);try{for(o.s();!(i=o.n()).done;){if(t(i.value.getPosition()))return!0}}catch(r){o.e(r)}finally{o.f()}return!1}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getCursorBlinking",value:function(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}},{key:"_updateBlinking",value:function(){var e=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var t=this._getCursorBlinking(),n=0===t,o=5===t;n?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),n||o||(1===t?this._cursorFlatBlinkInterval.cancelAndSet((function(){e._isVisible?e._hide():e._show()}),i.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet((function(){e._blinkingEnabled=!0,e._updateDomClassName()}),i.BLINK_INTERVAL))}},{key:"_updateDomClassName",value:function(){this._domNode.setClassName(this._getClassName())}},{key:"_getClassName",value:function(){var e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ge.d2.Line:e+=" cursor-line-style";break;case ge.d2.Block:e+=" cursor-block-style";break;case ge.d2.Underline:e+=" cursor-underline-style";break;case ge.d2.LineThin:e+=" cursor-line-thin-style";break;case ge.d2.BlockOutline:e+=" cursor-block-outline-style";break;case ge.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}},{key:"_show",value:function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}},{key:"_hide",value:function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}},{key:"prepareRender",value:function(e){this._primaryCursor.prepareRender(e);for(var t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}},{key:"render",value:function(e){var t=[],i=0,n=this._primaryCursor.render(e);n&&(t[i++]=n);for(var o=0,r=this._secondaryCursors.length;o<r;o++){var s=this._secondaryCursors[o].render(e);s&&(t[i++]=s)}this._renderData=t}},{key:"getLastRenderData",value:function(){return this._renderData}}]),i}(C.E);et.BLINK_INTERVAL=500,(0,x.Ic)((function(e,t){var i=e.getColor(S.n0);if(i){var n=e.getColor(S.fY);n||(n=i.opposite()),t.addRule(".monaco-editor .inputarea.ime-input { caret-color: ".concat(i,"; }")),t.addRule(".monaco-editor .cursors-layer .cursor { background-color: ".concat(i,"; border-color: ").concat(i,"; color: ").concat(n,"; }")),(0,M.c3)(e.type)&&t.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ".concat(n,"; border-right: 1px solid ").concat(n,"; }"))}}));var tt=function(){throw new Error("Invalid change accessor")},it=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;(0,o.Z)(this,i);var r=(n=t.call(this,e))._context.configuration.options,s=r.get(133);return n._lineHeight=r.get(61),n._contentWidth=s.contentWidth,n._contentLeft=s.contentLeft,n.domNode=(0,g.X)(document.createElement("div")),n.domNode.setClassName("view-zones"),n.domNode.setPosition("absolute"),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.marginDomNode=(0,g.X)(document.createElement("div")),n.marginDomNode.setClassName("margin-view-zones"),n.marginDomNode.setPosition("absolute"),n.marginDomNode.setAttribute("role","presentation"),n.marginDomNode.setAttribute("aria-hidden","true"),n._zones={},n}return(0,r.Z)(i,[{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this),this._zones={}}},{key:"_recomputeWhitespacesProps",value:function(){var e,t=this,i=this._context.viewLayout.getWhitespaces(),o=new Map,r=(0,n.Z)(i);try{for(r.s();!(e=r.n()).done;){var s=e.value;o.set(s.id,s)}}catch(l){r.e(l)}finally{r.f()}var a=!1;return this._context.viewModel.changeWhitespace((function(e){for(var i=Object.keys(t._zones),n=0,r=i.length;n<r;n++){var s=i[n],l=t._zones[s],d=t._computeWhitespaceProps(l.delegate);l.isInHiddenArea=d.isInHiddenArea;var h=o.get(s);!h||h.afterLineNumber===d.afterViewLineNumber&&h.height===d.heightInPx||(e.changeOneWhitespace(s,d.afterViewLineNumber,d.heightInPx),t._safeCallOnComputedHeight(l.delegate,d.heightInPx),a=!0)}})),a}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(133);return this._lineHeight=t.get(61),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}},{key:"onLineMappingChanged",value:function(e){return this._recomputeWhitespacesProps()}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"_getZoneOrdinal",value:function(e){return"undefined"!==typeof e.afterColumn?e.afterColumn:1e4}},{key:"_computeWhitespaceProps",value:function(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};var t,i;if("undefined"!==typeof e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var n=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new G.L(n,this._context.viewModel.model.getLineMaxColumn(n))}i=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});var o=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),r=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:o.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}},{key:"changeViewZones",value:function(e){var t=this,i=!1;return this._context.viewModel.changeWhitespace((function(n){var o={addZone:function(e){return i=!0,t._addZone(n,e)},removeZone:function(e){e&&(i=t._removeZone(n,e)||i)},layoutZone:function(e){e&&(i=t._layoutZone(n,e)||i)}};!function(e,t){try{e(t)}catch(i){(0,m.dL)(i)}}(e,o),o.addZone=tt,o.removeZone=tt,o.layoutZone=tt})),i}},{key:"_addZone",value:function(e,t){var i=this._computeWhitespaceProps(t),n={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:(0,g.X)(t.domNode),marginDomNode:t.marginDomNode?(0,g.X)(t.marginDomNode):null};return this._safeCallOnComputedHeight(n.delegate,i.heightInPx),n.domNode.setPosition("absolute"),n.domNode.domNode.style.width="100%",n.domNode.setDisplay("none"),n.domNode.setAttribute("monaco-view-zone",n.whitespaceId),this.domNode.appendChild(n.domNode),n.marginDomNode&&(n.marginDomNode.setPosition("absolute"),n.marginDomNode.domNode.style.width="100%",n.marginDomNode.setDisplay("none"),n.marginDomNode.setAttribute("monaco-view-zone",n.whitespaceId),this.marginDomNode.appendChild(n.marginDomNode)),this._zones[n.whitespaceId]=n,this.setShouldRender(),n.whitespaceId}},{key:"_removeZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}},{key:"_layoutZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}},{key:"shouldSuppressMouseDownOnViewZone",value:function(e){if(this._zones.hasOwnProperty(e)){var t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}},{key:"_heightInPixels",value:function(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}},{key:"_minWidthInPixels",value:function(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}},{key:"_safeCallOnComputedHeight",value:function(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(i){(0,m.dL)(i)}}},{key:"_safeCallOnDomNodeTop",value:function(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(i){(0,m.dL)(i)}}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t,i=e.viewportData.whitespaceViewportData,o={},r=!1,s=(0,n.Z)(i);try{for(s.s();!(t=s.n()).done;){var a=t.value;this._zones[a.id].isInHiddenArea||(o[a.id]=a,r=!0)}}catch(_){s.e(_)}finally{s.f()}for(var l=Object.keys(this._zones),d=0,h=l.length;d<h;d++){var u=l[d],c=this._zones[u],g=0,m=0,v="none";o.hasOwnProperty(u)?(g=o[u].verticalOffset-e.bigNumbersDelta,m=o[u].height,v="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(o[u].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(g),c.domNode.setHeight(m),c.domNode.setDisplay(v),c.marginDomNode&&(c.marginDomNode.setTop(g),c.marginDomNode.setHeight(m),c.marginDomNode.setDisplay(v))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}]),i}(C.E);var nt=i(8003),ot=i(14660),rt=i(4731),st=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).blocks=[],n.contentWidth=-1,n.domNode=(0,g.X)(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("blockDecorations-container"),n.update(),n}return(0,r.Z)(i,[{key:"update",value:function(){var e=!1,t=this._context.configuration.options.get(133),i=t.contentWidth-t.verticalScrollbarWidth;return this.contentWidth!==i&&(this.contentWidth=i,e=!0),e}},{key:"dispose",value:function(){(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this.update()}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollLeftChanged}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t,i=0,o=e.getDecorationsInViewport(),r=(0,n.Z)(o);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s.options.blockClassName){var a=this.blocks[i];a||(a=this.blocks[i]=(0,g.X)(document.createElement("div")),this.domNode.appendChild(a));var l=e.getVerticalOffsetForLineNumber(s.range.startLineNumber),d=e.getVerticalOffsetForLineNumber(s.range.endLineNumber+1);a.setClassName("blockDecorations-block "+s.options.blockClassName),a.setLeft(e.scrollLeft),a.setWidth(this.contentWidth),a.setTop(l),a.setHeight(d-l),i++}}}catch(u){r.e(u)}finally{r.f()}for(var h=i;h<this.blocks.length;h++)this.blocks[h].domNode.remove();this.blocks.length=i}}]),i}(C.E),at=function(e){(0,d.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,l,d){var h;(0,o.Z)(this,i),(h=t.call(this))._selections=[new c.Y(1,1,1,1)],h._renderAnimationFrame=null;var u=new f.N(n,a,l,e);h._context=new nt.A(n,r,a),h._context.addEventHandler((0,s.Z)(h)),h._viewParts=[],h._textAreaHandler=new _.H(h._context,u,h._createTextAreaHandlerHelper()),h._viewParts.push(h._textAreaHandler),h._linesContent=(0,g.X)(document.createElement("div")),h._linesContent.setClassName("lines-content monaco-editor-background"),h._linesContent.setPosition("absolute"),h.domNode=(0,g.X)(document.createElement("div")),h.domNode.setClassName(h._getEditorClassName()),h.domNode.setAttribute("role","code"),h._overflowGuardContainer=(0,g.X)(document.createElement("div")),C.K.write(h._overflowGuardContainer,3),h._overflowGuardContainer.setClassName("overflow-guard"),h._scrollbar=new P(h._context,h._linesContent,h.domNode,h._overflowGuardContainer),h._viewParts.push(h._scrollbar),h._viewLines=new se(h._context,h._linesContent),h._viewZones=new it(h._context),h._viewParts.push(h._viewZones);var m=new Fe(h._context);h._viewParts.push(m);var p=new Ue(h._context);h._viewParts.push(p);var L=new y.Ip(h._context);h._viewParts.push(L),L.addDynamicOverlay(new A(h._context)),L.addDynamicOverlay(new je(h._context)),L.addDynamicOverlay(new K(h._context)),L.addDynamicOverlay(new Z(h._context));var N=new y.Ib(h._context);h._viewParts.push(N),N.addDynamicOverlay(new H(h._context)),N.addDynamicOverlay(new V(h._context)),N.addDynamicOverlay(new de(h._context)),N.addDynamicOverlay(new ae(h._context)),N.addDynamicOverlay(new j.x(h._context));var w=new le.Z(h._context);w.getDomNode().appendChild(h._viewZones.marginDomNode),w.getDomNode().appendChild(N.getDomNode()),h._viewParts.push(w),h._contentWidgets=new b(h._context,h.domNode),h._viewParts.push(h._contentWidgets),h._viewCursors=new et(h._context),h._viewParts.push(h._viewCursors),h._overlayWidgets=new Ze(h._context),h._viewParts.push(h._overlayWidgets);var k=new Ge(h._context);h._viewParts.push(k);var R=new st(h._context);h._viewParts.push(R);var S=new He(h._context);if(h._viewParts.push(S),m){var D=h._scrollbar.getOverviewRulerLayoutInfo();D.parent.insertBefore(m.getDomNode(),D.insertBefore)}return h._linesContent.appendChild(L.getDomNode()),h._linesContent.appendChild(k.domNode),h._linesContent.appendChild(R.domNode),h._linesContent.appendChild(h._viewZones.domNode),h._linesContent.appendChild(h._viewLines.getDomNode()),h._linesContent.appendChild(h._contentWidgets.domNode),h._linesContent.appendChild(h._viewCursors.getDomNode()),h._overflowGuardContainer.appendChild(w.getDomNode()),h._overflowGuardContainer.appendChild(h._scrollbar.getDomNode()),h._overflowGuardContainer.appendChild(p.getDomNode()),h._overflowGuardContainer.appendChild(h._textAreaHandler.textArea),h._overflowGuardContainer.appendChild(h._textAreaHandler.textAreaCover),h._overflowGuardContainer.appendChild(h._overlayWidgets.getDomNode()),h._overflowGuardContainer.appendChild(S.getDomNode()),h.domNode.appendChild(h._overflowGuardContainer),d?d.appendChild(h._contentWidgets.overflowingContentWidgetsDomNode.domNode):h.domNode.appendChild(h._contentWidgets.overflowingContentWidgetsDomNode),h._applyLayout(),h._pointerHandler=h._register(new v.a(h._context,u,h._createPointerHandlerHelper())),h}return(0,r.Z)(i,[{key:"_flushAccumulatedAndRenderNow",value:function(){this._renderNow()}},{key:"_createPointerHandlerHelper",value:function(){var e=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:function(){e.focus()},dispatchTextAreaEvent:function(t){e._textAreaHandler.textArea.domNode.dispatchEvent(t)},getLastRenderData:function(){var t=e._viewCursors.getLastRenderData()||[],i=e._textAreaHandler.getLastRenderData();return new rt.sB(t,i)},shouldSuppressMouseDownOnViewZone:function(t){return e._viewZones.shouldSuppressMouseDownOnViewZone(t)},shouldSuppressMouseDownOnWidget:function(t){return e._contentWidgets.shouldSuppressMouseDownOnWidget(t)},getPositionFromDOMInfo:function(t,i){return e._flushAccumulatedAndRenderNow(),e._viewLines.getPositionFromDOMInfo(t,i)},visibleRangeForPosition:function(t,i){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(new G.L(t,i))},getLineWidth:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.getLineWidth(t)}}}},{key:"_createTextAreaHandlerHelper",value:function(){var e=this;return{visibleRangeForPosition:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(t)}}}},{key:"_applyLayout",value:function(){var e=this._context.configuration.options.get(133);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}},{key:"_getEditorClassName",value:function(){var e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+(0,x.m6)(this._context.theme.type)+e}},{key:"handleEvents",value:function(e){(0,a.Z)((0,l.Z)(i.prototype),"handleEvents",this).call(this,e),this._scheduleRender()}},{key:"onConfigurationChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,!1}},{key:"onFocusChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"onThemeChanged",value:function(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"dispose",value:function(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();var e,t=(0,n.Z)(this._viewParts);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(o){t.e(o)}finally{t.f()}(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_scheduleRender",value:function(){null===this._renderAnimationFrame&&(this._renderAnimationFrame=u.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))}},{key:"_onRenderScheduled",value:function(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}},{key:"_renderNow",value:function(){var e=this;!function(e){try{e()}catch(t){(0,m.dL)(t)}}((function(){return e._actualRender()}))}},{key:"_getViewPartsToRender",value:function(){var e,t=[],i=0,o=(0,n.Z)(this._viewParts);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.shouldRender()&&(t[i++]=r)}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"_actualRender",value:function(){if(u.isInDOM(this.domNode.domNode)){var e=this._getViewPartsToRender();if(this._viewLines.shouldRender()||0!==e.length){var t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);var i=new ot.x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());var o,r=new T.xh(this._context.viewLayout,i,this._viewLines),s=(0,n.Z)(e);try{for(s.s();!(o=s.n()).done;){o.value.prepareRender(r)}}catch(h){s.e(h)}finally{s.f()}var a,l=(0,n.Z)(e);try{for(l.s();!(a=l.n()).done;){var d=a.value;d.render(r),d.onDidRender()}}catch(h){l.e(h)}finally{l.f()}}}}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"restoreState",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}},{key:"getOffsetForColumn",value:function(e,t){var i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();var o=this._viewLines.visibleRangeForPosition(new G.L(n.lineNumber,n.column));return o?o.left:-1}},{key:"getTargetAtClientPoint",value:function(e,t){var i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?p.q.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}},{key:"createOverviewRuler",value:function(e){return new ze(this._context,e)}},{key:"change",value:function(e){this._viewZones.changeViewZones(e),this._scheduleRender()}},{key:"render",value:function(e,t){if(t){this._viewLines.forceShouldRender();var i,o=(0,n.Z)(this._viewParts);try{for(o.s();!(i=o.n()).done;){i.value.forceShouldRender()}}catch(r){o.e(r)}finally{o.f()}}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}},{key:"focus",value:function(){this._textAreaHandler.focusTextArea()}},{key:"isFocused",value:function(){return this._textAreaHandler.isFocused()}},{key:"setAriaOptions",value:function(e){this._textAreaHandler.setAriaOptions(e)}},{key:"addContentWidget",value:function(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}},{key:"layoutContentWidget",value:function(e){var t,i,n=e.position&&e.position.range||null;if(null===n){var o=e.position?e.position.position:null;null!==o&&(n=new I.e(o.lineNumber,o.column,o.lineNumber,o.column))}var r=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,n,r,null!==(i=null===(t=e.position)||void 0===t?void 0:t.positionAffinity)&&void 0!==i?i:null),this._scheduleRender()}},{key:"removeContentWidget",value:function(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}},{key:"addOverlayWidget",value:function(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}},{key:"layoutOverlayWidget",value:function(e){var t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}},{key:"removeOverlayWidget",value:function(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}]),i}(Ve.O)},36652:function(e,t,i){i.d(t,{C:function(){return c}});var n,o=i(15671),r=i(43144),s=i(63633),a=i(26684),l=i(6815),d=i(94583),h=i(1219),u=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("domLineBreaksComputer",{createHTML:function(e){return e}}),c=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,[{key:"createLineBreaksComputer",value:function(e,t,i,n){var o=[],r=[];return{addRequest:function(e,t,i){o.push(e),r.push(t)},finalize:function(){return function(e,t,i,n,o,r){var c;function v(t){var i=r[t];if(i){var n=d.gk.applyInjectedText(e[t],i),o=i.map((function(e){return e.options})),s=i.map((function(e){return e.column-1}));return new h.gD(s,o,[n.length],[],0)}return null}if(-1===n){for(var _=[],f=0,p=e.length;f<p;f++)_[f]=v(f);return _}var y=Math.round(n*t.typicalHalfwidthCharacterWidth),C=3===o?2:2===o?1:0,L=Math.round(i*C),N=Math.ceil(t.spaceWidth*L),b=document.createElement("div");(0,l.N)(b,t);for(var w=(0,s.l$)(1e4),k=[],R=[],S=[],D=[],x=[],M=0;M<e.length;M++){var W=d.gk.applyInjectedText(e[M],r[M]),A=0,H=0,I=y;if(0!==o)if(-1===(A=a.LC(W)))A=0;else{for(var T=0;T<A;T++){H+=9===W.charCodeAt(T)?i-H%i:1}var Z=Math.ceil(t.spaceWidth*H);Z+t.typicalFullwidthCharacterWidth>y?(A=0,H=0):I=y-Z}var O=W.substr(A),E=g(O,H,i,I,w,N);k[M]=A,R[M]=H,S[M]=O,D[M]=E[0],x[M]=E[1]}var P=w.build(),F=null!==(c=null===u||void 0===u?void 0:u.createHTML(P))&&void 0!==c?c:P;b.innerHTML=F,b.style.position="absolute",b.style.top="10000",b.style.wordWrap="break-word",document.body.appendChild(b);for(var B=document.createRange(),V=Array.prototype.slice.call(b.children,0),z=[],G=0;G<e.length;G++){var U=m(B,V[G],S[G],D[G]);if(null!==U){for(var X=k[G],q=R[G]+L,K=x[G],Y=[],j=0,J=U.length;j<J;j++)Y[j]=K[U[j]];if(0!==X)for(var $=0,Q=U.length;$<Q;$++)U[$]+=X;var ee=void 0,te=void 0,ie=r[G];ie?(ee=ie.map((function(e){return e.options})),te=ie.map((function(e){return e.column-1}))):(ee=null,te=null),z[G]=new h.gD(te,ee,U,Y,q)}else z[G]=v(G)}return document.body.removeChild(b),z}(o,e,t,i,n,r)}}}}],[{key:"create",value:function(){return new e}}]),e}();function g(e,t,i,n,o,r){if(0!==r){var s=String(r);o.appendASCIIString('<div style="text-indent: -'),o.appendASCIIString(s),o.appendASCIIString("px; padding-left: "),o.appendASCIIString(s),o.appendASCIIString("px; box-sizing: border-box; width:")}else o.appendASCIIString('<div style="width:');o.appendASCIIString(String(n)),o.appendASCIIString('px;">');var l=e.length,d=t,h=0,u=[],c=[],g=0<l?e.charCodeAt(0):0;o.appendASCIIString("<span>");for(var m=0;m<l;m++){0!==m&&m%16384===0&&o.appendASCIIString("</span><span>"),u[m]=h,c[m]=d;var v=g;g=m+1<l?e.charCodeAt(m+1):0;var _=1,f=1;switch(v){case 9:f=_=i-d%i;for(var p=1;p<=_;p++)p<_?o.write1(160):o.appendASCII(32);break;case 32:32===g?o.write1(160):o.appendASCII(32);break;case 60:o.appendASCIIString("&lt;");break;case 62:o.appendASCIIString("&gt;");break;case 38:o.appendASCIIString("&amp;");break;case 0:o.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.write1(65533);break;default:a.K7(v)&&f++,v<32?o.write1(9216+v):o.write1(v)}h+=_,d+=f}return o.appendASCIIString("</span>"),u[e.length]=h,c[e.length]=d,o.appendASCIIString("</div>"),[u,c]}function m(e,t,i,n){if(i.length<=1)return null;var o=Array.prototype.slice.call(t.children,0),r=[];try{v(e,o,n,0,null,i.length-1,null,r)}catch(s){return console.log(s),null}return 0===r.length?null:(r.push(i.length),r)}function v(e,t,i,n,o,r,s,a){if(n!==r&&(o=o||_(e,t,i[n],i[n+1]),s=s||_(e,t,i[r],i[r+1]),!(Math.abs(o[0].top-s[0].top)<=.1)))if(n+1!==r){var l=n+(r-n)/2|0,d=_(e,t,i[l],i[l+1]);v(e,t,i,n,o,l,d,a),v(e,t,i,l,d,r,s,a)}else a.push(r)}function _(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}},60391:function(e,t,i){i.d(t,{i:function(){return a}});var n=i(43144),o=i(15671),r=i(60136),s=i(27277),a=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i)}(i(82978).O)},6264:function(e,t,i){i.d(t,{x:function(){return v}});var n=i(15671),o=i(43144),r=i(97326),s=i(11752),a=i(61120),l=i(60136),d=i(27277),h=i(4827),u=i(60391),c=i(10849),g=i(2374),m=i(3553),v=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e){var o;return(0,n.Z)(this,i),(o=t.call(this))._context=e,o._readConfig(),o._lastCursorModelPosition=new c.L(1,1),o._lastCursorViewPosition=new c.L(1,1),o._renderResult=null,o._activeLineNumber=1,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(i,[{key:"_readConfig",value:function(){var e=this._context.configuration.options;this._lineHeight=e.get(61);var t=e.get(62);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(86);var i=e.get(133);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this._readConfig(),!0}},{key:"onCursorStateChanged",value:function(e){var t=e.selections[0].getPosition();this._lastCursorViewPosition=t,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);var i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(i=!0),i}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getLineRenderLineNumber",value:function(e){var t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new c.L(e,1));if(1!==t.column)return"";var i=t.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(i):3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)}},{key:"prepareRender",value:function(e){if(0!==this._renderLineNumbers){var t=h.IJ?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,r='<div class="'+i.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=null;if(2===this._renderLineNumbers){s=new Array(o-n+1),this._lastCursorViewPosition.lineNumber>=n&&this._lastCursorViewPosition.lineNumber<=o&&(s[this._lastCursorViewPosition.lineNumber-n]=this._lastCursorModelPosition.lineNumber);for(var a=0,l=this._lastCursorViewPosition.lineNumber+1;l<=o;l++){var d=1!==this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new c.L(l,1)).column;d||a++,l>=n&&(s[l-n]=d?0:a)}for(var u=0,g=this._lastCursorViewPosition.lineNumber-1;g>=n;g--){var m=1!==this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new c.L(g,1)).column;m||u++,g<=o&&(s[g-n]=m?0:u)}}for(var v=this._context.viewModel.getLineCount(),_=[],f=n;f<=o;f++){var p=f-n;if(this._renderFinalNewline||f!==v||0!==this._context.viewModel.getLineLength(f)){var y=void 0;if(s){var C=s[p];y=this._lastCursorViewPosition.lineNumber===f?'<span class="relative-current-line-number">'.concat(C,"</span>"):C?String(C):""}else y=this._getLineRenderLineNumber(f);y?f===this._activeLineNumber?_[p]='<div class="active-line-number '+i.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+y+"</div>":_[p]=r+y+"</div>":_[p]=""}else _[p]=""}this._renderResult=_}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}]),i}(u.i);v.CLASS_NAME="line-numbers",(0,m.Ic)((function(e,t){var i=e.getColor(g.hw);i&&t.addRule(".monaco-editor .line-numbers { color: ".concat(i,"; }"));var n=e.getColor(g.DD);n&&t.addRule(".monaco-editor .line-numbers.active-line-number { color: ".concat(n,"; }"))}))},97766:function(e,t,i){i.d(t,{ZE:function(){return L},Nt:function(){return b},ob:function(){return N}});var n=i(11752),o=i(61120),r=i(60136),s=i(27277),a=i(37762),l=i(15671),d=i(43144),h=i(12426),u=i(16688),c=i(4827),g=i(76310),m=function(){function e(){(0,l.Z)(this,e)}return(0,d.Z)(e,null,[{key:"_createRange",value:function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}},{key:"_detachRange",value:function(e,t){e.selectNodeContents(t)}},{key:"_readClientRects",value:function(e,t,i,n,o){var r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch(s){return null}finally{this._detachRange(r,o)}}},{key:"_mergeAdjacentRanges",value:function(e){if(1===e.length)return e;e.sort(g.CR.compare);for(var t=[],i=0,n=e[0],o=1,r=e.length;o<r;o++){var s=e[o];n.left+n.width+.9>=s.left?n.width=Math.max(n.width,s.left+s.width-n.left):(t[i++]=n,n=s)}return t[i++]=n,t}},{key:"_createHorizontalRangesFromClientRects",value:function(e,t,i){if(!e||0===e.length)return null;for(var n=[],o=0,r=e.length;o<r;o++){var s=e[o];n[o]=new g.CR(Math.max(0,(s.left-t)/i),s.width/i)}return this._mergeAdjacentRanges(n)}},{key:"readHorizontalRanges",value:function(e,t,i,n,o,r,s,a){var l=e.children.length-1;if(0>l)return null;if((t=Math.min(l,Math.max(0,t)))===(n=Math.min(l,Math.max(0,n)))&&i===o&&0===i&&!e.children[t].firstChild){var d=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(d,r,s)}t!==n&&n>0&&0===o&&(n--,o=1073741824);var h=e.children[t].firstChild,u=e.children[n].firstChild;if(h&&u||(!h&&0===i&&t>0&&(h=e.children[t-1].firstChild,i=1073741824),!u&&0===o&&n>0&&(u=e.children[n-1].firstChild,o=1073741824)),!h||!u)return null;i=Math.min(h.textContent.length,Math.max(0,i)),o=Math.min(u.textContent.length,Math.max(0,o));var c=this._readClientRects(h,i,u,o,a);return this._createHorizontalRangesFromClientRects(c,r,s)}}]),e}(),v=i(50381),_=i(87627),f=i(11761),p=i(31492),y=!!c.tY||!(c.IJ||h.isFirefox||h.isSafari),C=!0,L=function(){function e(t,i){(0,l.Z)(this,e),this._domNode=t,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=i}return(0,d.Z)(e,[{key:"readClientRect",value:function(){if(!this._clientRectRead){this._clientRectRead=!0;var e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}},{key:"clientRectDeltaLeft",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}},{key:"clientRectScale",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}]),e}(),N=function(){function e(t,i){(0,l.Z)(this,e),this.themeType=i;var n=t.options,o=n.get(46);this.renderWhitespace=n.get(90),this.renderControlCharacters=n.get(85),this.spaceWidth=o.spaceWidth,this.middotWidth=o.middotWidth,this.wsmiddotWidth=o.wsmiddotWidth,this.useMonospaceOptimizations=o.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=o.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(61),this.stopRenderingLineAfter=n.get(107),this.fontLigatures=n.get(47)}return(0,d.Z)(e,[{key:"equals",value:function(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}]),e}(),b=function(){function e(t){(0,l.Z)(this,e),this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}return(0,d.Z)(e,[{key:"getDomNode",value:function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}},{key:"setDomNode",value:function(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=(0,u.X)(e)}},{key:"onContentChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onTokensChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onDecorationsChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onOptionsChanged",value:function(e){this._isMaybeInvalid=!0,this._options=e}},{key:"onSelectionChanged",value:function(){return!(!(0,f.c3)(this._options.themeType)&&"selection"!==this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}},{key:"renderLine",value:function(t,i,n,o){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;var r=n.getViewLineRenderingData(t),s=this._options,l=v.Kp.filter(r.inlineDecorations,t,r.minColumn,r.maxColumn),d=null;if((0,f.c3)(s.themeType)||"selection"===this._options.renderWhitespace){var h,u=n.selections,c=(0,a.Z)(u);try{for(c.s();!(h=c.n()).done;){var g=h.value;if(!(g.endLineNumber<t||g.startLineNumber>t)){var m=g.startLineNumber===t?g.startColumn:r.minColumn,L=g.endLineNumber===t?g.endColumn:r.maxColumn;m<L&&((0,f.c3)(s.themeType)||"selection"!==this._options.renderWhitespace?l.push(new v.Kp(m,L,"inline-selected-text",0)):(d||(d=[]),d.push(new _.zG(m-1,L-1))))}}}catch(R){c.e(R)}finally{c.f()}}var N=new _.IJ(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==p.n0.OFF,d);if(this._renderedViewLine&&this._renderedViewLine.input.equals(N))return!1;o.appendASCIIString('<div style="top:'),o.appendASCIIString(String(i)),o.appendASCIIString("px;height:"),o.appendASCIIString(String(this._options.lineHeight)),o.appendASCIIString('px;" class="'),o.appendASCIIString(e.CLASS_NAME),o.appendASCIIString('">');var b=(0,_.d1)(N,o);o.appendASCIIString("</div>");var k=null;return C&&y&&r.isBasicASCII&&s.useMonospaceOptimizations&&0===b.containsForeignElements&&r.content.length<300&&N.lineTokens.getCount()<100&&(k=new w(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping)),k||(k=S(this._renderedViewLine?this._renderedViewLine.domNode:null,N,b.characterMapping,b.containsRTL,b.containsForeignElements)),this._renderedViewLine=k,!0}},{key:"layoutLine",value:function(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}},{key:"getWidth",value:function(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}},{key:"getWidthIsFast",value:function(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}},{key:"needsMonospaceFontCheck",value:function(){return!!this._renderedViewLine&&this._renderedViewLine instanceof w}},{key:"monospaceAssumptionsAreValid",value:function(){return this._renderedViewLine&&this._renderedViewLine instanceof w?this._renderedViewLine.monospaceAssumptionsAreValid():C}},{key:"onMonospaceAssumptionsInvalidated",value:function(){this._renderedViewLine&&this._renderedViewLine instanceof w&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));var o=this._renderedViewLine.input.stopRenderingLineAfter,r=!1;-1!==o&&t>o+1&&i>o+1&&(r=!0),-1!==o&&t>o+1&&(t=o+1),-1!==o&&i>o+1&&(i=o+1);var s=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return s&&s.length>0?new g.CH(r,s):null}},{key:"getColumnOfNodeOffset",value:function(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}}]),e}();b.CLASS_NAME="view-line";var w=function(){function e(t,i,n){(0,l.Z)(this,e),this.domNode=t,this.input=i,this._characterMapping=n,this._charWidth=i.spaceWidth}return(0,d.Z)(e,[{key:"getWidth",value:function(){return Math.round(this._getCharPosition(this._characterMapping.length))}},{key:"getWidthIsFast",value:function(){return!0}},{key:"monospaceAssumptionsAreValid",value:function(){if(!this.domNode)return C;var e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),C=!1),C}},{key:"toSlowRenderedLine",value:function(){return S(this.domNode,this.input,this._characterMapping,!1,0)}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){var o=this._getCharPosition(t),r=this._getCharPosition(i);return[new g.CR(o,r-o)]}},{key:"_getCharPosition",value:function(e){var t=this._characterMapping.getHorizontalOffset(e);return this._charWidth*t}},{key:"getColumnOfNodeOffset",value:function(e,t,i){for(var n=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new _.Nd(o,i),n)}}]),e}(),k=function(){function e(t,i,n,o,r){if((0,l.Z)(this,e),this.domNode=t,this.input=i,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(i.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!o||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}return(0,d.Z)(e,[{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"getWidth",value:function(){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}},{key:"getWidthIsFast",value:function(){return-1!==this._cachedWidth}},{key:"getVisibleRangesForRange",value:function(e,t,i,n){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){var o=this._readPixelOffset(this.domNode,e,t,n);if(-1===o)return null;var r=this._readPixelOffset(this.domNode,e,i,n);return-1===r?null:[new g.CR(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}},{key:"_readVisibleRangesForRange",value:function(e,t,i,n,o){if(i===n){var r=this._readPixelOffset(e,t,i,o);return-1===r?null:[new g.CR(r,0)]}return this._readRawVisibleRangesForRange(e,i,n,o)}},{key:"_readPixelOffset",value:function(e,t,i,n){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth();var o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(null!==this._pixelOffsetCache){var r=this._pixelOffsetCache[i];if(-1!==r)return r;var s=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=s,s}return this._actualReadPixelOffset(e,t,i,n)}},{key:"_actualReadPixelOffset",value:function(e,t,i,n){if(0===this._characterMapping.length){var o=m.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n.clientRectDeltaLeft,n.clientRectScale,n.endNode);return o&&0!==o.length?o[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth();var r=this._characterMapping.getDomPosition(i),s=m.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,n.clientRectDeltaLeft,n.clientRectScale,n.endNode);if(!s||0===s.length)return-1;var a=s[0].left;if(this.input.isBasicASCII){var l=this._characterMapping.getHorizontalOffset(i),d=Math.round(this.input.spaceWidth*l);if(Math.abs(d-a)<=1)return d}return a}},{key:"_readRawVisibleRangesForRange",value:function(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new g.CR(0,this.getWidth())];var o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return m.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,n.clientRectDeltaLeft,n.clientRectScale,n.endNode)}},{key:"getColumnOfNodeOffset",value:function(e,t,i){for(var n=t.textContent.length,o=-1;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new _.Nd(o,i),n)}}]),e}(),R=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,l.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i,[{key:"_readVisibleRangesForRange",value:function(e,t,r,s,a){var l=(0,n.Z)((0,o.Z)(i.prototype),"_readVisibleRangesForRange",this).call(this,e,t,r,s,a);if(!l||0===l.length||r===s||1===r&&s===this._characterMapping.length)return l;if(!this.input.containsRTL){var d=this._readPixelOffset(e,t,s,a);if(-1!==d){var h=l[l.length-1];h.left<d&&(h.width=d-h.left)}}return l}}]),i}(k),S=h.isWebKit?D:x;function D(e,t,i,n,o){return new R(e,t,i,n,o)}function x(e,t,i,n,o){return new k(e,t,i,n,o)}},16543:function(e,t,i){i.d(t,{Z:function(){return h}});var n=i(15671),o=i(43144),r=i(11752),s=i(61120),a=i(60136),l=i(27277),d=i(16688),h=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;(0,n.Z)(this,i);var r=(o=t.call(this,e))._context.configuration.options,s=r.get(133);return o._canUseLayerHinting=!r.get(28),o._contentLeft=s.contentLeft,o._glyphMarginLeft=s.glyphMarginLeft,o._glyphMarginWidth=s.glyphMarginWidth,o._domNode=(0,d.X)(document.createElement("div")),o._domNode.setClassName(i.OUTER_CLASS_NAME),o._domNode.setPosition("absolute"),o._domNode.setAttribute("role","presentation"),o._domNode.setAttribute("aria-hidden","true"),o._glyphMarginBackgroundDomNode=(0,d.X)(document.createElement("div")),o._glyphMarginBackgroundDomNode.setClassName(i.CLASS_NAME),o._domNode.appendChild(o._glyphMarginBackgroundDomNode),o}return(0,o.Z)(i,[{key:"dispose",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,i=t.get(133);return this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}},{key:"onScrollChanged",value:function(e){return(0,r.Z)((0,s.Z)(i.prototype),"onScrollChanged",this).call(this,e)||e.scrollTopChanged}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");var t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);var i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}]),i}(i(89378).E);h.CLASS_NAME="glyph-margin",h.OUTER_CLASS_NAME="margin"}}]);
//# sourceMappingURL=monaco-editor-vendor.96a37e40.ceb90e43.js.map