{"version":3,"file":"static/js/monaco-editor-vendor.55a95165.b2cc2740.js","mappings":"gVAgCaA,EAAgB,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GACzB,SAAAA,EAAYK,EAAYC,EAAcC,GAAW,IAAAC,EAGjB,OAHiBC,EAAAA,EAAAA,GAAA,KAAAT,IAC7CQ,EAAAL,EAAAO,KAAA,KAAML,EAAYC,IACbK,4BAAyBC,EAC9BJ,EAAKK,WAAaN,EAAUC,CAChC,CAMC,OANAM,EAAAA,EAAAA,GAAAd,EAAA,EAAAe,IAAA,6BAAAC,MACD,SAA2BC,EAAOC,GAC9B,OAAOC,KAAKN,WAAWO,2BAA2BH,EAAOC,EAC7D,GAAC,CAAAH,IAAA,0BAAAC,MACD,SAAwBK,GACpB,OAAOF,KAAKN,WAAWS,wBAAwBD,EACnD,KAACrB,CAAA,CAXwB,CA5BU,WACnC,SAAAuB,EAAYlB,EAAYC,IAAcG,EAAAA,EAAAA,GAAA,KAAAc,GAClCJ,KAAKK,sCAAmCZ,EACxCO,KAAKM,YAAcpB,EACnBc,KAAKb,aAAeA,EACpBa,KAAKO,YAAcP,KAAKM,YAAYE,iBACpCR,KAAKS,aAAeT,KAAKM,YAAYI,kBACrCV,KAAKW,aAAeX,KAAKb,aAAawB,aACtCX,KAAKY,gBAAkBZ,KAAKb,aAAayB,gBACzC,IAAMC,EAAQb,KAAKM,YAAYQ,qBAC/Bd,KAAKe,UAAYF,EAAMG,IACvBhB,KAAKiB,WAAaJ,EAAMK,KACxBlB,KAAKmB,cAAgBN,EAAMO,MAC3BpB,KAAKqB,eAAiBR,EAAMS,MAChC,CAYC,OAZA3B,EAAAA,EAAAA,GAAAS,EAAA,EAAAR,IAAA,gCAAAC,MACD,SAA8B0B,GAC1B,OAAOA,EAAcvB,KAAKe,SAC9B,GAAC,CAAAnB,IAAA,iCAAAC,MACD,SAA+B2B,EAAYC,GACvC,OAAOzB,KAAKM,YAAYoB,+BAA+BF,EAAYC,EACvE,GAAC,CAAA7B,IAAA,mCAAAC,MACD,SAAiC2B,EAAYC,GACzC,OAAOzB,KAAKM,YAAYqB,iCAAiCH,EAAYC,EACzE,GAAC,CAAA7B,IAAA,2BAAAC,MACD,WACI,OAAOG,KAAKb,aAAayC,0BAC7B,KAACxB,CAAA,CA1BkC,IAyC1ByB,GAAiBlC,EAAAA,EAAAA,IAC1B,SAAAkC,EAAYC,EAAqBN,EAAYO,IAAQzC,EAAAA,EAAAA,GAAA,KAAAuC,GACjD7B,KAAK8B,oBAAsBA,EAC3B9B,KAAKwB,WAAaA,EAClBxB,KAAK+B,OAASA,CAClB,IAESC,EAAe,WASxB,SAAAA,EAAYd,EAAME,IAAO9B,EAAAA,EAAAA,GAAA,KAAA0C,GACrBhC,KAAKiC,2BAAwBxC,EAC7BO,KAAKkB,KAAOgB,KAAKC,MAAMjB,GACvBlB,KAAKoB,MAAQc,KAAKC,MAAMf,EAC5B,CALC,OAKAzB,EAAAA,EAAAA,GAAAqC,EAAA,EAAApC,IAAA,WAAAC,MACD,WACI,MAAO,IAAPuC,OAAWpC,KAAKkB,KAAI,KAAAkB,OAAIpC,KAAKoB,MAAK,IACtC,IAAC,EAAAxB,IAAA,OAAAC,MAfD,SAAYkC,GAER,IADA,IAAMM,EAAS,IAAIC,MAAMP,EAAOQ,QACvBC,EAAI,EAAGC,EAAMV,EAAOQ,OAAQC,EAAIC,EAAKD,IAAK,CAC/C,IAAM1C,EAAQiC,EAAOS,GACrBH,EAAOG,GAAK,IAAIR,EAAgBlC,EAAMoB,KAAMpB,EAAMsB,MACtD,CACA,OAAOiB,CACX,KAACL,CAAA,CARuB,GAkBfU,EAAoB,WAC7B,SAAAA,EAAYxB,EAAME,IAAO9B,EAAAA,EAAAA,GAAA,KAAAoD,GACrB1C,KAAK2C,gCAA6BlD,EAClCO,KAAKkB,KAAOA,EACZlB,KAAKoB,MAAQA,CACjB,CAMC,OANAzB,EAAAA,EAAAA,GAAA+C,EAAA,EAAA9C,IAAA,WAAAC,MACD,WACI,MAAO,IAAPuC,OAAWpC,KAAKkB,KAAI,KAAAkB,OAAIpC,KAAKoB,MAAK,IACtC,IAAC,EAAAxB,IAAA,UAAAC,MACD,SAAe+C,EAAGC,GACd,OAAOD,EAAE1B,KAAO2B,EAAE3B,IACtB,KAACwB,CAAA,CAX4B,GAapBI,GAAkBnD,EAAAA,EAAAA,IAC3B,SAAAmD,EAAYhB,EAAqBZ,IAAM5B,EAAAA,EAAAA,GAAA,KAAAwD,GACnC9C,KAAK8B,oBAAsBA,EAC3B9B,KAAK+C,aAAe7B,EACpBlB,KAAKkB,KAAOgB,KAAKC,MAAMnC,KAAK+C,aAChC,IAESC,GAAarD,EAAAA,EAAAA,IACtB,SAAAqD,EAAYlB,EAAqBC,IAAQzC,EAAAA,EAAAA,GAAA,KAAA0D,GACrChD,KAAK8B,oBAAsBA,EAC3B9B,KAAK+B,OAASA,CAClB,G,mHCvFSkB,EAAc,WACvB,SAAAA,EAAYC,EAAeC,EAAWC,EAAiBC,IAAiB/D,EAAAA,EAAAA,GAAA,KAAA2D,GACpEjD,KAAKkD,cAAgBA,EACrBlD,KAAKmD,UAAYA,EACjBnD,KAAKoD,gBAAkBA,EACvBpD,KAAKqD,gBAAkBA,CAC3B,CA4PC,OA5PA1D,EAAAA,EAAAA,GAAAsD,EAAA,EAAArD,IAAA,QAAAC,MACD,SAAMyD,EAAMC,EAAgBC,EAAiBC,GACzCzD,KAAKqD,gBAAgBK,MAAMJ,EAAMC,EAAgBC,EAAiBC,EACtE,GAAC,CAAA7D,IAAA,OAAAC,MACD,SAAKyD,GACDtD,KAAKqD,gBAAgBM,KAAKL,EAC9B,GAAC,CAAA1D,IAAA,kBAAAC,MACD,SAAgByD,EAAMM,EAAoBC,EAAoBC,GAC1D9D,KAAKqD,gBAAgBU,gBAAgBT,EAAMM,EAAoBC,EAAoBC,EACvF,GAAC,CAAAlE,IAAA,mBAAAC,MACD,WACIG,KAAKqD,gBAAgBW,kBACzB,GAAC,CAAApE,IAAA,iBAAAC,MACD,WACIG,KAAKqD,gBAAgBY,gBACzB,GAAC,CAAArE,IAAA,MAAAC,MACD,WACIG,KAAKqD,gBAAgBa,KACzB,GAAC,CAAAtE,IAAA,eAAAC,MACD,SAAasE,GACTC,EAAAA,uBAAuBC,aAAaC,qBAAqBtE,KAAKmD,UAAW,CACrEoB,OAAQ,WACRC,UAAWL,GAEnB,GAAC,CAAAvE,IAAA,sBAAAC,MACD,SAAoB4E,GAChB,IAAMC,EAAY1E,KAAKmD,UAAUwB,iBAAiBF,EAAajD,YAC/D,OAAIiD,EAAaG,OAASF,EACf,IAAIG,EAAAA,EAASJ,EAAajD,WAAYkD,GAE1CD,CACX,GAAC,CAAA7E,IAAA,0BAAAC,MACD,SAAwBiF,GACpB,OAAQ9E,KAAKkD,cAAc6B,QAAQC,IAAI,KACnC,IAAK,SACD,OAAOF,EAAKG,OAChB,IAAK,UACD,OAAOH,EAAKI,QAChB,IAAK,UACD,OAAOJ,EAAKK,QAChB,QACI,OAAO,EAEnB,GAAC,CAAAvF,IAAA,6BAAAC,MACD,SAA2BiF,GACvB,OAAQ9E,KAAKkD,cAAc6B,QAAQC,IAAI,KACnC,IAAK,SACD,OAAOF,EAAKI,SAAWJ,EAAKK,QAChC,IAAK,UACD,OAAOL,EAAKG,QAAUH,EAAKK,QAC/B,IAAK,UACD,OAAOL,EAAKI,SAAWJ,EAAKG,OAChC,QACI,OAAO,EAEnB,GAAC,CAAArF,IAAA,gBAAAC,MACD,SAAciF,GACV,IAAMC,EAAU/E,KAAKkD,cAAc6B,QAC7BK,EAA0BC,EAAAA,IAAoBN,EAAQC,IAAI,KAC1DM,EAAkBP,EAAQC,IAAI,IAChCF,EAAKS,eAAiBH,EACtBpF,KAAKwF,cAAcV,EAAK5E,SAAU4E,EAAKW,YAAaX,EAAKY,iBAEpDZ,EAAKa,qBAEN3F,KAAK4F,wBAAwBd,GACzBA,EAAKY,gBACL1F,KAAK6F,sBAAsBf,EAAK5E,SAAU4E,EAAKgB,YAG/C9F,KAAK+F,cAAcjB,EAAK5E,UAAU,GAIlC4E,EAAKY,gBACL1F,KAAKgG,gBAAgBlB,EAAK5E,SAAU4E,EAAKgB,YAGzC9F,KAAKiG,YAAYnB,EAAK5E,SAAU4E,EAAKgB,YAIxChB,EAAKoB,gBAAkB,EAC5BlG,KAAKmG,aAEwB,IAAxBrB,EAAKoB,eACNlG,KAAK4F,wBAAwBd,GACzBA,EAAKY,gBACL1F,KAAKoG,0BAA0BtB,EAAK5E,SAAU4E,EAAKgB,YAGnD9F,KAAK6F,sBAAsBf,EAAK5E,SAAU4E,EAAKgB,YAI/ChB,EAAKY,gBACL1F,KAAKgG,gBAAgBlB,EAAK5E,SAAU4E,EAAKgB,YAGzC9F,KAAKiG,YAAYnB,EAAK5E,SAAU4E,EAAKgB,YAIhB,IAAxBhB,EAAKoB,eACLpB,EAAKuB,iBACFrG,KAAK4F,wBAAwBd,GAC7B9E,KAAKsG,sBAAsBxB,EAAK5E,SAAU4E,EAAKgB,YAG3ChB,EAAKY,gBACL1F,KAAKuG,gBAAgBzB,EAAK5E,SAAU4E,EAAKgB,YAGzC9F,KAAKwG,YAAY1B,EAAK5E,SAAU4E,EAAKgB,aAM7C9F,KAAK4F,wBAAwBd,GACxB9E,KAAKyG,2BAA2B3B,KAC7BA,EAAK4B,SACL1G,KAAKwF,cAAcV,EAAK5E,SAAU4E,EAAKW,aAAa,GAIhDX,EAAKY,gBACL1F,KAAK2G,wBAAwB7B,EAAK5E,SAAU4E,EAAKgB,YAGjD9F,KAAK+F,cAAcjB,EAAK5E,UAAU,IAM1C4E,EAAKY,gBACDZ,EAAKG,QAIDK,EAHJtF,KAAKwF,cAAcV,EAAK5E,SAAU4E,EAAKW,aAAa,GAOhDzF,KAAK4G,cAAc9B,EAAK5E,SAAU4E,EAAKgB,YAK/C9F,KAAK6G,OAAO/B,EAAK5E,SAAU4E,EAAKgB,WAIhD,GAAC,CAAAlG,IAAA,aAAAC,MACD,SAAW4E,EAAcqB,GAErB,OADArB,EAAezE,KAAK8G,oBAAoBrC,GACjC,CACHF,OAAQ,QACRrE,SAAUF,KAAK+G,4BAA4BtC,GAC3CA,aAAAA,EACAqB,WAAAA,EAER,GAAC,CAAAlG,IAAA,SAAAC,MACD,SAAO4E,EAAcqB,GACjB1B,EAAAA,uBAAuB4C,OAAO1C,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACrG,GAAC,CAAAlG,IAAA,gBAAAC,MACD,SAAc4E,EAAcqB,GACxB1B,EAAAA,uBAAuB8C,aAAa5C,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GAC3G,GAAC,CAAAlG,IAAA,gBAAAC,MACD,SAAc4E,EAAcgB,EAAa0B,GACrC1C,EAAezE,KAAK8G,oBAAoBrC,GACxCL,EAAAA,uBAAuBgD,aAAa9C,qBAAqBtE,KAAKmD,UAAW,CACrEoB,OAAQ,QACRrE,SAAUF,KAAK+G,4BAA4BtC,GAC3CA,aAAcA,EACdgB,YAAaA,EACb0B,eAAgBA,GAExB,GAAC,CAAAvH,IAAA,gBAAAC,MACD,SAAc4E,EAAc4C,GACxB5C,EAAezE,KAAK8G,oBAAoBrC,GACxCL,EAAAA,uBAAuBkD,aAAahD,qBAAqBtE,KAAKmD,UAAW,CACrEoB,OAAQ,QACRrE,SAAUF,KAAK+G,4BAA4BtC,GAC3CA,aAAcA,EACd4C,UAAWA,GAEnB,GAAC,CAAAzH,IAAA,0BAAAC,MACD,SAAwB4E,EAAcqB,GAClC1B,EAAAA,uBAAuBmD,uBAAuBjD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACrH,GAAC,CAAAlG,IAAA,cAAAC,MACD,SAAY4E,EAAcqB,GACtB1B,EAAAA,uBAAuBoD,WAAWlD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACzG,GAAC,CAAAlG,IAAA,kBAAAC,MACD,SAAgB4E,EAAcqB,GAC1B1B,EAAAA,uBAAuBqD,eAAenD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GAC7G,GAAC,CAAAlG,IAAA,wBAAAC,MACD,SAAsB4E,EAAcqB,GAChC1B,EAAAA,uBAAuBsD,qBAAqBpD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACnH,GAAC,CAAAlG,IAAA,cAAAC,MACD,SAAY4E,EAAcqB,GACtB1B,EAAAA,uBAAuBuD,WAAWrD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACzG,GAAC,CAAAlG,IAAA,kBAAAC,MACD,SAAgB4E,EAAcqB,GAC1B1B,EAAAA,uBAAuBwD,eAAetD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GAC7G,GAAC,CAAAlG,IAAA,wBAAAC,MACD,SAAsB4E,EAAcqB,GAChC1B,EAAAA,uBAAuByD,qBAAqBvD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACnH,GAAC,CAAAlG,IAAA,4BAAAC,MACD,SAA0B4E,EAAcqB,GACpC1B,EAAAA,uBAAuB0D,yBAAyBxD,qBAAqBtE,KAAKmD,UAAWnD,KAAKiH,WAAWxC,EAAcqB,GACvH,GAAC,CAAAlG,IAAA,aAAAC,MACD,WACIuE,EAAAA,uBAAuB2D,UAAUzD,qBAAqBtE,KAAKmD,UAAW,CAAEoB,OAAQ,SACpF,GACA,CAAA3E,IAAA,8BAAAC,MACA,SAA4B4E,GACxB,OAAOzE,KAAKmD,UAAU6E,qBAAqBC,mCAAmCxD,EAClF,GAAC,CAAA7E,IAAA,cAAAC,MACD,SAAYqI,GACRlI,KAAKoD,gBAAgB+E,YAAYD,EACrC,GAAC,CAAAtI,IAAA,YAAAC,MACD,SAAUqI,GACNlI,KAAKoD,gBAAgBgF,UAAUF,EACnC,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZlI,KAAKoD,gBAAgBiF,gBAAgBH,EACzC,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACVlI,KAAKoD,gBAAgBkF,cAAcJ,EACvC,GAAC,CAAAtI,IAAA,iBAAAC,MACD,SAAeqI,GACXlI,KAAKoD,gBAAgBmF,eAAeL,EACxC,GAAC,CAAAtI,IAAA,cAAAC,MACD,SAAYqI,GACRlI,KAAKoD,gBAAgBoF,YAAYN,EACrC,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACVlI,KAAKoD,gBAAgBqF,cAAcP,EACvC,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACVlI,KAAKoD,gBAAgBsF,cAAcR,EACvC,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACVlI,KAAKoD,gBAAgBuF,cAAcT,EACvC,GAAC,CAAAtI,IAAA,wBAAAC,MACD,WACIG,KAAKoD,gBAAgBwF,uBACzB,GAAC,CAAAhJ,IAAA,iBAAAC,MACD,SAAeqI,GACXlI,KAAKoD,gBAAgByF,eAAeX,EACxC,KAACjF,CAAA,CAlQsB,E,qJCCd6F,EAAuB,WAChC,SAAAA,EAAYC,IAAYzJ,EAAAA,EAAAA,GAAA,KAAAwJ,GACpB9I,KAAKgJ,YAAcD,EACnB/I,KAAKiJ,KAAK,EAAG,GACjB,CAoKC,OApKAtJ,EAAAA,EAAAA,GAAAmJ,EAAA,EAAAlJ,IAAA,QAAAC,MACD,WACIG,KAAKiJ,KAAK,EAAG,GACjB,GAAC,CAAArJ,IAAA,OAAAC,MACD,SAAKqJ,EAAqBC,GACtBnJ,KAAKoJ,OAASD,EACdnJ,KAAKqJ,qBAAuBH,CAChC,GAAC,CAAAtJ,IAAA,OAAAC,MACD,WACI,MAAO,CACHqJ,oBAAqBlJ,KAAKqJ,qBAC1BF,MAAOnJ,KAAKoJ,OAEpB,GACA,CAAAxJ,IAAA,qBAAAC,MAGA,WACI,OAAOG,KAAKqJ,oBAChB,GACA,CAAAzJ,IAAA,mBAAAC,MAGA,WACI,OAAOG,KAAKqJ,qBAAuBrJ,KAAKoJ,OAAO7G,OAAS,CAC5D,GAAC,CAAA3C,IAAA,WAAAC,MACD,WACI,OAAOG,KAAKoJ,OAAO7G,MACvB,GAAC,CAAA3C,IAAA,UAAAC,MACD,SAAQ2B,GACJ,IAAM8H,EAAY9H,EAAaxB,KAAKqJ,qBACpC,GAAIC,EAAY,GAAKA,GAAatJ,KAAKoJ,OAAO7G,OAC1C,MAAM,IAAIgH,EAAAA,GAAmB,gCAEjC,OAAOvJ,KAAKoJ,OAAOE,EACvB,GACA,CAAA1J,IAAA,iBAAAC,MAGA,SAAe2J,EAAsBC,GACjC,GAAwB,IAApBzJ,KAAK0J,WAEL,OAAO,KAEX,IAAMC,EAAkB3J,KAAK4J,qBACvBC,EAAgB7J,KAAK8J,mBAC3B,GAAIL,EAAqBE,EAAiB,CAEtC,IAAMI,EAAYN,EAAqBD,EAAuB,EAE9D,OADAxJ,KAAKqJ,sBAAwBU,EACtB,IACX,CACA,GAAIP,EAAuBK,EAEvB,OAAO,KAKX,IAFA,IAAIG,EAAmB,EACnBC,EAAc,EACTzI,EAAamI,EAAiBnI,GAAcqI,EAAerI,IAAc,CAC9E,IAAM8H,EAAY9H,EAAaxB,KAAKqJ,qBAChCG,GAAwBhI,GAAcA,GAAciI,IAEhC,IAAhBQ,GAEAD,EAAmBV,EACnBW,EAAc,GAGdA,IAGZ,CAEA,GAAIT,EAAuBG,EAAiB,CAExC,IAAIO,EAAmB,EAGnBA,EAFAT,EAAqBE,EAEFF,EAAqBD,EAAuB,EAG5CG,EAAkBH,EAEzCxJ,KAAKqJ,sBAAwBa,CACjC,CAEA,OADgBlK,KAAKoJ,OAAOe,OAAOH,EAAkBC,EAEzD,GAAC,CAAArK,IAAA,iBAAAC,MACD,SAAeuK,EAAsBC,GACjC,IAAMC,EAAqBF,EAAuBC,EAAc,EAChE,GAAwB,IAApBrK,KAAK0J,WAEL,OAAO,EAKX,IAHA,IAAMC,EAAkB3J,KAAK4J,qBACvBC,EAAgB7J,KAAK8J,mBACvBS,GAAkB,EACbC,EAAoBJ,EAAsBI,GAAqBF,EAAoBE,IACpFA,GAAqBb,GAAmBa,GAAqBX,IAE7D7J,KAAKoJ,OAAOoB,EAAoBxK,KAAKqJ,sBAAsBoB,mBAC3DF,GAAkB,GAG1B,OAAOA,CACX,GAAC,CAAA3K,IAAA,kBAAAC,MACD,SAAgB6K,EAAsBC,GAClC,GAAwB,IAApB3K,KAAK0J,WAEL,OAAO,KAEX,IAAMkB,EAAYD,EAAqBD,EAAuB,EACxDf,EAAkB3J,KAAK4J,qBACvBC,EAAgB7J,KAAK8J,mBAC3B,GAAIY,GAAwBf,EAGxB,OADA3J,KAAKqJ,sBAAwBuB,EACtB,KAEX,GAAIF,EAAuBb,EAEvB,OAAO,KAEX,GAAIe,EAAYF,EAAuBb,EAGnC,OADgB7J,KAAKoJ,OAAOe,OAAOO,EAAuB1K,KAAKqJ,qBAAsBQ,EAAgBa,EAAuB,GAKhI,IADA,IAAMG,EAAW,GACRrI,EAAI,EAAGA,EAAIoI,EAAWpI,IAC3BqI,EAASrI,GAAKxC,KAAKgJ,cAEvB,IAAM8B,EAAcJ,EAAuB1K,KAAKqJ,qBAC1C0B,EAAc/K,KAAKoJ,OAAO4B,MAAM,EAAGF,GACnCG,EAAajL,KAAKoJ,OAAO4B,MAAMF,EAAa9K,KAAKoJ,OAAO7G,OAASqI,GACjEM,EAAelL,KAAKoJ,OAAO4B,MAAMhL,KAAKoJ,OAAO7G,OAASqI,EAAW5K,KAAKoJ,OAAO7G,QAEnF,OADAvC,KAAKoJ,OAAS2B,EAAY3I,OAAOyI,GAAUzI,OAAO6I,GAC3CC,CACX,GAAC,CAAAtL,IAAA,kBAAAC,MACD,SAAgBkC,GACZ,GAAwB,IAApB/B,KAAK0J,WAEL,OAAO,EAKX,IAHA,IAAMC,EAAkB3J,KAAK4J,qBACvBC,EAAgB7J,KAAK8J,mBACvBqB,GAAkB,EACb3I,EAAI,EAAGC,EAAMV,EAAOQ,OAAQC,EAAIC,EAAKD,IAAK,CAC/C,IAAM4I,EAAMrJ,EAAOS,GACnB,KAAI4I,EAAIC,aAAe1B,GAAmByB,EAAIE,eAAiBzB,GAM/D,IAFA,IAAM0B,EAAOrJ,KAAKsJ,IAAI7B,EAAiByB,EAAIE,gBACrCG,EAAKvJ,KAAKwJ,IAAI7B,EAAeuB,EAAIC,cAC9B7J,EAAa+J,EAAM/J,GAAciK,EAAIjK,IAAc,CACxD,IAAM8H,EAAY9H,EAAaxB,KAAKqJ,qBACpCrJ,KAAKoJ,OAAOE,GAAWqC,kBACvBR,GAAkB,CACtB,CACJ,CACA,OAAOA,CACX,KAACrC,CAAA,CAxK+B,GA0KvB8C,EAAsB,WAC/B,SAAAA,EAAYC,GAAM,IAAAxM,EAAA,MAAAC,EAAAA,EAAAA,GAAA,KAAAsM,GACd5L,KAAK8L,MAAQD,EACb7L,KAAK+L,QAAU/L,KAAKgM,iBACpBhM,KAAKiM,iBAAmB,IAAInD,GAAwB,kBAAMzJ,EAAKyM,MAAMI,mBAAmB,GAC5F,CAgFC,OAhFAvM,EAAAA,EAAAA,GAAAiM,EAAA,EAAAhM,IAAA,iBAAAC,MACD,WACI,IAAMkM,GAAUI,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QAKzD,OAJAN,EAAQO,aAAa,cACrBP,EAAQQ,YAAY,YACpBR,EAAQA,QAAQS,aAAa,OAAQ,gBACrCT,EAAQA,QAAQS,aAAa,cAAe,QACrCT,CACX,GACA,CAAAnM,IAAA,yBAAAC,MACA,SAAuBqI,GACnB,QAAIA,EAAEuE,WAAW,IAIrB,GAAC,CAAA7M,IAAA,YAAAC,MACD,SAAUqI,GAGN,OAFAlI,KAAKiM,iBAAiBS,SAEf,CACX,GAAC,CAAA9M,IAAA,iBAAAC,MACD,SAAeqI,GACX,OAAOlI,KAAKiM,iBAAiBU,eAAezE,EAAEoD,eAAgBpD,EAAE0E,MACpE,GAAC,CAAAhN,IAAA,iBAAAC,MACD,SAAeqI,GACX,IAAM2E,EAAU7M,KAAKiM,iBAAiBa,eAAe5E,EAAEoD,eAAgBpD,EAAEmD,cACzE,GAAIwB,EAEA,IAAK,IAAIrK,EAAI,EAAGC,EAAMoK,EAAQtK,OAAQC,EAAIC,EAAKD,IAAK,CAChD,IAAMuK,EAAcF,EAAQrK,GAAGwK,aAC3BD,GACA/M,KAAK+L,QAAQA,QAAQkB,YAAYF,EAEzC,CAEJ,OAAO,CACX,GAAC,CAAAnN,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,IAAM2E,EAAU7M,KAAKiM,iBAAiBiB,gBAAgBhF,EAAEoD,eAAgBpD,EAAEmD,cAC1E,GAAIwB,EAEA,IAAK,IAAIrK,EAAI,EAAGC,EAAMoK,EAAQtK,OAAQC,EAAIC,EAAKD,IAAK,CAChD,IAAMuK,EAAcF,EAAQrK,GAAGwK,aAC3BD,GACA/M,KAAK+L,QAAQA,QAAQkB,YAAYF,EAEzC,CAEJ,OAAO,CACX,GAAC,CAAAnN,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOA,EAAEiF,gBACb,GAAC,CAAAvN,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOlI,KAAKiM,iBAAiBN,gBAAgBzD,EAAEnG,OACnD,GAAC,CAAAnC,IAAA,iBAAAC,MACD,SAAeqI,GACX,OAAO,CACX,GACA,CAAAtI,IAAA,qBAAAC,MACA,WACI,OAAOG,KAAKiM,iBAAiBrC,oBACjC,GAAC,CAAAhK,IAAA,mBAAAC,MACD,WACI,OAAOG,KAAKiM,iBAAiBnC,kBACjC,GAAC,CAAAlK,IAAA,iBAAAC,MACD,SAAe2B,GACX,OAAOxB,KAAKiM,iBAAiBmB,QAAQ5L,EACzC,GAAC,CAAA5B,IAAA,cAAAC,MACD,SAAYV,GACR,IAAMkO,EAAMrN,KAAKiM,iBAAiBqB,OAC5BC,EAAW,IAAIC,EAAkBxN,KAAK+L,QAAQA,QAAS/L,KAAK8L,MAAO3M,GACnEsO,EAAM,CACRvE,oBAAqBmE,EAAInE,oBACzBC,MAAOkE,EAAIlE,MACXuE,YAAaL,EAAIlE,MAAM5G,QAGrBoL,EAASJ,EAASK,OAAOH,EAAKtO,EAAawK,gBAAiBxK,EAAa0K,cAAe1K,EAAa0O,wBAC3G7N,KAAKiM,iBAAiBhD,KAAK0E,EAAOzE,oBAAqByE,EAAOxE,MAClE,KAACyC,CAAA,CArF8B,GAuF7B4B,EAAiB,WACnB,SAAAA,EAAYzB,EAASF,EAAM1M,IAAcG,EAAAA,EAAAA,GAAA,KAAAkO,GACrCxN,KAAK+L,QAAUA,EACf/L,KAAK6L,KAAOA,EACZ7L,KAAKb,aAAeA,CACxB,CA+LC,OA/LAQ,EAAAA,EAAAA,GAAA6N,EAAA,EAAA5N,IAAA,SAAAC,MACD,SAAOiO,EAAWnE,EAAiBoE,EAAgBC,GAC/C,IAAMP,EAAM,CACRvE,oBAAqB4E,EAAU5E,oBAC/BC,MAAO2E,EAAU3E,MAAM6B,MAAM,GAC7B0C,YAAaI,EAAUJ,aAE3B,GAAKD,EAAIvE,oBAAsBuE,EAAIC,YAAc,EAAI/D,GAAqBoE,EAAiBN,EAAIvE,oBAAsB,CAEjHuE,EAAIvE,oBAAsBS,EAC1B8D,EAAIC,YAAcK,EAAiBpE,EAAkB,EACrD8D,EAAItE,MAAQ,GACZ,IAAK,IAAI8E,EAAItE,EAAiBsE,GAAKF,EAAgBE,IAC/CR,EAAItE,MAAM8E,EAAItE,GAAmB3J,KAAK6L,KAAKK,oBAG/C,OADAlM,KAAKkO,iBAAiBT,GAAK,EAAMO,GAC1BP,CACX,CAGA,GADAzN,KAAKmO,sBAAsBV,EAAKvL,KAAKsJ,IAAI7B,EAAkB8D,EAAIvE,oBAAqB,GAAIhH,KAAKwJ,IAAIqC,EAAiBN,EAAIvE,oBAAqBuE,EAAIC,YAAc,GAAIM,EAAUrE,GACvK8D,EAAIvE,oBAAsBS,EAAiB,CAE3C,IAAM2B,EAAiB3B,EACjB0B,EAAenJ,KAAKwJ,IAAIqC,EAAgBN,EAAIvE,oBAAsB,GACpEoC,GAAkBD,IAClBrL,KAAKoO,mBAAmBX,EAAKnC,EAAgBD,EAAc2C,EAAUrE,GACrE8D,EAAIC,aAAerC,EAAeC,EAAiB,EAE3D,MACK,GAAImC,EAAIvE,oBAAsBS,EAAiB,CAEhD,IAAM0E,EAAYnM,KAAKwJ,IAAI+B,EAAIC,YAAa/D,EAAkB8D,EAAIvE,qBAC9DmF,EAAY,IACZrO,KAAKsO,mBAAmBb,EAAKY,GAC7BZ,EAAIC,aAAeW,EAE3B,CAEA,GADAZ,EAAIvE,oBAAsBS,EACtB8D,EAAIvE,oBAAsBuE,EAAIC,YAAc,EAAIK,EAAgB,CAEhE,IAAMzC,EAAiBmC,EAAIvE,oBAAsBuE,EAAIC,YAC/CrC,EAAe0C,EACjBzC,GAAkBD,IAClBrL,KAAKuO,kBAAkBd,EAAKnC,EAAgBD,EAAc2C,EAAUrE,GACpE8D,EAAIC,aAAerC,EAAeC,EAAiB,EAE3D,MACK,GAAImC,EAAIvE,oBAAsBuE,EAAIC,YAAc,EAAIK,EAAgB,CAErE,IAAMzC,EAAiBpJ,KAAKsJ,IAAI,EAAGuC,EAAiBN,EAAIvE,oBAAsB,GAExEmF,EADeZ,EAAIC,YAAc,EACNpC,EAAiB,EAC9C+C,EAAY,IACZrO,KAAKwO,kBAAkBf,EAAKY,GAC5BZ,EAAIC,aAAeW,EAE3B,CAEA,OADArO,KAAKkO,iBAAiBT,GAAK,EAAOO,GAC3BP,CACX,GAAC,CAAA7N,IAAA,wBAAAC,MACD,SAAsB4N,EAAKgB,EAAYC,EAAUV,EAAUW,GAGvD,IAFA,IAAMzF,EAAsBuE,EAAIvE,oBAC1BC,EAAQsE,EAAItE,MACT3G,EAAIiM,EAAYjM,GAAKkM,EAAUlM,IAAK,CACzC,IAAMhB,EAAa0H,EAAsB1G,EACzC2G,EAAM3G,GAAGoM,WAAWpN,EAAYwM,EAASxM,EAAamN,GAC1D,CACJ,GAAC,CAAA/O,IAAA,qBAAAC,MACD,SAAmB4N,EAAKnC,EAAgBD,EAAc2C,EAAUW,GAG5D,IAFA,IAAM9D,EAAW,GACbgE,EAAc,EACTrN,EAAa8J,EAAgB9J,GAAc6J,EAAc7J,IAC9DqJ,EAASgE,KAAiB7O,KAAK6L,KAAKK,oBAExCuB,EAAItE,MAAQ0B,EAASzI,OAAOqL,EAAItE,MACpC,GAAC,CAAAvJ,IAAA,qBAAAC,MACD,SAAmB4N,EAAKqB,GACpB,IAAK,IAAItM,EAAI,EAAGA,EAAIsM,EAAatM,IAAK,CAClC,IAAMuK,EAAcU,EAAItE,MAAM3G,GAAGwK,aAC7BD,GACA/M,KAAK+L,QAAQkB,YAAYF,EAEjC,CACAU,EAAItE,MAAMgB,OAAO,EAAG2E,EACxB,GAAC,CAAAlP,IAAA,oBAAAC,MACD,SAAkB4N,EAAKnC,EAAgBD,EAAc2C,EAAUW,GAG3D,IAFA,IAAM9D,EAAW,GACbgE,EAAc,EACTrN,EAAa8J,EAAgB9J,GAAc6J,EAAc7J,IAC9DqJ,EAASgE,KAAiB7O,KAAK6L,KAAKK,oBAExCuB,EAAItE,MAAQsE,EAAItE,MAAM/G,OAAOyI,EACjC,GAAC,CAAAjL,IAAA,oBAAAC,MACD,SAAkB4N,EAAKqB,GAEnB,IADA,IAAMC,EAActB,EAAIC,YAAcoB,EAC7BtM,EAAI,EAAGA,EAAIsM,EAAatM,IAAK,CAClC,IAAMuK,EAAcU,EAAItE,MAAM4F,EAAcvM,GAAGwK,aAC3CD,GACA/M,KAAK+L,QAAQkB,YAAYF,EAEjC,CACAU,EAAItE,MAAMgB,OAAO4E,EAAaD,EAClC,GAAC,CAAAlP,IAAA,2BAAAC,MACD,SAAyB4N,EAAKuB,EAAgBC,EAAcC,GACpD1B,EAAkB2B,YAClBF,EAAezB,EAAkB2B,UAAUC,WAAWH,IAE1D,IAAMI,EAAYrP,KAAK+L,QAAQsD,UAC3BL,IAAmBK,EACnBrP,KAAK+L,QAAQuD,UAAYL,EAGzBI,EAAUE,mBAAmB,WAAYN,GAG7C,IADA,IAAIO,EAAYxP,KAAK+L,QAAQsD,UACpB7M,EAAIiL,EAAIC,YAAc,EAAGlL,GAAK,EAAGA,IAAK,CAC3C,IAAMiN,EAAOhC,EAAItE,MAAM3G,GACnB0M,EAAO1M,KACPiN,EAAKC,WAAWF,GAChBA,EAAYA,EAAUG,gBAE9B,CACJ,GAAC,CAAA/P,IAAA,+BAAAC,MACD,SAA6B4N,EAAKmC,EAAkBC,GAChD,IAAMC,EAAc1D,SAASC,cAAc,OACvCmB,EAAkB2B,YAClBS,EAAmBpC,EAAkB2B,UAAUC,WAAWQ,IAE9DE,EAAYR,UAAYM,EACxB,IAAK,IAAIpN,EAAI,EAAGA,EAAIiL,EAAIC,YAAalL,IAAK,CACtC,IAAMiN,EAAOhC,EAAItE,MAAM3G,GACvB,GAAIqN,EAAWrN,GAAI,CACf,IAAM+B,EAASuL,EAAYC,WACrBhD,EAAc0C,EAAKzC,aACzBD,EAAYiD,WAAWC,aAAa1L,EAAQwI,GAC5C0C,EAAKC,WAAWnL,EACpB,CACJ,CACJ,GAAC,CAAA3E,IAAA,mBAAAC,MACD,SAAiB4N,EAAKuB,EAAgBhB,GAClC,IAAMkC,EAAK1C,EAAkB2C,IACvBzC,EAAcD,EAAIC,YAClBvE,EAAQsE,EAAItE,MACZD,EAAsBuE,EAAIvE,oBAC1BgG,EAAS,GAEXgB,EAAGE,QAEH,IADA,IAAIC,GAAa,EACR7N,EAAI,EAAGA,EAAIkL,EAAalL,IAAK,CAClC,IAAMiN,EAAOtG,EAAM3G,GAGnB,GAFA0M,EAAO1M,IAAK,GACQiN,EAAKzC,aAKJyC,EAAKa,WAAW9N,EAAI0G,EAAqB8E,EAASxL,GAAIxC,KAAKb,aAAc+Q,KAK9FhB,EAAO1M,IAAK,EACZ6N,GAAa,EACjB,CACIA,GACArQ,KAAKuQ,yBAAyB9C,EAAKuB,EAAgBkB,EAAGM,QAAStB,GAInEgB,EAAGE,QAGH,IAFA,IAAIK,GAAiB,EACfZ,EAAa,GACVrN,EAAI,EAAGA,EAAIkL,EAAalL,IAAK,CAClC,IAAMiN,EAAOtG,EAAM3G,GAEnB,GADAqN,EAAWrN,IAAK,GACZ0M,EAAO1M,GAIUiN,EAAKa,WAAW9N,EAAI0G,EAAqB8E,EAASxL,GAAIxC,KAAKb,aAAc+Q,KAK9FL,EAAWrN,IAAK,EAChBiO,GAAiB,EACrB,CACIA,GACAzQ,KAAK0Q,6BAA6BjD,EAAKyC,EAAGM,QAASX,EAG/D,KAACrC,CAAA,CApMkB,GAsMvBA,EAAkB2B,WAAYwB,EAAAA,EAAAA,GAAyB,kBAAmB,CAAEvB,WAAY,SAAAvP,GAAK,OAAIA,CAAK,IACtG2N,EAAkB2C,IAAM,IAAIS,EAAAA,GAAc,I,mMCxc7BC,EAAY,SAAAC,IAAA/R,EAAAA,EAAAA,GAAA8R,EAAAC,GAAA,IAAA9R,GAAAC,EAAAA,EAAAA,GAAA4R,GACrB,SAAAA,EAAYE,GAAS,IAAA1R,GAAAC,EAAAA,EAAAA,GAAA,KAAAuR,IACjBxR,EAAAL,EAAAO,KAAA,KAAMwR,IACDC,cAAgB,IAAIpF,EAAAA,GAAsBqF,EAAAA,EAAAA,GAAA5R,IAC/CA,EAAK0M,QAAU1M,EAAK2R,cAAcjF,QAClC,IACMmF,EADU7R,EAAK8R,SAASjO,cAAc6B,QACnBC,IAAI,IAIc,OAH3CoM,EAAAA,EAAAA,GAAc/R,EAAK0M,QAASmF,GAC5B7R,EAAKgS,iBAAmB,GACxBhS,EAAKiS,YAAa,EAClBjS,EAAK0M,QAAQO,aAAa,iBAAiBjN,CAC/C,CAuFC,OAvFAM,EAAAA,EAAAA,GAAAkR,EAAA,EAAAjR,IAAA,eAAAC,MACD,WACI,IAAAyN,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAV,EAAAW,WAAA,qBAAAjS,KAAA,MACI,OAAO,EAEX,IAAK,IAAIiD,EAAI,EAAGC,EAAMzC,KAAKqR,iBAAiB9O,OAAQC,EAAIC,EAAKD,IAAK,CAE9D,GADuBxC,KAAKqR,iBAAiB7O,GAC1BiP,eACf,OAAO,CAEf,CACA,OAAO,CACX,GAAC,CAAA7R,IAAA,UAAAC,MACD,YACIyN,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAV,EAAAW,WAAA,gBAAAjS,KAAA,MACA,IAAK,IAAIiD,EAAI,EAAGC,EAAMzC,KAAKqR,iBAAiB9O,OAAQC,EAAIC,EAAKD,IAAK,CACvCxC,KAAKqR,iBAAiB7O,GAC9BkP,SACnB,CACA1R,KAAKqR,iBAAmB,EAC5B,GAAC,CAAAzR,IAAA,aAAAC,MACD,WACI,OAAOG,KAAK+L,OAChB,GACA,CAAAnM,IAAA,oBAAAC,MACA,WACI,OAAO,IAAI8R,EAAgB3R,KAAKmR,SAASjO,cAAelD,KAAKqR,iBACjE,GACA,CAAAzR,IAAA,oBAAAC,MACA,SAAkB+R,GACd5R,KAAKqR,iBAAiBQ,KAAKD,EAC/B,GACA,CAAAhS,IAAA,yBAAAC,MACA,SAAuBqI,GACnBlI,KAAKgR,cAAcc,uBAAuB5J,GAG1C,IAFA,IAAMyB,EAAkB3J,KAAKgR,cAAcpH,qBACrCC,EAAgB7J,KAAKgR,cAAclH,mBAChCtI,EAAamI,EAAiBnI,GAAcqI,EAAerI,IAAc,CACjExB,KAAKgR,cAAce,eAAevQ,GAC1CsQ,uBAAuB5J,EAChC,CACA,IACMgJ,EADUlR,KAAKmR,SAASjO,cAAc6B,QACnBC,IAAI,IAE7B,OADAoM,EAAAA,EAAAA,GAAcpR,KAAK+L,QAASmF,IACrB,CACX,GAAC,CAAAtR,IAAA,YAAAC,MACD,SAAUqI,GACN,OAAOlI,KAAKgR,cAAcgB,UAAU9J,EACxC,GAAC,CAAAtI,IAAA,iBAAAC,MACD,SAAeqI,GAEX,OADAlI,KAAKsR,WAAapJ,EAAE+J,WACb,CACX,GAAC,CAAArS,IAAA,iBAAAC,MACD,SAAeqI,GACX,OAAOlI,KAAKgR,cAAcrE,eAAezE,EAC7C,GAAC,CAAAtI,IAAA,iBAAAC,MACD,SAAeqI,GACX,OAAOlI,KAAKgR,cAAclE,eAAe5E,EAC7C,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOlI,KAAKgR,cAAc9D,gBAAgBhF,EAC9C,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOlI,KAAKgR,cAAckB,gBAAgBhK,KAAM,CACpD,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOlI,KAAKgR,cAAcrF,gBAAgBzD,EAC9C,GAAC,CAAAtI,IAAA,iBAAAC,MACD,SAAeqI,GACX,OAAOlI,KAAKgR,cAAcmB,eAAejK,EAC7C,GACA,CAAAtI,IAAA,gBAAAC,MACA,SAAc4N,GAEV,IADA,IAAM2E,EAAWpS,KAAKqR,iBAAiBgB,QAAO,SAAAT,GAAO,OAAIA,EAAQH,cAAc,IACtEjP,EAAI,EAAGC,EAAM2P,EAAS7P,OAAQC,EAAIC,EAAKD,IAAK,CACjD,IAAM8P,EAAiBF,EAAS5P,GAChC8P,EAAeC,cAAc9E,GAC7B6E,EAAeE,aACnB,CACJ,GAAC,CAAA5S,IAAA,SAAAC,MACD,SAAO4N,GAEHzN,KAAKyS,oBAAoBhF,GACzBzN,KAAK+L,QAAQ2G,gBAAgB,UAAW1S,KAAKsR,WACjD,GAAC,CAAA1R,IAAA,sBAAAC,MACD,SAAoB4N,GAChBzN,KAAKgR,cAAc2B,YAAYlF,EAAItO,aACvC,KAAC0R,CAAA,CAlGoB,C,SAAS+B,GAoGrBjB,EAAe,WACxB,SAAAA,EAAYzO,EAAe2P,IAAiBvT,EAAAA,EAAAA,GAAA,KAAAqS,GACxC3R,KAAK8S,eAAiB5P,EACtBlD,KAAK+S,YAAc/S,KAAK8S,eAAe/N,QAAQC,IAAI,IACnDhF,KAAKqR,iBAAmBwB,EACxB7S,KAAKgT,SAAW,KAChBhT,KAAKiT,iBAAmB,IAC5B,CA4CC,OA5CAtT,EAAAA,EAAAA,GAAAgS,EAAA,EAAA/R,IAAA,aAAAC,MACD,WACI,OAAKG,KAAKgT,SAGHhT,KAAKgT,SAASjH,QAFV,IAGf,GAAC,CAAAnM,IAAA,aAAAC,MACD,SAAWkM,GACP/L,KAAKgT,UAAW7G,EAAAA,EAAAA,GAAkBJ,EACtC,GAAC,CAAAnM,IAAA,mBAAAC,MACD,WACI,GACH,CAAAD,IAAA,kBAAAC,MACD,WACI,GACH,CAAAD,IAAA,yBAAAC,MACD,SAAuBqI,GACnBlI,KAAK+S,YAAc/S,KAAK8S,eAAe/N,QAAQC,IAAI,GACvD,GAAC,CAAApF,IAAA,aAAAC,MACD,SAAW2B,EAAYwM,EAAU7O,EAAc+Q,GAE3C,IADA,IAAI7N,EAAS,GACJG,EAAI,EAAGC,EAAMzC,KAAKqR,iBAAiB9O,OAAQC,EAAIC,EAAKD,IAAK,CAE9DH,GADuBrC,KAAKqR,iBAAiB7O,GACpBoL,OAAOzO,EAAawK,gBAAiBnI,EAClE,CACA,OAAIxB,KAAKiT,mBAAqB5Q,IAI9BrC,KAAKiT,iBAAmB5Q,EACxB6N,EAAGgD,aAAa,sCAChBhD,EAAGgD,aAAaC,OAAOnF,IACvBkC,EAAGgD,aAAa,yBAChBhD,EAAGgD,aAAaC,OAAOnT,KAAK+S,cAC5B7C,EAAGgD,aAAa,SAChBhD,EAAGgD,aAAa7Q,GAChB6N,EAAGgD,aAAa,WACT,EACX,GAAC,CAAAtT,IAAA,aAAAC,MACD,SAAW2B,EAAYwM,GACfhO,KAAKgT,WACLhT,KAAKgT,SAASI,OAAOpF,GACrBhO,KAAKgT,SAASK,UAAUrT,KAAK+S,aAErC,KAACpB,CAAA,CAnDuB,GAqDf2B,EAAmB,SAAAC,IAAAxU,EAAAA,EAAAA,GAAAuU,EAAAC,GAAA,IAAAC,GAAAvU,EAAAA,EAAAA,GAAAqU,GAC5B,SAAAA,EAAYvC,GAAS,IAAA0C,GAAAnU,EAAAA,EAAAA,GAAA,KAAAgU,GAEjB,IACMI,GAFND,EAAAD,EAAAjU,KAAA,KAAMwR,IACeI,SAASjO,cAAc6B,QACjBC,IAAI,KAEL,OAD1ByO,EAAKE,cAAgBD,EAAWE,aAChCH,EAAK1H,QAAQsH,UAAU,GAAGI,CAC9B,CAeC,OAdD9T,EAAAA,EAAAA,GAAA2T,EAAA,EAAA1T,IAAA,yBAAAC,MACA,SAAuBqI,GACnB,IACMwL,EADU1T,KAAKmR,SAASjO,cAAc6B,QACjBC,IAAI,KAE/B,OADAhF,KAAK2T,cAAgBD,EAAWE,cACzBtG,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA+B,EAAA9B,WAAA,+BAAAjS,KAAA,KAA6B2I,KAAM,CAC9C,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOoF,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA+B,EAAA9B,WAAA,wBAAAjS,KAAA,KAAsB2I,IAAMA,EAAE2L,kBACzC,GACA,CAAAjU,IAAA,sBAAAC,MACA,SAAoB4N,IAChBH,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA+B,EAAA9B,WAAA,4BAAAjS,KAAA,KAA0BkO,GAC1BzN,KAAK+L,QAAQ+H,SAAS5R,KAAKsJ,IAAIiC,EAAIlN,YAAaP,KAAK2T,eACzD,KAACL,CAAA,CAtB2B,CAASzC,GAwB5BkD,EAAkB,SAAAC,IAAAjV,EAAAA,EAAAA,GAAAgV,EAAAC,GAAA,IAAAC,GAAAhV,EAAAA,EAAAA,GAAA8U,GAC3B,SAAAA,EAAYhD,GAAS,IAAAmD,GAAA5U,EAAAA,EAAAA,GAAA,KAAAyU,GAEjB,IAAMhP,GADNmP,EAAAD,EAAA1U,KAAA,KAAMwR,IACeI,SAASjO,cAAc6B,QACtC2O,EAAa3O,EAAQC,IAAI,KAI0C,OAHzEkP,EAAKC,aAAeT,EAAWU,YAC/BF,EAAKnI,QAAQO,aAAa,wBAC1B4H,EAAKnI,QAAQ+H,SAAS,IACtB1C,EAAAA,EAAAA,GAAc8C,EAAKnI,QAAShH,EAAQC,IAAI,KAAiCkP,CAC7E,CAgBC,OAhBAvU,EAAAA,EAAAA,GAAAoU,EAAA,EAAAnU,IAAA,yBAAAC,MACD,SAAuBqI,GACnB,IAAMnD,EAAU/E,KAAKmR,SAASjO,cAAc6B,SAC5CqM,EAAAA,EAAAA,GAAcpR,KAAK+L,QAAShH,EAAQC,IAAI,KACxC,IAAM0O,EAAa3O,EAAQC,IAAI,KAE/B,OADAhF,KAAKmU,aAAeT,EAAWU,aACxB9G,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAwC,EAAAvC,WAAA,+BAAAjS,KAAA,KAA6B2I,KAAM,CAC9C,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,OAAOoF,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAwC,EAAAvC,WAAA,wBAAAjS,KAAA,KAAsB2I,IAAMA,EAAEmM,mBACzC,GAAC,CAAAzU,IAAA,sBAAAC,MACD,SAAoB4N,IAChBH,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAwC,EAAAvC,WAAA,4BAAAjS,KAAA,KAA0BkO,GAC1B,IAAMnM,EAASY,KAAKwJ,IAAI+B,EAAIhN,aAAc,KAC1CT,KAAK+L,QAAQsH,UAAU/R,GACvBtB,KAAK+L,QAAQ+H,SAAS9T,KAAKmU,aAC/B,KAACJ,CAAA,CAzB0B,CAASlD,E,gKCpL3B+B,EAAQ,SAAA0B,IAAAvV,EAAAA,EAAAA,GAAA6T,EAAA0B,GAAA,IAAAtV,GAAAC,EAAAA,EAAAA,GAAA2T,GACjB,SAAAA,EAAY7B,GAAS,IAAA1R,EAGmB,OAHnBC,EAAAA,EAAAA,GAAA,KAAAsT,IACjBvT,EAAAL,EAAAO,KAAA,OACK4R,SAAWJ,EAChB1R,EAAK8R,SAASoD,iBAAetD,EAAAA,EAAAA,GAAA5R,IAAOA,CACxC,CAIC,OAJAM,EAAAA,EAAAA,GAAAiT,EAAA,EAAAhT,IAAA,UAAAC,MACD,WACIG,KAAKmR,SAASqD,mBAAmBxU,OACjCsN,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAqB,EAAApB,WAAA,gBAAAjS,KAAA,KACJ,KAACqT,CAAA,CATgB,C,QAAS6B,GAWjBC,EAAgB,oBAAAA,KAAApV,EAAAA,EAAAA,GAAA,KAAAoV,EAAA,CA4BxB,OA5BwB/U,EAAAA,EAAAA,GAAA+U,EAAA,OAAA9U,IAAA,QAAAC,MACzB,SAAa8U,EAAQC,GACjBD,EAAOnI,aAAa,YAAa2G,OAAOyB,GAC5C,GAAC,CAAAhV,IAAA,OAAAC,MACD,SAAY8U,GACR,IAAME,EAAIF,EAAOG,aAAa,aAC9B,OAAU,OAAND,EACO,EAEJE,SAASF,EAAG,GACvB,GAAC,CAAAjV,IAAA,UAAAC,MACD,SAAemV,EAAOC,GAGlB,IAFA,IAAM5S,EAAS,GACX6S,EAAY,EACTF,GAASA,IAAU5I,SAAS+I,MAC3BH,IAAUC,GAGVD,EAAMI,WAAaJ,EAAMK,eACzBhT,EAAO6S,KAAelV,KAAKsV,KAAKN,IAEpCA,EAAQA,EAAMO,cAGlB,IADA,IAAMV,EAAI,IAAIW,WAAWN,GAChB1S,EAAI,EAAGA,EAAI0S,EAAW1S,IAC3BqS,EAAErS,GAAKH,EAAO6S,EAAY1S,EAAI,GAElC,OAAOqS,CACX,KAACH,CAAA,CA5BwB,E,6FCXhBe,EAAmB,WAC5B,SAAAA,EAAYzN,IAAsB1I,EAAAA,EAAAA,GAAA,KAAAmW,GAC9BzV,KAAK0V,UAAY,KACjB1V,KAAK2V,QAAU,KACf3V,KAAK4V,cAAgB,KACrB5V,KAAK6V,YAAc,KACnB7V,KAAK8V,aAAe,KACpB9V,KAAK+V,YAAc,KACnB/V,KAAKgW,UAAY,KACjBhW,KAAKiW,YAAc,KACnBjW,KAAKkW,YAAc,KACnBlW,KAAKmW,oBAAsB,KAC3BnW,KAAKoW,aAAe,KACpBpW,KAAKqW,sBAAwBrO,CACjC,CA8EC,OA9EArI,EAAAA,EAAAA,GAAA8V,EAAA,EAAA7V,IAAA,cAAAC,MACD,SAAYqI,GACR,IAAIoO,EACsB,QAAzBA,EAAKtW,KAAK0V,iBAA8B,IAAPY,GAAyBA,EAAG/W,KAAKS,KAAMkI,EAC7E,GAAC,CAAAtI,IAAA,YAAAC,MACD,SAAUqI,GACN,IAAIoO,EACoB,QAAvBA,EAAKtW,KAAK2V,eAA4B,IAAPW,GAAyBA,EAAG/W,KAAKS,KAAMkI,EAC3E,GAAC,CAAAtI,IAAA,kBAAAC,MACD,SAAgBqI,GACZ,IAAIoO,EAC0B,QAA7BA,EAAKtW,KAAK4V,qBAAkC,IAAPU,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GACpH,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACV,IAAIoO,EACwB,QAA3BA,EAAKtW,KAAK6V,mBAAgC,IAAPS,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GAClH,GAAC,CAAAtI,IAAA,iBAAAC,MACD,SAAeqI,GACX,IAAIoO,EACyB,QAA5BA,EAAKtW,KAAK8V,oBAAiC,IAAPQ,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GACnH,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACV,IAAIoO,EACwB,QAA3BA,EAAKtW,KAAK+V,mBAAgC,IAAPO,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GAClH,GAAC,CAAAtI,IAAA,cAAAC,MACD,SAAYqI,GACR,IAAIoO,EACsB,QAAzBA,EAAKtW,KAAKgW,iBAA8B,IAAPM,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GAChH,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACV,IAAIoO,EACwB,QAA3BA,EAAKtW,KAAKiW,mBAAgC,IAAPK,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GAClH,GAAC,CAAAtI,IAAA,gBAAAC,MACD,SAAcqI,GACV,IAAIoO,EACwB,QAA3BA,EAAKtW,KAAKkW,mBAAgC,IAAPI,GAAyBA,EAAG/W,KAAKS,KAAMA,KAAKuW,8BAA8BrO,GAClH,GAAC,CAAAtI,IAAA,wBAAAC,MACD,WACI,IAAIyW,EACgC,QAAnCA,EAAKtW,KAAKmW,2BAAwC,IAAPG,GAAyBA,EAAG/W,KAAKS,KACjF,GAAC,CAAAJ,IAAA,iBAAAC,MACD,SAAeqI,GACX,IAAIoO,EACyB,QAA5BA,EAAKtW,KAAKoW,oBAAiC,IAAPE,GAAyBA,EAAG/W,KAAKS,KAAMkI,EAChF,GAAC,CAAAtI,IAAA,gCAAAC,MACD,SAA8BqI,GAC1B,OAAIA,EAAEyM,OACK,CACH6B,MAAOtO,EAAEsO,MACT7B,OAAQ3U,KAAKyW,+BAA+BvO,EAAEyM,SAG/CzM,CACX,GAAC,CAAAtI,IAAA,iCAAAC,MACD,SAA+B8U,GAC3B,OAAOc,EAAoBiB,8BAA8B/B,EAAQ3U,KAAKqW,sBAC1E,IAAC,EAAAzW,IAAA,gCAAAC,MACD,SAAqC8U,EAAQ3M,GACzC,IAAM3F,EAASsU,OAAOC,OAAO,CAAC,EAAGjC,GAUjC,OATItS,EAAOnC,WACPmC,EAAOnC,SAAW8H,EAAqBC,mCAAmC5F,EAAOnC,WAEjFmC,EAAOvC,QACPuC,EAAOvC,MAAQkI,EAAqB6O,6BAA6BxU,EAAOvC,QAExD,IAAhBuC,EAAOsB,MAAqE,IAAhBtB,EAAOsB,OACnEtB,EAAOyU,OAAS9W,KAAK+W,+BAA+B1U,EAAOyU,OAAQ9O,IAEhE3F,CACX,GAAC,CAAAzC,IAAA,iCAAAC,MACD,SAAsCiF,EAAMkD,GACxC,MAAO,CACHgP,WAAYlS,EAAKkS,WACjBC,eAAgBnS,EAAKmS,eAAiBjP,EAAqBC,mCAAmCnD,EAAKmS,gBAAkBnS,EAAKmS,eAC1HC,cAAepS,EAAKoS,cAAgBlP,EAAqBC,mCAAmCnD,EAAKoS,eAAiBpS,EAAKoS,cACvHhX,SAAU8H,EAAqBC,mCAAmCnD,EAAK5E,UACvEiX,gBAAiBnP,EAAqBC,mCAAmC,IAAIpD,EAAAA,EAASC,EAAKqS,gBAAiB,IAAI3V,WAExH,KAACiU,CAAA,CA5F2B,E,ulBCEnB2B,EAAuB,SAAAC,IAAAtY,EAAAA,EAAAA,GAAAqY,EAAAC,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAAmY,GAChC,SAAAA,IAAc,IAAA/X,EAmB8E,OAnB9EC,EAAAA,EAAAA,GAAA,KAAA8X,IACV/X,EAAAL,EAAAO,KAAA,OACK+X,QAAU,KACfjY,EAAKkY,sBAAwB,KAI7BlY,EAAKmY,WAAanY,EAAKoY,UAAU,IAAIC,EAAAA,IAIrCrY,EAAKsY,SAAW,IAAIC,IAIpBvY,EAAKwY,uBAAyB,GAC9BxY,EAAKwY,uBAAuB,IAAiD,EAC7ExY,EAAKwY,uBAAuB,IAA4D,EACxFxY,EAAKwY,uBAAuB,IAAkE,EAC9FxY,EAAKwY,uBAAuB,IAAsD,EAAMxY,CAC5F,CAmGC,OAnGAM,EAAAA,EAAAA,GAAAyX,EAAA,EAAAxX,IAAA,aAAAC,MACD,SAAWiY,EAAQC,EAAeC,GAAsB,IAAAvE,EAAA,KACpDzT,KAAKsX,QAAUQ,EACf9X,KAAKuX,sBAAwBS,EAAqB,IAClBC,EADkBC,GAAAC,EAAAA,EAAAA,GAC/BJ,GAAa,IAAhC,IAAAG,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAAkC,KAAvBC,EAAIN,EAAApY,MACPG,KAAK2X,SAASa,IAAID,EAAKE,KACvBC,EAAAA,EAAAA,IAAkB,IAAIC,MAAM,kDAADvW,OAAmDmW,EAAKE,MAGvFzY,KAAK2X,SAASiB,IAAIL,EAAKE,GAAIF,EAC/B,CAAC,OAAAM,GAAAX,EAAAhQ,EAAA2Q,EAAA,SAAAX,EAAAY,GAAA,CACD9Y,KAAK+Y,iBAAiB,GAItB/Y,KAAKyX,WAAUuB,EAAAA,EAAAA,KAAY,WACvBvF,EAAKsF,iBAAiB,EAC1B,KAIA/Y,KAAKyX,WAAUuB,EAAAA,EAAAA,KAAY,WACvBvF,EAAKsF,iBAAiB,EAC1B,KAIA/Y,KAAKyX,WAAUuB,EAAAA,EAAAA,KAAY,WACvBvF,EAAKsF,iBAAiB,EAC1B,GAAG,KACP,GAAC,CAAAnZ,IAAA,gBAAAC,MACD,WACI,IACgDoZ,EAD1CC,EAAqB,CAAC,EAAEC,GAAAhB,EAAAA,EAAAA,GACGnY,KAAKwX,YAAU,IAAhD,IAAA2B,EAAAf,MAAAa,EAAAE,EAAAd,KAAAC,MAAkD,KAAAc,GAAAC,EAAAA,EAAAA,GAAAJ,EAAApZ,MAAA,GAAtC4Y,EAAEW,EAAA,GAAEE,EAAYF,EAAA,GACkB,oBAA/BE,EAAaC,gBACpBL,EAAmBT,GAAMa,EAAaC,gBAE9C,CAAC,OAAAV,GAAAM,EAAAjR,EAAA2Q,EAAA,SAAAM,EAAAL,GAAA,CACD,OAAOI,CACX,GAAC,CAAAtZ,IAAA,mBAAAC,MACD,SAAiBqZ,GAAoB,IACeM,EADfC,GAAAtB,EAAAA,EAAAA,GACAnY,KAAKwX,YAAU,IAAhD,IAAAiC,EAAArB,MAAAoB,EAAAC,EAAApB,KAAAC,MAAkD,KAAAoB,GAAAL,EAAAA,EAAAA,GAAAG,EAAA3Z,MAAA,GAAtC4Y,EAAEiB,EAAA,GAAEJ,EAAYI,EAAA,GACqB,oBAAlCJ,EAAaK,kBACpBL,EAAaK,iBAAiBT,EAAmBT,GAEzD,CAAC,OAAAI,GAAAY,EAAAvR,EAAA2Q,EAAA,SAAAY,EAAAX,GAAA,CACL,GAAC,CAAAlZ,IAAA,MAAAC,MACD,SAAI4Y,GAEA,OADAzY,KAAK4Z,iBAAiBnB,GACfzY,KAAKwX,WAAWxS,IAAIyT,IAAO,IACtC,GAAC,CAAA7Y,IAAA,2BAAAC,MACD,WAEIG,KAAK+Y,iBAAiB,EAC1B,GAAC,CAAAnZ,IAAA,uBAAAC,MACD,WAAuB,IAAAqU,EAAA,KACnBlU,KAAKyX,WAAUuB,EAAAA,EAAAA,KAAY,WACvB9E,EAAK6E,iBAAiB,EAC1B,GAAG,IACP,GAAC,CAAAnZ,IAAA,mBAAAC,MACD,SAAiBga,GACb,IAAI7Z,KAAK6X,uBAAuBgC,GAAhC,CAIA7Z,KAAK6X,uBAAuBgC,IAAiB,EAC7C,IAC8BC,EADxBC,EAAW/Z,KAAKga,yCAAyCH,GAAeI,GAAA9B,EAAAA,EAAAA,GACxD4B,GAAQ,IAA9B,IAAAE,EAAA7B,MAAA0B,EAAAG,EAAA5B,KAAAC,MAAgC,KAArB4B,EAAOJ,EAAAja,MACdG,KAAK4Z,iBAAiBM,EAAQzB,GAClC,CAAC,OAAAI,GAAAoB,EAAA/R,EAAA2Q,EAAA,SAAAoB,EAAAnB,GAAA,CALD,CAMJ,GAAC,CAAAlZ,IAAA,2CAAAC,MACD,SAAyCga,GACrC,IACoCM,EAD9B9X,EAAS,GAAG+X,GAAAjC,EAAAA,EAAAA,GACKnY,KAAK2X,UAAQ,IAApC,IAAAyC,EAAAhC,MAAA+B,EAAAC,EAAA/B,KAAAC,MAAsC,KAAxBC,GAAwBc,EAAAA,EAAAA,GAAAc,EAAAta,MAAA,GAApB,GACV0Y,EAAKsB,gBAAkBA,GACvBxX,EAAOwP,KAAK0G,EAEpB,CAAC,OAAAM,GAAAuB,EAAAlS,EAAA2Q,EAAA,SAAAuB,EAAAtB,GAAA,CACD,OAAOzW,CACX,GAAC,CAAAzC,IAAA,mBAAAC,MACD,SAAiB4Y,GACb,IAAMF,EAAOvY,KAAK2X,SAAS3S,IAAIyT,GAC/B,GAAKF,EAAL,CAIA,GADAvY,KAAK2X,SAAS0C,OAAO5B,IAChBzY,KAAKuX,wBAA0BvX,KAAKsX,QACrC,MAAM,IAAIqB,MAAM,8DAEpB,IACI,IAAM2B,EAAWta,KAAKuX,sBAAsBgD,eAAehC,EAAKiC,KAAMxa,KAAKsX,SAC3EtX,KAAKwX,WAAWoB,IAAIL,EAAKE,GAAI6B,GACY,oBAA9BA,EAASX,kBAA0D,IAAvBpB,EAAKsB,eACxDY,QAAQC,KAAK,wBAADtY,OAAyBmW,EAAKE,GAAE,oFAEpD,CACA,MAAOI,IACHH,EAAAA,EAAAA,IAAkBG,EACtB,CAdA,CAeJ,KAACzB,CAAA,CAxH+B,CAASuD,EAAAA,I,WCHzCC,EAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,GAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EACIE,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnc,GAAS,IAAMoc,EAAKL,EAAUM,KAAKrc,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC1F,SAASiU,EAAStc,GAAS,IAAMoc,EAAKL,EAAiB,MAAE/b,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC7F,SAAS+T,EAAK5Z,GAJlB,IAAexC,EAIawC,EAAOiW,KAAOwD,EAAQzZ,EAAOxC,QAJ1CA,EAIyDwC,EAAOxC,MAJhDA,aAAiB8b,EAAI9b,EAAQ,IAAI8b,GAAE,SAAUG,GAAWA,EAAQjc,EAAQ,KAIjBuc,KAAKJ,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUS,MAAMZ,EAASC,GAAc,KAAKQ,OAClE,GACJ,EA0CII,GAAY,EACVC,GAAS,WACX,SAAAA,EAAYC,EAAOrZ,EAAWsZ,EAAMC,EAAaC,EAAmBC,IAActd,EAAAA,EAAAA,GAAA,KAAAid,GAC9Evc,KAAKwc,MAAQA,EACbxc,KAAKmD,UAAYA,EACjBnD,KAAKyc,KAAOA,EACZzc,KAAK0c,YAAcA,EACnB1c,KAAK2c,kBAAoBA,EACzB3c,KAAK4c,aAAeA,CACxB,CAQC,OARAjd,EAAAA,EAAAA,GAAA4c,EAAA,EAAA3c,IAAA,UAAAC,MACD,YACI6R,EAAAA,EAAAA,IAAQ1R,KAAK2c,mBACb3c,KAAKwc,MAAMK,iBAAiB7c,KAAK4c,cAC7B5c,KAAK0c,aACL1c,KAAKyc,KAAK/K,UAEd1R,KAAKmD,UAAUuO,SACnB,KAAC6K,CAAA,CAhBU,GAkBJO,GAAgB,SAAAzF,IAAAtY,EAAAA,EAAAA,GAAA+d,EAAAzF,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAA6d,GAKvB,SAAAA,EAAYC,EAAYC,EAAUC,EAAyBjF,EAAsBkF,EAAmBC,EAAgBC,EAAmBC,EAAcC,EAAqBC,EAAsBC,EAA8BC,GAAyB,IAAApe,GAAAC,EAAAA,EAAAA,GAAA,KAAAwd,IACnPzd,EAAAL,EAAAO,KAAA,OACKie,6BAA+BA,EAEpCne,EAAKqe,eAAiB,IAAIC,EAAAA,GAC1Bte,EAAKue,eAAiBve,EAAKoY,UAAU,IAAIL,GACzC/X,EAAKwe,cAAgBxe,EAAKoY,UAAU,IAAIqG,EAAAA,IACxCze,EAAK0e,aAAe1e,EAAKwe,cAAcrH,MACvCnX,EAAK2e,yBAA2B3e,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBACjFre,EAAK6e,wBAA0B7e,EAAK2e,yBAAyBxH,MAC7DnX,EAAK8e,0BAA4B9e,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAClFre,EAAK+e,yBAA2B/e,EAAK8e,0BAA0B3H,MAC/DnX,EAAKgf,uCAAyChf,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAC/Fre,EAAKif,sCAAwCjf,EAAKgf,uCAAuC7H,MACzFnX,EAAKkf,yBAA2Blf,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBACjFre,EAAKmf,wBAA0Bnf,EAAKkf,yBAAyB/H,MAC7DnX,EAAKof,6BAA+Bpf,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBACrFre,EAAKqf,4BAA8Brf,EAAKof,6BAA6BjI,MACrEnX,EAAKsf,wBAA0Btf,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAChFre,EAAKuf,uBAAyBvf,EAAKsf,wBAAwBnI,MAC3DnX,EAAKwf,0BAA4Bxf,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAClFre,EAAKyf,yBAA2Bzf,EAAKwf,0BAA0BrI,MAC/DnX,EAAK0f,kBAAoB1f,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAC1Ere,EAAK2f,iBAAmB3f,EAAK0f,kBAAkBvI,MAC/CnX,EAAK4f,2BAA6B5f,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBACnFre,EAAK6f,0BAA4B7f,EAAK4f,2BAA2BzI,MACjEnX,EAAK8f,4BAA8B9f,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBACpFre,EAAK+f,2BAA6B/f,EAAK8f,4BAA4B3I,MACnEnX,EAAKggB,0BAA4BhgB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACjGre,EAAKkgB,yBAA2BlgB,EAAKggB,0BAA0B7I,MAC/DnX,EAAKmgB,mBAAqBngB,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAC3Ere,EAAKogB,kBAAoBpgB,EAAKmgB,mBAAmBhJ,MACjDnX,EAAKqgB,iBAAmBrgB,EAAKoY,UAAU,IAAIkI,GAAoB,CAAE1B,cAAe5e,EAAKqe,kBACrFre,EAAKugB,qBAAuBvgB,EAAKqgB,iBAAiBG,kBAClDxgB,EAAKygB,oBAAsBzgB,EAAKqgB,iBAAiBK,mBACjD1gB,EAAK2gB,mBAAqB3gB,EAAKoY,UAAU,IAAIkI,GAAoB,CAAE1B,cAAe5e,EAAKqe,kBACvFre,EAAK4gB,uBAAyB5gB,EAAK2gB,mBAAmBH,kBACtDxgB,EAAK6gB,sBAAwB7gB,EAAK2gB,mBAAmBD,mBACrD1gB,EAAK8gB,YAAc9gB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACnFre,EAAK+gB,WAAa/gB,EAAK8gB,YAAY3J,MACnCnX,EAAKghB,WAAahhB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAClFre,EAAKihB,UAAYjhB,EAAKghB,WAAW7J,MACjCnX,EAAKkhB,uBAAyBlhB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAC9Fre,EAAKmhB,sBAAwBnhB,EAAKkhB,uBAAuB/J,MACzDnX,EAAKohB,qBAAuBphB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAC5Fre,EAAKqhB,oBAAsBrhB,EAAKohB,qBAAqBjK,MACrDnX,EAAKshB,YAActhB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACnFre,EAAKuhB,WAAavhB,EAAKshB,YAAYnK,MACnCnX,EAAKwhB,WAAaxhB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAClFre,EAAK2W,UAAY3W,EAAKwhB,WAAWrK,MACjCnX,EAAKyhB,aAAezhB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACpFre,EAAK0W,YAAc1W,EAAKyhB,aAAatK,MACrCnX,EAAK0hB,aAAe1hB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACpFre,EAAK4W,YAAc5W,EAAK0hB,aAAavK,MACrCnX,EAAK2hB,aAAe3hB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACpFre,EAAK6W,YAAc7W,EAAK2hB,aAAaxK,MACrCnX,EAAK4hB,qBAAuB5hB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAC5Fre,EAAK8W,oBAAsB9W,EAAK4hB,qBAAqBzK,MACrDnX,EAAK6hB,kBAAoB7hB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACzFre,EAAK8hB,iBAAmB9hB,EAAK6hB,kBAAkB1K,MAC/CnX,EAAK+hB,eAAiB/hB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACtFre,EAAKuW,cAAgBvW,EAAK+hB,eAAe5K,MACzCnX,EAAKgiB,aAAehiB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACpFre,EAAKwW,YAAcxW,EAAKgiB,aAAa7K,MACrCnX,EAAKiiB,cAAgBjiB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACrFre,EAAKyW,aAAezW,EAAKiiB,cAAc9K,MACvCnX,EAAKkiB,cAAgBliB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBACrFre,EAAK+W,aAAe/W,EAAKkiB,cAAc/K,MACvCnX,EAAKmiB,SAAWniB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAChFre,EAAKsW,QAAUtW,EAAKmiB,SAAShL,MAC7BnX,EAAKoiB,WAAapiB,EAAKoY,UAAU,IAAI6H,GAAmBjgB,EAAKue,eAAgBve,EAAKqe,iBAClFre,EAAKqW,UAAYrW,EAAKoiB,WAAWjL,MACjCnX,EAAKqiB,wBAA0BriB,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAChFre,EAAKsiB,uBAAyBtiB,EAAKqiB,wBAAwBlL,MAC3DnX,EAAKuiB,mBAAqBviB,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAC3Ere,EAAKwiB,kBAAoBxiB,EAAKuiB,mBAAmBpL,MACjDnX,EAAKyiB,sBAAwBziB,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAC9Ere,EAAK0iB,qBAAuB1iB,EAAKyiB,sBAAsBtL,MACvDnX,EAAK2iB,wBAA0B3iB,EAAKoY,UAAU,IAAIqG,EAAAA,GAAQ,CAAEG,cAAe5e,EAAKqe,kBAChFre,EAAK4iB,uBAAyB5iB,EAAK2iB,wBAAwBxL,MAC3DnX,EAAK6iB,SAAW,IAAItK,IACpBvY,EAAK8iB,eAAiB,KACtB9iB,EAAK+iB,2BAA6B/iB,EAAKgjB,8BACvCnF,EAAkBoF,uBAClB,IAgCIvK,EAhCEhT,EAAU4R,OAAOC,OAAO,CAAC,EAAGoG,GAClC3d,EAAKkjB,YAAcxF,EACnB1d,EAAKmjB,wBAA0Bzd,EAAQ0d,8BAChC1d,EAAQ0d,uBACfpjB,EAAKqjB,MAASpG,GACdjd,EAAKsjB,yBAA2B,CAAC,EACjCtjB,EAAKujB,wBAA0B,CAAC,EAChCvjB,EAAKwjB,eAAiB5F,EAAwB6F,cAC9CzjB,EAAKyT,eAAiBzT,EAAKoY,UAAUpY,EAAK0jB,qBAAqB9F,EAAwB+F,iBAAkB,EAAOje,EAASwY,IACzHle,EAAKoY,UAAUpY,EAAKyT,eAAemQ,aAAY,SAAC/a,GAC5C7I,EAAKwf,0BAA0BqE,KAAKhb,GACpC,IAAMnD,EAAU1F,EAAKyT,eAAe/N,QACpC,GAAImD,EAAEuE,WAAW,KAAoC,CACjD,IAAMiH,EAAa3O,EAAQC,IAAI,KAC/B3F,EAAKmgB,mBAAmB0D,KAAKxP,EACjC,CACJ,KACArU,EAAK8jB,mBAAqB9jB,EAAKoY,UAAU2F,EAAkBgG,aAAa/jB,EAAKkjB,cAC7EljB,EAAKgkB,qBAAuB/F,EAC5Bje,EAAKikB,mBAAqBpG,EAC1B7d,EAAKkkB,gBAAkBpG,EACvB9d,EAAKmkB,cAAgBnG,EACrBhe,EAAKoY,UAAU,IAAIgM,IAAwBxS,EAAAA,EAAAA,GAAA5R,GAAOA,EAAK8jB,qBACvD9jB,EAAKoY,UAAU,IAAIiM,IAAiBzS,EAAAA,EAAAA,GAAA5R,GAAOA,EAAK8jB,mBAAoB1F,IACpEpe,EAAKkY,sBAAwBS,EAAqB2L,YAAY,IAAIC,EAAAA,EAAkB,CAACC,EAAAA,GAAoBxkB,EAAK8jB,sBAC9G9jB,EAAKykB,WAAa,KAClBzkB,EAAK0kB,cAAgB,IAAIC,GAA6BjH,GACtD1d,EAAKoY,UAAUpY,EAAK0kB,cAAcE,UAAS,WACvC5kB,EAAK2gB,mBAAmBkE,SAAS7kB,EAAK0kB,cAAcI,WACxD,KACA9kB,EAAK+kB,gBAAkB,CAAC,EACxB/kB,EAAKglB,gBAAkB,CAAC,EAGpBtM,EADAzV,MAAMgiB,QAAQrH,EAAwBlF,eACtBkF,EAAwBlF,cAGxBwM,EAAAA,GAAyBC,yBAE7CnlB,EAAKue,eAAe6G,YAAUxT,EAAAA,EAAAA,GAAA5R,GAAO0Y,EAAe1Y,EAAKkY,uBAAuB,IAChBU,EADgBC,GAAAC,EAAAA,EAAAA,GAC3DoM,EAAAA,GAAyBG,oBAAkB,QAAAC,EAAA,WAAE,IAAvDC,EAAM3M,EAAApY,MACb,GAAIR,EAAK6iB,SAAS1J,IAAIoM,EAAOnM,IAC6D,OAAtFC,EAAAA,EAAAA,IAAkB,IAAIC,MAAM,4CAADvW,OAA6CwiB,EAAOnM,MAAO,WAG1F,IAAMoM,EAAiB,IAAIC,EAAAA,EAAqBF,EAAOnM,GAAImM,EAAOG,MAAOH,EAAOI,OAAOC,EAAAA,EAAAA,IAAoBL,EAAOM,eAAe,WAC7H,OAAO7lB,EAAKkY,sBAAsB4N,gBAAe,SAACC,GAC9C,OAAOvJ,QAAQC,QAAQ8I,EAAOS,iBAAiBD,GAAQnU,EAAAA,EAAAA,GAAA5R,GAAQ,MACnE,GACJ,GAAGA,EAAK8jB,oBACR9jB,EAAK6iB,SAAStJ,IAAIiM,EAAepM,GAAIoM,EACzC,EAXA,IAAA3M,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAAAqM,GAWC,OAAA9L,GAAAX,EAAAhQ,EAAA2Q,EAAA,SAAAX,EAAAY,GAAA,CACD,IAAMwM,EAAoB,WACtB,OAAQjmB,EAAKyT,eAAe/N,QAAQC,IAAI,KACjC3F,EAAKyT,eAAe/N,QAAQC,IAAI,IAAsCugB,OACjF,EAgC4C,OA/B5ClmB,EAAKoY,UAAU,IAAI+N,EAAIC,oBAAoBpmB,EAAKkjB,YAAa,CACzDmD,YAAa,WAAe,EAC5BC,WAAY,SAAAzd,GACR,GAAKod,IAAL,CAGA,IAAM3Q,EAAStV,EAAKumB,uBAAuB1d,EAAE2d,QAAS3d,EAAE4d,UACzC,OAAXnR,QAA8B,IAAXA,OAAoB,EAASA,EAAOzU,WACvDb,EAAK0mB,oBAAoBpR,EAAOzU,SAHpC,CAKJ,EACA8lB,OAAQ,SAAC9d,GAAC,OAAKsT,IAASvK,EAAAA,EAAAA,GAAA5R,QAAO,OAAQ,GAAM4mB,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAxR,EAAA,OAAAsR,EAAAA,EAAAA,KAAAG,MAAA,SAAAjV,GAAA,cAAAA,EAAAkV,KAAAlV,EAAA+K,MAAA,UACtCoJ,IAAqB,CAAFnU,EAAA+K,KAAA,eAAA/K,EAAAmV,OAAA,iBAGG,GAA3BtmB,KAAKumB,sBACAre,EAAEse,aAAc,CAAFrV,EAAA+K,KAAA,eAAA/K,EAAAmV,OAAA,kBAIJ,QADT3R,EAAS3U,KAAK4lB,uBAAuB1d,EAAE2d,QAAS3d,EAAE4d,gBACtB,IAAXnR,OAAoB,EAASA,EAAOzU,WACvDF,KAAKkhB,kBAAkBgC,KAAK,CAAEhjB,SAAUyU,EAAOzU,SAAUsW,MAAOtO,IACnE,wBAAAiJ,EAAAsV,OAAA,GAAAN,EAAA,SACH,EACFO,YAAa,WACTrnB,EAAKknB,qBACT,EACAI,UAAW,WACPtnB,EAAKknB,qBACT,KAEJlnB,EAAKikB,mBAAmBsD,eAAa3V,EAAAA,EAAAA,GAAA5R,IAAOA,CAChD,CA6JC,OA7JAM,EAAAA,EAAAA,GAAAmd,EAAA,EAAAld,IAAA,iBAAAoF,IA/KD,WACI,OAAOhF,KAAK8S,eAAekQ,cAC/B,GAAC,CAAApjB,IAAA,2BAAAC,MA8KD,SAAyBgnB,GACrB,IAAIvQ,EACuB,QAA1BA,EAAKtW,KAAK8jB,kBAA+B,IAAPxN,GAAyBA,EAAGmG,KAAKqK,yBAAyBD,EACjG,GAAC,CAAAjnB,IAAA,uBAAAC,MACD,SAAqBmjB,EAAgBje,EAASwY,GAC1C,OAAO,IAAIwJ,EAAAA,EAAoB/D,EAAgBje,EAAS/E,KAAKuiB,YAAahF,EAC9E,GAAC,CAAA3d,IAAA,QAAAC,MACD,WACI,OAAOG,KAAKgnB,gBAAkB,IAAMhnB,KAAK0iB,GAC7C,GAAC,CAAA9iB,IAAA,gBAAAC,MACD,WACI,OAAOonB,EAAAA,EAAwBC,WACnC,GAAC,CAAAtnB,IAAA,UAAAC,MACD,WACIG,KAAKsjB,mBAAmB6D,iBAAiBnnB,MACzCA,KAAK+jB,cAAcrS,UACnB1R,KAAKkiB,SAASkF,QACdpnB,KAAKokB,gBAAkB,CAAC,EACxBpkB,KAAKqkB,gBAAkB,CAAC,EACxBrkB,KAAKqnB,yBACLrnB,KAAKsnB,wBAAwBtnB,KAAKunB,gBAClCvnB,KAAK6d,cAAcqF,QACnB5V,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAuL,EAAAtL,WAAA,gBAAAjS,KAAA,KACJ,GAAC,CAAAK,IAAA,sBAAAC,MACD,SAAoB2nB,GAChB,OAAOxnB,KAAKuX,sBAAsB4N,eAAeqC,EACrD,GAAC,CAAA5nB,IAAA,gBAAAC,MACD,SAAc4nB,GACVznB,KAAK8S,eAAe4U,cAAcD,GAAc,CAAC,EACrD,GAAC,CAAA7nB,IAAA,aAAAC,MACD,WACI,OAAOG,KAAK8S,eAAe/N,OAC/B,GAAC,CAAAnF,IAAA,YAAAC,MACD,SAAU4Y,GACN,OAAOzY,KAAK8S,eAAe/N,QAAQC,IAAIyT,EAC3C,GAAC,CAAA7Y,IAAA,gBAAAC,MACD,WACI,OAAOG,KAAK8S,eAAe6U,eAC/B,GAAC,CAAA/nB,IAAA,4BAAAC,MACD,WACI,OAAOG,KAAKwiB,uBAChB,GAAC,CAAA5iB,IAAA,8BAAAC,MACD,SAA4BK,GACxB,OAAKF,KAAK8jB,WAGH8D,EAAAA,EAAeC,kBAAkB7nB,KAAK8jB,WAAWtH,MAAOxc,KAAK8S,eAAe/N,QAAQC,IAAI,KAAwC9E,GAF5H,IAGf,GAAC,CAAAN,IAAA,WAAAC,MACD,WAAyB,IAAhBkF,EAAOiW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,KACf,IAAKhb,KAAK8jB,WACN,MAAO,GAEX,IAAMgE,KAAe/iB,IAAWA,EAAQ+iB,aACpCC,EAAgB,EAOpB,OANIhjB,GAAWA,EAAQijB,YAAqC,OAAvBjjB,EAAQijB,WACzCD,EAAgB,EAEXhjB,GAAWA,EAAQijB,YAAqC,SAAvBjjB,EAAQijB,aAC9CD,EAAgB,GAEb/nB,KAAK8jB,WAAWtH,MAAMyL,SAASF,EAAeD,EACzD,GAAC,CAAAloB,IAAA,WAAAC,MACD,SAASqoB,GACAloB,KAAK8jB,YAGV9jB,KAAK8jB,WAAWtH,MAAM0H,SAASgE,EACnC,GAAC,CAAAtoB,IAAA,WAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAWtH,MAFZ,IAGf,GAAC,CAAA5c,IAAA,WAAAC,MACD,WAAwB,IACd2c,EADKxB,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,KAEd,IAAwB,OAApBhb,KAAK8jB,YAAiC,OAAVtH,MAI5Bxc,KAAK8jB,YAAc9jB,KAAK8jB,WAAWtH,QAAUA,GAAjD,CAIA,IAAM2L,EAAenoB,KAAKmoB,eACpBC,EAAgBpoB,KAAKunB,eAC3BvnB,KAAKqoB,aAAa7L,GACd2L,GAAgBnoB,KAAKsoB,YACrBtoB,KAAKuoB,QAET,IAAMrgB,EAAI,CACNsgB,YAAaJ,EAAgBA,EAAcK,IAAM,KACjDC,YAAalM,EAAQA,EAAMiM,IAAM,MAErCzoB,KAAKqnB,yBACLrnB,KAAK+e,kBAAkBmE,KAAKhb,GAC5BlI,KAAKsnB,wBAAwBc,GAC7BpoB,KAAK4d,eAAe+K,sBAdpB,CAeJ,GAAC,CAAA/oB,IAAA,yBAAAC,MACD,WAEI,GADAG,KAAK2iB,yBAA2B,CAAC,EAC7B3iB,KAAK4iB,wBAAyB,CAC9B,IAAK,IAAMgG,KAAkB5oB,KAAK4iB,wBAAyB,CACvD,IAAMiG,EAAW7oB,KAAK4iB,wBAAwBgG,GAC9C,IAAK,IAAME,KAAWD,EAClB7oB,KAAK+oB,sBAAsBH,EAAiB,IAAME,EAE1D,CACA9oB,KAAK4iB,wBAA0B,CAAC,CACpC,CACJ,GAAC,CAAAhjB,IAAA,mBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAU6lB,mBAFtB,EAGf,GAAC,CAAAppB,IAAA,yCAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAU8lB,yCAFtB,EAGf,GAAC,CAAArpB,IAAA,iBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWgqB,iBAFjC,EAGf,GAAC,CAAAtpB,IAAA,sBAAAC,MASD,SAAoB2B,GAAsC,IAA1BC,EAAgBuZ,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GAC5C,OAAKhb,KAAK8jB,WAGHhH,EAAiBqM,8BAA8BnpB,KAAK8jB,WAAYtiB,EAAY,EAAGC,IAF1E,CAGhB,GAAC,CAAA7B,IAAA,oBAAAC,MACD,SAAkB2B,EAAYoD,GAC1B,OAAK5E,KAAK8jB,WAGHhH,EAAiBqM,8BAA8BnpB,KAAK8jB,WAAYtiB,EAAYoD,GAAQ,IAF/E,CAGhB,GAAC,CAAAhF,IAAA,yBAAAC,MASD,SAAuB2B,GAAsC,IAA1BC,EAAgBuZ,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GAC/C,OAAKhb,KAAK8jB,WAGHhH,EAAiBsM,gCAAgCppB,KAAK8jB,WAAYtiB,EAAY,EAAGC,IAF5E,CAGhB,GAAC,CAAA7B,IAAA,iBAAAC,MACD,SAAekC,EAAQwC,GACnB,IAAI+R,EACuB,QAA1BA,EAAKtW,KAAK8jB,kBAA+B,IAAPxN,GAAyBA,EAAGnT,UAAUkmB,eAAetnB,EAAOunB,KAAI,SAAAzU,GAAC,OAAI0U,EAAAA,EAAMC,KAAK3U,EAAE,IAAGtQ,EAC5H,GAAC,CAAA3E,IAAA,+BAAAC,MACD,SAA6B4pB,GACzB,IAAKzpB,KAAK8jB,WACN,OAAO2F,EAAY7kB,OAEvB,IAAM1E,EAAWF,KAAK8jB,WAAWtH,MAAMkN,iBAAiBD,GAClDE,EAAU3pB,KAAK8jB,WAAWtH,MAAMoN,aAAaD,QACnD,OAAOE,EAAAA,EAAcC,wBAAwB9pB,KAAK8jB,WAAWtH,MAAMuN,eAAe7pB,EAASsB,YAAatB,EAAS0E,OAAQ+kB,GAAW,CACxI,GAAC,CAAA/pB,IAAA,cAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAU6mB,cAFtB,IAGf,GAAC,CAAApqB,IAAA,cAAAC,MACD,SAAYK,GAA0B,IAAhBqE,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MAC3B,GAAKhb,KAAK8jB,WAAV,CAGA,IAAKjf,EAAAA,EAASolB,YAAY/pB,GACtB,MAAM,IAAIyY,MAAM,qBAEpB3Y,KAAK8jB,WAAW3gB,UAAU+mB,cAAc3lB,EAAQ,CAAC,CACzC4lB,yBAA0BjqB,EAASsB,WACnC4oB,qBAAsBlqB,EAAS0E,OAC/BylB,mBAAoBnqB,EAASsB,WAC7B8oB,eAAgBpqB,EAAS0E,SARjC,CAUJ,GAAC,CAAAhF,IAAA,mBAAAC,MACD,SAAiB0qB,EAAYC,EAAcC,EAAkBC,GACzD,GAAK1qB,KAAK8jB,WAAV,CAGA,IAAKyF,EAAAA,EAAMoB,SAASJ,GAChB,MAAM,IAAI5R,MAAM,qBAEpB,IAAMiS,EAAsB5qB,KAAK8jB,WAAWtH,MAAMqO,cAAcN,GAC1DO,EAAY9qB,KAAK8jB,WAAW3gB,UAAU6E,qBAAqB+iB,6BAA6BH,GAC9F5qB,KAAK8jB,WAAW3gB,UAAU6nB,YAAY,MAAOP,EAAkBK,EAAWN,EAAcE,EANxF,CAOJ,GAAC,CAAA9qB,IAAA,aAAAC,MACD,SAAW2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAChChb,KAAKirB,YAAYzpB,EAAY,EAAmCkpB,EACpE,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmB2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACxChb,KAAKirB,YAAYzpB,EAAY,EAAmCkpB,EACpE,GAAC,CAAA9qB,IAAA,sCAAAC,MACD,SAAoC2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACzDhb,KAAKirB,YAAYzpB,EAAY,EAAoDkpB,EACrF,GAAC,CAAA9qB,IAAA,oBAAAC,MACD,SAAkB2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACvChb,KAAKirB,YAAYzpB,EAAY,EAAoCkpB,EACrE,GAAC,CAAA9qB,IAAA,cAAAC,MACD,SAAY2B,EAAYsE,EAAY4kB,GAChC,GAA0B,kBAAflpB,EACP,MAAM,IAAImX,MAAM,qBAEpB3Y,KAAKkrB,iBAAiB,IAAI3B,EAAAA,EAAM/nB,EAAY,EAAGA,EAAY,GAAIsE,GAAY,EAAO4kB,EACtF,GAAC,CAAA9qB,IAAA,iBAAAC,MACD,SAAeK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAClChb,KAAKmrB,gBAAgBjrB,EAAU,GAAmC,EAAMwqB,EAC5E,GAAC,CAAA9qB,IAAA,yBAAAC,MACD,SAAuBK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC1Chb,KAAKmrB,gBAAgBjrB,EAAU,GAAmC,EAAMwqB,EAC5E,GAAC,CAAA9qB,IAAA,0CAAAC,MACD,SAAwCK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC3Dhb,KAAKmrB,gBAAgBjrB,EAAU,GAAoD,EAAMwqB,EAC7F,GAAC,CAAA9qB,IAAA,wBAAAC,MACD,SAAsBK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACzChb,KAAKmrB,gBAAgBjrB,EAAU,GAAoC,EAAMwqB,EAC7E,GAAC,CAAA9qB,IAAA,kBAAAC,MACD,SAAgBK,EAAUsqB,EAAcC,EAAkBC,GACtD,IAAK7lB,EAAAA,EAASolB,YAAY/pB,GACtB,MAAM,IAAIyY,MAAM,qBAEpB3Y,KAAKkrB,iBAAiB,IAAI3B,EAAAA,EAAMrpB,EAASsB,WAAYtB,EAAS0E,OAAQ1E,EAASsB,WAAYtB,EAAS0E,QAAS4lB,EAAcC,EAAkBC,EACjJ,GAAC,CAAA9qB,IAAA,eAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUioB,eAFtB,IAGf,GAAC,CAAAxrB,IAAA,gBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUkoB,gBAFtB,IAGf,GAAC,CAAAzrB,IAAA,eAAAC,MACD,SAAayrB,GAA2B,IAAhB/mB,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MACvBuQ,EAAcC,EAAAA,EAAUC,aAAaH,GACrCI,EAAUnC,EAAAA,EAAMoB,SAASW,GAC/B,IAAKC,IAAgBG,EACjB,MAAM,IAAI/S,MAAM,qBAEpB,GAAI4S,EACAvrB,KAAK2rB,kBAAkBL,EAAW/mB,QAEjC,GAAImnB,EAAS,CAEd,IAAMlnB,EAAY,CACd2lB,yBAA0BmB,EAAU3hB,gBACpCygB,qBAAsBkB,EAAUM,YAChCvB,mBAAoBiB,EAAUzhB,cAC9BygB,eAAgBgB,EAAUO,WAE9B7rB,KAAK2rB,kBAAkBnnB,EAAWD,EACtC,CACJ,GAAC,CAAA3E,IAAA,oBAAAC,MACD,SAAkBisB,EAAKvnB,GACnB,GAAKvE,KAAK8jB,WAAV,CAGA,IAAMtf,EAAY,IAAIgnB,EAAAA,EAAUM,EAAI3B,yBAA0B2B,EAAI1B,qBAAsB0B,EAAIzB,mBAAoByB,EAAIxB,gBACpHtqB,KAAK8jB,WAAW3gB,UAAU+mB,cAAc3lB,EAAQ,CAACC,GAFjD,CAGJ,GAAC,CAAA5E,IAAA,cAAAC,MACD,SAAY8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACrDhb,KAAK+rB,aAAapiB,EAAiBE,EAAe,EAAmC6gB,EACzF,GAAC,CAAA9qB,IAAA,sBAAAC,MACD,SAAoB8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC7Dhb,KAAK+rB,aAAapiB,EAAiBE,EAAe,EAAmC6gB,EACzF,GAAC,CAAA9qB,IAAA,uCAAAC,MACD,SAAqC8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC9Ehb,KAAK+rB,aAAapiB,EAAiBE,EAAe,EAAoD6gB,EAC1G,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmB8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC5Dhb,KAAK+rB,aAAapiB,EAAiBE,EAAe,EAAoC6gB,EAC1F,GAAC,CAAA9qB,IAAA,eAAAC,MACD,SAAa8J,EAAiBE,EAAe2gB,EAAcE,GACvD,GAA+B,kBAApB/gB,GAAyD,kBAAlBE,EAC9C,MAAM,IAAI8O,MAAM,qBAEpB3Y,KAAKkrB,iBAAiB,IAAI3B,EAAAA,EAAM5f,EAAiB,EAAGE,EAAe,GAAI2gB,GAAc,EAAOE,EAChG,GAAC,CAAA9qB,IAAA,cAAAC,MACD,SAAYC,GAAqH,IAA9G4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAAwCgR,EAAsBhR,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GAAUyP,IAAgBzP,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,KAAAA,UAAA,GACpHhb,KAAKisB,aAAansB,EAAOksB,EAAyB,EAAoC,EAAmCvB,EAAkBC,EAC/I,GAAC,CAAA9qB,IAAA,sBAAAC,MACD,SAAoBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACpChb,KAAKisB,aAAansB,EAAO,GAAmC,EAAM4qB,EACtE,GAAC,CAAA9qB,IAAA,uCAAAC,MACD,SAAqCC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACrDhb,KAAKisB,aAAansB,EAAO,GAAoD,EAAM4qB,EACvF,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACnChb,KAAKisB,aAAansB,EAAO,GAAoC,EAAM4qB,EACvE,GAAC,CAAA9qB,IAAA,sCAAAC,MACD,SAAoCC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACpDhb,KAAKisB,aAAansB,EAAO,GAAqD,EAAM4qB,EACxF,GAAC,CAAA9qB,IAAA,mBAAAC,MACD,SAAiBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACjChb,KAAKisB,aAAansB,EAAO,GAAgC,EAAM4qB,EACnE,GAAC,CAAA9qB,IAAA,eAAAC,MACD,SAAaC,EAAO0qB,EAAcC,EAAkBC,GAChD,IAAKnB,EAAAA,EAAMoB,SAAS7qB,GAChB,MAAM,IAAI6Y,MAAM,qBAEpB3Y,KAAKkrB,iBAAiB3B,EAAAA,EAAMC,KAAK1pB,GAAQ0qB,EAAcC,EAAkBC,EAC7E,GAAC,CAAA9qB,IAAA,gBAAAC,MACD,SAAckC,GAAoE,IAA5DwC,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MAAO6L,EAAM7L,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC3C,GAAKhb,KAAK8jB,WAAV,CAGA,IAAK/hB,GAA4B,IAAlBA,EAAOQ,OAClB,MAAM,IAAIoW,MAAM,qBAEpB,IAAK,IAAInW,EAAI,EAAGC,EAAMV,EAAOQ,OAAQC,EAAIC,EAAKD,IAC1C,IAAKgpB,EAAAA,EAAUC,aAAa1pB,EAAOS,IAC/B,MAAM,IAAImW,MAAM,qBAGxB3Y,KAAK8jB,WAAW3gB,UAAU+mB,cAAc3lB,EAAQxC,EAAQ8kB,EATxD,CAUJ,GAAC,CAAAjnB,IAAA,kBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWgtB,mBAFhC,CAGhB,GAAC,CAAAtsB,IAAA,iBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWsB,kBAFhC,CAGhB,GAAC,CAAAZ,IAAA,gBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWitB,wBAFhC,CAGhB,GAAC,CAAAvsB,IAAA,mBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWktB,oBAFhC,CAGhB,GAAC,CAAAxsB,IAAA,kBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWwB,mBAFhC,CAGhB,GAAC,CAAAd,IAAA,eAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWmtB,uBAFhC,CAGhB,GAAC,CAAAzsB,IAAA,gBAAAC,MACD,SAAcysB,GAAuE,IAAxD5B,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACtC,GAAKhb,KAAK8jB,WAAV,CAGA,GAA6B,kBAAlBwI,EACP,MAAM,IAAI3T,MAAM,qBAEpB3Y,KAAK8jB,WAAW3gB,UAAUjE,WAAWqtB,kBAAkB,CACnDtrB,WAAYqrB,GACb5B,EANH,CAOJ,GAAC,CAAA9qB,IAAA,eAAAC,MACD,SAAa2sB,GAAsE,IAAxD9B,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACpC,GAAKhb,KAAK8jB,WAAV,CAGA,GAA4B,kBAAjB0I,EACP,MAAM,IAAI7T,MAAM,qBAEpB3Y,KAAK8jB,WAAW3gB,UAAUjE,WAAWqtB,kBAAkB,CACnDxrB,UAAWyrB,GACZ9B,EANH,CAOJ,GAAC,CAAA9qB,IAAA,oBAAAC,MACD,SAAkBK,GAAkE,IAAxDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAChChb,KAAK8jB,YAGV9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWqtB,kBAAkBrsB,EAAUwqB,EACrE,GAAC,CAAA9qB,IAAA,4BAAAC,MACD,WACI,QAAKG,KAAK8jB,YAGH9jB,KAAK8jB,WAAW3gB,UAAUjE,WAAWutB,2BAChD,GAAC,CAAA7sB,IAAA,gBAAAC,MACD,WACI,IAAKG,KAAK8jB,WACN,OAAO,KAEX,IAAM5K,EAAqBlZ,KAAK4d,eAAerE,gBAG/C,MAAO,CACHmT,YAHgB1sB,KAAK8jB,WAAW3gB,UAAUwpB,kBAI1CC,UAHc5sB,KAAK8jB,WAAW3gB,UAAU0pB,YAIxC3T,mBAAoBA,EAE5B,GAAC,CAAAtZ,IAAA,mBAAAC,MACD,SAAiBuY,GACb,GAAKpY,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,YAAzC,CAGA,IAAMoQ,EAAkB1U,EACxB,GAAI0U,GAAmBA,EAAgBJ,aAAeI,EAAgBF,UAAW,CAC7E,IAAMF,EAAcI,EAAgBJ,YAChCpqB,MAAMgiB,QAAQoI,GACVA,EAAYnqB,OAAS,GACrBvC,KAAK8jB,WAAW3gB,UAAU4pB,mBAAmBL,GAKjD1sB,KAAK8jB,WAAW3gB,UAAU4pB,mBAAmB,CAACL,IAElD1sB,KAAK4d,eAAejE,iBAAiBmT,EAAgB5T,oBAAsB,CAAC,GAC5E,IAAM8T,EAAehtB,KAAK8jB,WAAW3gB,UAAU8pB,mBAAmBH,EAAgBF,WAClF5sB,KAAK8jB,WAAWrH,KAAKyQ,aAAaF,EACtC,CAhBA,CAiBJ,GAAC,CAAAptB,IAAA,kBAAAC,MACD,SAAgB4Y,GACZ,OAAOzY,KAAK4d,eAAe5Y,IAAIyT,EACnC,GAAC,CAAA7Y,IAAA,aAAAC,MACD,WACI,OAAOyC,MAAMiJ,KAAKvL,KAAKkiB,SAASiL,SACpC,GAAC,CAAAvtB,IAAA,sBAAAC,MACD,WACI,IAAIwC,EAASrC,KAAKotB,aAElB,OADA/qB,EAASA,EAAOgQ,QAAO,SAAAuS,GAAM,OAAIA,EAAOyI,aAAa,GAEzD,GAAC,CAAAztB,IAAA,YAAAC,MACD,SAAU4Y,GACN,OAAOzY,KAAKkiB,SAASld,IAAIyT,IAAO,IACpC,GAAC,CAAA7Y,IAAA,UAAAC,MACD,SAAQ0E,EAAQ+oB,EAAWC,GAEvB,OADAA,EAAUA,GAAW,CAAC,EACdD,GACJ,IAAK,mBAED,YADAttB,KAAKwtB,oBAET,IAAK,iBAED,YADAxtB,KAAKytB,gBAAgBlpB,GAEzB,IAAK,OACD,IAAMmpB,EAAOH,EAEb,YADAvtB,KAAK2tB,MAAMppB,EAAQmpB,EAAKpqB,MAAQ,IAGpC,IAAK,sBACD,IAAMoqB,EAAOH,EAEb,YADAvtB,KAAK4tB,iBAAiBrpB,EAAQmpB,EAAKpqB,MAAQ,GAAIoqB,EAAKG,gBAAkB,EAAG,EAAG,GAGhF,IAAK,kBACD,IAAMH,EAAOH,EAEb,YADAvtB,KAAK4tB,iBAAiBrpB,EAAQmpB,EAAKpqB,MAAQ,GAAIoqB,EAAK9pB,oBAAsB,EAAG8pB,EAAK7pB,oBAAsB,EAAG6pB,EAAK5pB,eAAiB,GAGrI,IAAK,QACD,IAAM4pB,EAAOH,EAEb,YADAvtB,KAAK8tB,OAAOvpB,EAAQmpB,EAAKpqB,MAAQ,GAAIoqB,EAAKnqB,iBAAkB,EAAOmqB,EAAKlqB,iBAAmB,KAAMkqB,EAAKjqB,MAAQ,MAGlH,IAAK,MAED,YADAzD,KAAK+tB,KAAKxpB,GAGlB,IAAMqgB,EAAS5kB,KAAKguB,UAAUV,GAC1B1I,EACA/I,QAAQC,QAAQ8I,EAAOqJ,IAAIV,IAAUnR,UAAK3c,EAAWiZ,EAAAA,IAGpD1Y,KAAK8jB,aAGN9jB,KAAKkuB,sBAAsB3pB,EAAQ+oB,EAAWC,IAGlDvtB,KAAKmuB,gBAAgBb,EAAWC,GACpC,GAAC,CAAA3tB,IAAA,kBAAAC,MACD,SAAgBytB,EAAWC,GACvBvtB,KAAKujB,gBAAgB6K,eAAed,EAAWC,EACnD,GAAC,CAAA3tB,IAAA,oBAAAC,MACD,WACSG,KAAK8jB,aAGV9jB,KAAK8jB,WAAW3gB,UAAUa,mBAC1BhE,KAAKugB,uBAAuB2C,OAChC,GAAC,CAAAtjB,IAAA,kBAAAC,MACD,SAAgB0E,GACPvE,KAAK8jB,aAGV9jB,KAAK8jB,WAAW3gB,UAAUc,eAAeM,GACzCvE,KAAKygB,qBAAqByC,OAC9B,GAAC,CAAAtjB,IAAA,QAAAC,MACD,SAAM0E,EAAQjB,GACLtD,KAAK8jB,YAA8B,IAAhBxgB,EAAKf,SAGd,aAAXgC,GACAvE,KAAKmgB,YAAY+C,KAAK5f,GAE1BtD,KAAK8jB,WAAW3gB,UAAUQ,KAAKL,EAAMiB,GACtB,aAAXA,GACAvE,KAAKqgB,WAAW6C,KAAK5f,GAE7B,GAAC,CAAA1D,IAAA,mBAAAC,MACD,SAAiB0E,EAAQjB,EAAMM,EAAoBC,EAAoBC,GAC9D9D,KAAK8jB,YAGV9jB,KAAK8jB,WAAW3gB,UAAUY,gBAAgBT,EAAMM,EAAoBC,EAAoBC,EAAeS,EAC3G,GAAC,CAAA3E,IAAA,SAAAC,MACD,SAAO0E,EAAQjB,EAAMC,EAAgBC,EAAiBC,GAClD,GAAKzD,KAAK8jB,YAA8B,IAAhBxgB,EAAKf,OAA7B,CAGA,IAAMY,EAAYnD,KAAK8jB,WAAW3gB,UAC5BkrB,EAAgBlrB,EAAUioB,eAAekD,mBAC/CnrB,EAAUO,MAAMJ,EAAMC,EAAgBC,EAAiBe,GACvD,IAAMgqB,EAAcprB,EAAUioB,eAAekD,mBAC9B,aAAX/pB,GACAvE,KAAK2gB,YAAYuC,KAAK,CAClBpjB,MAAO,IAAIypB,EAAAA,EAAM8E,EAAc7sB,WAAY6sB,EAAczpB,OAAQ2pB,EAAY/sB,WAAY+sB,EAAY3pB,QACrG4pB,WAAY/qB,GARpB,CAWJ,GAAC,CAAA7D,IAAA,OAAAC,MACD,SAAK0E,GACIvE,KAAK8jB,YAGV9jB,KAAK8jB,WAAW3gB,UAAUe,IAAIK,EAClC,GAAC,CAAA3E,IAAA,wBAAAC,MACD,SAAsB0E,EAAQ+oB,EAAWC,GAAS,IAAA9Z,EAAA,KACxCgb,EAAUlK,EAAAA,GAAyBmK,iBAAiBpB,GAC1D,QAAImB,KACAlB,EAAUA,GAAW,CAAC,GACdhpB,OAASA,EACjBvE,KAAKuX,sBAAsB4N,gBAAe,SAACC,GACvCvJ,QAAQC,QAAQ2S,EAAQpJ,iBAAiBD,EAAU3R,EAAM8Z,IAAUnR,UAAK3c,EAAWiZ,EAAAA,GACvF,KACO,EAGf,GAAC,CAAA9Y,IAAA,gBAAAC,MACD,WACI,OAAKG,KAAK8jB,WAGH9jB,KAAK8jB,WAAW3gB,UAFZ,IAGf,GAAC,CAAAvD,IAAA,eAAAC,MACD,WACI,QAAKG,KAAK8jB,cAGN9jB,KAAK8S,eAAe/N,QAAQC,IAAI,MAIpChF,KAAK8jB,WAAWtH,MAAMmS,oBACf,GACX,GAAC,CAAA/uB,IAAA,cAAAC,MACD,WACI,QAAKG,KAAK8jB,cAGN9jB,KAAK8S,eAAe/N,QAAQC,IAAI,MAIpChF,KAAK8jB,WAAWtH,MAAMoS,mBACf,GACX,GAAC,CAAAhvB,IAAA,eAAAC,MACD,SAAa0E,EAAQsqB,EAAOC,GACxB,QAAK9uB,KAAK8jB,cAGN9jB,KAAK8S,eAAe/N,QAAQC,IAAI,MAShC+pB,EAJCD,EAGIxsB,MAAMgiB,QAAQwK,GACG,kBAAMA,CAAc,EAGpBA,EANA,kBAAM,IAAI,EAQpC9uB,KAAK8jB,WAAW3gB,UAAU6rB,aAAazqB,EAAQsqB,EAAOE,IAC/C,IAXP,IAAIA,CAYR,GAAC,CAAAnvB,IAAA,iBAAAC,MACD,SAAe0E,EAAQkqB,GACdzuB,KAAK8jB,YAGV9jB,KAAK8jB,WAAW3gB,UAAUirB,eAAeK,EAASlqB,EACtD,GAAC,CAAA3E,IAAA,kBAAAC,MACD,SAAgB0E,EAAQ0qB,GACfjvB,KAAK8jB,YAGV9jB,KAAK8jB,WAAW3gB,UAAU+rB,gBAAgBD,EAAU1qB,EACxD,GAAC,CAAA3E,IAAA,8BAAAC,MACD,SAA4BsvB,GACxB,OAAO,IAAIC,GAA4BpvB,KAAMmvB,EACjD,GAAC,CAAAvvB,IAAA,oBAAAC,MACD,SAAkBwvB,GACd,OAAKrvB,KAAK8jB,WAIH9jB,KAAK8jB,WAAWtH,MAAM8S,kBAAkBD,EAAUrvB,KAAK0iB,KAFnD,IAGf,GAAC,CAAA9iB,IAAA,qBAAAC,MACD,SAAmB2B,GACf,OAAKxB,KAAK8jB,WAGH9jB,KAAK8jB,WAAWtH,MAAM+S,mBAAmB/tB,EAAYxB,KAAK0iB,KAAK8M,EAAAA,EAAAA,IAA4BxvB,KAAK8S,eAAe/N,UAF3G,IAGf,GAAC,CAAAnF,IAAA,wBAAAC,MACD,SAAsBC,GAClB,OAAKE,KAAK8jB,WAGH9jB,KAAK8jB,WAAWtH,MAAMiT,sBAAsB3vB,EAAOE,KAAK0iB,KAAK8M,EAAAA,EAAAA,IAA4BxvB,KAAK8S,eAAe/N,UAFzG,IAGf,GACA,CAAAnF,IAAA,mBAAAC,MAGA,SAAiB6vB,EAAgBC,GAC7B,OAAK3vB,KAAK8jB,WAGoB,IAA1B4L,EAAentB,QAA0C,IAA1BotB,EAAeptB,OACvCmtB,EAEJ1vB,KAAK8jB,WAAWtH,MAAMoT,iBAAiBF,EAAgBC,EAAgB3vB,KAAK0iB,KALxE,EAMf,GAAC,CAAA9iB,IAAA,oBAAAC,MACD,SAAkBgwB,GACT7vB,KAAK8jB,YAAuC,IAAzB+L,EAActtB,QAGtCvC,KAAK8jB,WAAWtH,MAAM8S,mBAAkB,SAACQ,GACrCA,EAAeF,iBAAiBC,EAAe,GACnD,GACJ,GAAC,CAAAjwB,IAAA,0BAAAC,MACD,SAAwBkwB,GAEpB,IAAMC,EAAoBhwB,KAAK2iB,yBAAyBoN,GACpDC,GACAhwB,KAAK4vB,iBAAiBI,EAAmB,IAEzChwB,KAAK2iB,yBAAyBsN,eAAeF,WACtC/vB,KAAK2iB,yBAAyBoN,GAErC/vB,KAAK4iB,wBAAwBqN,eAAeF,WACrC/vB,KAAK4iB,wBAAwBmN,EAE5C,GAAC,CAAAnwB,IAAA,gBAAAC,MACD,WAGI,OAFgBG,KAAK8S,eAAe/N,QACTC,IAAI,IAEnC,GAAC,CAAApF,IAAA,sBAAAC,MACD,SAAoBqwB,GAChB,OAAKlwB,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,YAGlC1c,KAAK8jB,WAAWrH,KAAK0T,oBAAoBD,GAFrC,IAGf,GAAC,CAAAtwB,IAAA,sBAAAC,MACD,WACI,OAAOG,KAAKuiB,WAChB,GAAC,CAAA3iB,IAAA,aAAAC,MACD,WACI,OAAKG,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,YAGlC1c,KAAK8jB,WAAWrH,KAAK1Q,QAAQA,QAFzB,IAGf,GAAC,CAAAnM,IAAA,uCAAAC,MACD,SAAqCuwB,GAC5BpwB,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAK4T,qCAAqCD,EAC9D,GAAC,CAAAxwB,IAAA,oCAAAC,MACD,SAAkCuwB,GACzBpwB,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAK6T,kCAAkCF,EAC3D,GAAC,CAAAxwB,IAAA,SAAAC,MACD,SAAO0wB,GACHvwB,KAAK8S,eAAe0d,iBAAiBD,GACrCvwB,KAAK4N,QACT,GAAC,CAAAhO,IAAA,QAAAC,MACD,WACSG,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAK8L,OACzB,GAAC,CAAA3oB,IAAA,eAAAC,MACD,WACI,SAAKG,KAAK8jB,aAAe9jB,KAAK8jB,WAAWpH,cAGlC1c,KAAK8jB,WAAWrH,KAAKxK,WAChC,GAAC,CAAArS,IAAA,iBAAAC,MACD,WACI,OAAOG,KAAK+jB,eAAiB/jB,KAAK+jB,cAAcI,UACpD,GAAC,CAAAvkB,IAAA,mBAAAC,MACD,SAAiB4wB,GACb,IAAMC,EAAa,CACfD,OAAQA,EACRvwB,SAAUuwB,EAAOzG,eAEjBhqB,KAAKokB,gBAAgB6L,eAAeQ,EAAOE,UAC3ClW,QAAQC,KAAK,kDAEjB1a,KAAKokB,gBAAgBqM,EAAOE,SAAWD,EACnC1wB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKmU,iBAAiBF,EAE9C,GAAC,CAAA9wB,IAAA,sBAAAC,MACD,SAAoB4wB,GAChB,IAAMI,EAAWJ,EAAOE,QACxB,GAAI3wB,KAAKokB,gBAAgB6L,eAAeY,GAAW,CAC/C,IAAMH,EAAa1wB,KAAKokB,gBAAgByM,GACxCH,EAAWxwB,SAAWuwB,EAAOzG,cACzBhqB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKqU,oBAAoBJ,EAEjD,CACJ,GAAC,CAAA9wB,IAAA,sBAAAC,MACD,SAAoB4wB,GAChB,IAAMI,EAAWJ,EAAOE,QACxB,GAAI3wB,KAAKokB,gBAAgB6L,eAAeY,GAAW,CAC/C,IAAMH,EAAa1wB,KAAKokB,gBAAgByM,UACjC7wB,KAAKokB,gBAAgByM,GACxB7wB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKsU,oBAAoBL,EAEjD,CACJ,GAAC,CAAA9wB,IAAA,mBAAAC,MACD,SAAiB4wB,GACb,IAAMC,EAAa,CACfD,OAAQA,EACRvwB,SAAUuwB,EAAOzG,eAEjBhqB,KAAKqkB,gBAAgB4L,eAAeQ,EAAOE,UAC3ClW,QAAQC,KAAK,mDAEjB1a,KAAKqkB,gBAAgBoM,EAAOE,SAAWD,EACnC1wB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKuU,iBAAiBN,EAE9C,GAAC,CAAA9wB,IAAA,sBAAAC,MACD,SAAoB4wB,GAChB,IAAMI,EAAWJ,EAAOE,QACxB,GAAI3wB,KAAKqkB,gBAAgB4L,eAAeY,GAAW,CAC/C,IAAMH,EAAa1wB,KAAKqkB,gBAAgBwM,GACxCH,EAAWxwB,SAAWuwB,EAAOzG,cACzBhqB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKwU,oBAAoBP,EAEjD,CACJ,GAAC,CAAA9wB,IAAA,sBAAAC,MACD,SAAoB4wB,GAChB,IAAMI,EAAWJ,EAAOE,QACxB,GAAI3wB,KAAKqkB,gBAAgB4L,eAAeY,GAAW,CAC/C,IAAMH,EAAa1wB,KAAKqkB,gBAAgBwM,UACjC7wB,KAAKqkB,gBAAgBwM,GACxB7wB,KAAK8jB,YAAc9jB,KAAK8jB,WAAWpH,aACnC1c,KAAK8jB,WAAWrH,KAAKyU,oBAAoBR,EAEjD,CACJ,GAAC,CAAA9wB,IAAA,kBAAAC,MACD,SAAgBwvB,GACPrvB,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAK0U,OAAO9B,EAChC,GAAC,CAAAzvB,IAAA,yBAAAC,MACD,SAAuBgmB,EAASC,GAC5B,OAAK9lB,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,YAGlC1c,KAAK8jB,WAAWrH,KAAKmJ,uBAAuBC,EAASC,GAFjD,IAGf,GAAC,CAAAlmB,IAAA,6BAAAC,MACD,SAA2B4pB,GACvB,IAAKzpB,KAAK8jB,aAAe9jB,KAAK8jB,WAAWpH,YACrC,OAAO,KAEX,IAAMxc,EAAWF,KAAK8jB,WAAWtH,MAAMkN,iBAAiBD,GAClD1kB,EAAU/E,KAAK8S,eAAe/N,QAC9B2O,EAAa3O,EAAQC,IAAI,KAG/B,MAAO,CACHhE,IAHQ8b,EAAiBqM,8BAA8BnpB,KAAK8jB,WAAY5jB,EAASsB,WAAYtB,EAAS0E,QAAU5E,KAAKoxB,eAIrHlwB,KAHSlB,KAAK8jB,WAAWrH,KAAK4U,mBAAmBnxB,EAASsB,WAAYtB,EAAS0E,QAAU8O,EAAW4d,iBAAmB5d,EAAW6d,iBAAmB7d,EAAW8d,iBAAmBxxB,KAAKyxB,gBAIxLnwB,OAAQyD,EAAQC,IAAI,IAE5B,GAAC,CAAApF,IAAA,qBAAAC,MACD,SAAmB2B,EAAYoD,GAC3B,OAAK5E,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,YAGlC1c,KAAK8jB,WAAWrH,KAAK4U,mBAAmB7vB,EAAYoD,IAF/C,CAGhB,GAAC,CAAAhF,IAAA,SAAAC,MACD,WAA4B,IAArB6xB,EAAW1W,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GACThb,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAK7O,QAAO,EAAM8jB,EACtC,GAAC,CAAA9xB,IAAA,iBAAAC,MACD,SAAekF,GACN/E,KAAK8jB,YAAe9jB,KAAK8jB,WAAWpH,aAGzC1c,KAAK8jB,WAAWrH,KAAKkV,eAAe5sB,EACxC,GAAC,CAAAnF,IAAA,gBAAAC,MACD,SAAc8U,IACVvD,EAAAA,EAAAA,GAAcuD,EAAQ3U,KAAK8S,eAAe/N,QAAQC,IAAI,IAC1D,GAAC,CAAApF,IAAA,YAAAC,MACD,SAAUkM,EAAS6lB,GACX5xB,KAAKmiB,gBAAkBniB,KAAKuiB,YAAYsP,SAAS7xB,KAAKmiB,iBACtDniB,KAAKuiB,YAAYtV,YAAYjN,KAAKmiB,gBAEtCniB,KAAKmiB,eAAiBpW,EACtB/L,KAAK8S,eAAegf,kBAAkB/lB,EAAU6lB,EAAgB,GAC5D5xB,KAAKmiB,gBACLniB,KAAKuiB,YAAYwP,QAAQ/xB,KAAKmiB,eAEtC,GAAC,CAAAviB,IAAA,eAAAC,MACD,SAAa2c,GAAO,IAAAtI,EAAA,KAChB,GAAKsI,EAAL,CAIA,IAAMG,EAAoB,GAC1B3c,KAAKuiB,YAAY/V,aAAa,eAAgBgQ,EAAMwV,iBACpDhyB,KAAK8S,eAAemf,0BAA0BzV,EAAM0V,0BACpDlyB,KAAK8S,eAAeqf,kBAAkB3V,EAAM4V,gBAC5C,IAAMxV,EAAeJ,EAAM6V,mBACrBlvB,EAAY,IAAImvB,EAAAA,EAAUtyB,KAAK0iB,IAAK1iB,KAAK8S,eAAgB0J,EAAO+V,EAAAA,EAA6BC,SAAUC,EAAAA,EAAmCD,OAAOxyB,KAAK8S,eAAe/N,UAAU,SAACsqB,GAAQ,OAAK7J,EAAIkN,6BAA6BrD,EAAS,GAAErvB,KAAKwd,6BAA8Bxd,KAAKwjB,cAAe5G,GAEtSD,EAAkB9K,KAAK2K,EAAMmW,eAAc,kBAAMze,EAAK0e,SAAS,KAAK,KACpEjW,EAAkB9K,KAAK1O,EAAU0vB,SAAQ,SAAC3qB,GACtC,OAAQA,EAAE4qB,MACN,KAAK,EACD5e,EAAKwN,wBAAwBwB,KAAKhb,GAClC,MACJ,KAAK,EACDgM,EAAKwL,iBAAiBwE,SAAShc,EAAEic,UACjC,MACJ,KAAK,EACDjQ,EAAK0N,mBAAmBsB,KAAKhb,GAC7B,MACJ,KAAK,EACDgM,EAAK4N,sBAAsBoB,OAC3B,MACJ,KAAK,EACDhP,EAAK8N,wBAAwBkB,OAC7B,MACJ,KAAK,EACDhP,EAAKmL,0BAA0B6D,OAC/B,MACJ,KAAK,EACD,GAAIhb,EAAE6qB,sBAAuB,CACzB,IAAMC,EAAmB9e,EAAK+e,UAAU,IAClCC,EAAUC,EAAAA,GAAa,kBAAmB,iOAAkOH,GAClR9e,EAAKmP,qBAAqB+P,OAAOC,EAAAA,GAASC,QAASJ,EAAS,CACxD,CACInO,MAAO,mBACPkJ,IAAK,WACD/Z,EAAKqP,gBAAgB6K,eAAe,uCACxC,GAEJ,CACIrJ,MAAOoO,EAAAA,GAAa,cAAe,+BACnClF,IAAK,WACD/Z,EAAKqP,gBAAgB6K,eAAe,iCAAkC,CAClEmF,MAAO,2BAEf,IAGZ,CAEA,IADA,IAAMC,EAAY,GACThxB,EAAI,EAAGC,EAAMyF,EAAEurB,WAAWlxB,OAAQC,EAAIC,EAAKD,IAChDgxB,EAAUhxB,GAAK0F,EAAEurB,WAAWjxB,GAAGwnB,cAEnC,IAAM0J,EAAK,CACPxzB,SAAUszB,EAAU,GACpBG,mBAAoBH,EAAUxoB,MAAM,GACpC6b,OAAQ3e,EAAE2e,OACVtiB,OAAQ2D,EAAE3D,QAEd2P,EAAK+K,2BAA2BiE,KAAKwQ,GACrC,IAAME,EAAK,CACPpvB,UAAW0D,EAAEurB,WAAW,GACxBI,oBAAqB3rB,EAAEurB,WAAWzoB,MAAM,GACxC8oB,eAAgB5rB,EAAE4rB,eAClBC,cAAe7rB,EAAE6rB,cACjBC,kBAAmB9rB,EAAE8rB,kBACrBzvB,OAAQ2D,EAAE3D,OACVsiB,OAAQ3e,EAAE2e,QAEd3S,EAAKiL,4BAA4B+D,KAAK0Q,GACtC,MAEJ,KAAK,EACD1f,EAAKuK,6BAA6ByE,KAAKhb,EAAEsO,OACzC,MACJ,KAAK,EACDtC,EAAKqO,YAAY/V,aAAa,eAAgBgQ,EAAMwV,iBACpD9d,EAAKiK,0BAA0B+E,KAAKhb,EAAEsO,OACtC,MACJ,KAAK,EACDtC,EAAKmK,uCAAuC6E,KAAKhb,EAAEsO,OACnD,MACJ,KAAK,GACDtC,EAAK8J,yBAAyBkF,KAAKhb,EAAEsO,OACrC,MACJ,KAAK,GACDtC,EAAKqK,yBAAyB2E,KAAKhb,EAAEsO,OACrC,MACJ,KAAK,GACDtC,EAAKyK,wBAAwBuE,KAAKhb,EAAEsO,OAGhD,KACA,IAAAyd,EAA4Bj0B,KAAKk0B,YAAY/wB,GAAUgxB,GAAA9a,EAAAA,EAAAA,GAAA4a,EAAA,GAAhDxX,EAAI0X,EAAA,GAAEzX,EAAWyX,EAAA,GACxB,GAAIzX,EAAa,CACb1c,KAAKuiB,YAAY6R,YAAY3X,EAAK1Q,QAAQA,SAE1C,IADA,IAAIsoB,EAAO1d,OAAO0d,KAAKr0B,KAAKokB,iBACnB5hB,EAAI,EAAGC,EAAM4xB,EAAK9xB,OAAQC,EAAIC,EAAKD,IAAK,CAC7C,IAAMquB,EAAWwD,EAAK7xB,GACtBia,EAAKmU,iBAAiB5wB,KAAKokB,gBAAgByM,GAC/C,CAEA,IAAK,IAAIruB,EAAI,EAAGC,GADhB4xB,EAAO1d,OAAO0d,KAAKr0B,KAAKqkB,kBACG9hB,OAAQC,EAAIC,EAAKD,IAAK,CAC7C,IAAMquB,EAAWwD,EAAK7xB,GACtBia,EAAKuU,iBAAiBhxB,KAAKqkB,gBAAgBwM,GAC/C,CACApU,EAAK7O,QAAO,GAAO,GACnB6O,EAAK1Q,QAAQA,QAAQS,aAAa,WAAYgQ,EAAMiM,IAAI6L,WAC5D,CACAt0B,KAAK8jB,WAAa,IAAIvH,GAAUC,EAAOrZ,EAAWsZ,EAAMC,EAAaC,EAAmBC,EA9GxF,MAFI5c,KAAK8jB,WAAa,IAiH1B,GAAC,CAAAlkB,IAAA,cAAAC,MACD,SAAYsD,GAAW,IACfE,EADekxB,EAAA,KAGflxB,EADArD,KAAKgjB,eACa,CACdtf,MAAO,SAACJ,EAAMC,EAAgBC,EAAiBC,GAC3C8wB,EAAKzG,OAAO,WAAYxqB,EAAMC,EAAgBC,EAAiBC,EACnE,EACAE,KAAM,SAACL,GACHixB,EAAK5G,MAAM,WAAYrqB,EAC3B,EACAS,gBAAiB,SAACT,EAAMM,EAAoBC,EAAoBC,GAC5DywB,EAAK3G,iBAAiB,WAAYtqB,EAAMM,EAAoBC,EAAoBC,EACpF,EACAE,iBAAkB,WACduwB,EAAK/G,mBACT,EACAvpB,eAAgB,WACZswB,EAAK9G,gBAAgB,WACzB,EACAvpB,IAAK,WACDqwB,EAAKxG,KAAK,WACd,GAIc,CACdrqB,MAAO,SAACJ,EAAMC,EAAgBC,EAAiBC,GAC3C,IAAM8pB,EAAU,CAAEjqB,KAAAA,EAAMC,eAAAA,EAAgBC,gBAAAA,EAAiBC,KAAAA,GACzD8wB,EAAKhR,gBAAgB6K,eAAe,QAA0Cb,EAClF,EACA5pB,KAAM,SAACL,GACH,IAAMiqB,EAAU,CAAEjqB,KAAAA,GAClBixB,EAAKhR,gBAAgB6K,eAAe,OAAwCb,EAChF,EACAxpB,gBAAiB,SAACT,EAAMM,EAAoBC,EAAoBC,GAE5D,GAAID,GAAsBC,EAAe,CAErC,IAAMypB,EAAU,CAAEjqB,KAAAA,EAAMM,mBAAAA,EAAoBC,mBAAAA,EAAoBC,cAAAA,GAChEywB,EAAKhR,gBAAgB6K,eAAe,kBAA8Db,EACtG,KACK,CACD,IAAMA,EAAU,CAAEjqB,KAAAA,EAAMuqB,eAAgBjqB,GACxC2wB,EAAKhR,gBAAgB6K,eAAe,sBAAsEb,EAC9G,CACJ,EACAvpB,iBAAkB,WACduwB,EAAKhR,gBAAgB6K,eAAe,mBAAgE,CAAC,EACzG,EACAnqB,eAAgB,WACZswB,EAAKhR,gBAAgB6K,eAAe,iBAA4D,CAAC,EACrG,EACAlqB,IAAK,WACDqwB,EAAKhR,gBAAgB6K,eAAe,MAAsC,CAAC,EAC/E,GAGR,IAAMoG,EAAsB,IAAI/e,EAAAA,EAAoBtS,EAAU6E,sBAa9D,OAZAwsB,EAAoB9e,UAAY,SAACxN,GAAC,OAAKqsB,EAAK9S,WAAWyB,KAAKhb,EAAE,EAC9DssB,EAAoB7e,QAAU,SAACzN,GAAC,OAAKqsB,EAAK/S,SAAS0B,KAAKhb,EAAE,EAC1DssB,EAAoB5e,cAAgB,SAAC1N,GAAC,OAAKqsB,EAAKnT,eAAe8B,KAAKhb,EAAE,EACtEssB,EAAoB3e,YAAc,SAAC3N,GAAC,OAAKqsB,EAAKlT,aAAa6B,KAAKhb,EAAE,EAClEssB,EAAoB1e,aAAe,SAAC5N,GAAC,OAAKqsB,EAAKjT,cAAc4B,KAAKhb,EAAE,EACpEssB,EAAoBze,YAAc,SAAC7N,GAAC,OAAKqsB,EAAKzT,aAAaoC,KAAKhb,EAAE,EAClEssB,EAAoBxe,UAAY,SAAC9N,GAAC,OAAKqsB,EAAK1T,WAAWqC,KAAKhb,EAAE,EAC9DssB,EAAoBve,YAAc,SAAC/N,GAAC,OAAKqsB,EAAKxT,aAAamC,KAAKhb,EAAE,EAClEssB,EAAoBte,YAAc,SAAChO,GAAC,OAAKqsB,EAAKvT,aAAakC,KAAKhb,EAAE,EAClEssB,EAAoBre,oBAAsB,SAACjO,GAAC,OAAKqsB,EAAKtT,qBAAqBiC,KAAKhb,EAAE,EAClFssB,EAAoBpe,aAAe,SAAClO,GAAC,OAAKqsB,EAAKhT,cAAc2B,KAAKhb,EAAE,EAE7D,CADM,IAAIusB,EAAAA,EAAKpxB,EAAiBrD,KAAK8S,eAAgB9S,KAAKwjB,cAAckR,gBAAiBvxB,EAAWqxB,EAAqBx0B,KAAKwiB,0BACvH,EAClB,GAAC,CAAA5iB,IAAA,0BAAAC,MACD,SAAwBuoB,GACF,OAAlBA,QAA4C,IAAlBA,GAAoCA,EAAcuM,gCAAgC30B,KAAK0iB,IACrH,GAAC,CAAA9iB,IAAA,eAAAC,MACD,WACI,IAAKG,KAAK8jB,WACN,OAAO,KAEX,IAAMtH,EAAQxc,KAAK8jB,WAAWtH,MACxBoY,EAAgB50B,KAAK8jB,WAAWpH,YAAc1c,KAAK8jB,WAAWrH,KAAK1Q,QAAQA,QAAU,KAU3F,OATA/L,KAAK8jB,WAAWpS,UAChB1R,KAAK8jB,WAAa,KAClB9jB,KAAKuiB,YAAYsS,gBAAgB,gBAC7BD,GAAiB50B,KAAKuiB,YAAYsP,SAAS+C,IAC3C50B,KAAKuiB,YAAYtV,YAAY2nB,GAE7B50B,KAAKmiB,gBAAkBniB,KAAKuiB,YAAYsP,SAAS7xB,KAAKmiB,iBACtDniB,KAAKuiB,YAAYtV,YAAYjN,KAAKmiB,gBAE/B3F,CACX,GAAC,CAAA5c,IAAA,wBAAAC,MACD,SAAsBD,GAClBI,KAAKsjB,mBAAmBwR,qBAAqBl1B,EACjD,GAAC,CAAAA,IAAA,WAAAC,MACD,WACI,OAA4B,OAApBG,KAAK8jB,UACjB,GAAC,CAAAlkB,IAAA,sBAAAC,MACD,SAAoBK,GAChB,IAAMyvB,EAAiB,CAAC,CAChB7vB,MAAO,IAAIypB,EAAAA,EAAMrpB,EAASsB,WAAYtB,EAAS0E,OAAQ1E,EAASsB,WAAYtB,EAAS0E,QACrFG,QAAS+X,EAAiBiY,kCAElC/0B,KAAKoiB,2BAA2BxJ,IAAI+W,GACpC3vB,KAAKg1B,eAAe90B,EAAU,EAClC,GAAC,CAAAN,IAAA,sBAAAC,MACD,WACIG,KAAKoiB,2BAA2BgF,OACpC,IAAC,EAAAxnB,IAAA,kCAAAC,MA37BD,SAAuCo1B,EAAWC,EAAiBC,EAAa1zB,GAC5E,IAAM2zB,EAAgBH,EAAUzY,MAAMkN,iBAAiB,CACnDloB,WAAY0zB,EACZtwB,OAAQuwB,IAEN1wB,EAAewwB,EAAU9xB,UAAU6E,qBAAqBqtB,mCAAmCD,GACjG,OAAOH,EAAU9xB,UAAUjE,WAAWyC,iCAAiC8C,EAAajD,WAAYC,EACpG,GAAC,CAAA7B,IAAA,gCAAAC,MAaD,SAAqCo1B,EAAWC,EAAiBC,GAAuC,IAA1B1zB,EAAgBuZ,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GACpFoa,EAAgBH,EAAUzY,MAAMkN,iBAAiB,CACnDloB,WAAY0zB,EACZtwB,OAAQuwB,IAEN1wB,EAAewwB,EAAU9xB,UAAU6E,qBAAqBqtB,mCAAmCD,GACjG,OAAOH,EAAU9xB,UAAUjE,WAAWwC,+BAA+B+C,EAAajD,WAAYC,EAClG,KAACqb,CAAA,CA9UsB,CAAkCnC,EAAAA,IAgvC7DmC,GAAiBiY,gCAAkCO,EAAAA,GAAuBC,SAAS,CAC/EC,YAAa,uBACbC,UAAW,eAEf3Y,GAAmBlC,EAAW,CAC1BS,GAAQ,EAAGqa,EAAAA,IACXra,GAAQ,EAAGsa,EAAAA,GACXta,GAAQ,EAAGua,EAAAA,GACXva,GAAQ,EAAGwI,EAAAA,IACXxI,GAAQ,EAAGwa,EAAAA,IACXxa,GAAQ,EAAGya,EAAAA,IACXza,GAAQ,EAAG0a,EAAAA,GACX1a,GAAQ,GAAI2a,EAAAA,IACZ3a,GAAQ,GAAI4a,EAAAA,IACbnZ,IACI,IAAM6C,GAAmB,SAAAuW,IAAAn3B,EAAAA,EAAAA,GAAA4gB,EAAAuW,GAAA,IAAA1iB,GAAAvU,EAAAA,EAAAA,GAAA0gB,GAC5B,SAAAA,EAAYwW,GAAiB,IAAAC,EAOsB,OAPtB92B,EAAAA,EAAAA,GAAA,KAAAqgB,IACzByW,EAAA5iB,EAAAjU,KAAA,OACK42B,gBAAkBA,EACvBC,EAAKC,mBAAqBD,EAAK3e,UAAU,IAAIqG,EAAAA,GAAQsY,EAAKD,kBAC1DC,EAAKvW,kBAAoBuW,EAAKC,mBAAmB7f,MACjD4f,EAAKE,oBAAsBF,EAAK3e,UAAU,IAAIqG,EAAAA,GAAQsY,EAAKD,kBAC3DC,EAAKrW,mBAAqBqW,EAAKE,oBAAoB9f,MACnD4f,EAAKG,OAAS,EAAiCH,CACnD,CAaC,OAbAz2B,EAAAA,EAAAA,GAAAggB,EAAA,EAAA/f,IAAA,WAAAC,MACD,SAAS02B,GACL,IAAM12B,EAAS02B,EAAS,EAAiC,EACrDv2B,KAAKu2B,SAAW12B,IAGpBG,KAAKu2B,OAAS12B,EACM,IAAhBG,KAAKu2B,OACLv2B,KAAKq2B,mBAAmBnT,OAEH,IAAhBljB,KAAKu2B,QACVv2B,KAAKs2B,oBAAoBpT,OAEjC,KAACvD,CAAA,CAtB2B,CAAShF,EAAAA,IA2BnC2E,GAAkB,SAAAkX,IAAAz3B,EAAAA,EAAAA,GAAAugB,EAAAkX,GAAA,IAAAviB,GAAAhV,EAAAA,EAAAA,GAAAqgB,GACpB,SAAAA,EAAY1B,EAAgBK,GAAe,IAAAwY,EAEF,OAFEn3B,EAAAA,EAAAA,GAAA,KAAAggB,IACvCmX,EAAAxiB,EAAA1U,KAAA,KAAM,CAAE0e,cAAAA,KACHL,eAAiBA,EAAe6Y,CACzC,CAIC,OAJA92B,EAAAA,EAAAA,GAAA2f,EAAA,EAAA1f,IAAA,OAAAC,MACD,SAAK2W,GACDxW,KAAK4d,eAAe8Y,4BACpBppB,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA+N,EAAA9N,WAAA,aAAAjS,KAAA,KAAWiX,EACf,KAAC8I,CAAA,CARmB,CAASxB,EAAAA,IAU3B2F,GAAwB,SAAAkT,IAAA53B,EAAAA,EAAAA,GAAA0kB,EAAAkT,GAAA,IAAAC,GAAA33B,EAAAA,EAAAA,GAAAwkB,GAC1B,SAAAA,EAAY3L,EAAQsF,GAAmB,IAAAyZ,EA6BsB,OA7BtBv3B,EAAAA,EAAAA,GAAA,KAAAmkB,IACnCoT,EAAAD,EAAAr3B,KAAA,OACK+X,QAAUQ,EACfsF,EAAkB0Z,UAAU,WAAYhf,EAAO6Y,SAC/CkG,EAAKE,mBAAqBC,EAAAA,EAAkBC,kBAAkBC,OAAO9Z,GACrEyZ,EAAKM,aAAeH,EAAAA,EAAkBzO,MAAM2O,OAAO9Z,GACnDyZ,EAAKO,gBAAkBJ,EAAAA,EAAkBK,eAAeH,OAAO9Z,GAC/DyZ,EAAKnX,iBAAmBsX,EAAAA,EAAkBM,gBAAgBJ,OAAO9Z,GACjEyZ,EAAKU,qBAAuBP,EAAAA,EAAkBQ,cAAcN,OAAO9Z,GACnEyZ,EAAKY,gBAAkBT,EAAAA,EAAkBU,SAASR,OAAO9Z,GACzDyZ,EAAKc,cAAgBX,EAAAA,EAAkBY,aAAaV,OAAO9Z,GAC3DyZ,EAAKgB,uBAAyBb,EAAAA,EAAkB1xB,gBAAgB4xB,OAAO9Z,GACvEyZ,EAAKiB,uBAAyBd,EAAAA,EAAkBe,sBAAsBb,OAAO9Z,GAC7EyZ,EAAKmB,sBAAwBhB,EAAAA,EAAkBiB,qBAAqBf,OAAO9Z,GAC3EyZ,EAAKqB,SAAWlB,EAAAA,EAAkBmB,QAAQjB,OAAO9Z,GACjDyZ,EAAKuB,SAAWpB,EAAAA,EAAkBqB,QAAQnB,OAAO9Z,GACjDyZ,EAAKpf,UAAUof,EAAKvf,QAAQwH,0BAAyB,kBAAM+X,EAAKyB,mBAAmB,KACnFzB,EAAKpf,UAAUof,EAAKvf,QAAQ8H,4BAA2B,kBAAMyX,EAAK0B,sBAAsB,KACxF1B,EAAKpf,UAAUof,EAAKvf,QAAQ2I,wBAAuB,kBAAM4W,EAAK2B,kBAAkB,KAChF3B,EAAKpf,UAAUof,EAAKvf,QAAQ4I,uBAAsB,kBAAM2W,EAAK2B,kBAAkB,KAC/E3B,EAAKpf,UAAUof,EAAKvf,QAAQsI,sBAAqB,kBAAMiX,EAAK2B,kBAAkB,KAC9E3B,EAAKpf,UAAUof,EAAKvf,QAAQwI,qBAAoB,kBAAM+W,EAAK2B,kBAAkB,KAC7E3B,EAAKpf,UAAUof,EAAKvf,QAAQ0H,kBAAiB,kBAAM6X,EAAK4B,kBAAkB,KAC1E5B,EAAKpf,UAAUof,EAAKvf,QAAQwH,0BAAyB,kBAAM+X,EAAK4B,kBAAkB,KAClF5B,EAAKpf,UAAUihB,EAAAA,EAASC,qBAAoB,kBAAM9B,EAAKU,qBAAqB3e,IAAI8f,EAAAA,EAASE,gBAAgB,eAA4C,KACrJ/B,EAAKyB,oBACLzB,EAAK0B,uBACL1B,EAAK2B,mBACL3B,EAAK4B,mBACL5B,EAAKE,mBAAmBne,IAAIie,EAAKvf,QAAQ0L,gBAAgB6T,CAC7D,CA4BC,OA5BAl3B,EAAAA,EAAAA,GAAA8jB,EAAA,EAAA7jB,IAAA,oBAAAC,MACD,WACI,IAAMkF,EAAU/E,KAAKsX,QAAQsS,aAC7B5pB,KAAKu3B,qBAAqB3e,IAAI8f,EAAAA,EAASE,gBAAgB,gBACvD54B,KAAKy3B,gBAAgB7e,IAAI7T,EAAQC,IAAI,KACrChF,KAAK23B,cAAc/e,IAAI7T,EAAQC,IAAI,KACnChF,KAAK63B,uBAAuBjf,IAAI7T,EAAQC,IAAI,IAChD,GAAC,CAAApF,IAAA,uBAAAC,MACD,WACI,IAAM4zB,EAAazzB,KAAKsX,QAAQ+T,gBAC3BoI,GAKDzzB,KAAK83B,uBAAuBlf,IAAI6a,EAAWlxB,OAAS,GACpDvC,KAAKg4B,sBAAsBpf,IAAI6a,EAAWoF,MAAK,SAAAzgB,GAAC,OAAKA,EAAE0gB,SAAS,OALhE94B,KAAK83B,uBAAuB1nB,QAC5BpQ,KAAKg4B,sBAAsB5nB,QAMnC,GAAC,CAAAxQ,IAAA,mBAAAC,MACD,WACIG,KAAKm3B,aAAave,IAAI5Y,KAAKsX,QAAQyhB,mBAAqB/4B,KAAKsX,QAAQ0L,gBACrEhjB,KAAK0f,iBAAiB9G,IAAI5Y,KAAKsX,QAAQ6Q,iBAAmBnoB,KAAKsX,QAAQ0L,gBACvEhjB,KAAKo3B,gBAAgBxe,IAAI5Y,KAAKsX,QAAQ6Q,eAC1C,GAAC,CAAAvoB,IAAA,mBAAAC,MACD,WACI,IAAM2c,EAAQxc,KAAKsX,QAAQ0hB,WAC3Bh5B,KAAKk4B,SAAStf,IAAIqgB,QAAQzc,GAASA,EAAM2b,YACzCn4B,KAAKo4B,SAASxf,IAAIqgB,QAAQzc,GAASA,EAAM6b,WAC7C,KAAC5U,CAAA,CA3DyB,CAAS9I,EAAAA,IA6D1B+I,GAAiB,SAAAwV,IAAAn6B,EAAAA,EAAAA,GAAA2kB,EAAAwV,GAAA,IAAAC,GAAAl6B,EAAAA,EAAAA,GAAAykB,GAC1B,SAAAA,EAAYpM,EAAS6L,EAAoBiW,GAA0B,IAAAC,GAAA/5B,EAAAA,EAAAA,GAAA,KAAAokB,IAC/D2V,EAAAF,EAAA55B,KAAA,OACK+X,QAAUA,EACf+hB,EAAKlW,mBAAqBA,EAC1BkW,EAAKD,yBAA2BA,EAChCC,EAAKC,QAAUtC,EAAAA,EAAkBxI,WAAW0I,OAAO/T,GACnDkW,EAAKE,2BAA6BvC,EAAAA,EAAkBwC,0BAA0BtC,OAAO/T,GACrFkW,EAAKI,wBAA0BzC,EAAAA,EAAkB0C,uBAAuBxC,OAAO/T,GAC/EkW,EAAKM,qBAAuB3C,EAAAA,EAAkB4C,oBAAoB1C,OAAO/T,GACzEkW,EAAKQ,uBAAyB7C,EAAAA,EAAkB8C,sBAAsB5C,OAAO/T,GAC7EkW,EAAKU,wBAA0B/C,EAAAA,EAAkBgD,uBAAuB9C,OAAO/T,GAC/EkW,EAAKY,2BAA6BjD,EAAAA,EAAkBkD,0BAA0BhD,OAAO/T,GACrFkW,EAAKc,2BAA6BnD,EAAAA,EAAkBoD,0BAA0BlD,OAAO/T,GACrFkW,EAAKgB,kBAAoBrD,EAAAA,EAAkBsD,iBAAiBpD,OAAO/T,GACnEkW,EAAKkB,8BAAgCvD,EAAAA,EAAkBwD,6BAA6BtD,OAAO/T,GAC3FkW,EAAKoB,2BAA6BzD,EAAAA,EAAkB0D,0BAA0BxD,OAAO/T,GACrFkW,EAAKsB,sBAAwB3D,EAAAA,EAAkB4D,qBAAqB1D,OAAO/T,GAC3EkW,EAAKwB,mBAAqB7D,EAAAA,EAAkB8D,kBAAkB5D,OAAO/T,GACrEkW,EAAK0B,0BAA4B/D,EAAAA,EAAkBgE,yBAAyB9D,OAAO/T,GACnFkW,EAAK4B,uBAAyBjE,EAAAA,EAAkBkE,sBAAsBhE,OAAO/T,GAC7EkW,EAAK8B,+BAAiCnE,EAAAA,EAAkBoE,8BAA8BlE,OAAO/T,GAC7FkW,EAAKgC,wCAA0CrE,EAAAA,EAAkBsE,uCAAuCpE,OAAO/T,GAC/GkW,EAAKkC,uCAAyCvE,EAAAA,EAAkBwE,sCAAsCtE,OAAO/T,GAC7GkW,EAAKoC,gDAAkDzE,EAAAA,EAAkB0E,+CAA+CxE,OAAO/T,GAC/HkW,EAAKsC,iBAAmB3E,EAAAA,EAAkB4E,uBAAuB1E,OAAO/T,GACxE,IAAM0Y,EAAS,WAAH,OAASxC,EAAKyC,SAAS,EAqB1B,OAnBTzC,EAAK5hB,UAAUH,EAAQ0H,iBAAiB6c,IACxCxC,EAAK5hB,UAAUH,EAAQ8G,yBAAyByd,IAEhDxC,EAAK5hB,UAAU2hB,EAAyB2C,mBAAmB9Y,YAAY4Y,IACvExC,EAAK5hB,UAAU2hB,EAAyB4C,mBAAmB/Y,YAAY4Y,IACvExC,EAAK5hB,UAAU2hB,EAAyB6C,iBAAiBhZ,YAAY4Y,IACrExC,EAAK5hB,UAAU2hB,EAAyB8C,mBAAmBjZ,YAAY4Y,IACvExC,EAAK5hB,UAAU2hB,EAAyB+C,oBAAoBlZ,YAAY4Y,IACxExC,EAAK5hB,UAAU2hB,EAAyBgD,uBAAuBnZ,YAAY4Y,IAC3ExC,EAAK5hB,UAAU2hB,EAAyBiD,uBAAuBpZ,YAAY4Y,IAC3ExC,EAAK5hB,UAAU2hB,EAAyBkD,cAAcrZ,YAAY4Y,IAClExC,EAAK5hB,UAAU2hB,EAAyBmD,0BAA0BtZ,YAAY4Y,IAC9ExC,EAAK5hB,UAAU2hB,EAAyBoD,uBAAuBvZ,YAAY4Y,IAC3ExC,EAAK5hB,UAAU2hB,EAAyBqD,kBAAkBxZ,YAAY4Y,IACtExC,EAAK5hB,UAAU2hB,EAAyBsD,eAAezZ,YAAY4Y,IACnExC,EAAK5hB,UAAU2hB,EAAyBuD,+BAA+B1Z,YAAY4Y,IACnFxC,EAAK5hB,UAAU2hB,EAAyBwD,oCAAoC3Z,YAAY4Y,IACxFxC,EAAK5hB,UAAU2hB,EAAyByD,sBAAsB5Z,YAAY4Y,IAC1ExC,EAAK5hB,UAAU2hB,EAAyB0D,mBAAmB7Z,YAAY4Y,IACvEA,IAASxC,CACb,CAqDC,OArDA15B,EAAAA,EAAAA,GAAA+jB,EAAA,EAAA9jB,IAAA,UAAAC,MACD,YACIyN,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAmS,EAAAlS,WAAA,gBAAAjS,KAAA,KACJ,GAAC,CAAAK,IAAA,QAAAC,MACD,WAAQ,IAAAk9B,EAAA,KACJ/8B,KAAKmjB,mBAAmB6Z,oBAAmB,WACvCD,EAAKzD,QAAQlpB,QACb2sB,EAAKxD,2BAA2BnpB,QAChC2sB,EAAKtD,wBAAwBrpB,QAC7B2sB,EAAKpD,qBAAqBvpB,QAC1B2sB,EAAKlD,uBAAuBzpB,QAC5B2sB,EAAKhD,wBAAwB3pB,QAC7B2sB,EAAK9C,2BAA2B7pB,QAChC2sB,EAAK5C,2BAA2B/pB,QAChC2sB,EAAK1C,kBAAkBjqB,QACvB2sB,EAAKxC,8BAA8BnqB,QACnC2sB,EAAKtC,2BAA2BrqB,QAChC2sB,EAAKpC,sBAAsBvqB,QAC3B2sB,EAAKlC,mBAAmBzqB,QACxB2sB,EAAK5B,+BAA+B/qB,QACpC2sB,EAAK1B,wCAAwCjrB,QAC7C2sB,EAAKhC,0BAA0B3qB,QAC/B2sB,EAAKpB,iBAAiBvrB,OAC1B,GACJ,GAAC,CAAAxQ,IAAA,UAAAC,MACD,WAAU,IAAAo9B,EAAA,KACAzgB,EAAQxc,KAAKsX,QAAQ0hB,WACtBxc,EAILxc,KAAKmjB,mBAAmB6Z,oBAAmB,WACvCC,EAAK3D,QAAQ1gB,IAAI4D,EAAMwV,iBACvBiL,EAAK1D,2BAA2B3gB,IAAIqkB,EAAK7D,yBAAyB2C,mBAAmBvjB,IAAIgE,IACzFygB,EAAKxD,wBAAwB7gB,IAAIqkB,EAAK7D,yBAAyB4C,mBAAmBxjB,IAAIgE,IACtFygB,EAAKtD,qBAAqB/gB,IAAIqkB,EAAK7D,yBAAyB6C,iBAAiBzjB,IAAIgE,IACjFygB,EAAKpD,uBAAuBjhB,IAAIqkB,EAAK7D,yBAAyB8C,mBAAmB1jB,IAAIgE,IACrFygB,EAAKlD,wBAAwBnhB,IAAIqkB,EAAK7D,yBAAyB+C,oBAAoB3jB,IAAIgE,IACvFygB,EAAKhD,2BAA2BrhB,IAAIqkB,EAAK7D,yBAAyBgD,uBAAuB5jB,IAAIgE,IAC7FygB,EAAK9C,2BAA2BvhB,IAAIqkB,EAAK7D,yBAAyBiD,uBAAuB7jB,IAAIgE,IAC7FygB,EAAK5C,kBAAkBzhB,IAAIqkB,EAAK7D,yBAAyBkD,cAAc9jB,IAAIgE,IAC3EygB,EAAK1C,8BAA8B3hB,IAAIqkB,EAAK7D,yBAAyBmD,0BAA0B/jB,IAAIgE,IACnGygB,EAAKxC,2BAA2B7hB,IAAIqkB,EAAK7D,yBAAyBoD,uBAAuBhkB,IAAIgE,IAC7FygB,EAAKtC,sBAAsB/hB,IAAIqkB,EAAK7D,yBAAyBqD,kBAAkBjkB,IAAIgE,IACnFygB,EAAKpC,mBAAmBjiB,IAAIqkB,EAAK7D,yBAAyBsD,eAAelkB,IAAIgE,IAC7EygB,EAAKlC,0BAA0BniB,IAAIqkB,EAAK7D,yBAAyByD,sBAAsBrkB,IAAIgE,IAC3FygB,EAAKhC,uBAAuBriB,IAAIqkB,EAAK7D,yBAAyB0D,mBAAmBtkB,IAAIgE,IACrFygB,EAAK9B,+BAA+BviB,IAAIqkB,EAAK7D,yBAAyBuD,+BAA+BnkB,IAAIgE,IAAUygB,EAAK7D,yBAAyBwD,oCAAoCpkB,IAAIgE,IACzLygB,EAAK5B,wCAAwCziB,IAAIqkB,EAAK7D,yBAAyBwD,oCAAoCpkB,IAAIgE,IACvHygB,EAAK1B,uCAAuC3iB,IAAIqkB,EAAK7D,yBAAyBuD,+BAA+BO,IAAI1gB,GAAOja,OAAS06B,EAAK7D,yBAAyBwD,oCAAoCM,IAAI1gB,GAAOja,OAAS,GACvN06B,EAAKxB,gDAAgD7iB,IAAIqkB,EAAK7D,yBAAyBwD,oCAAoCM,IAAI1gB,GAAOja,OAAS,GAC/I06B,EAAKtB,iBAAiB/iB,IAAI4D,EAAMiM,IAAI0U,SAAWC,EAAAA,GAAQC,mBAC3D,IAxBIr9B,KAAKoQ,OAyBb,KAACsT,CAAA,CArGyB,CAAS/I,EAAAA,IAuGjCqJ,GAA4B,SAAAsZ,IAAAv+B,EAAAA,EAAAA,GAAAilB,EAAAsZ,GAAA,IAAAC,GAAAt+B,EAAAA,EAAAA,GAAA+kB,GAC9B,SAAAA,EAAYjH,GAAY,IAAAygB,EAahB,OAbgBl+B,EAAAA,EAAAA,GAAA,KAAA0kB,IACpBwZ,EAAAD,EAAAh+B,KAAA,OACKk+B,UAAYD,EAAK/lB,UAAU,IAAIqG,EAAAA,IACpC0f,EAAKvZ,SAAWuZ,EAAKC,UAAUjnB,MAC/BgnB,EAAKE,WAAY,EACjBF,EAAKG,iBAAmBH,EAAK/lB,UAAU+N,EAAIoY,WAAW7gB,IACtDygB,EAAK/lB,UAAU+lB,EAAKG,iBAAiBE,YAAW,WAC5CL,EAAKE,WAAY,EACjBF,EAAKC,UAAUva,UAAKzjB,EACxB,KACA+9B,EAAK/lB,UAAU+lB,EAAKG,iBAAiBG,WAAU,WAC3CN,EAAKE,WAAY,EACjBF,EAAKC,UAAUva,UAAKzjB,EACxB,KAAI+9B,CACR,CAGC,OAHA79B,EAAAA,EAAAA,GAAAqkB,EAAA,EAAApkB,IAAA,WAAAC,MACD,WACI,OAAOG,KAAK09B,SAChB,KAAC1Z,CAAA,CAlB6B,CAASrJ,EAAAA,IAoBrCyU,GAA2B,WAI7B,SAAAA,EAAY9X,EAAS6X,IAAa7vB,EAAAA,EAAAA,GAAA,KAAA8vB,GAC9BpvB,KAAKsX,QAAUA,EACftX,KAAK+9B,eAAiB,GACtB/9B,KAAKg+B,wBAAyB,EAC1B17B,MAAMgiB,QAAQ6K,IAAgBA,EAAY5sB,OAAS,GACnDvC,KAAK4Y,IAAIuW,EAEjB,CAqDC,OArDAxvB,EAAAA,EAAAA,GAAAyvB,EAAA,EAAAxvB,IAAA,SAAAoF,IAVD,WACI,OAAOhF,KAAK+9B,eAAex7B,MAC/B,GAAC,CAAA3C,IAAA,cAAAC,MASD,SAAYo+B,EAAUC,EAAUC,GAAa,IAAAC,EAAA,KACzC,OAAOp+B,KAAKsX,QAAQoH,6BAA4B,SAACxW,GACzCk2B,EAAKJ,wBAGTC,EAAS1+B,KAAK2+B,EAAUh2B,EAC5B,GAAGi2B,EACP,GAAC,CAAAv+B,IAAA,WAAAC,MACD,SAASw+B,GACL,OAAKr+B,KAAKsX,QAAQgR,WAGd+V,GAASr+B,KAAK+9B,eAAex7B,OACtB,KAEJvC,KAAKsX,QAAQ0hB,WAAWsF,mBAAmBt+B,KAAK+9B,eAAeM,IAL3D,IAMf,GAAC,CAAAz+B,IAAA,YAAAC,MACD,WACI,IAAKG,KAAKsX,QAAQgR,WACd,MAAO,GAEX,IAE8CrP,EAFxCuD,EAAQxc,KAAKsX,QAAQ0hB,WACrB32B,EAAS,GAAG8W,GAAAhB,EAAAA,EAAAA,GACSnY,KAAK+9B,gBAAc,IAA9C,IAAA5kB,EAAAf,MAAAa,EAAAE,EAAAd,KAAAC,MAAgD,KAArCimB,EAAYtlB,EAAApZ,MACbC,EAAQ0c,EAAM8hB,mBAAmBC,GACnCz+B,GACAuC,EAAOwP,KAAK/R,EAEpB,CAAC,OAAA+Y,GAAAM,EAAAjR,EAAA2Q,EAAA,SAAAM,EAAAL,GAAA,CACD,OAAOzW,CACX,GAAC,CAAAzC,IAAA,MAAAC,MACD,SAAI2+B,GACA,OAAOx+B,KAAK+9B,eAAeU,SAASD,EAAW/lB,GACnD,GAAC,CAAA7Y,IAAA,QAAAC,MACD,WACuC,IAA/BG,KAAK+9B,eAAex7B,QAIxBvC,KAAK4Y,IAAI,GACb,GAAC,CAAAhZ,IAAA,MAAAC,MACD,SAAI8vB,GAAgB,IAAA+O,EAAA,KAChB,IACI1+B,KAAKg+B,wBAAyB,EAC9Bh+B,KAAKsX,QAAQgY,mBAAkB,SAAClK,GAC5BsZ,EAAKX,eAAiB3Y,EAASwK,iBAAiB8O,EAAKX,eAAgBpO,EACzE,GACJ,CAAC,QAEG3vB,KAAKg+B,wBAAyB,CAClC,CACA,OAAOh+B,KAAK+9B,cAChB,KAAC3O,CAAA,CAhE4B,GAkE3BuP,GAAgBC,mBAAmB,4HACnCC,GAAcD,mBAAmB,yIACvC,SAASE,GAAmBC,GACxB,OAAOJ,GAAgBC,mBAAmBG,EAAMzK,YAAcuK,EAClE,CACA,IAAMG,GAAiBJ,mBAAmB,2EACpCK,GAAeL,mBAAmB,wGAIxCM,EAAAA,EAAAA,KAA2B,SAACC,EAAOC,GAC/B,IAAMC,EAAkBF,EAAMG,SAASC,EAAAA,KACnCF,GACAD,EAAUI,QAAQ,mBAADp9B,OAAoB,iBAAiB,0CAA+E08B,GAAmBO,GAAgB,+BAE5K,IAAMI,EAAoBN,EAAMG,SAASI,EAAAA,KACrCD,GACAL,EAAUI,QAAQ,mBAADp9B,OAAoB,mBAAmB,0CAAiF08B,GAAmBW,GAAkB,+BAElL,IAAME,EAAiBR,EAAMG,SAASM,EAAAA,KAClCD,GACAP,EAAUI,QAAQ,mBAADp9B,OAAoB,gBAAgB,0CAA8E08B,GAAmBa,GAAe,+BAEzK,IAAME,EAAiBV,EAAMG,SAASQ,EAAAA,KAClCD,GACAT,EAAUI,QAAQ,mBAADp9B,OAAoB,gBAAgB,0CAjBlD48B,GAAiBJ,mBAiBmIiB,EAjB1GvL,YAAc2K,GAiB2G,gCAE1K,IAAMc,EAAwBZ,EAAMG,SAASU,EAAAA,IACzCD,GACAX,EAAUI,QAAQ,8BAADp9B,OAA+B,8BAA8B,eAAgE29B,EAAsBE,KAAKr9B,EAAC,OAElL,G,ohBC3oDIgY,EAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EACIE,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnc,GAAS,IAAMoc,EAAKL,EAAUM,KAAKrc,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC1F,SAASiU,EAAStc,GAAS,IAAMoc,EAAKL,EAAiB,MAAE/b,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC7F,SAAS+T,EAAK5Z,GAJlB,IAAexC,EAIawC,EAAOiW,KAAOwD,EAAQzZ,EAAOxC,QAJ1CA,EAIyDwC,EAAOxC,MAJhDA,aAAiB8b,EAAI9b,EAAQ,IAAI8b,GAAE,SAAUG,GAAWA,EAAQjc,EAAQ,KAIjBuc,KAAKJ,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUS,MAAMZ,EAASC,GAAc,KAAKQ,OAClE,GACJ,EA0BMgkB,EAAS,WACX,SAAAA,EAAYC,EAAmBC,EAAiBC,EAAmBC,IAAiBhhC,EAAAA,EAAAA,GAAA,KAAA4gC,GAChFlgC,KAAKmgC,kBAAoBA,EACzBngC,KAAKogC,gBAAkBA,EACvBpgC,KAAKqgC,kBAAoBA,EACzBrgC,KAAKsgC,gBAAkBA,CAC3B,CASC,OATA3gC,EAAAA,EAAAA,GAAAugC,EAAA,EAAAtgC,IAAA,UAAAC,MACD,WACI,OAA+B,IAA3BG,KAAKmgC,kBACE,EAEoB,IAA3BngC,KAAKqgC,kBACE,EAEJ,CACX,KAACH,CAAA,CAfU,GAiBTK,GAAI5gC,EAAAA,EAAAA,IACN,SAAA4gC,EAAYC,IAASlhC,EAAAA,EAAAA,GAAA,KAAAihC,GACjBvgC,KAAKwgC,QAAUA,CACnB,IAEEC,GAAuBC,EAAAA,EAAAA,IAAa,qBAAsBC,EAAAA,EAAQC,IAAKzN,EAAAA,GAAa,uBAAwB,sCAC5G0N,GAAuBH,EAAAA,EAAAA,IAAa,qBAAsBC,EAAAA,EAAQG,OAAQ3N,EAAAA,GAAa,uBAAwB,sCAC/G4N,GAAsBL,EAAAA,EAAAA,IAAa,oBAAqBC,EAAAA,EAAQK,MAAO7N,EAAAA,GAAa,sBAAuB,qCACtG8N,GAAU,SAAA5pB,IAAAtY,EAAAA,EAAAA,GAAAkiC,EAAA5pB,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAAgiC,GACjB,SAAAA,EAAYC,EAAYC,EAAkBC,EAAkBC,GAAuB,IAAAhiC,EAsEtD,OAtEsDC,EAAAA,EAAAA,GAAA,KAAA2hC,IAC/E5hC,EAAAL,EAAAO,KAAA,OACK4hC,iBAAmBA,EACxB9hC,EAAK+hC,iBAAmBA,EACxB/hC,EAAKgiC,sBAAwBA,EAC7BhiC,EAAKiiC,OAAS,EACdjiC,EAAKkiC,YAAcL,EACnB7hC,EAAKmiC,YAAa,EAClBniC,EAAKoiC,QAASt1B,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QACvDhN,EAAKoiC,OAAOn1B,aAAa,sBACzBjN,EAAKqiC,oBAAqBv1B,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QACnEhN,EAAKqiC,mBAAmBp1B,aAAa,uBACrCjN,EAAKsiC,WAAatiC,EAAKoY,UAAU,IAAImqB,EAAAA,EAAUviC,EAAKqiC,mBAAmB31B,UACvE1M,EAAKsiC,WAAW9vB,KAAK,IAAIgwB,EAAAA,GAAO,mBAAoB1O,EAAAA,GAAa,cAAe,SAAU,qBAAuB2O,EAAAA,EAAUC,YAAYhB,IAAsB,GAAM,kBAAMvlB,GAASvK,EAAAA,EAAAA,GAAA5R,QAAO,OAAQ,GAAM4mB,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAjV,GAAA,cAAAA,EAAAkV,KAAAlV,EAAA+K,MAAA,cAAA/K,EAAAmV,OAAA,SAAsBtmB,KAAKgiC,QAAM,wBAAA7wB,EAAAsV,OAAA,GAAAN,EAAA,SAAI,IAAG,CAAEpB,OAAO,EAAOkd,MAAM,IACvQ5iC,EAAK0M,SAAUI,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QACxDhN,EAAK0M,QAAQO,aAAa,wCAC1BjN,EAAK6iC,UAAW/1B,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QACzDhN,EAAK6iC,SAAS51B,aAAa,uBAC3BjN,EAAK6iC,SAAS11B,aAAa,OAAQ,QACnCnN,EAAK8iC,UAAY9iC,EAAKoY,UAAU,IAAI2qB,EAAAA,GAAqB/iC,EAAK6iC,SAASn2B,QAAS,CAAC,IACjF1M,EAAK0M,QAAQA,QAAQqoB,YAAY/0B,EAAK8iC,UAAUn1B,cAChD3N,EAAKoY,UAAUypB,EAAWmB,iBAAgB,WACjChjC,EAAKmiC,aAGVniC,EAAKijC,OAASjjC,EAAKkjC,WACnBljC,EAAKmjC,UACT,KACAnjC,EAAKoY,UAAUypB,EAAWuB,oBAAoBvjB,2BAA0B,WAC/D7f,EAAKmiC,YAGVniC,EAAKmjC,SACT,KACAnjC,EAAKoY,UAAU+N,EAAIkd,8BAA8BrjC,EAAK0M,QAAQA,QAAS,SAAS,SAAC7D,GAC7EA,EAAEy6B,iBACF,IAAMC,EAAMpd,EAAIqd,oBAAoB36B,EAAEyM,OAAQ,mBAC1CiuB,GACAvjC,EAAKyjC,SAASF,EAEtB,KACAvjC,EAAKoY,UAAU+N,EAAIkd,8BAA8BrjC,EAAK0M,QAAQA,QAAS,WAAW,SAAC7D,IAC3EA,EAAE66B,OAAO,KACN76B,EAAE66B,OAAO,OACT76B,EAAE66B,OAAO,QACZ76B,EAAEy6B,iBACFtjC,EAAKyjC,SAASzjC,EAAK2jC,cAAe,UAElC96B,EAAE66B,OAAO,KACN76B,EAAE66B,OAAO,OACT76B,EAAE66B,OAAO,QACZ76B,EAAEy6B,iBACFtjC,EAAKyjC,SAASzjC,EAAK4jC,cAAe,cAElC/6B,EAAE66B,OAAO,IACN76B,EAAE66B,OAAO,OACT76B,EAAE66B,OAAO,MACT76B,EAAE66B,OAAO,OACT76B,EAAE66B,OAAO,KACT76B,EAAE66B,OAAO,MACZ76B,EAAEy6B,iBACFtjC,EAAK6jC,SAEb,KACA7jC,EAAKoY,UAAUpY,EAAKgiC,sBAAsBviB,0BAAyB,SAAA5W,GAC3DA,EAAEi7B,qBAAqB,uCACvB9jC,EAAKkiC,YAAY7Z,cAAc,CAAE0b,qBAAsB/jC,EAAKgiC,sBAAsBpZ,SAAS,uCAEnG,KACA5oB,EAAKijC,OAAS,GACdjjC,EAAKgkC,aAAe,KAAKhkC,CAC7B,CAygBC,OAzgBAM,EAAAA,EAAAA,GAAAshC,EAAA,EAAArhC,IAAA,OAAAC,MACD,WACI,IAAIw+B,EAAQ,EAIZ,GAHKr+B,KAAKwhC,aACNxhC,KAAKsiC,OAAStiC,KAAKuiC,YAEnBviC,KAAKwhC,WAAY,CAEjB,IADA,IAAI8B,GAAgB,EACX9gC,EAAI,EAAGC,EAAMzC,KAAKsiC,OAAO//B,OAAQC,EAAIC,EAAKD,IAC/C,GAAIxC,KAAKsiC,OAAO9/B,KAAOxC,KAAKqjC,aAAc,CACtCC,EAAe9gC,EACf,KACJ,CAEJ67B,EAASr+B,KAAKsiC,OAAO//B,OAAS+gC,EAAe,CACjD,MAEIjF,EAAQr+B,KAAKujC,eAAevjC,KAAKuhC,YAAYvX,eAEjD,GAA2B,IAAvBhqB,KAAKsiC,OAAO//B,OAAhB,CAIA87B,GAAgBr+B,KAAKsiC,OAAO//B,OAC5B,IAAMi+B,EAAUxgC,KAAKsiC,OAAOjE,GAAOmC,QACnCxgC,KAAKuhC,YAAYh1B,YAAY,IAAI1H,EAAAA,EAAS27B,EAAQ,GAAGH,kBAAmB,IACxErgC,KAAKuhC,YAAYiC,aAAa,CAAE5X,YAAa,EAAGjiB,gBAAiB62B,EAAQ,GAAGH,kBAAmBxU,UAAW,WAAmDhiB,cAAe22B,EAAQA,EAAQj+B,OAAS,GAAG+9B,kBACxMtgC,KAAKwhC,YAAa,EAClBxhC,KAAKuhC,YAAYkC,WACjBzjC,KAAKwiC,UACLxiC,KAAK8iC,SAAS9iC,KAAKijC,cAAe,WARlC,CASJ,GAAC,CAAArjC,IAAA,OAAAC,MACD,WACI,IAAIw+B,EAAQ,EAIZ,GAHKr+B,KAAKwhC,aACNxhC,KAAKsiC,OAAStiC,KAAKuiC,YAEnBviC,KAAKwhC,WAAY,CAEjB,IADA,IAAI8B,GAAgB,EACX9gC,EAAI,EAAGC,EAAMzC,KAAKsiC,OAAO//B,OAAQC,EAAIC,EAAKD,IAC/C,GAAIxC,KAAKsiC,OAAO9/B,KAAOxC,KAAKqjC,aAAc,CACtCC,EAAe9gC,EACf,KACJ,CAEJ67B,EAASiF,EAAe,CAC5B,MAEIjF,EAAQr+B,KAAKujC,eAAevjC,KAAKuhC,YAAYvX,eAEjD,GAA2B,IAAvBhqB,KAAKsiC,OAAO//B,OAAhB,CAIA87B,GAAgBr+B,KAAKsiC,OAAO//B,OAC5B,IAAMi+B,EAAUxgC,KAAKsiC,OAAOjE,GAAOmC,QACnCxgC,KAAKuhC,YAAYh1B,YAAY,IAAI1H,EAAAA,EAAS27B,EAAQ,GAAGH,kBAAmB,IACxErgC,KAAKuhC,YAAYiC,aAAa,CAAE5X,YAAa,EAAGjiB,gBAAiB62B,EAAQ,GAAGH,kBAAmBxU,UAAW,WAAmDhiB,cAAe22B,EAAQA,EAAQj+B,OAAS,GAAG+9B,kBACxMtgC,KAAKwhC,YAAa,EAClBxhC,KAAKuhC,YAAYkC,WACjBzjC,KAAKwiC,UACLxiC,KAAK8iC,SAAS9iC,KAAKgjC,cAAe,OARlC,CASJ,GAAC,CAAApjC,IAAA,SAAAC,MACD,WACI,IAAI6jC,GAAoB,EAClBC,EAAU3jC,KAAK4jC,wBACrB,GAAID,EAAS,CACT,IAAMniC,EAAauT,SAAS4uB,EAAQ7uB,aAAa,aAAc,IAC1D+uB,MAAMriC,KACPkiC,EAAmBliC,EAE3B,CACAxB,KAAKgiC,QACqB,IAAtB0B,IACA1jC,KAAKuhC,YAAYh1B,YAAY,IAAI1H,EAAAA,EAAS6+B,EAAkB,IAC5D1jC,KAAKuhC,YAAYvM,eAAe,IAAInwB,EAAAA,EAAS6+B,EAAkB,GAAI,GAE3E,GAAC,CAAA9jC,IAAA,OAAAC,MACD,WACIG,KAAKwhC,YAAa,EAClBxhC,KAAKuhC,YAAY7Z,cAAc,CAAEgQ,UAAU,IAC3C13B,KAAKuhC,YAAYhZ,QACjBvoB,KAAKuhC,YAAYkC,WACjBzjC,KAAKwiC,SACT,GAAC,CAAA5iC,IAAA,cAAAC,MACD,WACI,IAAM8jC,EAAU3jC,KAAK4jC,wBACrB,OAAKD,EAGDA,EAAQG,uBACDH,EAAQG,uBAEZH,EALI3jC,KAAK+jC,cAMpB,GAAC,CAAAnkC,IAAA,cAAAC,MACD,WACI,IAAM8jC,EAAU3jC,KAAK4jC,wBACrB,OAAKD,EAGDA,EAAQK,mBACDL,EAAQK,mBAEZL,EALI3jC,KAAK+jC,cAMpB,GAAC,CAAAnkC,IAAA,eAAAC,MACD,WACI,OAAOG,KAAK+L,QAAQA,QAAQk4B,cAAc,mBAC9C,GAAC,CAAArkC,IAAA,wBAAAC,MACD,WACI,IAAMwC,EAAS+J,SAAS83B,cACxB,OAAI7hC,GAAU,kBAAkB8hC,KAAK9hC,EAAOozB,WACjCpzB,EAEJ,IACX,GAAC,CAAAzC,IAAA,WAAAC,MACD,SAAS+iC,EAAKj/B,GACV,IAAMggC,EAAU3jC,KAAK4jC,wBACrBhB,EAAIwB,SAAW,EACfxB,EAAIra,QACAob,GAAWA,IAAYf,IACvBe,EAAQS,UAAY,GAExB,IAAMC,EAAW1gC,EAA0B,SAATA,EAA8B,OAAZggC,QAAgC,IAAZA,OAAqB,EAASA,EAAQK,mBAAiC,OAAZL,QAAgC,IAAZA,OAAqB,EAASA,EAAQG,uBAArKH,GACR,OAAZU,QAAgC,IAAZA,OAAqB,EAASA,EAAQC,UAAUzS,SAAS,gBAC7E7xB,KAAKohC,iBAAiBmD,aAAaC,EAAAA,GAASC,kBAAkB,IAE7C,OAAZJ,QAAgC,IAAZA,OAAqB,EAASA,EAAQC,UAAUzS,SAAS,iBAClF7xB,KAAKohC,iBAAiBmD,aAAaC,EAAAA,GAASE,iBAAiB,GAEjE1kC,KAAKmiC,UAAUwC,aACnB,GAAC,CAAA/kC,IAAA,YAAAC,MACD,WACI,OAAOG,KAAKwhC,UAChB,GAAC,CAAA5hC,IAAA,SAAAC,MACD,SAAOmB,EAAKI,EAAOE,GACftB,KAAKshC,OAASlgC,EACdpB,KAAKyhC,OAAOruB,OAAOpS,EAAM,GACzBhB,KAAKyhC,OAAO3tB,SAAS1S,GACrBpB,KAAKyhC,OAAOpuB,UAAUrT,KAAKwhC,WAAa,EAAI,GAC5CxhC,KAAK+L,QAAQqH,OAAOpS,GACpBhB,KAAK+L,QAAQ+H,SAAS1S,GACtBpB,KAAK+L,QAAQsH,UAAU/R,GACvBtB,KAAKkiC,SAAS7uB,UAAU/R,GACxBtB,KAAKkiC,SAASpuB,SAAS1S,GACnBpB,KAAKwhC,YACLxhC,KAAK0hC,mBAAmBl1B,aAAa,cAAe,SACpDxM,KAAK0hC,mBAAmBkD,WAAW,WAGnC5kC,KAAK0hC,mBAAmBl1B,aAAa,cAAe,QACpDxM,KAAK0hC,mBAAmBkD,WAAW,QAE3C,GAAC,CAAAhlC,IAAA,WAAAC,MACD,WACI,IAAMglC,EAAc7kC,KAAKuhC,YAAYuD,iBACrC,IAAKD,GAAsC,IAAvBA,EAAYtiC,OAC5B,MAAO,GAEX,IAAMwiC,EAAgB/kC,KAAKuhC,YAAYyD,oBAAoBhM,WACrDiM,EAAgBjlC,KAAKuhC,YAAYkB,oBAAoBzJ,WAC3D,OAAK+L,GAAkBE,EAGhBhE,EAAWiE,eAAeL,EAAaE,EAAc3S,eAAgB6S,EAAc7S,gBAF/E,EAGf,GAAC,CAAAxyB,IAAA,iBAAAC,MA2HD,SAAeslC,GAEX,IADA,IAAM3jC,EAAa2jC,EAAI3jC,WACdgB,EAAI,EAAGC,EAAMzC,KAAKsiC,OAAO//B,OAAQC,EAAIC,EAAKD,IAAK,CACpD,IAAM4iC,EAAOplC,KAAKsiC,OAAO9/B,GAAGg+B,QAE5B,GAAIh/B,GADqB4jC,EAAKA,EAAK7iC,OAAS,GAAG+9B,gBAE3C,OAAO99B,CAEf,CACA,OAAO,CACX,GAAC,CAAA5C,IAAA,UAAAC,MACD,WACI,IAAMwlC,EAAkBrlC,KAAKuhC,YAAYyD,oBAAoBpb,aACvD0b,EAAkBtlC,KAAKuhC,YAAYkB,oBAAoB7Y,aACvDmb,EAAgB/kC,KAAKuhC,YAAYyD,oBAAoBhM,WACrDiM,EAAgBjlC,KAAKuhC,YAAYkB,oBAAoBzJ,WACrDuM,EAAoBR,EAAcnb,aAClC4b,EAAoBP,EAAcrb,aACxC,IAAK5pB,KAAKwhC,aAAeuD,IAAkBE,EAIvC,OAHAzf,EAAIigB,UAAUzlC,KAAKkiC,SAASn2B,SAC5B/L,KAAKqjC,aAAe,UACpBrjC,KAAKmiC,UAAUwC,cAGnB3kC,KAAKuhC,YAAY7Z,cAAc,CAAEgQ,UAAU,IAC3C,IAAMgO,EAAY1lC,KAAKujC,eAAevjC,KAAKuhC,YAAYvX,eACvD,GAAIhqB,KAAKsiC,OAAOoD,KAAe1lC,KAAKqjC,aAApC,CAGArjC,KAAKqjC,aAAerjC,KAAKsiC,OAAOoD,GAChC,IAAMC,EAAQ3lC,KAAKsiC,OAAOoD,GAAWlF,QAC/BoF,EAAYx5B,SAASC,cAAc,OACzCu5B,EAAUnQ,UAAY,oBACtBmQ,EAAUp5B,aAAa,OAAQ,QAC/Bo5B,EAAUp5B,aAAa,aAAc,+EACrC4E,EAAAA,EAAAA,GAAcw0B,EAAWN,EAAgBtgC,IAAI,KAK7C,IAJA,IAAI6gC,EAAkB,EAClBC,EAAkB,EAClBC,EAAkB,EAClBC,EAAkB,EACbxjC,EAAI,EAAGC,EAAMkjC,EAAMpjC,OAAQC,EAAIC,EAAKD,IAAK,CAC9C,IAAMyjC,EAAYN,EAAMnjC,GAClB29B,EAAoB8F,EAAU9F,kBAC9BC,EAAkB6F,EAAU7F,gBAC5BC,EAAoB4F,EAAU5F,kBAC9BC,EAAkB2F,EAAU3F,gBACR,IAAtBH,IAAiD,IAApB0F,GAAyB1F,EAAoB0F,KAC1EA,EAAkB1F,GAEE,IAApBC,IAA+C,IAApB0F,GAAyB1F,EAAkB0F,KACtEA,EAAkB1F,GAEI,IAAtBC,IAAiD,IAApB0F,GAAyB1F,EAAoB0F,KAC1EA,EAAkB1F,GAEE,IAApBC,IAA+C,IAApB0F,GAAyB1F,EAAkB0F,KACtEA,EAAkB1F,EAE1B,CACA,IAAM4F,EAAS95B,SAASC,cAAc,OACtC65B,EAAOzQ,UAAY,kBACnB,IAAM0Q,EAAO/5B,SAASC,cAAc,OACpC85B,EAAK1Q,UAAY,uCACjB,IAAM2Q,EAA0BN,EAAkBD,EAAkB,EAC9DQ,EAA0BL,EAAkBD,EAAkB,EACpEI,EAAK/R,YAAYhoB,SAASk6B,eAAe,GAADlkC,OAAIsjC,EAAY,EAAC,KAAAtjC,OAAIpC,KAAKsiC,OAAO//B,OAAM,UAAAH,OAASyjC,EAAe,KAAAzjC,OAAIgkC,EAAuB,MAAAhkC,OAAK2jC,EAAe,KAAA3jC,OAAIikC,EAAuB,SACjLH,EAAO15B,aAAa,YAAa2G,OAAO4yB,IACxC,IAAMQ,EAAe,SAACp9B,GAClB,OAAc,IAAVA,EACOgqB,EAAAA,GAAa,mBAAoB,oBAEzB,IAAVhqB,EACEgqB,EAAAA,GAAa,mBAAoB,kBAGjCA,EAAAA,GAAa,qBAAsB,oBAAqBhqB,EAEvE,EACMq9B,EAA8BD,EAAaH,GAC3CK,EAA8BF,EAAaF,GACjDH,EAAO15B,aAAa,aAAc2mB,EAAAA,GAAa,CAC3CvzB,IAAK,SACL8mC,QAAS,CACL,gDACA,4DACA,+GACA,0EACA,qDACA,+GAEL,wEAA0EhB,EAAY,EAAI1lC,KAAKsiC,OAAO//B,OAAQsjC,EAAiBW,EAA6BT,EAAiBU,IAChLP,EAAO9R,YAAY+R,GAEnBD,EAAO15B,aAAa,OAAQ,YAC5Bo5B,EAAUxR,YAAY8R,GAGtB,IAFA,IAAMS,EAAarB,EAAgBtgC,IAAI,IACnC4hC,EAAUb,EACLvjC,EAAI,EAAGC,EAAMkjC,EAAMpjC,OAAQC,EAAIC,EAAKD,IAAK,CAC9C,IAAMyjC,EAAYN,EAAMnjC,GACxBy+B,EAAW4F,eAAejB,EAAWK,EAAWW,EAASD,EAAY3mC,KAAKshC,OAAQ+D,EAAiBN,EAAeQ,EAAmBD,EAAiBL,EAAeO,EAAmBxlC,KAAKmhC,iBAAiB2F,iBAC1K,IAAhCb,EAAU5F,oBACVuG,EAAUX,EAAU3F,gBAE5B,CACA9a,EAAIigB,UAAUzlC,KAAKkiC,SAASn2B,SAC5B/L,KAAKkiC,SAASn2B,QAAQqoB,YAAYwR,GAClC5lC,KAAKmiC,UAAUwC,aA9Ef,CA+EJ,IAAC,EAAA/kC,IAAA,iBAAAC,MArOD,SAAsBglC,EAAakC,EAAmBC,GAClD,IAAKnC,GAAsC,IAAvBA,EAAYtiC,OAC5B,MAAO,GAIX,IAFA,IAAMojC,EAAQ,GACVsB,EAAc,EACTzkC,EAAI,EAAGC,EAAMoiC,EAAYtiC,OAAQC,EAAIC,EAAKD,IAAK,CACpD,IAAM0kC,EAAarC,EAAYriC,GACzB2kC,EAAgBD,EAAWE,wBAC3BC,EAAcH,EAAWI,sBACzBC,EAAgBL,EAAWM,wBAC3BC,EAAcP,EAAWQ,sBACzB7yB,EAAI,GACN8yB,EAAU,EAGJC,EAAsC,IAAhBP,EAAoBF,EAAgBA,EAAgB,EAC1EU,EAAsC,IAAhBJ,EAAoBF,EAAgBA,EAAgB,EAE5EO,EAAc,EACdC,EAAc,EAClB,GAAIvlC,EAAI,EAAG,CACP,IAAMwlC,EAAiBnD,EAAYriC,EAAI,GAEnCslC,EADyC,IAAzCE,EAAeV,sBACDU,EAAeZ,wBAA0B,EAGzCY,EAAeV,sBAAwB,EAGrDS,EADyC,IAAzCC,EAAeN,sBACDM,EAAeR,wBAA0B,EAGzCQ,EAAeN,sBAAwB,CAE7D,CACA,IAAIO,EAAeL,EA3SR,EA2SkD,EACzDM,EAAeL,EA5SR,EA4SkD,EAC7D,GAAII,EAAeH,EAAa,CAC5B,IAAMK,EAAQL,EAAcG,EAC5BA,GAA8BE,EAC9BD,GAA8BC,CAClC,CACA,GAAID,EAAeH,EAAa,CAC5B,IAAMI,EAAQJ,EAAcG,EAC5BD,GAA8BE,EAC9BD,GAA8BC,CAClC,CACAtzB,EAAE8yB,KAAa,IAAIzH,EAAU+H,EAAcL,EAAoBM,EAAcL,GAIzD,IAAhBR,IACAxyB,EAAE8yB,KAAa,IAAIzH,EAAUiH,EAAeE,EAAa,EAAG,IAK5C,IAAhBI,IACA5yB,EAAE8yB,KAAa,IAAIzH,EAAU,EAAG,EAAGqH,EAAeE,IAKtD,IAAMW,EAAsC,IAAhBf,EAAoBF,EAAgB,EAAIE,EAAc,EAC5EgB,EAAsC,IAAhBZ,EAAoBF,EAAgB,EAAIE,EAAc,EAE9Ea,EAAcvB,EACdwB,EAAcvB,EAClB,GAAIxkC,EAAI,EAAIC,EAAK,CACb,IAAM+lC,EAAiB3D,EAAYriC,EAAI,GAEnC8lC,EADyC,IAAzCE,EAAelB,sBACDkB,EAAepB,wBAGfoB,EAAepB,wBAA0B,EAGvDmB,EADyC,IAAzCC,EAAed,sBACDc,EAAehB,wBAGfgB,EAAehB,wBAA0B,CAE/D,CACA,IAAIiB,EAAaL,EA3VN,EA2VgD,EACvDM,EAAaL,EA5VN,EA4VgD,EAC3D,GAAII,EAAaH,EAAa,CAC1B,IAAMH,EAAQG,EAAcG,EAC5BA,GAA0BN,EAC1BO,GAA0BP,CAC9B,CACA,GAAIO,EAAaH,EAAa,CAC1B,IAAMJ,EAAQI,EAAcG,EAC5BD,GAA0BN,EAC1BO,GAA0BP,CAC9B,CACAtzB,EAAE8yB,KAAa,IAAIzH,EAAUkI,EAAoBK,EAAYJ,EAAoBK,GAErF/C,EAAMsB,KAAiB,IAAI1G,EAAK1rB,EACpC,CAKA,IAHA,IAAI8zB,EAAOhD,EAAM,GAAGnF,QACd3rB,EAAI,GACN8yB,EAAU,EACLnlC,EAAI,EAAGC,EAAMkjC,EAAMpjC,OAAQC,EAAIC,EAAKD,IAAK,CAC9C,IAAMomC,EAAWjD,EAAMnjC,GAAGg+B,QACpBqI,EAAWF,EAAKA,EAAKpmC,OAAS,GAC9BumC,EAAYF,EAAS,GACA,IAAvBC,EAASE,WACkB,IAAxBD,EAAUC,WACVD,EAAU3I,mBAAqB0I,EAASzI,iBAE3CuI,EAAKA,EAAKpmC,OAAS,GAAK,IAAI29B,EAAU2I,EAAS1I,kBAAmB2I,EAAU1I,gBAAiByI,EAASxI,kBAAmByI,EAAUxI,iBACnIqI,EAAOA,EAAKvmC,OAAOwmC,EAAS59B,MAAM,MAGtC6J,EAAE8yB,KAAa,IAAIpH,EAAKoI,GACxBA,EAAOC,EACX,CAEA,OADA/zB,EAAE8yB,KAAa,IAAIpH,EAAKoI,GACjB9zB,CACX,GAAC,CAAAjV,IAAA,iBAAAC,MA6GD,SAAsBmpC,EAAM/C,EAAWW,EAASD,EAAYvlC,EAAOikC,EAAiBN,EAAeQ,EAAmBD,EAAiBL,EAAeO,EAAmBsB,GACrK,IAAMnjC,EAAOsiC,EAAU8C,UACnBE,EAAe,kBACfC,EAA4B,GAE5BC,EAAa,KACjB,OAAQxlC,GACJ,KAAK,EACDslC,EAAe,8BACfC,EAA4B,eAC5BC,EAAa1I,EACb,MACJ,KAAK,EACDwI,EAAe,8BACfC,EAA4B,eAC5BC,EAAatI,EAYrB,IATA,IAAMV,EAAoB8F,EAAU9F,kBAC9BC,EAAkB6F,EAAU7F,gBAC5BC,EAAoB4F,EAAU5F,kBAC9BC,EAAkB2F,EAAU3F,gBAC5B8I,EAAMlnC,KAAKsJ,IAAI80B,EAAkBD,EAAmBD,EAAkBD,GACtEkJ,EAAqBhE,EAAgBrgC,IAAI,KACzCskC,EAA2BD,EAAmB/X,iBAAmB+X,EAAmB9X,iBACpFgY,EAAqBjE,EAAgBtgC,IAAI,KACzCwkC,EAA2B,GAAKD,EAAmBjY,iBAAmBiY,EAAmBhY,iBACtF/uB,EAAI,EAAGA,GAAK4mC,EAAK5mC,IAAK,CAC3B,IAAMinC,EAAsC,IAAtBtJ,EAA0B,EAAIA,EAAoB39B,EAClEknC,EAAsC,IAAtBrJ,EAA0B,EAAIA,EAAoB79B,EAClEogC,EAAMx2B,SAASC,cAAc,OACnCu2B,EAAI+G,MAAMC,SAAWxoC,EAAQ,KAC7BwhC,EAAInN,UAAYwT,EAChBrG,EAAIp2B,aAAa,OAAQ,YACJ,IAAjBk9B,IACA9C,EAAU8C,GAEd9G,EAAIp2B,aAAa,YAAa2G,OAAOyzB,IACrC,IAAMT,EAAO/5B,SAASC,cAAc,OACpC85B,EAAK1Q,UAAY,mBACjB0Q,EAAKwD,MAAMroC,OAAS,GAAHc,OAAMukC,EAAU,MACjC/D,EAAIxO,YAAY+R,GAChB,IAAM0D,EAAqBz9B,SAASC,cAAc,QAClDw9B,EAAmBF,MAAMvoC,MAASkoC,EAA2B,KAC7DO,EAAmBF,MAAMC,SAAYN,EAA2B,KAChEO,EAAmBpU,UAAY,0BAA4ByT,EACtC,IAAjBO,EACAI,EAAmBzV,YAAYhoB,SAASk6B,eAAenzB,OAAOs2B,KAG9DI,EAAmBC,UAAY,OAEnC3D,EAAK/R,YAAYyV,GACjB,IAAME,EAAqB39B,SAASC,cAAc,QAClD09B,EAAmBJ,MAAMvoC,MAASooC,EAA2B,KAC7DO,EAAmBJ,MAAMC,SAAYJ,EAA2B,KAChEO,EAAmBJ,MAAMK,aAAe,OACxCD,EAAmBtU,UAAY,0BAA4ByT,EACtC,IAAjBQ,EACAK,EAAmB3V,YAAYhoB,SAASk6B,eAAenzB,OAAOu2B,KAG9DK,EAAmBD,UAAY,OAEnC3D,EAAK/R,YAAY2V,GACjB,IAAME,EAAS79B,SAASC,cAAc,QAEtC,GADA49B,EAAOxU,UA9Da,qBA+DhB0T,EAAY,CACZ,IAAMe,EAAgB99B,SAASC,cAAc,QAC7C69B,EAAczU,UAAYqM,EAAAA,EAAUC,YAAYoH,GAChDe,EAAcJ,UAAY,WAC1BG,EAAO7V,YAAY8V,EACvB,MAEID,EAAOH,UAAY,WAEvB3D,EAAK/R,YAAY6V,GACjB,IAAIE,OAAW,EACf,GAAqB,IAAjBT,EAAoB,CACpB,IAAIU,EAAOpqC,KAAKqqC,YAAYpF,EAAeK,EAAiBE,EAAkB7b,QAAS+f,EAAc5C,GACjG7F,EAAW9xB,YACXi7B,EAAOnJ,EAAW9xB,UAAUC,WAAWg7B,IAE3CjE,EAAK52B,mBAAmB,YAAa66B,GACrCD,EAAclF,EAAclb,eAAe2f,EAC/C,KACK,CACD,IAAIU,EAAOpqC,KAAKqqC,YAAYtF,EAAeM,EAAiBE,EAAkB5b,QAAS8f,EAAc3C,GACjG7F,EAAW9xB,YACXi7B,EAAOnJ,EAAW9xB,UAAUC,WAAWg7B,IAE3CjE,EAAK52B,mBAAmB,YAAa66B,GACrCD,EAAcpF,EAAchb,eAAe0f,EAC/C,CAC2B,IAAvBU,EAAY5nC,SACZ4nC,EAAchX,EAAAA,GAAa,YAAa,UAE5C,IAAImX,EAAY,GAChB,OAAQ3mC,GACJ,KAAK,EAEG2mC,EADAb,IAAiBC,EACLvW,EAAAA,GAAa,CAAEvzB,IAAK,gBAAiB8mC,QAAS,CAAC,4EAA8E,yBAA0ByD,EAAaV,GAGpKtW,EAAAA,GAAa,YAAa,0CAA2CgX,EAAaV,EAAcC,GAEhH,MACJ,KAAK,EACDY,EAAYnX,EAAAA,GAAa,aAAc,0BAA2BgX,EAAaT,GAC/E,MACJ,KAAK,EACDY,EAAYnX,EAAAA,GAAa,aAAc,0BAA2BgX,EAAaV,GAGvF7G,EAAIp2B,aAAa,aAAc89B,GAC/BtB,EAAK5U,YAAYwO,EACrB,CACJ,GAAC,CAAAhjC,IAAA,cAAAC,MACD,SAAmB2c,EAAOzX,EAAS4kB,EAASnoB,EAAYslC,GACpD,IAAMqD,EAAc3tB,EAAMuN,eAAevoB,GACnC0P,EAAWnM,EAAQC,IAAI,IACvBulC,EAAaC,EAAAA,EAAWC,YAAYN,EAAarD,GACjD4D,EAAeC,EAAAA,GAAsBD,aAAaP,EAAa3tB,EAAMouB,6BACrEC,EAAcF,EAAAA,GAAsBE,YAAYV,EAAaO,EAAcluB,EAAMsuB,mBAEvF,OADUC,EAAAA,EAAAA,IAAe,IAAIC,EAAAA,GAAiB95B,EAAS+5B,cAAgBlmC,EAAQC,IAAI,IAAuDkM,EAASg6B,+BAAgCf,GAAa,EAAOO,EAAcG,EAAa,EAAGN,EAAY,GAAI5gB,EAAS,EAAGzY,EAASi6B,WAAYj6B,EAASk6B,YAAal6B,EAASm6B,cAAetmC,EAAQC,IAAI,KAAgDD,EAAQC,IAAI,IAAyCD,EAAQC,IAAI,IAAgDD,EAAQC,IAAI,MAAyCsmC,EAAAA,GAAoBC,IAAK,OACtjBnB,IACb,KAACnJ,CAAA,CAjlBgB,CAA4BtmB,EAAAA,IAmlBjDsmB,GAAW9xB,WAAYwB,EAAAA,EAAAA,GAAyB,aAAc,CAAEvB,WAAY,SAAAvP,GAAK,OAAIA,CAAK,IAC1FohC,GAAarmB,EAAW,CACpBS,EAAQ,EAAGmwB,EAAAA,GACXnwB,EAAQ,EAAGowB,EAAAA,IACXpwB,EAAQ,EAAGqwB,EAAAA,KACZzK,IACH,IACM0K,GAAc,SAAAC,IAAA7sC,EAAAA,EAAAA,GAAA4sC,EAAAC,GAAA,IAAAp4B,GAAAvU,EAAAA,EAAAA,GAAA0sC,GAChB,SAAAA,IAAc,OAAArsC,EAAAA,EAAAA,GAAA,KAAAqsC,GAAAn4B,EAAAjU,KAAA,KACJ,CACFkZ,GAAI,gCACJsM,MAAOoO,EAAAA,GAAa,gCAAiC,yBACrDnO,MAAO,wBACPE,aAAc2mB,EAAAA,GAAerzB,IAAI,kBACjCszB,OAAQ,CACJC,OAAQ,KACRC,QAAS,GACTC,OAAQ,MAGpB,CAIC,OAJAtsC,EAAAA,EAAAA,GAAAgsC,EAAA,EAAA/rC,IAAA,MAAAC,MACD,SAAIulB,EAAUtN,GACV,IAAMopB,EAAagL,GAAsB9mB,GAC1B,OAAf8b,QAAsC,IAAfA,GAAiCA,EAAWiL,gBACvE,KAACR,CAAA,CAjBe,CAASS,EAAAA,IAmBvBC,GAAc,SAAAC,IAAAvtC,EAAAA,EAAAA,GAAAstC,EAAAC,GAAA,IAAAr4B,GAAAhV,EAAAA,EAAAA,GAAAotC,GAChB,SAAAA,IAAc,OAAA/sC,EAAAA,EAAAA,GAAA,KAAA+sC,GAAAp4B,EAAA1U,KAAA,KACJ,CACFkZ,GAAI,gCACJsM,MAAOoO,EAAAA,GAAa,gCAAiC,6BACrDnO,MAAO,4BACPE,aAAc2mB,EAAAA,GAAerzB,IAAI,kBACjCszB,OAAQ,CACJC,OAAQ,KACRC,QAAS,KACTC,OAAQ,MAGpB,CAIC,OAJAtsC,EAAAA,EAAAA,GAAA0sC,EAAA,EAAAzsC,IAAA,MAAAC,MACD,SAAIulB,EAAUtN,GACV,IAAMopB,EAAagL,GAAsB9mB,GAC1B,OAAf8b,QAAsC,IAAfA,GAAiCA,EAAWqL,gBACvE,KAACF,CAAA,CAjBe,CAASD,EAAAA,IAmB7B,SAASF,GAAsB9mB,GAC3B,IAAI9O,EACE4G,EAAoBkI,EAASpgB,IAAI2wB,EAAAA,GACjC6W,EAActvB,EAAkBuvB,kBAChCC,EAAuE,QAAnDp2B,EAAK4G,EAAkByvB,8BAA2C,IAAPr2B,EAAgBA,EAAK4G,EAAkB0vB,sBAC5H,IAAKF,EACD,OAAO,KAEX,IAAK,IAAIlqC,EAAI,EAAGC,EAAM+pC,EAAYjqC,OAAQC,EAAIC,EAAKD,IAAK,CACpD,IAAM0+B,EAAasL,EAAYhqC,GAC/B,GAAI0+B,EAAWuB,oBAAoB9R,UAAY+b,EAAiB/b,SAAWuQ,EAAW8D,oBAAoBrU,UAAY+b,EAAiB/b,QACnI,OAAOuQ,CAEf,CACA,OAAO,IACX,EACA2L,EAAAA,EAAAA,IAAqBlB,KACrBkB,EAAAA,EAAAA,IAAqBR,I,4BCrtBjB7wB,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnc,GAAS,IAAMoc,EAAKL,EAAUM,KAAKrc,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC1F,SAASiU,EAAStc,GAAS,IAAMoc,EAAKL,EAAiB,MAAE/b,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC7F,SAAS+T,EAAK5Z,GAJlB,IAAexC,EAIawC,EAAOiW,KAAOwD,EAAQzZ,EAAOxC,QAJ1CA,EAIyDwC,EAAOxC,MAJhDA,aAAiB8b,EAAI9b,EAAQ,IAAI8b,GAAE,SAAUG,GAAWA,EAAQjc,EAAQ,KAIjBuc,KAAKJ,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUS,MAAMZ,EAASC,GAAc,KAAKQ,OAClE,GACJ,EASa4wB,GAAgB,SAAAz1B,IAAAtY,EAAAA,EAAAA,GAAA+tC,EAAAz1B,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAA6tC,GAezB,SAAAA,EAAYC,EAAaC,EAAgBl1B,EAAQstB,EAAM6H,EAAqBC,GAAmB,IAAA7tC,GAAAC,EAAAA,EAAAA,GAAA,KAAAwtC,IAC3FztC,EAAAL,EAAAO,KAAA,OACKwtC,YAAcA,EACnB1tC,EAAK2tC,eAAiBA,EACtB3tC,EAAKyY,OAASA,EACdzY,EAAK+lC,KAAOA,EACZ/lC,EAAK4tC,oBAAsBA,EAC3B5tC,EAAK6tC,kBAAoBA,EACzB7tC,EAAK8tC,aAAc,EAEnB9tC,EAAK2tC,eAAerD,MAAMyD,OAAS,KACnC/tC,EAAKguC,aAAejhC,SAASC,cAAc,OAC3ChN,EAAKguC,aAAa5X,UAAYqM,EAAAA,EAAUC,YAAYpB,EAAAA,EAAQ2M,WAAa,mBACzEjuC,EAAKguC,aAAa1D,MAAMzpC,SAAW,WACnC,IAAMymC,EAAa7uB,EAAOmb,UAAU,IAC9Bsa,EAAWz1B,EAAOkhB,WAAWwU,SACnCnuC,EAAKguC,aAAa1D,MAAM8D,MAAQ,MAChCpuC,EAAKguC,aAAa1D,MAAM+D,WAAa,SACrCruC,EAAKguC,aAAa1D,MAAMroC,OAAS,GAAHc,OAAMukC,EAAU,MAC9CtnC,EAAKguC,aAAa1D,MAAMhD,WAAa,GAAHvkC,OAAMukC,EAAU,MAClDtnC,EAAK2tC,eAAe5Y,YAAY/0B,EAAKguC,cACrC,IAAMM,EAAU,GACVC,EAA4C,IAA/BxI,EAAKsC,sBAExBiG,EAAQ97B,KAAK,IAAIgwB,EAAAA,GAAO,oCAAqC+L,EACtDxI,EAAKkC,sBAAwBlC,EAAKoC,wBAC/BrU,EAAAA,GAAa,+CAAgD,sBAC7DA,EAAAA,GAAa,sDAAuD,qBACvEiS,EAAKkC,sBAAwBlC,EAAKoC,wBAC/BrU,EAAAA,GAAa,+CAAgD,sBAC7DA,EAAAA,GAAa,sDAAuD,0BAAuB1zB,GAAW,GAAM,kBAAM+b,IAASvK,EAAAA,EAAAA,GAAA5R,QAAO,OAAQ,GAAM4mB,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAArmB,EAAA+tC,EAAA,OAAA5nB,EAAAA,EAAAA,KAAAG,MAAA,SAAAjV,GAAA,cAAAA,EAAAkV,KAAAlV,EAAA+K,MAAA,OAGxJ,OAFMpc,EAAQ,IAAIypB,GAAAA,EAAM6b,EAAKgC,wBAAyB,EAAGhC,EAAKkC,sBAAwB,EAAG,GACnFuG,EAAczI,EAAKL,cAAc+I,gBAAgBhuC,GAAMqR,EAAA+K,KAAA,EACvDlc,KAAKktC,kBAAkBa,UAAUF,GAAY,wBAAA18B,EAAAsV,OAAA,GAAAN,EAAA,SACrD,KACF,IAAI6nB,EAA0B,EAC1BC,OAAiBxuC,EACjB2lC,EAAKkC,sBAAwBlC,EAAKoC,0BAClCyG,EAAiB,IAAIpM,EAAAA,GAAO,wCAAyC+L,EAC/Dza,EAAAA,GAAa,8CAA+C,0BAA2BiS,EAAKgC,yBAC5FjU,EAAAA,GAAa,8CAA+C,0BAA2BiS,EAAKgC,8BAA0B3nC,GAAW,GAAM,kBAAM+b,IAASvK,EAAAA,EAAAA,GAAA5R,QAAO,OAAQ,GAAM4mB,EAAAA,EAAAA,KAAAC,MAAE,SAAAgoB,IAAA,IAAA/D,EAAAgE,EAAA,OAAAloB,EAAAA,EAAAA,KAAAG,MAAA,SAAAgoB,GAAA,cAAAA,EAAA/nB,KAAA+nB,EAAAlyB,MAAA,OAClE,GACzF,MADdiuB,EAAc/E,EAAKL,cAAchb,eAAeqb,EAAKgC,wBAA0B4G,IAC/D,CAAAI,EAAAlyB,KAAA,QAGlB,OADMiyB,EAAM/I,EAAKL,cAAcsJ,uBAAsBD,EAAAlyB,KAAA,EAC/Clc,KAAKktC,kBAAkBa,UAAkB,IAARI,EAAuC,KAAO,QAAO,OAAAC,EAAAlyB,KAAA,eAG5F,OAH4FkyB,EAAAlyB,KAAA,EAGtFlc,KAAKktC,kBAAkBa,UAAU5D,GAAY,wBAAAiE,EAAA3nB,OAAA,GAAAynB,EAAA,SAEzD,IACFP,EAAQ97B,KAAKo8B,IAEAn2B,EAAOmb,UAAU,KAE9B0a,EAAQ97B,KAAK,IAAIgwB,EAAAA,GAAO,2BAA4B1O,EAAAA,GAAa,iCAAkC,2BAAuB1zB,GAAW,GAAM,kBAAM+b,IAASvK,EAAAA,EAAAA,GAAA5R,QAAO,OAAQ,GAAM4mB,EAAAA,EAAAA,KAAAC,MAAE,SAAAooB,IAAA,IAAAxuC,EAAA+tC,EAAAjpC,EAAA2pC,EAAA,OAAAtoB,EAAAA,EAAAA,KAAAG,MAAA,SAAAooB,GAAA,cAAAA,EAAAnoB,KAAAmoB,EAAAtyB,MAAA,OACvKpc,EAAQ,IAAIypB,GAAAA,EAAM6b,EAAKgC,wBAAyB,EAAGhC,EAAKkC,sBAAuBlC,EAAKL,cAAc0J,iBAAiBrJ,EAAKkC,wBACxHuG,EAAczI,EAAKL,cAAc+I,gBAAgBhuC,GACpB,IAA/BslC,EAAKsC,uBAEC9iC,EAASkT,EAAOkhB,WAAWyV,iBAAiBrJ,EAAKoC,yBACvD1vB,EAAOkX,aAAa,aAAc,CAC9B,CACIlvB,MAAO,IAAIypB,GAAAA,EAAM6b,EAAKoC,wBAAyB5iC,EAAQwgC,EAAKoC,wBAAyB5iC,GACrFtB,KAAMiqC,EAAWM,OAKnBjpC,EAASkT,EAAOkhB,WAAWyV,iBAAiBrJ,EAAKsC,uBACvD5vB,EAAOkX,aAAa,aAAc,CAC9B,CACIlvB,MAAO,IAAIypB,GAAAA,EAAM6b,EAAKoC,wBAAyB,EAAGpC,EAAKsC,sBAAuB9iC,GAC9EtB,KAAMuqC,MAGjB,wBAAAW,EAAA/nB,OAAA,GAAA6nB,EAAA,IACH,KAEN,IAAMI,EAAe52B,EAAOmb,UAAU,OAAyC0b,GAAAA,GACzEC,EAAkB,SAAC3gC,EAAG4gC,GACxB,IAAIv4B,EACJjX,EAAK4tC,oBAAoB2B,gBAAgB,CACrCE,iBAAkBJ,GAA8C,QAA9Bp4B,EAAKwB,EAAO9K,oBAAiC,IAAPsJ,EAAgBA,OAAiB7W,EACzGsvC,UAAW,WACP,MAAO,CACH9gC,EAAAA,EACA4gC,EAAAA,EAER,EACAzhB,WAAY,WAOR,OANI6gB,IACAA,EAAelpB,MACX6oB,EACMza,EAAAA,GAAa,8CAA+C,0BAA2BiS,EAAKgC,wBAA0B4G,GACtH7a,EAAAA,GAAa,8CAA+C,0BAA2BiS,EAAKgC,wBAA0B4G,IAE7HL,CACX,EACAqB,qBAAqB,GAE7B,EAkCI,OAjCJ3vC,EAAKoY,UAAU+N,EAAIkd,8BAA8BrjC,EAAKguC,aAAc,aAAa,SAAAnlC,GAC7E,IAAA+mC,EAAwBzpB,EAAI0pB,uBAAuB7vC,EAAKguC,cAAhDrsC,EAAGiuC,EAAHjuC,IAAKM,EAAM2tC,EAAN3tC,OACP6tC,EAAMjtC,KAAKktC,MAAMzI,EAAa,GACpCz+B,EAAEy6B,iBACFiM,EAAgB1mC,EAAEmnC,KAAMruC,EAAMM,EAAS6tC,EAC3C,KACA9vC,EAAKoY,UAAUK,EAAOjC,aAAY,SAAC3N,GACT,IAAlBA,EAAEyM,OAAOhR,MAAwE,IAAlBuE,EAAEyM,OAAOhR,KACrDuE,EAAEyM,OAAOmC,OAAOE,aAChB3X,EAAK0tC,aACpB1tC,EAAKquC,YAAa,EAClBM,EAA0B3uC,EAAKiwC,yBAAyBjwC,EAAK2tC,eAAgB9kC,EAAEsO,MAAM4Z,aAAaye,EAAGlI,IAGrGtnC,EAAKquC,YAAa,EAItBruC,EAAKquC,YAAa,CAE1B,KACAruC,EAAKoY,UAAUK,EAAO/B,aAAY,SAAC7N,GAC1BA,EAAEsO,MAAM+4B,cAGS,IAAlBrnC,EAAEyM,OAAOhR,MAAwE,IAAlBuE,EAAEyM,OAAOhR,MACrDuE,EAAEyM,OAAOmC,OAAOE,aAChB3X,EAAK0tC,cACpB7kC,EAAEsO,MAAMmsB,iBACRqL,EAA0B3uC,EAAKiwC,yBAAyBjwC,EAAK2tC,eAAgB9kC,EAAEsO,MAAM4Z,aAAaye,EAAGlI,GACrGiI,EAAgB1mC,EAAEsO,MAAM64B,KAAMnnC,EAAEsO,MAAMg5B,KAAO7I,IAGzD,KAAItnC,CACR,CAiBC,OAjBAM,EAAAA,EAAAA,GAAAmtC,EAAA,EAAAltC,IAAA,aAAAoF,IAtJD,WACI,OAAOhF,KAAKmtC,WAChB,EAACv0B,IACD,SAAeu0B,GACPntC,KAAKmtC,cAAgBA,IACrBntC,KAAKmtC,YAAcA,EAEfntC,KAAKqtC,aAAa1D,MAAM+D,WADxBP,EACqC,UAGA,SAGjD,GAAC,CAAAvtC,IAAA,2BAAAC,MA0ID,SAAyB4vC,EAAeZ,EAAGlI,GACvC,IACM+I,EAASb,EADCrpB,EAAI0pB,uBAAuBO,GAAnCzuC,IAEF2uC,EAAmBztC,KAAKktC,MAAMM,EAAS/I,GACvCiJ,EAASD,EAAmBhJ,EAElC,GADA3mC,KAAKqtC,aAAa1D,MAAM3oC,IAAM,GAAHoB,OAAMwtC,EAAM,MACnC5vC,KAAKolC,KAAKyK,eAEV,IADA,IAAIC,EAAM,EACDttC,EAAI,EAAGA,EAAIxC,KAAKolC,KAAKyK,eAAettC,OAAQC,IAEjD,GAAImtC,GADJG,GAAO9vC,KAAKolC,KAAKyK,eAAertC,IAE5B,OAAOA,EAInB,OAAOmtC,CACX,KAAC7C,CAAA,CAxKwB,CAASnyB,EAAAA,I,4DCjBlCC,GAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,GAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EACIE,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUnc,GAAS,IAAMoc,EAAKL,EAAUM,KAAKrc,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC1F,SAASiU,EAAStc,GAAS,IAAMoc,EAAKL,EAAiB,MAAE/b,GAAS,CAAE,MAAOqI,GAAK6T,EAAO7T,EAAI,CAAE,CAC7F,SAAS+T,EAAK5Z,GAJlB,IAAexC,EAIawC,EAAOiW,KAAOwD,EAAQzZ,EAAOxC,QAJ1CA,EAIyDwC,EAAOxC,MAJhDA,aAAiB8b,EAAI9b,EAAQ,IAAI8b,GAAE,SAAUG,GAAWA,EAAQjc,EAAQ,KAIjBuc,KAAKJ,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUS,MAAMZ,EAASC,GAAc,KAAKQ,OAClE,GACJ,EAOW6zB,GAA+B,WACtC,SAAAA,EAAYhrC,EAASirC,EAAqBC,IAAkB3wC,EAAAA,EAAAA,GAAA,KAAAywC,GACxD/vC,KAAKgwC,oBAAsBA,EAC3BhwC,KAAKiwC,iBAAmBA,EACxBjwC,KAAKkwC,wBAA0B,IAAIpyB,EAAAA,GACnC9d,KAAKijB,YAAcjjB,KAAKkwC,wBAAwB15B,MAChDxW,KAAKmwC,cAAgB,WACrBnwC,KAAKowC,0CAAuC3wC,EAC5CO,KAAKqwC,WAAWtrC,EACpB,CAqDC,OArDApF,EAAAA,EAAAA,GAAAowC,EAAA,EAAAnwC,IAAA,UAAAC,MACD,WACI,IAAIyW,EACiD,QAApDA,EAAKtW,KAAKowC,4CAAyD,IAAP95B,GAAyBA,EAAG5E,SAC7F,GAAC,CAAA9R,IAAA,cAAAC,MACD,SAAYywC,EAAUC,EAAUxrC,GAC5B,IAAIuR,EACJ,OAAOkF,GAAUxb,UAAM,OAAQ,GAAMimB,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAqqB,EAAAnuC,EAAAouC,EAAA,OAAAxqB,EAAAA,EAAAA,KAAAG,MAAA,SAAAjV,GAAA,cAAAA,EAAAkV,KAAAlV,EAAA+K,MAAA,UACD,kBAAvBlc,KAAKmwC,cAA0B,CAAAh/B,EAAA+K,KAAA,eAAA/K,EAAAmV,OAAA,SAC/BtmB,KAAKmwC,cAAcO,YAAYJ,EAAUC,EAAUxrC,IAAQ,UAGtC,IAA5BurC,EAASle,gBAAyD,IAAjCke,EAAS7B,iBAAiB,GAAQ,CAAAt9B,EAAA+K,KAAA,eAAA/K,EAAAmV,OAAA,SAC5D,CACHqqB,QAAS,CACL,IAAIC,GAAAA,GAAiB,IAAIC,GAAAA,EAAU,EAAG,GAAI,IAAIA,GAAAA,EAAU,EAAGN,EAASne,gBAAiB,CACjF,IAAI0e,GAAAA,GAAaR,EAASS,oBAAqBR,EAASQ,wBAGhEC,WAAW,EACXC,WAAW,IACd,OAGU,OADTT,EAAKU,GAAAA,EAAU1e,QAAO,GAAKrhB,EAAA+K,KAAA,EACZlc,KAAKgwC,oBAAoBU,YAAYJ,EAAS7nB,IAAK8nB,EAAS9nB,IAAK1jB,EAAS/E,KAAKmwC,eAAc,OAK/G,GALG9tC,EAAM8O,EAAAggC,KACNV,EAASD,EAAGY,UAClBpxC,KAAKiwC,iBAAiBoB,WAAW,yBAA0B,CACvDZ,OAAAA,EACAa,SAAsF,QAA3Eh7B,EAAgB,OAAXjU,QAA8B,IAAXA,OAAoB,EAASA,EAAO4uC,iBAA8B,IAAP36B,GAAgBA,IAE7GjU,EAAQ,CAAF8O,EAAA+K,KAAA,eACD,IAAIvD,MAAM,4BAA2B,eAAAxH,EAAAmV,OAAA,SAExCjkB,GAAM,yBAAA8O,EAAAsV,OAAA,GAAAN,EAAA,SAErB,GAAC,CAAAvmB,IAAA,aAAAC,MACD,SAAW4nB,GAAY,IACfnR,EADejX,EAAA,KAEfkyC,GAAY,EACZ9pB,EAAW0oB,eACPnwC,KAAKmwC,gBAAkB1oB,EAAW0oB,gBACmB,QAApD75B,EAAKtW,KAAKowC,4CAAyD,IAAP95B,GAAyBA,EAAG5E,UACzF1R,KAAKowC,0CAAuC3wC,EAC5CO,KAAKmwC,cAAgB1oB,EAAW0oB,cACQ,kBAA7B1oB,EAAW0oB,gBAClBnwC,KAAKowC,qCAAuC3oB,EAAW0oB,cAAcltB,aAAY,kBAAM5jB,EAAK6wC,wBAAwBhtB,MAAM,KAE9HquB,GAAY,GAGhBA,GACAvxC,KAAKkwC,wBAAwBhtB,MAErC,KAAC6sB,CAAA,CA9DqC,GAgE1CA,GAAkCn1B,GAAW,CACzCS,GAAQ,EAAGm2B,GAAAA,GACXn2B,GAAQ,EAAGo2B,GAAAA,IACZ1B,I,4KC3FCn1B,GAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,GAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EA+CMo2B,GAAiB,WACnB,SAAAA,EAAYzE,EAAqBC,IAAmB5tC,EAAAA,EAAAA,GAAA,KAAAoyC,GAChD1xC,KAAKitC,oBAAsBA,EAC3BjtC,KAAKktC,kBAAoBA,EACzBltC,KAAK2xC,OAAS,GACd3xC,KAAK4xC,mBAAqB,GAC1B5xC,KAAK6xC,UAAY,CAAC,EAClB7xC,KAAK8xC,aAAe,EACxB,CAwDC,OAxDAnyC,EAAAA,EAAAA,GAAA+xC,EAAA,EAAA9xC,IAAA,sBAAAC,MACD,SAAoBkyC,GAAc,IAAA1yC,EAAA,KAC9B,OAAO0yC,EAAa1/B,QAAO,SAAC2/B,GAAC,OAAM3yC,EAAKwyC,UAAU1+B,OAAO6+B,EAAEv5B,IAAI,GACnE,GAAC,CAAA7Y,IAAA,QAAAC,MACD,SAAMiY,GAAQ,IAAArE,EAAA,KAENzT,KAAK2xC,OAAOpvC,OAAS,GACrBuV,EAAOm6B,iBAAgB,SAACC,GAAuB,IACXj6B,EADWC,GAAAC,EAAAA,EAAAA,GACtB1E,EAAKk+B,QAAM,IAAhC,IAAAz5B,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAAkC,KAAvB65B,EAAMl6B,EAAApY,MACbqyC,EAAmBE,WAAWD,EAClC,CAAC,OAAAt5B,GAAAX,EAAAhQ,EAAA2Q,EAAA,SAAAX,EAAAY,GAAA,CACL,IAEJ9Y,KAAK2xC,OAAS,GACd3xC,KAAK6xC,UAAY,CAAC,EAElB/5B,EAAOwX,mBAAkB,SAACQ,GACtBrc,EAAKq+B,aAAehiB,EAAeF,iBAAiBnc,EAAKq+B,aAAc,GAC3E,GACJ,GAAC,CAAAlyC,IAAA,QAAAC,MACD,SAAMiY,EAAQu6B,EAAe1iB,EAAgB2iB,GAAoB,IAAAp+B,EAAA,KACvDq+B,EAAcD,EAAqBE,EAAAA,EAAwBC,QAAQ36B,GAAU,KAEnFA,EAAOm6B,iBAAgB,SAACC,GACpB,IAAI57B,EAC4B2C,EADzBE,GAAAhB,EAAAA,EAAAA,GACcjE,EAAKy9B,QAAM,IAAhC,IAAAx4B,EAAAf,MAAAa,EAAAE,EAAAd,KAAAC,MAAkC,KAAvB65B,EAAMl5B,EAAApZ,MACbqyC,EAAmBE,WAAWD,EAClC,CAAC,OAAAt5B,GAAAM,EAAAjR,EAAA2Q,EAAA,SAAAM,EAAAL,GAAA,KACqDU,EADrDC,GAAAtB,EAAAA,EAAAA,GAC8BjE,EAAK09B,oBAAkB,IAAtD,IAAAn4B,EAAArB,MAAAoB,EAAAC,EAAApB,KAAAC,MAAwD,CAA7BkB,EAAA3Z,MACN6R,SACrB,CAAC,OAAAmH,GAAAY,EAAAvR,EAAA2Q,EAAA,SAAAY,EAAAX,GAAA,CACD5E,EAAKy9B,OAAS,GACdz9B,EAAK29B,UAAY,CAAC,EAClB39B,EAAK09B,mBAAqB,GAC1B,IAAK,IAAIpvC,EAAI,EAAGD,EAASotB,EAAe+iB,MAAMnwC,OAAQC,EAAID,EAAQC,IAAK,CACnE,IAAMmwC,EAAWhjB,EAAe+iB,MAAMlwC,GACtCmwC,EAASC,mBAAoB,EAC7B,IAAMT,EAASD,EAAmBW,QAAQF,GAC1Cz+B,EAAKy9B,OAAO9/B,KAAKsgC,GACjBj+B,EAAK29B,UAAU1+B,OAAOg/B,KAAW,EAC7BxiB,EAAe+iB,MAAMlwC,GAAG4iC,MAAQuN,EAASlD,gBACzCkD,EAASC,mBAAoB,EACwF,KAAxE,QAAvCt8B,EAAKqZ,EAAe+iB,MAAMlwC,GAAG4iC,YAAyB,IAAP9uB,OAAgB,EAASA,EAAGyuB,cAAc+N,mBAE3F5+B,EAAK09B,mBAAmB//B,KAAK,IAAIi7B,GAAiBqF,EAAQQ,EAASlD,cAAe33B,EAAQ6X,EAAe+iB,MAAMlwC,GAAG4iC,KAAMlxB,EAAK+4B,oBAAqB/4B,EAAKg5B,oBAGnK,CACJ,IACgB,OAAhBqF,QAAwC,IAAhBA,GAAkCA,EAAYQ,QAAQj7B,GAE9EA,EAAOwX,mBAAkB,SAACQ,GACtB5b,EAAK49B,aAAehiB,EAAeF,iBAAiB1b,EAAK49B,aAAcniB,EAAeR,YAC1F,IAEkB,OAAlBkjB,QAA4C,IAAlBA,GAAoCA,EAAcW,SAASrjB,EAAesjB,cACxG,KAACvB,CAAA,CAhEkB,GAkEnBwB,GAAiB,EACfC,IAAiBzS,EAAAA,EAAAA,IAAa,cAAeC,EAAAA,EAAQC,IAAKzN,EAAAA,GAAa,iBAAkB,oDACzFigB,IAAiB1S,EAAAA,EAAAA,IAAa,cAAeC,EAAAA,EAAQG,OAAQ3N,EAAAA,GAAa,iBAAkB,qDAC5FkgB,IAAW1iC,EAAAA,EAAAA,GAAyB,mBAAoB,CAAEvB,WAAY,SAAAvP,GAAK,OAAIA,CAAK,IACpFyzC,GAAoBngB,EAAAA,GAAa,2BAA4B,uCACxDogB,GAAgB,SAAAl8B,IAAAtY,EAAAA,EAAAA,GAAAw0C,EAAAl8B,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAAs0C,GACvB,SAAAA,EAAYx2B,EAAYhY,EAASkY,EAAyBu2B,EAAkBp2B,EAAmBpF,EAAsBkF,EAAmBG,EAAcC,EAAqBm2B,EAAoBC,GAAwB,IAAAnf,GAAAj1B,EAAAA,EAAAA,GAAA,KAAAi0C,IACnNhf,EAAAv1B,EAAAO,KAAA,OACKm0C,uBAAyBA,EAC9Bnf,EAAK1W,cAAgB0W,EAAK9c,UAAU,IAAIqG,EAAAA,IACxCyW,EAAKxW,aAAewW,EAAK1W,cAAcrH,MACvC+d,EAAKxV,kBAAoBwV,EAAK9c,UAAU,IAAIqG,EAAAA,IAC5CyW,EAAKvV,iBAAmBuV,EAAKxV,kBAAkBvI,MAC/C+d,EAAKof,iBAAmBpf,EAAK9c,UAAU,IAAIqG,EAAAA,IAC3CyW,EAAK8N,gBAAkB9N,EAAKof,iBAAiBn9B,MAC7C+d,EAAK7S,wBAA0B6S,EAAK9c,UAAU,IAAIqG,EAAAA,IAClDyW,EAAKqf,qBAAuB,KAC5Brf,EAAKsf,qBAAuB,KAC5B32B,EAAkB42B,uBAClBvf,EAAKwf,sBAAwBxf,EAAK9c,UAAUO,EAAqBuC,eAAew1B,GAAiChrC,IACjHwvB,EAAK9c,UAAU8c,EAAKwf,sBAAsB9wB,aAAY,SAAA/a,GAAC,OAAIqsB,EAAKyf,6BAA6B,KAC7Fzf,EAAKjR,mBAAqBpG,EAC1BqX,EAAKpR,mBAAqBoR,EAAK9c,UAAU2F,EAAkBgG,aAAarG,IACxEwX,EAAKhd,sBAAwBS,EAAqB2L,YAAY,IAAIC,GAAAA,EAAkB,CAACC,EAAAA,GAAoB0Q,EAAKpR,sBAC9GoR,EAAKpR,mBAAmB2T,UAAU,kBAAkB,GACpDvC,EAAK/Q,cAAgBnG,EACrBkX,EAAKlR,qBAAuB/F,EAC5BiX,EAAK7R,MAASwwB,GACd3e,EAAK0f,OAAS,EACd1f,EAAK2f,sBAAwB,KAC7B3f,EAAKhS,YAAcxF,EACnBhY,EAAUA,GAAW,CAAC,EACtBwvB,EAAKvX,SAAWm3B,GAA0BpvC,EAAS,CAC/CqvC,yBAAyB,EACzBC,sBAAuB,GACvBC,kBAAkB,EAClBC,wBAAwB,EACxBC,mBAAoB,IACpBC,YAAa,GACbC,sBAAsB,EACtBC,kBAAkB,EAClBC,kBAAkB,EAClBC,cAAc,EACdC,qBAAqB,EACrBC,aAAc,UACd5E,cAAe,WACf/M,sBAAsB,EACtB4R,aAAc,CACVC,0BAA0B,KAGlC1gB,EAAK2gB,wBAA0Ble,GAAAA,EAAkBme,qBAAqBje,OAAO3C,EAAKpR,oBAClFoR,EAAK2gB,wBAAwBt8B,IAA0C,qBAA/B7T,EAAQqwC,oBAAqCrwC,EAAQqwC,oBAC7F7gB,EAAK8gB,yBAA2B9gB,EAAK9c,UAAU,IAAI69B,EAAAA,IAAiB,kBAAM/gB,EAAKghB,oBAAoB,GAAE,IACrGhhB,EAAKihB,qBAAuBppC,SAASC,cAAc,OACnDkoB,EAAKihB,qBAAqB/f,UAAY8d,EAAiBkC,cAAclhB,EAAK/Q,cAAckR,gBAAiBH,EAAKvX,SAASs3B,kBACvH/f,EAAKihB,qBAAqB7L,MAAMzpC,SAAW,WAC3Cq0B,EAAKihB,qBAAqB7L,MAAMroC,OAAS,OACzCizB,EAAKhS,YAAY6R,YAAYG,EAAKihB,sBAClCjhB,EAAKmhB,6BAA8BvpC,EAAAA,EAAAA,GAAkBC,SAASC,cAAc,QAC5EkoB,EAAKmhB,4BAA4BppC,aAAa,gBAC9CioB,EAAKmhB,4BAA4BnpC,YAAY,YAC7CgoB,EAAKohB,oBAAsBvpC,SAASC,cAAc,OAClDkoB,EAAKohB,oBAAoBlgB,UAAY,eACrClB,EAAKohB,oBAAoBhM,MAAMzpC,SAAW,WAC1Cq0B,EAAKohB,oBAAoBvhB,YAAYG,EAAKmhB,4BAA4B3pC,SACtEwoB,EAAK9c,UAAU+N,EAAIkd,8BAA8BnO,EAAKohB,oBAAqBnwB,EAAIowB,UAAUC,cAAc,SAAC3tC,GACpGqsB,EAAKuhB,gBAAgBzlB,qCAAqCnoB,EAC9D,KACAqsB,EAAK9c,UAAU+N,EAAIuwB,sBAAsBxhB,EAAKohB,oBAAqBnwB,EAAIowB,UAAUI,aAAa,SAAC9tC,GAC3FqsB,EAAKuhB,gBAAgBxlB,kCAAkCpoB,EAC3D,GAAG,CAAE+tC,SAAS,KACV1hB,EAAKvX,SAAS83B,qBACdvgB,EAAKihB,qBAAqBphB,YAAYG,EAAKohB,qBAG/CphB,EAAK2hB,iBAAmB9pC,SAASC,cAAc,OAC/CkoB,EAAK2hB,iBAAiBzgB,UAAY,kBAClClB,EAAK2hB,iBAAiBvM,MAAMzpC,SAAW,WACvCq0B,EAAK2hB,iBAAiBvM,MAAMroC,OAAS,OACrCizB,EAAKihB,qBAAqBphB,YAAYG,EAAK2hB,kBAE3C3hB,EAAK4hB,iBAAmB/pC,SAASC,cAAc,OAC/CkoB,EAAK4hB,iBAAiB1gB,UAAY,kBAClClB,EAAK4hB,iBAAiBxM,MAAMzpC,SAAW,WACvCq0B,EAAK4hB,iBAAiBxM,MAAMroC,OAAS,OACrCizB,EAAKihB,qBAAqBphB,YAAYG,EAAK4hB,kBAC3C5hB,EAAK6hB,gCAAkC,EACvC7hB,EAAK8hB,6BAA8B,EACnC9hB,EAAK+hB,sBAAwB,EAC7B/hB,EAAKgiB,qBAAuB,IAAI7E,GAAkB+B,EAAoBD,GACtEjf,EAAKiiB,qBAAuB,IAAI9E,GAAkB+B,EAAoBD,GACtEjf,EAAKiN,YAAa,EAClBjN,EAAKkiB,wBAAyB,EAC9BliB,EAAKmiB,qBAAuBniB,EAAK9c,UAAU,IAAIk/B,EAAAA,EAAoBpiB,EAAKihB,qBAAsBzwC,EAAQwrB,YACtGgE,EAAK9c,UAAU8c,EAAKmiB,qBAAqBzzB,aAAY,kBAAMsR,EAAKqiB,4BAA4B,KACxF7xC,EAAQ8xC,iBACRtiB,EAAKmiB,qBAAqBI,iBAE9BviB,EAAKwiB,uBAAyB,KAC9BxiB,EAAKyiB,gBAAkBziB,EAAK0iB,0BAA0BlyC,EAASkY,EAAwBi6B,gBAAkB,CAAC,GAC1G3iB,EAAKuhB,gBAAkBvhB,EAAK4iB,2BAA2BpyC,EAASkY,EAAwBm6B,gBAAkB,CAAC,GAC3G7iB,EAAK8iB,uBAAyB,KAC9B9iB,EAAK+iB,uBAAyB,KAC9B/iB,EAAKgjB,YAAcv/B,EAAqBuC,eAAe0mB,IAAUhwB,EAAAA,EAAAA,GAAAsjB,IACjEA,EAAKihB,qBAAqBphB,YAAYG,EAAKgjB,YAAYxrC,QAAQA,SAC/DwoB,EAAKihB,qBAAqBphB,YAAYG,EAAKgjB,YAAY9V,OAAO11B,SAC9DwoB,EAAKihB,qBAAqBphB,YAAYG,EAAKgjB,YAAY7V,mBAAmB31B,SACtEwoB,EAAKvX,SAASs3B,iBACd/f,EAAKijB,aAAa,IAAIC,GAA2BljB,EAAKmjB,oBAAqBnjB,EAAKvX,SAASo3B,wBAAyB7f,EAAKvX,SAASq3B,wBAGhI9f,EAAKijB,aAAa,IAAIG,GAAuBpjB,EAAKmjB,oBAAqBnjB,EAAKvX,SAASo3B,0BAEzF7f,EAAK9c,UAAU4F,EAAau6B,uBAAsB,SAAAC,GAC1CtjB,EAAKujB,WAAavjB,EAAKujB,UAAUC,YAAYF,IAC7CtjB,EAAK8gB,yBAAyB2C,WAElCzjB,EAAKihB,qBAAqB/f,UAAY8d,EAAiBkC,cAAclhB,EAAK/Q,cAAckR,gBAAiBH,EAAKvX,SAASs3B,iBAC3H,KACA,IACgCx6B,EAD1B/B,EAAgBwM,EAAAA,GAAyB0zB,6BAA6Bh+B,GAAA9B,EAAAA,EAAAA,GACzDJ,GAAa,IAAhC,IAAAkC,EAAA7B,MAAA0B,EAAAG,EAAA5B,KAAAC,MAAkC,KAAvBC,EAAIuB,EAAAja,MACX,IACI00B,EAAK9c,UAAUO,EAAqBuC,eAAehC,EAAKiC,MAAIvJ,EAAAA,EAAAA,GAAAsjB,IAChE,CACA,MAAO1b,IACHH,EAAAA,EAAAA,IAAkBG,EACtB,CACJ,CAAC,OAAAA,GAAAoB,EAAA/R,EAAA2Q,EAAA,SAAAoB,EAAAnB,GAAA,CAC2C,OAA5Cyb,EAAKjR,mBAAmB40B,eAAajnC,EAAAA,EAAAA,GAAAsjB,IAAOA,CAChD,CAiiBC,OAjiBA50B,EAAAA,EAAAA,GAAA4zC,EAAA,EAAA3zC,IAAA,YAAAC,MACD,SAAUs4C,GACFn4C,KAAKi0C,SAAWkE,IAGpBn4C,KAAKi0C,OAASkE,EACVn4C,KAAKk0C,wBACLl0C,KAAKk0C,sBAAsB57B,OAC3BtY,KAAKk0C,sBAAwB,MAEb,IAAhBl0C,KAAKi0C,SACLj0C,KAAKk0C,sBAAwBl0C,KAAK0zC,uBAAuB0E,MAAK,EAAM,MAE5E,GAAC,CAAAx4C,IAAA,iBAAAC,MACD,WACIG,KAAKu3C,YAAYr7B,MACrB,GAAC,CAAAtc,IAAA,iBAAAC,MACD,WACIG,KAAKu3C,YAAYlxB,MACrB,GAAC,CAAAzmB,IAAA,yBAAAC,MASD,WACQG,KAAKq3C,yBACLr3C,KAAK21C,oBAAoB1oC,YAAYjN,KAAKq3C,uBAAuBrqC,cACjEhN,KAAKq3C,uBAAuB3lC,UAC5B1R,KAAKq3C,uBAAyB,MAE9Br3C,KAAKs3C,yBACLt3C,KAAK21C,oBAAoB1oC,YAAYjN,KAAKs3C,uBAAuBtqC,cACjEhN,KAAKs3C,uBAAuB5lC,UAC5B1R,KAAKs3C,uBAAyB,KAEtC,GAAC,CAAA13C,IAAA,wBAAAC,MACD,WACSG,KAAKgd,SAAS83B,sBAGnBuD,EAAOC,IAAIt4C,KAAKq3C,yBAA2Br3C,KAAKs3C,wBAC5Ct3C,KAAKg3C,gBAAgB1uB,aACrBtoB,KAAKq3C,uBAAyBr3C,KAAKg3C,gBAAgB7mB,oBAAoB,8BACvEnwB,KAAK21C,oBAAoBvhB,YAAYp0B,KAAKq3C,uBAAuBrqC,eAEjEhN,KAAK81C,gBAAgBxtB,aACrBtoB,KAAKs3C,uBAAyBt3C,KAAK81C,gBAAgB3lB,oBAAoB,8BACvEnwB,KAAK21C,oBAAoBvhB,YAAYp0B,KAAKs3C,uBAAuBtqC,eAErEhN,KAAKu4C,wBACT,GAAC,CAAA34C,IAAA,4BAAAC,MACD,SAA0BkF,EAASkY,GAAyB,IAAAmZ,EAAA,KAClDte,EAAS9X,KAAKw4C,mBAAmBx4C,KAAKuX,sBAAuBvX,KAAKk2C,iBAAkBl2C,KAAKy4C,8BAA8B1zC,GAAUkY,GACvIjd,KAAKyX,UAAUK,EAAO+J,mBAAkB,SAAC3Z,GACjCkuB,EAAKqgB,yBAGJvuC,EAAEiF,kBAAqBjF,EAAEwwC,mBAAsBxwC,EAAEmM,uBAGtD+hB,EAAKqgB,wBAAyB,EAC9BrgB,EAAK0f,gBAAgBvpB,kBAAkB,CACnCtrB,WAAYiH,EAAEjH,WACdF,UAAWmH,EAAEnH,YAEjBq1B,EAAKqgB,wBAAyB,EAC9BrgB,EAAKuiB,0BACT,KACA34C,KAAKyX,UAAUK,EAAOiK,sBAAqB,WACvCqU,EAAKwiB,qBACT,KACA54C,KAAKyX,UAAUK,EAAOgH,0BAAyB,SAAC5W,GACvC4P,EAAOkhB,aAGR9wB,EAAEuE,WAAW,KACb2pB,EAAKif,yBAAyB2C,WAE9B9vC,EAAEuE,WAAW,OACb2pB,EAAKif,yBAAyBwD,SAC9BziB,EAAKmf,sBAEb,KACAv1C,KAAKyX,UAAUK,EAAOmK,wBAAuB,WACzCmU,EAAKif,yBAAyBwD,SAC9BziB,EAAKmf,oBACT,KACAv1C,KAAKyX,UAAUK,EAAOoG,yBAAwB,WACtCkY,EAAKoL,YACLpL,EAAK4d,6BAEb,KACA,IAAM8E,EAAwB94C,KAAKmjB,mBAAmB2T,UAAU,qBAAsBhf,EAAOihB,kBAa7F,OAZA/4B,KAAKyX,UAAUK,EAAOmI,wBAAuB,kBAAM64B,EAAsBlgC,KAAI,EAAK,KAClF5Y,KAAKyX,UAAUK,EAAOoI,uBAAsB,kBAAM44B,EAAsBlgC,KAAI,EAAM,KAClF5Y,KAAKyX,UAAUK,EAAO6J,wBAAuB,SAAAzZ,GACzC,IAAM9G,EAAQg1B,EAAK4gB,gBAAgB9qB,kBAAoBkK,EAAK0f,gBAAgB5pB,kBAAoBqnB,EAAiBwF,mBAC3Gz3C,EAASY,KAAKsJ,IAAI4qB,EAAK0f,gBAAgB1pB,mBAAoBgK,EAAK4gB,gBAAgB5qB,oBACtFgK,EAAK1U,wBAAwBwB,KAAK,CAC9B81B,cAAe13C,EACfsS,aAAcxS,EACd63C,qBAAsB/wC,EAAE+wC,qBACxBC,oBAAqBhxC,EAAEgxC,qBAE/B,KACOphC,CACX,GAAC,CAAAlY,IAAA,6BAAAC,MACD,SAA2BkF,EAASkY,GAAyB,IAAAwZ,EAAA,KACnD3e,EAAS9X,KAAKw4C,mBAAmBx4C,KAAKuX,sBAAuBvX,KAAKm2C,iBAAkBn2C,KAAKm5C,+BAA+Bp0C,GAAUkY,GACxIjd,KAAKyX,UAAUK,EAAO+J,mBAAkB,SAAC3Z,GACjCuuB,EAAKggB,yBAGJvuC,EAAEiF,kBAAqBjF,EAAEwwC,mBAAsBxwC,EAAEmM,uBAGtDoiB,EAAKggB,wBAAyB,EAC9BhgB,EAAKugB,gBAAgBzqB,kBAAkB,CACnCtrB,WAAYiH,EAAEjH,WACdF,UAAWmH,EAAEnH,YAEjB01B,EAAKggB,wBAAyB,EAC9BhgB,EAAKkiB,0BACT,KACA34C,KAAKyX,UAAUK,EAAOiK,sBAAqB,WACvC0U,EAAKmiB,qBACT,KACA54C,KAAKyX,UAAUK,EAAOgH,0BAAyB,SAAC5W,GACvC4P,EAAOkhB,aAGR9wB,EAAEuE,WAAW,KACbgqB,EAAK4e,yBAAyB2C,WAE9B9vC,EAAEuE,WAAW,OACbgqB,EAAK4e,yBAAyBwD,SAC9BpiB,EAAK8e,sBAEb,KACAv1C,KAAKyX,UAAUK,EAAOmK,wBAAuB,WACzCwU,EAAK4e,yBAAyBwD,SAC9BpiB,EAAK8e,oBACT,KACAv1C,KAAKyX,UAAUK,EAAOoG,yBAAwB,WACtCuY,EAAK+K,YACL/K,EAAKud,6BAEb,KACAh0C,KAAKyX,UAAUK,EAAO0G,yBAAwB,SAACtW,GACvCA,EAAEyhB,SACF8M,EAAK4e,yBAAyB2C,UAEtC,KACA,IAAMoB,EAAyBp5C,KAAKmjB,mBAAmB2T,UAAU,sBAAuBhf,EAAOihB,kBAgC/F,OA/BA/4B,KAAKyX,UAAUK,EAAOmI,wBAAuB,kBAAMm5B,EAAuBxgC,KAAI,EAAK,KACnF5Y,KAAKyX,UAAUK,EAAOoI,uBAAsB,kBAAMk5B,EAAuBxgC,KAAI,EAAM,KACnF5Y,KAAKyX,UAAUK,EAAO6J,wBAAuB,SAAAzZ,GACzC,IAAM9G,EAAQq1B,EAAKugB,gBAAgB9qB,kBAAoBuK,EAAKqf,gBAAgB5pB,kBAAoBqnB,EAAiBwF,mBAC3Gz3C,EAASY,KAAKsJ,IAAIirB,EAAKqf,gBAAgB1pB,mBAAoBqK,EAAKugB,gBAAgB5qB,oBACtFqK,EAAK/U,wBAAwBwB,KAAK,CAC9B81B,cAAe13C,EACfsS,aAAcxS,EACd63C,qBAAsB/wC,EAAE+wC,qBACxBC,oBAAqBhxC,EAAEgxC,qBAE/B,KAEAl5C,KAAKyX,UAAUK,EAAO/B,aAAY,SAAAS,GAC9B,IAAIF,EAAI+iC,EACR,IAAK7iC,EAAMA,MAAM+4B,aAAe/4B,EAAM7B,OAAOzU,WAA6C,QAA/BoW,EAAKE,EAAM7B,OAAO0vB,eAA4B,IAAP/tB,OAAgB,EAASA,EAAGmf,UAAUgJ,SAAS,wBAAyB,CACtK,IAAMj9B,EAAagV,EAAM7B,OAAOzU,SAASsB,WACnCmxC,EAAWn8B,EAAM7B,OACjBwc,EAAgD,QAAtCkoB,EAAK5iB,EAAKsgB,8BAA2C,IAAPsC,OAAgB,EAASA,EAAG1I,QAAQ2I,MAAK,SAAAv+B,GAAC,OAE1F,OAAb43B,QAAkC,IAAbA,OAAsB,EAASA,EAAS77B,OAAOK,mBAAqB4D,EAAEysB,yBAEvFzsB,EAAE2sB,sBAAwB,GAAK3sB,EAAEysB,0BAA4BhmC,CAAW,IAM7E,OALI2vB,GACAsF,EAAK8iB,aAAapoB,GAEtB3a,EAAMA,MAAMgjC,uBACZ/iB,EAAK8e,oBAET,CACJ,KACOz9B,CACX,GACA,CAAAlY,IAAA,eAAAC,MAGA,SAAasxB,GACT,IAAMrZ,EAAS9X,KAAK81C,gBACdxF,EAAWtwC,KAAKg3C,gBAAgBhe,WAChCuX,EAAWvwC,KAAK81C,gBAAgB9c,WACtC,GAAKsX,GAAaC,GAAaz4B,EAA/B,CAGA,IAAM2hC,EAAgBtoB,EAAOmW,sBAAwB,EAAI,IAAI/d,GAAAA,EAAM4H,EAAOiW,wBAAyB,EAAGjW,EAAOmW,sBAAuBgJ,EAAS7B,iBAAiBtd,EAAOmW,wBAA0B,KACzLoS,EAAkBD,EAAgBnJ,EAASxC,gBAAgB2L,GAAiB,KAC5EE,EAAWxoB,EAAOuW,sBAAwB,EAAI,IAAIne,GAAAA,EAAM4H,EAAOqW,wBAAyB,EAAGrW,EAAOuW,sBAAuB6I,EAAS9B,iBAAiBtd,EAAOuW,wBAA0B,KACpLkS,EAAMrJ,EAAS/C,SACrB,GAAqC,IAAjCrc,EAAOmW,uBAA+BqS,EAAU,CAGhD,IAAI75C,EAAQ65C,EACRxoB,EAAOqW,wBAA0B,EAEjC1nC,EAAQ65C,EAASE,iBAAiB1oB,EAAOqW,wBAA0B,EAAG+I,EAAS9B,iBAAiBtd,EAAOqW,wBAA0B,IAE5HrW,EAAOuW,sBAAwB6I,EAASne,iBAE7CtyB,EAAQ65C,EAASG,eAAe3oB,EAAOuW,sBAAwB,EAAG,IAEtE5vB,EAAOkX,aAAa,aAAc,CAAC,CAC3BlvB,MAAAA,EACAwD,KAAM,KAElB,MACK,GAAqC,IAAjC6tB,EAAOuW,uBAAmD,OAApBgS,EAA0B,CAGrE,IAAMK,EAAW5oB,EAAOqW,wBAA0B+I,EAASne,eAAiB,IAAIvtB,EAAAA,EAASssB,EAAOqW,wBAA0B,EAAG,GAAK,IAAI3iC,EAAAA,EAASssB,EAAOqW,wBAAyB+I,EAAS9B,iBAAiBtd,EAAOqW,0BAChN1vB,EAAOkX,aAAa,aAAc,CAAC,CAC3BlvB,MAAOypB,GAAAA,EAAMywB,cAAcD,EAAUA,GACrCz2C,KAAM6tB,EAAOqW,wBAA0B+I,EAASne,eAAiBsnB,EAAkBE,EAAMA,EAAMF,IAE3G,MACSC,GAAgC,OAApBD,GAEjB5hC,EAAOkX,aAAa,aAAc,CAAC,CAC3BlvB,MAAO65C,EACPr2C,KAAMo2C,IAnClB,CAsCJ,GAAC,CAAA95C,IAAA,qBAAAC,MACD,SAAmBmY,EAAsB4tB,EAAW7gC,EAASk1C,GACzD,OAAOjiC,EAAqBuC,eAAeuC,EAAAA,GAAkB8oB,EAAW7gC,EAASk1C,EACrF,GAAC,CAAAr6C,IAAA,UAAAC,MACD,WACIG,KAAKsjB,mBAAmB42B,iBAAiBl6C,OACI,IAAzCA,KAAKo2C,iCACL+D,OAAOC,aAAap6C,KAAKo2C,gCACzBp2C,KAAKo2C,gCAAkC,GAE3Cp2C,KAAKq6C,gCACDr6C,KAAKq3C,yBACLr3C,KAAK21C,oBAAoB1oC,YAAYjN,KAAKq3C,uBAAuBrqC,cACjEhN,KAAKq3C,uBAAuB3lC,WAE5B1R,KAAKs3C,yBACLt3C,KAAK21C,oBAAoB1oC,YAAYjN,KAAKs3C,uBAAuBtqC,cACjEhN,KAAKs3C,uBAAuB5lC,WAEhC1R,KAAK21C,oBAAoB1oC,YAAYjN,KAAK01C,4BAA4B3pC,SAClE/L,KAAKgd,SAAS83B,qBACd90C,KAAKw1C,qBAAqBvoC,YAAYjN,KAAK21C,qBAE/C31C,KAAKw1C,qBAAqBvoC,YAAYjN,KAAKk2C,kBAC3Cl2C,KAAKg3C,gBAAgBtlC,UACrB1R,KAAKw1C,qBAAqBvoC,YAAYjN,KAAKm2C,kBAC3Cn2C,KAAK81C,gBAAgBpkC,UACrB1R,KAAK83C,UAAUpmC,UACf1R,KAAKw1C,qBAAqBvoC,YAAYjN,KAAKu3C,YAAYxrC,QAAQA,SAC/D/L,KAAKw1C,qBAAqBvoC,YAAYjN,KAAKu3C,YAAY9V,OAAO11B,SAC9D/L,KAAKw1C,qBAAqBvoC,YAAYjN,KAAKu3C,YAAY7V,mBAAmB31B,SAC1E/L,KAAKu3C,YAAY7lC,UACjB1R,KAAKuiB,YAAYtV,YAAYjN,KAAKw1C,sBAClCx1C,KAAK6d,cAAcqF,QACnB5V,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAgiC,EAAA/hC,WAAA,gBAAAjS,KAAA,KACJ,GACA,CAAAK,IAAA,QAAAC,MACA,WACI,OAAOG,KAAKgnB,gBAAkB,IAAMhnB,KAAK0iB,GAC7C,GAAC,CAAA9iB,IAAA,gBAAAC,MACD,WACI,OAAOonB,GAAAA,EAAwBqzB,WACnC,GAAC,CAAA16C,IAAA,iBAAAC,MACD,WACI,OAAKG,KAAK+2C,uBAGH/2C,KAAK+2C,uBAAuBpG,QAFxB,IAGf,GAAC,CAAA/wC,IAAA,oBAAAC,MACD,WACI,OAAOG,KAAKg3C,eAChB,GAAC,CAAAp3C,IAAA,oBAAAC,MACD,WACI,OAAOG,KAAK81C,eAChB,GAAC,CAAAl2C,IAAA,gBAAAC,MACD,SAAc06C,GACV,IA0hD0B33C,EAAGC,EA1hDvB4kB,EAAa0sB,GAA0BoG,EAAav6C,KAAKgd,UACzDw9B,GAyhDoB53C,EAzhDe5C,KAAKgd,SAyhDjBna,EAzhD2B4kB,EA0hDrD,CACH2sB,wBAA0BxxC,EAAEwxC,0BAA4BvxC,EAAEuxC,wBAC1DE,iBAAmB1xC,EAAE0xC,mBAAqBzxC,EAAEyxC,iBAC5CC,uBAAyB3xC,EAAE2xC,yBAA2B1xC,EAAE0xC,uBACxDC,mBAAqB5xC,EAAE4xC,qBAAuB3xC,EAAE2xC,mBAChDC,YAAc7xC,EAAE6xC,cAAgB5xC,EAAE4xC,YAClCC,qBAAuB9xC,EAAE8xC,uBAAyB7xC,EAAE6xC,qBACpDC,iBAAmB/xC,EAAE+xC,mBAAqB9xC,EAAE8xC,iBAC5CC,iBAAmBhyC,EAAEgyC,mBAAqB/xC,EAAE+xC,iBAC5CC,aAAejyC,EAAEiyC,eAAiBhyC,EAAEgyC,aACpCC,oBAAsBlyC,EAAEkyC,sBAAwBjyC,EAAEiyC,oBAClDC,aAAenyC,EAAEmyC,eAAiBlyC,EAAEkyC,aACpC5E,cAAgBvtC,EAAEutC,gBAAkBttC,EAAEstC,cACtC/M,qBAAuBxgC,EAAEwgC,uBAAyBvgC,EAAEugC,uBAtiDpDpjC,KAAKgd,SAAWyK,EAChBznB,KAAKk1C,wBAAwBt8B,IAA8C,qBAAnC2hC,EAAYnF,oBAAqCmF,EAAYnF,oBACrG,IAAMqF,EAA0BD,EAAQ9F,sBAAwB8F,EAAQ7F,kBAAoB6F,EAAQjG,uBAC9FmG,EAA8B16C,KAAKwhC,aAAegZ,EAAQhG,oBAAsBgG,EAAQ/F,aAC9Fz0C,KAAK+zC,sBAAsB1D,WAAW5oB,GAClCgzB,EACAz6C,KAAK26C,0BAEAD,GACL16C,KAAKg0C,8BAETh0C,KAAK81C,gBAAgBpuB,cAAc1nB,KAAKm5C,+BAA+BoB,IACvEv6C,KAAKg3C,gBAAgBtvB,cAAc1nB,KAAKy4C,8BAA8B8B,IAEtEv6C,KAAK83C,UAAU8C,2BAA2B56C,KAAKgd,SAASo3B,wBAAyBp0C,KAAKgd,SAASq3B,uBAE3FmG,EAAQlG,mBACJt0C,KAAKgd,SAASs3B,iBACdt0C,KAAKw3C,aAAa,IAAIC,GAA2Bz3C,KAAK03C,oBAAqB13C,KAAKgd,SAASo3B,wBAAyBp0C,KAAKgd,SAASq3B,wBAGhIr0C,KAAKw3C,aAAa,IAAIG,GAAuB33C,KAAK03C,oBAAqB13C,KAAKgd,SAASo3B,0BAGzFp0C,KAAKw1C,qBAAqB/f,UAAY8d,EAAiBkC,cAAcz1C,KAAKwjB,cAAckR,gBAAiB10B,KAAKgd,SAASs3B,mBAGvHkG,EAAQ1F,sBACJ90C,KAAKgd,SAAS83B,oBACd90C,KAAKw1C,qBAAqBphB,YAAYp0B,KAAK21C,qBAG3C31C,KAAKw1C,qBAAqBvoC,YAAYjN,KAAK21C,qBAGvD,GAAC,CAAA/1C,IAAA,WAAAC,MACD,WACI,MAAO,CACHywC,SAAUtwC,KAAKg3C,gBAAgBhe,WAC/BuX,SAAUvwC,KAAK81C,gBAAgB9c,WAEvC,GAAC,CAAAp5B,IAAA,WAAAC,MACD,SAAS2c,GAEL,GAAIA,KAAWA,EAAM8zB,WAAa9zB,EAAM+zB,UACpC,MAAM,IAAI53B,MAAO6D,EAAM8zB,SAAiE,oDAAtD,qDAGtCtwC,KAAKq6C,gCACLr6C,KAAK66C,yBAEL76C,KAAKg3C,gBAAgBpkB,SAASpW,EAAQA,EAAM8zB,SAAW,MACvDtwC,KAAK81C,gBAAgBljB,SAASpW,EAAQA,EAAM+zB,SAAW,MACvDvwC,KAAKq1C,yBAAyBwD,SAE1Br8B,IACAxc,KAAKg3C,gBAAgB8D,aAAa,GAClC96C,KAAK81C,gBAAgBgF,aAAa,IAGtC96C,KAAK+2C,uBAAyB,KAC9B/2C,KAAKs2C,wBACLt2C,KAAK+6C,UAAU,GACXv+B,IACAxc,KAAKg7C,wBAELh7C,KAAK26C,2BAET36C,KAAK24C,0BACL34C,KAAK+e,kBAAkBmE,OAEvBljB,KAAKi7C,eAAiBj7C,KAAKyX,UAAUzX,KAAKuX,sBAAsBgD,eAAe2gC,EAAAA,EAAel7C,KAAM,CAChGm7C,mBAAmB,EACnBC,eAAgBp7C,KAAKyiC,oBAAoBxP,UAAU,IAA4BooB,OAEvF,GAAC,CAAAz7C,IAAA,sBAAAC,MACD,WACI,OAAOG,KAAKuiB,WAChB,GACA,CAAA3iB,IAAA,+BAAAC,MACA,SAA6BK,GACzB,OAAOF,KAAK81C,gBAAgBwF,6BAA6Bp7C,EAC7D,GAAC,CAAAN,IAAA,cAAAC,MACD,WACI,OAAOG,KAAK81C,gBAAgB9rB,aAChC,GAAC,CAAApqB,IAAA,cAAAC,MACD,SAAYK,GAA0B,IAAhBqE,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MAC3Bhb,KAAK81C,gBAAgBvpC,YAAYrM,EAAUqE,EAC/C,GAAC,CAAA3E,IAAA,aAAAC,MACD,SAAW2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAChChb,KAAK81C,gBAAgByF,WAAW/5C,EAAYkpB,EAChD,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmB2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACxChb,KAAK81C,gBAAgB0F,mBAAmBh6C,EAAYkpB,EACxD,GAAC,CAAA9qB,IAAA,sCAAAC,MACD,SAAoC2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACzDhb,KAAK81C,gBAAgB2F,oCAAoCj6C,EAAYkpB,EACzE,GAAC,CAAA9qB,IAAA,oBAAAC,MACD,SAAkB2B,GAAiE,IAArDkpB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACvChb,KAAK81C,gBAAgB4F,kBAAkBl6C,EAAYkpB,EACvD,GAAC,CAAA9qB,IAAA,iBAAAC,MACD,SAAeK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAClChb,KAAK81C,gBAAgB9gB,eAAe90B,EAAUwqB,EAClD,GAAC,CAAA9qB,IAAA,yBAAAC,MACD,SAAuBK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC1Chb,KAAK81C,gBAAgB6F,uBAAuBz7C,EAAUwqB,EAC1D,GAAC,CAAA9qB,IAAA,0CAAAC,MACD,SAAwCK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC3Dhb,KAAK81C,gBAAgB8F,wCAAwC17C,EAAUwqB,EAC3E,GAAC,CAAA9qB,IAAA,wBAAAC,MACD,SAAsBK,GAA+D,IAArDwqB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACzChb,KAAK81C,gBAAgB+F,sBAAsB37C,EAAUwqB,EACzD,GAAC,CAAA9qB,IAAA,eAAAC,MACD,WACI,OAAOG,KAAK81C,gBAAgB1qB,cAChC,GAAC,CAAAxrB,IAAA,gBAAAC,MACD,WACI,OAAOG,KAAK81C,gBAAgBzqB,eAChC,GAAC,CAAAzrB,IAAA,eAAAC,MACD,SAAayrB,GAA2B,IAAhB/mB,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MAC7Bhb,KAAK81C,gBAAgBtS,aAAalY,EAAW/mB,EACjD,GAAC,CAAA3E,IAAA,gBAAAC,MACD,SAAckC,GAAwB,IAAhBwC,EAAMyW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,MAC3Bhb,KAAK81C,gBAAgB5rB,cAAcnoB,EAAQwC,EAC/C,GAAC,CAAA3E,IAAA,cAAAC,MACD,SAAY8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACrDhb,KAAK81C,gBAAgBgG,YAAYnyC,EAAiBE,EAAe6gB,EACrE,GAAC,CAAA9qB,IAAA,sBAAAC,MACD,SAAoB8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC7Dhb,KAAK81C,gBAAgBiG,oBAAoBpyC,EAAiBE,EAAe6gB,EAC7E,GAAC,CAAA9qB,IAAA,uCAAAC,MACD,SAAqC8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC9Ehb,KAAK81C,gBAAgBkG,qCAAqCryC,EAAiBE,EAAe6gB,EAC9F,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmB8J,EAAiBE,GAAoE,IAArD6gB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAC5Dhb,KAAK81C,gBAAgBmG,mBAAmBtyC,EAAiBE,EAAe6gB,EAC5E,GAAC,CAAA9qB,IAAA,cAAAC,MACD,SAAYC,GAAqH,IAA9G4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EAAwCgR,EAAsBhR,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,IAAAA,UAAA,GAAUyP,IAAgBzP,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,KAAAA,UAAA,GACpHhb,KAAK81C,gBAAgB9qB,YAAYlrB,EAAO4qB,EAAYsB,EAAwBvB,EAChF,GAAC,CAAA7qB,IAAA,sBAAAC,MACD,SAAoBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACpChb,KAAK81C,gBAAgBoG,oBAAoBp8C,EAAO4qB,EACpD,GAAC,CAAA9qB,IAAA,uCAAAC,MACD,SAAqCC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACrDhb,KAAK81C,gBAAgBqG,qCAAqCr8C,EAAO4qB,EACrE,GAAC,CAAA9qB,IAAA,qBAAAC,MACD,SAAmBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACnChb,KAAK81C,gBAAgBsG,mBAAmBt8C,EAAO4qB,EACnD,GAAC,CAAA9qB,IAAA,sCAAAC,MACD,SAAoCC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACpDhb,KAAK81C,gBAAgBuG,oCAAoCv8C,EAAO4qB,EACpE,GAAC,CAAA9qB,IAAA,mBAAAC,MACD,SAAiBC,GAA4D,IAArD4qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACjChb,KAAK81C,gBAAgBwG,iBAAiBx8C,EAAO4qB,EACjD,GAAC,CAAA9qB,IAAA,sBAAAC,MACD,WACI,OAAOG,KAAK81C,gBAAgByG,qBAChC,GAAC,CAAA38C,IAAA,QAAAC,MACD,WACIG,KAAK81C,gBAAgBvtB,OACzB,GAAC,CAAA3oB,IAAA,UAAAC,MACD,SAAQ0E,EAAQ+oB,EAAWC,GACvBvtB,KAAK81C,gBAAgB0G,QAAQj4C,EAAQ+oB,EAAWC,EACpD,GAAC,CAAA3tB,IAAA,8BAAAC,MACD,SAA4BsvB,GACxB,OAAOnvB,KAAK81C,gBAAgBzzB,4BAA4B8M,EAC5D,GAAC,CAAAvvB,IAAA,oBAAAC,MACD,SAAkBwvB,GACd,OAAOrvB,KAAK81C,gBAAgBxmB,kBAAkBD,EAClD,GACA,CAAAzvB,IAAA,gBAAAC,MACA,WAGI,MAAO,CACHywC,SAHsBtwC,KAAKg3C,gBAAgBz9B,gBAI3Cg3B,SAHsBvwC,KAAK81C,gBAAgBv8B,gBAKnD,GAAC,CAAA3Z,IAAA,mBAAAC,MACD,SAAiBuY,GACb,GAAIA,GAAKA,EAAEk4B,UAAYl4B,EAAEm4B,SAAU,CAC/B,IAAMkM,EAAkBrkC,EACxBpY,KAAKg3C,gBAAgBr9B,iBAAiB8iC,EAAgBnM,UACtDtwC,KAAK81C,gBAAgBn8B,iBAAiB8iC,EAAgBlM,SAC1D,CACJ,GAAC,CAAA3wC,IAAA,SAAAC,MACD,SAAO0wB,GACHvwB,KAAK02C,qBAAqBgG,QAAQnsB,EACtC,GAAC,CAAA3wB,IAAA,eAAAC,MACD,WACI,OAAOG,KAAKg3C,gBAAgB7uB,gBAAkBnoB,KAAK81C,gBAAgB3tB,cACvE,GAEA,CAAAvoB,IAAA,6BAAAC,MACA,WACIG,KAAK28C,WACT,GAAC,CAAA/8C,IAAA,mBAAAC,MACD,WACI,OAAOG,KAAKu3C,YAAYqF,YAAc58C,KAAK02C,qBAAqBmG,YAAc,CAClF,GAAC,CAAAj9C,IAAA,wBAAAC,MACD,WACI,GAAKG,KAAKgd,SAAS83B,qBAGd90C,KAAKq3C,wBAA2Br3C,KAAKs3C,uBAA1C,CAGA,IAAMh2C,EAAStB,KAAK02C,qBAAqBmG,YACnCC,EAAe98C,KAAK+8C,mBACpBC,EAAYzJ,EAAiB0J,2BAA6B,EAAI1J,EAAiBwF,mBAClE/4C,KAAK81C,gBAAgBoH,kBAEpCl9C,KAAKq3C,uBAAuB8F,UAAU,CAClCn8C,IAAK,EACLI,MAAOmyC,EAAiBwF,mBACxBtL,MAAOuP,EAAYzJ,EAAiBwF,mBACpCz3C,OAASA,EAASw7C,IAEtB98C,KAAKs3C,uBAAuB6F,UAAU,CAClCn8C,IAAK,EACLysC,MAAO,EACPrsC,MAAOmyC,EAAiBwF,mBACxBz3C,OAASA,EAASw7C,IAhB1B,CAmBJ,GACA,CAAAl9C,IAAA,sBAAAC,MACA,WACQG,KAAKq2C,6BAGTr2C,KAAKq1C,yBAAyB2C,UAClC,GAAC,CAAAp4C,IAAA,8BAAAC,MACD,WAA8B,IAAAg3B,EAAA,MAEmB,IAAzC72B,KAAKo2C,iCACL+D,OAAOC,aAAap6C,KAAKo2C,gCACzBp2C,KAAKo2C,gCAAkC,GAE3Cp2C,KAAKo2C,+BAAiC+D,OAAOiD,YAAW,kBAAMvmB,EAAK8jB,yBAAyB,GAAEpH,EAAiB8J,8BACnH,GAAC,CAAAz9C,IAAA,0BAAAC,MAUD,WAA0B,IAAAw5B,EAAA,MACuB,IAAzCr5B,KAAKo2C,iCAEL+D,OAAOC,aAAap6C,KAAKo2C,gCACzBp2C,KAAKo2C,gCAAkC,GAE3C,IAAMkH,EAAuBt9C,KAAKg3C,gBAAgBhe,WAC5CukB,EAAuBv9C,KAAK81C,gBAAgB9c,WAClD,GAAKskB,GAAyBC,EAA9B,CAMAv9C,KAAKs2C,wBACL,IAAMkH,EAAex9C,KAAKs2C,sBACpBmH,EAAwC,KAA5Bz9C,KAAKgd,SAASy3B,YAAqB,KAC/CiJ,EAAsB,SAAClhC,GACzB,IAAMmhC,EAAmBnhC,EAAMs2B,iBAC/B,OAAsB,IAAd2K,GAAmBE,GAAoBF,CACnD,EACKC,EAAoBJ,IAA0BI,EAAoBH,IASvEv9C,KAAK+6C,UAAU,GACf/6C,KAAK+zC,sBAAsBrD,YAAY4M,EAAsBC,EAAsB,CAC/E7I,qBAAsB10C,KAAKgd,SAAS03B,qBACpCkJ,qBAAsB59C,KAAKgd,SAASw3B,qBACrCp4B,MAAK,SAAA/Z,GACAm7C,IAAiBnkB,EAAKid,uBACnBgH,IAAyBjkB,EAAK2d,gBAAgBhe,YAC9CukB,IAAyBlkB,EAAKyc,gBAAgB9c,aACjDK,EAAK0hB,UAAU,GACf1hB,EAAK0d,uBAAyB,CAC1B/F,UAAW3uC,EAAO2uC,UAClBC,UAAW5uC,EAAO4uC,UAClB4M,SAAUx7C,EAAOsuC,QACjBA,QAAStuC,EAAOsuC,QAAQrnB,KAAI,SAAAw0B,GAExB,IAAI1W,EACAE,EACAE,EACAE,EACAqW,EAAeD,EAAEC,aAqBrB,OApBID,EAAErE,cAAc3gB,SAEhBsO,EAA0B0W,EAAErE,cAAc9vC,gBAAkB,EAC5D29B,EAAwB,EACxByW,OAAet+C,IAGf2nC,EAA0B0W,EAAErE,cAAc9vC,gBAC1C29B,EAAwBwW,EAAErE,cAAcuE,uBAAyB,GAEjEF,EAAEG,cAAcnlB,SAEhB0O,EAA0BsW,EAAEG,cAAct0C,gBAAkB,EAC5D+9B,EAAwB,EACxBqW,OAAet+C,IAGf+nC,EAA0BsW,EAAEG,cAAct0C,gBAC1C+9B,EAAwBoW,EAAEG,cAAcD,uBAAyB,GAE9D,CACH5W,wBAAAA,EACAE,sBAAAA,EACAE,wBAAAA,EACAE,sBAAAA,EACAwW,YAA8B,OAAjBH,QAA0C,IAAjBA,OAA0B,EAASA,EAAaz0B,KAAI,SAAAw0B,GAAC,MAAK,CAC5F1W,wBAAyB0W,EAAErE,cAAc9vC,gBACzCw0C,oBAAqBL,EAAErE,cAAc7tB,YACrC0b,sBAAuBwW,EAAErE,cAAc5vC,cACvCu0C,kBAAmBN,EAAErE,cAAc5tB,UACnC2b,wBAAyBsW,EAAEG,cAAct0C,gBACzC00C,oBAAqBP,EAAEG,cAAcryB,YACrC8b,sBAAuBoW,EAAEG,cAAcp0C,cACvCy0C,kBAAmBR,EAAEG,cAAcpyB,UACtC,IAET,KAEJwN,EAAKgc,yBAAyB2C,WAC9B3e,EAAKsa,iBAAiBzwB,OAE9B,IAAG,SAACq7B,GACIf,IAAiBnkB,EAAKid,uBACnBgH,IAAyBjkB,EAAK2d,gBAAgBhe,YAC9CukB,IAAyBlkB,EAAKyc,gBAAgB9c,aACjDK,EAAK0hB,UAAU,GACf1hB,EAAK0d,uBAAyB,KAC9B1d,EAAKgc,yBAAyB2C,WAEtC,KA7ESzE,EAAiBiL,QAAQlB,EAAqB70B,IAAKzoB,KAAK4zC,uBACrDL,EAAiBiL,QAAQjB,EAAqB90B,IAAKzoB,KAAK6zC,wBAC5D7zC,KAAK4zC,qBAAuB0J,EAAqB70B,IACjDzoB,KAAK6zC,qBAAuB0J,EAAqB90B,IACjDzoB,KAAKqjB,qBAAqB3I,KAAKyY,EAAAA,GAAa,gBAAiB,wDAhBrE,CA0FJ,GAAC,CAAAvzB,IAAA,gCAAAC,MACD,WACIG,KAAKu2C,qBAAqBkI,MAAMz+C,KAAKg3C,iBACrCh3C,KAAKw2C,qBAAqBiI,MAAMz+C,KAAK81C,gBACzC,GAAC,CAAAl2C,IAAA,qBAAAC,MACD,WACI,GAAKG,KAAKg3C,gBAAgBhe,YAAeh5B,KAAK81C,gBAAgB9c,WAA9D,CAGA,IAAM6L,EAAe7kC,KAAK+2C,uBAAyB/2C,KAAK+2C,uBAAuBpG,QAAU,GACnF+N,EAAkB1+C,KAAKu2C,qBAAqBoI,oBAAoB3+C,KAAKg3C,gBAAgB9tB,kBACrF01B,EAAkB5+C,KAAKw2C,qBAAqBmI,oBAAoB3+C,KAAK81C,gBAAgB5sB,kBACrFqrB,EAAyBv0C,KAAKgd,SAASu3B,yBAA2Bv0C,KAAK81C,gBAAgB7iB,UAAU,IACjG4rB,EAAkB7+C,KAAK83C,UAAUgH,0BAA0Bja,EAAa7kC,KAAKgd,SAAS03B,qBAAsB10C,KAAKgd,SAAS23B,iBAAkBJ,EAAwBmK,EAAiBE,GAC3L,IACI5+C,KAAKq2C,6BAA8B,EACnCr2C,KAAKu2C,qBAAqBl6B,MAAMrc,KAAKg3C,gBAAiBh3C,KAAKq3C,uBAAwBwH,EAAgBvO,UAAU,GAC7GtwC,KAAKw2C,qBAAqBn6B,MAAMrc,KAAK81C,gBAAiB91C,KAAKs3C,uBAAwBuH,EAAgBtO,UAAU,EACjH,CAAC,QAEGvwC,KAAKq2C,6BAA8B,CACvC,CAbA,CAcJ,GAAC,CAAAz2C,IAAA,6BAAAC,MACD,SAA2BkF,GACvB,IAAMg6C,EAAgBpoC,OAAOC,OAAO,CAAC,EAAG7R,GAaxC,OAZAg6C,EAAcnnB,cAAe,EAC7BmnB,EAAclI,iBAAkB,EAEhCkI,EAAc5c,UAAYxrB,OAAOC,OAAO,CAAC,EAAImoC,EAAc5c,WAAa,CAAC,GACzE4c,EAAc5c,UAAU6c,SAAW,UACnCD,EAAcE,SAAU,EACxBF,EAAcG,SAAWl/C,KAAKgd,SAAS63B,aACvCkK,EAAcI,sBAAuB,EAGrCJ,EAAcK,QAAUzoC,OAAOC,OAAO,CAAC,EAAImoC,EAAcK,SAAW,CAAC,GACrEL,EAAcK,QAAQ75B,SAAU,EACzBw5B,CACX,GAAC,CAAAn/C,IAAA,gCAAAC,MACD,SAA8BkF,GAC1B,IAAM1C,EAASrC,KAAKq/C,2BAA2Bt6C,GAgB/C,OAfK/E,KAAKgd,SAASs3B,iBAMfjyC,EAAOi9C,kBAAoBt/C,KAAKgd,SAAS+3B,cAJzC1yC,EAAOi9C,kBAAoB,MAC3Bj9C,EAAOk9C,kBAAoB,OAK3Bx6C,EAAQy6C,oBACRn9C,EAAOioC,UAAYvlC,EAAQy6C,mBAE/Bx/C,KAAKy/C,iBAAiBp9C,GACtBA,EAAOq1B,UAAY13B,KAAKgd,SAAS43B,iBACjCvyC,EAAOq9C,eAAiB,CAAEn6B,SAAUljB,EAAOq1B,UAC3Cr1B,EAAOs9C,qBAAuB,iCACvBhpC,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGvU,GAAS,CAAEkuB,UAAW,CACrDjvB,OAAQ,EACRF,MAAO,IAEnB,GAAC,CAAAxB,IAAA,mBAAAC,MACD,SAAiBkF,GACb,IAAIuR,EACAg0B,EAAyC,QAA5Bh0B,EAAKvR,EAAQulC,iBAA8B,IAAPh0B,EAAgBA,EAAK,GACtEtW,KAAKgd,SAASomB,qBACdkH,GAAagJ,GAERhJ,IACLA,EAAYA,EAAUsV,WAAWtM,GAAmB,KAExDvuC,EAAQulC,UAAYA,CACxB,GAAC,CAAA1qC,IAAA,iCAAAC,MACD,SAA+BkF,GAC3B,IAAM1C,EAASrC,KAAKq/C,2BAA2Bt6C,GAS/C,OARIA,EAAQ86C,oBACRx9C,EAAOioC,UAAYvlC,EAAQ86C,mBAE/B7/C,KAAKy/C,iBAAiBp9C,GACtBA,EAAOi9C,kBAAoBt/C,KAAKgd,SAAS+3B,aACzC1yC,EAAOy9C,6BAA+BC,EAAAA,GAAcD,6BAA6BE,aAAezM,EAAiB0J,2BACjH56C,EAAO8/B,UAAU8d,mBAAoB,EACrC59C,EAAOs9C,qBAAuB,iCACvBhpC,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGvU,GAAS,CAAEkuB,UAAW,CACrDjvB,OAAQ,EACRF,MAAO,IAEnB,GAAC,CAAAxB,IAAA,WAAAC,MACD,WACIG,KAAK02C,qBAAqBgG,UAC1B18C,KAAK28C,WACT,GAAC,CAAA/8C,IAAA,YAAAC,MACD,WACI,IAAMuB,EAAQpB,KAAK02C,qBAAqBwJ,WAClC5+C,EAAStB,KAAK02C,qBAAqBmG,YACnCC,EAAe98C,KAAK+8C,mBACpBoD,EAAangD,KAAK83C,UAAUsI,SAClCpgD,KAAKk2C,iBAAiBvM,MAAMvoC,MAAQ++C,EAAa,KACjDngD,KAAKk2C,iBAAiBvM,MAAMzoC,KAAO,MACnClB,KAAKm2C,iBAAiBxM,MAAMvoC,MAASA,EAAQ++C,EAAc,KAC3DngD,KAAKm2C,iBAAiBxM,MAAMzoC,KAAOi/C,EAAa,KAChDngD,KAAK21C,oBAAoBhM,MAAM3oC,IAAM,MACrChB,KAAK21C,oBAAoBhM,MAAMroC,OAAUA,EAASw7C,EAAgB,KAClE98C,KAAK21C,oBAAoBhM,MAAMvoC,MAAQmyC,EAAiB0J,2BAA6B,KACrFj9C,KAAK21C,oBAAoBhM,MAAMzoC,KAAQE,EAAQmyC,EAAiB0J,2BAA8B,KAC9Fj9C,KAAK01C,4BAA4B5hC,SAASy/B,EAAiB0J,4BAC3Dj9C,KAAK01C,4BAA4BriC,UAAU,IAC3CrT,KAAKg3C,gBAAgBoJ,OAAO,CAAEh/C,MAAO++C,EAAY7+C,OAASA,EAASw7C,IACnE98C,KAAK81C,gBAAgBsK,OAAO,CAAEh/C,MAAOA,EAAQ++C,GAAcngD,KAAKgd,SAAS83B,oBAAsBvB,EAAiB0J,2BAA6B,GAAI37C,OAASA,EAASw7C,KAC/J98C,KAAKq3C,wBAA0Br3C,KAAKs3C,yBACpCt3C,KAAKu4C,wBAETv4C,KAAKu3C,YAAY6I,OAAO9+C,EAASw7C,EAAc17C,EAAO07C,GACtD98C,KAAK24C,yBACT,GAAC,CAAA/4C,IAAA,0BAAAC,MACD,WACI,IAAMugD,EAASpgD,KAAKqgD,2BACfD,GAKDpgD,KAAK01C,4BAA4BtiC,OAAOgtC,EAAOp/C,KAC/ChB,KAAK01C,4BAA4BriC,UAAU+sC,EAAO9+C,UALlDtB,KAAK01C,4BAA4BtiC,OAAO,GACxCpT,KAAK01C,4BAA4BriC,UAAU,GAMnD,GAAC,CAAAzT,IAAA,2BAAAC,MACD,WACI,IAAM6T,EAAa1T,KAAK81C,gBAAgBoH,gBACxC,IAAKxpC,EACD,OAAO,KAEX,IAAM3S,EAAYf,KAAK81C,gBAAgB1kB,eACjC3wB,EAAeT,KAAK81C,gBAAgBp1C,kBACpC4/C,EAAwBp+C,KAAKsJ,IAAI,EAAGkI,EAAWpS,QAC/Ci/C,EAA4Br+C,KAAKsJ,IAAI,EAAG80C,EAAwB,GAChEE,EAAgB//C,EAAe,EAAK8/C,EAA4B9/C,EAAgB,EAGtF,MAAO,CACHa,OAHuBY,KAAKsJ,IAAI,EAAGtJ,KAAKktC,MAAM17B,EAAWpS,OAASk/C,IAIlEx/C,IAH2BkB,KAAKktC,MAAMruC,EAAYy/C,GAK1D,GAAC,CAAA5gD,IAAA,oBAAAC,MACD,WAAoB,IAAAk9B,EAAA,KAChB,MAAO,CACHmjB,SAAU,WACN,OAAOnjB,EAAK2Z,qBAAqBwJ,UACrC,EACArD,UAAW,WACP,OAAQ9f,EAAK2Z,qBAAqBmG,YAAc9f,EAAKggB,kBACzD,EACAnzB,WAAY,WACR,MAAO,CACHkrB,oBAAqB/X,EAAK/f,SAAS83B,oBAE3C,EACA2L,oBAAqB,WACjB,OAAO1jB,EAAKyY,oBAChB,EACAkL,gBAAiB,WACb3jB,EAAK4f,WACT,EACA3X,kBAAmB,WACf,OAAOjI,EAAKia,eAChB,EACAvU,kBAAmB,WACf,OAAO1F,EAAK+Y,eAChB,EAER,GAAC,CAAAl2C,IAAA,eAAAC,MACD,SAAa8gD,GACT,IAAIrqC,EACsB,QAAzBA,EAAKtW,KAAK83C,iBAA8B,IAAPxhC,GAAyBA,EAAG5E,UAC9D1R,KAAK83C,UAAY6I,EACb3gD,KAAK4gD,iBACLD,EAAYE,kBAAkB7gD,KAAK4gD,iBAEvCD,EAAY5I,YAAY/3C,KAAKwjB,cAAckR,iBACvC10B,KAAK+2C,wBACL/2C,KAAKu1C,qBAGTv1C,KAAK28C,WACT,GAAC,CAAA/8C,IAAA,qCAAAC,MACD,SAAmC2B,EAAYs/C,GAC3C,IAAMjc,EAAe7kC,KAAK+2C,uBAAyB/2C,KAAK+2C,uBAAuBpG,QAAU,GACzF,GAA2B,IAAvB9L,EAAYtiC,QAAgBf,EAAas/C,EAAyBjc,EAAY,IAE9E,OAAO,KAIX,IAFA,IAAIn5B,EAAM,EACNF,EAAMq5B,EAAYtiC,OAAS,EACxBmJ,EAAMF,GAAK,CACd,IAAMu1C,EAAM7+C,KAAKktC,OAAO1jC,EAAMF,GAAO,GAC/Bw1C,EAAWF,EAAyBjc,EAAYkc,IAChDE,EAAUF,EAAM,GAAKv1C,EAAMs1C,EAAyBjc,EAAYkc,EAAM,IAAM,WAC9Ev/C,EAAaw/C,EACbx1C,EAAMu1C,EAAM,EAEPv/C,GAAcy/C,EACnBv1C,EAAMq1C,EAAM,GAIZr1C,EAAMq1C,EACNv1C,EAAMu1C,EAEd,CACA,OAAOlc,EAAYn5B,EACvB,GAAC,CAAA9L,IAAA,0CAAAC,MACD,SAAwC2B,GACpC,IAAM0lC,EAAalnC,KAAKkhD,mCAAmC1/C,GAAY,SAAC0lC,GAAU,OAAKA,EAAWE,uBAAuB,IACzH,IAAKF,EACD,OAAO1lC,EAEX,IAAM2/C,EAA+Bja,EAAWE,yBAA2BF,EAAWI,sBAAwB,GAAK,EAAI,GACjH8Z,EAA+Bla,EAAWM,yBAA2BN,EAAWQ,sBAAwB,GAAK,EAAI,GACjH2Z,EAA4Bna,EAAWI,sBAAwB,EAAKJ,EAAWI,sBAAwBJ,EAAWE,wBAA0B,EAAK,EACjJka,EAA4Bpa,EAAWQ,sBAAwB,EAAKR,EAAWQ,sBAAwBR,EAAWM,wBAA0B,EAAK,EACjJW,EAAQ3mC,EAAa2/C,EAC3B,OAAIhZ,GAASkZ,EACFD,EAA+Bl/C,KAAKwJ,IAAIy8B,EAAOmZ,GAEnDF,EAA+BE,EAA2BD,EAA2BlZ,CAChG,GAAC,CAAAvoC,IAAA,0CAAAC,MACD,SAAwC2B,GACpC,IAAM0lC,EAAalnC,KAAKkhD,mCAAmC1/C,GAAY,SAAC0lC,GAAU,OAAKA,EAAWM,uBAAuB,IACzH,IAAKN,EACD,OAAO1lC,EAEX,IAAM2/C,EAA+Bja,EAAWE,yBAA2BF,EAAWI,sBAAwB,GAAK,EAAI,GACjH8Z,EAA+Bla,EAAWM,yBAA2BN,EAAWQ,sBAAwB,GAAK,EAAI,GACjH2Z,EAA4Bna,EAAWI,sBAAwB,EAAKJ,EAAWI,sBAAwBJ,EAAWE,wBAA0B,EAAK,EACjJka,EAA4Bpa,EAAWQ,sBAAwB,EAAKR,EAAWQ,sBAAwBR,EAAWM,wBAA0B,EAAK,EACjJW,EAAQ3mC,EAAa4/C,EAC3B,OAAIjZ,GAASmZ,EACFH,EAA+Bj/C,KAAKwJ,IAAIy8B,EAAOkZ,GAEnDF,EAA+BE,EAA2BC,EAA2BnZ,CAChG,GAAC,CAAAvoC,IAAA,oCAAAC,MACD,SAAkC2B,GAC9B,OAAKxB,KAAK+2C,uBAIH,CACHwK,qBAAsBvhD,KAAKwhD,wCAAwChgD,IAH5D,IAKf,GAAC,CAAA5B,IAAA,oCAAAC,MACD,SAAkC2B,GAC9B,OAAKxB,KAAK+2C,uBAIH,CACHwK,qBAAsBvhD,KAAKyhD,wCAAwCjgD,IAH5D,IAKf,IAAC,EAAA5B,IAAA,gBAAAC,MAl3BD,SAAqBs/B,EAAOmV,GACxB,IAAIjyC,EAAS,+CAKb,OAJIiyC,IACAjyC,GAAU,iBAEdA,IAAUq/C,EAAAA,GAAAA,IAAqBviB,EAAMx7B,KAEzC,GAAC,CAAA/D,IAAA,UAAAC,MA8fD,SAAe+C,EAAGC,GACd,OAAKD,IAAMC,MAGND,IAAMC,IAGHD,EAAE0xB,aAAezxB,EAAEyxB,UAC/B,KAACif,CAAA,CA9pBsB,CAAkC54B,EAAAA,IAqgC7D44B,GAAiBwF,mBAAqB,GACtCxF,GAAiB0J,2BAA6B,GAC9C1J,GAAiB8J,8BAAgC,IACjD9J,GAAmB34B,GAAW,CAC1BS,GAAQ,EAAGsmC,GAAAA,GACXtmC,GAAQ,EAAGwI,EAAAA,IACXxI,GAAQ,EAAGqa,GAAAA,IACXra,GAAQ,EAAGsa,EAAAA,GACXta,GAAQ,EAAGwa,GAAAA,IACXxa,GAAQ,EAAGya,GAAAA,IACXza,GAAQ,EAAGumC,GAAAA,GACXvmC,GAAQ,GAAIwmC,GAAAA,KACbtO,IAAkB,IACfuO,GAAqB,SAAA5rB,IAAAn3B,EAAAA,EAAAA,GAAA+iD,EAAA5rB,GAAA,IAAA1iB,GAAAvU,EAAAA,EAAAA,GAAA6iD,GACvB,SAAAA,EAAYC,GAAY,IAAA9kB,EAIK,OAJL39B,EAAAA,EAAAA,GAAA,KAAAwiD,IACpB7kB,EAAAzpB,EAAAjU,KAAA,OACKyiD,YAAcD,EACnB9kB,EAAKglB,aAAe,KACpBhlB,EAAKilB,aAAe,KAAKjlB,CAC7B,CAoCC,OApCAt9B,EAAAA,EAAAA,GAAAmiD,EAAA,EAAAliD,IAAA,cAAAC,MACD,SAAYs/B,GACR,IAAMgjB,EAAiBhjB,EAAMG,SAAS8iB,GAAAA,OAA+BjjB,EAAMG,SAAS+iB,GAAAA,MAAiBC,GAAAA,KAAoBC,YAAY,GAC/HC,EAAiBrjB,EAAMG,SAASmjB,GAAAA,OAA8BtjB,EAAMG,SAASojB,GAAAA,MAAgBC,GAAAA,KAAoBJ,YAAY,GAC7HK,GAAcT,EAAepf,OAAO/iC,KAAKiiD,gBAAkBO,EAAezf,OAAO/iC,KAAKkiD,cAG5F,OAFAliD,KAAKiiD,aAAeE,EACpBniD,KAAKkiD,aAAeM,EACbI,CACX,GAAC,CAAAhjD,IAAA,4BAAAC,MACD,SAA0BglC,EAAa6P,EAAsBC,EAAkBJ,EAAwBsO,EAAqBC,GAExHA,EAAsBA,EAAoBC,MAAK,SAACngD,EAAGC,GAC/C,OAAOD,EAAEuU,gBAAkBtU,EAAEsU,eACjC,IACA0rC,EAAsBA,EAAoBE,MAAK,SAACngD,EAAGC,GAC/C,OAAOD,EAAEuU,gBAAkBtU,EAAEsU,eACjC,IACA,IAAMu7B,EAAQ1yC,KAAKgjD,cAAcne,EAAage,EAAqBC,EAAqBnO,GAElFsO,EAAsBjjD,KAAKkjD,8BAA8BxQ,EAAO7N,EAAa6P,EAAsBC,GACnGwO,EAAsBnjD,KAAKojD,8BAA8B1Q,EAAO7N,EAAa6P,EAAsBC,EAAkBJ,GAC3H,MAAO,CACHjE,SAAU,CACNnhB,YAAa8zB,EAAoB9zB,YACjC8jB,cAAegQ,EAAoBhQ,cACnCP,MAAOA,EAAMpC,UAEjBC,SAAU,CACNphB,YAAag0B,EAAoBh0B,YACjC8jB,cAAekQ,EAAoBlQ,cACnCP,MAAOA,EAAMnC,UAGzB,GAAC,CAAA3wC,IAAA,oBAAAC,MACD,SAAkBwjD,GACd,KACHvB,CAAA,CA1CsB,CAASnnC,EAAAA,IA4C9B2oC,GAAwB,WAC1B,SAAAA,EAAY/+C,IAAQjF,EAAAA,EAAAA,GAAA,KAAAgkD,GAChBtjD,KAAKujD,QAAUh/C,EACfvE,KAAKwjD,QAAU,EACfxjD,KAAK2jC,QAAU,KACf3jC,KAAKyjD,SACT,CASC,OATA9jD,EAAAA,EAAAA,GAAA2jD,EAAA,EAAA1jD,IAAA,UAAAC,MACD,WACIG,KAAKwjD,SACDxjD,KAAKwjD,OAASxjD,KAAKujD,QAAQhhD,OAC3BvC,KAAK2jC,QAAU3jC,KAAKujD,QAAQvjD,KAAKwjD,QAGjCxjD,KAAK2jC,QAAU,IAEvB,KAAC2f,CAAA,CAfyB,GAiBxBI,GAAiB,WACnB,SAAAA,EAAYC,EAAcC,EAAoBC,EAAoB7M,EAAiBlB,IAAiBx2C,EAAAA,EAAAA,GAAA,KAAAokD,GAChG1jD,KAAK2jD,aAAeA,EACpB3jD,KAAK4jD,mBAAqBA,EAC1B5jD,KAAK6jD,mBAAqBA,EAC1B7jD,KAAKg3C,gBAAkBA,EACvBh3C,KAAK81C,gBAAkBA,CAC3B,CAgOC,OAhOAn2C,EAAAA,EAAAA,GAAA+jD,EAAA,EAAA9jD,IAAA,eAAAC,MAUD,WAqCI,IApCA,IAAMikD,EAAqB9jD,KAAKg3C,gBAAgB/jB,UAAU,IACpD8wB,EAAqB/jD,KAAK81C,gBAAgB7iB,UAAU,IACpD+wB,GAA+G,IAAxFhkD,KAAKg3C,gBAAgB/jB,UAAU,KAAqCgxB,eAC3FC,GAA+G,IAAxFlkD,KAAK81C,gBAAgB7iB,UAAU,KAAqCgxB,eAC3FE,EAAeH,GAAuBE,EACtCnf,EAAgB/kC,KAAKg3C,gBAAgBhe,WACrCorB,EAA+BpkD,KAAKg3C,gBAAgBqN,gBAAgBr8C,qBACpEs8C,EAA+BtkD,KAAK81C,gBAAgBuO,gBAAgBr8C,qBACpE3F,EACQ,GADRA,EAEQ,GAEVi/C,EAA2B,EAC3BD,EAA2B,EAC3BF,EAA+B,EAC/BC,EAA+B,EAC/BmD,EAAkC,EAClCC,EAAkC,EAChCC,EAAkB,SAAC7hD,EAAGC,GACxB,OAAOD,EAAEuU,gBAAkBtU,EAAEsU,eACjC,EACMutC,EAA0B,SAACC,EAAaC,GAC1C,GAAqB,OAAjBA,EAAK74C,SAAoB44C,EAAYpiD,OAAS,EAAG,CACjD,IAAMsiD,EAAWF,EAAYA,EAAYpiD,OAAS,GAClD,GAAIsiD,EAAS1tC,kBAAoBytC,EAAKztC,iBAAwC,OAArB0tC,EAAS94C,QAE9D,YADA84C,EAASC,eAAiBF,EAAKE,cAGvC,CACAH,EAAY9yC,KAAK+yC,EACrB,EACMG,EAAoB,IAAIzB,GAAyBtjD,KAAK6jD,oBACtDmB,EAAoB,IAAI1B,GAAyBtjD,KAAK4jD,oBACxDqB,EAAyB,EACzBC,EAAyB,EAEpB1iD,EAAI,EAAGD,EAASvC,KAAK2jD,aAAaphD,OAAQC,GAAKD,EAAQC,IAAK,CACjE,IAAM0kC,EAAc1kC,EAAID,EAASvC,KAAK2jD,aAAanhD,GAAK,KACrC,OAAf0kC,GACAia,EAA+Bja,EAAWE,yBAA2BF,EAAWI,sBAAwB,GAAK,EAAI,GACjH8Z,EAA+Bla,EAAWM,yBAA2BN,EAAWQ,sBAAwB,GAAK,EAAI,GACjH2Z,EAA4Bna,EAAWI,sBAAwB,EAAIoc,EAAkByB,kBAAkBnlD,KAAKg3C,gBAAiB9P,EAAWE,wBAAyBF,EAAWI,uBAAyB,EACrMga,EAA4Bpa,EAAWQ,sBAAwB,EAAIgc,EAAkByB,kBAAkBnlD,KAAK81C,gBAAiB5O,EAAWM,wBAAyBN,EAAWQ,uBAAyB,EACrM6c,EAAkCriD,KAAKsJ,IAAI07B,EAAWE,wBAAyBF,EAAWI,uBAC1Fkd,EAAkCtiD,KAAKsJ,IAAI07B,EAAWM,wBAAyBN,EAAWQ,yBAM1F6c,EAFApD,GAAgC,IAAWE,EAG3CmD,EAFApD,GAAgC,IAAWE,GAK/C,IAAI8D,EAAe,GACfC,EAAe,GAGnB,GAAIlB,EAAa,CACb,IAAIv3C,OAAK,EAGDA,EAFJs6B,EACIA,EAAWI,sBAAwB,EAC3BJ,EAAWE,wBAA0B6d,EAGrC/d,EAAWM,wBAA0B0d,EAKzCngB,EAAc3S,eAAiB6yB,EAAyB,EAEpE,IAAK,IAAIziD,EAAI,EAAGA,EAAIoK,EAAOpK,IAAK,CAC5B,IAAMqnC,EAAqBob,EAAyBziD,EAC9CunC,EAAqBmb,EAAyB1iD,EAC9C8iD,EAAwBlB,EAA6BmB,0BAA0B1b,GAC/E2b,EAAwBlB,EAA6BiB,0BAA0Bxb,GACjFub,EAAwBE,EACxBJ,EAAavzC,KAAK,CACdsF,gBAAiB0yB,EACjBib,cAAeU,EAAwBF,EACvCv5C,QAAS,KACT0jC,cAAe,OAGd6V,EAAwBE,GAC7BH,EAAaxzC,KAAK,CACdsF,gBAAiB4yB,EACjB+a,cAAeQ,EAAwBE,EACvCz5C,QAAS,KACT0jC,cAAe,MAG3B,CACIvI,IACA+d,GAA0B/d,EAAWI,sBAAwB,EAAIJ,EAAWI,sBAAwBJ,EAAWE,yBAA2B,EAC1I8d,GAA0Bhe,EAAWQ,sBAAwB,EAAIR,EAAWQ,sBAAwBR,EAAWM,yBAA2B,EAElJ,CAEA,KAAOud,EAAkBphB,SAAWohB,EAAkBphB,QAAQxsB,iBAAmBqtC,GAAiC,CAC9G,IAAIiB,OAAkB,EAElBA,EADAV,EAAkBphB,QAAQxsB,iBAAmBiqC,EACxBD,EAA+BC,EAA+B2D,EAAkBphB,QAAQxsB,gBAGxFotC,EAEzB,IAAI9U,EAAgB,KAChBvI,GAAcA,EAAWM,yBAA2Bud,EAAkBphB,QAAQxsB,iBAAmB4tC,EAAkBphB,QAAQxsB,iBAAmB+vB,EAAWQ,wBACzJ+H,EAAgBzvC,KAAK0lD,uEAEzBN,EAAavzC,KAAK,CACdsF,gBAAiBsuC,EACjBX,cAAeC,EAAkBphB,QAAQriC,OAASyiD,EAClDh4C,QAAS,KACT0jC,cAAeA,IAEnBsV,EAAkBtB,SACtB,CAEA,KAAOuB,EAAkBrhB,SAAWqhB,EAAkBrhB,QAAQxsB,iBAAmBotC,GAAiC,CAC9G,IAAIkB,OAAkB,EAElBA,EADAT,EAAkBrhB,QAAQxsB,iBAAmBgqC,EACxBC,EAA+BD,EAA+B6D,EAAkBrhB,QAAQxsB,gBAGxFqtC,EAEzBa,EAAaxzC,KAAK,CACdsF,gBAAiBsuC,EACjBX,cAAeE,EAAkBrhB,QAAQriC,OAASwiD,EAClD/3C,QAAS,OAEbi5C,EAAkBvB,SACtB,CACA,GAAmB,OAAfvc,GAAuBye,GAAiBze,GAAa,CACrD,IAAMryB,EAAI7U,KAAK4lD,yBAAyB1e,EAAYma,EAA0BC,GAC1EzsC,GACAuwC,EAAavzC,KAAKgD,EAE1B,CACA,GAAmB,OAAfqyB,GAAuB2e,GAAiB3e,GAAa,CACrD,IAAMryB,EAAI7U,KAAK8lD,yBAAyB5e,EAAYma,EAA0BC,GAC1EzsC,GACAwwC,EAAaxzC,KAAKgD,EAE1B,CAIA,IAAIkxC,EAAoB,EACpBC,EAAoB,EAGxB,IAFAZ,EAAeA,EAAarC,KAAK0B,GACjCY,EAAeA,EAAatC,KAAK0B,GAC1BsB,EAAoBX,EAAa7iD,QAAUyjD,EAAoBX,EAAa9iD,QAAQ,CACvF,IAAM+tC,EAAW8U,EAAaW,GACxBxV,EAAW8U,EAAaW,GACxBC,EAAgB3V,EAASn5B,gBAAkBgqC,EAC3C+E,EAAgB3V,EAASp5B,gBAAkBiqC,EAC7C6E,EAAgBC,GAChBxB,EAAwBriD,EAAiBiuC,GACzCyV,KAEKG,EAAgBD,GACrBvB,EAAwBriD,EAAiBkuC,GACzCyV,KAEK1V,EAAS6V,iBACdzB,EAAwBriD,EAAiBiuC,GACzCyV,KAEKxV,EAAS4V,iBACdzB,EAAwBriD,EAAiBkuC,GACzCyV,KAGI1V,EAASwU,eAAiBvU,EAASuU,eAEnCxU,EAASwU,eAAiBvU,EAASuU,cACnCkB,MAIAzV,EAASuU,eAAiBxU,EAASwU,cACnCiB,IAGZ,CAEA,KAAOA,EAAoBX,EAAa7iD,QACpCmiD,EAAwBriD,EAAiB+iD,EAAaW,IACtDA,IAGJ,KAAOC,EAAoBX,EAAa9iD,QACpCmiD,EAAwBriD,EAAiBgjD,EAAaW,IACtDA,GAGR,CACA,MAAO,CACH1V,SAAUoT,EAAkB0C,gBAAgB/jD,GAC5CkuC,SAAUmT,EAAkB0C,gBAAgB/jD,GAEpD,IAAC,EAAAzC,IAAA,oBAAAC,MAvND,SAAyBiY,EAAQnO,EAAiBE,GAC9C,IAAM2S,EAAQ1E,EAAOkhB,WACf71B,EAAY2U,EAAOusC,gBACzB,GAAI7nC,GAASrZ,EAAW,CACpB,IAAM2nB,EAAYu7B,GAAa7pC,EAAOrZ,EAAWwG,EAAiBE,GAClE,OAAQihB,EAAUjhB,cAAgBihB,EAAUnhB,gBAAkB,CAClE,CACA,OAAQE,EAAgBF,EAAkB,CAC9C,GAAC,CAAA/J,IAAA,kBAAAC,MAgND,SAAuB6yC,GACnB,OAAOA,EAAMppB,KAAI,SAAC0oB,GAId,OAHKA,EAAEjmC,UACHimC,EAAEjmC,QAAUu6C,MAETtU,CACX,GACJ,KAAC0R,CAAA,CAvOkB,GAyOvB,SAAS6C,GAAiB58C,EAAiBiiB,EAAa/hB,EAAegiB,EAAW9mB,GAC9E,MAAO,CACHjF,MAAO,IAAIypB,GAAAA,EAAM5f,EAAiBiiB,EAAa/hB,EAAegiB,GAC9D9mB,QAASA,EAEjB,CACA,IAAMyhD,GAAc,CAChBC,kBAAmBnxB,GAAAA,GAAuBC,SAAS,CAC/CC,YAAa,kCACbkxB,wBAAyB,IAAIC,EAAAA,QAAelnD,EAAW,CAAEmnD,WAAW,EAAMC,mBAAmB,IAAQC,eAAe3zB,EAAAA,GAAa,2BAA4B,2BAC7J4zB,qBAAsB,uBAAyBjlB,EAAAA,EAAUC,YAAYpB,EAAAA,EAAQqmB,YAC7E5Z,OAAQ,QAEZ6Z,WAAY3xB,GAAAA,GAAuBC,SAAS,CACxCC,YAAa,0BACbC,UAAW,gBAEfyxB,oBAAqB5xB,GAAAA,GAAuBC,SAAS,CACjDC,YAAa,qCACbC,UAAW,cACX0xB,aAAa,IAEjBC,WAAY9xB,GAAAA,GAAuBC,SAAS,CACxCC,YAAa,0BACbC,UAAW,gBAEf4xB,oBAAqB/xB,GAAAA,GAAuBC,SAAS,CACjDC,YAAa,qCACbC,UAAW,cACX0xB,aAAa,IAEjBG,WAAYhyB,GAAAA,GAAuBC,SAAS,CACxCC,YAAa,0BACbC,UAAW,cACX8xB,gBAAiB,gBACjBJ,aAAa,IAEjBK,mBAAoBlyB,GAAAA,GAAuBC,SAAS,CAChDC,YAAa,oCACbC,UAAW,cACXgyB,0BAA2B,eAAiB3lB,EAAAA,EAAUC,YAAYoR,IAClEoU,gBAAiB,gBACjBJ,aAAa,IAEjBO,WAAYpyB,GAAAA,GAAuBC,SAAS,CACxCC,YAAa,0BACbC,UAAW,cACX8xB,gBAAiB,gBACjBJ,aAAa,IAEjBQ,mBAAoBryB,GAAAA,GAAuBC,SAAS,CAChDC,YAAa,oCACbC,UAAW,cACXgyB,0BAA2B,eAAiB3lB,EAAAA,EAAUC,YAAYqR,IAClEmU,gBAAiB,gBACjBJ,aAAa,IAEjBS,iBAAkBtyB,GAAAA,GAAuBC,SAAS,CAC9CC,YAAa,iCACb+xB,gBAAiB,mBAGnB9P,GAA0B,SAAAoQ,IAAA9oD,EAAAA,EAAAA,GAAA04C,EAAAoQ,GAAA,IAAA5zC,GAAAhV,EAAAA,EAAAA,GAAAw4C,GAC5B,SAAAA,EAAYsK,EAAY3N,EAAyB0T,GAAkB,IAAAtqB,EAcd,OAdcl+B,EAAAA,EAAAA,GAAA,KAAAm4C,IAC/Dja,EAAAvpB,EAAA1U,KAAA,KAAMwiD,IACDgG,cAA4C,IAA5B3T,EACrB5W,EAAKwqB,cAAgBF,EACrBtqB,EAAKyqB,WAAa,KAClBzqB,EAAK0qB,cAAgB,KACrB1qB,EAAK2qB,mBAAqB,KAC1B3qB,EAAK4qB,MAAQ5qB,EAAK/lB,UAAU,IAAI4wC,EAAAA,EAAK7qB,EAAKwkB,YAAYvB,uBAAqBxvC,EAAAA,EAAAA,GAAAusB,GAAQ,CAAE8qB,YAAa,KAC9F9qB,EAAKuqB,eACLvqB,EAAK4qB,MAAMG,MAAQ,GAEvB/qB,EAAK4qB,MAAMI,YAAW,kBAAMhrB,EAAKirB,kBAAkB,IACnDjrB,EAAK4qB,MAAMnlC,aAAY,SAAC/a,GAAC,OAAKs1B,EAAKkrB,YAAYxgD,EAAE,IACjDs1B,EAAK4qB,MAAMO,UAAS,kBAAMnrB,EAAKorB,gBAAgB,IAC/CprB,EAAK4qB,MAAMS,YAAW,kBAAMrrB,EAAKsrB,cAAc,IAAEtrB,CACrD,CA0LC,OA1LA79B,EAAAA,EAAAA,GAAA83C,EAAA,EAAA73C,IAAA,6BAAAC,MACD,SAA2Bu0C,EAAyB2U,GAChD/oD,KAAKgoD,cAAgBe,EACrB,IAAMC,GAA8C,IAA5B5U,EACpBp0C,KAAK+nD,eAAiBiB,IACtBhpD,KAAK+nD,aAAeiB,EACpBhpD,KAAKooD,MAAMG,MAAQvoD,KAAK+nD,aAAe,EAA6B,EAE5E,GAAC,CAAAnoD,IAAA,SAAAC,MACD,WAA0D,IAAnDopD,EAASjuC,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAGhb,KAAKioD,YAAcjoD,KAAKgoD,cAEjCp0C,EADI5T,KAAKgiD,YAAY9B,YACDlgD,KAAKgiD,YAAYp4B,aAAakrB,oBAAsBvB,GAAiB0J,2BAA6B,GACxHiM,EAAehnD,KAAKktC,OAAO6Z,GAAajpD,KAAKgoD,eAAiBp0C,GAC5Du1C,EAAWjnD,KAAKktC,MAAMpvC,KAAKgoD,cAAgBp0C,GAiBjD,OAhBAs1C,EAAelpD,KAAK+nD,aAAeoB,EAAWD,GAAgBC,EAC1Dv1C,EAAiE,EAAlD6jC,EAA2B2R,sBACtCF,EAAezR,EAA2B2R,uBAC1CF,EAAezR,EAA2B2R,sBAE1CF,EAAet1C,EAAe6jC,EAA2B2R,uBACzDF,EAAet1C,EAAe6jC,EAA2B2R,uBAI7DF,EAAeC,EAEfnpD,KAAKkoD,gBAAkBgB,IACvBlpD,KAAKkoD,cAAgBgB,GAEzBlpD,KAAKooD,MAAMhI,SACJpgD,KAAKkoD,aAChB,GAAC,CAAAtoD,IAAA,mBAAAC,MACD,WACIG,KAAKmoD,mBAAqBnoD,KAAKkoD,aACnC,GAAC,CAAAtoD,IAAA,cAAAC,MACD,SAAYqI,GACR,IACM0L,EADI5T,KAAKgiD,YAAY9B,YACDlgD,KAAKgiD,YAAYp4B,aAAakrB,oBAAsBvB,GAAiB0J,2BAA6B,GACtHiM,EAAelpD,KAAKogD,QAAQpgD,KAAKmoD,oBAAsBjgD,EAAEmhD,SAAWnhD,EAAEohD,SAAW11C,GACvF5T,KAAKioD,WAAaiB,EAAet1C,EACjC5T,KAAKgiD,YAAYtB,iBACrB,GAAC,CAAA9gD,IAAA,iBAAAC,MACD,WACIG,KAAKooD,MAAMhI,QACf,GAAC,CAAAxgD,IAAA,eAAAC,MACD,WACIG,KAAKioD,WAAajoD,KAAKgoD,cACvBhoD,KAAKgiD,YAAYtB,kBACjB1gD,KAAKooD,MAAMhI,QACf,GAAC,CAAAxgD,IAAA,qBAAAC,MACD,SAAmB0pD,GACf,OAAO,CACX,GAAC,CAAA3pD,IAAA,sBAAAC,MACD,SAAoB0pD,GAChB,OAAOvpD,KAAKkoD,aAChB,GAAC,CAAAtoD,IAAA,wBAAAC,MACD,SAAsB0pD,GAClB,OAAOvpD,KAAKgiD,YAAYnF,WAC5B,GAAC,CAAAj9C,IAAA,oBAAAC,MACD,SAAkB2pD,GACdxpD,KAAKooD,MAAMqB,kBAAoBD,EAAOE,MAC1C,GAAC,CAAA9pD,IAAA,gBAAAC,MACD,SAAcglC,EAAamgB,EAAmBD,GAC1C,IAAM7N,EAAiBl3C,KAAKgiD,YAAYhd,oBAClCoS,EAAiBp3C,KAAKgiD,YAAYvf,oBAExC,OADU,IAAIknB,GAA4B9kB,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,GACpGwS,cACb,GAAC,CAAAhqD,IAAA,gCAAAC,MACD,SAA8B6yC,EAAO7N,EAAa6P,EAAsBC,GACpE,IAQoCx6B,EAR9B+8B,EAAiBl3C,KAAKgiD,YAAYhd,oBAClC6kB,EAAoB12C,OAAOnT,KAAKkiD,cAChC7/C,EAAS,CACX8sB,YAAa,GACb8jB,cAAe,IAEblO,EAAgBmS,EAAele,WAC/B8wB,EAAoB5S,EAAemN,gBAAgBjqC,GAAAjC,EAAAA,EAAAA,GAChC0sB,GAAW,IAApC,IAAAzqB,EAAAhC,MAAA+B,EAAAC,EAAA/B,KAAAC,MAAsC,KAA3B4uB,EAAU/sB,EAAAta,MACjB,GAAIgmD,GAAiB3e,GAAa,CAC9B7kC,EAAO8sB,YAAYtd,KAAK,CACpB/R,MAAO,IAAIypB,GAAAA,EAAM2d,EAAWE,wBAAyB,EAAGF,EAAWI,sBAAuB,YAC1FviC,QAAU4vC,EAAmB6R,GAAYmB,mBAAqBnB,GAAYkB,aAEzE/B,GAAiBze,IAAgBA,EAAWgX,aAC7C77C,EAAO8sB,YAAYtd,KAAK00C,GAAiBrf,EAAWE,wBAAyB,EAAGF,EAAWI,sBAAuB,WAAmDkf,GAAYU,sBAErL,IAAMp8B,EAAYu7B,GAAathB,EAAe+kB,EAAmB5iB,EAAWE,wBAAyBF,EAAWI,uBAEhH,GADAjlC,EAAO4wC,cAAcphC,KAAK,IAAIk4C,GAAAA,GAAkBj/B,EAAUnhB,gBAAiBmhB,EAAUjhB,cAAqC,EAAGggD,IACzH3iB,EAAWgX,YAAa,KACuB8L,EADvBC,GAAA9xC,EAAAA,EAAAA,GACC+uB,EAAWgX,aAAW,IAA/C,IAAA+L,EAAA7xC,MAAA4xC,EAAAC,EAAA5xC,KAAAC,MAAiD,KAAtC4xC,EAAUF,EAAAnqD,MACjB,GAAIsqD,GAAqBD,GACrB,GAAIxV,EACA,IAAK,IAAIlzC,EAAa0oD,EAAW9iB,wBAAyB5lC,GAAc0oD,EAAW5iB,sBAAuB9lC,IAAc,CACpH,IAAIoqB,OAAW,EACXC,OAAS,EAETD,EADApqB,IAAe0oD,EAAW9iB,wBACZ8iB,EAAW/L,oBAGXpZ,EAAcqlB,gCAAgC5oD,GAG5DqqB,EADArqB,IAAe0oD,EAAW5iB,sBACd4iB,EAAW9L,kBAGXrZ,EAAcslB,+BAA+B7oD,GAE7Da,EAAO8sB,YAAYtd,KAAK00C,GAAiB/kD,EAAYoqB,EAAapqB,EAAYqqB,EAAW26B,GAAYS,YACzG,MAGA5kD,EAAO8sB,YAAYtd,KAAK00C,GAAiB2D,EAAW9iB,wBAAyB8iB,EAAW/L,oBAAqB+L,EAAW5iB,sBAAuB4iB,EAAW9L,kBAAmBoI,GAAYS,YAGrM,CAAC,OAAApuC,GAAAoxC,EAAA/hD,EAAA2Q,EAAA,SAAAoxC,EAAAnxC,GAAA,CACL,CACJ,CACJ,CAAC,OAAAD,GAAAuB,EAAAlS,EAAA2Q,EAAA,SAAAuB,EAAAtB,GAAA,CACD,OAAOzW,CACX,GAAC,CAAAzC,IAAA,gCAAAC,MACD,SAA8B6yC,EAAO7N,EAAa6P,EAAsBC,EAAkBJ,GACtF,IAQoC+V,EAR9BlT,EAAiBp3C,KAAKgiD,YAAYvf,oBAClConB,EAAoB12C,OAAOnT,KAAKiiD,cAChC5/C,EAAS,CACX8sB,YAAa,GACb8jB,cAAe,IAEbhO,EAAgBmS,EAAepe,WAC/BuxB,EAAoBnT,EAAeiN,gBAAgBmG,GAAAryC,EAAAA,EAAAA,GAChC0sB,GAAW,QAAAlgB,EAAA,WAAE,IAA3BuiB,EAAUojB,EAAAzqD,MAEjB,GAAI00C,EACA,GAAIrN,EAAWQ,sBAAwB,EACnCrlC,EAAO8sB,YAAYtd,KAAK,CACpB/R,MAAO,IAAIypB,GAAAA,EAAM2d,EAAWM,wBAAyB,EAAGN,EAAWM,wBAAyB,GAC5FziC,QAASyhD,GAAYC,wBAGxB,CACD,IAAM9T,EAAWD,EAAMnC,SAAS+I,MAAK,SAAAtH,GAAC,OAAIA,EAAE76B,kBAAoB+vB,EAAWM,uBAAuB,IAC9FmL,IACAA,EAASlD,cA0YjC,WACI,IAAMgb,EAAQr+C,SAASC,cAAc,OAErC,OADAo+C,EAAMh1B,UAAY,uBAAyBqM,EAAAA,EAAUC,YAAYpB,EAAAA,EAAQqmB,YAClExhC,EAAIklC,EAAE,MAAO,CAAC,EAAGD,EAC5B,CA9YiDE,GAEjC,CAEJ,GAAIhF,GAAiBze,GAAa,CAC9B7kC,EAAO8sB,YAAYtd,KAAK,CACpB/R,MAAO,IAAIypB,GAAAA,EAAM2d,EAAWM,wBAAyB,EAAGN,EAAWQ,sBAAuB,YAC1F3iC,QAAU4vC,EAAmB6R,GAAYgB,mBAAqBhB,GAAYc,aAEzEzB,GAAiB3e,IAAgBA,EAAWgX,aAC7C77C,EAAO8sB,YAAYtd,KAAK00C,GAAiBrf,EAAWM,wBAAyB,EAAGN,EAAWQ,sBAAuB,WAAmD8e,GAAYa,sBAErL,IAAMv8B,EAAYu7B,GAAaphB,EAAeslB,EAAmBrjB,EAAWM,wBAAyBN,EAAWQ,uBAEhH,GADArlC,EAAO4wC,cAAcphC,KAAK,IAAIk4C,GAAAA,GAAkBj/B,EAAUnhB,gBAAiBmhB,EAAUjhB,cAAqC,EAAGggD,IACzH3iB,EAAWgX,YAAa,KACuB0M,EADvBC,GAAA1yC,EAAAA,EAAAA,GACC+uB,EAAWgX,aAAW,IAA/C,IAAA2M,EAAAzyC,MAAAwyC,EAAAC,EAAAxyC,KAAAC,MAAiD,KAAtC4xC,EAAUU,EAAA/qD,MACjB,GAAIirD,GAAqBZ,GACrB,GAAIxV,EACA,IAAK,IAAIlzC,EAAa0oD,EAAW1iB,wBAAyBhmC,GAAc0oD,EAAWxiB,sBAAuBlmC,IAAc,CACpH,IAAIoqB,OAAW,EACXC,OAAS,EAETD,EADApqB,IAAe0oD,EAAW1iB,wBACZ0iB,EAAW7L,oBAGXpZ,EAAcmlB,gCAAgC5oD,GAG5DqqB,EADArqB,IAAe0oD,EAAWxiB,sBACdwiB,EAAW5L,kBAGXrZ,EAAcolB,+BAA+B7oD,GAE7Da,EAAO8sB,YAAYtd,KAAK00C,GAAiB/kD,EAAYoqB,EAAapqB,EAAYqqB,EAAW26B,GAAYY,YACzG,MAGA/kD,EAAO8sB,YAAYtd,KAAK00C,GAAiB2D,EAAW1iB,wBAAyB0iB,EAAW7L,oBAAqB6L,EAAWxiB,sBAAuBwiB,EAAW5L,kBAAmBkI,GAAYY,YAGrM,CAAC,OAAAvuC,GAAAgyC,EAAA3iD,EAAA2Q,EAAA,SAAAgyC,EAAA/xC,GAAA,CACL,CACJ,CACJ,EAvDA,IAAA0xC,EAAApyC,MAAAkyC,EAAAE,EAAAnyC,KAAAC,MAAAqM,GAuDC,OAAA9L,GAAA2xC,EAAAtiD,EAAA2Q,EAAA,SAAA2xC,EAAA1xC,GAAA,CACD,OAAOzW,CACX,KAACo1C,CAAA,CA1M2B,CAASqK,IA4MzCrK,GAA2B2R,qBAAuB,IAAI,IAChDO,GAA2B,SAAAoB,IAAAhsD,EAAAA,EAAAA,GAAA4qD,EAAAoB,GAAA,IAAAn0B,GAAA33B,EAAAA,EAAAA,GAAA0qD,GAC7B,SAAAA,EAAY9kB,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,GAAgB,OAAA93C,EAAAA,EAAAA,GAAA,KAAAqqD,GAAA/yB,EAAAr3B,KAAA,KACrFslC,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,EAC7E,CAuBC,OAvBAz3C,EAAAA,EAAAA,GAAAgqD,EAAA,EAAA/pD,IAAA,sEAAAC,MACD,WACI,OAAO,IACX,GAAC,CAAAD,IAAA,2BAAAC,MACD,SAAyBqnC,EAAYma,EAA0BC,GAC3D,OAAIA,EAA2BD,EACpB,CACHlqC,gBAAiBjV,KAAKsJ,IAAI07B,EAAWE,wBAAyBF,EAAWI,uBACzEwd,cAAgBxD,EAA2BD,EAC3Ct1C,QAAS,MAGV,IACX,GAAC,CAAAnM,IAAA,2BAAAC,MACD,SAAyBqnC,EAAYma,EAA0BC,GAC3D,OAAID,EAA2BC,EACpB,CACHnqC,gBAAiBjV,KAAKsJ,IAAI07B,EAAWM,wBAAyBN,EAAWQ,uBACzEod,cAAgBzD,EAA2BC,EAC3Cv1C,QAAS,MAGV,IACX,KAAC49C,CAAA,CA1B4B,CAASjG,IA4BpC/L,GAAsB,SAAAqT,IAAAjsD,EAAAA,EAAAA,GAAA44C,EAAAqT,GAAA,IAAA7xB,GAAAl6B,EAAAA,EAAAA,GAAA04C,GACxB,SAAAA,EAAYoK,EAAY3N,GAAyB,IAAAhW,EAQzC,OARyC9+B,EAAAA,EAAAA,GAAA,KAAAq4C,IAC7CvZ,EAAAjF,EAAA55B,KAAA,KAAMwiD,IACDkJ,iBAAmBlJ,EAAW/c,oBAAoBkY,gBAAgBgO,gBACvE9sB,EAAK3mB,UAAUsqC,EAAW/c,oBAAoBvlB,mBAAkB,SAAC/L,GACzD0qB,EAAK6sB,mBAAqBv3C,EAAWw3C,kBACrC9sB,EAAK6sB,iBAAmBv3C,EAAWw3C,gBACnCnJ,EAAWrB,kBAEnB,KAAItiB,CACR,CA2GC,OA3GAz+B,EAAAA,EAAAA,GAAAg4C,EAAA,EAAA/3C,IAAA,6BAAAC,MACD,SAA2Bu0C,GACvB,GACH,CAAAx0C,IAAA,gBAAAC,MACD,SAAcglC,EAAamgB,EAAmBD,EAAmBpQ,GAC7D,IAAMuC,EAAiBl3C,KAAKgiD,YAAYhd,oBAClCoS,EAAiBp3C,KAAKgiD,YAAYvf,oBAExC,OADiB,IAAI0oB,GAAwBtmB,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,EAAgBzC,GAChHiV,cACpB,GAAC,CAAAhqD,IAAA,gCAAAC,MACD,SAA8B6yC,EAAO7N,EAAa6P,EAAsBC,GACpE,IASoCyW,EAT9BvB,EAAoB12C,OAAOnT,KAAKkiD,cAChC7/C,EAAS,CACX8sB,YAAa,GACb8jB,cAAe,IAEbiE,EAAiBl3C,KAAKgiD,YAAYhd,oBAClCD,EAAgBmS,EAAele,WAC/B8wB,EAAoB5S,EAAemN,gBACrCgH,EAAY,EAAEC,GAAAnzC,EAAAA,EAAAA,GACO0sB,GAAW,IAApC,IAAAymB,EAAAlzC,MAAAgzC,EAAAE,EAAAjzC,KAAAC,MAAsC,KAA3B4uB,EAAUkkB,EAAAvrD,MAEjB,GAAIgmD,GAAiB3e,GAAa,CAK9B,IAJA7kC,EAAO8sB,YAAYtd,KAAK,CACpB/R,MAAO,IAAIypB,GAAAA,EAAM2d,EAAWE,wBAAyB,EAAGF,EAAWI,sBAAuB,YAC1FviC,QAASyhD,GAAYoB,mBAElByD,EAAY3Y,EAAMnC,SAAShuC,QAAQ,CACtC,IAAMgpD,EAAO7Y,EAAMnC,SAAS8a,GAC5B,GAAIE,EAAKnmB,MAAQmmB,EAAKnmB,KAAKgC,yBAA2BF,EAAWE,wBAC7D,MAEJikB,GACJ,CACA,IAAIG,EAAoB,EACxB,GAAIH,EAAY3Y,EAAMnC,SAAShuC,OAAQ,CACnC,IAAMgpD,EAAO7Y,EAAMnC,SAAS8a,GACxBE,EAAKnmB,MACFmmB,EAAKnmB,KAAKgC,0BAA4BF,EAAWE,yBACjDmkB,EAAKnmB,KAAKkC,wBAA0BJ,EAAWI,uBAC/CikB,EAAKnmB,KAAKoC,0BAA4BN,EAAWM,yBACjD+jB,EAAKnmB,KAAKsC,wBAA0BR,EAAWQ,wBAClD8jB,EAAoBD,EAAKzG,cAEjC,CACA,IAAMh6B,EAAYu7B,GAAathB,EAAe+kB,EAAmB5iB,EAAWE,wBAAyBF,EAAWI,uBAChHjlC,EAAO4wC,cAAcphC,KAAK,IAAIk4C,GAAAA,GAAkBj/B,EAAUnhB,gBAAiBmhB,EAAUjhB,cAAe2hD,EAAmB3B,GAC3H,CACJ,CAAC,OAAAhxC,GAAAyyC,EAAApjD,EAAA2Q,EAAA,SAAAyyC,EAAAxyC,GAAA,CACD,OAAOzW,CACX,GAAC,CAAAzC,IAAA,gCAAAC,MACD,SAA8B6yC,EAAO7N,EAAa6P,EAAsBC,EAAkBJ,GACtF,IAQoCkX,EAR9BrU,EAAiBp3C,KAAKgiD,YAAYvf,oBAClConB,EAAoB12C,OAAOnT,KAAKiiD,cAChC5/C,EAAS,CACX8sB,YAAa,GACb8jB,cAAe,IAEbhO,EAAgBmS,EAAepe,WAC/BuxB,EAAoBnT,EAAeiN,gBAAgBqH,GAAAvzC,EAAAA,EAAAA,GAChC0sB,GAAW,IAApC,IAAA6mB,EAAAtzC,MAAAqzC,EAAAC,EAAArzC,KAAAC,MAAsC,KAA3B4uB,EAAUukB,EAAA5rD,MAEjB,GAAI8lD,GAAiBze,GAAa,CAC9B7kC,EAAO8sB,YAAYtd,KAAK,CACpB/R,MAAO,IAAIypB,GAAAA,EAAM2d,EAAWM,wBAAyB,EAAGN,EAAWQ,sBAAuB,YAC1F3iC,QAAU4vC,EAAmB6R,GAAYgB,mBAAqBhB,GAAYc,aAE9E,IAAMx8B,EAAYu7B,GAAaphB,EAAeslB,EAAmBrjB,EAAWM,wBAAyBN,EAAWQ,uBAEhH,GADArlC,EAAO4wC,cAAcphC,KAAK,IAAIk4C,GAAAA,GAAkBj/B,EAAUnhB,gBAAiBmhB,EAAUjhB,cAAqC,EAAGggD,IACzH3iB,EAAWgX,YAAa,KACuByN,EADvBC,GAAAzzC,EAAAA,EAAAA,GACC+uB,EAAWgX,aAAW,IAA/C,IAAA0N,EAAAxzC,MAAAuzC,EAAAC,EAAAvzC,KAAAC,MAAiD,KAAtC4xC,EAAUyB,EAAA9rD,MACjB,GAAIirD,GAAqBZ,GACrB,GAAIxV,EACA,IAAK,IAAIlzC,EAAa0oD,EAAW1iB,wBAAyBhmC,GAAc0oD,EAAWxiB,sBAAuBlmC,IAAc,CACpH,IAAIoqB,OAAW,EACXC,OAAS,EAETD,EADApqB,IAAe0oD,EAAW1iB,wBACZ0iB,EAAW7L,oBAGXpZ,EAAcmlB,gCAAgC5oD,GAG5DqqB,EADArqB,IAAe0oD,EAAWxiB,sBACdwiB,EAAW5L,kBAGXrZ,EAAcolB,+BAA+B7oD,GAE7Da,EAAO8sB,YAAYtd,KAAK00C,GAAiB/kD,EAAYoqB,EAAapqB,EAAYqqB,EAAW26B,GAAYY,YACzG,MAGA/kD,EAAO8sB,YAAYtd,KAAK00C,GAAiB2D,EAAW1iB,wBAAyB0iB,EAAW7L,oBAAqB6L,EAAWxiB,sBAAuBwiB,EAAW5L,kBAAmBkI,GAAYY,YAGrM,CAAC,OAAAvuC,GAAA+yC,EAAA1jD,EAAA2Q,EAAA,SAAA+yC,EAAA9yC,GAAA,CACL,MAEIzW,EAAO8sB,YAAYtd,KAAK00C,GAAiBrf,EAAWM,wBAAyB,EAAGN,EAAWQ,sBAAuB,WAAmD8e,GAAYa,qBAEzL,CACJ,CAAC,OAAAxuC,GAAA6yC,EAAAxjD,EAAA2Q,EAAA,SAAA6yC,EAAA5yC,GAAA,CACD,OAAOzW,CACX,GAAC,CAAAzC,IAAA,SAAAC,MACD,WAEI,OAAOqC,KAAKsJ,IAAI,EAAGxL,KAAKirD,iBAC5B,KAACtT,CAAA,CArHuB,CAASmK,IAuH/BqJ,GAAuB,SAAAU,IAAA9sD,EAAAA,EAAAA,GAAAosD,EAAAU,GAAA,IAAAtuB,GAAAt+B,EAAAA,EAAAA,GAAAksD,GACzB,SAAAA,EAAYtmB,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,EAAgBzC,GAAkB,IAAAjW,EAMlB,OANkBp/B,EAAAA,EAAAA,GAAA,KAAA6rD,IAC7GzsB,EAAAnB,EAAAh+B,KAAA,KAAMslC,EAAamgB,EAAmBD,EAAmB7N,EAAgBE,IACpE0U,eAAiB5U,EAAele,WACrC0F,EAAKqtB,kBAAoBpX,EACzBjW,EAAKstB,mBAAqB,GAC1BttB,EAAKutB,kBAAoB,GACzBvtB,EAAKwtB,oBAAsBxtB,EAAKoX,gBAAgBuO,gBAAgB8H,2BAA2BztB,CAC/F,CAmKC,OAnKA/+B,EAAAA,EAAAA,GAAAwrD,EAAA,EAAAvrD,IAAA,eAAAC,MACD,WACI,IAAMwC,GAAMiL,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA45C,EAAA35C,WAAA,qBAAAjS,KAAA,MAEZ,OADAS,KAAKosD,UAAU/pD,GACRA,CACX,GAAC,CAAAzC,IAAA,sEAAAC,MACD,WACI,IAAMwC,EAAS+J,SAASC,cAAc,OAEtC,OADAhK,EAAOozB,UAAY,gCACZpzB,CACX,GAAC,CAAAzC,IAAA,2BAAAC,MACD,SAAyBqnC,EAAYma,EAA0BC,GAC3D,IAAM7R,EAAgBrjC,SAASC,cAAc,OAE7C,OADAojC,EAAcha,UAAY,gCACnB,CACHte,gBAAiBjV,KAAKsJ,IAAI07B,EAAWE,wBAAyBF,EAAWI,uBACzEwd,cAAexD,EACfv1C,QAASK,SAASC,cAAc,OAChCojC,cAAeA,EAEvB,GAAC,CAAA7vC,IAAA,2BAAAC,MACD,SAAyBqnC,EAAYma,EAA0BC,GAC3D,IAAMv1C,EAAUK,SAASC,cAAc,OACvCN,EAAQ0pB,UAAY,0BAAHrzB,OAA6BiqD,EAAAA,GAC9C,IAAM5c,EAAgBrjC,SAASC,cAAc,OAC7CojC,EAAcha,UAAY,kCAiB1B,IAhBA,IAAMkd,EAAW,CACbwT,iBAAiB,EACjBhvC,gBAAuD,IAArC+vB,EAAWQ,sBAA8BR,EAAWM,wBAA0BN,EAAWM,wBAA0B,EACrIsd,cAAezD,EACfiL,aAAc,EACdvgD,QAASA,EACT0jC,cAAeA,EACfrK,KAAM,CACFgC,wBAAyBF,EAAWE,wBACpCE,sBAAuBJ,EAAWI,sBAClCE,wBAAyBN,EAAWM,wBACpCE,sBAAuBR,EAAWQ,sBAClC3C,cAAe/kC,KAAK8rD,eACpBjc,eAAgB,OAGfruC,EAAa0lC,EAAWE,wBAAyB5lC,GAAc0lC,EAAWI,sBAAuB9lC,IACtGxB,KAAKksD,oBAAoBK,WAAWvsD,KAAK8rD,eAAe/hC,eAAevoB,GAAa,KAAM,MAI9F,OAFAxB,KAAKgsD,mBAAmBn6C,KAAKq1B,GAC7BlnC,KAAKisD,kBAAkBp6C,KAAK8gC,GACrBA,CACX,GAAC,CAAA/yC,IAAA,YAAAC,MACD,SAAUwC,GAkBN,IAjBA,IAAMmqD,EAAwBxsD,KAAK81C,gBAAgBlsB,aAC7CD,EAAU3pB,KAAK81C,gBAAgB9c,WAAWpP,aAAaD,QACvDzY,EAAWs7C,EAAsBxnD,IAAI,IACrCynD,EAAgCD,EAAsBxnD,IAAI,IAC1D0nD,EAAiCx7C,EAASw7C,+BAC1CC,EAAyBH,EAAsBxnD,IAAI,KACnD4lC,EAA4B5qC,KAAK8rD,eAAelhB,4BAChDE,EAAkB9qC,KAAK8rD,eAAehhB,kBACtCnE,EAAa6lB,EAAsBxnD,IAAI,IAEvC4nD,EADaJ,EAAsBxnD,IAAI,KACLwsB,iBAClCq7B,EAAyBL,EAAsBxnD,IAAI,KACnD8nD,EAAmBN,EAAsBxnD,IAAI,IAC7C+nD,EAA0BP,EAAsBxnD,IAAI,IACpDgoD,EAAgBR,EAAsBxnD,IAAI,IAC1CioD,EAAajtD,KAAKksD,oBAAoBgB,WACxCC,EAAiB,EACZ3qD,EAAI,EAAGA,EAAIxC,KAAKgsD,mBAAmBzpD,OAAQC,IAAK,CACrD,IAAM0kC,EAAalnC,KAAKgsD,mBAAmBxpD,GACrCmwC,EAAW3yC,KAAKisD,kBAAkBzpD,GAClCuJ,EAAU4mC,EAAS5mC,SACzBqF,EAAAA,EAAAA,GAAcrF,EAASmF,GACvB,IAAMu+B,EAAgBkD,EAASlD,eAC/Br+B,EAAAA,EAAAA,GAAcq+B,EAAev+B,GAC7B,IAAMie,EAAc,GACpB,GAAI+X,EAAWgX,YAAa,KACuBkP,EADvBC,GAAAl1C,EAAAA,EAAAA,GACC+uB,EAAWgX,aAAW,IAA/C,IAAAmP,EAAAj1C,MAAAg1C,EAAAC,EAAAh1C,KAAAC,MAAiD,KAAtC4xC,EAAUkD,EAAAvtD,MACbsqD,GAAqBD,IACrB/6B,EAAYtd,KAAK,IAAIy7C,EAAAA,GAAiB,IAAI/jC,GAAAA,EAAM2gC,EAAW9iB,wBAAyB8iB,EAAW/L,oBAAqB+L,EAAW5iB,sBAAuB4iB,EAAW9L,mBAAoB,cAAe,GAE5M,CAAC,OAAAvlC,GAAAw0C,EAAAnlD,EAAA2Q,EAAA,SAAAw0C,EAAAv0C,GAAA,CACL,CAMA,IALA,IAAMy0C,EAAkBp+B,EAAY5sB,OAAS,EACvC2N,EAAK,IAAIU,GAAAA,GAAc,KACzB48C,EAAkB,EAClBC,EAAoB,EACpB5d,EAAiB,KACZruC,EAAa0lC,EAAWE,wBAAyB5lC,GAAc0lC,EAAWI,sBAAuB9lC,IAAc,CACpH,IAAM8H,EAAY9H,EAAa0lC,EAAWE,wBACpCmD,EAAavqC,KAAK8rD,eAAe4B,aAAaC,cAAcnsD,GAC5D2oC,EAAcI,EAAWxgB,iBACzB6jC,EAAgBX,EAAWE,KAC3BU,EAAoBC,GAAAA,GAAez7C,OAAO8c,EAAa3tB,EAAY,EAAG2oC,EAAY5nC,OAAS,GACjG,GAAIqrD,EAAe,CACf,IACoDG,EADhDC,EAAkB,EAAEC,GAAA91C,EAAAA,EAAAA,GACEy1C,EAAcM,cAAY,IAApD,IAAAD,EAAA71C,MAAA21C,EAAAE,EAAA51C,KAAAC,MAAsD,KAA3C61C,EAAWJ,EAAAluD,MACZuuD,EAAiB7jB,EAAW8jB,gBAAgBL,EAAiBG,EAAa,GAC1EG,EAAkBnkB,EAAYokB,UAAUP,EAAiBG,GAC/DX,EAAkBtrD,KAAKsJ,IAAIgiD,EAAiBxtD,KAAKwuD,oBAAoBf,IAAqBa,EAAiBF,EAAgBN,GAAAA,GAAeW,eAAeZ,EAAmBG,EAAiBG,GAAcZ,EAAgB3iB,EAA2BE,EAAiB55B,EAAUu7C,EAA+B9lB,EAAYimB,EAAsBC,EAAwBC,EAAkBC,EAAyBC,EAAerjC,EAASzZ,EAAIu/B,IACjbue,EAAkBG,CACtB,CAAC,OAAAt1C,GAAAo1C,EAAA/lD,EAAA2Q,EAAA,SAAAo1C,EAAAn1C,GAAA,CAKD,IAJK+2B,IACDA,EAAiB,IAGdA,EAAettC,OAAS+G,GAC3BumC,EAAeA,EAAettC,QAAU,EAE5CstC,EAAevmC,GAAaskD,EAAcM,aAAa3rD,OACvDowC,EAASmS,eAAkB8I,EAAcM,aAAa3rD,OAAS,EAC/D,IAAMmsD,EAAiBtiD,SAASC,cAAc,OAC9CqiD,EAAej5B,UAAY,gBAC3BpzB,EAAOiuC,SAASz+B,KAAK,CACjBsF,gBAAiB3V,EACjBmtD,YAAa,EACb7J,cAAe8I,EAAcM,aAAa3rD,OAAS,EACnDwJ,QAASu6C,KACT7W,cAAeif,GAEvB,MAEIlB,EAAkBtrD,KAAKsJ,IAAIgiD,EAAiBxtD,KAAKwuD,oBAAoBf,IAAqBtjB,EAAaI,EAAYsjB,EAAmBN,EAAgB3iB,EAA2BE,EAAiB55B,EAAUu7C,EAA+B9lB,EAAYimB,EAAsBC,EAAwBC,EAAkBC,EAAyBC,EAAerjC,EAASzZ,EAAIu/B,GAEpX,CACA+d,GAAmBb,EACnB,IAAMviB,EAAOl6B,EAAGM,QACVo+C,EAAcvb,GAAWA,GAASjkC,WAAWg7B,GAAQA,EAG3D,GAFAr+B,EAAQuD,UAAYs/C,EACpBjc,EAAS2Z,aAAgBkB,EAAkBd,EACvC7c,EAGA,IADA,IAAMzG,EAAMlC,EAAWI,sBAAwBJ,EAAWE,wBACnDyI,EAAettC,QAAU6mC,GAC5ByG,EAAeA,EAAettC,QAAU,EAGhDowC,EAASvN,KAAKyK,eAAiBA,CACnC,CACAxtC,EAAOiuC,SAASyS,MAAK,SAACngD,EAAGC,GACrB,OAAOD,EAAEuU,gBAAkBtU,EAAEsU,eACjC,GACJ,GAAC,CAAAvX,IAAA,sBAAAC,MACD,SAAoB4tD,EAAmBtjB,EAAaI,EAAYpb,EAAao+B,EAAgB3iB,EAA2BE,EAAiB55B,EAAUu7C,EAA+B9lB,EAAYimB,EAAsBC,EAAwBC,EAAkBC,EAAyBC,EAAerjC,EAASzZ,EAAIu/B,GAC/Sv/B,EAAGgD,aAAa,yBACXq6C,GAEDr9C,EAAGgD,aAAa,gBAEpBhD,EAAGgD,aAAa,iBAChBhD,EAAGgD,aAAaC,OAAOs6C,EAAoB9mB,IAC3Cz2B,EAAGgD,aAAa,yBAChB,IAAMw3B,EAAeC,EAAAA,GAAsBD,aAAaP,EAAaS,GAC/DC,EAAcF,EAAAA,GAAsBE,YAAYV,EAAaO,EAAcI,GAC3E+jB,GAAS9jB,EAAAA,EAAAA,IAAe,IAAIC,EAAAA,GAAiB95B,EAAS+5B,cAAgBwhB,EAAgCv7C,EAASg6B,+BAAgCf,GAAa,EAAOO,EAAcG,EAAa,EAAGN,EAAYpb,EAAaxF,EAAS,EAAGzY,EAASi6B,WAAYj6B,EAASk6B,YAAal6B,EAASm6B,cAAewhB,EAAwBC,EAAkBC,EAAyBC,IAAkB1hB,EAAAA,GAAoBC,IAAK,MAC1Zr7B,GAEH,GADAA,EAAGgD,aAAa,UACZlT,KAAK+rD,kBAAmB,CACxB,IAAM+C,EAAgB1iD,SAASC,cAAc,OAC7CyiD,EAAcr5B,UAAY,eAAHrzB,OAAkB0/B,EAAAA,EAAUC,YAAYqR,KAC/D0b,EAActiD,aAAa,QAAS,yBAAFpK,OAA2BqrD,EAAoB9mB,EAAU,aAAAvkC,OAAYwqD,EAAoB,cAAAxqD,OAAaukC,EAAU,gBAClJ8I,EAAcrb,YAAY06B,EAC9B,CACA,OAAOD,EAAOE,iBAAiBC,oBAAoBH,EAAOE,iBAAiBxsD,OAC/E,KAAC4oD,CAAA,CA3KwB,CAASzH,IAgLtC,SAASiC,GAAiBze,GACtB,OAAOA,EAAWQ,sBAAwB,CAC9C,CACA,SAASme,GAAiB3e,GACtB,OAAOA,EAAWI,sBAAwB,CAC9C,CACA,SAASwjB,GAAqBZ,GAC1B,OAAIA,EAAW1iB,0BAA4B0iB,EAAWxiB,sBAC3CwiB,EAAW5L,kBAAoB4L,EAAW7L,oBAAsB,EAEpE6L,EAAWxiB,sBAAwBwiB,EAAW1iB,wBAA0B,CACnF,CACA,SAAS2iB,GAAqBD,GAC1B,OAAIA,EAAW9iB,0BAA4B8iB,EAAW5iB,sBAC3C4iB,EAAW9L,kBAAoB8L,EAAW/L,oBAAsB,EAEpE+L,EAAW5iB,sBAAwB4iB,EAAW9iB,wBAA0B,CACnF,CACA,SAASkf,KACL,IAAMzxC,EAAIzI,SAASC,cAAc,OAEjC,OADAwI,EAAE4gB,UAAY,gBACP5gB,CACX,CAMA,SAASwxC,GAAa7pC,EAAOrZ,EAAWwG,EAAiBE,GACrD,IAAMolD,EAAYzyC,EAAM4V,eAGxB,OAFAzoB,EAAkBzH,KAAKwJ,IAAIujD,EAAW/sD,KAAKsJ,IAAI,EAAG7B,IAClDE,EAAgB3H,KAAKwJ,IAAIujD,EAAW/sD,KAAKsJ,IAAI,EAAG3B,IACzC1G,EAAU6E,qBAAqB+iB,6BAA6B,IAAIxB,GAAAA,EAAM5f,EAAiB6S,EAAM7X,iBAAiBgF,GAAkBE,EAAe2S,EAAMiyB,iBAAiB5kC,IACjL,CACA,SAASsqC,GAA0BpvC,EAASmqD,GACxC,MAAO,CACH9a,yBAAyB+a,EAAAA,EAAAA,IAAsBpqD,EAAQqvC,wBAAyB8a,EAAS9a,yBACzFC,uBAAuB+a,EAAAA,EAAAA,IAAarqD,EAAQsvC,sBAAuB,GAAK,GAAK,IAC7EC,kBAAkB6a,EAAAA,EAAAA,IAAsBpqD,EAAQuvC,iBAAkB4a,EAAS5a,kBAC3EC,wBAAwB4a,EAAAA,EAAAA,IAAsBpqD,EAAQwvC,uBAAwB2a,EAAS3a,wBACvFC,oBAAoB6a,EAAAA,EAAAA,IAAWtqD,EAAQyvC,mBAAoB0a,EAAS1a,mBAAoB,EAAG,YAC3FC,aAAa4a,EAAAA,EAAAA,IAAWtqD,EAAQ0vC,YAAaya,EAASza,YAAa,EAAG,YACtEC,sBAAsBya,EAAAA,EAAAA,IAAsBpqD,EAAQ2vC,qBAAsBwa,EAASxa,sBACnFC,kBAAkBwa,EAAAA,EAAAA,IAAsBpqD,EAAQ4vC,iBAAkBua,EAASva,kBAC3EC,kBAAkBua,EAAAA,EAAAA,IAAsBpqD,EAAQ6vC,iBAAkBsa,EAASta,kBAC3EC,cAAcsa,EAAAA,EAAAA,IAAsBpqD,EAAQ8vC,aAAcqa,EAASra,cACnEC,qBAAqBqa,EAAAA,EAAAA,IAAsBpqD,EAAQ+vC,oBAAqBoa,EAASpa,qBACjFC,cAlDsBl1C,EAkDakF,EAAQgwC,aAlDdiL,EAkD4BkP,EAASna,cAjD/Dua,EAAAA,EAAAA,IAAwBzvD,EAAOmgD,EAAc,CAAC,MAAO,KAAM,aAkD9D7P,eAAemf,EAAAA,EAAAA,IAAwBvqD,EAAQorC,cAAe+e,EAAS/e,cAAe,CAAC,SAAU,YAAa,CAAE,MAAS,SAAU,aAAgB,aACnJ/M,sBAAsB+rB,EAAAA,EAAAA,IAAsBpqD,EAAQq+B,qBAAsB8rB,EAAS9rB,sBACnF4R,aAAc,CACVC,0BAA0B,IAtDtC,IAA8Bp1C,EAAOmgD,CAyDrC,EAkBA9gB,EAAAA,GAAAA,KAA2B,SAACC,EAAOC,GAC/B,IAAMmwB,EAAwBpwB,EAAMG,SAASkwB,GAAAA,KAC7CpwB,EAAUI,QAAQ,qGAADp9B,OAIhBmtD,EAAqB,kDAAAntD,OAErBmtD,EAAqB,UAAAntD,OAASmtD,EAAqB,0FAMxD,G,sNC1lEI30C,EAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EASMm0C,EAAiB,CACnBC,cAAc,EACdC,mBAAmB,EACnBxU,mBAAmB,EACnBC,gBAAgB,GAKTF,EAAa,SAAA7jC,IAAAtY,EAAAA,EAAAA,GAAAm8C,EAAA7jC,GAAA,IAAArY,GAAAC,EAAAA,EAAAA,GAAAi8C,GACpB,SAAAA,EAAYpjC,GAAmF,IAAAzY,EAA3E0F,EAAOiW,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAGomB,EAAgBpmB,UAAAzY,OAAA,EAAAyY,UAAA,QAAAvb,EAAE6jB,EAAkBtI,UAAAzY,OAAA,EAAAyY,UAAA,QAAAvb,EAAEmwD,EAAqB50C,UAAAzY,OAAA,EAAAyY,UAAA,QAAAvb,EAwB5E,OAxB4EH,EAAAA,EAAAA,GAAA,KAAA47C,IACzF77C,EAAAL,EAAAO,KAAA,OACK6hC,iBAAmBA,EACxB/hC,EAAKikB,mBAAqBA,EAC1BjkB,EAAKuwD,sBAAwBA,EAC7BvwD,EAAKwwD,aAAexwD,EAAKoY,UAAU,IAAIqG,EAAAA,IACvCze,EAAKiY,QAAUQ,EACfzY,EAAK2d,SAAW8yC,EAAAA,GAAc/qD,EAAS0qD,GAAgB,GACvDpwD,EAAK0wD,UAAW,EAChB1wD,EAAK2wD,SAAW,EAChB3wD,EAAK0C,OAAS,GACd1C,EAAK4wD,uBAAwB,EAC7B5wD,EAAK6wD,YAAcj3B,QAAQ55B,EAAK2d,SAASm+B,mBACzC97C,EAAKoY,UAAUpY,EAAKiY,QAAQ+qB,iBAAgB,kBAAMhjC,EAAK8wD,gBAAgB,KACnE9wD,EAAK2d,SAAS0yC,cACdrwD,EAAKoY,UAAUpY,EAAKiY,QAAQmrB,oBAAoBvjB,2BAA0B,SAAChX,GACnE7I,EAAK4wD,wBAGT5wD,EAAK+wD,0BAA0BloD,EAAEhI,SAASsB,YAC1CnC,EAAK2wD,SAAW,EACpB,KAGJ3wD,EAAKgxD,QAAQhxD,CACjB,CAiKC,OAjKAM,EAAAA,EAAAA,GAAAu7C,EAAA,EAAAt7C,IAAA,QAAAC,MACD,WACoBG,KAAKsX,QAAQwtB,gBAIjC,GAAC,CAAAllC,IAAA,iBAAAC,MACD,WACIG,KAAKqwD,QACLrwD,KAAKuiC,SAASviC,KAAKsX,QAAQwtB,kBACvB9kC,KAAKkwD,aAEiC,OAAlClwD,KAAKsX,QAAQwtB,mBACb9kC,KAAKkwD,aAAc,EACnBlwD,KAAKgwD,SAAW,EAChBhwD,KAAKkc,KAAK,GAGtB,GAAC,CAAAtc,IAAA,WAAAC,MACD,SAASglC,GAAa,IAAApxB,EAAA,KAElBzT,KAAK+B,OAAS,GACV8iC,GAEAA,EAAYyrB,SAAQ,SAACppB,IACZzzB,EAAKuJ,SAAS2yC,mBAAqBzoB,EAAWgX,YAC/ChX,EAAWgX,YAAYoS,SAAQ,SAACpG,GAC5Bz2C,EAAK1R,OAAO8P,KAAK,CACb0+C,KAAK,EACLzwD,MAAO,IAAIypB,EAAAA,EAAM2gC,EAAW1iB,wBAAyB0iB,EAAW7L,oBAAqB6L,EAAWxiB,sBAAuBwiB,EAAW5L,oBAE1I,IAGyC,IAArCpX,EAAWQ,sBAEXj0B,EAAK1R,OAAO8P,KAAK,CACb0+C,KAAK,EACLzwD,MAAO,IAAIypB,EAAAA,EAAM2d,EAAWM,wBAAyB,EAAGN,EAAWM,wBAA0B,EAAG,KAKpG/zB,EAAK1R,OAAO8P,KAAK,CACb0+C,KAAK,EACLzwD,MAAO,IAAIypB,EAAAA,EAAM2d,EAAWM,wBAAyB,EAAGN,EAAWQ,sBAAwB,EAAG,IAI9G,IAGJ1nC,KAAK+B,OAAOghD,MAAK,SAAC7hD,EAAMusC,GAAK,OAAKlkB,EAAAA,EAAMinC,yBAAyBtvD,EAAKpB,MAAO2tC,EAAM3tC,MAAM,IACzFE,KAAK6vD,aAAa3sC,KAAKljB,KAC3B,GAAC,CAAAJ,IAAA,WAAAC,MACD,SAAS4wD,GACL,IAAIC,GAAQ,EACNxwD,EAAWF,KAAKsX,QAAQ0S,cAC9B,GAAK9pB,EAAL,CAIA,IAAK,IAAIsC,EAAI,EAAGC,EAAMzC,KAAK+B,OAAOQ,OAAQC,EAAIC,IAAQiuD,EAAOluD,IAAK,CAC9D,IAAM1C,EAAQE,KAAK+B,OAAOS,GAAG1C,MACzBI,EAASywD,gBAAgB7wD,EAAMwuB,sBAC/BtuB,KAAKgwD,QAAUxtD,GAAKiuD,EAAM,GAAK,GAC/BC,GAAQ,EAEhB,CACKA,IAED1wD,KAAKgwD,QAAUS,EAAM,EAAIzwD,KAAK+B,OAAOQ,OAAS,GAE9CvC,KAAKgwD,QAAU,IACfhwD,KAAKgwD,QAAUhwD,KAAK+B,OAAOQ,OAAS,EAbxC,MAFIvC,KAAKgwD,QAAU,CAiBvB,GAAC,CAAApwD,IAAA,QAAAC,MACD,SAAM4wD,EAAK/lC,GAEP,GADA2tB,EAAAA,IAAWr4C,KAAK+vD,SAAU,oDACrB/vD,KAAK4wD,cAAV,EAGsB,IAAlB5wD,KAAKgwD,QACLhwD,KAAK6wD,SAASJ,GAETA,GACLzwD,KAAKgwD,SAAW,EACZhwD,KAAKgwD,SAAWhwD,KAAK+B,OAAOQ,SAC5BvC,KAAKgwD,QAAU,KAInBhwD,KAAKgwD,SAAW,EACZhwD,KAAKgwD,QAAU,IACfhwD,KAAKgwD,QAAUhwD,KAAK+B,OAAOQ,OAAS,IAG5C,IAAMuuD,EAAO9wD,KAAK+B,OAAO/B,KAAKgwD,SAC9BhwD,KAAKiwD,uBAAwB,EAC7B,IACI,IAAM9qB,EAAM2rB,EAAKhxD,MAAMwuB,mBACvBtuB,KAAKsX,QAAQ/K,YAAY44B,GACzBnlC,KAAKsX,QAAQ4kC,oBAAoB4U,EAAKhxD,MAAO4qB,GAC7C1qB,KAAKowD,0BAA0BjrB,EAAI3jC,YAAY,EACnD,CAAC,QAEGxB,KAAKiwD,uBAAwB,CACjC,CA1BA,CA2BJ,GAAC,CAAArwD,IAAA,4BAAAC,MACD,SAA0B2B,EAAYuvD,GAClC,IAAIz6C,EACE8gC,EAAoD,QAAlC9gC,EAAKtW,KAAKsX,QAAQ0hB,kBAA+B,IAAP1iB,OAAgB,EAASA,EAAGi6B,SAC9F,GAAK6G,EAAL,CAGA,IAAM4Z,EAAqB5Z,EAAe7nB,mBAAmB/tB,GAAY83C,MAAK,SAAA2X,GAAC,MAA4B,gBAAxBA,EAAElsD,QAAQ0wB,SAA2B,IACxH,GAAIu7B,EACAhxD,KAAKohC,iBAAiBmD,aAAaC,EAAAA,GAAS0sB,kBAAkB,OAE7D,KAAIH,EAML,OAHA/wD,KAAKohC,iBAAiBmD,aAAaC,EAAAA,GAASE,iBAAiB,EAIjE,CACA,IAAMysB,EAAanxD,KAAKsjB,mBAAmBspB,sBACvCmkB,GAAgBI,GAAcH,GAAsBhxD,KAAK4vD,sBAAsBwB,4BAC/ED,EAAW3tB,aAAa,CAAE75B,gBAAiBnI,EAAYoqB,YAAa,EAAG/hB,cAAerI,EAAYqqB,UAAWwlC,OAAOC,YACpHH,EAAWrqC,yBAAyB,mBAhBxC,CAkBJ,GAAC,CAAAlnB,IAAA,cAAAC,MACD,WACI,OAAOG,KAAK+B,QAAU/B,KAAK+B,OAAOQ,OAAS,CAC/C,GAAC,CAAA3C,IAAA,OAAAC,MACD,WAA6C,IAAxC6qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACThb,KAAKuxD,mBAGVvxD,KAAKwxD,OAAM,EAAM9mC,EACrB,GAAC,CAAA9qB,IAAA,WAAAC,MACD,WAAiD,IAAxC6qB,EAAU1P,UAAAzY,OAAA,QAAA9C,IAAAub,UAAA,GAAAA,UAAA,GAAG,EACbhb,KAAKyxD,uBAGVzxD,KAAKwxD,OAAM,EAAO9mC,EACtB,GAAC,CAAA9qB,IAAA,kBAAAC,MACD,WACI,OAAOG,KAAK0xD,mBAAqB1xD,KAAKgwD,QAAUhwD,KAAK+B,OAAOQ,OAAS,CACzE,GAAC,CAAA3C,IAAA,sBAAAC,MACD,WACI,OAAOG,KAAK0xD,mBAAsC,IAAjB1xD,KAAKgwD,OAC1C,GAAC,CAAApwD,IAAA,kBAAAC,MACD,WACI,OAAOo5B,QAAQj5B,KAAKgd,SAASo+B,eACjC,GAAC,CAAAx7C,IAAA,UAAAC,MACD,YACIyN,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAA2pC,EAAA1pC,WAAA,gBAAAjS,KAAA,MACAS,KAAK+B,OAAS,GACd/B,KAAK+vD,UAAW,CACpB,KAAC7U,CAAA,CA3LmB,CAA+BvgC,EAAAA,IA6LvDugC,EAAgBtgC,EAAW,CACvBS,EAAQ,EAAGowB,EAAAA,IACXpwB,EAAQ,EAAGsa,EAAAA,GACXta,EAAQ,EAAG0a,EAAAA,IACZmlB,E,gQC3NCtgC,EAA0C,SAAUC,EAAYlG,EAAQ/U,EAAK2Y,GAC7E,IAA2HuC,EAAvHC,EAAIC,UAAUzY,OAAQsS,EAAIkG,EAAI,EAAIpG,EAAkB,OAAT4D,EAAgBA,EAAO5B,OAAOsE,yBAAyBtG,EAAQ/U,GAAO2Y,EACrH,GAAuB,kBAAZ2C,SAAoD,oBAArBA,QAAQC,SAAyBtG,EAAIqG,QAAQC,SAASN,EAAYlG,EAAQ/U,EAAK2Y,QACpH,IAAK,IAAI/V,EAAIqY,EAAWtY,OAAS,EAAGC,GAAK,EAAGA,KAASsY,EAAID,EAAWrY,MAAIqS,GAAKkG,EAAI,EAAID,EAAEjG,GAAKkG,EAAI,EAAID,EAAEnG,EAAQ/U,EAAKiV,GAAKiG,EAAEnG,EAAQ/U,KAASiV,GAChJ,OAAOkG,EAAI,GAAKlG,GAAK8B,OAAOyE,eAAezG,EAAQ/U,EAAKiV,GAAIA,CAChE,EACIwG,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAU5G,EAAQ/U,GAAO2b,EAAU5G,EAAQ/U,EAAK0b,EAAa,CACxE,EAYWq2C,EAAwB,SAAAC,IAAA7yD,EAAAA,EAAAA,GAAA4yD,EAAAC,GAAA,IAAA5yD,GAAAC,EAAAA,EAAAA,GAAA0yD,GAC/B,SAAAA,EAAY50C,EAAYhY,EAASkY,EAAyB40C,EAAc75C,EAAsBkF,EAAmBC,EAAgBC,EAAmBC,EAAcC,EAAqBC,EAAsBC,EAA8BC,GAAyB,IAAAq0C,EAAAzyD,EAM5J,OAN4JC,EAAAA,EAAAA,GAAA,KAAAqyD,IAChQtyD,EAAAL,EAAAO,KAAA,KAAMwd,EAAYpG,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGi7C,EAAalqC,iBAAkB,CAAElF,uBAAwBovC,EAAaE,8BAAgC90C,EAAyBjF,EAAsBkF,EAAmBC,EAAgBC,EAAmBC,EAAcC,EAAqBC,EAAsBC,EAA8BC,IAC/Uu0C,cAAgBH,EACrBxyD,EAAK4yD,kBAAoBltD,GAEzBuI,EAAAA,EAAAA,IAAAwkD,GAAA7gD,EAAAA,EAAAA,GAAA5R,IAAAkS,EAAAA,EAAAA,GAAAogD,EAAAngD,YAAA,gBAAAsgD,GAAAvyD,KAAAuyD,EAAoBzyD,EAAK4yD,mBACzB5yD,EAAKoY,UAAUo6C,EAAa/yC,0BAAyB,SAAC5W,GAAC,OAAK7I,EAAK6yD,8BAA8BhqD,EAAE,KAAG7I,CACxG,CAWC,OAXAM,EAAAA,EAAAA,GAAAgyD,EAAA,EAAA/xD,IAAA,kBAAAC,MACD,WACI,OAAOG,KAAKgyD,aAChB,GAAC,CAAApyD,IAAA,gCAAAC,MACD,SAA8BqI,IAC1BoF,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAogD,EAAAngD,WAAA,sBAAAjS,KAAA,KAAoBS,KAAKgyD,cAAcrqC,kBACvCra,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAogD,EAAAngD,WAAA,sBAAAjS,KAAA,KAAoBS,KAAKiyD,kBAC7B,GAAC,CAAAryD,IAAA,gBAAAC,MACD,SAAc4nB,GACVqoC,EAAAA,GAAc9vD,KAAKiyD,kBAAmBxqC,GAAY,IAClDna,EAAAA,EAAAA,IAAAiE,EAAAA,EAAAA,GAAAogD,EAAAngD,WAAA,sBAAAjS,KAAA,KAAoBS,KAAKiyD,kBAC7B,KAACN,CAAA,CAnB8B,CAA0C70C,EAAAA,IAqB7E60C,EAA2B/2C,EAAW,CAClCS,EAAQ,EAAGqa,EAAAA,IACXra,EAAQ,EAAGsa,EAAAA,GACXta,EAAQ,EAAGua,EAAAA,GACXva,EAAQ,EAAGwI,EAAAA,IACXxI,EAAQ,EAAGwa,EAAAA,IACXxa,EAAQ,EAAGya,EAAAA,IACXza,EAAQ,GAAI0a,EAAAA,GACZ1a,EAAQ,GAAI2a,EAAAA,IACZ3a,EAAQ,GAAI4a,EAAAA,IACb07B,E","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewController.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewOverlays.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewUserInputEvents.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorContributions.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffReview.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/inlineDiffMargin.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/workerBasedDocumentDiffProvider.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffNavigator.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class RestrictedRenderingContext {\n    constructor(viewLayout, viewportData) {\n        this._restrictedRenderingContextBrand = undefined;\n        this._viewLayout = viewLayout;\n        this.viewportData = viewportData;\n        this.scrollWidth = this._viewLayout.getScrollWidth();\n        this.scrollHeight = this._viewLayout.getScrollHeight();\n        this.visibleRange = this.viewportData.visibleRange;\n        this.bigNumbersDelta = this.viewportData.bigNumbersDelta;\n        const vInfo = this._viewLayout.getCurrentViewport();\n        this.scrollTop = vInfo.top;\n        this.scrollLeft = vInfo.left;\n        this.viewportWidth = vInfo.width;\n        this.viewportHeight = vInfo.height;\n    }\n    getScrolledTopFromAbsoluteTop(absoluteTop) {\n        return absoluteTop - this.scrollTop;\n    }\n    getVerticalOffsetForLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetForLineNumber(lineNumber, includeViewZones);\n    }\n    getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones);\n    }\n    getDecorationsInViewport() {\n        return this.viewportData.getDecorationsInViewport();\n    }\n}\nexport class RenderingContext extends RestrictedRenderingContext {\n    constructor(viewLayout, viewportData, viewLines) {\n        super(viewLayout, viewportData);\n        this._renderingContextBrand = undefined;\n        this._viewLines = viewLines;\n    }\n    linesVisibleRangesForRange(range, includeNewLines) {\n        return this._viewLines.linesVisibleRangesForRange(range, includeNewLines);\n    }\n    visibleRangeForPosition(position) {\n        return this._viewLines.visibleRangeForPosition(position);\n    }\n}\nexport class LineVisibleRanges {\n    constructor(outsideRenderedLine, lineNumber, ranges) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.lineNumber = lineNumber;\n        this.ranges = ranges;\n    }\n}\nexport class HorizontalRange {\n    static from(ranges) {\n        const result = new Array(ranges.length);\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const range = ranges[i];\n            result[i] = new HorizontalRange(range.left, range.width);\n        }\n        return result;\n    }\n    constructor(left, width) {\n        this._horizontalRangeBrand = undefined;\n        this.left = Math.round(left);\n        this.width = Math.round(width);\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n}\nexport class FloatHorizontalRange {\n    constructor(left, width) {\n        this._floatHorizontalRangeBrand = undefined;\n        this.left = left;\n        this.width = width;\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n    static compare(a, b) {\n        return a.left - b.left;\n    }\n}\nexport class HorizontalPosition {\n    constructor(outsideRenderedLine, left) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.originalLeft = left;\n        this.left = Math.round(this.originalLeft);\n    }\n}\nexport class VisibleRanges {\n    constructor(outsideRenderedLine, ranges) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.ranges = ranges;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CoreNavigationCommands } from '../coreCommands.js';\nimport { Position } from '../../common/core/position.js';\nimport * as platform from '../../../base/common/platform.js';\nexport class ViewController {\n    constructor(configuration, viewModel, userInputEvents, commandDelegate) {\n        this.configuration = configuration;\n        this.viewModel = viewModel;\n        this.userInputEvents = userInputEvents;\n        this.commandDelegate = commandDelegate;\n    }\n    paste(text, pasteOnNewLine, multicursorText, mode) {\n        this.commandDelegate.paste(text, pasteOnNewLine, multicursorText, mode);\n    }\n    type(text) {\n        this.commandDelegate.type(text);\n    }\n    compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        this.commandDelegate.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n    }\n    compositionStart() {\n        this.commandDelegate.startComposition();\n    }\n    compositionEnd() {\n        this.commandDelegate.endComposition();\n    }\n    cut() {\n        this.commandDelegate.cut();\n    }\n    setSelection(modelSelection) {\n        CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel, {\n            source: 'keyboard',\n            selection: modelSelection\n        });\n    }\n    _validateViewColumn(viewPosition) {\n        const minColumn = this.viewModel.getLineMinColumn(viewPosition.lineNumber);\n        if (viewPosition.column < minColumn) {\n            return new Position(viewPosition.lineNumber, minColumn);\n        }\n        return viewPosition;\n    }\n    _hasMulticursorModifier(data) {\n        switch (this.configuration.options.get(75 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.altKey;\n            case 'ctrlKey':\n                return data.ctrlKey;\n            case 'metaKey':\n                return data.metaKey;\n            default:\n                return false;\n        }\n    }\n    _hasNonMulticursorModifier(data) {\n        switch (this.configuration.options.get(75 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.ctrlKey || data.metaKey;\n            case 'ctrlKey':\n                return data.altKey || data.metaKey;\n            case 'metaKey':\n                return data.ctrlKey || data.altKey;\n            default:\n                return false;\n        }\n    }\n    dispatchMouse(data) {\n        const options = this.configuration.options;\n        const selectionClipboardIsOn = (platform.isLinux && options.get(103 /* EditorOption.selectionClipboard */));\n        const columnSelection = options.get(20 /* EditorOption.columnSelection */);\n        if (data.middleButton && !selectionClipboardIsOn) {\n            this._columnSelect(data.position, data.mouseColumn, data.inSelectionMode);\n        }\n        else if (data.startedOnLineNumbers) {\n            // If the dragging started on the gutter, then have operations work on the entire line\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n                else {\n                    this._createCursor(data.position, true);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount >= 4) {\n            this._selectAll();\n        }\n        else if (data.mouseDownCount === 3) {\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount === 2) {\n            if (!data.onInjectedText) {\n                if (this._hasMulticursorModifier(data)) {\n                    this._lastCursorWordSelect(data.position, data.revealType);\n                }\n                else {\n                    if (data.inSelectionMode) {\n                        this._wordSelectDrag(data.position, data.revealType);\n                    }\n                    else {\n                        this._wordSelect(data.position, data.revealType);\n                    }\n                }\n            }\n        }\n        else {\n            if (this._hasMulticursorModifier(data)) {\n                if (!this._hasNonMulticursorModifier(data)) {\n                    if (data.shiftKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        // Do multi-cursor operations only when purely alt is pressed\n                        if (data.inSelectionMode) {\n                            this._lastCursorMoveToSelect(data.position, data.revealType);\n                        }\n                        else {\n                            this._createCursor(data.position, false);\n                        }\n                    }\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    if (data.altKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        if (columnSelection) {\n                            this._columnSelect(data.position, data.mouseColumn, true);\n                        }\n                        else {\n                            this._moveToSelect(data.position, data.revealType);\n                        }\n                    }\n                }\n                else {\n                    this.moveTo(data.position, data.revealType);\n                }\n            }\n        }\n    }\n    _usualArgs(viewPosition, revealType) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        return {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition,\n            revealType\n        };\n    }\n    moveTo(viewPosition, revealType) {\n        CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _moveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _columnSelect(viewPosition, mouseColumn, doColumnSelect) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            mouseColumn: mouseColumn,\n            doColumnSelect: doColumnSelect\n        });\n    }\n    _createCursor(viewPosition, wholeLine) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            wholeLine: wholeLine\n        });\n    }\n    _lastCursorMoveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorWordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _selectAll() {\n        CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel, { source: 'mouse' });\n    }\n    // ----------------------\n    _convertViewToModelPosition(viewPosition) {\n        return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(viewPosition);\n    }\n    emitKeyDown(e) {\n        this.userInputEvents.emitKeyDown(e);\n    }\n    emitKeyUp(e) {\n        this.userInputEvents.emitKeyUp(e);\n    }\n    emitContextMenu(e) {\n        this.userInputEvents.emitContextMenu(e);\n    }\n    emitMouseMove(e) {\n        this.userInputEvents.emitMouseMove(e);\n    }\n    emitMouseLeave(e) {\n        this.userInputEvents.emitMouseLeave(e);\n    }\n    emitMouseUp(e) {\n        this.userInputEvents.emitMouseUp(e);\n    }\n    emitMouseDown(e) {\n        this.userInputEvents.emitMouseDown(e);\n    }\n    emitMouseDrag(e) {\n        this.userInputEvents.emitMouseDrag(e);\n    }\n    emitMouseDrop(e) {\n        this.userInputEvents.emitMouseDrop(e);\n    }\n    emitMouseDropCanceled() {\n        this.userInputEvents.emitMouseDropCanceled();\n    }\n    emitMouseWheel(e) {\n        this.userInputEvents.emitMouseWheel(e);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { BugIndicatingError } from '../../../base/common/errors.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nexport class RenderedLinesCollection {\n    constructor(createLine) {\n        this._createLine = createLine;\n        this._set(1, []);\n    }\n    flush() {\n        this._set(1, []);\n    }\n    _set(rendLineNumberStart, lines) {\n        this._lines = lines;\n        this._rendLineNumberStart = rendLineNumberStart;\n    }\n    _get() {\n        return {\n            rendLineNumberStart: this._rendLineNumberStart,\n            lines: this._lines\n        };\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getStartLineNumber() {\n        return this._rendLineNumberStart;\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getEndLineNumber() {\n        return this._rendLineNumberStart + this._lines.length - 1;\n    }\n    getCount() {\n        return this._lines.length;\n    }\n    getLine(lineNumber) {\n        const lineIndex = lineNumber - this._rendLineNumberStart;\n        if (lineIndex < 0 || lineIndex >= this._lines.length) {\n            throw new BugIndicatingError('Illegal value for lineNumber');\n        }\n        return this._lines[lineIndex];\n    }\n    /**\n     * @returns Lines that were removed from this collection\n     */\n    onLinesDeleted(deleteFromLineNumber, deleteToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (deleteToLineNumber < startLineNumber) {\n            // deleting above the viewport\n            const deleteCnt = deleteToLineNumber - deleteFromLineNumber + 1;\n            this._rendLineNumberStart -= deleteCnt;\n            return null;\n        }\n        if (deleteFromLineNumber > endLineNumber) {\n            // deleted below the viewport\n            return null;\n        }\n        // Record what needs to be deleted\n        let deleteStartIndex = 0;\n        let deleteCount = 0;\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const lineIndex = lineNumber - this._rendLineNumberStart;\n            if (deleteFromLineNumber <= lineNumber && lineNumber <= deleteToLineNumber) {\n                // this is a line to be deleted\n                if (deleteCount === 0) {\n                    // this is the first line to be deleted\n                    deleteStartIndex = lineIndex;\n                    deleteCount = 1;\n                }\n                else {\n                    deleteCount++;\n                }\n            }\n        }\n        // Adjust this._rendLineNumberStart for lines deleted above\n        if (deleteFromLineNumber < startLineNumber) {\n            // Something was deleted above\n            let deleteAboveCount = 0;\n            if (deleteToLineNumber < startLineNumber) {\n                // the entire deleted lines are above\n                deleteAboveCount = deleteToLineNumber - deleteFromLineNumber + 1;\n            }\n            else {\n                deleteAboveCount = startLineNumber - deleteFromLineNumber;\n            }\n            this._rendLineNumberStart -= deleteAboveCount;\n        }\n        const deleted = this._lines.splice(deleteStartIndex, deleteCount);\n        return deleted;\n    }\n    onLinesChanged(changeFromLineNumber, changeCount) {\n        const changeToLineNumber = changeFromLineNumber + changeCount - 1;\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let someoneNotified = false;\n        for (let changedLineNumber = changeFromLineNumber; changedLineNumber <= changeToLineNumber; changedLineNumber++) {\n            if (changedLineNumber >= startLineNumber && changedLineNumber <= endLineNumber) {\n                // Notify the line\n                this._lines[changedLineNumber - this._rendLineNumberStart].onContentChanged();\n                someoneNotified = true;\n            }\n        }\n        return someoneNotified;\n    }\n    onLinesInserted(insertFromLineNumber, insertToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const insertCnt = insertToLineNumber - insertFromLineNumber + 1;\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (insertFromLineNumber <= startLineNumber) {\n            // inserting above the viewport\n            this._rendLineNumberStart += insertCnt;\n            return null;\n        }\n        if (insertFromLineNumber > endLineNumber) {\n            // inserting below the viewport\n            return null;\n        }\n        if (insertCnt + insertFromLineNumber > endLineNumber) {\n            // insert inside the viewport in such a way that all remaining lines are pushed outside\n            const deleted = this._lines.splice(insertFromLineNumber - this._rendLineNumberStart, endLineNumber - insertFromLineNumber + 1);\n            return deleted;\n        }\n        // insert inside the viewport, push out some lines, but not all remaining lines\n        const newLines = [];\n        for (let i = 0; i < insertCnt; i++) {\n            newLines[i] = this._createLine();\n        }\n        const insertIndex = insertFromLineNumber - this._rendLineNumberStart;\n        const beforeLines = this._lines.slice(0, insertIndex);\n        const afterLines = this._lines.slice(insertIndex, this._lines.length - insertCnt);\n        const deletedLines = this._lines.slice(this._lines.length - insertCnt, this._lines.length);\n        this._lines = beforeLines.concat(newLines).concat(afterLines);\n        return deletedLines;\n    }\n    onTokensChanged(ranges) {\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let notifiedSomeone = false;\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const rng = ranges[i];\n            if (rng.toLineNumber < startLineNumber || rng.fromLineNumber > endLineNumber) {\n                // range outside viewport\n                continue;\n            }\n            const from = Math.max(startLineNumber, rng.fromLineNumber);\n            const to = Math.min(endLineNumber, rng.toLineNumber);\n            for (let lineNumber = from; lineNumber <= to; lineNumber++) {\n                const lineIndex = lineNumber - this._rendLineNumberStart;\n                this._lines[lineIndex].onTokensChanged();\n                notifiedSomeone = true;\n            }\n        }\n        return notifiedSomeone;\n    }\n}\nexport class VisibleLinesCollection {\n    constructor(host) {\n        this._host = host;\n        this.domNode = this._createDomNode();\n        this._linesCollection = new RenderedLinesCollection(() => this._host.createVisibleLine());\n    }\n    _createDomNode() {\n        const domNode = createFastDomNode(document.createElement('div'));\n        domNode.setClassName('view-layer');\n        domNode.setPosition('absolute');\n        domNode.domNode.setAttribute('role', 'presentation');\n        domNode.domNode.setAttribute('aria-hidden', 'true');\n        return domNode;\n    }\n    // ---- begin view event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(140 /* EditorOption.layoutInfo */)) {\n            return true;\n        }\n        return false;\n    }\n    onFlushed(e) {\n        this._linesCollection.flush();\n        // No need to clear the dom node because a full .innerHTML will occur in ViewLayerRenderer._render\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._linesCollection.onLinesChanged(e.fromLineNumber, e.count);\n    }\n    onLinesDeleted(e) {\n        const deleted = this._linesCollection.onLinesDeleted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onLinesInserted(e) {\n        const deleted = this._linesCollection.onLinesInserted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollTopChanged;\n    }\n    onTokensChanged(e) {\n        return this._linesCollection.onTokensChanged(e.ranges);\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // ---- end view event handlers\n    getStartLineNumber() {\n        return this._linesCollection.getStartLineNumber();\n    }\n    getEndLineNumber() {\n        return this._linesCollection.getEndLineNumber();\n    }\n    getVisibleLine(lineNumber) {\n        return this._linesCollection.getLine(lineNumber);\n    }\n    renderLines(viewportData) {\n        const inp = this._linesCollection._get();\n        const renderer = new ViewLayerRenderer(this.domNode.domNode, this._host, viewportData);\n        const ctx = {\n            rendLineNumberStart: inp.rendLineNumberStart,\n            lines: inp.lines,\n            linesLength: inp.lines.length\n        };\n        // Decide if this render will do a single update (single large .innerHTML) or many updates (inserting/removing dom nodes)\n        const resCtx = renderer.render(ctx, viewportData.startLineNumber, viewportData.endLineNumber, viewportData.relativeVerticalOffset);\n        this._linesCollection._set(resCtx.rendLineNumberStart, resCtx.lines);\n    }\n}\nclass ViewLayerRenderer {\n    constructor(domNode, host, viewportData) {\n        this.domNode = domNode;\n        this.host = host;\n        this.viewportData = viewportData;\n    }\n    render(inContext, startLineNumber, stopLineNumber, deltaTop) {\n        const ctx = {\n            rendLineNumberStart: inContext.rendLineNumberStart,\n            lines: inContext.lines.slice(0),\n            linesLength: inContext.linesLength\n        };\n        if ((ctx.rendLineNumberStart + ctx.linesLength - 1 < startLineNumber) || (stopLineNumber < ctx.rendLineNumberStart)) {\n            // There is no overlap whatsoever\n            ctx.rendLineNumberStart = startLineNumber;\n            ctx.linesLength = stopLineNumber - startLineNumber + 1;\n            ctx.lines = [];\n            for (let x = startLineNumber; x <= stopLineNumber; x++) {\n                ctx.lines[x - startLineNumber] = this.host.createVisibleLine();\n            }\n            this._finishRendering(ctx, true, deltaTop);\n            return ctx;\n        }\n        // Update lines which will remain untouched\n        this._renderUntouchedLines(ctx, Math.max(startLineNumber - ctx.rendLineNumberStart, 0), Math.min(stopLineNumber - ctx.rendLineNumberStart, ctx.linesLength - 1), deltaTop, startLineNumber);\n        if (ctx.rendLineNumberStart > startLineNumber) {\n            // Insert lines before\n            const fromLineNumber = startLineNumber;\n            const toLineNumber = Math.min(stopLineNumber, ctx.rendLineNumberStart - 1);\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart < startLineNumber) {\n            // Remove lines before\n            const removeCnt = Math.min(ctx.linesLength, startLineNumber - ctx.rendLineNumberStart);\n            if (removeCnt > 0) {\n                this._removeLinesBefore(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        ctx.rendLineNumberStart = startLineNumber;\n        if (ctx.rendLineNumberStart + ctx.linesLength - 1 < stopLineNumber) {\n            // Insert lines after\n            const fromLineNumber = ctx.rendLineNumberStart + ctx.linesLength;\n            const toLineNumber = stopLineNumber;\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart + ctx.linesLength - 1 > stopLineNumber) {\n            // Remove lines after\n            const fromLineNumber = Math.max(0, stopLineNumber - ctx.rendLineNumberStart + 1);\n            const toLineNumber = ctx.linesLength - 1;\n            const removeCnt = toLineNumber - fromLineNumber + 1;\n            if (removeCnt > 0) {\n                this._removeLinesAfter(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        this._finishRendering(ctx, false, deltaTop);\n        return ctx;\n    }\n    _renderUntouchedLines(ctx, startIndex, endIndex, deltaTop, deltaLN) {\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const lines = ctx.lines;\n        for (let i = startIndex; i <= endIndex; i++) {\n            const lineNumber = rendLineNumberStart + i;\n            lines[i].layoutLine(lineNumber, deltaTop[lineNumber - deltaLN]);\n        }\n    }\n    _insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = newLines.concat(ctx.lines);\n    }\n    _removeLinesBefore(ctx, removeCount) {\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(0, removeCount);\n    }\n    _insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = ctx.lines.concat(newLines);\n    }\n    _removeLinesAfter(ctx, removeCount) {\n        const removeIndex = ctx.linesLength - removeCount;\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[removeIndex + i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(removeIndex, removeCount);\n    }\n    _finishRenderingNewLines(ctx, domNodeIsEmpty, newLinesHTML, wasNew) {\n        if (ViewLayerRenderer._ttPolicy) {\n            newLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(newLinesHTML);\n        }\n        const lastChild = this.domNode.lastChild;\n        if (domNodeIsEmpty || !lastChild) {\n            this.domNode.innerHTML = newLinesHTML; // explains the ugly casts -> https://github.com/microsoft/vscode/issues/106396#issuecomment-692625393;\n        }\n        else {\n            lastChild.insertAdjacentHTML('afterend', newLinesHTML);\n        }\n        let currChild = this.domNode.lastChild;\n        for (let i = ctx.linesLength - 1; i >= 0; i--) {\n            const line = ctx.lines[i];\n            if (wasNew[i]) {\n                line.setDomNode(currChild);\n                currChild = currChild.previousSibling;\n            }\n        }\n    }\n    _finishRenderingInvalidLines(ctx, invalidLinesHTML, wasInvalid) {\n        const hugeDomNode = document.createElement('div');\n        if (ViewLayerRenderer._ttPolicy) {\n            invalidLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(invalidLinesHTML);\n        }\n        hugeDomNode.innerHTML = invalidLinesHTML;\n        for (let i = 0; i < ctx.linesLength; i++) {\n            const line = ctx.lines[i];\n            if (wasInvalid[i]) {\n                const source = hugeDomNode.firstChild;\n                const lineDomNode = line.getDomNode();\n                lineDomNode.parentNode.replaceChild(source, lineDomNode);\n                line.setDomNode(source);\n            }\n        }\n    }\n    _finishRendering(ctx, domNodeIsEmpty, deltaTop) {\n        const sb = ViewLayerRenderer._sb;\n        const linesLength = ctx.linesLength;\n        const lines = ctx.lines;\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const wasNew = [];\n        {\n            sb.reset();\n            let hadNewLine = false;\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasNew[i] = false;\n                const lineDomNode = line.getDomNode();\n                if (lineDomNode) {\n                    // line is not new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasNew[i] = true;\n                hadNewLine = true;\n            }\n            if (hadNewLine) {\n                this._finishRenderingNewLines(ctx, domNodeIsEmpty, sb.build(), wasNew);\n            }\n        }\n        {\n            sb.reset();\n            let hadInvalidLine = false;\n            const wasInvalid = [];\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasInvalid[i] = false;\n                if (wasNew[i]) {\n                    // line was new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasInvalid[i] = true;\n                hadInvalidLine = true;\n            }\n            if (hadInvalidLine) {\n                this._finishRenderingInvalidLines(ctx, sb.build(), wasInvalid);\n            }\n        }\n    }\n}\nViewLayerRenderer._ttPolicy = createTrustedTypesPolicy('editorViewLayer', { createHTML: value => value });\nViewLayerRenderer._sb = new StringBuilder(100000);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { VisibleLinesCollection } from './viewLayer.js';\nimport { ViewPart } from './viewPart.js';\nexport class ViewOverlays extends ViewPart {\n    constructor(context) {\n        super(context);\n        this._visibleLines = new VisibleLinesCollection(this);\n        this.domNode = this._visibleLines.domNode;\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        this._dynamicOverlays = [];\n        this._isFocused = false;\n        this.domNode.setClassName('view-overlays');\n    }\n    shouldRender() {\n        if (super.shouldRender()) {\n            return true;\n        }\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            if (dynamicOverlay.shouldRender()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        super.dispose();\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            dynamicOverlay.dispose();\n        }\n        this._dynamicOverlays = [];\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    // ---- begin IVisibleLinesHost\n    createVisibleLine() {\n        return new ViewOverlayLine(this._context.configuration, this._dynamicOverlays);\n    }\n    // ---- end IVisibleLinesHost\n    addDynamicOverlay(overlay) {\n        this._dynamicOverlays.push(overlay);\n    }\n    // ----- event handlers\n    onConfigurationChanged(e) {\n        this._visibleLines.onConfigurationChanged(e);\n        const startLineNumber = this._visibleLines.getStartLineNumber();\n        const endLineNumber = this._visibleLines.getEndLineNumber();\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const line = this._visibleLines.getVisibleLine(lineNumber);\n            line.onConfigurationChanged(e);\n        }\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        return true;\n    }\n    onFlushed(e) {\n        return this._visibleLines.onFlushed(e);\n    }\n    onFocusChanged(e) {\n        this._isFocused = e.isFocused;\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._visibleLines.onLinesChanged(e);\n    }\n    onLinesDeleted(e) {\n        return this._visibleLines.onLinesDeleted(e);\n    }\n    onLinesInserted(e) {\n        return this._visibleLines.onLinesInserted(e);\n    }\n    onScrollChanged(e) {\n        return this._visibleLines.onScrollChanged(e) || true;\n    }\n    onTokensChanged(e) {\n        return this._visibleLines.onTokensChanged(e);\n    }\n    onZonesChanged(e) {\n        return this._visibleLines.onZonesChanged(e);\n    }\n    // ----- end event handlers\n    prepareRender(ctx) {\n        const toRender = this._dynamicOverlays.filter(overlay => overlay.shouldRender());\n        for (let i = 0, len = toRender.length; i < len; i++) {\n            const dynamicOverlay = toRender[i];\n            dynamicOverlay.prepareRender(ctx);\n            dynamicOverlay.onDidRender();\n        }\n    }\n    render(ctx) {\n        // Overwriting to bypass `shouldRender` flag\n        this._viewOverlaysRender(ctx);\n        this.domNode.toggleClassName('focused', this._isFocused);\n    }\n    _viewOverlaysRender(ctx) {\n        this._visibleLines.renderLines(ctx.viewportData);\n    }\n}\nexport class ViewOverlayLine {\n    constructor(configuration, dynamicOverlays) {\n        this._configuration = configuration;\n        this._lineHeight = this._configuration.options.get(64 /* EditorOption.lineHeight */);\n        this._dynamicOverlays = dynamicOverlays;\n        this._domNode = null;\n        this._renderedContent = null;\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            return null;\n        }\n        return this._domNode.domNode;\n    }\n    setDomNode(domNode) {\n        this._domNode = createFastDomNode(domNode);\n    }\n    onContentChanged() {\n        // Nothing\n    }\n    onTokensChanged() {\n        // Nothing\n    }\n    onConfigurationChanged(e) {\n        this._lineHeight = this._configuration.options.get(64 /* EditorOption.lineHeight */);\n    }\n    renderLine(lineNumber, deltaTop, viewportData, sb) {\n        let result = '';\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            result += dynamicOverlay.render(viewportData.startLineNumber, lineNumber);\n        }\n        if (this._renderedContent === result) {\n            // No rendering needed\n            return false;\n        }\n        this._renderedContent = result;\n        sb.appendString('<div style=\"position:absolute;top:');\n        sb.appendString(String(deltaTop));\n        sb.appendString('px;width:100%;height:');\n        sb.appendString(String(this._lineHeight));\n        sb.appendString('px;\">');\n        sb.appendString(result);\n        sb.appendString('</div>');\n        return true;\n    }\n    layoutLine(lineNumber, deltaTop) {\n        if (this._domNode) {\n            this._domNode.setTop(deltaTop);\n            this._domNode.setHeight(this._lineHeight);\n        }\n    }\n}\nexport class ContentViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        this.domNode.setHeight(0);\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollWidthChanged;\n    }\n    // --- end event handlers\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        this.domNode.setWidth(Math.max(ctx.scrollWidth, this._contentWidth));\n    }\n}\nexport class MarginViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        this.domNode.setClassName('margin-view-overlays');\n        this.domNode.setWidth(1);\n        applyFontInfo(this.domNode, options.get(48 /* EditorOption.fontInfo */));\n    }\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        applyFontInfo(this.domNode, options.get(48 /* EditorOption.fontInfo */));\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollHeightChanged;\n    }\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        const height = Math.min(ctx.scrollHeight, 1000000);\n        this.domNode.setHeight(height);\n        this.domNode.setWidth(this._contentLeft);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nexport class ViewPart extends ViewEventHandler {\n    constructor(context) {\n        super();\n        this._context = context;\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        super.dispose();\n    }\n}\nexport class PartFingerprints {\n    static write(target, partId) {\n        target.setAttribute('data-mprt', String(partId));\n    }\n    static read(target) {\n        const r = target.getAttribute('data-mprt');\n        if (r === null) {\n            return 0 /* PartFingerprint.None */;\n        }\n        return parseInt(r, 10);\n    }\n    static collect(child, stopAt) {\n        const result = [];\n        let resultLen = 0;\n        while (child && child !== document.body) {\n            if (child === stopAt) {\n                break;\n            }\n            if (child.nodeType === child.ELEMENT_NODE) {\n                result[resultLen++] = this.read(child);\n            }\n            child = child.parentElement;\n        }\n        const r = new Uint8Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            r[i] = result[resultLen - i - 1];\n        }\n        return r;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from '../../common/core/position.js';\nexport class ViewUserInputEvents {\n    constructor(coordinatesConverter) {\n        this.onKeyDown = null;\n        this.onKeyUp = null;\n        this.onContextMenu = null;\n        this.onMouseMove = null;\n        this.onMouseLeave = null;\n        this.onMouseDown = null;\n        this.onMouseUp = null;\n        this.onMouseDrag = null;\n        this.onMouseDrop = null;\n        this.onMouseDropCanceled = null;\n        this.onMouseWheel = null;\n        this._coordinatesConverter = coordinatesConverter;\n    }\n    emitKeyDown(e) {\n        var _a;\n        (_a = this.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitKeyUp(e) {\n        var _a;\n        (_a = this.onKeyUp) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitContextMenu(e) {\n        var _a;\n        (_a = this.onContextMenu) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseMove(e) {\n        var _a;\n        (_a = this.onMouseMove) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseLeave(e) {\n        var _a;\n        (_a = this.onMouseLeave) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDown(e) {\n        var _a;\n        (_a = this.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseUp(e) {\n        var _a;\n        (_a = this.onMouseUp) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrag(e) {\n        var _a;\n        (_a = this.onMouseDrag) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrop(e) {\n        var _a;\n        (_a = this.onMouseDrop) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDropCanceled() {\n        var _a;\n        (_a = this.onMouseDropCanceled) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n    emitMouseWheel(e) {\n        var _a;\n        (_a = this.onMouseWheel) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    _convertViewToModelMouseEvent(e) {\n        if (e.target) {\n            return {\n                event: e.event,\n                target: this._convertViewToModelMouseTarget(e.target)\n            };\n        }\n        return e;\n    }\n    _convertViewToModelMouseTarget(target) {\n        return ViewUserInputEvents.convertViewToModelMouseTarget(target, this._coordinatesConverter);\n    }\n    static convertViewToModelMouseTarget(target, coordinatesConverter) {\n        const result = Object.assign({}, target);\n        if (result.position) {\n            result.position = coordinatesConverter.convertViewPositionToModelPosition(result.position);\n        }\n        if (result.range) {\n            result.range = coordinatesConverter.convertViewRangeToModelRange(result.range);\n        }\n        if (result.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */ || result.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            result.detail = this.convertViewToModelViewZoneData(result.detail, coordinatesConverter);\n        }\n        return result;\n    }\n    static convertViewToModelViewZoneData(data, coordinatesConverter) {\n        return {\n            viewZoneId: data.viewZoneId,\n            positionBefore: data.positionBefore ? coordinatesConverter.convertViewPositionToModelPosition(data.positionBefore) : data.positionBefore,\n            positionAfter: data.positionAfter ? coordinatesConverter.convertViewPositionToModelPosition(data.positionAfter) : data.positionAfter,\n            position: coordinatesConverter.convertViewPositionToModelPosition(data.position),\n            afterLineNumber: coordinatesConverter.convertViewPositionToModelPosition(new Position(data.afterLineNumber, 1)).lineNumber,\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { runWhenIdle } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableMap } from '../../../base/common/lifecycle.js';\nexport class CodeEditorContributions extends Disposable {\n    constructor() {\n        super();\n        this._editor = null;\n        this._instantiationService = null;\n        /**\n         * Contains all instantiated contributions.\n         */\n        this._instances = this._register(new DisposableMap());\n        /**\n         * Contains contributions which are not yet instantiated.\n         */\n        this._pending = new Map();\n        /**\n         * Tracks which instantiation kinds are still left in `_pending`.\n         */\n        this._finishedInstantiation = [];\n        this._finishedInstantiation[0 /* EditorContributionInstantiation.Eager */] = false;\n        this._finishedInstantiation[1 /* EditorContributionInstantiation.AfterFirstRender */] = false;\n        this._finishedInstantiation[2 /* EditorContributionInstantiation.BeforeFirstInteraction */] = false;\n        this._finishedInstantiation[3 /* EditorContributionInstantiation.Eventually */] = false;\n    }\n    initialize(editor, contributions, instantiationService) {\n        this._editor = editor;\n        this._instantiationService = instantiationService;\n        for (const desc of contributions) {\n            if (this._pending.has(desc.id)) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            this._pending.set(desc.id, desc);\n        }\n        this._instantiateSome(0 /* EditorContributionInstantiation.Eager */);\n        // AfterFirstRender\n        // - these extensions will be instantiated at the latest 50ms after the first render.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }));\n        // BeforeFirstInteraction\n        // - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n        }));\n        // Eventually\n        // - these extensions will only be instantiated when there is idle time.\n        // - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(3 /* EditorContributionInstantiation.Eventually */);\n        }, 5000));\n    }\n    saveViewState() {\n        const contributionsState = {};\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        return contributionsState;\n    }\n    restoreViewState(contributionsState) {\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.restoreViewState === 'function') {\n                contribution.restoreViewState(contributionsState[id]);\n            }\n        }\n    }\n    get(id) {\n        this._instantiateById(id);\n        return this._instances.get(id) || null;\n    }\n    onBeforeInteractionEvent() {\n        // this method is called very often by the editor!\n        this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n    }\n    onAfterModelAttached() {\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }, 50));\n    }\n    _instantiateSome(instantiation) {\n        if (this._finishedInstantiation[instantiation]) {\n            // already done with this instantiation!\n            return;\n        }\n        this._finishedInstantiation[instantiation] = true;\n        const contribs = this._findPendingContributionsByInstantiation(instantiation);\n        for (const contrib of contribs) {\n            this._instantiateById(contrib.id);\n        }\n    }\n    _findPendingContributionsByInstantiation(instantiation) {\n        const result = [];\n        for (const [, desc] of this._pending) {\n            if (desc.instantiation === instantiation) {\n                result.push(desc);\n            }\n        }\n        return result;\n    }\n    _instantiateById(id) {\n        const desc = this._pending.get(id);\n        if (!desc) {\n            return;\n        }\n        this._pending.delete(id);\n        if (!this._instantiationService || !this._editor) {\n            throw new Error(`Cannot instantiate contributions before being initialized!`);\n        }\n        try {\n            const instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n            this._instances.set(desc.id, instance);\n            if (typeof instance.restoreViewState === 'function' && desc.instantiation !== 0 /* EditorContributionInstantiation.Eager */) {\n                console.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n            }\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter, EventDeliveryQueue } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorForeground, editorHintForeground, editorInfoForeground, editorWarningForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService, Severity } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { CodeEditorContributions } from './codeEditorContributions.js';\nimport { TabFocus } from '../config/tabFocus.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove, attachedView) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n        this.attachedView = attachedView;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached(this.attachedView);\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nexport let CodeEditorWidget = class CodeEditorWidget extends Disposable {\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._deliveryQueue = new EventDeliveryQueue();\n        this._contributions = this._register(new CodeEditorContributions());\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeModelTokens = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;\n        this._onDidChangeConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onDidChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onDropIntoEditor = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDropIntoEditor = this._onDropIntoEditor.event;\n        this._onContextMenu = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._actions = new Map();\n        this._bannerDomNode = null;\n        this._dropIntoEditorDecorations = this.createDecorationsCollection();\n        codeEditorService.willCreateCodeEditor();\n        const options = Object.assign({}, _options);\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(140 /* EditorOption.layoutInfo */)) {\n                const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        this._contributions.initialize(this, contributions, this._instantiationService);\n        for (const action of EditorExtensionsRegistry.getEditorActions()) {\n            if (this._actions.has(action.id)) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                continue;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\n                });\n            }, this._contextKeyService);\n            this._actions.set(internalAction.id, internalAction);\n        }\n        const isDropIntoEnabled = () => {\n            return !this._configuration.options.get(88 /* EditorOption.readOnly */)\n                && this._configuration.options.get(34 /* EditorOption.dropIntoEditor */).enabled;\n        };\n        this._register(new dom.DragAndDropObserver(this._domElement, {\n            onDragEnter: () => undefined,\n            onDragOver: e => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this.showDropIndicatorAt(target.position);\n                }\n            },\n            onDrop: (e) => __awaiter(this, void 0, void 0, function* () {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                this.removeDropIndicator();\n                if (!e.dataTransfer) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this._onDropIntoEditor.fire({ position: target.position, event: e });\n                }\n            }),\n            onDragLeave: () => {\n                this.removeDropIndicator();\n            },\n            onDragEnd: () => {\n                this.removeDropIndicator();\n            },\n        }));\n        this._codeEditorService.addCodeEditor(this);\n    }\n    writeScreenReaderContent(reason) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.view.writeScreenReaderContent(reason);\n    }\n    _createConfiguration(isSimpleWidget, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        this._actions.clear();\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(126 /* EditorOption.wordSeparators */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* EndOfLinePreference.TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* EndOfLinePreference.LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* EndOfLinePreference.CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        const e = {\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\n            newModelUrl: model ? model.uri : null\n        };\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n        this._contributions.onAfterModelAttached();\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (const decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (const subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getTopForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = false) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getBottomForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    setHiddenAreas(ranges, source) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)), source);\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections(source, [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 0 /* VerticalRevealType.Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something, source);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection, source);\n        }\n    }\n    _setSelectionImpl(sel, source) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections(source, [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* VerticalRevealType.Center */ : 0 /* VerticalRevealType.Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 6 /* VerticalRevealType.NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 3 /* VerticalRevealType.Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* CursorChangeReason.NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n    }\n    hasPendingScrollAnimation() {\n        if (!this._modelData) {\n            return false;\n        }\n        return this._modelData.viewModel.viewLayout.hasPendingScrollAnimation();\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = this._contributions.saveViewState();\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                if (cursorState.length > 0) {\n                    this._modelData.viewModel.restoreCursorState(cursorState);\n                }\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            this._contributions.restoreViewState(codeEditorState.contributionsState || {});\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    getContribution(id) {\n        return this._contributions.get(id);\n    }\n    getActions() {\n        return Array.from(this._actions.values());\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions.get(id) || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* editorCommon.Handler.CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* editorCommon.Handler.CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* editorCommon.Handler.Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* editorCommon.Handler.CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* editorCommon.Handler.Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n                return;\n            }\n            case \"cut\" /* editorCommon.Handler.Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run(payload)).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        const viewModel = this._modelData.viewModel;\n        const startPosition = viewModel.getSelection().getStartPosition();\n        viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(88 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(88 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(88 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    createDecorationsCollection(decorations) {\n        return new EditorDecorationsCollection(this, decorations);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    /**\n     * @deprecated\n     */\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationIds) {\n        if (!this._modelData || decorationIds.length === 0) {\n            return;\n        }\n        this._modelData.model.changeDecorations((changeAccessor) => {\n            changeAccessor.deltaDecorations(decorationIds, []);\n        });\n    }\n    removeDecorationsByType(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.deltaDecorations(oldDecorationsIds, []);\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);\n    }\n    layout(dimension) {\n        this._configuration.observeContainer(dimension);\n        this.render();\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id.');\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(140 /* EditorOption.layoutInfo */);\n        const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(64 /* EditorOption.lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.render(true, forceRedraw);\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(48 /* EditorOption.fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        const attachedView = model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService, this._themeService, attachedView);\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* OutgoingViewModelEventKind.ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* OutgoingViewModelEventKind.FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* OutgoingViewModelEventKind.ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* OutgoingViewModelEventKind.ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* OutgoingViewModelEventKind.HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* OutgoingViewModelEventKind.ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* OutgoingViewModelEventKind.CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        const multiCursorLimit = this.getOption(77 /* EditorOption.multiCursorLimit */);\n                        const message = nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.\", multiCursorLimit);\n                        this._notificationService.prompt(Severity.Warning, message, [\n                            {\n                                label: 'Find and Replace',\n                                run: () => {\n                                    this._commandService.executeCommand('editor.action.startFindReplaceAction');\n                                }\n                            },\n                            {\n                                label: nls.localize('goToSetting', 'Increase Multi Cursor Limit'),\n                                run: () => {\n                                    this._commandService.executeCommand('workbench.action.openSettings2', {\n                                        query: 'editor.multiCursorLimit'\n                                    });\n                                }\n                            }\n                        ]);\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n                case 7 /* OutgoingViewModelEventKind.ModelDecorationsChanged */:\n                    this._onDidChangeModelDecorations.fire(e.event);\n                    break;\n                case 8 /* OutgoingViewModelEventKind.ModelLanguageChanged */:\n                    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n                    this._onDidChangeModelLanguage.fire(e.event);\n                    break;\n                case 9 /* OutgoingViewModelEventKind.ModelLanguageConfigurationChanged */:\n                    this._onDidChangeModelLanguageConfiguration.fire(e.event);\n                    break;\n                case 10 /* OutgoingViewModelEventKind.ModelContentChanged */:\n                    this._onDidChangeModelContent.fire(e.event);\n                    break;\n                case 11 /* OutgoingViewModelEventKind.ModelOptionsChanged */:\n                    this._onDidChangeModelOptions.fire(e.event);\n                    break;\n                case 12 /* OutgoingViewModelEventKind.ModelTokensChanged */:\n                    this._onDidChangeModelTokens.fire(e.event);\n                    break;\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* editorCommon.Handler.Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* editorCommon.Handler.Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* editorCommon.Handler.CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* editorCommon.Handler.CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* editorCommon.Handler.CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* editorCommon.Handler.Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        detachedModel === null || detachedModel === void 0 ? void 0 : detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n    _detachModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n    showDropIndicatorAt(position) {\n        const newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: CodeEditorWidget.dropIntoEditorDecorationOptions\n            }];\n        this._dropIntoEditorDecorations.set(newDecorations);\n        this.revealPosition(position, 1 /* editorCommon.ScrollType.Immediate */);\n    }\n    removeDropIndicator() {\n        this._dropIntoEditorDecorations.clear();\n    }\n};\nCodeEditorWidget.dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n    description: 'workbench-dnd-target',\n    className: 'dnd-target'\n});\nCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], CodeEditorWidget);\nexport class BooleanEventEmitter extends Disposable {\n    constructor(_emitterOptions) {\n        super();\n        this._emitterOptions = _emitterOptions;\n        this._onDidChangeToTrue = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* BooleanEventValue.NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* BooleanEventValue.True */ : 1 /* BooleanEventValue.False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* BooleanEventValue.True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* BooleanEventValue.False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\n/**\n * A regular event emitter that also makes sure contributions are instantiated if necessary\n */\nclass InteractionEmitter extends Emitter {\n    constructor(_contributions, deliveryQueue) {\n        super({ deliveryQueue });\n        this._contributions = _contributions;\n    }\n    fire(event) {\n        this._contributions.onBeforeInteractionEvent();\n        super.fire(event);\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._register(TabFocus.onDidChangeTabFocus(() => this._editorTabMovesFocus.set(TabFocus.getTabFocusMode(\"editorFocus\" /* TabFocusContext.Editor */))));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._editorTabMovesFocus.set(TabFocus.getTabFocusMode(\"editorFocus\" /* TabFocusContext.Editor */));\n        this._editorReadonly.set(options.get(88 /* EditorOption.readOnly */));\n        this._inDiffEditor.set(options.get(59 /* EditorOption.inDiffEditor */));\n        this._editorColumnSelection.set(options.get(20 /* EditorOption.columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(_languageFeaturesService.completionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n        this._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n        this._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n        this._register(_languageFeaturesService.renameProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n        this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInWalkThrough.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n            this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n            this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n            this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n            this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n            this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n            this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n            this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n            this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n            this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n            this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n            this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n            this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n            this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n            this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hasFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasFocus = true;\n            this._onChange.fire(undefined);\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasFocus = false;\n            this._onChange.fire(undefined);\n        }));\n    }\n    hasFocus() {\n        return this._hasFocus;\n    }\n}\nclass EditorDecorationsCollection {\n    get length() {\n        return this._decorationIds.length;\n    }\n    constructor(_editor, decorations) {\n        this._editor = _editor;\n        this._decorationIds = [];\n        this._isChangingDecorations = false;\n        if (Array.isArray(decorations) && decorations.length > 0) {\n            this.set(decorations);\n        }\n    }\n    onDidChange(listener, thisArgs, disposables) {\n        return this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            listener.call(thisArgs, e);\n        }, disposables);\n    }\n    getRange(index) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (index >= this._decorationIds.length) {\n            return null;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n    }\n    getRanges() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const result = [];\n        for (const decorationId of this._decorationIds) {\n            const range = model.getDecorationRange(decorationId);\n            if (range) {\n                result.push(range);\n            }\n        }\n        return result;\n    }\n    has(decoration) {\n        return this._decorationIds.includes(decoration.id);\n    }\n    clear() {\n        if (this._decorationIds.length === 0) {\n            // nothing to do\n            return;\n        }\n        this.set([]);\n    }\n    set(newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n        return this._decorationIds;\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './media/diffReview.css';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { EditorAction, registerEditorAction } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\nimport { Position } from '../../common/core/position.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport * as nls from '../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\nconst DIFF_LINES_PADDING = 3;\nclass DiffEntry {\n    constructor(originalLineStart, originalLineEnd, modifiedLineStart, modifiedLineEnd) {\n        this.originalLineStart = originalLineStart;\n        this.originalLineEnd = originalLineEnd;\n        this.modifiedLineStart = modifiedLineStart;\n        this.modifiedLineEnd = modifiedLineEnd;\n    }\n    getType() {\n        if (this.originalLineStart === 0) {\n            return 1 /* DiffEntryType.Insert */;\n        }\n        if (this.modifiedLineStart === 0) {\n            return 2 /* DiffEntryType.Delete */;\n        }\n        return 0 /* DiffEntryType.Equal */;\n    }\n}\nclass Diff {\n    constructor(entries) {\n        this.entries = entries;\n    }\n}\nconst diffReviewInsertIcon = registerIcon('diff-review-insert', Codicon.add, nls.localize('diffReviewInsertIcon', 'Icon for \\'Insert\\' in diff review.'));\nconst diffReviewRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, nls.localize('diffReviewRemoveIcon', 'Icon for \\'Remove\\' in diff review.'));\nconst diffReviewCloseIcon = registerIcon('diff-review-close', Codicon.close, nls.localize('diffReviewCloseIcon', 'Icon for \\'Close\\' in diff review.'));\nexport let DiffReview = class DiffReview extends Disposable {\n    constructor(diffEditor, _languageService, _audioCueService, _configurationService) {\n        super();\n        this._languageService = _languageService;\n        this._audioCueService = _audioCueService;\n        this._configurationService = _configurationService;\n        this._width = 0;\n        this._diffEditor = diffEditor;\n        this._isVisible = false;\n        this.shadow = createFastDomNode(document.createElement('div'));\n        this.shadow.setClassName('diff-review-shadow');\n        this.actionBarContainer = createFastDomNode(document.createElement('div'));\n        this.actionBarContainer.setClassName('diff-review-actions');\n        this._actionBar = this._register(new ActionBar(this.actionBarContainer.domNode));\n        this._actionBar.push(new Action('diffreview.close', nls.localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(diffReviewCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return this.hide(); })), { label: false, icon: true });\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setClassName('diff-review monaco-editor-background');\n        this._content = createFastDomNode(document.createElement('div'));\n        this._content.setClassName('diff-review-content');\n        this._content.setAttribute('role', 'code');\n        this.scrollbar = this._register(new DomScrollableElement(this._content.domNode, {}));\n        this.domNode.domNode.appendChild(this.scrollbar.getDomNode());\n        this._register(diffEditor.onDidUpdateDiff(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._diffs = this._compute();\n            this._render();\n        }));\n        this._register(diffEditor.getModifiedEditor().onDidChangeCursorPosition(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._render();\n        }));\n        this._register(dom.addStandardDisposableListener(this.domNode.domNode, 'click', (e) => {\n            e.preventDefault();\n            const row = dom.findParentWithClass(e.target, 'diff-review-row');\n            if (row) {\n                this._goToRow(row);\n            }\n        }));\n        this._register(dom.addStandardDisposableListener(this.domNode.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._goToRow(this._getNextRow(), 'next');\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._goToRow(this._getPrevRow(), 'previous');\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)\n                || e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this.accept();\n            }\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('accessibility.verbosity.diffEditor')) {\n                this._diffEditor.updateOptions({ accessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.diffEditor') });\n            }\n        }));\n        this._diffs = [];\n        this._currentDiff = null;\n    }\n    prev() {\n        let index = 0;\n        if (!this._isVisible) {\n            this._diffs = this._compute();\n        }\n        if (this._isVisible) {\n            let currentIndex = -1;\n            for (let i = 0, len = this._diffs.length; i < len; i++) {\n                if (this._diffs[i] === this._currentDiff) {\n                    currentIndex = i;\n                    break;\n                }\n            }\n            index = (this._diffs.length + currentIndex - 1);\n        }\n        else {\n            index = this._findDiffIndex(this._diffEditor.getPosition());\n        }\n        if (this._diffs.length === 0) {\n            // Nothing to do\n            return;\n        }\n        index = index % this._diffs.length;\n        const entries = this._diffs[index].entries;\n        this._diffEditor.setPosition(new Position(entries[0].modifiedLineStart, 1));\n        this._diffEditor.setSelection({ startColumn: 1, startLineNumber: entries[0].modifiedLineStart, endColumn: 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, endLineNumber: entries[entries.length - 1].modifiedLineEnd });\n        this._isVisible = true;\n        this._diffEditor.doLayout();\n        this._render();\n        this._goToRow(this._getPrevRow(), 'previous');\n    }\n    next() {\n        let index = 0;\n        if (!this._isVisible) {\n            this._diffs = this._compute();\n        }\n        if (this._isVisible) {\n            let currentIndex = -1;\n            for (let i = 0, len = this._diffs.length; i < len; i++) {\n                if (this._diffs[i] === this._currentDiff) {\n                    currentIndex = i;\n                    break;\n                }\n            }\n            index = (currentIndex + 1);\n        }\n        else {\n            index = this._findDiffIndex(this._diffEditor.getPosition());\n        }\n        if (this._diffs.length === 0) {\n            // Nothing to do\n            return;\n        }\n        index = index % this._diffs.length;\n        const entries = this._diffs[index].entries;\n        this._diffEditor.setPosition(new Position(entries[0].modifiedLineStart, 1));\n        this._diffEditor.setSelection({ startColumn: 1, startLineNumber: entries[0].modifiedLineStart, endColumn: 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, endLineNumber: entries[entries.length - 1].modifiedLineEnd });\n        this._isVisible = true;\n        this._diffEditor.doLayout();\n        this._render();\n        this._goToRow(this._getNextRow(), 'next');\n    }\n    accept() {\n        let jumpToLineNumber = -1;\n        const current = this._getCurrentFocusedRow();\n        if (current) {\n            const lineNumber = parseInt(current.getAttribute('data-line'), 10);\n            if (!isNaN(lineNumber)) {\n                jumpToLineNumber = lineNumber;\n            }\n        }\n        this.hide();\n        if (jumpToLineNumber !== -1) {\n            this._diffEditor.setPosition(new Position(jumpToLineNumber, 1));\n            this._diffEditor.revealPosition(new Position(jumpToLineNumber, 1), 1 /* ScrollType.Immediate */);\n        }\n    }\n    hide() {\n        this._isVisible = false;\n        this._diffEditor.updateOptions({ readOnly: false });\n        this._diffEditor.focus();\n        this._diffEditor.doLayout();\n        this._render();\n    }\n    _getPrevRow() {\n        const current = this._getCurrentFocusedRow();\n        if (!current) {\n            return this._getFirstRow();\n        }\n        if (current.previousElementSibling) {\n            return current.previousElementSibling;\n        }\n        return current;\n    }\n    _getNextRow() {\n        const current = this._getCurrentFocusedRow();\n        if (!current) {\n            return this._getFirstRow();\n        }\n        if (current.nextElementSibling) {\n            return current.nextElementSibling;\n        }\n        return current;\n    }\n    _getFirstRow() {\n        return this.domNode.domNode.querySelector('.diff-review-row');\n    }\n    _getCurrentFocusedRow() {\n        const result = document.activeElement;\n        if (result && /diff-review-row/.test(result.className)) {\n            return result;\n        }\n        return null;\n    }\n    _goToRow(row, type) {\n        const current = this._getCurrentFocusedRow();\n        row.tabIndex = 0;\n        row.focus();\n        if (current && current !== row) {\n            current.tabIndex = -1;\n        }\n        const element = !type ? current : type === 'next' ? current === null || current === void 0 ? void 0 : current.nextElementSibling : current === null || current === void 0 ? void 0 : current.previousElementSibling;\n        if (element === null || element === void 0 ? void 0 : element.classList.contains(\"line-insert\" /* DiffEditorLineClasses.Insert */)) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineInserted, true);\n        }\n        else if (element === null || element === void 0 ? void 0 : element.classList.contains(\"line-delete\" /* DiffEditorLineClasses.Delete */)) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, true);\n        }\n        this.scrollbar.scanDomNode();\n    }\n    isVisible() {\n        return this._isVisible;\n    }\n    layout(top, width, height) {\n        this._width = width;\n        this.shadow.setTop(top - 6);\n        this.shadow.setWidth(width);\n        this.shadow.setHeight(this._isVisible ? 6 : 0);\n        this.domNode.setTop(top);\n        this.domNode.setWidth(width);\n        this.domNode.setHeight(height);\n        this._content.setHeight(height);\n        this._content.setWidth(width);\n        if (this._isVisible) {\n            this.actionBarContainer.setAttribute('aria-hidden', 'false');\n            this.actionBarContainer.setDisplay('block');\n        }\n        else {\n            this.actionBarContainer.setAttribute('aria-hidden', 'true');\n            this.actionBarContainer.setDisplay('none');\n        }\n    }\n    _compute() {\n        const lineChanges = this._diffEditor.getLineChanges();\n        if (!lineChanges || lineChanges.length === 0) {\n            return [];\n        }\n        const originalModel = this._diffEditor.getOriginalEditor().getModel();\n        const modifiedModel = this._diffEditor.getModifiedEditor().getModel();\n        if (!originalModel || !modifiedModel) {\n            return [];\n        }\n        return DiffReview._mergeAdjacent(lineChanges, originalModel.getLineCount(), modifiedModel.getLineCount());\n    }\n    static _mergeAdjacent(lineChanges, originalLineCount, modifiedLineCount) {\n        if (!lineChanges || lineChanges.length === 0) {\n            return [];\n        }\n        const diffs = [];\n        let diffsLength = 0;\n        for (let i = 0, len = lineChanges.length; i < len; i++) {\n            const lineChange = lineChanges[i];\n            const originalStart = lineChange.originalStartLineNumber;\n            const originalEnd = lineChange.originalEndLineNumber;\n            const modifiedStart = lineChange.modifiedStartLineNumber;\n            const modifiedEnd = lineChange.modifiedEndLineNumber;\n            const r = [];\n            let rLength = 0;\n            // Emit before anchors\n            {\n                const originalEqualAbove = (originalEnd === 0 ? originalStart : originalStart - 1);\n                const modifiedEqualAbove = (modifiedEnd === 0 ? modifiedStart : modifiedStart - 1);\n                // Make sure we don't step into the previous diff\n                let minOriginal = 1;\n                let minModified = 1;\n                if (i > 0) {\n                    const prevLineChange = lineChanges[i - 1];\n                    if (prevLineChange.originalEndLineNumber === 0) {\n                        minOriginal = prevLineChange.originalStartLineNumber + 1;\n                    }\n                    else {\n                        minOriginal = prevLineChange.originalEndLineNumber + 1;\n                    }\n                    if (prevLineChange.modifiedEndLineNumber === 0) {\n                        minModified = prevLineChange.modifiedStartLineNumber + 1;\n                    }\n                    else {\n                        minModified = prevLineChange.modifiedEndLineNumber + 1;\n                    }\n                }\n                let fromOriginal = originalEqualAbove - DIFF_LINES_PADDING + 1;\n                let fromModified = modifiedEqualAbove - DIFF_LINES_PADDING + 1;\n                if (fromOriginal < minOriginal) {\n                    const delta = minOriginal - fromOriginal;\n                    fromOriginal = fromOriginal + delta;\n                    fromModified = fromModified + delta;\n                }\n                if (fromModified < minModified) {\n                    const delta = minModified - fromModified;\n                    fromOriginal = fromOriginal + delta;\n                    fromModified = fromModified + delta;\n                }\n                r[rLength++] = new DiffEntry(fromOriginal, originalEqualAbove, fromModified, modifiedEqualAbove);\n            }\n            // Emit deleted lines\n            {\n                if (originalEnd !== 0) {\n                    r[rLength++] = new DiffEntry(originalStart, originalEnd, 0, 0);\n                }\n            }\n            // Emit inserted lines\n            {\n                if (modifiedEnd !== 0) {\n                    r[rLength++] = new DiffEntry(0, 0, modifiedStart, modifiedEnd);\n                }\n            }\n            // Emit after anchors\n            {\n                const originalEqualBelow = (originalEnd === 0 ? originalStart + 1 : originalEnd + 1);\n                const modifiedEqualBelow = (modifiedEnd === 0 ? modifiedStart + 1 : modifiedEnd + 1);\n                // Make sure we don't step into the next diff\n                let maxOriginal = originalLineCount;\n                let maxModified = modifiedLineCount;\n                if (i + 1 < len) {\n                    const nextLineChange = lineChanges[i + 1];\n                    if (nextLineChange.originalEndLineNumber === 0) {\n                        maxOriginal = nextLineChange.originalStartLineNumber;\n                    }\n                    else {\n                        maxOriginal = nextLineChange.originalStartLineNumber - 1;\n                    }\n                    if (nextLineChange.modifiedEndLineNumber === 0) {\n                        maxModified = nextLineChange.modifiedStartLineNumber;\n                    }\n                    else {\n                        maxModified = nextLineChange.modifiedStartLineNumber - 1;\n                    }\n                }\n                let toOriginal = originalEqualBelow + DIFF_LINES_PADDING - 1;\n                let toModified = modifiedEqualBelow + DIFF_LINES_PADDING - 1;\n                if (toOriginal > maxOriginal) {\n                    const delta = maxOriginal - toOriginal;\n                    toOriginal = toOriginal + delta;\n                    toModified = toModified + delta;\n                }\n                if (toModified > maxModified) {\n                    const delta = maxModified - toModified;\n                    toOriginal = toOriginal + delta;\n                    toModified = toModified + delta;\n                }\n                r[rLength++] = new DiffEntry(originalEqualBelow, toOriginal, modifiedEqualBelow, toModified);\n            }\n            diffs[diffsLength++] = new Diff(r);\n        }\n        // Merge adjacent diffs\n        let curr = diffs[0].entries;\n        const r = [];\n        let rLength = 0;\n        for (let i = 1, len = diffs.length; i < len; i++) {\n            const thisDiff = diffs[i].entries;\n            const currLast = curr[curr.length - 1];\n            const thisFirst = thisDiff[0];\n            if (currLast.getType() === 0 /* DiffEntryType.Equal */\n                && thisFirst.getType() === 0 /* DiffEntryType.Equal */\n                && thisFirst.originalLineStart <= currLast.originalLineEnd) {\n                // We are dealing with equal lines that overlap\n                curr[curr.length - 1] = new DiffEntry(currLast.originalLineStart, thisFirst.originalLineEnd, currLast.modifiedLineStart, thisFirst.modifiedLineEnd);\n                curr = curr.concat(thisDiff.slice(1));\n                continue;\n            }\n            r[rLength++] = new Diff(curr);\n            curr = thisDiff;\n        }\n        r[rLength++] = new Diff(curr);\n        return r;\n    }\n    _findDiffIndex(pos) {\n        const lineNumber = pos.lineNumber;\n        for (let i = 0, len = this._diffs.length; i < len; i++) {\n            const diff = this._diffs[i].entries;\n            const lastModifiedLine = diff[diff.length - 1].modifiedLineEnd;\n            if (lineNumber <= lastModifiedLine) {\n                return i;\n            }\n        }\n        return 0;\n    }\n    _render() {\n        const originalOptions = this._diffEditor.getOriginalEditor().getOptions();\n        const modifiedOptions = this._diffEditor.getModifiedEditor().getOptions();\n        const originalModel = this._diffEditor.getOriginalEditor().getModel();\n        const modifiedModel = this._diffEditor.getModifiedEditor().getModel();\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        if (!this._isVisible || !originalModel || !modifiedModel) {\n            dom.clearNode(this._content.domNode);\n            this._currentDiff = null;\n            this.scrollbar.scanDomNode();\n            return;\n        }\n        this._diffEditor.updateOptions({ readOnly: true });\n        const diffIndex = this._findDiffIndex(this._diffEditor.getPosition());\n        if (this._diffs[diffIndex] === this._currentDiff) {\n            return;\n        }\n        this._currentDiff = this._diffs[diffIndex];\n        const diffs = this._diffs[diffIndex].entries;\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', 'Difference review. Use \"Stage | Unstage | Revert Selected Ranges\" commands');\n        applyFontInfo(container, modifiedOptions.get(48 /* EditorOption.fontInfo */));\n        let minOriginalLine = 0;\n        let maxOriginalLine = 0;\n        let minModifiedLine = 0;\n        let maxModifiedLine = 0;\n        for (let i = 0, len = diffs.length; i < len; i++) {\n            const diffEntry = diffs[i];\n            const originalLineStart = diffEntry.originalLineStart;\n            const originalLineEnd = diffEntry.originalLineEnd;\n            const modifiedLineStart = diffEntry.modifiedLineStart;\n            const modifiedLineEnd = diffEntry.modifiedLineEnd;\n            if (originalLineStart !== 0 && ((minOriginalLine === 0 || originalLineStart < minOriginalLine))) {\n                minOriginalLine = originalLineStart;\n            }\n            if (originalLineEnd !== 0 && ((maxOriginalLine === 0 || originalLineEnd > maxOriginalLine))) {\n                maxOriginalLine = originalLineEnd;\n            }\n            if (modifiedLineStart !== 0 && ((minModifiedLine === 0 || modifiedLineStart < minModifiedLine))) {\n                minModifiedLine = modifiedLineStart;\n            }\n            if (modifiedLineEnd !== 0 && ((maxModifiedLine === 0 || modifiedLineEnd > maxModifiedLine))) {\n                maxModifiedLine = modifiedLineEnd;\n            }\n        }\n        const header = document.createElement('div');\n        header.className = 'diff-review-row';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell diff-review-summary';\n        const originalChangedLinesCnt = maxOriginalLine - minOriginalLine + 1;\n        const modifiedChangedLinesCnt = maxModifiedLine - minModifiedLine + 1;\n        cell.appendChild(document.createTextNode(`${diffIndex + 1}/${this._diffs.length}: @@ -${minOriginalLine},${originalChangedLinesCnt} +${minModifiedLine},${modifiedChangedLinesCnt} @@`));\n        header.setAttribute('data-line', String(minModifiedLine));\n        const getAriaLines = (lines) => {\n            if (lines === 0) {\n                return nls.localize('no_lines_changed', \"no lines changed\");\n            }\n            else if (lines === 1) {\n                return nls.localize('one_line_changed', \"1 line changed\");\n            }\n            else {\n                return nls.localize('more_lines_changed', \"{0} lines changed\", lines);\n            }\n        };\n        const originalChangedLinesCntAria = getAriaLines(originalChangedLinesCnt);\n        const modifiedChangedLinesCntAria = getAriaLines(modifiedChangedLinesCnt);\n        header.setAttribute('aria-label', nls.localize({\n            key: 'header',\n            comment: [\n                'This is the ARIA label for a git diff header.',\n                'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                'Variables 2 and 4 will be numbers (a line number).',\n                'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n            ]\n        }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), this._diffs.length, minOriginalLine, originalChangedLinesCntAria, minModifiedLine, modifiedChangedLinesCntAria));\n        header.appendChild(cell);\n        // @@ -504,7 +517,7 @@\n        header.setAttribute('role', 'listitem');\n        container.appendChild(header);\n        const lineHeight = modifiedOptions.get(64 /* EditorOption.lineHeight */);\n        let modLine = minModifiedLine;\n        for (let i = 0, len = diffs.length; i < len; i++) {\n            const diffEntry = diffs[i];\n            DiffReview._renderSection(container, diffEntry, modLine, lineHeight, this._width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts, this._languageService.languageIdCodec);\n            if (diffEntry.modifiedLineStart !== 0) {\n                modLine = diffEntry.modifiedLineEnd;\n            }\n        }\n        dom.clearNode(this._content.domNode);\n        this._content.domNode.appendChild(container);\n        this.scrollbar.scanDomNode();\n    }\n    static _renderSection(dest, diffEntry, modLine, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts, languageIdCodec) {\n        const type = diffEntry.getType();\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (type) {\n            case 1 /* DiffEntryType.Insert */:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = diffReviewInsertIcon;\n                break;\n            case 2 /* DiffEntryType.Delete */:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = diffReviewRemoveIcon;\n                break;\n        }\n        const originalLineStart = diffEntry.originalLineStart;\n        const originalLineEnd = diffEntry.originalLineEnd;\n        const modifiedLineStart = diffEntry.modifiedLineStart;\n        const modifiedLineEnd = diffEntry.modifiedLineEnd;\n        const cnt = Math.max(modifiedLineEnd - modifiedLineStart, originalLineEnd - originalLineStart);\n        const originalLayoutInfo = originalOptions.get(140 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(140 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        for (let i = 0; i <= cnt; i++) {\n            const originalLine = (originalLineStart === 0 ? 0 : originalLineStart + i);\n            const modifiedLine = (modifiedLineStart === 0 ? 0 : modifiedLineStart + i);\n            const row = document.createElement('div');\n            row.style.minWidth = width + 'px';\n            row.className = rowClassName;\n            row.setAttribute('role', 'listitem');\n            if (modifiedLine !== 0) {\n                modLine = modifiedLine;\n            }\n            row.setAttribute('data-line', String(modLine));\n            const cell = document.createElement('div');\n            cell.className = 'diff-review-cell';\n            cell.style.height = `${lineHeight}px`;\n            row.appendChild(cell);\n            const originalLineNumber = document.createElement('span');\n            originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n            originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n            originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n            if (originalLine !== 0) {\n                originalLineNumber.appendChild(document.createTextNode(String(originalLine)));\n            }\n            else {\n                originalLineNumber.innerText = '\\u00a0';\n            }\n            cell.appendChild(originalLineNumber);\n            const modifiedLineNumber = document.createElement('span');\n            modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n            modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n            modifiedLineNumber.style.paddingRight = '10px';\n            modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n            if (modifiedLine !== 0) {\n                modifiedLineNumber.appendChild(document.createTextNode(String(modifiedLine)));\n            }\n            else {\n                modifiedLineNumber.innerText = '\\u00a0';\n            }\n            cell.appendChild(modifiedLineNumber);\n            const spacer = document.createElement('span');\n            spacer.className = spacerClassName;\n            if (spacerIcon) {\n                const spacerCodicon = document.createElement('span');\n                spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n                spacerCodicon.innerText = '\\u00a0\\u00a0';\n                spacer.appendChild(spacerCodicon);\n            }\n            else {\n                spacer.innerText = '\\u00a0\\u00a0';\n            }\n            cell.appendChild(spacer);\n            let lineContent;\n            if (modifiedLine !== 0) {\n                let html = this._renderLine(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, modifiedLine, languageIdCodec);\n                if (DiffReview._ttPolicy) {\n                    html = DiffReview._ttPolicy.createHTML(html);\n                }\n                cell.insertAdjacentHTML('beforeend', html);\n                lineContent = modifiedModel.getLineContent(modifiedLine);\n            }\n            else {\n                let html = this._renderLine(originalModel, originalOptions, originalModelOpts.tabSize, originalLine, languageIdCodec);\n                if (DiffReview._ttPolicy) {\n                    html = DiffReview._ttPolicy.createHTML(html);\n                }\n                cell.insertAdjacentHTML('beforeend', html);\n                lineContent = originalModel.getLineContent(originalLine);\n            }\n            if (lineContent.length === 0) {\n                lineContent = nls.localize('blankLine', \"blank\");\n            }\n            let ariaLabel = '';\n            switch (type) {\n                case 0 /* DiffEntryType.Equal */:\n                    if (originalLine === modifiedLine) {\n                        ariaLabel = nls.localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, originalLine);\n                    }\n                    else {\n                        ariaLabel = nls.localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, originalLine, modifiedLine);\n                    }\n                    break;\n                case 1 /* DiffEntryType.Insert */:\n                    ariaLabel = nls.localize('insertLine', \"+ {0} modified line {1}\", lineContent, modifiedLine);\n                    break;\n                case 2 /* DiffEntryType.Delete */:\n                    ariaLabel = nls.localize('deleteLine', \"- {0} original line {1}\", lineContent, originalLine);\n                    break;\n            }\n            row.setAttribute('aria-label', ariaLabel);\n            dest.appendChild(row);\n        }\n    }\n    static _renderLine(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(31 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(113 /* EditorOption.stopRenderingLineAfter */), options.get(95 /* EditorOption.renderWhitespace */), options.get(90 /* EditorOption.renderControlCharacters */), options.get(49 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nDiffReview._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nDiffReview = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IAudioCueService),\n    __param(3, IConfigurationService)\n], DiffReview);\n// theming\nclass DiffReviewNext extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.diffReview.next',\n            label: nls.localize('editor.action.diffReview.next', \"Go to Next Difference\"),\n            alias: 'Go to Next Difference',\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            kbOpts: {\n                kbExpr: null,\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.diffReviewNext();\n    }\n}\nclass DiffReviewPrev extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.diffReview.prev',\n            label: nls.localize('editor.action.diffReview.prev', \"Go to Previous Difference\"),\n            alias: 'Go to Previous Difference',\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            kbOpts: {\n                kbExpr: null,\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.diffReviewPrev();\n    }\n}\nfunction findFocusedDiffEditor(accessor) {\n    var _a;\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n    if (!activeCodeEditor) {\n        return null;\n    }\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\n        const diffEditor = diffEditors[i];\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n            return diffEditor;\n        }\n    }\n    return null;\n}\nregisterEditorAction(DiffReviewNext);\nregisterEditorAction(DiffReviewPrev);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Range } from '../../common/core/range.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isIOS } from '../../../base/common/platform.js';\nexport class InlineDiffMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            if (_visibility) {\n                this._diffActions.style.visibility = 'visible';\n            }\n            else {\n                this._diffActions.style.visibility = 'hidden';\n            }\n        }\n    }\n    constructor(_viewZoneId, _marginDomNode, editor, diff, _contextMenuService, _clipboardService) {\n        super();\n        this._viewZoneId = _viewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this.editor = editor;\n        this.diff = diff;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = editor.getOption(64 /* EditorOption.lineHeight */);\n        const lineFeed = editor.getModel().getEOL();\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        const actions = [];\n        const isDeletion = diff.modifiedEndLineNumber === 0;\n        // default action\n        actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n            ? (diff.originalEndLineNumber > diff.modifiedStartLineNumber\n                ? nls.localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                : nls.localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n            : (diff.originalEndLineNumber > diff.modifiedStartLineNumber\n                ? nls.localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                : nls.localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n            const range = new Range(diff.originalStartLineNumber, 1, diff.originalEndLineNumber + 1, 1);\n            const deletedText = diff.originalModel.getValueInRange(range);\n            yield this._clipboardService.writeText(deletedText);\n        })));\n        let currentLineNumberOffset = 0;\n        let copyLineAction = undefined;\n        if (diff.originalEndLineNumber > diff.modifiedStartLineNumber) {\n            copyLineAction = new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                ? nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber)\n                : nls.localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", diff.originalStartLineNumber), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                const lineContent = diff.originalModel.getLineContent(diff.originalStartLineNumber + currentLineNumberOffset);\n                if (lineContent === '') {\n                    // empty line\n                    const eof = diff.originalModel.getEndOfLineSequence();\n                    yield this._clipboardService.writeText(eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n');\n                }\n                else {\n                    yield this._clipboardService.writeText(lineContent);\n                }\n            }));\n            actions.push(copyLineAction);\n        }\n        const readOnly = editor.getOption(88 /* EditorOption.readOnly */);\n        if (!readOnly) {\n            actions.push(new Action('diff.inline.revertChange', nls.localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                const range = new Range(diff.originalStartLineNumber, 1, diff.originalEndLineNumber, diff.originalModel.getLineMaxColumn(diff.originalEndLineNumber));\n                const deletedText = diff.originalModel.getValueInRange(range);\n                if (diff.modifiedEndLineNumber === 0) {\n                    // deletion only\n                    const column = editor.getModel().getLineMaxColumn(diff.modifiedStartLineNumber);\n                    editor.executeEdits('diffEditor', [\n                        {\n                            range: new Range(diff.modifiedStartLineNumber, column, diff.modifiedStartLineNumber, column),\n                            text: lineFeed + deletedText\n                        }\n                    ]);\n                }\n                else {\n                    const column = editor.getModel().getLineMaxColumn(diff.modifiedEndLineNumber);\n                    editor.executeEdits('diffEditor', [\n                        {\n                            range: new Range(diff.modifiedStartLineNumber, 1, diff.modifiedEndLineNumber, column),\n                            text: deletedText\n                        }\n                    ]);\n                }\n            })));\n        }\n        const useShadowDOM = editor.getOption(123 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => {\n                    return {\n                        x,\n                        y\n                    };\n                },\n                getActions: () => {\n                    if (copyLineAction) {\n                        copyLineAction.label =\n                            isDeletion\n                                ? nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset)\n                                : nls.localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset);\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(dom.addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            const { top, height } = dom.getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(editor.onMouseMove((e) => {\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._viewZoneId) {\n                    this.visibility = true;\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                }\n                else {\n                    this.visibility = false;\n                }\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(editor.onMouseDown((e) => {\n            if (!e.event.rightButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._viewZoneId) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = dom.getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this.diff.viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this.diff.viewLineCounts.length; i++) {\n                acc += this.diff.viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { LineRangeMapping, RangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nexport let WorkerBasedDocumentDiffProvider = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    computeDiff(original, modified, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.diffAlgorithm !== 'string') {\n                return this.diffAlgorithm.computeDiff(original, modified, options);\n            }\n            // This significantly speeds up the case when the original file is empty\n            if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n                return {\n                    changes: [\n                        new LineRangeMapping(new LineRange(1, 1), new LineRange(1, modified.getLineCount()), [\n                            new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                        ])\n                    ],\n                    identical: false,\n                    quitEarly: false,\n                };\n            }\n            const sw = StopWatch.create(true);\n            const result = yield this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n            const timeMs = sw.elapsed();\n            this.telemetryService.publicLog2('diffEditor.computeDiff', {\n                timeMs,\n                timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n            });\n            if (!result) {\n                throw new Error('no diff result available');\n            }\n            return result;\n        });\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport * as assert from '../../../base/common/assert.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './media/diffEditor.css';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../stableEditorScroll.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { DiffNavigator } from './diffNavigator.js';\nimport { DiffReview } from './diffReview.js';\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\nimport { clampedFloat, clampedInt, EditorFontLigatures, EditorOptions, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../common/config/editorOptions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel.js';\nimport { OverviewRulerZone } from '../../common/viewModel/overviewZoneManager.js';\nimport * as nls from '../../../nls.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { defaultInsertColor, defaultRemoveColor, diffDiagonalFill, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\nimport { getThemeTypeSelector, IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nclass VisualEditorState {\n    constructor(_contextMenuService, _clipboardService) {\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._zones = [];\n        this._inlineDiffMargins = [];\n        this._zonesMap = {};\n        this._decorations = [];\n    }\n    getForeignViewZones(allViewZones) {\n        return allViewZones.filter((z) => !this._zonesMap[String(z.id)]);\n    }\n    clean(editor) {\n        // (1) View zones\n        if (this._zones.length > 0) {\n            editor.changeViewZones((viewChangeAccessor) => {\n                for (const zoneId of this._zones) {\n                    viewChangeAccessor.removeZone(zoneId);\n                }\n            });\n        }\n        this._zones = [];\n        this._zonesMap = {};\n        // (2) Model decorations\n        editor.changeDecorations((changeAccessor) => {\n            this._decorations = changeAccessor.deltaDecorations(this._decorations, []);\n        });\n    }\n    apply(editor, overviewRuler, newDecorations, restoreScrollState) {\n        const scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\n        // view zones\n        editor.changeViewZones((viewChangeAccessor) => {\n            var _a;\n            for (const zoneId of this._zones) {\n                viewChangeAccessor.removeZone(zoneId);\n            }\n            for (const inlineDiffMargin of this._inlineDiffMargins) {\n                inlineDiffMargin.dispose();\n            }\n            this._zones = [];\n            this._zonesMap = {};\n            this._inlineDiffMargins = [];\n            for (let i = 0, length = newDecorations.zones.length; i < length; i++) {\n                const viewZone = newDecorations.zones[i];\n                viewZone.suppressMouseDown = true;\n                const zoneId = viewChangeAccessor.addZone(viewZone);\n                this._zones.push(zoneId);\n                this._zonesMap[String(zoneId)] = true;\n                if (newDecorations.zones[i].diff && viewZone.marginDomNode) {\n                    viewZone.suppressMouseDown = false;\n                    if (((_a = newDecorations.zones[i].diff) === null || _a === void 0 ? void 0 : _a.originalModel.getValueLength()) !== 0) {\n                        // do not contribute diff margin actions for newly created files\n                        this._inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, this._contextMenuService, this._clipboardService));\n                    }\n                }\n            }\n        });\n        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(editor);\n        // decorations\n        editor.changeDecorations((changeAccessor) => {\n            this._decorations = changeAccessor.deltaDecorations(this._decorations, newDecorations.decorations);\n        });\n        // overview ruler\n        overviewRuler === null || overviewRuler === void 0 ? void 0 : overviewRuler.setZones(newDecorations.overviewZones);\n    }\n}\nlet DIFF_EDITOR_ID = 0;\nconst diffInsertIcon = registerIcon('diff-insert', Codicon.add, nls.localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nconst diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, nls.localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nconst ariaNavigationTip = nls.localize('diff-aria-navigation-tip', ' use Shift + F7 to navigate changes');\nexport let DiffEditorWidget = class DiffEditorWidget extends Disposable {\n    constructor(domElement, options, codeEditorWidgetOptions, clipboardService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\n        super();\n        this._editorProgressService = _editorProgressService;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModel = this._register(new Emitter());\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidUpdateDiff = this._register(new Emitter());\n        this.onDidUpdateDiff = this._onDidUpdateDiff.event;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this._lastOriginalWarning = null;\n        this._lastModifiedWarning = null;\n        codeEditorService.willCreateDiffEditor();\n        this._documentDiffProvider = this._register(instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options));\n        this._register(this._documentDiffProvider.onDidChange(e => this._beginUpdateDecorationsSoon()));\n        this._codeEditorService = codeEditorService;\n        this._contextKeyService = this._register(contextKeyService.createScoped(domElement));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._themeService = themeService;\n        this._notificationService = notificationService;\n        this._id = (++DIFF_EDITOR_ID);\n        this._state = 0 /* editorBrowser.DiffEditorState.Idle */;\n        this._updatingDiffProgress = null;\n        this._domElement = domElement;\n        options = options || {};\n        this._options = validateDiffEditorOptions(options, {\n            enableSplitViewResizing: true,\n            splitViewDefaultRatio: 0.5,\n            renderSideBySide: true,\n            renderMarginRevertIcon: true,\n            maxComputationTime: 5000,\n            maxFileSize: 50,\n            ignoreTrimWhitespace: true,\n            renderIndicators: true,\n            originalEditable: false,\n            diffCodeLens: false,\n            renderOverviewRuler: true,\n            diffWordWrap: 'inherit',\n            diffAlgorithm: 'advanced',\n            accessibilityVerbose: false,\n            experimental: {\n                collapseUnchangedRegions: false,\n            },\n        });\n        this.isEmbeddedDiffEditorKey = EditorContextKeys.isEmbeddedDiffEditor.bindTo(this._contextKeyService);\n        this.isEmbeddedDiffEditorKey.set(typeof options.isInEmbeddedEditor !== 'undefined' ? options.isInEmbeddedEditor : false);\n        this._updateDecorationsRunner = this._register(new RunOnceScheduler(() => this._updateDecorations(), 0));\n        this._containerDomElement = document.createElement('div');\n        this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        this._containerDomElement.style.position = 'relative';\n        this._containerDomElement.style.height = '100%';\n        this._domElement.appendChild(this._containerDomElement);\n        this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\n        this._overviewViewportDomElement.setClassName('diffViewport');\n        this._overviewViewportDomElement.setPosition('absolute');\n        this._overviewDomElement = document.createElement('div');\n        this._overviewDomElement.className = 'diffOverview';\n        this._overviewDomElement.style.position = 'absolute';\n        this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode);\n        this._register(dom.addStandardDisposableListener(this._overviewDomElement, dom.EventType.POINTER_DOWN, (e) => {\n            this._modifiedEditor.delegateVerticalScrollbarPointerDown(e);\n        }));\n        this._register(dom.addDisposableListener(this._overviewDomElement, dom.EventType.MOUSE_WHEEL, (e) => {\n            this._modifiedEditor.delegateScrollFromMouseWheelEvent(e);\n        }, { passive: false }));\n        if (this._options.renderOverviewRuler) {\n            this._containerDomElement.appendChild(this._overviewDomElement);\n        }\n        // Create left side\n        this._originalDomNode = document.createElement('div');\n        this._originalDomNode.className = 'editor original';\n        this._originalDomNode.style.position = 'absolute';\n        this._originalDomNode.style.height = '100%';\n        this._containerDomElement.appendChild(this._originalDomNode);\n        // Create right side\n        this._modifiedDomNode = document.createElement('div');\n        this._modifiedDomNode.className = 'editor modified';\n        this._modifiedDomNode.style.position = 'absolute';\n        this._modifiedDomNode.style.height = '100%';\n        this._containerDomElement.appendChild(this._modifiedDomNode);\n        this._beginUpdateDecorationsTimeout = -1;\n        this._currentlyChangingViewZones = false;\n        this._diffComputationToken = 0;\n        this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\n        this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\n        this._isVisible = true;\n        this._isHandlingScrollEvent = false;\n        this._elementSizeObserver = this._register(new ElementSizeObserver(this._containerDomElement, options.dimension));\n        this._register(this._elementSizeObserver.onDidChange(() => this._onDidContainerSizeChanged()));\n        if (options.automaticLayout) {\n            this._elementSizeObserver.startObserving();\n        }\n        this._diffComputationResult = null;\n        this._originalEditor = this._createLeftHandSideEditor(options, codeEditorWidgetOptions.originalEditor || {});\n        this._modifiedEditor = this._createRightHandSideEditor(options, codeEditorWidgetOptions.modifiedEditor || {});\n        this._originalOverviewRuler = null;\n        this._modifiedOverviewRuler = null;\n        this._reviewPane = instantiationService.createInstance(DiffReview, this);\n        this._containerDomElement.appendChild(this._reviewPane.domNode.domNode);\n        this._containerDomElement.appendChild(this._reviewPane.shadow.domNode);\n        this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode);\n        if (this._options.renderSideBySide) {\n            this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio));\n        }\n        else {\n            this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._options.enableSplitViewResizing));\n        }\n        this._register(themeService.onDidColorThemeChange(t => {\n            if (this._strategy && this._strategy.applyColors(t)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        }));\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        this._codeEditorService.addDiffEditor(this);\n    }\n    _setState(newState) {\n        if (this._state === newState) {\n            return;\n        }\n        this._state = newState;\n        if (this._updatingDiffProgress) {\n            this._updatingDiffProgress.done();\n            this._updatingDiffProgress = null;\n        }\n        if (this._state === 1 /* editorBrowser.DiffEditorState.ComputingDiff */) {\n            this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\n        }\n    }\n    diffReviewNext() {\n        this._reviewPane.next();\n    }\n    diffReviewPrev() {\n        this._reviewPane.prev();\n    }\n    static _getClassName(theme, renderSideBySide) {\n        let result = 'monaco-diff-editor monaco-editor-background ';\n        if (renderSideBySide) {\n            result += 'side-by-side ';\n        }\n        result += getThemeTypeSelector(theme.type);\n        return result;\n    }\n    _disposeOverviewRulers() {\n        if (this._originalOverviewRuler) {\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n            this._originalOverviewRuler.dispose();\n            this._originalOverviewRuler = null;\n        }\n        if (this._modifiedOverviewRuler) {\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n            this._modifiedOverviewRuler.dispose();\n            this._modifiedOverviewRuler = null;\n        }\n    }\n    _createOverviewRulers() {\n        if (!this._options.renderOverviewRuler) {\n            return;\n        }\n        assert.ok(!this._originalOverviewRuler && !this._modifiedOverviewRuler);\n        if (this._originalEditor.hasModel()) {\n            this._originalOverviewRuler = this._originalEditor.createOverviewRuler('original diffOverviewRuler');\n            this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\n        }\n        if (this._modifiedEditor.hasModel()) {\n            this._modifiedOverviewRuler = this._modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\n            this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\n        }\n        this._layoutOverviewRulers();\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const editor = this._createInnerEditor(this._instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options), codeEditorWidgetOptions);\n        this._register(editor.onDidScrollChange((e) => {\n            if (this._isHandlingScrollEvent) {\n                return;\n            }\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n                return;\n            }\n            this._isHandlingScrollEvent = true;\n            this._modifiedEditor.setScrollPosition({\n                scrollLeft: e.scrollLeft,\n                scrollTop: e.scrollTop\n            });\n            this._isHandlingScrollEvent = false;\n            this._layoutOverviewViewport();\n        }));\n        this._register(editor.onDidChangeViewZones(() => {\n            this._onViewZonesChanged();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!editor.getModel()) {\n                return;\n            }\n            if (e.hasChanged(48 /* EditorOption.fontInfo */)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            if (e.hasChanged(141 /* EditorOption.wrappingInfo */)) {\n                this._updateDecorationsRunner.cancel();\n                this._updateDecorations();\n            }\n        }));\n        this._register(editor.onDidChangeHiddenAreas(() => {\n            this._updateDecorationsRunner.cancel();\n            this._updateDecorations();\n        }));\n        this._register(editor.onDidChangeModelContent(() => {\n            if (this._isVisible) {\n                this._beginUpdateDecorationsSoon();\n            }\n        }));\n        const isInDiffLeftEditorKey = this._contextKeyService.createKey('isInDiffLeftEditor', editor.hasWidgetFocus());\n        this._register(editor.onDidFocusEditorWidget(() => isInDiffLeftEditorKey.set(true)));\n        this._register(editor.onDidBlurEditorWidget(() => isInDiffLeftEditorKey.set(false)));\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n            const height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const editor = this._createInnerEditor(this._instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options), codeEditorWidgetOptions);\n        this._register(editor.onDidScrollChange((e) => {\n            if (this._isHandlingScrollEvent) {\n                return;\n            }\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\n                return;\n            }\n            this._isHandlingScrollEvent = true;\n            this._originalEditor.setScrollPosition({\n                scrollLeft: e.scrollLeft,\n                scrollTop: e.scrollTop\n            });\n            this._isHandlingScrollEvent = false;\n            this._layoutOverviewViewport();\n        }));\n        this._register(editor.onDidChangeViewZones(() => {\n            this._onViewZonesChanged();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!editor.getModel()) {\n                return;\n            }\n            if (e.hasChanged(48 /* EditorOption.fontInfo */)) {\n                this._updateDecorationsRunner.schedule();\n            }\n            if (e.hasChanged(141 /* EditorOption.wrappingInfo */)) {\n                this._updateDecorationsRunner.cancel();\n                this._updateDecorations();\n            }\n        }));\n        this._register(editor.onDidChangeHiddenAreas(() => {\n            this._updateDecorationsRunner.cancel();\n            this._updateDecorations();\n        }));\n        this._register(editor.onDidChangeModelContent(() => {\n            if (this._isVisible) {\n                this._beginUpdateDecorationsSoon();\n            }\n        }));\n        this._register(editor.onDidChangeModelOptions((e) => {\n            if (e.tabSize) {\n                this._updateDecorationsRunner.schedule();\n            }\n        }));\n        const isInDiffRightEditorKey = this._contextKeyService.createKey('isInDiffRightEditor', editor.hasWidgetFocus());\n        this._register(editor.onDidFocusEditorWidget(() => isInDiffRightEditorKey.set(true)));\n        this._register(editor.onDidBlurEditorWidget(() => isInDiffRightEditorKey.set(false)));\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this._originalEditor.getContentWidth() + this._modifiedEditor.getContentWidth() + DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n            const height = Math.max(this._modifiedEditor.getContentHeight(), this._originalEditor.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        // Revert change when an arrow is clicked.\n        this._register(editor.onMouseDown(event => {\n            var _a, _b;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('arrow-revert-change'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const viewZone = event.target;\n                const change = (_b = this._diffComputationResult) === null || _b === void 0 ? void 0 : _b.changes.find(c => \n                // delete change\n                (viewZone === null || viewZone === void 0 ? void 0 : viewZone.detail.afterLineNumber) === c.modifiedStartLineNumber ||\n                    // other changes\n                    (c.modifiedEndLineNumber > 0 && c.modifiedStartLineNumber === lineNumber));\n                if (change) {\n                    this.revertChange(change);\n                }\n                event.event.stopPropagation();\n                this._updateDecorations();\n                return;\n            }\n        }));\n        return editor;\n    }\n    /**\n     * Reverts a change in the modified editor.\n     */\n    revertChange(change) {\n        const editor = this._modifiedEditor;\n        const original = this._originalEditor.getModel();\n        const modified = this._modifiedEditor.getModel();\n        if (!original || !modified || !editor) {\n            return;\n        }\n        const originalRange = change.originalEndLineNumber > 0 ? new Range(change.originalStartLineNumber, 1, change.originalEndLineNumber, original.getLineMaxColumn(change.originalEndLineNumber)) : null;\n        const originalContent = originalRange ? original.getValueInRange(originalRange) : null;\n        const newRange = change.modifiedEndLineNumber > 0 ? new Range(change.modifiedStartLineNumber, 1, change.modifiedEndLineNumber, modified.getLineMaxColumn(change.modifiedEndLineNumber)) : null;\n        const eol = modified.getEOL();\n        if (change.originalEndLineNumber === 0 && newRange) {\n            // Insert change.\n            // To revert: delete the new content and a linebreak (if possible)\n            let range = newRange;\n            if (change.modifiedStartLineNumber > 1) {\n                // Try to include a linebreak from before.\n                range = newRange.setStartPosition(change.modifiedStartLineNumber - 1, modified.getLineMaxColumn(change.modifiedStartLineNumber - 1));\n            }\n            else if (change.modifiedEndLineNumber < modified.getLineCount()) {\n                // Try to include the linebreak from after.\n                range = newRange.setEndPosition(change.modifiedEndLineNumber + 1, 1);\n            }\n            editor.executeEdits('diffEditor', [{\n                    range,\n                    text: '',\n                }]);\n        }\n        else if (change.modifiedEndLineNumber === 0 && originalContent !== null) {\n            // Delete change.\n            // To revert: insert the old content and a linebreak.\n            const insertAt = change.modifiedStartLineNumber < modified.getLineCount() ? new Position(change.modifiedStartLineNumber + 1, 1) : new Position(change.modifiedStartLineNumber, modified.getLineMaxColumn(change.modifiedStartLineNumber));\n            editor.executeEdits('diffEditor', [{\n                    range: Range.fromPositions(insertAt, insertAt),\n                    text: change.modifiedStartLineNumber < modified.getLineCount() ? originalContent + eol : eol + originalContent,\n                }]);\n        }\n        else if (newRange && originalContent !== null) {\n            // Modified change.\n            editor.executeEdits('diffEditor', [{\n                    range: newRange,\n                    text: originalContent,\n                }]);\n        }\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        return instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n    }\n    dispose() {\n        this._codeEditorService.removeDiffEditor(this);\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        this._cleanViewZonesAndDecorations();\n        if (this._originalOverviewRuler) {\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\n            this._originalOverviewRuler.dispose();\n        }\n        if (this._modifiedOverviewRuler) {\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\n            this._modifiedOverviewRuler.dispose();\n        }\n        this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\n        if (this._options.renderOverviewRuler) {\n            this._containerDomElement.removeChild(this._overviewDomElement);\n        }\n        this._containerDomElement.removeChild(this._originalDomNode);\n        this._originalEditor.dispose();\n        this._containerDomElement.removeChild(this._modifiedDomNode);\n        this._modifiedEditor.dispose();\n        this._strategy.dispose();\n        this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\n        this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\n        this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\n        this._reviewPane.dispose();\n        this._domElement.removeChild(this._containerDomElement);\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    //------------ begin IDiffEditor methods\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.IDiffEditor;\n    }\n    getLineChanges() {\n        if (!this._diffComputationResult) {\n            return null;\n        }\n        return this._diffComputationResult.changes;\n    }\n    getOriginalEditor() {\n        return this._originalEditor;\n    }\n    getModifiedEditor() {\n        return this._modifiedEditor;\n    }\n    updateOptions(_newOptions) {\n        const newOptions = validateDiffEditorOptions(_newOptions, this._options);\n        const changed = changedDiffEditorOptions(this._options, newOptions);\n        this._options = newOptions;\n        this.isEmbeddedDiffEditorKey.set(typeof _newOptions.isInEmbeddedEditor !== 'undefined' ? _newOptions.isInEmbeddedEditor : false);\n        const beginUpdateDecorations = (changed.ignoreTrimWhitespace || changed.renderIndicators || changed.renderMarginRevertIcon);\n        const beginUpdateDecorationsSoon = (this._isVisible && (changed.maxComputationTime || changed.maxFileSize));\n        this._documentDiffProvider.setOptions(newOptions);\n        if (beginUpdateDecorations) {\n            this._beginUpdateDecorations();\n        }\n        else if (beginUpdateDecorationsSoon) {\n            this._beginUpdateDecorationsSoon();\n        }\n        this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(_newOptions));\n        this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(_newOptions));\n        // enableSplitViewResizing\n        this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio);\n        // renderSideBySide\n        if (changed.renderSideBySide) {\n            if (this._options.renderSideBySide) {\n                this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._options.enableSplitViewResizing, this._options.splitViewDefaultRatio));\n            }\n            else {\n                this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._options.enableSplitViewResizing));\n            }\n            // Update class name\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getColorTheme(), this._options.renderSideBySide);\n        }\n        // renderOverviewRuler\n        if (changed.renderOverviewRuler) {\n            if (this._options.renderOverviewRuler) {\n                this._containerDomElement.appendChild(this._overviewDomElement);\n            }\n            else {\n                this._containerDomElement.removeChild(this._overviewDomElement);\n            }\n        }\n    }\n    getModel() {\n        return {\n            original: this._originalEditor.getModel(),\n            modified: this._modifiedEditor.getModel()\n        };\n    }\n    setModel(model) {\n        // Guard us against partial null model\n        if (model && (!model.original || !model.modified)) {\n            throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\n        }\n        // Remove all view zones & decorations\n        this._cleanViewZonesAndDecorations();\n        this._disposeOverviewRulers();\n        // Update code editor models\n        this._originalEditor.setModel(model ? model.original : null);\n        this._modifiedEditor.setModel(model ? model.modified : null);\n        this._updateDecorationsRunner.cancel();\n        // this.originalEditor.onDidChangeModelOptions\n        if (model) {\n            this._originalEditor.setScrollTop(0);\n            this._modifiedEditor.setScrollTop(0);\n        }\n        // Disable any diff computations that will come in\n        this._diffComputationResult = null;\n        this._diffComputationToken++;\n        this._setState(0 /* editorBrowser.DiffEditorState.Idle */);\n        if (model) {\n            this._createOverviewRulers();\n            // Begin comparing\n            this._beginUpdateDecorations();\n        }\n        this._layoutOverviewViewport();\n        this._onDidChangeModel.fire();\n        // Diff navigator\n        this._diffNavigator = this._register(this._instantiationService.createInstance(DiffNavigator, this, {\n            alwaysRevealFirst: false,\n            findResultLoop: this.getModifiedEditor().getOption(39 /* EditorOption.find */).loop\n        }));\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._modifiedEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._modifiedEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._modifiedEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._modifiedEditor.getSelection();\n    }\n    getSelections() {\n        return this._modifiedEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._modifiedEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._modifiedEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._modifiedEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._modifiedEditor.getSupportedActions();\n    }\n    focus() {\n        this._modifiedEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._modifiedEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._modifiedEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._modifiedEditor.changeDecorations(callback);\n    }\n    // #endregion\n    saveViewState() {\n        const originalViewState = this._originalEditor.saveViewState();\n        const modifiedViewState = this._modifiedEditor.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState\n        };\n    }\n    restoreViewState(s) {\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._originalEditor.restoreViewState(diffEditorState.original);\n            this._modifiedEditor.restoreViewState(diffEditorState.modified);\n        }\n    }\n    layout(dimension) {\n        this._elementSizeObserver.observe(dimension);\n    }\n    hasTextFocus() {\n        return this._originalEditor.hasTextFocus() || this._modifiedEditor.hasTextFocus();\n    }\n    //------------ end IDiffEditor methods\n    //------------ begin layouting methods\n    _onDidContainerSizeChanged() {\n        this._doLayout();\n    }\n    _getReviewHeight() {\n        return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\n    }\n    _layoutOverviewRulers() {\n        if (!this._options.renderOverviewRuler) {\n            return;\n        }\n        if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\n            return;\n        }\n        const height = this._elementSizeObserver.getHeight();\n        const reviewHeight = this._getReviewHeight();\n        const freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\n        const layoutInfo = this._modifiedEditor.getLayoutInfo();\n        if (layoutInfo) {\n            this._originalOverviewRuler.setLayout({\n                top: 0,\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                height: (height - reviewHeight)\n            });\n            this._modifiedOverviewRuler.setLayout({\n                top: 0,\n                right: 0,\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\n                height: (height - reviewHeight)\n            });\n        }\n    }\n    //------------ end layouting methods\n    _onViewZonesChanged() {\n        if (this._currentlyChangingViewZones) {\n            return;\n        }\n        this._updateDecorationsRunner.schedule();\n    }\n    _beginUpdateDecorationsSoon() {\n        // Clear previous timeout if necessary\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        this._beginUpdateDecorationsTimeout = window.setTimeout(() => this._beginUpdateDecorations(), DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\n    }\n    static _equals(a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return (a.toString() === b.toString());\n    }\n    _beginUpdateDecorations() {\n        if (this._beginUpdateDecorationsTimeout !== -1) {\n            // Cancel any pending requests in case this method is called directly\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\n            this._beginUpdateDecorationsTimeout = -1;\n        }\n        const currentOriginalModel = this._originalEditor.getModel();\n        const currentModifiedModel = this._modifiedEditor.getModel();\n        if (!currentOriginalModel || !currentModifiedModel) {\n            return;\n        }\n        // Prevent old diff requests to come if a new request has been initiated\n        // The best method would be to call cancel on the Promise, but this is not\n        // yet supported, so using tokens for now.\n        this._diffComputationToken++;\n        const currentToken = this._diffComputationToken;\n        const diffLimit = this._options.maxFileSize * 1024 * 1024; // MB\n        const canSyncModelForDiff = (model) => {\n            const bufferTextLength = model.getValueLength();\n            return (diffLimit === 0 || bufferTextLength <= diffLimit);\n        };\n        if (!canSyncModelForDiff(currentOriginalModel) || !canSyncModelForDiff(currentModifiedModel)) {\n            if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\n                || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\n                this._lastOriginalWarning = currentOriginalModel.uri;\n                this._lastModifiedWarning = currentModifiedModel.uri;\n                this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\n            }\n            return;\n        }\n        this._setState(1 /* editorBrowser.DiffEditorState.ComputingDiff */);\n        this._documentDiffProvider.computeDiff(currentOriginalModel, currentModifiedModel, {\n            ignoreTrimWhitespace: this._options.ignoreTrimWhitespace,\n            maxComputationTimeMs: this._options.maxComputationTime,\n        }).then(result => {\n            if (currentToken === this._diffComputationToken\n                && currentOriginalModel === this._originalEditor.getModel()\n                && currentModifiedModel === this._modifiedEditor.getModel()) {\n                this._setState(2 /* editorBrowser.DiffEditorState.DiffComputed */);\n                this._diffComputationResult = {\n                    identical: result.identical,\n                    quitEarly: result.quitEarly,\n                    changes2: result.changes,\n                    changes: result.changes.map(m => {\n                        // TODO don't do this translation, but use the diff result directly\n                        let originalStartLineNumber;\n                        let originalEndLineNumber;\n                        let modifiedStartLineNumber;\n                        let modifiedEndLineNumber;\n                        let innerChanges = m.innerChanges;\n                        if (m.originalRange.isEmpty) {\n                            // Insertion\n                            originalStartLineNumber = m.originalRange.startLineNumber - 1;\n                            originalEndLineNumber = 0;\n                            innerChanges = undefined;\n                        }\n                        else {\n                            originalStartLineNumber = m.originalRange.startLineNumber;\n                            originalEndLineNumber = m.originalRange.endLineNumberExclusive - 1;\n                        }\n                        if (m.modifiedRange.isEmpty) {\n                            // Deletion\n                            modifiedStartLineNumber = m.modifiedRange.startLineNumber - 1;\n                            modifiedEndLineNumber = 0;\n                            innerChanges = undefined;\n                        }\n                        else {\n                            modifiedStartLineNumber = m.modifiedRange.startLineNumber;\n                            modifiedEndLineNumber = m.modifiedRange.endLineNumberExclusive - 1;\n                        }\n                        return {\n                            originalStartLineNumber,\n                            originalEndLineNumber,\n                            modifiedStartLineNumber,\n                            modifiedEndLineNumber,\n                            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                                originalStartLineNumber: m.originalRange.startLineNumber,\n                                originalStartColumn: m.originalRange.startColumn,\n                                originalEndLineNumber: m.originalRange.endLineNumber,\n                                originalEndColumn: m.originalRange.endColumn,\n                                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                                modifiedStartColumn: m.modifiedRange.startColumn,\n                                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                                modifiedEndColumn: m.modifiedRange.endColumn,\n                            }))\n                        };\n                    })\n                };\n                this._updateDecorationsRunner.schedule();\n                this._onDidUpdateDiff.fire();\n            }\n        }, (error) => {\n            if (currentToken === this._diffComputationToken\n                && currentOriginalModel === this._originalEditor.getModel()\n                && currentModifiedModel === this._modifiedEditor.getModel()) {\n                this._setState(2 /* editorBrowser.DiffEditorState.DiffComputed */);\n                this._diffComputationResult = null;\n                this._updateDecorationsRunner.schedule();\n            }\n        });\n    }\n    _cleanViewZonesAndDecorations() {\n        this._originalEditorState.clean(this._originalEditor);\n        this._modifiedEditorState.clean(this._modifiedEditor);\n    }\n    _updateDecorations() {\n        if (!this._originalEditor.getModel() || !this._modifiedEditor.getModel()) {\n            return;\n        }\n        const lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\n        const foreignOriginal = this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces());\n        const foreignModified = this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces());\n        const renderMarginRevertIcon = this._options.renderMarginRevertIcon && !this._modifiedEditor.getOption(88 /* EditorOption.readOnly */);\n        const diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._options.ignoreTrimWhitespace, this._options.renderIndicators, renderMarginRevertIcon, foreignOriginal, foreignModified);\n        try {\n            this._currentlyChangingViewZones = true;\n            this._originalEditorState.apply(this._originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\n            this._modifiedEditorState.apply(this._modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\n        }\n        finally {\n            this._currentlyChangingViewZones = false;\n        }\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = Object.assign({}, options);\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = Object.assign({}, (clonedOptions.scrollbar || {}));\n        clonedOptions.scrollbar.vertical = 'visible';\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens;\n        clonedOptions.fixedOverflowWidgets = true;\n        // clonedOptions.lineDecorationsWidth = '2ch';\n        // Clone minimap options before changing them\n        clonedOptions.minimap = Object.assign({}, (clonedOptions.minimap || {}));\n        clonedOptions.minimap.enabled = false;\n        return clonedOptions;\n    }\n    _adjustOptionsForLeftHandSide(options) {\n        const result = this._adjustOptionsForSubEditor(options);\n        if (!this._options.renderSideBySide) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n        }\n        else {\n            result.wordWrapOverride1 = this._options.diffWordWrap;\n        }\n        if (options.originalAriaLabel) {\n            result.ariaLabel = options.originalAriaLabel;\n        }\n        this._updateAriaLabel(result);\n        result.readOnly = !this._options.originalEditable;\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return Object.assign(Object.assign({}, result), { dimension: {\n                height: 0,\n                width: 0\n            } });\n    }\n    _updateAriaLabel(options) {\n        var _a;\n        let ariaLabel = (_a = options.ariaLabel) !== null && _a !== void 0 ? _a : '';\n        if (this._options.accessibilityVerbose) {\n            ariaLabel += ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            ariaLabel = ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        options.ariaLabel = ariaLabel;\n    }\n    _adjustOptionsForRightHandSide(options) {\n        const result = this._adjustOptionsForSubEditor(options);\n        if (options.modifiedAriaLabel) {\n            result.ariaLabel = options.modifiedAriaLabel;\n        }\n        this._updateAriaLabel(result);\n        result.wordWrapOverride1 = this._options.diffWordWrap;\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return Object.assign(Object.assign({}, result), { dimension: {\n                height: 0,\n                width: 0\n            } });\n    }\n    doLayout() {\n        this._elementSizeObserver.observe();\n        this._doLayout();\n    }\n    _doLayout() {\n        const width = this._elementSizeObserver.getWidth();\n        const height = this._elementSizeObserver.getHeight();\n        const reviewHeight = this._getReviewHeight();\n        const splitPoint = this._strategy.layout();\n        this._originalDomNode.style.width = splitPoint + 'px';\n        this._originalDomNode.style.left = '0px';\n        this._modifiedDomNode.style.width = (width - splitPoint) + 'px';\n        this._modifiedDomNode.style.left = splitPoint + 'px';\n        this._overviewDomElement.style.top = '0px';\n        this._overviewDomElement.style.height = (height - reviewHeight) + 'px';\n        this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\n        this._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n        this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\n        this._overviewViewportDomElement.setHeight(30);\n        this._originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\n        this._modifiedEditor.layout({ width: width - splitPoint - (this._options.renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0), height: (height - reviewHeight) });\n        if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\n            this._layoutOverviewRulers();\n        }\n        this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\n        this._layoutOverviewViewport();\n    }\n    _layoutOverviewViewport() {\n        const layout = this._computeOverviewViewport();\n        if (!layout) {\n            this._overviewViewportDomElement.setTop(0);\n            this._overviewViewportDomElement.setHeight(0);\n        }\n        else {\n            this._overviewViewportDomElement.setTop(layout.top);\n            this._overviewViewportDomElement.setHeight(layout.height);\n        }\n    }\n    _computeOverviewViewport() {\n        const layoutInfo = this._modifiedEditor.getLayoutInfo();\n        if (!layoutInfo) {\n            return null;\n        }\n        const scrollTop = this._modifiedEditor.getScrollTop();\n        const scrollHeight = this._modifiedEditor.getScrollHeight();\n        const computedAvailableSize = Math.max(0, layoutInfo.height);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\n        const computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\n        const computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\n        const computedSliderPosition = Math.floor(scrollTop * computedRatio);\n        return {\n            height: computedSliderSize,\n            top: computedSliderPosition\n        };\n    }\n    _createDataSource() {\n        return {\n            getWidth: () => {\n                return this._elementSizeObserver.getWidth();\n            },\n            getHeight: () => {\n                return (this._elementSizeObserver.getHeight() - this._getReviewHeight());\n            },\n            getOptions: () => {\n                return {\n                    renderOverviewRuler: this._options.renderOverviewRuler\n                };\n            },\n            getContainerDomNode: () => {\n                return this._containerDomElement;\n            },\n            relayoutEditors: () => {\n                this._doLayout();\n            },\n            getOriginalEditor: () => {\n                return this._originalEditor;\n            },\n            getModifiedEditor: () => {\n                return this._modifiedEditor;\n            }\n        };\n    }\n    _setStrategy(newStrategy) {\n        var _a;\n        (_a = this._strategy) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._strategy = newStrategy;\n        if (this._boundarySashes) {\n            newStrategy.setBoundarySashes(this._boundarySashes);\n        }\n        newStrategy.applyColors(this._themeService.getColorTheme());\n        if (this._diffComputationResult) {\n            this._updateDecorations();\n        }\n        // Just do a layout, the strategy might need it\n        this._doLayout();\n    }\n    _getLineChangeAtOrBeforeLineNumber(lineNumber, startLineNumberExtractor) {\n        const lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\n        if (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\n            // There are no changes or `lineNumber` is before the first change\n            return null;\n        }\n        let min = 0;\n        let max = lineChanges.length - 1;\n        while (min < max) {\n            const mid = Math.floor((min + max) / 2);\n            const midStart = startLineNumberExtractor(lineChanges[mid]);\n            const midEnd = (mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            if (lineNumber < midStart) {\n                max = mid - 1;\n            }\n            else if (lineNumber >= midEnd) {\n                min = mid + 1;\n            }\n            else {\n                // HIT!\n                min = mid;\n                max = mid;\n            }\n        }\n        return lineChanges[min];\n    }\n    _getEquivalentLineForOriginalLineNumber(lineNumber) {\n        const lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, (lineChange) => lineChange.originalStartLineNumber);\n        if (!lineChange) {\n            return lineNumber;\n        }\n        const originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n        const modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n        const lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\n        const lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\n        const delta = lineNumber - originalEquivalentLineNumber;\n        if (delta <= lineChangeOriginalLength) {\n            return modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\n        }\n        return modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\n    }\n    _getEquivalentLineForModifiedLineNumber(lineNumber) {\n        const lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, (lineChange) => lineChange.modifiedStartLineNumber);\n        if (!lineChange) {\n            return lineNumber;\n        }\n        const originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n        const modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n        const lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\n        const lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\n        const delta = lineNumber - modifiedEquivalentLineNumber;\n        if (delta <= lineChangeModifiedLength) {\n            return originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\n        }\n        return originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\n    }\n    getDiffLineInformationForOriginal(lineNumber) {\n        if (!this._diffComputationResult) {\n            // Cannot answer that which I don't know\n            return null;\n        }\n        return {\n            equivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\n        };\n    }\n    getDiffLineInformationForModified(lineNumber) {\n        if (!this._diffComputationResult) {\n            // Cannot answer that which I don't know\n            return null;\n        }\n        return {\n            equivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\n        };\n    }\n};\nDiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\nDiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\nDiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\nDiffEditorWidget = __decorate([\n    __param(3, IClipboardService),\n    __param(4, IContextKeyService),\n    __param(5, IInstantiationService),\n    __param(6, ICodeEditorService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IContextMenuService),\n    __param(10, IEditorProgressService)\n], DiffEditorWidget);\nclass DiffEditorWidgetStyle extends Disposable {\n    constructor(dataSource) {\n        super();\n        this._dataSource = dataSource;\n        this._insertColor = null;\n        this._removeColor = null;\n    }\n    applyColors(theme) {\n        const newInsertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n        const newRemoveColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n        const hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\n        this._insertColor = newInsertColor;\n        this._removeColor = newRemoveColor;\n        return hasChanges;\n    }\n    getEditorsDiffDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon, originalWhitespaces, modifiedWhitespaces) {\n        // Get view zones\n        modifiedWhitespaces = modifiedWhitespaces.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n        originalWhitespaces = originalWhitespaces.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n        const zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, renderIndicators);\n        // Get decorations & overview ruler zones\n        const originalDecorations = this._getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators);\n        const modifiedDecorations = this._getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon);\n        return {\n            original: {\n                decorations: originalDecorations.decorations,\n                overviewZones: originalDecorations.overviewZones,\n                zones: zones.original\n            },\n            modified: {\n                decorations: modifiedDecorations.decorations,\n                overviewZones: modifiedDecorations.overviewZones,\n                zones: zones.modified\n            }\n        };\n    }\n    setBoundarySashes(_sashes) {\n        // To be implemented by subclasses\n    }\n}\nclass ForeignViewZonesIterator {\n    constructor(source) {\n        this._source = source;\n        this._index = -1;\n        this.current = null;\n        this.advance();\n    }\n    advance() {\n        this._index++;\n        if (this._index < this._source.length) {\n            this.current = this._source[this._index];\n        }\n        else {\n            this.current = null;\n        }\n    }\n}\nclass ViewZonesComputer {\n    constructor(_lineChanges, _originalForeignVZ, _modifiedForeignVZ, _originalEditor, _modifiedEditor) {\n        this._lineChanges = _lineChanges;\n        this._originalForeignVZ = _originalForeignVZ;\n        this._modifiedForeignVZ = _modifiedForeignVZ;\n        this._originalEditor = _originalEditor;\n        this._modifiedEditor = _modifiedEditor;\n    }\n    static _getViewLineCount(editor, startLineNumber, endLineNumber) {\n        const model = editor.getModel();\n        const viewModel = editor._getViewModel();\n        if (model && viewModel) {\n            const viewRange = getViewRange(model, viewModel, startLineNumber, endLineNumber);\n            return (viewRange.endLineNumber - viewRange.startLineNumber + 1);\n        }\n        return (endLineNumber - startLineNumber + 1);\n    }\n    getViewZones() {\n        const originalLineHeight = this._originalEditor.getOption(64 /* EditorOption.lineHeight */);\n        const modifiedLineHeight = this._modifiedEditor.getOption(64 /* EditorOption.lineHeight */);\n        const originalHasWrapping = (this._originalEditor.getOption(141 /* EditorOption.wrappingInfo */).wrappingColumn !== -1);\n        const modifiedHasWrapping = (this._modifiedEditor.getOption(141 /* EditorOption.wrappingInfo */).wrappingColumn !== -1);\n        const hasWrapping = (originalHasWrapping || modifiedHasWrapping);\n        const originalModel = this._originalEditor.getModel();\n        const originalCoordinatesConverter = this._originalEditor._getViewModel().coordinatesConverter;\n        const modifiedCoordinatesConverter = this._modifiedEditor._getViewModel().coordinatesConverter;\n        const result = {\n            original: [],\n            modified: []\n        };\n        let lineChangeModifiedLength = 0;\n        let lineChangeOriginalLength = 0;\n        let originalEquivalentLineNumber = 0;\n        let modifiedEquivalentLineNumber = 0;\n        let originalEndEquivalentLineNumber = 0;\n        let modifiedEndEquivalentLineNumber = 0;\n        const sortMyViewZones = (a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        };\n        const addAndCombineIfPossible = (destination, item) => {\n            if (item.domNode === null && destination.length > 0) {\n                const lastItem = destination[destination.length - 1];\n                if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\n                    lastItem.heightInLines += item.heightInLines;\n                    return;\n                }\n            }\n            destination.push(item);\n        };\n        const modifiedForeignVZ = new ForeignViewZonesIterator(this._modifiedForeignVZ);\n        const originalForeignVZ = new ForeignViewZonesIterator(this._originalForeignVZ);\n        let lastOriginalLineNumber = 1;\n        let lastModifiedLineNumber = 1;\n        // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\n        for (let i = 0, length = this._lineChanges.length; i <= length; i++) {\n            const lineChange = (i < length ? this._lineChanges[i] : null);\n            if (lineChange !== null) {\n                originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\n                modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\n                lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._originalEditor, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber) : 0);\n                lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? ViewZonesComputer._getViewLineCount(this._modifiedEditor, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber) : 0);\n                originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n            }\n            else {\n                // Increase to very large value to get the producing tests of foreign view zones running\n                originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\n                modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\n                originalEndEquivalentLineNumber = originalEquivalentLineNumber;\n                modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\n            }\n            // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\n            let stepOriginal = [];\n            let stepModified = [];\n            // ---------------------------- PRODUCE VIEW ZONES\n            // [PRODUCE] View zones due to line mapping differences (equal lines but wrapped differently)\n            if (hasWrapping) {\n                let count;\n                if (lineChange) {\n                    if (lineChange.originalEndLineNumber > 0) {\n                        count = lineChange.originalStartLineNumber - lastOriginalLineNumber;\n                    }\n                    else {\n                        count = lineChange.modifiedStartLineNumber - lastModifiedLineNumber;\n                    }\n                }\n                else {\n                    // `lastOriginalLineNumber` has not been looked at yet\n                    count = originalModel.getLineCount() - lastOriginalLineNumber + 1;\n                }\n                for (let i = 0; i < count; i++) {\n                    const originalLineNumber = lastOriginalLineNumber + i;\n                    const modifiedLineNumber = lastModifiedLineNumber + i;\n                    const originalViewLineCount = originalCoordinatesConverter.getModelLineViewLineCount(originalLineNumber);\n                    const modifiedViewLineCount = modifiedCoordinatesConverter.getModelLineViewLineCount(modifiedLineNumber);\n                    if (originalViewLineCount < modifiedViewLineCount) {\n                        stepOriginal.push({\n                            afterLineNumber: originalLineNumber,\n                            heightInLines: modifiedViewLineCount - originalViewLineCount,\n                            domNode: null,\n                            marginDomNode: null\n                        });\n                    }\n                    else if (originalViewLineCount > modifiedViewLineCount) {\n                        stepModified.push({\n                            afterLineNumber: modifiedLineNumber,\n                            heightInLines: originalViewLineCount - modifiedViewLineCount,\n                            domNode: null,\n                            marginDomNode: null\n                        });\n                    }\n                }\n                if (lineChange) {\n                    lastOriginalLineNumber = (lineChange.originalEndLineNumber > 0 ? lineChange.originalEndLineNumber : lineChange.originalStartLineNumber) + 1;\n                    lastModifiedLineNumber = (lineChange.modifiedEndLineNumber > 0 ? lineChange.modifiedEndLineNumber : lineChange.modifiedStartLineNumber) + 1;\n                }\n            }\n            // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\n            while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\n                let viewZoneLineNumber;\n                if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\n                    viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\n                }\n                else {\n                    viewZoneLineNumber = originalEndEquivalentLineNumber;\n                }\n                let marginDomNode = null;\n                if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\n                    marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\n                }\n                stepOriginal.push({\n                    afterLineNumber: viewZoneLineNumber,\n                    heightInLines: modifiedForeignVZ.current.height / modifiedLineHeight,\n                    domNode: null,\n                    marginDomNode: marginDomNode\n                });\n                modifiedForeignVZ.advance();\n            }\n            // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\n            while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\n                let viewZoneLineNumber;\n                if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\n                    viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\n                }\n                else {\n                    viewZoneLineNumber = modifiedEndEquivalentLineNumber;\n                }\n                stepModified.push({\n                    afterLineNumber: viewZoneLineNumber,\n                    heightInLines: originalForeignVZ.current.height / originalLineHeight,\n                    domNode: null\n                });\n                originalForeignVZ.advance();\n            }\n            if (lineChange !== null && isChangeOrInsert(lineChange)) {\n                const r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n                if (r) {\n                    stepOriginal.push(r);\n                }\n            }\n            if (lineChange !== null && isChangeOrDelete(lineChange)) {\n                const r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\n                if (r) {\n                    stepModified.push(r);\n                }\n            }\n            // ---------------------------- END PRODUCE VIEW ZONES\n            // ---------------------------- EMIT MINIMAL VIEW ZONES\n            // [CANCEL & EMIT] Try to cancel view zones out\n            let stepOriginalIndex = 0;\n            let stepModifiedIndex = 0;\n            stepOriginal = stepOriginal.sort(sortMyViewZones);\n            stepModified = stepModified.sort(sortMyViewZones);\n            while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\n                const original = stepOriginal[stepOriginalIndex];\n                const modified = stepModified[stepModifiedIndex];\n                const originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\n                const modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\n                if (originalDelta < modifiedDelta) {\n                    addAndCombineIfPossible(result.original, original);\n                    stepOriginalIndex++;\n                }\n                else if (modifiedDelta < originalDelta) {\n                    addAndCombineIfPossible(result.modified, modified);\n                    stepModifiedIndex++;\n                }\n                else if (original.shouldNotShrink) {\n                    addAndCombineIfPossible(result.original, original);\n                    stepOriginalIndex++;\n                }\n                else if (modified.shouldNotShrink) {\n                    addAndCombineIfPossible(result.modified, modified);\n                    stepModifiedIndex++;\n                }\n                else {\n                    if (original.heightInLines >= modified.heightInLines) {\n                        // modified view zone gets removed\n                        original.heightInLines -= modified.heightInLines;\n                        stepModifiedIndex++;\n                    }\n                    else {\n                        // original view zone gets removed\n                        modified.heightInLines -= original.heightInLines;\n                        stepOriginalIndex++;\n                    }\n                }\n            }\n            // [EMIT] Remaining original view zones\n            while (stepOriginalIndex < stepOriginal.length) {\n                addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\n                stepOriginalIndex++;\n            }\n            // [EMIT] Remaining modified view zones\n            while (stepModifiedIndex < stepModified.length) {\n                addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\n                stepModifiedIndex++;\n            }\n            // ---------------------------- END EMIT MINIMAL VIEW ZONES\n        }\n        return {\n            original: ViewZonesComputer._ensureDomNodes(result.original),\n            modified: ViewZonesComputer._ensureDomNodes(result.modified),\n        };\n    }\n    static _ensureDomNodes(zones) {\n        return zones.map((z) => {\n            if (!z.domNode) {\n                z.domNode = createFakeLinesDiv();\n            }\n            return z;\n        });\n    }\n}\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\n    return {\n        range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n        options: options\n    };\n}\nconst DECORATIONS = {\n    arrowRevertChange: ModelDecorationOptions.register({\n        description: 'diff-editor-arrow-revert-change',\n        glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true }).appendMarkdown(nls.localize('revertChangeHoverMessage', 'Click to revert change')),\n        glyphMarginClassName: 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight),\n        zIndex: 10001,\n    }),\n    charDelete: ModelDecorationOptions.register({\n        description: 'diff-editor-char-delete',\n        className: 'char-delete'\n    }),\n    charDeleteWholeLine: ModelDecorationOptions.register({\n        description: 'diff-editor-char-delete-whole-line',\n        className: 'char-delete',\n        isWholeLine: true\n    }),\n    charInsert: ModelDecorationOptions.register({\n        description: 'diff-editor-char-insert',\n        className: 'char-insert'\n    }),\n    charInsertWholeLine: ModelDecorationOptions.register({\n        description: 'diff-editor-char-insert-whole-line',\n        className: 'char-insert',\n        isWholeLine: true\n    }),\n    lineInsert: ModelDecorationOptions.register({\n        description: 'diff-editor-line-insert',\n        className: \"line-insert\" /* DiffEditorLineClasses.Insert */,\n        marginClassName: 'gutter-insert',\n        isWholeLine: true\n    }),\n    lineInsertWithSign: ModelDecorationOptions.register({\n        description: 'diff-editor-line-insert-with-sign',\n        className: \"line-insert\" /* DiffEditorLineClasses.Insert */,\n        linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n        marginClassName: 'gutter-insert',\n        isWholeLine: true\n    }),\n    lineDelete: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete',\n        className: \"line-delete\" /* DiffEditorLineClasses.Delete */,\n        marginClassName: 'gutter-delete',\n        isWholeLine: true\n    }),\n    lineDeleteWithSign: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete-with-sign',\n        className: \"line-delete\" /* DiffEditorLineClasses.Delete */,\n        linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n        marginClassName: 'gutter-delete',\n        isWholeLine: true\n    }),\n    lineDeleteMargin: ModelDecorationOptions.register({\n        description: 'diff-editor-line-delete-margin',\n        marginClassName: 'gutter-delete',\n    })\n};\nclass DiffEditorWidgetSideBySide extends DiffEditorWidgetStyle {\n    constructor(dataSource, enableSplitViewResizing, defaultSashRatio) {\n        super(dataSource);\n        this._disableSash = (enableSplitViewResizing === false);\n        this._defaultRatio = defaultSashRatio;\n        this._sashRatio = null;\n        this._sashPosition = null;\n        this._startSashPosition = null;\n        this._sash = this._register(new Sash(this._dataSource.getContainerDomNode(), this, { orientation: 0 /* Orientation.VERTICAL */ }));\n        if (this._disableSash) {\n            this._sash.state = 0 /* SashState.Disabled */;\n        }\n        this._sash.onDidStart(() => this._onSashDragStart());\n        this._sash.onDidChange((e) => this._onSashDrag(e));\n        this._sash.onDidEnd(() => this._onSashDragEnd());\n        this._sash.onDidReset(() => this._onSashReset());\n    }\n    setEnableSplitViewResizing(enableSplitViewResizing, defaultRatio) {\n        this._defaultRatio = defaultRatio;\n        const newDisableSash = (enableSplitViewResizing === false);\n        if (this._disableSash !== newDisableSash) {\n            this._disableSash = newDisableSash;\n            this._sash.state = this._disableSash ? 0 /* SashState.Disabled */ : 3 /* SashState.Enabled */;\n        }\n    }\n    layout(sashRatio = this._sashRatio || this._defaultRatio) {\n        const w = this._dataSource.getWidth();\n        const contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n        let sashPosition = Math.floor((sashRatio || this._defaultRatio) * contentWidth);\n        const midPoint = Math.floor(this._defaultRatio * contentWidth);\n        sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\n        if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\n            if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n                sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n            }\n            if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\n                sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\n            }\n        }\n        else {\n            sashPosition = midPoint;\n        }\n        if (this._sashPosition !== sashPosition) {\n            this._sashPosition = sashPosition;\n        }\n        this._sash.layout();\n        return this._sashPosition;\n    }\n    _onSashDragStart() {\n        this._startSashPosition = this._sashPosition;\n    }\n    _onSashDrag(e) {\n        const w = this._dataSource.getWidth();\n        const contentWidth = w - (this._dataSource.getOptions().renderOverviewRuler ? DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n        const sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\n        this._sashRatio = sashPosition / contentWidth;\n        this._dataSource.relayoutEditors();\n    }\n    _onSashDragEnd() {\n        this._sash.layout();\n    }\n    _onSashReset() {\n        this._sashRatio = this._defaultRatio;\n        this._dataSource.relayoutEditors();\n        this._sash.layout();\n    }\n    getVerticalSashTop(sash) {\n        return 0;\n    }\n    getVerticalSashLeft(sash) {\n        return this._sashPosition;\n    }\n    getVerticalSashHeight(sash) {\n        return this._dataSource.getHeight();\n    }\n    setBoundarySashes(sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n    }\n    _getViewZones(lineChanges, originalForeignVZ, modifiedForeignVZ) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n        return c.getViewZones();\n    }\n    _getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const overviewZoneColor = String(this._removeColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const originalModel = originalEditor.getModel();\n        const originalViewModel = originalEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            if (isChangeOrDelete(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\n                });\n                if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\n                    result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\n                }\n                const viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrDelete(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.originalStartLineNumber) {\n                                        startColumn = charChange.originalStartColumn;\n                                    }\n                                    else {\n                                        startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.originalEndLineNumber) {\n                                        endColumn = charChange.originalEndColumn;\n                                    }\n                                    else {\n                                        endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon) {\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const overviewZoneColor = String(this._insertColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const modifiedModel = modifiedEditor.getModel();\n        const modifiedViewModel = modifiedEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            // Arrows for reverting changes.\n            if (renderMarginRevertIcon) {\n                if (lineChange.modifiedEndLineNumber > 0) {\n                    result.decorations.push({\n                        range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber, 1),\n                        options: DECORATIONS.arrowRevertChange\n                    });\n                }\n                else {\n                    const viewZone = zones.modified.find(z => z.afterLineNumber === lineChange.modifiedStartLineNumber);\n                    if (viewZone) {\n                        viewZone.marginDomNode = createViewZoneMarginArrow();\n                    }\n                }\n            }\n            if (isChangeOrInsert(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n                });\n                if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n                }\n                const viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrInsert(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\n                                        startColumn = charChange.modifiedStartColumn;\n                                    }\n                                    else {\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\n                                        endColumn = charChange.modifiedEndColumn;\n                                    }\n                                    else {\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nDiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\nclass SideBySideViewZonesComputer extends ViewZonesComputer {\n    constructor(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\n        super(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n    }\n    _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion() {\n        return null;\n    }\n    _produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        if (lineChangeModifiedLength > lineChangeOriginalLength) {\n            return {\n                afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n                heightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\n                domNode: null\n            };\n        }\n        return null;\n    }\n    _produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        if (lineChangeOriginalLength > lineChangeModifiedLength) {\n            return {\n                afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\n                heightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\n                domNode: null\n            };\n        }\n        return null;\n    }\n}\nclass DiffEditorWidgetInline extends DiffEditorWidgetStyle {\n    constructor(dataSource, enableSplitViewResizing) {\n        super(dataSource);\n        this._decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\n        this._register(dataSource.getOriginalEditor().onDidLayoutChange((layoutInfo) => {\n            if (this._decorationsLeft !== layoutInfo.decorationsLeft) {\n                this._decorationsLeft = layoutInfo.decorationsLeft;\n                dataSource.relayoutEditors();\n            }\n        }));\n    }\n    setEnableSplitViewResizing(enableSplitViewResizing) {\n        // Nothing to do..\n    }\n    _getViewZones(lineChanges, originalForeignVZ, modifiedForeignVZ, renderIndicators) {\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\n        return computer.getViewZones();\n    }\n    _getOriginalEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators) {\n        const overviewZoneColor = String(this._removeColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const originalEditor = this._dataSource.getOriginalEditor();\n        const originalModel = originalEditor.getModel();\n        const originalViewModel = originalEditor._getViewModel();\n        let zoneIndex = 0;\n        for (const lineChange of lineChanges) {\n            // Add overview zones in the overview ruler\n            if (isChangeOrDelete(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: DECORATIONS.lineDeleteMargin\n                });\n                while (zoneIndex < zones.modified.length) {\n                    const zone = zones.modified[zoneIndex];\n                    if (zone.diff && zone.diff.originalStartLineNumber >= lineChange.originalStartLineNumber) {\n                        break;\n                    }\n                    zoneIndex++;\n                }\n                let zoneHeightInLines = 0;\n                if (zoneIndex < zones.modified.length) {\n                    const zone = zones.modified[zoneIndex];\n                    if (zone.diff\n                        && zone.diff.originalStartLineNumber === lineChange.originalStartLineNumber\n                        && zone.diff.originalEndLineNumber === lineChange.originalEndLineNumber\n                        && zone.diff.modifiedStartLineNumber === lineChange.modifiedStartLineNumber\n                        && zone.diff.modifiedEndLineNumber === lineChange.modifiedEndLineNumber) {\n                        zoneHeightInLines = zone.heightInLines;\n                    }\n                }\n                const viewRange = getViewRange(originalModel, originalViewModel, lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, zoneHeightInLines, overviewZoneColor));\n            }\n        }\n        return result;\n    }\n    _getModifiedEditorDecorations(zones, lineChanges, ignoreTrimWhitespace, renderIndicators, renderMarginRevertIcon) {\n        const modifiedEditor = this._dataSource.getModifiedEditor();\n        const overviewZoneColor = String(this._insertColor);\n        const result = {\n            decorations: [],\n            overviewZones: []\n        };\n        const modifiedModel = modifiedEditor.getModel();\n        const modifiedViewModel = modifiedEditor._getViewModel();\n        for (const lineChange of lineChanges) {\n            // Add decorations & overview zones\n            if (isChangeOrInsert(lineChange)) {\n                result.decorations.push({\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\n                });\n                const viewRange = getViewRange(modifiedModel, modifiedViewModel, lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\n                result.overviewZones.push(new OverviewRulerZone(viewRange.startLineNumber, viewRange.endLineNumber, /*use endLineNumber*/ 0, overviewZoneColor));\n                if (lineChange.charChanges) {\n                    for (const charChange of lineChange.charChanges) {\n                        if (isCharChangeOrInsert(charChange)) {\n                            if (ignoreTrimWhitespace) {\n                                for (let lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\n                                    let startColumn;\n                                    let endColumn;\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\n                                        startColumn = charChange.modifiedStartColumn;\n                                    }\n                                    else {\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\n                                    }\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\n                                        endColumn = charChange.modifiedEndColumn;\n                                    }\n                                    else {\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\n                                    }\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\n                                }\n                            }\n                            else {\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\n                            }\n                        }\n                    }\n                }\n                else {\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\n                }\n            }\n        }\n        return result;\n    }\n    layout() {\n        // An editor should not be smaller than 5px\n        return Math.max(5, this._decorationsLeft);\n    }\n}\nclass InlineViewZonesComputer extends ViewZonesComputer {\n    constructor(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\n        super(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor);\n        this._originalModel = originalEditor.getModel();\n        this._renderIndicators = renderIndicators;\n        this._pendingLineChange = [];\n        this._pendingViewZones = [];\n        this._lineBreaksComputer = this._modifiedEditor._getViewModel().createLineBreaksComputer();\n    }\n    getViewZones() {\n        const result = super.getViewZones();\n        this._finalize(result);\n        return result;\n    }\n    _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion() {\n        const result = document.createElement('div');\n        result.className = 'inline-added-margin-view-zone';\n        return result;\n    }\n    _produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        const marginDomNode = document.createElement('div');\n        marginDomNode.className = 'inline-added-margin-view-zone';\n        return {\n            afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\n            heightInLines: lineChangeModifiedLength,\n            domNode: document.createElement('div'),\n            marginDomNode: marginDomNode\n        };\n    }\n    _produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\n        const domNode = document.createElement('div');\n        domNode.className = `view-lines line-delete ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`;\n        const marginDomNode = document.createElement('div');\n        marginDomNode.className = 'inline-deleted-margin-view-zone';\n        const viewZone = {\n            shouldNotShrink: true,\n            afterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\n            heightInLines: lineChangeOriginalLength,\n            minWidthInPx: 0,\n            domNode: domNode,\n            marginDomNode: marginDomNode,\n            diff: {\n                originalStartLineNumber: lineChange.originalStartLineNumber,\n                originalEndLineNumber: lineChange.originalEndLineNumber,\n                modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\n                modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\n                originalModel: this._originalModel,\n                viewLineCounts: null,\n            }\n        };\n        for (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n            this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(lineNumber), null, null);\n        }\n        this._pendingLineChange.push(lineChange);\n        this._pendingViewZones.push(viewZone);\n        return viewZone;\n    }\n    _finalize(result) {\n        const modifiedEditorOptions = this._modifiedEditor.getOptions();\n        const tabSize = this._modifiedEditor.getModel().getOptions().tabSize;\n        const fontInfo = modifiedEditorOptions.get(48 /* EditorOption.fontInfo */);\n        const disableMonospaceOptimizations = modifiedEditorOptions.get(31 /* EditorOption.disableMonospaceOptimizations */);\n        const typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\n        const scrollBeyondLastColumn = modifiedEditorOptions.get(100 /* EditorOption.scrollBeyondLastColumn */);\n        const mightContainNonBasicASCII = this._originalModel.mightContainNonBasicASCII();\n        const mightContainRTL = this._originalModel.mightContainRTL();\n        const lineHeight = modifiedEditorOptions.get(64 /* EditorOption.lineHeight */);\n        const layoutInfo = modifiedEditorOptions.get(140 /* EditorOption.layoutInfo */);\n        const lineDecorationsWidth = layoutInfo.decorationsWidth;\n        const stopRenderingLineAfter = modifiedEditorOptions.get(113 /* EditorOption.stopRenderingLineAfter */);\n        const renderWhitespace = modifiedEditorOptions.get(95 /* EditorOption.renderWhitespace */);\n        const renderControlCharacters = modifiedEditorOptions.get(90 /* EditorOption.renderControlCharacters */);\n        const fontLigatures = modifiedEditorOptions.get(49 /* EditorOption.fontLigatures */);\n        const lineBreaks = this._lineBreaksComputer.finalize();\n        let lineBreakIndex = 0;\n        for (let i = 0; i < this._pendingLineChange.length; i++) {\n            const lineChange = this._pendingLineChange[i];\n            const viewZone = this._pendingViewZones[i];\n            const domNode = viewZone.domNode;\n            applyFontInfo(domNode, fontInfo);\n            const marginDomNode = viewZone.marginDomNode;\n            applyFontInfo(marginDomNode, fontInfo);\n            const decorations = [];\n            if (lineChange.charChanges) {\n                for (const charChange of lineChange.charChanges) {\n                    if (isCharChangeOrDelete(charChange)) {\n                        decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* InlineDecorationType.Regular */));\n                    }\n                }\n            }\n            const hasCharChanges = (decorations.length > 0);\n            const sb = new StringBuilder(10000);\n            let maxCharsPerLine = 0;\n            let renderedLineCount = 0;\n            let viewLineCounts = null;\n            for (let lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\n                const lineIndex = lineNumber - lineChange.originalStartLineNumber;\n                const lineTokens = this._originalModel.tokenization.getLineTokens(lineNumber);\n                const lineContent = lineTokens.getLineContent();\n                const lineBreakData = lineBreaks[lineBreakIndex++];\n                const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\n                if (lineBreakData) {\n                    let lastBreakOffset = 0;\n                    for (const breakOffset of lineBreakData.breakOffsets) {\n                        const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                        const viewLineContent = lineContent.substring(lastBreakOffset, breakOffset);\n                        maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(renderedLineCount++, viewLineContent, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode));\n                        lastBreakOffset = breakOffset;\n                    }\n                    if (!viewLineCounts) {\n                        viewLineCounts = [];\n                    }\n                    // make sure all lines before this one have an entry in `viewLineCounts`\n                    while (viewLineCounts.length < lineIndex) {\n                        viewLineCounts[viewLineCounts.length] = 1;\n                    }\n                    viewLineCounts[lineIndex] = lineBreakData.breakOffsets.length;\n                    viewZone.heightInLines += (lineBreakData.breakOffsets.length - 1);\n                    const marginDomNode2 = document.createElement('div');\n                    marginDomNode2.className = 'gutter-delete';\n                    result.original.push({\n                        afterLineNumber: lineNumber,\n                        afterColumn: 0,\n                        heightInLines: lineBreakData.breakOffsets.length - 1,\n                        domNode: createFakeLinesDiv(),\n                        marginDomNode: marginDomNode2\n                    });\n                }\n                else {\n                    maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(renderedLineCount++, lineContent, lineTokens, actualDecorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode));\n                }\n            }\n            maxCharsPerLine += scrollBeyondLastColumn;\n            const html = sb.build();\n            const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n            domNode.innerHTML = trustedhtml;\n            viewZone.minWidthInPx = (maxCharsPerLine * typicalHalfwidthCharacterWidth);\n            if (viewLineCounts) {\n                // make sure all lines have an entry in `viewLineCounts`\n                const cnt = lineChange.originalEndLineNumber - lineChange.originalStartLineNumber;\n                while (viewLineCounts.length <= cnt) {\n                    viewLineCounts[viewLineCounts.length] = 1;\n                }\n            }\n            viewZone.diff.viewLineCounts = viewLineCounts;\n        }\n        result.original.sort((a, b) => {\n            return a.afterLineNumber - b.afterLineNumber;\n        });\n    }\n    _renderOriginalLine(renderedLineCount, lineContent, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, fontInfo, disableMonospaceOptimizations, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures, tabSize, sb, marginDomNode) {\n        sb.appendString('<div class=\"view-line');\n        if (!hasCharChanges) {\n            // No char changes\n            sb.appendString(' char-delete');\n        }\n        sb.appendString('\" style=\"top:');\n        sb.appendString(String(renderedLineCount * lineHeight));\n        sb.appendString('px;width:1000000px;\">');\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n        const output = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n        ), sb);\n        sb.appendString('</div>');\n        if (this._renderIndicators) {\n            const marginElement = document.createElement('div');\n            marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n            marginElement.setAttribute('style', `position:absolute;top:${renderedLineCount * lineHeight}px;width:${lineDecorationsWidth}px;height:${lineHeight}px;right:0;`);\n            marginDomNode.appendChild(marginElement);\n        }\n        return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n    }\n}\nfunction validateDiffWordWrap(value, defaultValue) {\n    return validateStringSetOption(value, defaultValue, ['off', 'on', 'inherit']);\n}\nfunction isChangeOrInsert(lineChange) {\n    return lineChange.modifiedEndLineNumber > 0;\n}\nfunction isChangeOrDelete(lineChange) {\n    return lineChange.originalEndLineNumber > 0;\n}\nfunction isCharChangeOrInsert(charChange) {\n    if (charChange.modifiedStartLineNumber === charChange.modifiedEndLineNumber) {\n        return charChange.modifiedEndColumn - charChange.modifiedStartColumn > 0;\n    }\n    return charChange.modifiedEndLineNumber - charChange.modifiedStartLineNumber > 0;\n}\nfunction isCharChangeOrDelete(charChange) {\n    if (charChange.originalStartLineNumber === charChange.originalEndLineNumber) {\n        return charChange.originalEndColumn - charChange.originalStartColumn > 0;\n    }\n    return charChange.originalEndLineNumber - charChange.originalStartLineNumber > 0;\n}\nfunction createFakeLinesDiv() {\n    const r = document.createElement('div');\n    r.className = 'diagonal-fill';\n    return r;\n}\nfunction createViewZoneMarginArrow() {\n    const arrow = document.createElement('div');\n    arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n    return dom.$('div', {}, arrow);\n}\nfunction getViewRange(model, viewModel, startLineNumber, endLineNumber) {\n    const lineCount = model.getLineCount();\n    startLineNumber = Math.min(lineCount, Math.max(1, startLineNumber));\n    endLineNumber = Math.min(lineCount, Math.max(1, endLineNumber));\n    return viewModel.coordinatesConverter.convertModelRangeToViewRange(new Range(startLineNumber, model.getLineMinColumn(startLineNumber), endLineNumber, model.getLineMaxColumn(endLineNumber)));\n}\nfunction validateDiffEditorOptions(options, defaults) {\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateDiffWordWrap(options.diffWordWrap, defaults.diffWordWrap),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            collapseUnchangedRegions: false,\n        },\n    };\n}\nfunction changedDiffEditorOptions(a, b) {\n    return {\n        enableSplitViewResizing: (a.enableSplitViewResizing !== b.enableSplitViewResizing),\n        renderSideBySide: (a.renderSideBySide !== b.renderSideBySide),\n        renderMarginRevertIcon: (a.renderMarginRevertIcon !== b.renderMarginRevertIcon),\n        maxComputationTime: (a.maxComputationTime !== b.maxComputationTime),\n        maxFileSize: (a.maxFileSize !== b.maxFileSize),\n        ignoreTrimWhitespace: (a.ignoreTrimWhitespace !== b.ignoreTrimWhitespace),\n        renderIndicators: (a.renderIndicators !== b.renderIndicators),\n        originalEditable: (a.originalEditable !== b.originalEditable),\n        diffCodeLens: (a.diffCodeLens !== b.diffCodeLens),\n        renderOverviewRuler: (a.renderOverviewRuler !== b.renderOverviewRuler),\n        diffWordWrap: (a.diffWordWrap !== b.diffWordWrap),\n        diffAlgorithm: (a.diffAlgorithm !== b.diffAlgorithm),\n        accessibilityVerbose: (a.accessibilityVerbose !== b.accessibilityVerbose),\n    };\n}\nregisterThemingParticipant((theme, collector) => {\n    const diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n    collector.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as assert from '../../../base/common/assert.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport { Range } from '../../common/core/range.js';\nimport { AudioCue, IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nconst defaultOptions = {\n    followsCaret: true,\n    ignoreCharChanges: true,\n    alwaysRevealFirst: true,\n    findResultLoop: true\n};\n/**\n * Create a new diff navigator for the provided diff editor.\n */\nexport let DiffNavigator = class DiffNavigator extends Disposable {\n    constructor(editor, options = {}, _audioCueService, _codeEditorService, _accessibilityService) {\n        super();\n        this._audioCueService = _audioCueService;\n        this._codeEditorService = _codeEditorService;\n        this._accessibilityService = _accessibilityService;\n        this._onDidUpdate = this._register(new Emitter());\n        this._editor = editor;\n        this._options = objects.mixin(options, defaultOptions, false);\n        this.disposed = false;\n        this.nextIdx = -1;\n        this.ranges = [];\n        this.ignoreSelectionChange = false;\n        this.revealFirst = Boolean(this._options.alwaysRevealFirst);\n        this._register(this._editor.onDidUpdateDiff(() => this._onDiffUpdated()));\n        if (this._options.followsCaret) {\n            this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e) => {\n                if (this.ignoreSelectionChange) {\n                    return;\n                }\n                this._updateAccessibilityState(e.position.lineNumber);\n                this.nextIdx = -1;\n            }));\n        }\n        // init things\n        this._init();\n    }\n    _init() {\n        const changes = this._editor.getLineChanges();\n        if (!changes) {\n            return;\n        }\n    }\n    _onDiffUpdated() {\n        this._init();\n        this._compute(this._editor.getLineChanges());\n        if (this.revealFirst) {\n            // Only reveal first on first non-null changes\n            if (this._editor.getLineChanges() !== null) {\n                this.revealFirst = false;\n                this.nextIdx = -1;\n                this.next(1 /* ScrollType.Immediate */);\n            }\n        }\n    }\n    _compute(lineChanges) {\n        // new ranges\n        this.ranges = [];\n        if (lineChanges) {\n            // create ranges from changes\n            lineChanges.forEach((lineChange) => {\n                if (!this._options.ignoreCharChanges && lineChange.charChanges) {\n                    lineChange.charChanges.forEach((charChange) => {\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn)\n                        });\n                    });\n                }\n                else {\n                    if (lineChange.modifiedEndLineNumber === 0) {\n                        // a deletion\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber + 1, 1)\n                        });\n                    }\n                    else {\n                        // an insertion or modification\n                        this.ranges.push({\n                            rhs: true,\n                            range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber + 1, 1)\n                        });\n                    }\n                }\n            });\n        }\n        // sort\n        this.ranges.sort((left, right) => Range.compareRangesUsingStarts(left.range, right.range));\n        this._onDidUpdate.fire(this);\n    }\n    _initIdx(fwd) {\n        let found = false;\n        const position = this._editor.getPosition();\n        if (!position) {\n            this.nextIdx = 0;\n            return;\n        }\n        for (let i = 0, len = this.ranges.length; i < len && !found; i++) {\n            const range = this.ranges[i].range;\n            if (position.isBeforeOrEqual(range.getStartPosition())) {\n                this.nextIdx = i + (fwd ? 0 : -1);\n                found = true;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this.nextIdx = fwd ? 0 : this.ranges.length - 1;\n        }\n        if (this.nextIdx < 0) {\n            this.nextIdx = this.ranges.length - 1;\n        }\n    }\n    _move(fwd, scrollType) {\n        assert.ok(!this.disposed, 'Illegal State - diff navigator has been disposed');\n        if (!this.canNavigate()) {\n            return;\n        }\n        if (this.nextIdx === -1) {\n            this._initIdx(fwd);\n        }\n        else if (fwd) {\n            this.nextIdx += 1;\n            if (this.nextIdx >= this.ranges.length) {\n                this.nextIdx = 0;\n            }\n        }\n        else {\n            this.nextIdx -= 1;\n            if (this.nextIdx < 0) {\n                this.nextIdx = this.ranges.length - 1;\n            }\n        }\n        const info = this.ranges[this.nextIdx];\n        this.ignoreSelectionChange = true;\n        try {\n            const pos = info.range.getStartPosition();\n            this._editor.setPosition(pos);\n            this._editor.revealRangeInCenter(info.range, scrollType);\n            this._updateAccessibilityState(pos.lineNumber, true);\n        }\n        finally {\n            this.ignoreSelectionChange = false;\n        }\n    }\n    _updateAccessibilityState(lineNumber, jumpToChange) {\n        var _a;\n        const modifiedEditor = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified;\n        if (!modifiedEditor) {\n            return;\n        }\n        const insertedOrModified = modifiedEditor.getLineDecorations(lineNumber).find(l => l.options.className === 'line-insert');\n        if (insertedOrModified) {\n            this._audioCueService.playAudioCue(AudioCue.diffLineModified, true);\n        }\n        else if (jumpToChange) {\n            // The modified editor does not include deleted lines, but when\n            // we are moved to the area where lines were deleted, play this cue\n            this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, true);\n        }\n        else {\n            return;\n        }\n        const codeEditor = this._codeEditorService.getActiveCodeEditor();\n        if (jumpToChange && codeEditor && insertedOrModified && this._accessibilityService.isScreenReaderOptimized()) {\n            codeEditor.setSelection({ startLineNumber: lineNumber, startColumn: 0, endLineNumber: lineNumber, endColumn: Number.MAX_VALUE });\n            codeEditor.writeScreenReaderContent('diff-navigation');\n        }\n    }\n    canNavigate() {\n        return this.ranges && this.ranges.length > 0;\n    }\n    next(scrollType = 0 /* ScrollType.Smooth */) {\n        if (!this.canNavigateNext()) {\n            return;\n        }\n        this._move(true, scrollType);\n    }\n    previous(scrollType = 0 /* ScrollType.Smooth */) {\n        if (!this.canNavigatePrevious()) {\n            return;\n        }\n        this._move(false, scrollType);\n    }\n    canNavigateNext() {\n        return this.canNavigateLoop() || this.nextIdx < this.ranges.length - 1;\n    }\n    canNavigatePrevious() {\n        return this.canNavigateLoop() || this.nextIdx !== 0;\n    }\n    canNavigateLoop() {\n        return Boolean(this._options.findResultLoop);\n    }\n    dispose() {\n        super.dispose();\n        this.ranges = [];\n        this.disposed = true;\n    }\n};\nDiffNavigator = __decorate([\n    __param(2, IAudioCueService),\n    __param(3, ICodeEditorService),\n    __param(4, IAccessibilityService)\n], DiffNavigator);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nexport let EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, ICommandService),\n    __param(7, IContextKeyService),\n    __param(8, IThemeService),\n    __param(9, INotificationService),\n    __param(10, IAccessibilityService),\n    __param(11, ILanguageConfigurationService),\n    __param(12, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\n"],"names":["RenderingContext","_RestrictedRenderingC","_inherits","_super","_createSuper","viewLayout","viewportData","viewLines","_this","_classCallCheck","call","_renderingContextBrand","undefined","_viewLines","_createClass","key","value","range","includeNewLines","this","linesVisibleRangesForRange","position","visibleRangeForPosition","RestrictedRenderingContext","_restrictedRenderingContextBrand","_viewLayout","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","visibleRange","bigNumbersDelta","vInfo","getCurrentViewport","scrollTop","top","scrollLeft","left","viewportWidth","width","viewportHeight","height","absoluteTop","lineNumber","includeViewZones","getVerticalOffsetForLineNumber","getVerticalOffsetAfterLineNumber","getDecorationsInViewport","LineVisibleRanges","outsideRenderedLine","ranges","HorizontalRange","_horizontalRangeBrand","Math","round","concat","result","Array","length","i","len","FloatHorizontalRange","_floatHorizontalRangeBrand","a","b","HorizontalPosition","originalLeft","VisibleRanges","ViewController","configuration","viewModel","userInputEvents","commandDelegate","text","pasteOnNewLine","multicursorText","mode","paste","type","replacePrevCharCnt","replaceNextCharCnt","positionDelta","compositionType","startComposition","endComposition","cut","modelSelection","CoreNavigationCommands","SetSelection","runCoreEditorCommand","source","selection","viewPosition","minColumn","getLineMinColumn","column","Position","data","options","get","altKey","ctrlKey","metaKey","selectionClipboardIsOn","platform","columnSelection","middleButton","_columnSelect","mouseColumn","inSelectionMode","startedOnLineNumbers","_hasMulticursorModifier","_lastCursorLineSelect","revealType","_createCursor","_lineSelectDrag","_lineSelect","mouseDownCount","_selectAll","_lastCursorLineSelectDrag","onInjectedText","_lastCursorWordSelect","_wordSelectDrag","_wordSelect","_hasNonMulticursorModifier","shiftKey","_lastCursorMoveToSelect","_moveToSelect","moveTo","_validateViewColumn","_convertViewToModelPosition","MoveTo","_usualArgs","MoveToSelect","doColumnSelect","ColumnSelect","wholeLine","CreateCursor","LastCursorMoveToSelect","WordSelect","WordSelectDrag","LastCursorWordSelect","LineSelect","LineSelectDrag","LastCursorLineSelect","LastCursorLineSelectDrag","SelectAll","coordinatesConverter","convertViewPositionToModelPosition","e","emitKeyDown","emitKeyUp","emitContextMenu","emitMouseMove","emitMouseLeave","emitMouseUp","emitMouseDown","emitMouseDrag","emitMouseDrop","emitMouseDropCanceled","emitMouseWheel","RenderedLinesCollection","createLine","_createLine","_set","rendLineNumberStart","lines","_lines","_rendLineNumberStart","lineIndex","BugIndicatingError","deleteFromLineNumber","deleteToLineNumber","getCount","startLineNumber","getStartLineNumber","endLineNumber","getEndLineNumber","deleteCnt","deleteStartIndex","deleteCount","deleteAboveCount","splice","changeFromLineNumber","changeCount","changeToLineNumber","someoneNotified","changedLineNumber","onContentChanged","insertFromLineNumber","insertToLineNumber","insertCnt","newLines","insertIndex","beforeLines","slice","afterLines","deletedLines","notifiedSomeone","rng","toLineNumber","fromLineNumber","from","max","to","min","onTokensChanged","VisibleLinesCollection","host","_host","domNode","_createDomNode","_linesCollection","createVisibleLine","createFastDomNode","document","createElement","setClassName","setPosition","setAttribute","hasChanged","flush","onLinesChanged","count","deleted","onLinesDeleted","lineDomNode","getDomNode","removeChild","onLinesInserted","scrollTopChanged","getLine","inp","_get","renderer","ViewLayerRenderer","ctx","linesLength","resCtx","render","relativeVerticalOffset","inContext","stopLineNumber","deltaTop","x","_finishRendering","_renderUntouchedLines","_insertLinesBefore","removeCnt","_removeLinesBefore","_insertLinesAfter","_removeLinesAfter","startIndex","endIndex","deltaLN","layoutLine","newLinesLen","removeCount","removeIndex","domNodeIsEmpty","newLinesHTML","wasNew","_ttPolicy","createHTML","lastChild","innerHTML","insertAdjacentHTML","currChild","line","setDomNode","previousSibling","invalidLinesHTML","wasInvalid","hugeDomNode","firstChild","parentNode","replaceChild","sb","_sb","reset","hadNewLine","renderLine","_finishRenderingNewLines","build","hadInvalidLine","_finishRenderingInvalidLines","createTrustedTypesPolicy","StringBuilder","ViewOverlays","_ViewPart","context","_visibleLines","_assertThisInitialized","fontInfo","_context","applyFontInfo","_dynamicOverlays","_isFocused","_getPrototypeOf","prototype","shouldRender","dispose","ViewOverlayLine","overlay","push","onConfigurationChanged","getVisibleLine","onFlushed","isFocused","onScrollChanged","onZonesChanged","toRender","filter","dynamicOverlay","prepareRender","onDidRender","_viewOverlaysRender","toggleClassName","renderLines","ViewPart","dynamicOverlays","_configuration","_lineHeight","_domNode","_renderedContent","appendString","String","setTop","setHeight","ContentViewOverlays","_ViewOverlays","_super2","_this2","layoutInfo","_contentWidth","contentWidth","scrollWidthChanged","setWidth","MarginViewOverlays","_ViewOverlays2","_super3","_this3","_contentLeft","contentLeft","scrollHeightChanged","_ViewEventHandler","addEventHandler","removeEventHandler","ViewEventHandler","PartFingerprints","target","partId","r","getAttribute","parseInt","child","stopAt","resultLen","body","nodeType","ELEMENT_NODE","read","parentElement","Uint8Array","ViewUserInputEvents","onKeyDown","onKeyUp","onContextMenu","onMouseMove","onMouseLeave","onMouseDown","onMouseUp","onMouseDrag","onMouseDrop","onMouseDropCanceled","onMouseWheel","_coordinatesConverter","_a","_convertViewToModelMouseEvent","event","_convertViewToModelMouseTarget","convertViewToModelMouseTarget","Object","assign","convertViewRangeToModelRange","detail","convertViewToModelViewZoneData","viewZoneId","positionBefore","positionAfter","afterLineNumber","CodeEditorContributions","_Disposable","_editor","_instantiationService","_instances","_register","DisposableMap","_pending","Map","_finishedInstantiation","editor","contributions","instantiationService","_step","_iterator","_createForOfIteratorHelper","s","n","done","desc","has","id","onUnexpectedError","Error","set","err","f","_instantiateSome","runWhenIdle","_step2","contributionsState","_iterator2","_step2$value","_slicedToArray","contribution","saveViewState","_step3","_iterator3","_step3$value","restoreViewState","_instantiateById","instantiation","_step4","contribs","_findPendingContributionsByInstantiation","_iterator4","contrib","_step5","_iterator5","delete","instance","createInstance","ctor","console","warn","Disposable","__decorate","decorators","d","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","then","apply","EDITOR_ID","ModelData","model","view","hasRealView","listenersToRemove","attachedView","onBeforeDetached","CodeEditorWidget","domElement","_options","codeEditorWidgetOptions","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","_deliveryQueue","EventDeliveryQueue","_contributions","_onDidDispose","Emitter","onDidDispose","_onDidChangeModelContent","deliveryQueue","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeModelTokens","onDidChangeModelTokens","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","InteractionEmitter","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","_onMouseDown","_onMouseDrag","_onMouseDrop","_onMouseDropCanceled","_onDropIntoEditor","onDropIntoEditor","_onContextMenu","_onMouseMove","_onMouseLeave","_onMouseWheel","_onKeyUp","_onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_actions","_bannerDomNode","_dropIntoEditorDecorations","createDecorationsCollection","willCreateCodeEditor","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_createConfiguration","isSimpleWidget","onDidChange","fire","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","createChild","ServiceCollection","IContextKeyService","_modelData","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","isArray","EditorExtensionsRegistry","getEditorContributions","initialize","getEditorActions","_loop","action","internalAction","InternalEditorAction","label","alias","withNullAsUndefined","precondition","invokeFunction","accessor","runEditorCommand","isDropIntoEnabled","enabled","dom","DragAndDropObserver","onDragEnter","onDragOver","getTargetAtClientPoint","clientX","clientY","showDropIndicatorAt","onDrop","_regeneratorRuntime","mark","_callee","wrap","prev","abrupt","removeDropIndicator","dataTransfer","stop","onDragLeave","onDragEnd","addCodeEditor","reason","writeScreenReaderContent","EditorConfiguration","getEditorType","editorCommon","ICodeEditor","removeCodeEditor","clear","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","fn","newOptions","updateOptions","getRawOptions","WordOperations","getWordAtPosition","preserveBOM","eolPreference","lineEnding","getValue","newValue","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","onAfterModelAttached","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","_getVerticalOffsetForPosition","_getVerticalOffsetAfterPosition","setHiddenAreas","map","Range","lift","rawPosition","validatePosition","tabSize","getOptions","CursorColumns","visibleColumnFromColumn","getLineContent","getPosition","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","_revealLine","_sendRevealRange","_revealPosition","getSelection","getSelections","something","isSelection","Selection","isISelection","isRange","_setSelectionImpl","startColumn","endColumn","sel","_revealLines","revealVerticalInCenter","_revealRange","getContentWidth","getCurrentScrollLeft","getContentHeight","getCurrentScrollTop","newScrollLeft","setScrollPosition","newScrollTop","hasPendingScrollAnimation","cursorState","saveCursorState","viewState","saveState","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","values","getActions","isSupported","handlerId","payload","_startComposition","_endComposition","args","_type","_compositionType","replaceCharCnt","_paste","_cut","getAction","run","_triggerEditorCommand","_triggerCommand","executeCommand","startPosition","getStartPosition","endPosition","languageId","command","getEditorCommand","pushStackElement","popStackElement","edits","endCursorState","cursorStateComputer","executeEdits","commands","executeCommands","decorations","EditorDecorationsCollection","callback","changeDecorations","getLineDecorations","filterValidationDecorations","getDecorationsInRange","oldDecorations","newDecorations","deltaDecorations","decorationIds","changeAccessor","decorationTypeKey","oldDecorationsIds","hasOwnProperty","cssClassName","createOverviewRuler","browserEvent","delegateVerticalScrollbarPointerDown","delegateScrollFromMouseWheelEvent","dimension","observeContainer","widget","widgetData","getId","addContentWidget","widgetId","layoutContentWidget","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","change","getScrollTop","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","getScrollLeft","forceRedraw","setAriaOptions","domNodeHeight","contains","setReservedHeight","prepend","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","onBeforeAttached","ViewModel","DOMLineBreaksComputerFactory","create","MonospaceLineBreaksComputerFactory","scheduleAtNextAnimationFrame","onWillDispose","setModel","onEvent","kind","reachedMaxCursorCount","multiCursorLimit","getOption","message","nls","prompt","Severity","Warning","query","positions","selections","e1","secondaryPositions","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_this$_createView","_createView","_this$_createView2","appendChild","keys","toString","_this4","viewUserInputEvents","View","getColorTheme","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","dropIntoEditorDecorationOptions","revealPosition","modelData","modelLineNumber","modelColumn","modelPosition","convertModelPositionToViewPosition","ModelDecorationOptions","register","description","className","IInstantiationService","ICodeEditorService","ICommandService","IThemeService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","_Disposable2","_emitterOptions","_this5","_onDidChangeToTrue","_onDidChangeToFalse","_value","_Emitter","_this6","onBeforeInteractionEvent","_Disposable3","_super4","_this7","createKey","_editorSimpleInput","EditorContextKeys","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","TabFocus","onDidChangeTabFocus","getTabFocusMode","some","isEmpty","hasWidgetFocus","getModel","Boolean","_Disposable4","_super5","_languageFeaturesService","_this8","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","completionProvider","codeActionProvider","codeLensProvider","definitionProvider","declarationProvider","implementationProvider","typeDefinitionProvider","hoverProvider","documentHighlightProvider","documentSymbolProvider","referenceProvider","renameProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","signatureHelpProvider","inlayHintsProvider","_this9","bufferChangeEvents","_this10","all","scheme","Schemas","walkThroughSnippet","_Disposable5","_super6","_this11","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","_decorationIds","_isChangingDecorations","listener","thisArgs","disposables","_this12","index","getDecorationRange","decorationId","decoration","includes","_this13","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","registerThemingParticipant","theme","collector","errorForeground","getColor","editorErrorForeground","addRule","warningForeground","editorWarningForeground","infoForeground","editorInfoForeground","hintForeground","editorHintForeground","unnecessaryForeground","editorUnnecessaryCodeOpacity","rgba","DiffEntry","originalLineStart","originalLineEnd","modifiedLineStart","modifiedLineEnd","Diff","entries","diffReviewInsertIcon","registerIcon","Codicon","add","diffReviewRemoveIcon","remove","diffReviewCloseIcon","close","DiffReview","diffEditor","_languageService","_audioCueService","_configurationService","_width","_diffEditor","_isVisible","shadow","actionBarContainer","_actionBar","ActionBar","Action","ThemeIcon","asClassName","hide","icon","_content","scrollbar","DomScrollableElement","onDidUpdateDiff","_diffs","_compute","_render","getModifiedEditor","addStandardDisposableListener","preventDefault","row","findParentWithClass","_goToRow","equals","_getNextRow","_getPrevRow","accept","affectsConfiguration","accessibilityVerbose","_currentDiff","currentIndex","_findDiffIndex","setSelection","doLayout","jumpToLineNumber","current","_getCurrentFocusedRow","isNaN","previousElementSibling","_getFirstRow","nextElementSibling","querySelector","activeElement","test","tabIndex","element","classList","playAudioCue","AudioCue","diffLineInserted","diffLineDeleted","scanDomNode","setDisplay","lineChanges","getLineChanges","originalModel","getOriginalEditor","modifiedModel","_mergeAdjacent","pos","diff","originalOptions","modifiedOptions","originalModelOpts","modifiedModelOpts","clearNode","diffIndex","diffs","container","minOriginalLine","maxOriginalLine","minModifiedLine","maxModifiedLine","diffEntry","header","cell","originalChangedLinesCnt","modifiedChangedLinesCnt","createTextNode","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","lineHeight","modLine","_renderSection","languageIdCodec","originalLineCount","modifiedLineCount","diffsLength","lineChange","originalStart","originalStartLineNumber","originalEnd","originalEndLineNumber","modifiedStart","modifiedStartLineNumber","modifiedEnd","modifiedEndLineNumber","rLength","originalEqualAbove","modifiedEqualAbove","minOriginal","minModified","prevLineChange","fromOriginal","fromModified","delta","originalEqualBelow","modifiedEqualBelow","maxOriginal","maxModified","nextLineChange","toOriginal","toModified","curr","thisDiff","currLast","thisFirst","getType","dest","rowClassName","lineNumbersExtraClassName","spacerIcon","cnt","originalLayoutInfo","originalLineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","originalLine","modifiedLine","style","minWidth","originalLineNumber","innerText","modifiedLineNumber","paddingRight","spacer","spacerCodicon","lineContent","html","_renderLine","ariaLabel","lineTokens","LineTokens","createEmpty","isBasicASCII","ViewLineRenderingData","mightContainNonBasicASCII","containsRTL","mightContainRTL","renderViewLine","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","ILanguageService","IAudioCueService","IConfigurationService","DiffReviewNext","_EditorAction","ContextKeyExpr","kbOpts","kbExpr","primary","weight","findFocusedDiffEditor","diffReviewNext","EditorAction","DiffReviewPrev","_EditorAction2","diffReviewPrev","diffEditors","listDiffEditors","activeCodeEditor","getFocusedCodeEditor","getActiveCodeEditor","registerEditorAction","InlineDiffMargin","_viewZoneId","_marginDomNode","_contextMenuService","_clipboardService","_visibility","zIndex","_diffActions","lightBulb","lineFeed","getEOL","right","visibility","actions","isDeletion","deletedText","getValueInRange","writeText","currentLineNumberOffset","copyLineAction","_callee2","eof","_context2","getEndOfLineSequence","_callee3","_column","_context3","getLineMaxColumn","useShadowDOM","isIOS","showContextMenu","y","domForShadowRoot","getAnchor","autoSelectFirstItem","_dom$getDomNodePagePo","getDomNodePagePosition","pad","floor","posx","_updateLightBulbPosition","rightButton","posy","marginDomNode","offset","lineNumberOffset","newTop","viewLineCounts","acc","WorkerBasedDocumentDiffProvider","editorWorkerService","telemetryService","onDidChangeEventEmitter","diffAlgorithm","diffAlgorithmOnDidChangeSubscription","setOptions","original","modified","sw","timeMs","computeDiff","changes","LineRangeMapping","LineRange","RangeMapping","getFullModelRange","identical","quitEarly","StopWatch","sent","elapsed","publicLog2","timedOut","didChange","IEditorWorkerService","ITelemetryService","VisualEditorState","_zones","_inlineDiffMargins","_zonesMap","_decorations","allViewZones","z","changeViewZones","viewChangeAccessor","zoneId","removeZone","overviewRuler","restoreScrollState","scrollState","StableEditorScrollState","capture","zones","viewZone","suppressMouseDown","addZone","getValueLength","restore","setZones","overviewZones","DIFF_EDITOR_ID","diffInsertIcon","diffRemoveIcon","ttPolicy","ariaNavigationTip","DiffEditorWidget","clipboardService","contextMenuService","_editorProgressService","_onDidUpdateDiff","_lastOriginalWarning","_lastModifiedWarning","willCreateDiffEditor","_documentDiffProvider","_beginUpdateDecorationsSoon","_state","_updatingDiffProgress","validateDiffEditorOptions","enableSplitViewResizing","splitViewDefaultRatio","renderSideBySide","renderMarginRevertIcon","maxComputationTime","maxFileSize","ignoreTrimWhitespace","renderIndicators","originalEditable","diffCodeLens","renderOverviewRuler","diffWordWrap","experimental","collapseUnchangedRegions","isEmbeddedDiffEditorKey","isEmbeddedDiffEditor","isInEmbeddedEditor","_updateDecorationsRunner","RunOnceScheduler","_updateDecorations","_containerDomElement","_getClassName","_overviewViewportDomElement","_overviewDomElement","EventType","POINTER_DOWN","_modifiedEditor","addDisposableListener","MOUSE_WHEEL","passive","_originalDomNode","_modifiedDomNode","_beginUpdateDecorationsTimeout","_currentlyChangingViewZones","_diffComputationToken","_originalEditorState","_modifiedEditorState","_isHandlingScrollEvent","_elementSizeObserver","ElementSizeObserver","_onDidContainerSizeChanged","automaticLayout","startObserving","_diffComputationResult","_originalEditor","_createLeftHandSideEditor","originalEditor","_createRightHandSideEditor","modifiedEditor","_originalOverviewRuler","_modifiedOverviewRuler","_reviewPane","_setStrategy","DiffEditorWidgetSideBySide","_createDataSource","DiffEditorWidgetInline","onDidColorThemeChange","t","_strategy","applyColors","schedule","getDiffEditorContributions","addDiffEditor","newState","show","assert","ok","_layoutOverviewRulers","_createInnerEditor","_adjustOptionsForLeftHandSide","scrollLeftChanged","_layoutOverviewViewport","_onViewZonesChanged","cancel","isInDiffLeftEditorKey","ONE_OVERVIEW_WIDTH","contentHeight","contentHeightChanged","contentWidthChanged","_adjustOptionsForRightHandSide","isInDiffRightEditorKey","_b","find","revertChange","stopPropagation","originalRange","originalContent","newRange","eol","setStartPosition","setEndPosition","insertAt","fromPositions","editorWidgetOptions","removeDiffEditor","window","clearTimeout","_cleanViewZonesAndDecorations","IDiffEditor","_newOptions","changed","beginUpdateDecorations","beginUpdateDecorationsSoon","_beginUpdateDecorations","setEnableSplitViewResizing","_disposeOverviewRulers","setScrollTop","_setState","_createOverviewRulers","_diffNavigator","DiffNavigator","alwaysRevealFirst","findResultLoop","loop","getVisibleColumnFromPosition","revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","getSupportedActions","trigger","diffEditorState","observe","_doLayout","isVisible","getHeight","reviewHeight","_getReviewHeight","freeSpace","ENTIRE_DIFF_OVERVIEW_WIDTH","getLayoutInfo","setLayout","setTimeout","UPDATE_DIFF_DECORATIONS_DELAY","currentOriginalModel","currentModifiedModel","currentToken","diffLimit","canSyncModelForDiff","bufferTextLength","maxComputationTimeMs","changes2","m","innerChanges","endLineNumberExclusive","modifiedRange","charChanges","originalStartColumn","originalEndColumn","modifiedStartColumn","modifiedEndColumn","error","_equals","clean","foreignOriginal","getForeignViewZones","foreignModified","diffDecorations","getEditorsDiffDecorations","clonedOptions","vertical","folding","codeLens","fixedOverflowWidgets","minimap","_adjustOptionsForSubEditor","wordWrapOverride1","wordWrapOverride2","originalAriaLabel","_updateAriaLabel","dropIntoEditor","extraEditorClassName","replaceAll","modifiedAriaLabel","revealHorizontalRightPadding","EditorOptions","defaultValue","verticalHasArrows","getWidth","splitPoint","layout","_computeOverviewViewport","computedAvailableSize","computedRepresentableSize","computedRatio","getContainerDomNode","relayoutEditors","newStrategy","_boundarySashes","setBoundarySashes","startLineNumberExtractor","mid","midStart","midEnd","_getLineChangeAtOrBeforeLineNumber","originalEquivalentLineNumber","modifiedEquivalentLineNumber","lineChangeOriginalLength","lineChangeModifiedLength","equivalentLineNumber","_getEquivalentLineForOriginalLineNumber","_getEquivalentLineForModifiedLineNumber","getThemeTypeSelector","IClipboardService","IContextMenuService","IEditorProgressService","DiffEditorWidgetStyle","dataSource","_dataSource","_insertColor","_removeColor","newInsertColor","diffOverviewRulerInserted","diffInserted","defaultInsertColor","transparent","newRemoveColor","diffOverviewRulerRemoved","diffRemoved","defaultRemoveColor","hasChanges","originalWhitespaces","modifiedWhitespaces","sort","_getViewZones","originalDecorations","_getOriginalEditorDecorations","modifiedDecorations","_getModifiedEditorDecorations","_sashes","ForeignViewZonesIterator","_source","_index","advance","ViewZonesComputer","_lineChanges","_originalForeignVZ","_modifiedForeignVZ","originalLineHeight","modifiedLineHeight","originalHasWrapping","wrappingColumn","modifiedHasWrapping","hasWrapping","originalCoordinatesConverter","_getViewModel","modifiedCoordinatesConverter","originalEndEquivalentLineNumber","modifiedEndEquivalentLineNumber","sortMyViewZones","addAndCombineIfPossible","destination","item","lastItem","heightInLines","modifiedForeignVZ","originalForeignVZ","lastOriginalLineNumber","lastModifiedLineNumber","_getViewLineCount","stepOriginal","stepModified","originalViewLineCount","getModelLineViewLineCount","modifiedViewLineCount","viewZoneLineNumber","_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion","isChangeOrInsert","_produceOriginalFromDiff","isChangeOrDelete","_produceModifiedFromDiff","stepOriginalIndex","stepModifiedIndex","originalDelta","modifiedDelta","shouldNotShrink","_ensureDomNodes","getViewRange","createFakeLinesDiv","createDecoration","DECORATIONS","arrowRevertChange","glyphMarginHoverMessage","MarkdownString","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","arrowRight","charDelete","charDeleteWholeLine","isWholeLine","charInsert","charInsertWholeLine","lineInsert","marginClassName","lineInsertWithSign","linesDecorationsClassName","lineDelete","lineDeleteWithSign","lineDeleteMargin","_DiffEditorWidgetStyl","defaultSashRatio","_disableSash","_defaultRatio","_sashRatio","_sashPosition","_startSashPosition","_sash","Sash","orientation","state","onDidStart","_onSashDragStart","_onSashDrag","onDidEnd","_onSashDragEnd","onDidReset","_onSashReset","defaultRatio","newDisableSash","sashRatio","sashPosition","midPoint","MINIMUM_EDITOR_WIDTH","currentX","startX","sash","sashes","orthogonalEndSash","bottom","SideBySideViewZonesComputer","getViewZones","overviewZoneColor","originalViewModel","OverviewRulerZone","_step6","_iterator6","charChange","isCharChangeOrDelete","getLineFirstNonWhitespaceColumn","getLineLastNonWhitespaceColumn","_step7","modifiedViewModel","_iterator7","arrow","$","createViewZoneMarginArrow","_step8","_iterator8","isCharChangeOrInsert","_ViewZonesComputer","_DiffEditorWidgetStyl2","_decorationsLeft","decorationsLeft","InlineViewZonesComputer","_step9","zoneIndex","_iterator9","zone","zoneHeightInLines","_step10","_iterator10","_step11","_iterator11","_ViewZonesComputer2","_originalModel","_renderIndicators","_pendingLineChange","_pendingViewZones","_lineBreaksComputer","createLineBreaksComputer","_finalize","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","minWidthInPx","addRequest","modifiedEditorOptions","disableMonospaceOptimizations","typicalHalfwidthCharacterWidth","scrollBeyondLastColumn","lineDecorationsWidth","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","lineBreaks","finalize","lineBreakIndex","_step12","_iterator12","InlineDecoration","hasCharChanges","maxCharsPerLine","renderedLineCount","tokenization","getLineTokens","lineBreakData","actualDecorations","LineDecoration","_step13","lastBreakOffset","_iterator13","breakOffsets","breakOffset","viewLineTokens","sliceAndInflate","viewLineContent","substring","_renderOriginalLine","extractWrapped","marginDomNode2","afterColumn","trustedhtml","output","marginElement","characterMapping","getHorizontalOffset","lineCount","defaults","validateBooleanOption","clampedFloat","clampedInt","validateStringSetOption","diffDiagonalFillColor","diffDiagonalFill","defaultOptions","followsCaret","ignoreCharChanges","_accessibilityService","_onDidUpdate","objects","disposed","nextIdx","ignoreSelectionChange","revealFirst","_onDiffUpdated","_updateAccessibilityState","_init","forEach","rhs","compareRangesUsingStarts","fwd","found","isBeforeOrEqual","canNavigate","_initIdx","info","jumpToChange","insertedOrModified","l","diffLineModified","codeEditor","isScreenReaderOptimized","Number","MAX_VALUE","canNavigateNext","_move","canNavigatePrevious","canNavigateLoop","EmbeddedCodeEditorWidget","_CodeEditorWidget","parentEditor","_thisSuper","getOverflowWidgetsDomNode","_parentEditor","_overwriteOptions","_onParentConfigurationChanged"],"sourceRoot":""}