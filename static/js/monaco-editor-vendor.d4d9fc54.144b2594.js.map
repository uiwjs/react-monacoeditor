{"version":3,"file":"static/js/monaco-editor-vendor.d4d9fc54.144b2594.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/commandIds.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionContextKeys.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/singleTextEdit.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/provideInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsSource.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/commands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/hoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletions.contribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHintsWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inlineProgress/browser/inlineProgress.js","../node_modules/monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js","../node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js","../node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n    constructor(range, direction) {\n        this.range = range;\n        this.direction = direction;\n    }\n}\nexport class InlayHintItem {\n    constructor(hint, anchor, provider) {\n        this.hint = hint;\n        this.anchor = anchor;\n        this.provider = provider;\n        this._isResolved = false;\n    }\n    with(delta) {\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n        result._isResolved = this._isResolved;\n        result._currentResolve = this._currentResolve;\n        return result;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.provider.resolveInlayHint !== 'function') {\n                return;\n            }\n            if (this._currentResolve) {\n                // wait for an active resolve operation and try again\n                // when that's done.\n                yield this._currentResolve;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                return this.resolve(token);\n            }\n            if (!this._isResolved) {\n                this._currentResolve = this._doResolve(token)\n                    .finally(() => this._currentResolve = undefined);\n            }\n            yield this._currentResolve;\n        });\n    }\n    _doResolve(token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\n                this._isResolved = true;\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                this._isResolved = false;\n            }\n        });\n    }\n}\nexport class InlayHintsFragments {\n    static create(registry, model, ranges, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const result = yield provider.provideInlayHints(model, range, token);\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\n                        data.push([result, provider]);\n                    }\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            yield Promise.all(promises.flat());\n            if (token.isCancellationRequested || model.isDisposed()) {\n                throw new CancellationError();\n            }\n            return new InlayHintsFragments(ranges, data, model);\n        });\n    }\n    constructor(ranges, data, model) {\n        this._disposables = new DisposableStore();\n        this.ranges = ranges;\n        this.provider = new Set();\n        const items = [];\n        for (const [list, provider] of data) {\n            this._disposables.add(list);\n            this.provider.add(provider);\n            for (const hint of list.hints) {\n                // compute the range to which the item should be attached to\n                const position = model.validatePosition(hint.position);\n                let direction = 'before';\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n                let range;\n                if (wordRange.getStartPosition().isBefore(position)) {\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\n                    direction = 'after';\n                }\n                else {\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\n                    direction = 'before';\n                }\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n            }\n        }\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    static _getRangeAtPosition(model, position) {\n        const line = position.lineNumber;\n        const word = model.getWordAtPosition(position);\n        if (word) {\n            // always prefer the word range\n            return new Range(line, word.startColumn, line, word.endColumn);\n        }\n        model.tokenization.tokenizeIfCheap(line);\n        const tokens = model.tokenization.getLineTokens(line);\n        const offset = position.column - 1;\n        const idx = tokens.findTokenIndexAtOffset(offset);\n        let start = tokens.getStartOffset(idx);\n        let end = tokens.getEndOffset(idx);\n        if (end - start === 1) {\n            // single character token, when at its end try leading/trailing token instead\n            if (start === offset && idx > 1) {\n                // leading token\n                start = tokens.getStartOffset(idx - 1);\n                end = tokens.getEndOffset(idx - 1);\n            }\n            else if (end === offset && idx < tokens.getCount() - 1) {\n                // trailing token\n                start = tokens.getStartOffset(idx + 1);\n                end = tokens.getEndOffset(idx + 1);\n            }\n        }\n        return new Range(line, start + 1, line, end + 1);\n    }\n}\nexport function asCommandLink(command) {\n    return URI.from({\n        scheme: Schemas.command,\n        path: command.id,\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n    }).toString();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ModifierKeyEmitter } from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n    constructor() {\n        this._entries = new LRUCache(50);\n    }\n    get(model) {\n        const key = InlayHintsCache._key(model);\n        return this._entries.get(key);\n    }\n    set(model, value) {\n        const key = InlayHintsCache._key(model);\n        this._entries.set(key, value);\n    }\n    static _key(model) {\n        return `${model.uri.toString()}/${model.getVersionId()}`;\n    }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, 1 /* InstantiationType.Delayed */);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n    constructor(item, index) {\n        this.item = item;\n        this.index = index;\n    }\n    get part() {\n        const label = this.item.hint.label;\n        if (typeof label === 'string') {\n            return { label };\n        }\n        else {\n            return label[this.index];\n        }\n    }\n}\nclass ActiveInlayHintInfo {\n    constructor(part, hasTriggerModifier) {\n        this.part = part;\n        this.hasTriggerModifier = hasTriggerModifier;\n    }\n}\n// --- controller\nexport let InlayHintsController = class InlayHintsController {\n    static get(editor) {\n        var _a;\n        return (_a = editor.getContribution(InlayHintsController.ID)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._inlayHintsCache = _inlayHintsCache;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._instaService = _instaService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._decorationsMetadata = new Map();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(136 /* EditorOption.inlayHints */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._sessionDisposables.dispose();\n        this._removeAllDecorations();\n        this._disposables.dispose();\n    }\n    _update() {\n        this._sessionDisposables.clear();\n        this._removeAllDecorations();\n        const options = this._editor.getOption(136 /* EditorOption.inlayHints */);\n        if (options.enabled === 'off') {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n            return;\n        }\n        // iff possible, quickly update from cache\n        const cached = this._inlayHintsCache.get(model);\n        if (cached) {\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\n        }\n        this._sessionDisposables.add(toDisposable(() => {\n            // cache items when switching files etc\n            if (!model.isDisposed()) {\n                this._cacheHintsForFastRestore(model);\n            }\n        }));\n        let cts;\n        const watchedProviders = new Set();\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\n            const t1 = Date.now();\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\n            cts = new CancellationTokenSource();\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\n            try {\n                const myToken = cts.token;\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n                if (myToken.isCancellationRequested) {\n                    inlayHints.dispose();\n                    return;\n                }\n                // listen to provider changes\n                for (const provider of inlayHints.provider) {\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n                        watchedProviders.add(provider);\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\n                                scheduler.schedule();\n                            }\n                        }));\n                    }\n                }\n                this._sessionDisposables.add(inlayHints);\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n                this._cacheHintsForFastRestore(model);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                cts.dispose();\n                listener.dispose();\n            }\n        }), this._debounceInfo.get(model));\n        this._sessionDisposables.add(scheduler);\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\n        scheduler.schedule(0);\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\n            // update when scroll position changes\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n            // typing or due to \"actual\" scrolling\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\n                scheduler.schedule();\n            }\n        }));\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\n            // update less aggressive when typing\n            const delay = Math.max(scheduler.delay, 1250);\n            scheduler.schedule(delay);\n        }));\n        if (options.enabled === 'on') {\n            // different \"on\" modes: always\n            this._activeRenderMode = 0 /* RenderMode.Normal */;\n        }\n        else {\n            // different \"on\" modes: offUnlessPressed, or onUnlessPressed\n            let defaultMode;\n            let altMode;\n            if (options.enabled === 'onUnlessPressed') {\n                defaultMode = 0 /* RenderMode.Normal */;\n                altMode = 1 /* RenderMode.Invisible */;\n            }\n            else {\n                defaultMode = 1 /* RenderMode.Invisible */;\n                altMode = 0 /* RenderMode.Normal */;\n            }\n            this._activeRenderMode = defaultMode;\n            this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\n                if (!this._editor.hasModel()) {\n                    return;\n                }\n                const newRenderMode = e.altKey && e.ctrlKey && !(e.shiftKey || e.metaKey) ? altMode : defaultMode;\n                if (newRenderMode !== this._activeRenderMode) {\n                    this._activeRenderMode = newRenderMode;\n                    const model = this._editor.getModel();\n                    const copies = this._copyInlayHintsWithCurrentAnchor(model);\n                    this._updateHintsDecorators([model.getFullModelRange()], copies);\n                    scheduler.schedule(0);\n                }\n            }));\n        }\n        // mouse gestures\n        this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\n        this._sessionDisposables.add(this._installLinkGesture());\n        this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n        const store = new DisposableStore();\n        const gesture = store.add(new ClickLinkGesture(this._editor));\n        // let removeHighlight = () => { };\n        const sessionStore = new DisposableStore();\n        store.add(sessionStore);\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n            const [mouseEvent] = e;\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\n            const model = this._editor.getModel();\n            if (!labelPart || !model) {\n                sessionStore.clear();\n                return;\n            }\n            // resolve the item\n            const cts = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\n            labelPart.item.resolve(cts.token);\n            // render link => when the modifier is pressed and when there is a command or location\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\n                : undefined;\n            const lineNumber = model.validatePosition(labelPart.item.hint.position).lineNumber;\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n            const lineHints = this._getInlineHintsForRange(range);\n            this._updateHintsDecorators([range], lineHints);\n            sessionStore.add(toDisposable(() => {\n                this._activeInlayHintPart = undefined;\n                this._updateHintsDecorators([range], lineHints);\n            }));\n        }));\n        store.add(gesture.onCancel(() => sessionStore.clear()));\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            const label = this._getInlayHintLabelPart(e);\n            if (label) {\n                const part = label.part;\n                if (part.location) {\n                    // location -> execute go to def\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n                }\n                else if (languages.Command.is(part.command)) {\n                    // command -> execute it\n                    yield this._invokeCommand(part.command, label.item);\n                }\n            }\n        })));\n        return store;\n    }\n    _getInlineHintsForRange(range) {\n        const lineHints = new Set();\n        for (const data of this._decorationsMetadata.values()) {\n            if (range.containsRange(data.item.anchor.range)) {\n                lineHints.add(data.item);\n            }\n        }\n        return Array.from(lineHints);\n    }\n    _installDblClickGesture(updateInlayHints) {\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.event.detail !== 2) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (!part) {\n                return;\n            }\n            e.event.preventDefault();\n            yield part.item.resolve(CancellationToken.None);\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\n                this._editor.executeEdits('inlayHint.default', edits);\n                updateInlayHints();\n            }\n        }));\n    }\n    _installContextMenu() {\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\n            if (!(e.event.target instanceof HTMLElement)) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (part) {\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n            }\n        }));\n    }\n    _getInlayHintLabelPart(e) {\n        var _a;\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return undefined;\n        }\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\n            return options.attachedData;\n        }\n        return undefined;\n    }\n    _invokeCommand(command, item) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                this._notificationService.notify({\n                    severity: Severity.Error,\n                    source: item.provider.displayName,\n                    message: err\n                });\n            }\n        });\n    }\n    _cacheHintsForFastRestore(model) {\n        const hints = this._copyInlayHintsWithCurrentAnchor(model);\n        this._inlayHintsCache.set(model, hints);\n    }\n    // return inlay hints but with an anchor that reflects \"updates\"\n    // that happened after receiving them, e.g adding new lines before a hint\n    _copyInlayHintsWithCurrentAnchor(model) {\n        const items = new Map();\n        for (const [id, obj] of this._decorationsMetadata) {\n            if (items.has(obj.item)) {\n                // an inlay item can be rendered as multiple decorations\n                // but they will all uses the same range\n                continue;\n            }\n            const range = model.getDecorationRange(id);\n            if (range) {\n                // update range with whatever the editor has tweaked it to\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n                const copy = obj.item.with({ anchor });\n                items.set(obj.item, copy);\n            }\n        }\n        return Array.from(items.values());\n    }\n    _getHintsRanges() {\n        const extra = 30;\n        const model = this._editor.getModel();\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        const result = [];\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n                result.push(extendedRange);\n            }\n            else {\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n            }\n        }\n        return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n        var _a, _b;\n        // utils to collect/create injected text decorations\n        const newDecorationsData = [];\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n            const opts = {\n                content,\n                inlineClassNameAffectsLetterSpacing: true,\n                inlineClassName: ref.className,\n                cursorStops,\n                attachedData\n            };\n            newDecorationsData.push({\n                item,\n                classNameRef: ref,\n                decoration: {\n                    range: item.anchor.range,\n                    options: {\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n                        description: 'InlayHint',\n                        showIfCollapsed: item.anchor.range.isEmpty(),\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n                        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n                        [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\n                    }\n                }\n            });\n        };\n        const addInjectedWhitespace = (item, isLast) => {\n            const marginRule = this._ruleFactory.createClassNameRef({\n                width: `${(fontSize / 3) | 0}px`,\n                display: 'inline-block'\n            });\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n        };\n        //\n        const { fontSize, fontFamily, padding, isUniform } = this._getLayoutInfo();\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n        for (const item of items) {\n            // whitespace leading the actual label\n            if (item.hint.paddingLeft) {\n                addInjectedWhitespace(item, false);\n            }\n            // the label with its parts\n            const parts = typeof item.hint.label === 'string'\n                ? [{ label: item.hint.label }]\n                : item.hint.label;\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                const isFirst = i === 0;\n                const isLast = i === parts.length - 1;\n                const cssProperties = {\n                    fontSize: `${fontSize}px`,\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n                    verticalAlign: isUniform ? 'baseline' : 'middle',\n                    unicodeBidi: 'isolate'\n                };\n                if (isNonEmptyArray(item.hint.textEdits)) {\n                    cssProperties.cursor = 'default';\n                }\n                this._fillInColors(cssProperties, item.hint);\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\n                    // active link!\n                    cssProperties.textDecoration = 'underline';\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n                        cssProperties.cursor = 'pointer';\n                    }\n                }\n                if (padding) {\n                    if (isFirst && isLast) {\n                        // only element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isFirst) {\n                        // first element\n                        cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isLast) {\n                        // last element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n                        cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\n                    }\n                    else {\n                        cssProperties.padding = `1px 0 1px 0`;\n                    }\n                }\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n            }\n            // whitespace trailing the actual label\n            if (item.hint.paddingRight) {\n                addInjectedWhitespace(item, true);\n            }\n            if (newDecorationsData.length > InlayHintsController._MAX_DECORATORS) {\n                break;\n            }\n        }\n        // collect all decoration ids that are affected by the ranges\n        // and only update those decorations\n        const decorationIdsToReplace = [];\n        for (const range of ranges) {\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\n                const metadata = this._decorationsMetadata.get(id);\n                if (metadata) {\n                    decorationIdsToReplace.push(id);\n                    metadata.classNameRef.dispose();\n                    this._decorationsMetadata.delete(id);\n                }\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        this._editor.changeDecorations(accessor => {\n            const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n            for (let i = 0; i < newDecorationIds.length; i++) {\n                const data = newDecorationsData[i];\n                this._decorationsMetadata.set(newDecorationIds[i], data);\n            }\n        });\n        scrollState.restore(this._editor);\n    }\n    _fillInColors(props, hint) {\n        if (hint.kind === languages.InlayHintKind.Parameter) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n        }\n        else if (hint.kind === languages.InlayHintKind.Type) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n        }\n        else {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\n        }\n    }\n    _getLayoutInfo() {\n        const options = this._editor.getOption(136 /* EditorOption.inlayHints */);\n        const padding = options.padding;\n        const editorFontSize = this._editor.getOption(50 /* EditorOption.fontSize */);\n        const editorFontFamily = this._editor.getOption(47 /* EditorOption.fontFamily */);\n        let fontSize = options.fontSize;\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n            fontSize = editorFontSize;\n        }\n        const fontFamily = options.fontFamily || editorFontFamily;\n        const isUniform = !padding\n            && fontFamily === editorFontFamily\n            && fontSize === editorFontSize;\n        return { fontSize, fontFamily, padding, isUniform };\n    }\n    _removeAllDecorations() {\n        this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\n        for (const obj of this._decorationsMetadata.values()) {\n            obj.classNameRef.dispose();\n        }\n        this._decorationsMetadata.clear();\n    }\n};\nInlayHintsController.ID = 'editor.contrib.InlayHints';\nInlayHintsController._MAX_DECORATORS = 1500;\nInlayHintsController = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, IInlayHintsCache),\n    __param(4, ICommandService),\n    __param(5, INotificationService),\n    __param(6, IInstantiationService)\n], InlayHintsController);\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n    const noBreakWhitespace = '\\xa0';\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(URI.isUri(uri));\n    assertType(Range.isIRange(range));\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n        const result = model.items.map(i => i.hint);\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n        return result;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner, initialMousePosX, initialMousePosY) {\n        super(10, owner, part.item.anchor.range, initialMousePosX, initialMousePosY, true);\n        this.part = part;\n    }\n}\nexport let InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this, mouseEvent.event.posx, mouseEvent.event.posy);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var _a, e_1, _b, _c;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], false, 0));\n            }\n            // (1.2) Inlay dbl-click gesture\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double-click to insert\"))], false, 10001));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], false, 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(75 /* EditorOption.multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], false, 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var _d = true, iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), _a = iterable_1_1.done, !_a; _d = true) {\n                    _c = iterable_1_1.value;\n                    _d = false;\n                    const item = _c;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = iterable_1.return)) yield _b.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, false, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(InlayHintsHover);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const contextMenuService = accessor.get(IContextMenuService);\n        const commandService = accessor.get(ICommandService);\n        const instaService = accessor.get(IInstantiationService);\n        const notificationService = accessor.get(INotificationService);\n        yield part.item.resolve(CancellationToken.None);\n        if (!part.part.location) {\n            return;\n        }\n        const location = part.part.location;\n        const menuActions = [];\n        // from all registered (not active) context menu actions select those\n        // that are a symbol navigation actions\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n            .map(item => isIMenuItem(item) ? item.command.id : generateUuid()));\n        for (const delegate of SymbolNavigationAction.all()) {\n            if (filter.has(delegate.desc.id)) {\n                menuActions.push(new Action(delegate.desc.id, MenuItemAction.label(delegate.desc, { renderShortTitle: true }), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                    const ref = yield resolverService.createModelReference(location.uri);\n                    try {\n                        const symbolAnchor = new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range));\n                        const range = part.item.anchor.range;\n                        yield instaService.invokeFunction(delegate.runEditorCommand.bind(delegate), editor, symbolAnchor, range);\n                    }\n                    finally {\n                        ref.dispose();\n                    }\n                })));\n            }\n        }\n        if (part.part.command) {\n            const { command } = part.part;\n            menuActions.push(new Separator());\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                var _b;\n                try {\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\n                }\n                catch (err) {\n                    notificationService.notify({\n                        severity: Severity.Error,\n                        source: part.item.provider.displayName,\n                        message: err\n                    });\n                }\n            })));\n        }\n        // show context menu\n        const useShadowDOM = editor.getOption(123 /* EditorOption.useShadowDOM */);\n        contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n            getAnchor: () => {\n                const box = dom.getDomNodePagePosition(anchor);\n                return { x: box.left, y: box.top + box.height + 8 };\n            },\n            getActions: () => menuActions,\n            onHide: () => {\n                editor.focus();\n            },\n            autoSelectFirstItem: true,\n        });\n    });\n}\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const ref = yield resolverService.createModelReference(location.uri);\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\n            const openToSide = event.hasSideBySideModifier;\n            const contextKeyService = accessor.get(IContextKeyService);\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n            const canPeek = !openToSide && editor.getOption(85 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)), Range.lift(location.range));\n        }));\n        ref.dispose();\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\nexport const showPreviousInlineSuggestionActionId = 'editor.action.inlineSuggest.showPrevious';\nexport const showNextInlineSuggestionActionId = 'editor.action.inlineSuggest.showNext';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { autorun } from '../../../../base/common/observable.js';\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nexport class InlineCompletionContextKeys extends Disposable {\n    constructor(contextKeyService, model) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.model = model;\n        this.inlineCompletionVisible = InlineCompletionContextKeys.inlineSuggestionVisible.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentation = InlineCompletionContextKeys.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n        this.suppressSuggestions = InlineCompletionContextKeys.suppressSuggestions.bindTo(this.contextKeyService);\n        this._register(autorun('update context key: inlineCompletionVisible, suppressSuggestions', (reader) => {\n            const model = this.model.read(reader);\n            const suggestion = model === null || model === void 0 ? void 0 : model.selectedInlineCompletion.read(reader);\n            const ghostText = model === null || model === void 0 ? void 0 : model.ghostText.read(reader);\n            const selectedSuggestItem = model === null || model === void 0 ? void 0 : model.selectedSuggestItem.read(reader);\n            this.inlineCompletionVisible.set(selectedSuggestItem === undefined && ghostText !== undefined && !ghostText.isEmpty());\n            if (ghostText && suggestion) {\n                this.suppressSuggestions.set(suggestion.inlineCompletion.source.inlineCompletions.suppressSuggestions);\n            }\n        }));\n        this._register(autorun('update context key: inlineCompletionSuggestsIndentation, inlineCompletionSuggestsIndentationLessThanTabSize', (reader) => {\n            const model = this.model.read(reader);\n            let startsWithIndentation = false;\n            let startsWithIndentationLessThanTabSize = true;\n            const ghostText = model === null || model === void 0 ? void 0 : model.ghostText.read(reader);\n            if (!!(model === null || model === void 0 ? void 0 : model.selectedSuggestItem) && ghostText && ghostText.parts.length > 0) {\n                const { column, lines } = ghostText.parts[0];\n                const firstLine = lines[0];\n                const indentationEndColumn = model.textModel.getLineIndentColumn(ghostText.lineNumber);\n                const inIndentation = column <= indentationEndColumn;\n                if (inIndentation) {\n                    let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n                    if (firstNonWsIdx === -1) {\n                        firstNonWsIdx = firstLine.length - 1;\n                    }\n                    startsWithIndentation = firstNonWsIdx > 0;\n                    const tabSize = model.textModel.getOptions().tabSize;\n                    const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n                    startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n                }\n            }\n            this.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n            this.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n        }));\n    }\n}\nInlineCompletionContextKeys.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\nInlineCompletionContextKeys.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\nInlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\nInlineCompletionContextKeys.suppressSuggestions = new RawContextKey('inlineSuggestionSuppressSuggestions', undefined, localize('suppressSuggestions', \"Whether suggestions should be suppressed for the current suggestion\"));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport function applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n    return array;\n}\nexport class ColumnRange {\n    constructor(startColumn, endColumnExclusive) {\n        this.startColumn = startColumn;\n        this.endColumnExclusive = endColumnExclusive;\n        if (startColumn > endColumnExclusive) {\n            throw new BugIndicatingError(`startColumn ${startColumn} cannot be after endColumnExclusive ${endColumnExclusive}`);\n        }\n    }\n    toRange(lineNumber) {\n        return new Range(lineNumber, this.startColumn, lineNumber, this.endColumnExclusive);\n    }\n}\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorun(`Apply decorations from ${decorations.debugName}`, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function addPositions(pos1, pos2) {\n    return new Position(pos1.lineNumber + pos2.lineNumber - 1, pos2.lineNumber === 1 ? pos1.column + pos2.column - 1 : pos2.column);\n}\nexport function lengthOfText(text) {\n    let line = 1;\n    let column = 1;\n    for (const c of text) {\n        if (c === '\\n') {\n            line++;\n            column = 1;\n        }\n        else {\n            column++;\n        }\n    }\n    return new Position(line, column);\n}\n","import { applyEdits } from './utils.js';\nexport class GhostText {\n    constructor(lineNumber, parts) {\n        this.lineNumber = lineNumber;\n        this.parts = parts;\n    }\n    renderForScreenReader(lineText) {\n        if (this.parts.length === 0) {\n            return '';\n        }\n        const lastPart = this.parts[this.parts.length - 1];\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\n            text: p.lines.join('\\n')\n        })));\n        return text.substring(this.parts[0].column - 1);\n    }\n    isEmpty() {\n        return this.parts.every(p => p.lines.length === 0);\n    }\n    get lineCount() {\n        return 1 + this.parts.reduce((r, p) => r + p.lines.length - 1, 0);\n    }\n}\nexport class GhostTextPart {\n    constructor(column, lines, \n    /**\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n    */\n    preview) {\n        this.column = column;\n        this.lines = lines;\n        this.preview = preview;\n    }\n}\nexport class GhostTextReplacement {\n    constructor(lineNumber, columnRange, newLines, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.columnRange = columnRange;\n        this.newLines = newLines;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n        this.parts = [\n            new GhostTextPart(this.columnRange.endColumnExclusive, this.newLines, false),\n        ];\n    }\n    renderForScreenReader(_lineText) {\n        return this.newLines.join('\\n');\n    }\n    get lineCount() {\n        return this.newLines.length;\n    }\n    isEmpty() {\n        return this.parts.every(p => p.lines.length === 0);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent, observableSignalFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './ghostText.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { GhostTextReplacement } from './ghostText.js';\nimport { ColumnRange, applyObservableDecorations } from './utils.js';\nexport let GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.languageService = languageService;\n        this.isDisposed = observableValue('isDisposed', false);\n        this.currentTextModel = observableFromEvent(this.editor.onDidChangeModel, () => this.editor.getModel());\n        this.uiState = derived('uiState', reader => {\n            if (this.isDisposed.read(reader)) {\n                return undefined;\n            }\n            const textModel = this.currentTextModel.read(reader);\n            if (textModel !== this.model.targetTextModel.read(reader)) {\n                return undefined;\n            }\n            const ghostText = this.model.ghostText.read(reader);\n            if (!ghostText) {\n                return undefined;\n            }\n            const replacedRange = ghostText instanceof GhostTextReplacement ? ghostText.columnRange : undefined;\n            const inlineTexts = [];\n            const additionalLines = [];\n            function addToAdditionalLines(lines, className) {\n                if (additionalLines.length > 0) {\n                    const lastLine = additionalLines[additionalLines.length - 1];\n                    if (className) {\n                        lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n                    }\n                    lastLine.content += lines[0];\n                    lines = lines.slice(1);\n                }\n                for (const line of lines) {\n                    additionalLines.push({\n                        content: line,\n                        decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n                    });\n                }\n            }\n            const textBufferLine = textModel.getLineContent(ghostText.lineNumber);\n            let hiddenTextStartColumn = undefined;\n            let lastIdx = 0;\n            for (const part of ghostText.parts) {\n                let lines = part.lines;\n                if (hiddenTextStartColumn === undefined) {\n                    inlineTexts.push({\n                        column: part.column,\n                        text: lines[0],\n                        preview: part.preview,\n                    });\n                    lines = lines.slice(1);\n                }\n                else {\n                    addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n                }\n                if (lines.length > 0) {\n                    addToAdditionalLines(lines, 'ghost-text');\n                    if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                        hiddenTextStartColumn = part.column;\n                    }\n                }\n                lastIdx = part.column - 1;\n            }\n            if (hiddenTextStartColumn !== undefined) {\n                addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n            }\n            const hiddenRange = hiddenTextStartColumn !== undefined ? new ColumnRange(hiddenTextStartColumn, textBufferLine.length + 1) : undefined;\n            return {\n                replacedRange,\n                inlineTexts,\n                additionalLines,\n                hiddenRange,\n                lineNumber: ghostText.lineNumber,\n                additionalReservedLineCount: this.model.minReservedLineCount.read(reader),\n                targetTextModel: textModel,\n            };\n        });\n        this.decorations = derived('decorations', reader => {\n            const uiState = this.uiState.read(reader);\n            if (!uiState) {\n                return [];\n            }\n            const decorations = [];\n            if (uiState.replacedRange) {\n                decorations.push({\n                    range: uiState.replacedRange.toRange(uiState.lineNumber),\n                    options: { inlineClassName: 'inline-completion-text-to-replace', description: 'GhostTextReplacement' }\n                });\n            }\n            if (uiState.hiddenRange) {\n                decorations.push({\n                    range: uiState.hiddenRange.toRange(uiState.lineNumber),\n                    options: { inlineClassName: 'ghost-text-hidden', description: 'ghost-text-hidden', }\n                });\n            }\n            for (const p of uiState.inlineTexts) {\n                decorations.push({\n                    range: Range.fromPositions(new Position(uiState.lineNumber, p.column)),\n                    options: {\n                        description: 'ghost-text',\n                        after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration', cursorStops: InjectedTextCursorStops.Left },\n                        showIfCollapsed: true,\n                    }\n                });\n            }\n            return decorations;\n        });\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec, derived('lines', (reader) => {\n            const uiState = this.uiState.read(reader);\n            return uiState ? {\n                lineNumber: uiState.lineNumber,\n                additionalLines: uiState.additionalLines,\n                minReservedLineCount: uiState.additionalReservedLineCount,\n                targetTextModel: uiState.targetTextModel,\n            } : undefined;\n        })));\n        this._register(toDisposable(() => { this.isDisposed.set(true, undefined); }));\n        this._register(applyObservableDecorations(this.editor, this.decorations));\n    }\n    ownsViewZone(viewZoneId) {\n        return this.additionalLinesWidget.viewZoneId === viewZoneId;\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, ILanguageService)\n], GhostTextWidget);\nclass AdditionalLinesWidget extends Disposable {\n    get viewZoneId() { return this._viewZoneId; }\n    constructor(editor, languageIdCodec, lines) {\n        super();\n        this.editor = editor;\n        this.languageIdCodec = languageIdCodec;\n        this.lines = lines;\n        this._viewZoneId = undefined;\n        this.editorOptionsChanged = observableSignalFromEvent('editorOptionChanged', Event.filter(this.editor.onDidChangeConfiguration, e => e.hasChanged(31 /* EditorOption.disableMonospaceOptimizations */)\n            || e.hasChanged(113 /* EditorOption.stopRenderingLineAfter */)\n            || e.hasChanged(95 /* EditorOption.renderWhitespace */)\n            || e.hasChanged(90 /* EditorOption.renderControlCharacters */)\n            || e.hasChanged(49 /* EditorOption.fontLigatures */)\n            || e.hasChanged(48 /* EditorOption.fontInfo */)\n            || e.hasChanged(64 /* EditorOption.lineHeight */)));\n        this._register(autorun('update view zone', reader => {\n            const lines = this.lines.read(reader);\n            this.editorOptionsChanged.read(reader);\n            if (lines) {\n                this.updateLines(lines.lineNumber, lines.additionalLines, lines.minReservedLineCount);\n            }\n            else {\n                this.clear();\n            }\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this.clear();\n    }\n    clear() {\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n        });\n    }\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const { tabSize } = textModel.getOptions();\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n            if (heightInLines > 0) {\n                const domNode = document.createElement('div');\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n                this._viewZoneId = changeAccessor.addZone({\n                    afterLineNumber: lineNumber,\n                    heightInLines: heightInLines,\n                    domNode,\n                    afterColumnAffinity: 1 /* PositionAffinity.Right */\n                });\n            }\n        });\n    }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n    const disableMonospaceOptimizations = opts.get(31 /* EditorOption.disableMonospaceOptimizations */);\n    const stopRenderingLineAfter = opts.get(113 /* EditorOption.stopRenderingLineAfter */);\n    // To avoid visual confusion, we don't want to render visible whitespace\n    const renderWhitespace = 'none';\n    const renderControlCharacters = opts.get(90 /* EditorOption.renderControlCharacters */);\n    const fontLigatures = opts.get(49 /* EditorOption.fontLigatures */);\n    const fontInfo = opts.get(48 /* EditorOption.fontInfo */);\n    const lineHeight = opts.get(64 /* EditorOption.lineHeight */);\n    const sb = new StringBuilder(10000);\n    sb.appendString('<div class=\"suggest-preview-text\">');\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const lineData = lines[i];\n        const line = lineData.content;\n        sb.appendString('<div class=\"view-line');\n        sb.appendString('\" style=\"top:');\n        sb.appendString(String(i * lineHeight));\n        sb.appendString('px;width:1000000px;\">');\n        const isBasicASCII = strings.isBasicASCII(line);\n        const containsRTL = strings.containsRTL(line);\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n        sb.appendString('</div>');\n    }\n    sb.appendString('</div>');\n    applyFontInfo(domNode, fontInfo);\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n}\nconst ttPolicy = createTrustedTypesPolicy('editorGhostText', { createHTML: value => value });\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\nimport { commonPrefixLength, getLeadingWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nimport { addPositions, lengthOfText } from './utils.js';\nexport class SingleTextEdit {\n    constructor(range, text) {\n        this.range = range;\n        this.text = text;\n    }\n    removeCommonPrefix(model, validModelRange) {\n        const modelRange = validModelRange ? this.range.intersectRanges(validModelRange) : this.range;\n        if (!modelRange) {\n            return this;\n        }\n        const valueToReplace = model.getValueInRange(modelRange, 1 /* EndOfLinePreference.LF */);\n        const commonPrefixLen = commonPrefixLength(valueToReplace, this.text);\n        const start = addPositions(this.range.getStartPosition(), lengthOfText(valueToReplace.substring(0, commonPrefixLen)));\n        const text = this.text.substring(commonPrefixLen);\n        const range = Range.fromPositions(start, this.range.getEndPosition());\n        return new SingleTextEdit(range, text);\n    }\n    augments(base) {\n        // The augmented completion must replace the base range, but can replace even more\n        return this.text.startsWith(base.text) && rangeExtends(this.range, base.range);\n    }\n    /**\n     * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n     * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n    */\n    computeGhostText(model, mode, cursorPosition, previewSuffixLength = 0) {\n        let edit = this.removeCommonPrefix(model);\n        if (edit.range.endLineNumber !== edit.range.startLineNumber) {\n            // This edit might span multiple lines, but the first lines must be a common prefix.\n            return undefined;\n        }\n        const sourceLine = model.getLineContent(edit.range.startLineNumber);\n        const sourceIndentationLength = getLeadingWhitespace(sourceLine).length;\n        const suggestionTouchesIndentation = edit.range.startColumn - 1 <= sourceIndentationLength;\n        if (suggestionTouchesIndentation) {\n            // source:      [abc]\n            //                         ^^^^^^^^^ inlineCompletion.range\n            //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n            //                         ^^^^^^ replacedIndentation.length\n            //                               ^^^ rangeThatDoesNotReplaceIndentation\n            // inlineCompletion.text: 'foo'\n            //                         ^^ suggestionAddedIndentationLength\n            const suggestionAddedIndentationLength = getLeadingWhitespace(edit.text).length;\n            const replacedIndentation = sourceLine.substring(edit.range.startColumn - 1, sourceIndentationLength);\n            const rangeThatDoesNotReplaceIndentation = Range.fromPositions(edit.range.getStartPosition().delta(0, replacedIndentation.length), edit.range.getEndPosition());\n            const suggestionWithoutIndentationChange = edit.text.startsWith(replacedIndentation)\n                // Adds more indentation without changing existing indentation: We can add ghost text for this\n                ? edit.text.substring(replacedIndentation.length)\n                // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n                : edit.text.substring(suggestionAddedIndentationLength);\n            edit = new SingleTextEdit(rangeThatDoesNotReplaceIndentation, suggestionWithoutIndentationChange);\n        }\n        // This is a single line string\n        const valueToBeReplaced = model.getValueInRange(edit.range);\n        const changes = cachingDiff(valueToBeReplaced, edit.text);\n        if (!changes) {\n            // No ghost text in case the diff would be too slow to compute\n            return undefined;\n        }\n        const lineNumber = edit.range.startLineNumber;\n        const parts = new Array();\n        if (mode === 'prefix') {\n            const filteredChanges = changes.filter(c => c.originalLength === 0);\n            if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n                // Prefixes only have a single change.\n                return undefined;\n            }\n        }\n        const previewStartInCompletionText = edit.text.length - previewSuffixLength;\n        for (const c of changes) {\n            const insertColumn = edit.range.startColumn + c.originalStart + c.originalLength;\n            if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === edit.range.startLineNumber && insertColumn < cursorPosition.column) {\n                // No ghost text before cursor\n                return undefined;\n            }\n            if (c.originalLength > 0) {\n                return undefined;\n            }\n            if (c.modifiedLength === 0) {\n                continue;\n            }\n            const modifiedEnd = c.modifiedStart + c.modifiedLength;\n            const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n            const nonPreviewText = edit.text.substring(c.modifiedStart, nonPreviewTextEnd);\n            const italicText = edit.text.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n            if (nonPreviewText.length > 0) {\n                const lines = splitLines(nonPreviewText);\n                parts.push(new GhostTextPart(insertColumn, lines, false));\n            }\n            if (italicText.length > 0) {\n                const lines = splitLines(italicText);\n                parts.push(new GhostTextPart(insertColumn, lines, true));\n            }\n        }\n        return new GhostText(lineNumber, parts);\n    }\n}\nfunction rangeExtends(extendingRange, rangeToExtend) {\n    return rangeToExtend.getStartPosition().equals(extendingRange.getStartPosition())\n        && rangeToExtend.getEndPosition().isBeforeOrEqual(extendingRange.getEndPosition());\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\n    }\n    else {\n        let changes = smartDiff(originalValue, newValue, true);\n        if (changes) {\n            const deletedChars = deletedCharacters(changes);\n            if (deletedChars > 0) {\n                // For performance reasons, don't compute diff if there is nothing to improve\n                const newChanges = smartDiff(originalValue, newValue, false);\n                if (newChanges && deletedCharacters(newChanges) < deletedChars) {\n                    // Disabling smartness seems to be better here\n                    changes = newChanges;\n                }\n            }\n        }\n        lastRequest = {\n            originalValue,\n            newValue,\n            changes\n        };\n        return changes;\n    }\n}\nfunction deletedCharacters(changes) {\n    let sum = 0;\n    for (const c of changes) {\n        sum += c.originalLength;\n    }\n    return sum;\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\n    if (originalValue.length > 5000 || newValue.length > 5000) {\n        // We don't want to work on strings that are too big\n        return undefined;\n    }\n    function getMaxCharCode(val) {\n        let maxCharCode = 0;\n        for (let i = 0, len = val.length; i < len; i++) {\n            const charCode = val.charCodeAt(i);\n            if (charCode > maxCharCode) {\n                maxCharCode = charCode;\n            }\n        }\n        return maxCharCode;\n    }\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n    function getUniqueCharCode(id) {\n        if (id < 0) {\n            throw new Error('unexpected');\n        }\n        return maxCharCode + id + 1;\n    }\n    function getElements(source) {\n        let level = 0;\n        let group = 0;\n        const characters = new Int32Array(source.length);\n        for (let i = 0, len = source.length; i < len; i++) {\n            // TODO support more brackets\n            if (smartBracketMatching && source[i] === '(') {\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id);\n                level++;\n            }\n            else if (smartBracketMatching && source[i] === ')') {\n                level = Math.max(level - 1, 0);\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id + 1);\n                if (level === 0) {\n                    group++;\n                }\n            }\n            else {\n                characters[i] = source.charCodeAt(i);\n            }\n        }\n        return characters;\n    }\n    const elements1 = getElements(originalValue);\n    const elements2 = getElements(newValue);\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Range } from '../../../common/core/range.js';\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { getReadonlyEmptyArray } from './utils.js';\nimport { SnippetParser, Text } from '../../snippet/browser/snippetParser.js';\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Important: Don't use position after the await calls, as the model could have been changed in the meantime!\n        const defaultReplaceRange = getDefaultRange(position, model);\n        const providers = registry.all(model);\n        const providerResults = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const completions = yield provider.provideInlineCompletions(model, position, context, token);\n                return ({ provider, completions });\n            }\n            catch (e) {\n                onUnexpectedExternalError(e);\n            }\n            return ({ provider, completions: undefined });\n        })));\n        const itemsByHash = new Map();\n        const lists = [];\n        for (const result of providerResults) {\n            const completions = result.completions;\n            if (!completions) {\n                continue;\n            }\n            const list = new InlineCompletionList(completions, result.provider);\n            lists.push(list);\n            for (const item of completions.items) {\n                const inlineCompletionItem = InlineCompletionItem.from(item, list, defaultReplaceRange, model, languageConfigurationService);\n                itemsByHash.set(inlineCompletionItem.hash(), inlineCompletionItem);\n            }\n        }\n        return new InlineCompletionProviderResult(Array.from(itemsByHash.values()), new Set(itemsByHash.keys()), lists);\n    });\n}\nexport class InlineCompletionProviderResult {\n    constructor(\n    /**\n     * Free of duplicates.\n     */\n    completions, hashs, providerResults) {\n        this.completions = completions;\n        this.hashs = hashs;\n        this.providerResults = providerResults;\n    }\n    has(item) {\n        return this.hashs.has(item.hash());\n    }\n    dispose() {\n        for (const result of this.providerResults) {\n            result.removeRef();\n        }\n    }\n}\n/**\n * A ref counted pointer to the computed `InlineCompletions` and the `InlineCompletionsProvider` that\n * computed them.\n */\nexport class InlineCompletionList {\n    constructor(inlineCompletions, provider) {\n        this.inlineCompletions = inlineCompletions;\n        this.provider = provider;\n        this.refCount = 1;\n    }\n    addRef() {\n        this.refCount++;\n    }\n    removeRef() {\n        this.refCount--;\n        if (this.refCount === 0) {\n            this.provider.freeInlineCompletions(this.inlineCompletions);\n        }\n    }\n}\nexport class InlineCompletionItem {\n    static from(inlineCompletion, source, defaultReplaceRange, textModel, languageConfigurationService) {\n        let insertText;\n        let snippetInfo;\n        let range = inlineCompletion.range ? Range.lift(inlineCompletion.range) : defaultReplaceRange;\n        if (typeof inlineCompletion.insertText === 'string') {\n            insertText = inlineCompletion.insertText;\n            if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\n                insertText = closeBrackets(insertText, range.getStartPosition(), textModel, languageConfigurationService);\n                // Modify range depending on if brackets are added or removed\n                const diff = insertText.length - inlineCompletion.insertText.length;\n                if (diff !== 0) {\n                    range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n                }\n            }\n            snippetInfo = undefined;\n        }\n        else if ('snippet' in inlineCompletion.insertText) {\n            const preBracketCompletionLength = inlineCompletion.insertText.snippet.length;\n            if (languageConfigurationService && inlineCompletion.completeBracketPairs) {\n                inlineCompletion.insertText.snippet = closeBrackets(inlineCompletion.insertText.snippet, range.getStartPosition(), textModel, languageConfigurationService);\n                // Modify range depending on if brackets are added or removed\n                const diff = inlineCompletion.insertText.snippet.length - preBracketCompletionLength;\n                if (diff !== 0) {\n                    range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n                }\n            }\n            const snippet = new SnippetParser().parse(inlineCompletion.insertText.snippet);\n            if (snippet.children.length === 1 && snippet.children[0] instanceof Text) {\n                insertText = snippet.children[0].value;\n                snippetInfo = undefined;\n            }\n            else {\n                insertText = snippet.toString();\n                snippetInfo = {\n                    snippet: inlineCompletion.insertText.snippet,\n                    range: range\n                };\n            }\n        }\n        else {\n            assertNever(inlineCompletion.insertText);\n        }\n        return new InlineCompletionItem(insertText, inlineCompletion.command, range, insertText, snippetInfo, inlineCompletion.additionalTextEdits || getReadonlyEmptyArray(), inlineCompletion, source);\n    }\n    constructor(filterText, command, range, insertText, snippetInfo, additionalTextEdits, \n    /**\n     * A reference to the original inline completion this inline completion has been constructed from.\n     * Used for event data to ensure referential equality.\n    */\n    sourceInlineCompletion, \n    /**\n     * A reference to the original inline completion list this inline completion has been constructed from.\n     * Used for event data to ensure referential equality.\n    */\n    source) {\n        this.filterText = filterText;\n        this.command = command;\n        this.range = range;\n        this.insertText = insertText;\n        this.snippetInfo = snippetInfo;\n        this.additionalTextEdits = additionalTextEdits;\n        this.sourceInlineCompletion = sourceInlineCompletion;\n        this.source = source;\n        filterText = filterText.replace(/\\r\\n|\\r/g, '\\n');\n        insertText = filterText.replace(/\\r\\n|\\r/g, '\\n');\n    }\n    withRange(updatedRange) {\n        return new InlineCompletionItem(this.filterText, this.command, updatedRange, this.insertText, this.snippetInfo, this.additionalTextEdits, this.sourceInlineCompletion, this.source);\n    }\n    hash() {\n        return JSON.stringify({ insertText: this.insertText, range: this.range.toString() });\n    }\n}\nfunction getDefaultRange(position, model) {\n    const word = model.getWordAtPosition(position);\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\n    // By default, always replace up until the end of the current line.\n    // This default might be subject to change!\n    return word\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n    const newLine = lineStart + text;\n    const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\n    if (!slicedTokens) {\n        return text;\n    }\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n    return newText;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, transaction } from '../../../../base/common/observableImpl/base.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { SingleTextEdit } from './singleTextEdit.js';\nimport { provideInlineCompletions } from './provideInlineCompletions.js';\nexport let InlineCompletionsSource = class InlineCompletionsSource extends Disposable {\n    constructor(textModel, versionId, _debounceValue, languageFeaturesService, languageConfigurationService) {\n        super();\n        this.textModel = textModel;\n        this.versionId = versionId;\n        this._debounceValue = _debounceValue;\n        this.languageFeaturesService = languageFeaturesService;\n        this.languageConfigurationService = languageConfigurationService;\n        this._updateOperation = this._register(new MutableDisposable());\n        this.inlineCompletions = disposableObservableValue('inlineCompletions', undefined);\n        this.suggestWidgetInlineCompletions = disposableObservableValue('suggestWidgetInlineCompletions', undefined);\n        this._register(this.textModel.onDidChangeContent(() => {\n            this._updateOperation.clear();\n        }));\n    }\n    fetch(position, context, activeInlineCompletion) {\n        var _a, _b;\n        const request = new UpdateRequest(position, context, this.textModel.getVersionId());\n        const target = context.selectedSuggestionInfo ? this.suggestWidgetInlineCompletions : this.inlineCompletions;\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.satisfies(request)) {\n            return this._updateOperation.value.promise;\n        }\n        else if ((_b = target.get()) === null || _b === void 0 ? void 0 : _b.request.satisfies(request)) {\n            return Promise.resolve(true);\n        }\n        const updateOngoing = !!this._updateOperation.value;\n        this._updateOperation.clear();\n        const source = new CancellationTokenSource();\n        const promise = (() => __awaiter(this, void 0, void 0, function* () {\n            const shouldDebounce = updateOngoing || context.triggerKind === InlineCompletionTriggerKind.Automatic;\n            if (shouldDebounce) {\n                // This debounces the operation\n                yield wait(this._debounceValue.get(this.textModel));\n            }\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\n                return false;\n            }\n            const startTime = new Date();\n            const updatedCompletions = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.textModel, context, source.token, this.languageConfigurationService);\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\n                return false;\n            }\n            const endTime = new Date();\n            this._debounceValue.update(this.textModel, endTime.getTime() - startTime.getTime());\n            const completions = new UpToDateInlineCompletions(updatedCompletions, request, this.textModel, this.versionId);\n            if (activeInlineCompletion) {\n                const asInlineCompletion = activeInlineCompletion.toInlineCompletion(undefined);\n                if (activeInlineCompletion.canBeReused(this.textModel, position) && !updatedCompletions.has(asInlineCompletion)) {\n                    completions.prepend(activeInlineCompletion.inlineCompletion, asInlineCompletion.range, true);\n                }\n            }\n            this._updateOperation.clear();\n            transaction(tx => {\n                target.set(completions, tx);\n            });\n            return true;\n        }))();\n        const updateOperation = new UpdateOperation(request, source, promise);\n        this._updateOperation.value = updateOperation;\n        return promise;\n    }\n    clear(tx) {\n        this._updateOperation.clear();\n        this.inlineCompletions.set(undefined, tx);\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n    clearSuggestWidgetInlineCompletions(tx) {\n        var _a;\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.context.selectedSuggestionInfo) {\n            this._updateOperation.clear();\n        }\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n    cancelUpdate() {\n        this._updateOperation.clear();\n    }\n};\nInlineCompletionsSource = __decorate([\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageConfigurationService)\n], InlineCompletionsSource);\nfunction wait(ms, cancellationToken) {\n    return new Promise(resolve => {\n        let d = undefined;\n        const handle = setTimeout(() => {\n            if (d) {\n                d.dispose();\n            }\n            resolve();\n        }, ms);\n        if (cancellationToken) {\n            d = cancellationToken.onCancellationRequested(() => {\n                clearTimeout(handle);\n                if (d) {\n                    d.dispose();\n                }\n                resolve();\n            });\n        }\n    });\n}\nclass UpdateRequest {\n    constructor(position, context, versionId) {\n        this.position = position;\n        this.context = context;\n        this.versionId = versionId;\n    }\n    satisfies(other) {\n        return this.position.equals(other.position)\n            && equals(this.context.selectedSuggestionInfo, other.context.selectedSuggestionInfo, (v1, v2) => v1.equals(v2))\n            && (other.context.triggerKind === InlineCompletionTriggerKind.Automatic\n                || this.context.triggerKind === InlineCompletionTriggerKind.Explicit)\n            && this.versionId === other.versionId;\n    }\n}\nfunction equals(v1, v2, equals) {\n    if (!v1 || !v2) {\n        return v1 === v2;\n    }\n    return equals(v1, v2);\n}\nclass UpdateOperation {\n    constructor(request, cancellationTokenSource, promise) {\n        this.request = request;\n        this.cancellationTokenSource = cancellationTokenSource;\n        this.promise = promise;\n    }\n    dispose() {\n        this.cancellationTokenSource.cancel();\n    }\n}\nexport class UpToDateInlineCompletions {\n    get inlineCompletions() { return this._inlineCompletions; }\n    constructor(inlineCompletionProviderResult, request, textModel, versionId) {\n        this.inlineCompletionProviderResult = inlineCompletionProviderResult;\n        this.request = request;\n        this.textModel = textModel;\n        this.versionId = versionId;\n        this._refCount = 1;\n        this._prependedInlineCompletionItems = [];\n        this._rangeVersionIdValue = 0;\n        this._rangeVersionId = derived('ranges', reader => {\n            this.versionId.read(reader);\n            let changed = false;\n            for (const i of this._inlineCompletions) {\n                changed = changed || i._updateRange(this.textModel);\n            }\n            if (changed) {\n                this._rangeVersionIdValue++;\n            }\n            return this._rangeVersionIdValue;\n        });\n        const ids = textModel.deltaDecorations([], inlineCompletionProviderResult.completions.map(i => ({\n            range: i.range,\n            options: {\n                description: 'inline-completion-tracking-range'\n            },\n        })));\n        this._inlineCompletions = inlineCompletionProviderResult.completions.map((i, index) => new InlineCompletionWithUpdatedRange(i, ids[index], this._rangeVersionId));\n    }\n    clone() {\n        this._refCount++;\n        return this;\n    }\n    dispose() {\n        this._refCount--;\n        if (this._refCount === 0) {\n            this.textModel.deltaDecorations(this._inlineCompletions.map(i => i.decorationId), []);\n            this.inlineCompletionProviderResult.dispose();\n            for (const i of this._prependedInlineCompletionItems) {\n                i.source.removeRef();\n            }\n        }\n    }\n    prepend(inlineCompletion, range, addRefToSource) {\n        if (addRefToSource) {\n            inlineCompletion.source.addRef();\n        }\n        const id = this.textModel.deltaDecorations([], [{\n                range,\n                options: {\n                    description: 'inline-completion-tracking-range'\n                },\n            }])[0];\n        this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(inlineCompletion, id, this._rangeVersionId, range));\n        this._prependedInlineCompletionItems.push(inlineCompletion);\n    }\n}\nexport class InlineCompletionWithUpdatedRange {\n    get forwardStable() {\n        var _a;\n        return (_a = this.inlineCompletion.source.inlineCompletions.enableForwardStability) !== null && _a !== void 0 ? _a : false;\n    }\n    constructor(inlineCompletion, decorationId, rangeVersion, initialRange) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.rangeVersion = rangeVersion;\n        this.semanticId = JSON.stringify([\n            this.inlineCompletion.filterText,\n            this.inlineCompletion.insertText,\n            this.inlineCompletion.range.getStartPosition().toString()\n        ]);\n        this._isValid = true;\n        this._updatedRange = initialRange !== null && initialRange !== void 0 ? initialRange : inlineCompletion.range;\n    }\n    toInlineCompletion(reader) {\n        return this.inlineCompletion.withRange(this._getUpdatedRange(reader));\n    }\n    toSingleTextEdit(reader) {\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.insertText);\n    }\n    isVisible(model, cursorPosition, reader) {\n        const minimizedReplacement = this._toFilterTextReplacement(reader).removeCommonPrefix(model);\n        if (!this._isValid\n            || !this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(reader).getStartPosition())\n            || cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber) {\n            return false;\n        }\n        const originalValue = model.getValueInRange(minimizedReplacement.range, 1 /* EndOfLinePreference.LF */).toLowerCase();\n        const filterText = minimizedReplacement.text.toLowerCase();\n        const cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\n        let filterTextBefore = filterText.substring(0, cursorPosIndex);\n        let filterTextAfter = filterText.substring(cursorPosIndex);\n        let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n        let originalValueAfter = originalValue.substring(cursorPosIndex);\n        const originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\n        if (minimizedReplacement.range.startColumn <= originalValueIndent) {\n            // Remove indentation\n            originalValueBefore = originalValueBefore.trimStart();\n            if (originalValueBefore.length === 0) {\n                originalValueAfter = originalValueAfter.trimStart();\n            }\n            filterTextBefore = filterTextBefore.trimStart();\n            if (filterTextBefore.length === 0) {\n                filterTextAfter = filterTextAfter.trimStart();\n            }\n        }\n        return filterTextBefore.startsWith(originalValueBefore)\n            && !!matchesSubString(originalValueAfter, filterTextAfter);\n    }\n    canBeReused(model, position) {\n        const result = this._isValid\n            && this._getUpdatedRange(undefined).containsPosition(position)\n            && this.isVisible(model, position, undefined)\n            && !this._isSmallerThanOriginal(undefined);\n        return result;\n    }\n    _toFilterTextReplacement(reader) {\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.filterText);\n    }\n    _isSmallerThanOriginal(reader) {\n        return length(this._getUpdatedRange(reader)).isBefore(length(this.inlineCompletion.range));\n    }\n    _getUpdatedRange(reader) {\n        this.rangeVersion.read(reader); // This makes sure all the ranges are updated.\n        return this._updatedRange;\n    }\n    _updateRange(textModel) {\n        const range = textModel.getDecorationRange(this.decorationId);\n        if (!range) {\n            // A setValue call might flush all decorations.\n            this._isValid = false;\n            return true;\n        }\n        if (!this._updatedRange.equalsRange(range)) {\n            this._updatedRange = range;\n            return true;\n        }\n        return false;\n    }\n}\nfunction length(range) {\n    if (range.startLineNumber === range.endLineNumber) {\n        return new Position(1, 1 + range.endColumn - range.startColumn);\n    }\n    else {\n        return new Position(1 + range.endLineNumber - range.startLineNumber, range.endColumn);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { mapFind } from '../../../../base/common/arrays.js';\nimport { BugIndicatingError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, keepAlive, observableSignal, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { subtransaction } from '../../../../base/common/observableImpl/base.js';\nimport { derivedHandleChanges } from '../../../../base/common/observableImpl/derived.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { GhostText } from './ghostText.js';\nimport { InlineCompletionsSource } from './inlineCompletionsSource.js';\nimport { addPositions, lengthOfText } from './utils.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport var VersionIdChangeReason;\n(function (VersionIdChangeReason) {\n    VersionIdChangeReason[VersionIdChangeReason[\"Undo\"] = 0] = \"Undo\";\n    VersionIdChangeReason[VersionIdChangeReason[\"Redo\"] = 1] = \"Redo\";\n    VersionIdChangeReason[VersionIdChangeReason[\"AcceptWord\"] = 2] = \"AcceptWord\";\n    VersionIdChangeReason[VersionIdChangeReason[\"Other\"] = 3] = \"Other\";\n})(VersionIdChangeReason || (VersionIdChangeReason = {}));\nexport let InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n    get isAcceptingPartially() { return this._isAcceptingPartially; }\n    get isNavigatingCurrentInlineCompletion() { return this._isNavigatingCurrentInlineCompletion; }\n    constructor(textModel, selectedSuggestItem, cursorPosition, textModelVersionId, _debounceValue, _suggestPreviewEnabled, _suggestPreviewMode, _inlineSuggestMode, _enabled, _instantiationService, _commandService, _languageConfigurationService) {\n        super();\n        this.textModel = textModel;\n        this.selectedSuggestItem = selectedSuggestItem;\n        this.cursorPosition = cursorPosition;\n        this.textModelVersionId = textModelVersionId;\n        this._debounceValue = _debounceValue;\n        this._suggestPreviewEnabled = _suggestPreviewEnabled;\n        this._suggestPreviewMode = _suggestPreviewMode;\n        this._inlineSuggestMode = _inlineSuggestMode;\n        this._enabled = _enabled;\n        this._instantiationService = _instantiationService;\n        this._commandService = _commandService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._source = this._register(this._instantiationService.createInstance(InlineCompletionsSource, this.textModel, this.textModelVersionId, this._debounceValue));\n        this._isActive = observableValue('isActive', false);\n        this._forceUpdate = observableSignal('forceUpdate');\n        // We use a semantic id to keep the same inline completion selected even if the provider reorders the completions.\n        this._selectedInlineCompletionId = observableValue('selectedInlineCompletionId', undefined);\n        this._isAcceptingPartially = false;\n        this._isNavigatingCurrentInlineCompletion = false;\n        this._preserveCurrentCompletionReasons = new Set([\n            VersionIdChangeReason.Redo,\n            VersionIdChangeReason.Undo,\n            VersionIdChangeReason.AcceptWord,\n        ]);\n        this._fetchInlineCompletions = derivedHandleChanges('fetch inline completions', {\n            createEmptyChangeSummary: () => ({\n                preserveCurrentCompletion: false,\n                inlineCompletionTriggerKind: InlineCompletionTriggerKind.Automatic\n            }),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(this.textModelVersionId) && this._preserveCurrentCompletionReasons.has(ctx.change)) {\n                    changeSummary.preserveCurrentCompletion = true;\n                }\n                else if (ctx.didChange(this._forceUpdate)) {\n                    changeSummary.inlineCompletionTriggerKind = ctx.change;\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            this._forceUpdate.read(reader);\n            const shouldUpdate = (this._enabled.read(reader) && this.selectedSuggestItem.read(reader)) || this._isActive.read(reader);\n            if (!shouldUpdate) {\n                this._source.cancelUpdate();\n                return undefined;\n            }\n            this.textModelVersionId.read(reader); // Refetch on text change\n            const itemToPreserveCandidate = this.selectedInlineCompletion.get();\n            const itemToPreserve = changeSummary.preserveCurrentCompletion || (itemToPreserveCandidate === null || itemToPreserveCandidate === void 0 ? void 0 : itemToPreserveCandidate.forwardStable)\n                ? itemToPreserveCandidate : undefined;\n            const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.get();\n            const suggestItem = this.selectedSuggestItem.read(reader);\n            if (suggestWidgetInlineCompletions && !suggestItem) {\n                const inlineCompletions = this._source.inlineCompletions.get();\n                transaction(tx => {\n                    /** @description Seed inline completions with (newer) suggest widget inline completions */\n                    if (inlineCompletions && suggestWidgetInlineCompletions.request.versionId > inlineCompletions.request.versionId) {\n                        this._source.inlineCompletions.set(suggestWidgetInlineCompletions.clone(), tx);\n                    }\n                    this._source.clearSuggestWidgetInlineCompletions(tx);\n                });\n            }\n            const cursorPosition = this.cursorPosition.read(reader);\n            const context = {\n                triggerKind: changeSummary.inlineCompletionTriggerKind,\n                selectedSuggestionInfo: suggestItem === null || suggestItem === void 0 ? void 0 : suggestItem.toSelectedSuggestionInfo(),\n            };\n            return this._source.fetch(cursorPosition, context, itemToPreserve);\n        });\n        this._filteredInlineCompletionItems = derived('filteredInlineCompletionItems', (reader) => {\n            const c = this._source.inlineCompletions.read(reader);\n            if (!c) {\n                return [];\n            }\n            const cursorPosition = this.cursorPosition.read(reader);\n            const filteredCompletions = c.inlineCompletions.filter(c => c.isVisible(this.textModel, cursorPosition, reader));\n            return filteredCompletions;\n        });\n        this.selectedInlineCompletionIndex = derived('selectedCachedCompletionIndex', (reader) => {\n            const selectedInlineCompletionId = this._selectedInlineCompletionId.read(reader);\n            const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\n            const idx = this._selectedInlineCompletionId === undefined ? -1\n                : filteredCompletions.findIndex(v => v.semanticId === selectedInlineCompletionId);\n            if (idx === -1) {\n                // Reset the selection so that the selection does not jump back when it appears again\n                this._selectedInlineCompletionId.set(undefined, undefined);\n                return 0;\n            }\n            return idx;\n        });\n        this.selectedInlineCompletion = derived('selectedCachedCompletion', (reader) => {\n            const filteredCompletions = this._filteredInlineCompletionItems.read(reader);\n            const idx = this.selectedInlineCompletionIndex.read(reader);\n            return filteredCompletions[idx];\n        });\n        this.lastTriggerKind = this._source.inlineCompletions.map(v => /** @description lastTriggerKind */ v === null || v === void 0 ? void 0 : v.request.context.triggerKind);\n        this.inlineCompletionsCount = derived('selectedInlineCompletionsCount', reader => {\n            if (this.lastTriggerKind.read(reader) === InlineCompletionTriggerKind.Explicit) {\n                return this._filteredInlineCompletionItems.read(reader).length;\n            }\n            else {\n                return undefined;\n            }\n        });\n        this.state = derived('ghostTextAndCompletion', (reader) => {\n            var _a;\n            const model = this.textModel;\n            const suggestItem = this.selectedSuggestItem.read(reader);\n            if (suggestItem) {\n                const suggestWidgetInlineCompletions = this._source.suggestWidgetInlineCompletions.read(reader);\n                const candidateInlineCompletions = suggestWidgetInlineCompletions\n                    ? suggestWidgetInlineCompletions.inlineCompletions\n                    : [this.selectedInlineCompletion.read(reader)].filter(isDefined);\n                const suggestCompletion = suggestItem.toSingleTextEdit().removeCommonPrefix(model);\n                const augmentedCompletion = mapFind(candidateInlineCompletions, completion => {\n                    let r = completion.toSingleTextEdit(reader);\n                    r = r.removeCommonPrefix(model, Range.fromPositions(r.range.getStartPosition(), suggestItem.range.getEndPosition()));\n                    return r.augments(suggestCompletion) ? { edit: r, completion } : undefined;\n                });\n                const isSuggestionPreviewEnabled = this._suggestPreviewEnabled.read(reader);\n                if (!isSuggestionPreviewEnabled && !augmentedCompletion) {\n                    return undefined;\n                }\n                const edit = (_a = augmentedCompletion === null || augmentedCompletion === void 0 ? void 0 : augmentedCompletion.edit) !== null && _a !== void 0 ? _a : suggestCompletion;\n                const editPreviewLength = augmentedCompletion ? augmentedCompletion.edit.text.length - suggestCompletion.text.length : 0;\n                const mode = this._suggestPreviewMode.read(reader);\n                const cursor = this.cursorPosition.read(reader);\n                const newGhostText = edit.computeGhostText(model, mode, cursor, editPreviewLength);\n                // Show an invisible ghost text to reserve space\n                const ghostText = newGhostText !== null && newGhostText !== void 0 ? newGhostText : new GhostText(edit.range.endLineNumber, []);\n                return { ghostText, completion: augmentedCompletion === null || augmentedCompletion === void 0 ? void 0 : augmentedCompletion.completion, suggestItem };\n            }\n            else {\n                if (!this._isActive.read(reader)) {\n                    return undefined;\n                }\n                const item = this.selectedInlineCompletion.read(reader);\n                if (!item) {\n                    return undefined;\n                }\n                const replacement = item.toSingleTextEdit(reader);\n                const mode = this._inlineSuggestMode.read(reader);\n                const cursor = this.cursorPosition.read(reader);\n                const ghostText = replacement.computeGhostText(model, mode, cursor);\n                return ghostText ? { ghostText, completion: item, suggestItem: undefined } : undefined;\n            }\n        });\n        this.ghostText = derived('ghostText', (reader) => {\n            const v = this.state.read(reader);\n            if (!v) {\n                return undefined;\n            }\n            return v.ghostText;\n        });\n        this._register(keepAlive(this._fetchInlineCompletions, true));\n        let lastItem = undefined;\n        this._register(autorun('call handleItemDidShow', reader => {\n            var _a, _b;\n            const item = this.state.read(reader);\n            const completion = item === null || item === void 0 ? void 0 : item.completion;\n            if ((completion === null || completion === void 0 ? void 0 : completion.semanticId) !== (lastItem === null || lastItem === void 0 ? void 0 : lastItem.semanticId)) {\n                lastItem = completion;\n                if (completion) {\n                    const i = completion.inlineCompletion;\n                    const src = i.source;\n                    (_b = (_a = src.provider).handleItemDidShow) === null || _b === void 0 ? void 0 : _b.call(_a, src.inlineCompletions, i.sourceInlineCompletion, i.insertText);\n                }\n            }\n        }));\n    }\n    trigger(tx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._isActive.set(true, tx);\n            yield this._fetchInlineCompletions.get();\n        });\n    }\n    triggerExplicitly(tx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            subtransaction(tx, tx => {\n                this._isActive.set(true, tx);\n                this._forceUpdate.trigger(tx, InlineCompletionTriggerKind.Explicit);\n            });\n            yield this._fetchInlineCompletions.get();\n        });\n    }\n    stop(tx) {\n        subtransaction(tx, tx => {\n            this._isActive.set(false, tx);\n            this._source.clear(tx);\n        });\n    }\n    _deltaSelectedInlineCompletionIndex(delta) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.triggerExplicitly();\n            this._isNavigatingCurrentInlineCompletion = true;\n            try {\n                const completions = this._filteredInlineCompletionItems.get() || [];\n                if (completions.length > 0) {\n                    const newIdx = (this.selectedInlineCompletionIndex.get() + delta + completions.length) % completions.length;\n                    this._selectedInlineCompletionId.set(completions[newIdx].semanticId, undefined);\n                }\n                else {\n                    this._selectedInlineCompletionId.set(undefined, undefined);\n                }\n            }\n            finally {\n                this._isNavigatingCurrentInlineCompletion = false;\n            }\n        });\n    }\n    next() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._deltaSelectedInlineCompletionIndex(1);\n        });\n    }\n    previous() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._deltaSelectedInlineCompletionIndex(-1);\n        });\n    }\n    accept(editor) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.getModel() !== this.textModel) {\n                throw new BugIndicatingError();\n            }\n            const ghostText = this.ghostText.get();\n            const completion = (_a = this.selectedInlineCompletion.get()) === null || _a === void 0 ? void 0 : _a.toInlineCompletion(undefined);\n            if (!ghostText || !completion) {\n                return;\n            }\n            editor.pushUndoStop();\n            if (completion.snippetInfo) {\n                editor.executeEdits('inlineSuggestion.accept', [\n                    EditOperation.replaceMove(completion.range, ''),\n                    ...completion.additionalTextEdits\n                ]);\n                editor.setPosition(completion.snippetInfo.range.getStartPosition());\n                (_b = SnippetController2.get(editor)) === null || _b === void 0 ? void 0 : _b.insert(completion.snippetInfo.snippet, { undoStopBefore: false });\n            }\n            else {\n                editor.executeEdits('inlineSuggestion.accept', [\n                    EditOperation.replaceMove(completion.range, completion.insertText),\n                    ...completion.additionalTextEdits\n                ]);\n            }\n            if (completion.command) {\n                yield this._commandService\n                    .executeCommand(completion.command.id, ...(completion.command.arguments || []))\n                    .then(undefined, onUnexpectedExternalError);\n            }\n            transaction(tx => {\n                this._source.clear(tx);\n                // Potentially, isActive will get set back to true by the typing or accept inline suggest event\n                // if automatic inline suggestions are enabled.\n                this._isActive.set(false, tx);\n            });\n        });\n    }\n    acceptNextWord(editor) {\n        this._acceptNext(editor, (pos, text) => {\n            const langId = this.textModel.getLanguageIdAtPosition(pos.lineNumber, pos.column);\n            const config = this._languageConfigurationService.getLanguageConfiguration(langId);\n            const wordRegExp = new RegExp(config.wordDefinition.source, config.wordDefinition.flags.replace('g', ''));\n            const m1 = text.match(wordRegExp);\n            let acceptUntilIndexExclusive = 0;\n            if (m1 && m1.index !== undefined) {\n                if (m1.index === 0) {\n                    acceptUntilIndexExclusive = m1[0].length;\n                }\n                else {\n                    acceptUntilIndexExclusive = m1.index;\n                }\n            }\n            else {\n                acceptUntilIndexExclusive = text.length;\n            }\n            const wsRegExp = /\\s+/g;\n            const m2 = wsRegExp.exec(text);\n            if (m2 && m2.index !== undefined) {\n                if (m2.index + m2[0].length < acceptUntilIndexExclusive) {\n                    acceptUntilIndexExclusive = m2.index + m2[0].length;\n                }\n            }\n            return acceptUntilIndexExclusive;\n        });\n    }\n    acceptNextLine(editor) {\n        this._acceptNext(editor, (pos, text) => {\n            const m = text.match(/\\n/);\n            if (m && m.index !== undefined) {\n                return m.index + 1;\n            }\n            return text.length;\n        });\n    }\n    _acceptNext(editor, getAcceptUntilIndex) {\n        var _a;\n        if (editor.getModel() !== this.textModel) {\n            throw new BugIndicatingError();\n        }\n        const ghostText = this.ghostText.get();\n        const completion = (_a = this.selectedInlineCompletion.get()) === null || _a === void 0 ? void 0 : _a.toInlineCompletion(undefined);\n        if (!ghostText || !completion) {\n            return;\n        }\n        if (completion.snippetInfo || completion.filterText !== completion.insertText) {\n            // not in WYSIWYG mode, partial commit might change completion, thus it is not supported\n            this.accept(editor);\n            return;\n        }\n        if (ghostText.parts.length === 0) {\n            return;\n        }\n        const firstPart = ghostText.parts[0];\n        const position = new Position(ghostText.lineNumber, firstPart.column);\n        const line = firstPart.lines.join('\\n');\n        const acceptUntilIndexExclusive = getAcceptUntilIndex(position, line);\n        if (acceptUntilIndexExclusive === line.length && ghostText.parts.length === 1) {\n            this.accept(editor);\n            return;\n        }\n        const partialText = line.substring(0, acceptUntilIndexExclusive);\n        this._isAcceptingPartially = true;\n        try {\n            editor.pushUndoStop();\n            editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replace(Range.fromPositions(position), partialText),\n            ]);\n            const length = lengthOfText(partialText);\n            editor.setPosition(addPositions(position, length));\n        }\n        finally {\n            this._isAcceptingPartially = false;\n        }\n        if (completion.source.provider.handlePartialAccept) {\n            const acceptedRange = Range.fromPositions(completion.range.getStartPosition(), addPositions(position, lengthOfText(partialText)));\n            // This assumes that the inline completion and the model use the same EOL style.\n            const text = editor.getModel().getValueInRange(acceptedRange, 1 /* EndOfLinePreference.LF */);\n            completion.source.provider.handlePartialAccept(completion.source.inlineCompletions, completion.sourceInlineCompletion, text.length);\n        }\n    }\n};\nInlineCompletionsModel = __decorate([\n    __param(9, IInstantiationService),\n    __param(10, ICommandService),\n    __param(11, ILanguageConfigurationService)\n], InlineCompletionsModel);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SelectedSuggestionInfo } from '../../../common/languages.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { observableValue, transaction } from '../../../../base/common/observable.js';\nimport { SingleTextEdit } from './singleTextEdit.js';\nimport { compareBy, findMaxBy, numberComparator } from '../../../../base/common/arrays.js';\nexport class SuggestWidgetAdaptor extends Disposable {\n    get selectedItem() {\n        return this._selectedItem;\n    }\n    constructor(editor, suggestControllerPreselector, checkModelVersion) {\n        super();\n        this.editor = editor;\n        this.suggestControllerPreselector = suggestControllerPreselector;\n        this.checkModelVersion = checkModelVersion;\n        this.isSuggestWidgetVisible = false;\n        this.isShiftKeyPressed = false;\n        this._isActive = false;\n        this._currentSuggestItemInfo = undefined;\n        this._selectedItem = observableValue('suggestWidgetInlineCompletionProvider.selectedItem', undefined);\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n        this._register(editor.onKeyDown(e => {\n            if (e.shiftKey && !this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = true;\n                this.update(this._isActive);\n            }\n        }));\n        this._register(editor.onKeyUp(e => {\n            if (e.shiftKey && this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = false;\n                this.update(this._isActive);\n            }\n        }));\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            this._register(suggestController.registerSelector({\n                priority: 100,\n                select: (model, pos, suggestItems) => {\n                    var _a;\n                    transaction(tx => this.checkModelVersion(tx));\n                    const textModel = this.editor.getModel();\n                    if (!textModel) {\n                        // Should not happen\n                        return -1;\n                    }\n                    const itemToPreselect = (_a = this.suggestControllerPreselector()) === null || _a === void 0 ? void 0 : _a.removeCommonPrefix(textModel);\n                    if (!itemToPreselect) {\n                        return -1;\n                    }\n                    const position = Position.lift(pos);\n                    const candidates = suggestItems\n                        .map((suggestItem, index) => {\n                        const suggestItemInfo = SuggestItemInfo.fromSuggestion(suggestController, textModel, position, suggestItem, this.isShiftKeyPressed);\n                        const suggestItemTextEdit = suggestItemInfo.toSingleTextEdit().removeCommonPrefix(textModel);\n                        const valid = itemToPreselect.augments(suggestItemTextEdit);\n                        return { index, valid, prefixLength: suggestItemTextEdit.text.length, suggestItem };\n                    })\n                        .filter(item => item && item.valid && item.prefixLength > 0);\n                    const result = findMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\n                    return result ? result.index : -1;\n                }\n            }));\n            let isBoundToSuggestWidget = false;\n            const bindToSuggestWidget = () => {\n                if (isBoundToSuggestWidget) {\n                    return;\n                }\n                isBoundToSuggestWidget = true;\n                this._register(suggestController.widget.value.onDidShow(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n                this._register(suggestController.widget.value.onDidHide(() => {\n                    this.isSuggestWidgetVisible = false;\n                    this.update(false);\n                }));\n                this._register(suggestController.widget.value.onDidFocus(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n            };\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n                bindToSuggestWidget();\n            }));\n        }\n        this.update(this._isActive);\n    }\n    update(newActive) {\n        const newInlineCompletion = this.getSuggestItemInfo();\n        if (this._isActive !== newActive || !suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n            this._isActive = newActive;\n            this._currentSuggestItemInfo = newInlineCompletion;\n            transaction(tx => {\n                this.checkModelVersion(tx);\n                this._selectedItem.set(this._isActive ? this._currentSuggestItemInfo : undefined, tx);\n            });\n        }\n    }\n    getSuggestItemInfo() {\n        const suggestController = SuggestController.get(this.editor);\n        if (!suggestController || !this.isSuggestWidgetVisible) {\n            return undefined;\n        }\n        const focusedItem = suggestController.widget.value.getFocusedItem();\n        const position = this.editor.getPosition();\n        const model = this.editor.getModel();\n        if (!focusedItem || !position || !model) {\n            return undefined;\n        }\n        return SuggestItemInfo.fromSuggestion(suggestController, model, position, focusedItem.item, this.isShiftKeyPressed);\n    }\n    stopForceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        suggestController === null || suggestController === void 0 ? void 0 : suggestController.stopForceRenderingAbove();\n    }\n    forceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        suggestController === null || suggestController === void 0 ? void 0 : suggestController.forceRenderingAbove();\n    }\n}\nexport class SuggestItemInfo {\n    static fromSuggestion(suggestController, model, position, item, toggleMode) {\n        let { insertText } = item.completion;\n        let isSnippetText = false;\n        if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\n            const snippet = new SnippetParser().parse(insertText);\n            if (snippet.children.length < 100) {\n                // Adjust whitespace is expensive.\n                SnippetSession.adjustWhitespace(model, position, true, snippet);\n            }\n            insertText = snippet.toString();\n            isSnippetText = true;\n        }\n        const info = suggestController.getOverwriteInfo(item, toggleMode);\n        return new SuggestItemInfo(Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))), insertText, item.completion.kind, isSnippetText);\n    }\n    constructor(range, insertText, completionItemKind, isSnippetText) {\n        this.range = range;\n        this.insertText = insertText;\n        this.completionItemKind = completionItemKind;\n        this.isSnippetText = isSnippetText;\n    }\n    equals(other) {\n        return this.range.equalsRange(other.range)\n            && this.insertText === other.insertText\n            && this.completionItemKind === other.completionItemKind\n            && this.isSnippetText === other.isSnippetText;\n    }\n    toSelectedSuggestionInfo() {\n        return new SelectedSuggestionInfo(this.range, this.insertText, this.completionItemKind, this.isSnippetText);\n    }\n    toSingleTextEdit() {\n        return new SingleTextEdit(this.range, this.insertText);\n    }\n}\nfunction suggestItemInfoEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.equals(b);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, transaction } from '../../../../base/common/observableImpl/base.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { inlineSuggestCommitId } from './commandIds.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\nimport { InlineCompletionsHintsWidget, InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\nimport { InlineCompletionsModel, VersionIdChangeReason } from './inlineCompletionsModel.js';\nimport { SuggestWidgetAdaptor } from './suggestWidgetInlineCompletionProvider.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport let InlineCompletionsController = class InlineCompletionsController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(InlineCompletionsController.ID);\n    }\n    constructor(editor, instantiationService, contextKeyService, configurationService, commandService, debounceService, languageFeaturesService, audioCueService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.configurationService = configurationService;\n        this.commandService = commandService;\n        this.debounceService = debounceService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.audioCueService = audioCueService;\n        this.model = disposableObservableValue('inlineCompletionModel', undefined);\n        this.textModelVersionId = observableValue('textModelVersionId', -1);\n        this.cursorPosition = observableValue('cursorPosition', new Position(1, 1));\n        this.suggestWidgetAdaptor = this._register(new SuggestWidgetAdaptor(this.editor, () => { var _a, _b; return (_b = (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.selectedInlineCompletion.get()) === null || _b === void 0 ? void 0 : _b.toSingleTextEdit(undefined); }, (tx) => this.updateObservables(tx, VersionIdChangeReason.Other)));\n        this._enabled = observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(60 /* EditorOption.inlineSuggest */).enabled);\n        this.ghostTextWidget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, {\n            ghostText: this.model.map((v, reader) => v === null || v === void 0 ? void 0 : v.ghostText.read(reader)),\n            minReservedLineCount: constObservable(0),\n            targetTextModel: this.model.map(v => v === null || v === void 0 ? void 0 : v.textModel),\n        }));\n        this._debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 50 });\n        this._register(new InlineCompletionContextKeys(this.contextKeyService, this.model));\n        this._register(Event.runAndSubscribe(editor.onDidChangeModel, () => transaction(tx => {\n            /** @description onDidChangeModel */\n            this.model.set(undefined, tx);\n            this.updateObservables(tx, VersionIdChangeReason.Other);\n            const textModel = editor.getModel();\n            if (textModel) {\n                const model = instantiationService.createInstance(InlineCompletionsModel, textModel, this.suggestWidgetAdaptor.selectedItem, this.cursorPosition, this.textModelVersionId, this._debounceValue, observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(114 /* EditorOption.suggest */).preview), observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(114 /* EditorOption.suggest */).previewMode), observableFromEvent(editor.onDidChangeConfiguration, () => editor.getOption(60 /* EditorOption.inlineSuggest */).mode), this._enabled);\n                this.model.set(model, tx);\n            }\n        })));\n        const getReason = (e) => {\n            var _a;\n            if (e.isUndoing) {\n                return VersionIdChangeReason.Undo;\n            }\n            if (e.isRedoing) {\n                return VersionIdChangeReason.Redo;\n            }\n            if ((_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.isAcceptingPartially) {\n                return VersionIdChangeReason.AcceptWord;\n            }\n            return VersionIdChangeReason.Other;\n        };\n        this._register(editor.onDidChangeModelContent((e) => transaction(tx => \n        /** @description onDidChangeModelContent */\n        this.updateObservables(tx, getReason(e)))));\n        this._register(editor.onDidChangeCursorPosition(e => transaction(tx => {\n            var _a;\n            /** @description onDidChangeCursorPosition */\n            this.updateObservables(tx, VersionIdChangeReason.Other);\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\n            }\n        })));\n        this._register(editor.onDidType(() => transaction(tx => {\n            var _a;\n            /** @description onDidType */\n            this.updateObservables(tx, VersionIdChangeReason.Other);\n            if (this._enabled.get()) {\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.trigger(tx);\n            }\n        })));\n        this._register(this.commandService.onDidExecuteCommand((e) => {\n            // These commands don't trigger onDidType.\n            const commands = new Set([\n                CoreEditingCommands.Tab.id,\n                CoreEditingCommands.DeleteLeft.id,\n                CoreEditingCommands.DeleteRight.id,\n                inlineSuggestCommitId,\n                'acceptSelectedSuggestion',\n            ]);\n            if (commands.has(e.commandId) && editor.hasTextFocus() && this._enabled.get()) {\n                transaction(tx => {\n                    var _a;\n                    /** @description onDidExecuteCommand */\n                    (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.trigger(tx);\n                });\n            }\n        }));\n        this._register(this.editor.onDidBlurEditorWidget(() => {\n            // This is a hidden setting very useful for debugging\n            if (this.configurationService.getValue('editor.inlineSuggest.keepOnBlur') ||\n                editor.getOption(60 /* EditorOption.inlineSuggest */).keepOnBlur) {\n                return;\n            }\n            if (InlineSuggestionHintsContentWidget.dropDownVisible) {\n                return;\n            }\n            transaction(tx => {\n                var _a;\n                /** @description onDidBlurEditorWidget */\n                (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\n            });\n        }));\n        this._register(autorun('forceRenderingAbove', reader => {\n            var _a;\n            const state = (_a = this.model.read(reader)) === null || _a === void 0 ? void 0 : _a.state.read(reader);\n            if (state === null || state === void 0 ? void 0 : state.suggestItem) {\n                if (state.ghostText.lineCount >= 2) {\n                    this.suggestWidgetAdaptor.forceRenderingAbove();\n                }\n            }\n            else {\n                this.suggestWidgetAdaptor.stopForceRenderingAbove();\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.suggestWidgetAdaptor.stopForceRenderingAbove();\n        }));\n        let lastInlineCompletionId = undefined;\n        this._register(autorun('play audio cue & read suggestion', reader => {\n            const model = this.model.read(reader);\n            const state = model === null || model === void 0 ? void 0 : model.state.read(reader);\n            if (!model || !state || !state.completion) {\n                lastInlineCompletionId = undefined;\n                return;\n            }\n            if (state.completion.semanticId !== lastInlineCompletionId) {\n                lastInlineCompletionId = state.completion.semanticId;\n                if (model.isNavigatingCurrentInlineCompletion) {\n                    return;\n                }\n                this.audioCueService.playAudioCue(AudioCue.inlineSuggestion).then(() => {\n                    if (this.editor.getOption(6 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\n                        const lineText = model.textModel.getLineContent(state.ghostText.lineNumber);\n                        alert(state.ghostText.renderForScreenReader(lineText));\n                    }\n                });\n            }\n        }));\n        this._register(new InlineCompletionsHintsWidget(this.editor, this.model, this.instantiationService));\n    }\n    /**\n     * Copies over the relevant state from the text model to observables.\n     * This solves all kind of eventing issues, as we make sure we always operate on the latest state,\n     * regardless of who calls into us.\n     */\n    updateObservables(tx, changeReason) {\n        var _a, _b;\n        const newModel = this.editor.getModel();\n        this.textModelVersionId.set((_a = newModel === null || newModel === void 0 ? void 0 : newModel.getVersionId()) !== null && _a !== void 0 ? _a : -1, tx, changeReason);\n        this.cursorPosition.set((_b = this.editor.getPosition()) !== null && _b !== void 0 ? _b : new Position(1, 1), tx);\n    }\n    shouldShowHoverAt(range) {\n        var _a;\n        const ghostText = (_a = this.model.get()) === null || _a === void 0 ? void 0 : _a.ghostText.get();\n        if (ghostText) {\n            return ghostText.parts.some(p => range.containsPosition(new Position(ghostText.lineNumber, p.column)));\n        }\n        return false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        return this.ghostTextWidget.ownsViewZone(viewZoneId);\n    }\n};\nInlineCompletionsController.ID = 'editor.contrib.inlineCompletionsController';\nInlineCompletionsController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService),\n    __param(3, IConfigurationService),\n    __param(4, ICommandService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, ILanguageFeaturesService),\n    __param(7, IAudioCueService)\n], InlineCompletionsController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { transaction } from '../../../../base/common/observable.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId, inlineSuggestCommitId } from './commandIds.js';\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, Action2 } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.next();\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = showNextInlineSuggestionActionId;\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.previous();\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = showPreviousInlineSuggestionActionId;\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.triggerExplicitly();\n        });\n    }\n}\nexport class AcceptNextWordOfInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.acceptNextWord',\n            label: nls.localize('action.inlineSuggest.acceptNextWord', \"Accept Next Word Of Inline Suggestion\"),\n            alias: 'Accept Next Word Of Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('acceptWord', 'Accept Word'),\n                    group: 'primary',\n                    order: 2,\n                }],\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextWord(controller.editor);\n        });\n    }\n}\nexport class AcceptNextLineOfInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.acceptNextLine',\n            label: nls.localize('action.inlineSuggest.acceptNextLine', \"Accept Next Line Of Inline Suggestion\"),\n            alias: 'Accept Next Line Of Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('acceptLine', 'Accept Line'),\n                    group: 'secondary',\n                    order: 2,\n                }],\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextLine(controller.editor);\n        });\n    }\n}\nexport class AcceptInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: inlineSuggestCommitId,\n            label: nls.localize('action.inlineSuggest.accept', \"Accept Inline Suggestion\"),\n            alias: 'Accept Inline Suggestion',\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('accept', \"Accept\"),\n                    group: 'primary',\n                    order: 1,\n                }],\n            kbOpts: {\n                primary: 2 /* KeyCode.Tab */,\n                weight: 200,\n                kbExpr: ContextKeyExpr.and(InlineCompletionContextKeys.inlineSuggestionVisible, EditorContextKeys.tabMovesFocus.toNegated(), InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize),\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            if (controller) {\n                (_a = controller.model.get()) === null || _a === void 0 ? void 0 : _a.accept(controller.editor);\n                controller.editor.focus();\n            }\n        });\n    }\n}\nexport class HideInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: HideInlineCompletion.ID,\n            label: nls.localize('action.inlineSuggest.hide', \"Hide Inline Suggestion\"),\n            alias: 'Hide Inline Suggestion',\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n            kbOpts: {\n                weight: 100,\n                primary: 9 /* KeyCode.Escape */,\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            transaction(tx => {\n                var _a;\n                (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\n            });\n        });\n    }\n}\nHideInlineCompletion.ID = 'editor.action.inlineSuggest.hide';\nexport class ToggleAlwaysShowInlineSuggestionToolbar extends Action2 {\n    constructor() {\n        super({\n            id: ToggleAlwaysShowInlineSuggestionToolbar.ID,\n            title: nls.localize('action.inlineSuggest.alwaysShowToolbar', \"Always Show Toolbar\"),\n            f1: false,\n            precondition: undefined,\n            menu: [{\n                    id: MenuId.InlineSuggestionToolbar,\n                    group: 'secondary',\n                    order: 10,\n                }],\n            toggled: ContextKeyExpr.equals('config.editor.inlineSuggest.showToolbar', 'always')\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configService = accessor.get(IConfigurationService);\n            const currentValue = configService.getValue('editor.inlineSuggest.showToolbar');\n            const newValue = currentValue === 'always' ? 'onHover' : 'always';\n            configService.updateValue('editor.inlineSuggest.showToolbar', newValue);\n        });\n    }\n}\nToggleAlwaysShowInlineSuggestionToolbar.ID = 'editor.action.inlineSuggest.toggleAlwaysShowToolbar';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable } from '../../../../base/common/observable.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nexport let InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _languageService, _openerService, accessibilityService, _instantiationService, _telemetryService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this._instantiationService = _instantiationService;\n        this._telemetryService = _telemetryService;\n        this.hoverOrdinal = 4;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = InlineCompletionsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(this._editor.getModel().validatePosition(viewZoneData.positionBefore || viewZoneData.position)), mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (this._editor.getOption(60 /* EditorOption.inlineSuggest */).showToolbar === 'always') {\n            return [];\n        }\n        const controller = InlineCompletionsController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        this._telemetryService.publicLog2('inlineCompletionHover.shown');\n        if (this.accessibilityService.isScreenReaderOptimized()) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        const model = part.controller.model.get();\n        const w = this._instantiationService.createInstance(InlineSuggestionHintsContentWidget, this._editor, false, constObservable(null), model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.selectedInlineCompletion.map(v => { var _a; return (_a = v === null || v === void 0 ? void 0 : v.inlineCompletion.source.inlineCompletions.commands) !== null && _a !== void 0 ? _a : []; }));\n        context.fragment.appendChild(w.getDomNode());\n        model.triggerExplicitly();\n        disposableStore.add(w);\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents', { ['aria-live']: 'assertive' }));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        disposableStore.add(autorun('update hover', (reader) => {\n            var _a;\n            const ghostText = (_a = part.controller.model.read(reader)) === null || _a === void 0 ? void 0 : _a.ghostText.read(reader);\n            if (ghostText) {\n                const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n                render(ghostText.renderForScreenReader(lineText));\n            }\n            else {\n                dom.reset(hoverContentsElement);\n            }\n        }));\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IAccessibilityService),\n    __param(4, IInstantiationService),\n    __param(5, ITelemetryService)\n], InlineCompletionsHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { TriggerInlineSuggestionAction, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, AcceptNextWordOfInlineCompletion, AcceptInlineCompletion, HideInlineCompletion, ToggleAlwaysShowInlineSuggestionToolbar, AcceptNextLineOfInlineCompletion } from './commands.js';\nimport { InlineCompletionsHoverParticipant } from './hoverParticipant.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(InlineCompletionsController.ID, InlineCompletionsController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nregisterEditorAction(AcceptNextWordOfInlineCompletion);\nregisterEditorAction(AcceptNextLineOfInlineCompletion);\nregisterEditorAction(AcceptInlineCompletion);\nregisterEditorAction(HideInlineCompletion);\nregisterAction2(ToggleAlwaysShowInlineSuggestionToolbar);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { h } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport { autorunWithStore2 } from '../../../../base/common/observableImpl/autorun.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './inlineCompletionsHintsWidget.css';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { showPreviousInlineSuggestionActionId, showNextInlineSuggestionActionId } from './commandIds.js';\nimport { localize } from '../../../../nls.js';\nimport { createAndFillInActionBarActions, MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport let InlineCompletionsHintsWidget = class InlineCompletionsHintsWidget extends Disposable {\n    constructor(editor, model, instantiationService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.alwaysShowToolbar = observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(60 /* EditorOption.inlineSuggest */).showToolbar === 'always');\n        this.sessionPosition = undefined;\n        this.position = derived('position', reader => {\n            var _a, _b, _c;\n            const ghostText = (_a = this.model.read(reader)) === null || _a === void 0 ? void 0 : _a.ghostText.read(reader);\n            if (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\n                this.sessionPosition = undefined;\n                return null;\n            }\n            const firstColumn = ghostText.parts[0].column;\n            if (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\n                this.sessionPosition = undefined;\n            }\n            const position = new Position(ghostText.lineNumber, Math.min(firstColumn, (_c = (_b = this.sessionPosition) === null || _b === void 0 ? void 0 : _b.column) !== null && _c !== void 0 ? _c : Number.MAX_SAFE_INTEGER));\n            this.sessionPosition = position;\n            return position;\n        });\n        this._register(autorunWithStore2('setup content widget', (reader, store) => {\n            const model = this.model.read(reader);\n            if (!model || !this.alwaysShowToolbar.read(reader)) {\n                return;\n            }\n            const contentWidget = store.add(this.instantiationService.createInstance(InlineSuggestionHintsContentWidget, this.editor, true, this.position, model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.selectedInlineCompletion.map(v => { var _a; return (_a = v === null || v === void 0 ? void 0 : v.inlineCompletion.source.inlineCompletions.commands) !== null && _a !== void 0 ? _a : []; })));\n            editor.addContentWidget(contentWidget);\n            store.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\n            store.add(autorun('request explicit', reader => {\n                const position = this.position.read(reader);\n                if (!position) {\n                    return;\n                }\n                if (model.lastTriggerKind.read(reader) !== InlineCompletionTriggerKind.Explicit) {\n                    model.triggerExplicitly();\n                }\n            }));\n        }));\n    }\n};\nInlineCompletionsHintsWidget = __decorate([\n    __param(2, IInstantiationService)\n], InlineCompletionsHintsWidget);\nconst inlineSuggestionHintsNextIcon = registerIcon('inline-suggestion-hints-next', Codicon.chevronRight, localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst inlineSuggestionHintsPreviousIcon = registerIcon('inline-suggestion-hints-previous', Codicon.chevronLeft, localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nexport let InlineSuggestionHintsContentWidget = class InlineSuggestionHintsContentWidget extends Disposable {\n    static get dropDownVisible() { return this._dropDownVisible; }\n    createCommandAction(commandId, label, iconClassName) {\n        const action = new Action(commandId, label, iconClassName, true, () => this._commandService.executeCommand(commandId));\n        const kb = this.keybindingService.lookupKeybinding(commandId, this._contextKeyService);\n        let tooltip = label;\n        if (kb) {\n            tooltip = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', label, kb.getLabel());\n        }\n        action.tooltip = tooltip;\n        return action;\n    }\n    constructor(editor, withBorder, _position, _currentSuggestionIdx, _suggestionCount, _extraCommands, _commandService, instantiationService, keybindingService, _contextKeyService, _menuService) {\n        super();\n        this.editor = editor;\n        this.withBorder = withBorder;\n        this._position = _position;\n        this._currentSuggestionIdx = _currentSuggestionIdx;\n        this._suggestionCount = _suggestionCount;\n        this._extraCommands = _extraCommands;\n        this._commandService = _commandService;\n        this.keybindingService = keybindingService;\n        this._contextKeyService = _contextKeyService;\n        this._menuService = _menuService;\n        this.id = `InlineSuggestionHintsContentWidget${InlineSuggestionHintsContentWidget.id++}`;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this.nodes = h('div.inlineSuggestionsHints', { className: this.withBorder ? '.withBorder' : '' }, [\n            h('div', { style: { display: 'flex' } }, [\n                h('div@actionBar', { className: 'custom-actions' }),\n                h('div@toolBar'),\n            ])\n        ]);\n        this.previousAction = this.createCommandAction(showPreviousInlineSuggestionActionId, localize('previous', 'Previous'), ThemeIcon.asClassName(inlineSuggestionHintsPreviousIcon));\n        this.availableSuggestionCountAction = new Action('inlineSuggestionHints.availableSuggestionCount', '', undefined, false);\n        this.nextAction = this.createCommandAction(showNextInlineSuggestionActionId, localize('next', 'Next'), ThemeIcon.asClassName(inlineSuggestionHintsNextIcon));\n        // TODO@hediet: deprecate MenuId.InlineCompletionsActions\n        this.inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n        this.clearAvailableSuggestionCountLabelDebounced = this._register(new RunOnceScheduler(() => {\n            this.availableSuggestionCountAction.label = '';\n        }, 100));\n        this.disableButtonsDebounced = this._register(new RunOnceScheduler(() => {\n            this.previousAction.enabled = this.nextAction.enabled = false;\n        }, 100));\n        this.lastCommands = [];\n        const actionBar = this._register(new ActionBar(this.nodes.actionBar));\n        actionBar.push(this.previousAction, { icon: true, label: false });\n        actionBar.push(this.availableSuggestionCountAction);\n        actionBar.push(this.nextAction, { icon: true, label: false });\n        this.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, MenuId.InlineSuggestionToolbar, {\n            menuOptions: { renderShortTitle: true },\n            toolbarOptions: { primaryGroup: g => g.startsWith('primary') },\n            actionViewItemProvider: (action, options) => {\n                return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n            },\n            telemetrySource: 'InlineSuggestionToolbar',\n        }));\n        this._register(this.toolBar.onDidChangeDropdownVisibility(e => {\n            InlineSuggestionHintsContentWidget._dropDownVisible = e;\n        }));\n        this._register(autorun('update position', (reader) => {\n            this._position.read(reader);\n            this.editor.layoutContentWidget(this);\n        }));\n        this._register(autorun('counts', (reader) => {\n            const suggestionCount = this._suggestionCount.read(reader);\n            const currentSuggestionIdx = this._currentSuggestionIdx.read(reader);\n            if (suggestionCount !== undefined) {\n                this.clearAvailableSuggestionCountLabelDebounced.cancel();\n                this.availableSuggestionCountAction.label = `${currentSuggestionIdx + 1}/${suggestionCount}`;\n            }\n            else {\n                this.clearAvailableSuggestionCountLabelDebounced.schedule();\n            }\n            if (suggestionCount !== undefined && suggestionCount > 1) {\n                this.disableButtonsDebounced.cancel();\n                this.previousAction.enabled = this.nextAction.enabled = true;\n            }\n            else {\n                this.disableButtonsDebounced.schedule();\n            }\n        }));\n        this._register(autorun('extra commands', (reader) => {\n            const extraCommands = this._extraCommands.read(reader);\n            if (equals(this.lastCommands, extraCommands)) {\n                // nothing to update\n                return;\n            }\n            this.lastCommands = extraCommands;\n            const extraActions = extraCommands.map(c => ({\n                class: undefined,\n                id: c.id,\n                enabled: true,\n                tooltip: c.tooltip || '',\n                label: c.title,\n                run: (event) => {\n                    return this._commandService.executeCommand(c.id);\n                },\n            }));\n            for (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\n                for (const action of group) {\n                    if (action instanceof MenuItemAction) {\n                        extraActions.push(action);\n                    }\n                }\n            }\n            if (extraActions.length > 0) {\n                extraActions.unshift(new Separator());\n            }\n            this.toolBar.setAdditionalSecondaryActions(extraActions);\n        }));\n    }\n    getId() { return this.id; }\n    getDomNode() {\n        return this.nodes.root;\n    }\n    getPosition() {\n        return {\n            position: this._position.get(),\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */],\n            positionAffinity: 3 /* PositionAffinity.LeftOfInjectedText */,\n        };\n    }\n};\nInlineSuggestionHintsContentWidget._dropDownVisible = false;\nInlineSuggestionHintsContentWidget.id = 0;\nInlineSuggestionHintsContentWidget = __decorate([\n    __param(6, ICommandService),\n    __param(7, IInstantiationService),\n    __param(8, IKeybindingService),\n    __param(9, IContextKeyService),\n    __param(10, IMenuService)\n], InlineSuggestionHintsContentWidget);\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            const div = h('div.keybinding').root;\n            const k = new KeybindingLabel(div, OS, Object.assign({ disableTitle: true }, unthemedKeybindingLabelOptions));\n            k.set(kb);\n            this.label.textContent = this._action.label;\n            this.label.appendChild(div);\n            this.label.classList.add('inlineSuggestionStatusBarItemLabel');\n        }\n    }\n}\nexport let CustomizedMenuWorkbenchToolBar = class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\n    constructor(container, menuId, options2, menuService, contextKeyService, contextMenuService, keybindingService, telemetryService) {\n        super(container, Object.assign({ resetMenu: menuId }, options2), menuService, contextKeyService, contextMenuService, keybindingService, telemetryService);\n        this.menuId = menuId;\n        this.options2 = options2;\n        this.menuService = menuService;\n        this.contextKeyService = contextKeyService;\n        this.menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\n        this.additionalActions = [];\n        this._store.add(this.menu.onDidChange(() => this.updateToolbar()));\n        this.updateToolbar();\n    }\n    updateToolbar() {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const primary = [];\n        const secondary = [];\n        createAndFillInActionBarActions(this.menu, (_a = this.options2) === null || _a === void 0 ? void 0 : _a.menuOptions, { primary, secondary }, (_c = (_b = this.options2) === null || _b === void 0 ? void 0 : _b.toolbarOptions) === null || _c === void 0 ? void 0 : _c.primaryGroup, (_e = (_d = this.options2) === null || _d === void 0 ? void 0 : _d.toolbarOptions) === null || _e === void 0 ? void 0 : _e.shouldInlineSubmenu, (_g = (_f = this.options2) === null || _f === void 0 ? void 0 : _f.toolbarOptions) === null || _g === void 0 ? void 0 : _g.useSeparatorsInPrimaryActions);\n        secondary.push(...this.additionalActions);\n        this.setActions(primary, secondary);\n    }\n    setAdditionalSecondaryActions(actions) {\n        if (equals(this.additionalActions, actions, (a, b) => a === b)) {\n            // don't update if the actions are the same\n            return;\n        }\n        this.additionalActions = actions;\n        this.updateToolbar();\n    }\n};\nCustomizedMenuWorkbenchToolBar = __decorate([\n    __param(3, IMenuService),\n    __param(4, IContextKeyService),\n    __param(5, IContextMenuService),\n    __param(6, IKeybindingService),\n    __param(7, ITelemetryService)\n], CustomizedMenuWorkbenchToolBar);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './inlineProgressWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nconst inlineProgressDecoration = ModelDecorationOptions.register({\n    description: 'inline-progress-widget',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    showIfCollapsed: true,\n    after: {\n        content: noBreakWhitespace,\n        inlineClassName: 'inline-editor-progress-decoration',\n        inlineClassNameAffectsLetterSpacing: true,\n    }\n});\nclass InlineProgressWidget extends Disposable {\n    constructor(typeId, editor, range, title, delegate) {\n        super();\n        this.typeId = typeId;\n        this.editor = editor;\n        this.range = range;\n        this.delegate = delegate;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this.create(title);\n        this.editor.addContentWidget(this);\n        this.editor.layoutContentWidget(this);\n    }\n    create(title) {\n        this.domNode = dom.$('.inline-progress-widget');\n        this.domNode.role = 'button';\n        this.domNode.title = title;\n        const iconElement = dom.$('span.icon');\n        this.domNode.append(iconElement);\n        iconElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\n        const updateSize = () => {\n            const lineHeight = this.editor.getOption(64 /* EditorOption.lineHeight */);\n            this.domNode.style.height = `${lineHeight}px`;\n            this.domNode.style.width = `${Math.ceil(0.8 * lineHeight)}px`;\n        };\n        updateSize();\n        this._register(this.editor.onDidChangeConfiguration(c => {\n            if (c.hasChanged(50 /* EditorOption.fontSize */) || c.hasChanged(64 /* EditorOption.lineHeight */)) {\n                updateSize();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, e => {\n            this.delegate.cancel();\n        }));\n    }\n    getId() {\n        return InlineProgressWidget.baseId + '.' + this.typeId;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: { lineNumber: this.range.startLineNumber, column: this.range.startColumn },\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n        };\n    }\n    dispose() {\n        super.dispose();\n        this.editor.removeContentWidget(this);\n    }\n}\nInlineProgressWidget.baseId = 'editor.widget.inlineProgressWidget';\nexport let InlineProgressManager = class InlineProgressManager extends Disposable {\n    constructor(id, _editor, _instantiationService) {\n        super();\n        this.id = id;\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        /** Delay before showing the progress widget */\n        this._showDelay = 500; // ms\n        this._showPromise = this._register(new MutableDisposable());\n        this._currentWidget = new MutableDisposable();\n        this._operationIdPool = 0;\n        this._currentDecorations = _editor.createDecorationsCollection();\n    }\n    showWhile(position, title, promise) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const operationId = this._operationIdPool++;\n            this._currentOperation = operationId;\n            this.clear();\n            this._showPromise.value = disposableTimeout(() => {\n                const range = Range.fromPositions(position);\n                const decorationIds = this._currentDecorations.set([{\n                        range: range,\n                        options: inlineProgressDecoration,\n                    }]);\n                if (decorationIds.length > 0) {\n                    this._currentWidget.value = this._instantiationService.createInstance(InlineProgressWidget, this.id, this._editor, range, title, promise);\n                }\n            }, this._showDelay);\n            try {\n                return yield promise;\n            }\n            finally {\n                if (this._currentOperation === operationId) {\n                    this.clear();\n                    this._currentOperation = undefined;\n                }\n            }\n        });\n    }\n    clear() {\n        this._showPromise.clear();\n        this._currentDecorations.clear();\n        this._currentWidget.clear();\n    }\n};\nInlineProgressManager = __decorate([\n    __param(2, IInstantiationService)\n], InlineProgressManager);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* KeybindingWeight.EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nexport let MoveLinesCommand = class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        const modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        const virtualModel = {\n            tokenization: {\n                getLineTokens: (lineNumber) => {\n                    return model.tokenization.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            const lineNumber = s.startLineNumber;\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimLeft(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfMovingLine !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimLeft(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            const movingLineText = model.getLineContent(line);\n            if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                const lineContent = model.getLineContent(validPrecedingLine);\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimLeft(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + offset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n};\nMoveLinesCommand = __decorate([\n    __param(3, ILanguageConfigurationService)\n], MoveLinesCommand);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        const data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    const startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    const linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    const data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(10 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        for (const selection of editor.getSelections()) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n            alias: 'Transpose characters around the cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(126 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class CamelCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToCamelcase',\n            label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\n            alias: 'Transform to Camel Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const wordBoundary = CamelCaseAction.wordBoundary.get();\n        if (!wordBoundary) {\n            // cannot support this\n            return text;\n        }\n        const words = text.split(wordBoundary);\n        const firstWord = words.shift();\n        return firstWord + words.map((word) => word.substring(0, 1).toLocaleUpperCase() + word.substring(1))\n            .join('');\n    }\n}\nCamelCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nexport class KebabCaseAction extends AbstractCaseAction {\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (CamelCaseAction.wordBoundary.isSupported()) {\n    registerEditorAction(CamelCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport './linkedEditing.css';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nexport let LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution.ID);\n    }\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._syncRangesToken = 0;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { max: 200 });\n        this._currentDecorations = this._editor.createDecorationsCollection();\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(67 /* EditorOption.linkedEditing */) || e.hasChanged(89 /* EditorOption.renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(67 /* EditorOption.linkedEditing */) || this._editor.getOption(89 /* EditorOption.renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (token) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = this._currentDecorations.getRange(0);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._syncRangesToken);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(token) {\n        // delayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = this._currentDecorations.getRange(0);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        const edits = [];\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n            const mirrorRange = this._currentDecorations.getRange(i);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations.clear();\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations.length > 0) {\n                    const range = this._currentDecorations.getRange(0);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            // Clear existing decorations while we compute new ones\n            this.clearRanges();\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations.set(decorations);\n                    this._syncRangesToken++; // cancel any pending syncRanges call\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(LinkedEditingAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        const result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nexport let LinkDetector = class LinkDetector extends Disposable {\n    static get(editor) {\n        return editor.getContribution(LinkDetector.ID);\n    }\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(68 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(68 /* EditorOption.links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(75 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(75 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(75 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(OpenLinkAction);\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","InlayHintAnchor","_createClass","range","direction","_classCallCheck","this","InlayHintItem","hint","anchor","provider","_isResolved","key","delta","_currentResolve","token","_regeneratorRuntime","mark","_callee","_this","wrap","_context","prev","resolveInlayHint","abrupt","isCancellationRequested","_doResolve","finally","undefined","stop","_a","_b","_callee2","newHint","_context2","sent","tooltip","label","t0","onUnexpectedExternalError","InlayHintsFragments","ranges","data","model","_disposables","DisposableStore","Set","_step","items","_iterator","_createForOfIteratorHelper","s","n","_step$value","_slicedToArray","list","add","_step2","_iterator2","hints","position","validatePosition","wordRange","_getRangeAtPosition","getStartPosition","isBefore","Range","fromPositions","getEndPosition","push","err","f","sort","a","b","Position","compare","dispose","registry","_callee4","promises","_this2","_context4","ordered","reverse","map","_callee3","_context3","provideInlayHints","length","all","flat","isDisposed","CancellationError","line","lineNumber","word","getWordAtPosition","startColumn","endColumn","tokenization","tokenizeIfCheap","tokens","getLineTokens","offset","column","idx","findTokenIndexAtOffset","start","getStartOffset","end","getEndOffset","getCount","__decorate","decorators","target","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","InlayHintsCache","_entries","LRUCache","_key","get","set","concat","uri","toString","getVersionId","IInlayHintsCache","createDecorator","registerSingleton","RenderedInlayHintLabelPart","item","index","ActiveInlayHintInfo","part","hasTriggerModifier","InlayHintsController","_editor","_languageFeaturesService","_featureDebounce","_inlayHintsCache","_commandService","_notificationService","_instaService","_sessionDisposables","_decorationsMetadata","Map","_ruleFactory","DynamicCssRules","_activeRenderMode","_debounceInfo","for","inlayHintsProvider","min","onDidChange","_update","onDidChangeModel","onDidChangeModelLanguage","onDidChangeConfiguration","hasChanged","_removeAllDecorations","clear","options","getOption","enabled","getModel","has","cts","cached","_updateHintsDecorators","getFullModelRange","toDisposable","_cacheHintsForFastRestore","defaultMode","altMode","watchedProviders","scheduler","RunOnceScheduler","t1","listener","myToken","inlayHints","Date","now","CancellationTokenSource","onWillDispose","cancel","create","_getHintsRanges","delay","update","onDidChangeInlayHints","isScheduled","schedule","onUnexpectedError","finish","onDidScrollChange","scrollTopChanged","onDidChangeModelContent","Math","max","ModifierKeyEmitter","getInstance","event","hasModel","newRenderMode","altKey","ctrlKey","shiftKey","metaKey","copies","_copyInlayHintsWithCurrentAnchor","_installDblClickGesture","_installLinkGesture","_installContextMenu","_this3","store","gesture","ClickLinkGesture","sessionStore","onMouseMoveOrRelevantKeyDown","mouseEvent","labelPart","_getInlayHintLabelPart","_activeInlayHintPart","command","location","getLineMaxColumn","lineHints","_getInlineHintsForRange","onCancel","onExecute","invokeFunction","goToDefinitionWithLocation","languages","is","_invokeCommand","values","containsRange","Array","from","updateInlayHints","_this4","onMouseUp","edits","detail","preventDefault","CancellationToken","None","isNonEmptyArray","textEdits","edit","EditOperation","replace","lift","text","executeEdits","_this5","onContextMenu","HTMLElement","showGoToContextMenu","type","injectedText","ModelDecorationInjectedTextOptions","attachedData","_callee5","_this$_commandService","_context5","executeCommand","id","_toConsumableArray","notify","severity","Severity","Error","source","displayName","message","_step3","_iterator3","_step3$value","obj","getDecorationRange","copy","with","_step4","visibleRanges","getVisibleRangesPlusViewportAboveBelow","_iterator4","compareRangesUsingStarts","extendedRange","validateRange","startLineNumber","endLineNumber","areIntersectingOrTouching","plusRange","_this6","newDecorationsData","addInjectedText","ref","content","cursorStops","opts","inlineClassNameAffectsLetterSpacing","inlineClassName","className","classNameRef","decoration","_defineProperty","description","showIfCollapsed","isEmpty","collapseOnReplaceEdit","stickiness","addInjectedWhitespace","isLast","marginRule","createClassNameRef","width","fontSize","display","InjectedTextCursorStops","Right","_this$_getLayoutInfo","_getLayoutInfo","fontFamily","padding","isUniform","fontFamilyVar","getContainerDomNode","style","setProperty","_step5","_iterator5","paddingLeft","parts","isFirst","cssProperties","EDITOR_FONT_DEFAULTS","verticalAlign","unicodeBidi","cursor","_fillInColors","textDecoration","color","themeColorFromId","colors","borderRadius","fixSpace","paddingRight","_MAX_DECORATORS","_step6","decorationIdsToReplace","_iterator6","_step7","_iterator7","getDecorationsInRange","metadata","delete","scrollState","StableEditorScrollState","capture","changeDecorations","accessor","newDecorationIds","deltaDecorations","restore","props","kind","Parameter","backgroundColor","Type","editorFontSize","editorFontFamily","removeDecorations","keys","_step8","_iterator8","editor","getContribution","ID","str","ILanguageFeaturesService","ILanguageFeatureDebounceService","ICommandService","INotificationService","IInstantiationService","CommandsRegistry","registerCommand","_len","args","_key2","_callee6","_accessor$get","_context6","assertType","URI","isUri","isIRange","ITextModelService","createModelReference","object","textEditorModel","setTimeout","__asyncValues","o","Symbol","asyncIterator","TypeError","m","call","__values","iterator","verb","v","settle","InlayHintsHoverAnchor","_HoverForeignElementA","_inherits","_super","_createSuper","owner","initialMousePosX","initialMousePosY","HoverForeignElementAnchor","InlayHintsHover","_MarkdownHoverPartici","_super2","languageService","openerService","configurationService","_resolverService","languageFeaturesService","hoverOrdinal","posx","posy","_lineDecorations","AsyncIterableObject","executor","e_1","_c","itemTooltip","partTooltip","linkHint","useMetaKey","kb","iterable","_d","iterable_1","iterable_1_1","MarkdownString","appendText","emitOne","MarkdownHover","localize","platform","scheme","Schemas","path","query","encodeURIComponent","JSON","stringify","title","isTrusted","_resolveInlayHintLabelPartHover","error","return","EMPTY","_part$part$location","hoverProvider","getHover","filter","isEmptyMarkdownString","hover","contents","ordinal","MarkdownHoverParticipant","ILanguageService","IOpenerService","IConfigurationService","registerEditorContribution","HoverParticipantRegistry","register","resolverService","contextMenuService","commandService","instaService","notificationService","menuActions","_loop","useShadowDOM","IContextMenuService","MenuRegistry","getMenuItems","MenuId","EditorContext","isIMenuItem","generateUuid","SymbolNavigationAction","delegate","Action","MenuItemAction","renderShortTitle","symbolAnchor","SymbolNavigationAnchor","runEditorCommand","bind","delegateYield","Separator","showContextMenu","domForShadowRoot","getDomNode","getAnchor","box","dom","x","left","y","top","height","getActions","onHide","focus","autoSelectFirstItem","invokeWithinContext","openToSide","contextKeyService","isInPeek","canPeek","action","hasSideBySideModifier","IContextKeyService","PeekContext","inPeekEditor","getValue","DefinitionAction","openInPeek","muteMessage","original","precondition","run","inlineSuggestCommitId","showPreviousInlineSuggestionActionId","showNextInlineSuggestionActionId","InlineCompletionContextKeys","_Disposable","inlineCompletionVisible","inlineSuggestionVisible","bindTo","inlineCompletionSuggestsIndentation","inlineSuggestionHasIndentation","inlineCompletionSuggestsIndentationLessThanTabSize","inlineSuggestionHasIndentationLessThanTabSize","suppressSuggestions","_register","autorun","reader","read","suggestion","selectedInlineCompletion","ghostText","selectedSuggestItem","inlineCompletion","inlineCompletions","startsWithIndentation","startsWithIndentationLessThanTabSize","_ghostText$parts$","firstLine","lines","textModel","getLineIndentColumn","firstNonWsIdx","firstNonWhitespaceIndex","tabSize","getOptions","CursorColumns","visibleColumnFromColumn","Disposable","RawContextKey","PositionOffsetTransformer","lineStartOffsetByLineIdx","charAt","array","ColumnRange","endColumnExclusive","BugIndicatingError","addPositions","pos1","pos2","lengthOfText","GhostText","lineText","lastPart","transformer","offsetEdits","startOffset","getOffset","endOffset","substring","applyEdits","substr","p","join","every","reduce","GhostTextPart","preview","GhostTextReplacement","columnRange","newLines","additionalReservedLineCount","_lineText","GhostTextWidget","observableValue","currentTextModel","observableFromEvent","uiState","derived","targetTextModel","replacedRange","inlineTexts","additionalLines","textBufferLine","getLineContent","hiddenTextStartColumn","lastIdx","slice","addToAdditionalLines","hiddenRange","minReservedLineCount","lastLine","decorations","LineDecoration","toRange","after","Left","additionalLinesWidget","AdditionalLinesWidget","languageIdCodec","decorationsCollection","createDecorationsCollection","debugName","applyObservableDecorations","viewZoneId","_Disposable2","_viewZoneId","editorOptionsChanged","observableSignalFromEvent","Event","updateLines","_get","_getPrototypeOf","prototype","changeViewZones","changeAccessor","removeZone","heightInLines","domNode","document","createElement","disableMonospaceOptimizations","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","fontInfo","lineHeight","sb","StringBuilder","appendString","len","lineData","String","isBasicASCII","strings","containsRTL","lineTokens","LineTokens","createEmpty","renderViewLine","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","applyFontInfo","html","build","trustedhtml","ttPolicy","createHTML","innerHTML","renderLines","addZone","afterLineNumber","afterColumnAffinity","createTrustedTypesPolicy","SingleTextEdit","validModelRange","modelRange","intersectRanges","valueToReplace","getValueInRange","commonPrefixLen","commonPrefixLength","base","startsWith","extendingRange","rangeToExtend","equals","isBeforeOrEqual","mode","cursorPosition","previewSuffixLength","removeCommonPrefix","sourceLine","sourceIndentationLength","getLeadingWhitespace","suggestionAddedIndentationLength","replacedIndentation","rangeThatDoesNotReplaceIndentation","suggestionWithoutIndentationChange","valueToBeReplaced","changes","originalValue","newValue","lastRequest","smartDiff","deletedChars","deletedCharacters","newChanges","cachingDiff","filteredChanges","originalLength","originalStart","previewStartInCompletionText","insertColumn","modifiedLength","modifiedEnd","modifiedStart","nonPreviewTextEnd","nonPreviewText","italicText","splitLines","sum","smartBracketMatching","maxCharCode","getMaxCharCode","elements1","getElements","elements2","LcsDiff","ComputeDiff","val","charCode","charCodeAt","getUniqueCharCode","level","group","characters","Int32Array","provideInlineCompletions","context","languageConfigurationService","defaultReplaceRange","providers","providerResults","itemsByHash","lists","completions","inlineCompletionItem","getDefaultRange","InlineCompletionList","InlineCompletionItem","hash","InlineCompletionProviderResult","hashs","removeRef","refCount","freeInlineCompletions","filterText","insertText","snippetInfo","additionalTextEdits","sourceInlineCompletion","updatedRange","completeBracketPairs","diff","closeBrackets","preBracketCompletionLength","snippet","SnippetParser","parse","children","Text","assertNever","maxColumn","newLine","newTokens","tokenizeLineWithEdit","slicedTokens","sliceAndInflate","fixBracketsInLine","InlineCompletionsSource","versionId","_debounceValue","_updateOperation","MutableDisposable","disposableObservableValue","suggestWidgetInlineCompletions","onDidChangeContent","activeInlineCompletion","request","UpdateRequest","selectedSuggestionInfo","satisfies","promise","updateOngoing","startTime","updatedCompletions","endTime","asInlineCompletion","triggerKind","InlineCompletionTriggerKind","Automatic","wait","inlineCompletionsProvider","getTime","UpToDateInlineCompletions","toInlineCompletion","canBeReused","prepend","transaction","tx","updateOperation","UpdateOperation","ms","cancellationToken","handle","onCancellationRequested","clearTimeout","ILanguageConfigurationService","other","v1","v2","Explicit","cancellationTokenSource","inlineCompletionProviderResult","_refCount","_prependedInlineCompletionItems","_rangeVersionIdValue","_rangeVersionId","changed","_inlineCompletions","_updateRange","ids","InlineCompletionWithUpdatedRange","decorationId","addRefToSource","addRef","unshift","rangeVersion","initialRange","semanticId","_isValid","_updatedRange","enableForwardStability","withRange","_getUpdatedRange","minimizedReplacement","_toFilterTextReplacement","toLowerCase","cursorPosIndex","filterTextBefore","filterTextAfter","originalValueBefore","originalValueAfter","originalValueIndent","trimStart","matchesSubString","containsPosition","isVisible","_isSmallerThanOriginal","equalsRange","VersionIdChangeReason","InlineCompletionsModel","textModelVersionId","_suggestPreviewEnabled","_suggestPreviewMode","_inlineSuggestMode","_enabled","_instantiationService","_languageConfigurationService","_source","createInstance","_isActive","_forceUpdate","observableSignal","_selectedInlineCompletionId","_isAcceptingPartially","_isNavigatingCurrentInlineCompletion","_preserveCurrentCompletionReasons","Redo","Undo","AcceptWord","_fetchInlineCompletions","derivedHandleChanges","createEmptyChangeSummary","preserveCurrentCompletion","inlineCompletionTriggerKind","handleChange","ctx","changeSummary","didChange","change","itemToPreserveCandidate","itemToPreserve","forwardStable","suggestItem","clone","clearSuggestWidgetInlineCompletions","toSelectedSuggestionInfo","fetch","cancelUpdate","_filteredInlineCompletionItems","filteredCompletions","selectedInlineCompletionIndex","selectedInlineCompletionId","findIndex","lastTriggerKind","inlineCompletionsCount","state","candidateInlineCompletions","isDefined","suggestCompletion","toSingleTextEdit","augmentedCompletion","mapFind","completion","augments","editPreviewLength","newGhostText","computeGhostText","replacement","keepAlive","lastItem","src","handleItemDidShow","subtransaction","trigger","newIdx","triggerExplicitly","_deltaSelectedInlineCompletionIndex","pushUndoStop","replaceMove","setPosition","SnippetController2","insert","undoStopBefore","_acceptNext","pos","langId","getLanguageIdAtPosition","config","getLanguageConfiguration","wordRegExp","RegExp","wordDefinition","flags","m1","match","acceptUntilIndexExclusive","m2","exec","getAcceptUntilIndex","accept","firstPart","partialText","handlePartialAccept","acceptedRange","SuggestWidgetAdaptor","suggestControllerPreselector","checkModelVersion","isSuggestWidgetVisible","isShiftKeyPressed","_currentSuggestItemInfo","_selectedItem","onKeyDown","onKeyUp","suggestController","SuggestController","registerSelector","priority","select","suggestItems","itemToPreselect","candidates","suggestItemTextEdit","SuggestItemInfo","fromSuggestion","valid","prefixLength","findMaxBy","compareBy","numberComparator","isBoundToSuggestWidget","once","onDidTrigger","widget","onDidShow","onDidHide","onDidFocus","newActive","newInlineCompletion","getSuggestItemInfo","suggestItemInfoEquals","focusedItem","getFocusedItem","getPosition","stopForceRenderingAbove","forceRenderingAbove","completionItemKind","isSnippetText","SelectedSuggestionInfo","toggleMode","insertTextRules","SnippetSession","adjustWhitespace","info","getOverwriteInfo","overwriteBefore","overwriteAfter","InlineCompletionsController","instantiationService","debounceService","audioCueService","suggestWidgetAdaptor","updateObservables","Other","ghostTextWidget","constObservable","runAndSubscribe","selectedItem","previewMode","isUndoing","isRedoing","isAcceptingPartially","getReason","onDidChangeCursorPosition","reason","onDidType","onDidExecuteCommand","CoreEditingCommands","Tab","DeleteLeft","DeleteRight","commandId","hasTextFocus","onDidBlurEditorWidget","keepOnBlur","InlineSuggestionHintsContentWidget","dropDownVisible","lineCount","lastInlineCompletionId","isNavigatingCurrentInlineCompletion","playAudioCue","AudioCue","inlineSuggestion","alert","renderForScreenReader","InlineCompletionsHintsWidget","changeReason","newModel","some","ownsViewZone","IAudioCueService","ShowNextInlineSuggestionAction","_EditorAction","nls","alias","ContextKeyExpr","and","EditorContextKeys","writable","kbOpts","weight","primary","controller","EditorAction","ShowPreviousInlineSuggestionAction","_EditorAction2","previous","TriggerInlineSuggestionAction","_EditorAction3","_super3","AcceptNextWordOfInlineCompletion","_EditorAction4","_super4","menuOpts","menuId","InlineSuggestionToolbar","order","acceptNextWord","AcceptNextLineOfInlineCompletion","_EditorAction5","_super5","acceptNextLine","AcceptInlineCompletion","_EditorAction6","_super6","kbExpr","tabMovesFocus","toNegated","HideInlineCompletion","_EditorAction7","_super7","_callee7","_context7","ToggleAlwaysShowInlineSuggestionToolbar","_Action","_super8","f1","menu","toggled","_callee8","configService","currentValue","_context8","updateValue","Action2","InlineCompletionsHover","InlineCompletionsHoverParticipant","_languageService","_openerService","accessibilityService","_telemetryService","viewZoneData","shouldShowHoverAtViewZone","positionBefore","shouldShowHoverAt","mightBeForeignElement","lineDecorations","showToolbar","hoverParts","disposableStore","publicLog2","isScreenReaderOptimized","renderScreenReaderText","w","commands","fragment","appendChild","$","markdownHoverElement","hoverContentsElement","append","renderer","MarkdownRenderer","code","onDidRenderAsync","onContentsChanged","inlineSuggestionAvailable","renderedContents","render","appendCodeblock","replaceChildren","element","reset","IAccessibilityService","ITelemetryService","registerEditorAction","registerAction2","alwaysShowToolbar","sessionPosition","firstColumn","Number","MAX_SAFE_INTEGER","autorunWithStore2","contentWidget","addContentWidget","removeContentWidget","inlineSuggestionHintsNextIcon","registerIcon","Codicon","chevronRight","inlineSuggestionHintsPreviousIcon","chevronLeft","withBorder","_position","_currentSuggestionIdx","_suggestionCount","_extraCommands","keybindingService","_contextKeyService","_menuService","allowEditorOverflow","suppressMouseDown","nodes","h","previousAction","createCommandAction","ThemeIcon","asClassName","availableSuggestionCountAction","nextAction","inlineCompletionsActionsMenus","createMenu","InlineCompletionsActions","clearAvailableSuggestionCountLabelDebounced","disableButtonsDebounced","lastCommands","actionBar","ActionBar","icon","toolBar","CustomizedMenuWorkbenchToolBar","menuOptions","toolbarOptions","primaryGroup","g","actionViewItemProvider","StatusBarViewItem","telemetrySource","onDidChangeDropdownVisibility","_dropDownVisible","layoutContentWidget","_assertThisInitialized","suggestionCount","currentSuggestionIdx","extraCommands","extraActions","class","setAdditionalSecondaryActions","iconClassName","lookupKeybinding","comment","getLabel","root","preference","positionAffinity","IKeybindingService","IMenuService","_MenuEntryActionViewI","_keybindingService","_action","div","KeybindingLabel","OS","assign","disableTitle","unthemedKeybindingLabelOptions","textContent","classList","MenuEntryActionViewItem","_WorkbenchToolBar","container","options2","menuService","telemetryService","resetMenu","_store","emitEventsForSubmenuChanges","additionalActions","updateToolbar","_e","_f","_g","secondary","createAndFillInActionBarActions","shouldInlineSubmenu","useSeparatorsInPrimaryActions","setActions","actions","WorkbenchToolBar","inlineProgressDecoration","ModelDecorationOptions","noBreakWhitespace","InlineProgressWidget","typeId","_iconElement$classLis","role","iconElement","asClassNameArray","loading","updateSize","ceil","addDisposableListener","EventType","CLICK","baseId","InlineProgressManager","_showDelay","_showPromise","_currentWidget","_operationIdPool","_currentDecorations","operationId","_currentOperation","disposableTimeout","ExpandLineSelectionAction","textInputFocus","_accessor","viewModel","_getViewModel","pushStackElement","setCursorStates","CursorMoveCommands","expandLineSelection","getCursorStates","revealPrimaryCursor","CopyLinesCommand","selection","isCopyingDown","noop","_selection","_isCopyingDown","_noop","_selectionDirection","_selectionId","_startLineNumberDelta","_endLineNumberDelta","builder","setEndPosition","sourceLines","sourceText","addEditOperation","getLineCount","trackSelection","getDirection","helper","getTrackedSelection","Selection","createWithDirection","MoveLinesCommand","isMovingDown","autoIndent","_isMovingDown","_autoIndent","_moveEndLineSelectionShrink","modelLineCount","_moveEndPositionDown","_model$getOptions","indentSize","insertSpaces","indentConverter","buildIndentConverter","virtualModel","getLanguageId","otherLineNumber","movingLineNumber","movingLineText","insertingText","shouldAutoIndent","movingLineMatchResult","matchEnterRule","oldIndentation","newSpaceCnt","indentUtils","newIndentation","trimLeft","indentOfMovingLine","getGoodIndentForLine","ret","matchEnterRuleMovingDown","getIndentEditsOfMovingBlock","newIndentatOfMovingBlock","oldSpaceCnt","spaceCntOffset","indentOfFirstLine","oldIndent","shiftIndent","indentation","ShiftCommand","unshiftIndent","enter","enterPrefix","indentAction","IndentAction","Indent","IndentOutdent","Outdent","indexOf","indentMetadataOfMovelingLine","getIndentMetadata","futureAboveLineNumber","futureAboveLineText","getEnterAction","parseEnterResult","validPrecedingLine","lineContent","oneLineAbove","previousLineText","isCheapToTokenize","languageAtSelectionStart","indentRulesSupport","originalIndent","newSpacesCnt","newIndent","SortLinesCommand","descending","selectionId","op","getSortData","sortLines","_COLLATOR","Intl","Collator","before","linesToSort","sorted","getCollator","AbstractCopyLinesAction","down","selections","getSelections","ignore","curr","executeCommands","CopyLinesUpAction","_AbstractCopyLinesAct","editorTextFocus","linux","MenubarSelectionMenu","CopyLinesDownAction","_AbstractCopyLinesAct2","DuplicateSelectionAction","insertSelection","ReplaceCommandThatSelectsText","AbstractMoveLinesAction","MoveLinesUpAction","_AbstractMoveLinesAct","MoveLinesDownAction","_AbstractMoveLinesAct2","AbstractSortLinesAction","canRun","SortLinesAscendingAction","_AbstractSortLinesAct","_super9","SortLinesDescendingAction","_AbstractSortLinesAct2","_super10","DeleteDuplicateLinesAction","_super11","endCursorState","linesDeleted","uniqueLines","selectionToReplace","adjustedSelectionStart","finalSelection","TrimTrailingWhitespaceAction","_super12","KeyChord","cursors","positionLineNumber","positionColumn","getSelection","TrimTrailingWhitespaceCommand","DeleteLinesAction","_super13","ops","_getLinesToRemove","cursorState","operations","selectionStartColumn","mergedOperations","previousOperation","IndentLinesAction","_EditorAction8","_super14","TypeOperations","indent","cursorConfig","OutdentLinesAction","_EditorAction9","_super15","InsertLineBeforeAction","_EditorAction10","_super16","lineInsertBefore","InsertLineAfterAction","_EditorAction11","_super17","lineInsertAfter","AbstractDeleteAllToBoundaryAction","_EditorAction12","_super18","primaryCursor","rangesToDelete","_getRangesToDelete","effectiveRanges","count","nextRange","_getEndCursorState","DeleteAllLeftAction","_AbstractDeleteAllToB","_super19","mac","endPrimaryCursor","deletedLines","forEach","endCursor","newStartLine","deleteFromLine","deleteFromColumn","DeleteAllRightAction","_AbstractDeleteAllToB2","_super20","sel","JoinLinesAction","_EditorAction13","_super21","reducedSelections","lastSelection","previousValue","equalsSelection","lineOffset","columnDeltaOffset","selectionEndPositionOffset","trimmedLinesContent","firstNonWhitespaceIdx","getLineFirstNonWhitespaceColumn","insertSpace","lineTextWithoutIndent","deleteSelection","resultSelection","TransposeAction","_EditorAction14","_super22","chars","split","ReplaceCommand","ReplaceCommandThatPreservesSelection","AbstractCaseAction","_EditorAction15","_super23","wordSeparators","getConfiguredWordAtPosition","_modifyText","UpperCaseAction","_AbstractCaseAction","_super24","toLocaleUpperCase","LowerCaseAction","_AbstractCaseAction2","_super25","toLocaleLowerCase","BackwardsCompatibleRegExp","_pattern","_flags","_actual","_evaluated","TitleCaseAction","_AbstractCaseAction3","_super26","titleBoundary","SnakeCaseAction","_AbstractCaseAction4","_super27","caseBoundary","singleLetters","CamelCaseAction","_AbstractCaseAction5","_super28","wordBoundary","words","shift","KebabCaseAction","_AbstractCaseAction6","_super29","_","underscoreBoundary","regexp","isSupported","CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE","LinkedEditingContribution","languageFeatureDebounceService","_syncRangesToken","_localToDispose","_providers","linkedEditingRangeProvider","_visibleContextKey","_debounceInformation","_languageWordPattern","_currentWordPattern","_ignoreChangeEvent","_rangeUpdateTriggerPromise","_rangeSyncTriggerPromise","_currentRequest","_currentRequestPosition","_currentRequestModelVersion","reinitialize","forceRefresh","isEnabled","clearRanges","onDidChangeLanguageConfiguration","getWordDefinition","rangeUpdateScheduler","Delayer","triggerRangeUpdate","updateRanges","_debounceDuration","rangeSyncScheduler","referenceRange","getRange","_syncRanges","referenceValue","mirrorRange","oldValue","rangeStartColumn","rangeEndColumn","commonSuffixLength","popUndoStop","prevEditOperationType","getPrevEditOperationType","setPrevEditOperationType","force","modelVersionId","createCancelablePromise","sw","response","foundReferenceRange","StopWatch","getLinkedEditingRanges","elapsed","wordPattern","splice","DECORATION","isCancellationError","LinkedEditingAction","hasRenameProvider","editorService","ICodeEditorService","_ref","isArray","_ref2","isIPosition","openCodeEditor","resource","getActiveCodeEditor","reportTelemetry","LinkedEditingCommand","EditorCommand","bindToContribution","orderedByScore","first","provideLinkedEditingRanges","arrays","registerEditorCommand","handler","editorLinkedEditingBackground","registerColor","dark","Color","fromHex","transparent","light","hcDark","hcLight","white","registerModelAndPositionCommand","Link","link","_link","_provider","url","resolveLink","LinksList","tuples","links","newLinks","_union","isDisposable","oldLinks","oldIndex","oldLen","newIndex","newLen","oldLink","newLink","getLinks","provideLinks","coalesce","resolveCount","linkProvider","IModelService","LinkDetector","debounceInformation","computeLinks","computeLinksNow","computePromise","activeLinksList","currentOccurrences","activeLinkDecorationId","clickLinkGesture","keyboardEvent","_onEditorMouseMove","onEditorMouseUp","cleanUpActiveLinkDecoration","updateDecorations","oldDecorations","_i","_keys","occurence","newDecorations","LinkOccurrence","withKey","occurrence","getLinkOccurrence","activate","deactivate","openLinkOccurrence","fromUserGesture","modelUri","file","parsedUri","fsPath","resources","relativePath","open","allowContributedOpeners","allowCommands","fromWorkspace","messageOrError","warn","currentOccurrence","Boolean","keyCodeIsTriggerKey","general","active","changeDecorationOptions","_getOptions","isActive","hoverMessage","executeCmd","test","nativeLabel","appendLink","appendMarkdown","getHoverMessage","OpenLinkAction","linkDetector"],"sourceRoot":""}