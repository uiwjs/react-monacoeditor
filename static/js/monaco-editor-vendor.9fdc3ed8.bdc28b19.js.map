{"version":3,"file":"static/js/monaco-editor-vendor.9fdc3ed8.bdc28b19.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            const previousDecorations = this.decorationId ? [this.decorationId] : [];\n            const newDecorationId = this.editor.deltaDecorations(previousDecorations, [{\n                    range: Selection.fromPositions(position, position),\n                    options: {\n                        description: 'selection-anchor',\n                        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n                        hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                        className: 'selection-anchor'\n                    }\n                }]);\n            this.decorationId = newDecorationId[0];\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            this.editor.deltaDecorations([this.decorationId], []);\n            this.decorationId = undefined;\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 32 /* KeyB */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 41 /* KeyK */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* Escape */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hc: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 88 /* Backslash */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = [];\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(64 /* matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._decorations = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(64 /* matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(64 /* matchBrackets */);\n                this._decorations = this._editor.deltaDecorations(this._decorations, []);\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[0].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        let newDecorations = [], newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            let brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations = this._editor.deltaDecorations(this._decorations, newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        let positions = [], positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        let newData = [], newDataLen = 0;\n        let previousIndex = 0, previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            let position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* WinCtrl */ | 50 /* KeyT */\n                },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let model = editor.getModel();\n        let commands = [];\n        let selections = editor.getSelections();\n        for (let selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            let lineNumber = selection.startLineNumber;\n            let column = selection.startColumn;\n            let lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            let endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            let middlePosition = MoveOperations.leftPosition(model, endPosition);\n            let beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            let leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            let rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            let replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 54 /* KeyX */,\n        win: { primary: 2048 /* CtrlCmd */ | 54 /* KeyX */, secondary: [1024 /* Shift */ | 20 /* Delete */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 33 /* KeyC */,\n        win: { primary: 2048 /* CtrlCmd */ | 33 /* KeyC */, secondary: [2048 /* CtrlCmd */ | 19 /* Insert */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* CtrlCmd */ | 52 /* KeyV */,\n        win: { primary: 2048 /* CtrlCmd */ | 52 /* KeyV */, secondary: [1024 /* Shift */ | 19 /* Insert */] },\n        linux: { primary: 2048 /* CtrlCmd */ | 52 /* KeyV */, secondary: [1024 /* Shift */ | 19 /* Insert */] },\n        weight: 100 /* EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(32 /* emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(32 /* emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(32 /* emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, flatten, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = flatten(actions.map(x => x.actions));\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* Invoke */, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from './types.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._visible = false;\n        this._showingActions = this._register(new MutableDisposable());\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(115 /* useShadowDOM */);\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                getAnchor: () => anchor,\n                getActions: () => menuActions,\n                onHide: () => {\n                    this._visible = false;\n                    this._editor.focus();\n                },\n                autoSelectFirstItem: true,\n                getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n            });\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../../base/browser/globalMouseMoveMonitor.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(59 /* lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb and block future\n            // showings until mouse is released\n            this.hide();\n            const monitor = new GlobalMouseMoveMonitor();\n            monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, () => { }, () => {\n                monitor.dispose();\n            });\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(57 /* lightbulb */) && !this._editor.getOption(57 /* lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(57 /* lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(44 /* fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action) => __awaiter(this, void 0, void 0, function* () {\n                    this.delegate.applyCodeAction(action, /* retrigger */ true);\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* Auto */ });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* Auto */ });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(81 /* readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* Auto */ });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        if (this._codeActionOracle.value) {\n            this._codeActionOracle.value.trigger(trigger);\n        }\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind } from './types.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* IfSingle */,\n            enum: [\"first\" /* First */, \"ifSingle\" /* IfSingle */, \"never\" /* Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* Auto */, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, filter, autoApply) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* Invoke */, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, this._editor);\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport function applyCodeAction(accessor, item, editor) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), { editor, label: item.action.title });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        if (controller) {\n            controller.manualTriggerAtCurrentPosition(notAvailableMessage, filter, autoApply);\n        }\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 84 /* Period */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 48 /* KeyR */,\n                mac: {\n                    primary: 256 /* WinCtrl */ | 1024 /* Shift */ | 48 /* KeyR */\n                },\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Refactor,\n            apply: \"never\" /* Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 45 /* KeyO */,\n                weight: 100 /* EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* Alt */ | 1024 /* Shift */ | 84 /* Period */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 84 /* Period */\n                },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* IfSingle */);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, SourceAction } from './codeActionCommands.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* First */;\n            case 'never': return \"never\" /* Never */;\n            case 'ifsingle': return \"ifSingle\" /* IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        let resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* WORKSPACE */, 1 /* MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        let children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        let resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        let lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        if (viewZoneChangeAccessor) {\n            viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        }\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(44 /* fontInfo */) || e.hasChanged(16 /* codeLensFontSize */) || e.hasChanged(15 /* codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        let fontSize = this._editor.getOption(16 /* codeLensFontSize */);\n        let codeLensHeight;\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(46 /* fontSize */) * .9) | 0;\n            codeLensHeight = this._editor.getOption(59 /* lineHeight */);\n        }\n        else {\n            codeLensHeight = (fontSize * Math.max(1.3, this._editor.getOption(59 /* lineHeight */) / this._editor.getOption(46 /* fontSize */))) | 0;\n        }\n        return { codeLensHeight, fontSize };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(44 /* fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (let lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                let registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    let toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    let helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    let command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let maxLineNumber = this._editor.getModel().getLineCount();\n        let groups = [];\n        let lastGroup;\n        for (let symbol of symbols.lenses) {\n            let line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    let symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    let codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (let colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (let ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = new Set();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            let prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\n        this._colorDatas = new Map();\n        this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        let decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            let color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds = new Set(this._editor.deltaDecorations([...this._colorDecoratorIds], decorations));\n    }\n    removeAllDecorations() {\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\n        this._colorDecoratorIds = new Set(this._editor.deltaDecorations([...this._colorDecoratorIds], []));\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecorationId(decorationId) {\n        return this._colorDecoratorIds.has(decorationId);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../../base/browser/globalMouseMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableGenericMouseDownListener(this.domNode, e => this.onMouseDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onMouseDown(e) {\n        this.monitor = this._register(new GlobalMouseMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, event => this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top), () => null);\n        const mouseUpListener = dom.addDisposableGenericMouseUpListener(document, () => {\n            this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableGenericMouseDownListener(this.domNode, e => this.onMouseDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onMouseDown(e) {\n        const monitor = this._register(new GlobalMouseMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, event => this.onDidChangeTop(event.posy - origin.top), () => null);\n        const mouseUpListener = dom.addDisposableGenericMouseUpListener(document, () => {\n            this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecorationId(d.id)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(129 /* pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* A */ && codeA <= 90 /* Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* A */ && codeB <= 90 /* Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        let res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        let res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        let lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        let startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenizeIfCheap(s.startLineNumber);\n        let languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        let config = LanguageConfigurationRegistry.getComments(languageId);\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        let res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        let res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* CtrlCmd */ | 85 /* Slash */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 33 /* KeyC */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 51 /* KeyU */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 31 /* KeyA */,\n                linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 31 /* KeyA */ },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (e.keyCode === 58 /* ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type !== 6 /* CONTENT_TEXT */ && e.target.type !== 7 /* CONTENT_EMPTY */ && e.target.type !== 1 /* TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._contextMenuService) {\n            this._editor.focus();\n            return; // We need the context menu service to function\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (let group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(53 /* hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(115 /* useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* Shift */ | 68 /* F10 */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 51 /* KeyU */,\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","hasModel","position","getPosition","previousDecorations","decorationId","newDecorationId","deltaDecorations","range","Selection","options","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","start","end","setSelection","cancelSelectionAnchor","undefined","dispose","getContribution","ID","IContextKeyService","SetSelectionAnchor","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","primary","KeyChord","weight","_accessor","_a","get","setSelectionAnchor","EditorAction","GoToSelectionAnchor","goToSelectionAnchor","SelectFromAnchorToCursor","selectFromAnchorToCursor","CancelSelectionAnchor","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hc","nls","JumpToBracketAction","accessor","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","BracketsData","brackets","_editor","_lastBracketsData","_lastVersionId","_decorations","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","open","close","getEndPosition","tmp","push","_recomputeBrackets","newDecorations","newDecorationsLen","bracketData","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","Disposable","ModelDecorationOptions","overviewRuler","color","themeColorFromId","OverviewRulerLane","registerThemingParticipant","theme","collector","bracketMatchBackground","getColor","editorBracketMatchBackground","addRule","bracketMatchBorder","editorBracketMatchBorder","MenuRegistry","MenuId","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","pushUndoStop","executeCommands","MoveCaretLeftAction","MoveCaretRightAction","TransposeLettersAction","mac","lastColumn","endPosition","MoveOperations","middlePosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","register","CutAction","MultiCommand","win","secondary","menuOpts","menuId","when","CopyAction","submenu","original","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","focus","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","codeEditorService","clipboardService","IClipboardService","readText","clipboardText","metadata","InMemoryClipboardMetadataManager","pasteOnNewLine","multicursorText","mode","isFromEmptySelection","trigger","text","codeActionCommandId","refactorCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","CodeActionItem","action","provider","token","resolveCodeAction","edit","onUnexpectedExternalError","ManagedCodeActionSet","actions","documentation","disposables","allActions","codeActionsComparator","validActions","filter","disabled","some","fix","kind","CodeActionKind","isPreferred","a","b","isNonEmptyArray","diagnostics","message","localeCompare","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","codeActionContext","only","include","cts","TextModelCancellationTokenSource","providers","all","providedCodeActionKinds","mayIncludeActionsOfKind","getCodeActionProviders","DisposableStore","promises","report","provideCodeActions","providedCodeActions","add","isCancellationRequested","filteredActions","filtersAction","getDocumentation","isCancellationError","listener","onDidChange","newProviders","cancel","flatten","x","allDocumentation","coalesce","finally","entry","currentBest","contains","CommandsRegistry","resource","itemResolveCount","URI","illegalArgument","ILanguageFeaturesService","codeActionProvider","IModelService","validatedRangeOrSelection","validateRange","includeSourceActions","Progress","CancellationToken","codeActionSet","resolving","resolveCount","Math","min","item","setTimeout","CodeActionAction","callback","replace","Action","CodeActionMenu","_delegate","_contextMenuService","keybindingService","_languageFeaturesService","_visible","_showingActions","MutableDisposable","_keybindingResolver","CodeActionKeybindingResolver","getKeybindings","codeActions","at","actionsToShow","includeDisabledActions","getDomNode","canceled","menuActions","getMenuActions","anchor","_toCoords","y","resolver","getResolver","useShadowDOM","showContextMenu","domForShadowRoot","getAnchor","getActions","onHide","autoSelectFirstItem","getKeyBinding","_b","toCodeActionAction","onSelectCodeAction","_getAdditionalMenuItems","Separator","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","top","height","IContextMenuService","IKeybindingService","_keybindingProvider","allCodeActionBindings","Lazy","codeActionCommands","indexOf","resolvedKeybinding","commandArgs","assign","CodeActionCommandArgs","binding","bestKeybindingForCodeAction","getValue","candidates","candidate","preferred","reduceRight","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","LightBulbWidget","_quickFixActionId","_preferredFixActionId","_keybindingService","_onClick","Emitter","onClick","event","_state","_domNode","createElement","Codicon","addContentWidget","_","editorModel","state","getLineCount","hide","Gesture","dom","addStandardDisposableGenericMouseDownListener","preventDefault","lineHeight","pad","floor","fire","posx","addDisposableListener","buttons","monitor","GlobalMouseMoveMonitor","startMonitoring","standardMouseMoveMerger","enabled","_updateLightBulbTitleAndIcon","onDidUpdateKeybindings","removeContentWidget","atPosition","getOptions","validatePosition","tabSize","fontInfo","lineContent","getLineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","hasAutoFix","classList","remove","preferredKb","lookupKeybinding","getLabel","kb","editorBackgroundColor","editorBackground","transparent","editorLightBulbForegroundColor","editorLightBulbForeground","editorLightBulbAutoFixForegroundColor","editorLightBulbAutoFixForeground","_CodeActionUi_disposed","__classPrivateFieldSet","receiver","f","TypeError","has","call","__classPrivateFieldGet","CodeActionUi","quickFixActionId","preferredFixActionId","delegate","instantiationService","_activeCodeActions","_codeActionWidget","createInstance","applyCodeAction","_lightBulbWidget","widget","showCodeActionList","newState","_c","_d","_e","rawValue","onUnexpectedError","update","validActionToApply","tryGetValidActionToApply","context","invalidAction","getInvalidActionThatWouldHaveBeenApplied","MessageController","showMessage","notAvailableMessage","show","isVisible","autoApply","find","WeakMap","IInstantiationService","_CodeActionModel_isDisposed","CodeActionsState","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","isEqual","uri","cancelAndSet","read","marker","markerRange","line","test","_getRangeOfMarker","Empty","Triggered","_cancellablePromise","catch","emptyCodeActionSet","CodeActionModel","_registry","_progressService","_codeActionOracle","_onDidChangeState","onDidChangeState","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","supportedActions","Array","isArray","join","createCancelablePromise","showWhile","skipNotify","contextKeyForSupportedActions","ContextKeyExpr","keys","RegExp","escapeRegExpCharacters","argsSchema","defaultSnippets","body","enum","enumDescriptions","QuickFixController","markerService","progressService","_instantiationService","languageFeaturesService","_model","_ui","QuickFixAction","Id","AutoFixAction","retrigger","_applyCodeAction","_trigger","closeMessage","triggerPosition","invokeFunction","bulkEditService","IBulkEditService","commandService","ICommandService","telemetryService","ITelemetryService","notificationService","INotificationService","publicLog2","codeActionTitle","codeActionKind","codeActionIsPreferred","ResourceEdit","executeCommand","asMessage","error","err","Error","triggerCodeActionsForEditorSelection","controller","manualTriggerAtCurrentPosition","IMarkerService","IEditorProgressService","CodeActionCommand","userArgs","onlyIncludePreferredActions","EditorCommand","RefactorAction","contextMenuOpts","SourceAction","OrganizeImportsAction","FixAllAction","registerEditorCommand","other","startsWith","sep","part","providedKind","intersects","excludes","exclude","excludesAction","Source","actionKind","None","QuickFix","Refactor","SourceOrganizeImports","append","SourceFixAll","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","ordered","providerRanks","Map","provideCodeLenses","assertType","codeLensProvider","Boolean","resolveCodeLens","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","_fakeProvider","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","reason","WillSaveStateReason","store","_serialize","copyItems","copyModel","toString","delete","create","lines","Set","values","JSON","stringify","parse","element","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","animate","clear","children","hasSymbol","lens","renderLabelWithIcons","trim","$","String","tooltip","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","changeAccessor","resultingDecorations","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_className","_data","_decorationIds","codeLensData","addDecoration","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","withCommands","removeDecoration","removeZone","layoutZone","symbols","resolved","getCommand","isValid","CodeLensContribution","debounceService","_commandService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_styleClassName","hash","getId","_styleElement","createStyleSheet","isInShadowDOM","getContainerDomNode","_localDispose","_currentCodeLensModel","codeLensHeight","fontSize","max","_getLayoutInfo","fontFamily","editorFontInfo","fontFamilyVar","fontFeaturesVar","newStyle","round","EDITOR_FONT_DEFAULTS","textContent","style","setProperty","fontFeatureSettings","changeViewZones","updateHeight","_getCodeLensModelPromise","_resolveCodeLensesPromise","cachedLenses","_renderCodeLensSymbols","registration","scheduler","t1","Date","now","put","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","changeDecorations","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","getLineNumber","l","splice","commit","onDidScrollChange","scrollTopChanged","onDidLayoutChange","scrollState","StableEditorScrollState","_disposeAllLenses","restore","onMouseDown","tagName","disposableTimeout","cachedLensesNow","decChangeAccessor","lastGroup","maxLineNumber","groups","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","toResolve","request","computeIfNecessary","resolvePromise","resolvedSymbols","updateCommands","ILanguageFeatureDebounceService","quickInputService","IQuickInputService","positionLineNumber","codelensController","items","pick","canPickMany","getColors","colors","reverse","provideDocumentColors","colorInfo","getColorPresentations","provideColorPresentations","colorProviderRegistry","colorProvider","rawCIs","ci","red","green","blue","alpha","presentations","ColorDecorationInjectedTextMarker","ColorDetector","_configurationService","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isEnabled","isEnabled","onModelChanged","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","stop","beginCompute","sw","StopWatch","elapsed","colorInfos","updateDecorations","updateColorDecorators","colorDatas","decorations","colorData","rgba","RGBA","g","ref","createClassNameRef","backgroundColor","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","attachedData","getDecorationsInRange","IConfigurationService","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_color","_colorPresentations","colorPresentations","presentation","flushColor","originalText","ColorPickerHeader","container","themeService","pickedColorNode","setAttribute","colorBox","Color","getColorTheme","editorHoverBackground","EventType","CLICK","selectNextColorPresentation","toggle","isLighter","prepend","ColorPickerBody","pixelRatio","saturationBox","SaturationBox","onDidSaturationValueChange","opacityStrip","OpacityStrip","onDidOpacityChange","hueStrip","HueStrip","onDidHueChange","s","v","hsva","HSVA","h","layout","_onDidChange","canvas","addDisposableGenericMouseDownListener","origin","onDidChangePosition","offsetX","offsetY","posy","mouseUpListener","addDisposableGenericMouseUpListener","stopMonitoring","width","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","updateSliderPosition","onDidChangeTop","opaque","background","ColorPickerWidget","PixelRatio","appendChild","header","Widget","ColorHover","owner","forceShowAtRange","ColorHoverParticipant","_themeService","hoverOrdinal","lineDecorations","AsyncIterableObject","_computeAsync","colorDetector","isColorDecorationId","getColorData","_createColorHover","colorHover","guessColorPresentation","hoverParts","fragment","setColorPicker","updateEditorModel","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","executeEdits","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","updateColorPresentations","IThemeService","ColorContribution","mouseEvent","detail","injectedText","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","BlockCommentCommand","insertSpace","languageConfigurationService","_insertSpace","_usedEndToken","startToken","endToken","ops","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","charCodeAt","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","_createOperationsForBlockComment","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","haystack","needle","offset","needleLength","codeA","codeB","res","EditOperation","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","shouldRemoveComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","startTokenAllowedBeforeColumn","LanguageConfigurationRegistry","_attemptRemoveBlockComment","firstNonWhitespaceIndex","strings","_gatherPreflightData","supported","_executeLineComments","_executeBlockComment","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","lineData","ignore","commentStrOffset","commentStr","lineCommentToken","commentStrLength","onlyWhitespaceLines","lineContentStartOffset","_haystackHasNeedleAtOffset","commentStrEndOffset","_gatherPreflightCommentStrings","_analyzeLines","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","nextVisibleColumn","CommentLineAction","ILanguageConfigurationService","modelOptions","commentsOptions","index","prev","curr","ToggleCommentLineAction","AddLineCommentAction","RemoveLineCommentAction","BlockCommentAction","ContextMenuController","_contextViewService","_contextKeyService","_menuService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","hideContextView","onKeyDown","keyCode","stopPropagation","hasSelectionAtPosition","_getMenuActions","isSimpleWidget","_doShowContextMenu","menu","createMenu","addedItems","SubmenuItemAction","subActions","SubmenuAction","pop","oldHoverSetting","updateOptions","hover","isIOS","getActionViewItem","keybinding","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","icon","wasCancelled","IContextViewService","IMenuService","ShowContextMenu","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","_applyState","stackElement","setScrollPosition","CursorUndo","cursorUndo","CursorRedo","cursorRedo"],"sourceRoot":""}