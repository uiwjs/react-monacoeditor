{"version":3,"file":"static/js/monaco-editor-vendor.b9228f58.d5c5f39c.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","../../node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../../node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../../node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../../node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n    DataTransfers.INTERNAL_URI_LIST,\n]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n    // Try to expose the internal uri-list type as the standard type\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n    if (uriList) {\n        vsDataTransfer.replace(Mimes.uriList, uriList);\n    }\n    else {\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n            // Otherwise, fallback to adding dragged resources to the uri list\n            const editorData = [];\n            for (const item of sourceDataTransfer.items) {\n                const file = item.getAsFile();\n                if (file) {\n                    const path = file.path;\n                    try {\n                        if (path) {\n                            editorData.push(URI.file(path).toString());\n                        }\n                        else {\n                            editorData.push(URI.parse(file.name, true).toString());\n                        }\n                    }\n                    catch (_a) {\n                        // Parsing failed. Leave out from list\n                    }\n                }\n            }\n            if (editorData.length) {\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n            }\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        vsDataTransfer.delete(internal);\n    }\n    return vsDataTransfer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isCompositeEditor(thing) {\n    return !!thing\n        && typeof thing === 'object'\n        && typeof thing.onDidChangeActiveEditor === 'function';\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    if (isCompositeEditor(thing) && isCodeEditor(thing.activeCodeEditor)) {\n        return thing.activeCodeEditor;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { asCssVariable } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates() {\n        return new ClientCoordinates(this.x - window.scrollX, this.y - window.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates() {\n        return new PageCoordinates(this.clientX + window.scrollX, this.clientY + window.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', (e) => {\n            const chord = e.toKeyCodeChord();\n            if (chord.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nexport class DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElement = dom.createStyleSheet(_containerElement);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = asCssVariable(value.id);\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElement.remove();\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry, Action2 } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this._description = opts.description;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            description: this._description\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation) {\n        this._implementations.push({ priority, name, implementation });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(withNullAsUndefined(precondition))) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion EditorAction\n//#region EditorAction2\nexport class EditorAction2 extends Action2 {\n    run(accessor, ...args) {\n        // Find the editor with text focus or active\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        // precondition does hold\n        return editor.invokeWithinContext((editorAccessor) => {\n            var _a;\n            const kbService = editorAccessor.get(IContextKeyService);\n            const logService = editorAccessor.get(ILogService);\n            const enabled = kbService.contextMatchesRules(withNullAsUndefined(this.desc.precondition));\n            if (!enabled) {\n                logService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, (_a = this.desc.precondition) === null || _a === void 0 ? void 0 : _a.serialize());\n                return;\n            }\n            return this.runEditorCommand(editorAccessor, editor, ...args);\n        });\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\n/**\n * Registers an editor contribution. Editor contributions have a lifecycle which is bound\n * to a specific code editor instance.\n */\nexport function registerEditorContribution(id, ctor, instantiation) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor, instantiation);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor, instantiation) {\n        this.editorContributions.push({ id, ctor: ctor, instantiation });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions;\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nexport let AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    removeDiffEditor(editor) {\n        if (delete this._diffEditors[editor.getId()]) {\n            this._onDiffEditorRemove.fire(editor);\n        }\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    openCodeEditor(input, source, sideBySide) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const handler of this._codeEditorOpenHandlers) {\n                const candidate = yield handler(input, source, sideBySide);\n                if (candidate !== null) {\n                    return candidate;\n                }\n            }\n            return null;\n        });\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { regExpFlags } from '../../../base/common/strings.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { LineRangeMapping, RangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { LineRange } from '../../common/core/lineRange.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nexport let EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n            if (!result) {\n                return null;\n            }\n            // Convert from space efficient JSON data to rich objects.\n            const diff = {\n                identical: result.identical,\n                quitEarly: result.quitEarly,\n                changes: result.changes.map((c) => {\n                    var _a;\n                    return new LineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n                }),\n            };\n            return diff;\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create(true);\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    provideCompletionItems(model, position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const config = this._configurationService.getValue(model.uri, position, 'editor');\n            if (!config.wordBasedSuggestions) {\n                return undefined;\n            }\n            const models = [];\n            if (config.wordBasedSuggestionsMode === 'currentDocument') {\n                // only current file and only if not too large\n                if (canSyncModel(this._modelService, model.uri)) {\n                    models.push(model.uri);\n                }\n            }\n            else {\n                // either all files or files of same language\n                for (const candidate of this._modelService.getModels()) {\n                    if (!canSyncModel(this._modelService, candidate.uri)) {\n                        continue;\n                    }\n                    if (candidate === model) {\n                        models.unshift(candidate.uri);\n                    }\n                    else if (config.wordBasedSuggestionsMode === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                        models.push(candidate.uri);\n                    }\n                }\n            }\n            if (models.length === 0) {\n                return undefined; // File too large, no other files\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const word = model.getWordAtPosition(position);\n            const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            const insert = replace.setEndPosition(position.lineNumber, position.column);\n            const client = yield this._workerManager.withWorker();\n            const data = yield client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n            if (!data) {\n                return undefined;\n            }\n            return {\n                duration: data.duration,\n                suggestions: data.words.map((word) => {\n                    return {\n                        kind: 18 /* languages.CompletionItemKind.Text */,\n                        label: word,\n                        insertText: word,\n                        range: { insert, replace }\n                    };\n                }),\n            };\n        });\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new IntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    _withSyncedResources(resources, forceLargeModels = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._disposed) {\n                return Promise.reject(canceled());\n            }\n            return this._getProxy().then((proxy) => {\n                this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n                return proxy;\n            });\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    computeDefaultDocumentColors(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeDefaultDocumentColors(resource.toString());\n        });\n    }\n    textualSuggest(resources, leadingWord, wordDefRegExp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const proxy = yield this._withSyncedResources(resources);\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n        });\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nexport let MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it instantiates IMarkerDecorationsService which is responsible for rendering squiggles\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection, matchesScheme, matchesSomeScheme } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!matchesScheme(target, Schemas.command)) {\n                return false;\n            }\n            if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n                // silently ignore commands when command-links are disabled, also\n                // suppress other openers by returning TRUE\n                return true;\n            }\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            if (Array.isArray(options.allowCommands)) {\n                // Only allow specific commands\n                if (!options.allowCommands.includes(target.path)) {\n                    // Suppress other openers by returning TRUE\n                    return true;\n                }\n            }\n            // execute as command\n            let args = [];\n            try {\n                args = parse(decodeURIComponent(target.query));\n            }\n            catch (_a) {\n                // ignore and retry\n                try {\n                    args = parse(target.query);\n                }\n                catch (_b) {\n                    // ignore error\n                }\n            }\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            yield this._commandService.executeCommand(target.path, ...args);\n            return true;\n        });\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            const { selection, uri } = extractSelection(target);\n            target = uri;\n            if (target.scheme === Schemas.file) {\n                target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n            }\n            yield this._editorService.openCodeEditor({\n                resource: target,\n                options: Object.assign({ selection, source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API }, options === null || options === void 0 ? void 0 : options.editorOptions)\n            }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n            return true;\n        });\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nexport let OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: (href) => __awaiter(this, void 0, void 0, function* () {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    window.location.href = href;\n                }\n                return true;\n            })\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: (target, options) => __awaiter(this, void 0, void 0, function* () {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    yield this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            })\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    open(target, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // check with contributed validators\n            const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n            // validate against the original URI that this URI resolves to, if one exists\n            const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n            for (const validator of this._validators) {\n                if (!(yield validator.shouldOpen(validationTarget, options))) {\n                    return false;\n                }\n            }\n            // check with contributed openers\n            for (const opener of this._openers) {\n                const handled = yield opener.open(target, options);\n                if (handled) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    resolveExternalUri(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const resolver of this._resolvers) {\n                try {\n                    const result = yield resolver.resolveExternalUri(resource, options);\n                    if (result) {\n                        if (!this._resolvedUriTargets.has(result.resolved)) {\n                            this._resolvedUriTargets.set(result.resolved, resource);\n                        }\n                        return result;\n                    }\n                }\n                catch (_a) {\n                    // noop\n                }\n            }\n            throw new Error('Could not resolve external URI: ' + resource.toString());\n        });\n    }\n    _doOpenExternal(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n            const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n            let externalUri;\n            try {\n                externalUri = (yield this.resolveExternalUri(uri, options)).resolved;\n            }\n            catch (_a) {\n                externalUri = uri;\n            }\n            let href;\n            if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n                // open the url-string AS IS\n                href = resource;\n            }\n            else {\n                // open URI using the toString(noEncode)+encodeURI-trick\n                href = encodeURI(externalUri.toString(true));\n            }\n            if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n                const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n                for (const opener of this._externalOpeners) {\n                    const didOpen = yield opener.openExternal(href, {\n                        sourceUri: uri,\n                        preferredOpenerId,\n                    }, CancellationToken.None);\n                    if (didOpen) {\n                        return true;\n                    }\n                }\n            }\n            return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n        });\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n            // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n            return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n        }\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        const visibleRanges = editor.getVisibleRanges();\n        if (visibleRanges.length > 0) {\n            visiblePosition = visibleRanges[0].getStartPosition();\n            const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n            visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n        }\n        return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._initialScrollTop = _initialScrollTop;\n        this._initialContentHeight = _initialContentHeight;\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","toVSDataTransfer","dataTransfer","_step","vsDataTransfer","VSDataTransfer","_iterator","_createForOfIteratorHelper","items","_loop","item","type","kind","asStringValue","getAsString","append","createStringDataTransferItem","file","getAsFile","_this","uri","path","URI","parse","undefined","createFileDataTransferItem","name","_regeneratorRuntime","mark","_callee","wrap","_context","prev","t0","Uint8Array","arrayBuffer","t1","sent","abrupt","stop","createFileDataTransferItemFromFile","s","n","err","f","INTERNAL_DND_MIME_TYPES","Object","freeze","CodeDataTransfers","EDITORS","FILES","DataTransfers","RESOURCES","INTERNAL_URI_LIST","toExternalVSDataTransfer","sourceDataTransfer","overwriteUriList","arguments","length","uriList","get","replace","Mimes","has","_step2","editorData","_iterator2","push","toString","_a","UriList","create","_step3","_iterator3","internal","delete","isCodeEditor","thing","getEditorType","editorCommon","ICodeEditor","isDiffEditor","IDiffEditor","getCodeEditor","getModifiedEditor","onDidChangeActiveEditor","isCompositeEditor","activeCodeEditor","PageCoordinates","x","y","_classCallCheck","this","_pageCoordinatesBrand","_createClass","key","ClientCoordinates","window","scrollX","scrollY","clientX","clientY","_clientCoordinatesBrand","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","dom","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","_StandardMouseEvent","_inherits","_super","_createSuper","isFromPointerCapture","call","_editorMouseEventBrand","posx","posy","relativePos","StandardMouseEvent","EditorMouseEventFactory","_editorViewDomNode","target","callback","_this2","_create","_this3","_this4","MOUSE_DOWN","_this5","POINTER_DOWN","pointerId","_this6","MOUSE_LEAVE","_this7","EditorPointerEventFactory","_this8","_this9","_this10","POINTER_LEAVE","_this11","GlobalEditorPointerMoveMonitor","_Disposable","_super2","_this12","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","initialElement","initialButtons","pointerMoveCallback","onStopCallback","_this13","document","toKeyCodeChord","isModifierKey","stopMonitoring","browserEvent","startMonitoring","dispose","Disposable","DynamicCssRules","_editor","_this14","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","options","_this15","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","computeUniqueKey","existingRule","counter","RefCountedCssRule","concat","getContainerDomNode","set","JSON","stringify","values","hasReferences","_containerElement","_referenceCount","_styleElement","textContent","getCssText","str","prop","cssValue","asCssVariable","id","cssPropName","camelToDashes","remove","_ref","_slicedToArray","toLowerCase","_ref3","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","registerKeybindingRule","CommandsRegistry","registerCommand","handler","accessor","runCommand","MenuRegistry","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","_Command","_implementations","priority","implementation","sort","a","b","i","splice","logService","ILogService","trace","impl","ProxyCommand","_Command2","EditorCommand","_Command3","_super3","runEditorCommand","editor","controllerGetter","_EditorCommand","EditorControllerCommandImpl","_super4","_callback","controller","runner","codeEditorService","ICodeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","IContextKeyService","contextMatchesRules","withNullAsUndefined","EditorAction","_EditorCommand2","_super5","convertOptions","label","alias","reportTelemetry","run","ITelemetryService","publicLog2","withDefaults","MenuId","EditorContext","contextMenuOpts","_toConsumableArray","map","MultiEditorAction","_EditorAction","_super6","EditorAction2","_Action","_super7","_len","_key","kbService","debug","serialize","Action2","registerModelAndPositionCommand","_len2","_key2","instaService","IInstantiationService","resource","position","assertType","isUri","Position","isIPosition","model","IModelService","getModel","editorPosition","lift","invokeFunction","slice","ITextModelService","createModelReference","reference","object","textEditorModel","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","instantiation","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","register","Registry","add","UndoCommand","MenubarEditMenu","nls","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu","__decorate","decorators","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","AbstractCodeEditorService","_themeService","_onWillCreateCodeEditor","Emitter","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onWillCreateDiffEditor","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","fire","getId","keys","editorWithWidgetFocus","editors","listCodeEditors","hasTextFocus","hasWidgetFocus","provider","refCount","ed","removeDecorationsByType","dest","key1","input","source","sideBySide","candidate","finish","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","metadata","edit","edits","ResourceTextEdit","is","ResourceFileEdit","Error","_ResourceEdit","textEdit","versionId","isObject","_ResourceEdit2","oldResource","newResource","Boolean","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","_get","_getPrototypeOf","prototype","range","computedUnicodeHighlights","original","modified","algorithm","diff","computeDiff","identical","quitEarly","changes","LineRangeMapping","LineRange","RangeMapping","Range","pretty","isNonEmptyArray","sw","StopWatch","computeMoreMinimalEdits","elapsed","race","timeout","up","navigateValueSet","computeWordRanges","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","_callee2","config","models","wordDefRegExp","word","insert","data","_context2","getValue","wordBasedSuggestions","wordBasedSuggestionsMode","getModels","getLanguageId","getLanguageConfiguration","getWordDefinition","getWordAtPosition","lineNumber","startColumn","endColumn","fromPositions","setEndPosition","column","textualSuggest","duration","suggestions","words","insertText","_Disposable2","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","IntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","_Disposable3","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_i","_toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","DisposableStore","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","method","fhr","_Disposable4","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getOrCreateWorker","getProxyObject","_callee3","_context3","canceled","_getProxy","_getOrCreateModelManager","ensureSyncedResources","_withSyncedResources","computeUnicodeHighlights","computeDefaultDocumentColors","leadingWord","_callee4","wordDef","wordDefFlags","_context4","regExpFlags","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","_this$_commandService","matchesScheme","Schemas","allowCommands","includes","decodeURIComponent","query","_b","executeCommand","ICommandService","EditorOpener","_editorService","_extractSelection","selection","extractSelection","scheme","normalizePath","openCodeEditor","assign","fromUserGesture","EditorOpenSource","USER","API","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","href","matchesSomeScheme","http","https","location","open","mailto","vsls","_doOpenExternal","opener","_callee5","targetURI","validationTarget","validator","_context5","shouldOpen","_callee6","resolver","_context6","resolveExternalUri","resolved","_callee7","externalUri","preferredOpenerId","_iterator4","_step4","_context7","encodeURI","allowContributedOpeners","sourceUri","CancellationToken","None","clear","createWebWorker","MonacoWebWorkerImpl","_EditorWorkerClient","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","foreignHostMethods","getAllMethodNames","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","foreignProxy","foreignMethod","_getForeignProxy","getProxy","StableEditorScrollState","_initialScrollTop","_initialContentHeight","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","getContentHeight","getScrollTop","visiblePositionScrollTop","getTopForPosition","setScrollTop","currentCursorPosition","getPosition","offset","getTopForLineNumber","hasPendingScrollAnimation","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition"],"sourceRoot":""}