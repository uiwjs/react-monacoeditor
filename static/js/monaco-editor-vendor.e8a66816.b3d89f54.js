"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[9],{31741:function(e,t,n){n.d(t,{T:function(){return c}});var r=n(37762),i=n(15671),o=n(43144),a=n(60136),s=n(27277),u=n(6250),c=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r,o,a,s,u){return(0,i.Z)(this,n),t.call(this,e,r,o,a,s,u)}return(0,o.Z)(n,[{key:"getCodeEditorCommandPicks",value:function(){var e=this.activeTextEditorControl;if(!e)return[];var t,n=[],i=(0,r.Z)(e.getSupportedActions());try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push({commandId:o.id,commandAlias:o.alias,label:(0,u.x$)(o.label)||o.id})}}catch(a){i.e(a)}finally{i.f()}return n}}]),n}(n(10485).Z)},58443:function(e,t,n){n.d(t,{X:function(){return v}});var r=n(29439),i=n(15671),o=n(43144),a=n(33532),s=n(10526),u=n(64272),c=n(21872),l=n(36158),d=n(2374),h=n(3553),v=function(){function e(t){(0,i.Z)(this,e),this.options=t,this.rangeHighlightDecorationId=void 0}return(0,o.Z)(e,[{key:"provide",value:function(e,t){var n,r=this,i=new s.SL;e.canAcceptInBackground=!!(null===(n=this.options)||void 0===n?void 0:n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var o=i.add(new s.XK);return o.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange((function(){o.value=void 0,o.value=r.doProvide(e,t)}))),i}},{key:"doProvide",value:function(e,t){var n=this,r=new s.SL,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){var o={editor:i},l=(0,c.Pi)(i);if(l){var d=(0,u.f6)(i.saveViewState());r.add(l.onDidChangeCursorPosition((function(){d=(0,u.f6)(i.saveViewState())}))),o.restoreViewState=function(){d&&i===n.activeTextEditorControl&&i.restoreViewState(d)},r.add((0,a.I)(t.onCancellationRequested)((function(){var e;return null===(e=o.restoreViewState)||void 0===e?void 0:e.call(o)})))}r.add((0,s.OF)((function(){return n.clearDecorations(i)}))),r.add(this.provideWithTextEditor(o,e,t))}else r.add(this.provideWithoutTextEditor(e,t));return r}},{key:"canProvideWithTextEditor",value:function(e){return!0}},{key:"gotoLocation",value:function(e,t){var n=e.editor;n.setSelection(t.range),n.revealRangeInCenter(t.range,0),t.preserveFocus||n.focus()}},{key:"getModel",value:function(e){var t;return(0,c.QI)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}},{key:"addDecorations",value:function(e,t){var n=this;e.changeDecorations((function(e){var i=[];n.rangeHighlightDecorationId&&(i.push(n.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(n.rangeHighlightDecorationId.rangeHighlightId),n.rangeHighlightDecorationId=void 0);var o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,h.EN)(d.m9),position:l.sh.Full}}}],a=e.deltaDecorations(i,o),s=(0,r.Z)(a,2),u=s[0],c=s[1];n.rangeHighlightDecorationId={rangeHighlightId:u,overviewRulerDecorationId:c}}))}},{key:"clearDecorations",value:function(e){var t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((function(e){e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}]),e}()},40848:function(e,t,n){n.d(t,{q:function(){return h}});var r=n(29439),i=n(15671),o=n(43144),a=n(60136),s=n(27277),u=n(10526),c=n(21872),l=n(58443),d=n(87697),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{canAcceptInBackground:!0})}return(0,o.Z)(n,[{key:"provideWithoutTextEditor",value:function(e){var t=(0,d.NC)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,u.JT.None}},{key:"provideWithTextEditor",value:function(e,t,i){var o=this,a=e.editor,s=new u.SL;s.add(t.onDidAccept((function(n){var i=(0,r.Z)(t.selectedItems,1)[0];if(i){if(!o.isValidLineNumber(a,i.lineNumber))return;o.gotoLocation(e,{range:o.toRange(i.lineNumber,i.column),keyMods:t.keyMods,preserveFocus:n.inBackground}),n.inBackground||t.hide()}})));var l=function(){var e=o.parsePosition(a,t.value.trim().substr(n.PREFIX.length)),r=o.getPickLabel(a,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:r}],t.ariaLabel=r,o.isValidLineNumber(a,e.lineNumber)){var i=o.toRange(e.lineNumber,e.column);a.revealRangeInCenter(i,0),o.addDecorations(a,i)}else o.clearDecorations(a)};l(),s.add(t.onDidChangeValue((function(){return l()})));var d=(0,c.Pi)(a);d&&(2===d.getOptions().get(64).renderType&&(d.updateOptions({lineNumbers:"on"}),s.add((0,u.OF)((function(){return d.updateOptions({lineNumbers:"relative"})})))));return s}},{key:"toRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}},{key:"parsePosition",value:function(e,t){var n=t.split(/,|:|#/).map((function(e){return parseInt(e,10)})).filter((function(e){return!isNaN(e)})),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}},{key:"getPickLabel",value:function(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?(0,d.NC)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):(0,d.NC)("gotoLineLabel","Go to line {0}.",t);var r=e.getPosition()||{lineNumber:1,column:1},i=this.lineCount(e);return i>1?(0,d.NC)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,i):(0,d.NC)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)}},{key:"isValidLineNumber",value:function(e,t){return!(!t||"number"!==typeof t)&&(t>0&&t<=this.lineCount(e))}},{key:"isValidColumn",value:function(e,t,n){if(!n||"number"!==typeof n)return!1;var r=this.getModel(e);if(!r)return!1;var i={lineNumber:t,column:n};return r.validatePosition(i).equals(i)}},{key:"lineCount",value:function(e){var t,n;return null!==(n=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==n?n:0}}]),n}(l.X);h.PREFIX=":"},25626:function(e,t,n){n.d(t,{S:function(){return T}});var r,i=n(4942),o=n(93433),a=n(37762),s=n(29439),u=n(74165),c=n(15671),l=n(43144),d=n(60136),h=n(27277),v=n(32590),p=n(32124),f=n(7579),m=n(30870),g=n(38322),_=n(10526),b=n(26684),k=n(30788),y=n(56417),S=n(54280),C=n(58443),R=n(87697),w=n(45161),x=n(71881),D=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Z=function(e,t){return function(n,r){t(n,r,e)}},I=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},T=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return(0,c.Z)(this,n),(i=t.call(this,o))._languageFeaturesService=e,i._outlineModelService=r,i.options=o,i.options.canAcceptInBackground=!0,i}return(0,l.Z)(n,[{key:"provideWithoutTextEditor",value:function(e){return this.provideLabelPick(e,(0,R.NC)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),_.JT.None}},{key:"provideWithTextEditor",value:function(e,t,n){var r=e.editor,i=this.getModel(r);return i?this._languageFeaturesService.documentSymbolProvider.has(i)?this.doProvideWithEditorSymbols(e,i,t,n):this.doProvideWithoutEditorSymbols(e,i,t,n):_.JT.None}},{key:"doProvideWithoutEditorSymbols",value:function(e,t,n,r){var i=this,o=new _.SL;return this.provideLabelPick(n,(0,R.NC)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),I(i,void 0,void 0,(0,u.Z)().mark((function i(){return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.waitForLanguageSymbolRegistry(t,o);case 2:if(i.sent&&!r.isCancellationRequested){i.next=5;break}return i.abrupt("return");case 5:o.add(this.doProvideWithEditorSymbols(e,t,n,r));case 6:case"end":return i.stop()}}),i,this)}))),o}},{key:"provideLabelPick",value:function(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}},{key:"waitForLanguageSymbolRegistry",value:function(e,t){return I(this,void 0,void 0,(0,u.Z)().mark((function n(){var r,i,o=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._languageFeaturesService.documentSymbolProvider.has(e)){n.next=2;break}return n.abrupt("return",!0);case 2:return r=new v.CR,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){o._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),r.complete(!0))}))),t.add((0,_.OF)((function(){return r.complete(!1)}))),n.abrupt("return",r.p);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"doProvideWithEditorSymbols",value:function(e,t,r,i){var o,a=this,c=e.editor,l=new _.SL;l.add(r.onDidAccept((function(t){var n=(0,s.Z)(r.selectedItems,1)[0];n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:r.keyMods,preserveFocus:t.inBackground}),t.inBackground||r.hide())}))),l.add(r.onDidTriggerItemButton((function(t){var n=t.item;n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:r.keyMods,forceSideBySide:!0}),r.hide())})));var d=this.getDocumentSymbols(t,i),h=void 0,v=function(e){return I(a,void 0,void 0,(0,u.Z)().mark((function t(){var o,a,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===h||void 0===h||h.dispose(!0),r.busy=!1,h=new p.A(i),r.busy=!0,t.prev=4,o=(0,g.AO)(r.value.substr(n.PREFIX.length).trim()),t.next=8,this.doGetSymbolPicks(d,o,void 0,h.token);case 8:if(a=t.sent,!i.isCancellationRequested){t.next=11;break}return t.abrupt("return");case 11:a.length>0?(r.items=a,e&&0===o.original.length&&(s=(0,x.dF)(a,(function(t){return Boolean("separator"!==t.type&&t.range&&k.e.containsPosition(t.range.decoration,e))})))&&(r.activeItems=[s])):o.original.length>0?this.provideLabelPick(r,(0,R.NC)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(r,(0,R.NC)("noSymbolResults","No editor symbols"));case 12:return t.prev=12,i.isCancellationRequested||(r.busy=!1),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[4,,12,15]])})))};return l.add(r.onDidChangeValue((function(){return v(void 0)}))),v(null===(o=c.getSelection())||void 0===o?void 0:o.getPosition()),l.add(r.onDidChangeActive((function(){var e=(0,s.Z)(r.activeItems,1)[0];e&&e.range&&(c.revealRangeInCenter(e.range.selection,0),a.addDecorations(c,e.range.decoration))}))),l}},{key:"doGetSymbolPicks",value:function(e,t,r,i){var c,l;return I(this,void 0,void 0,(0,u.Z)().mark((function d(){var h,v,p,_,S,C,w,x,D,Z,I,T,L,E,A,O,M,q,j,F,W,V,B,z,K,X,H,G,J,U,Y,Q,$,ee,te,ne=this;return(0,u.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e;case 2:if(h=u.sent,!i.isCancellationRequested){u.next=5;break}return u.abrupt("return",[]);case 5:v=0===t.original.indexOf(n.SCOPE_PREFIX),p=v?1:0,t.values&&t.values.length>1?(_=(0,g.Ic)(t.values[0]),S=(0,g.Ic)(t.values.slice(1))):_=t,(w=null===(l=null===(c=this.options)||void 0===c?void 0:c.openSideBySideDirection)||void 0===l?void 0:l.call(c))&&(C=[{iconClass:"right"===w?m.k.asClassName(f.l.splitHorizontal):m.k.asClassName(f.l.splitVertical),tooltip:"right"===w?(0,R.NC)("openToSide","Open to the Side"):(0,R.NC)("openToBottom","Open to the Bottom")}]),x=[],D=0;case 12:if(!(D<h.length)){u.next=43;break}if(Z=h[D],I=(0,b.fy)(Z.name),T="$(".concat(y.uZ.toIcon(Z.kind).id,") ").concat(I),L=T.length-I.length,E=Z.containerName,(null===r||void 0===r?void 0:r.extraContainerLabel)&&(E=E?"".concat(r.extraContainerLabel," \u2022 ").concat(E):r.extraContainerLabel),A=void 0,O=void 0,M=void 0,q=void 0,!(t.original.length>p)){u.next=38;break}if(j=!1,_!==t&&(F=(0,g.mt)(T,Object.assign(Object.assign({},t),{values:void 0}),p,L),W=(0,s.Z)(F,2),A=W[0],O=W[1],"number"===typeof A&&(j=!0)),"number"===typeof A){u.next=33;break}if(V=(0,g.mt)(T,_,p,L),B=(0,s.Z)(V,2),A=B[0],O=B[1],"number"===typeof A){u.next=33;break}return u.abrupt("continue",40);case 33:if(j||!S){u.next=38;break}if(E&&S.original.length>0&&(z=(0,g.mt)(E,S),K=(0,s.Z)(z,2),M=K[0],q=K[1]),"number"===typeof M){u.next=37;break}return u.abrupt("continue",40);case 37:"number"===typeof A&&(A+=M);case 38:X=Z.tags&&Z.tags.indexOf(1)>=0,x.push({index:D,kind:Z.kind,score:A,label:T,ariaLabel:I,description:E,highlights:X?void 0:{label:O,description:q},range:{selection:k.e.collapseToStart(Z.selectionRange),decoration:Z.range},strikethrough:X,buttons:C});case 40:D++,u.next=12;break;case 43:if(H=x.sort((function(e,t){return v?ne.compareByKindAndScore(e,t):ne.compareByScore(e,t)})),G=[],v){J=function(){Y&&"number"===typeof U&&Q>0&&(Y.label=(0,b.WU)(P[U]||N,Q))},U=void 0,Y=void 0,Q=0,$=(0,a.Z)(H);try{for($.s();!(ee=$.n()).done;)te=ee.value,U!==te.kind?(J(),U=te.kind,Q=1,Y={type:"separator"},G.push(Y)):Q++,G.push(te)}catch(d){$.e(d)}finally{$.f()}J()}else H.length>0&&(G=[{label:(0,R.NC)("symbols","symbols ({0})",x.length),type:"separator"}].concat((0,o.Z)(H)));return u.abrupt("return",G);case 47:case"end":return u.stop()}}),d,this)})))}},{key:"compareByScore",value:function(e,t){if("number"!==typeof e.score&&"number"===typeof t.score)return 1;if("number"===typeof e.score&&"number"!==typeof t.score)return-1;if("number"===typeof e.score&&"number"===typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}},{key:"compareByKindAndScore",value:function(e,t){var n=P[e.kind]||N,r=P[t.kind]||N,i=n.localeCompare(r);return 0===i?this.compareByScore(e,t):i}},{key:"getDocumentSymbols",value:function(e,t){return I(this,void 0,void 0,(0,u.Z)().mark((function n(){var r;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._outlineModelService.getOrCreate(e,t);case 2:return r=n.sent,n.abrupt("return",t.isCancellationRequested?[]:r.asListOfDocumentSymbols());case 4:case"end":return n.stop()}}),n,this)})))}}]),n}(C.X);T.PREFIX="@",T.SCOPE_PREFIX=":",T.PREFIX_BY_CATEGORY="".concat(T.PREFIX).concat(T.SCOPE_PREFIX),T=D([Z(0,w.p),Z(1,S.Je)],T);var N=(0,R.NC)("property","properties ({0})"),P=(r={},(0,i.Z)(r,5,(0,R.NC)("method","methods ({0})")),(0,i.Z)(r,11,(0,R.NC)("function","functions ({0})")),(0,i.Z)(r,8,(0,R.NC)("_constructor","constructors ({0})")),(0,i.Z)(r,12,(0,R.NC)("variable","variables ({0})")),(0,i.Z)(r,4,(0,R.NC)("class","classes ({0})")),(0,i.Z)(r,22,(0,R.NC)("struct","structs ({0})")),(0,i.Z)(r,23,(0,R.NC)("event","events ({0})")),(0,i.Z)(r,24,(0,R.NC)("operator","operators ({0})")),(0,i.Z)(r,10,(0,R.NC)("interface","interfaces ({0})")),(0,i.Z)(r,2,(0,R.NC)("namespace","namespaces ({0})")),(0,i.Z)(r,3,(0,R.NC)("package","packages ({0})")),(0,i.Z)(r,25,(0,R.NC)("typeParameter","type parameters ({0})")),(0,i.Z)(r,1,(0,R.NC)("modules","modules ({0})")),(0,i.Z)(r,6,(0,R.NC)("property","properties ({0})")),(0,i.Z)(r,9,(0,R.NC)("enum","enumerations ({0})")),(0,i.Z)(r,21,(0,R.NC)("enumMember","enumeration members ({0})")),(0,i.Z)(r,14,(0,R.NC)("string","strings ({0})")),(0,i.Z)(r,0,(0,R.NC)("file","files ({0})")),(0,i.Z)(r,17,(0,R.NC)("array","arrays ({0})")),(0,i.Z)(r,15,(0,R.NC)("number","numbers ({0})")),(0,i.Z)(r,16,(0,R.NC)("boolean","booleans ({0})")),(0,i.Z)(r,18,(0,R.NC)("object","objects ({0})")),(0,i.Z)(r,19,(0,R.NC)("key","keys ({0})")),(0,i.Z)(r,7,(0,R.NC)("field","fields ({0})")),(0,i.Z)(r,13,(0,R.NC)("constant","constants ({0})")),r)},40492:function(e,t,n){n.r(t),n.d(t,{ReadOnlyMessageController:function(){return d}});var r=n(15671),i=n(43144),o=n(60136),a=n(27277),s=n(10526),u=n(98351),c=n(94719),l=n(87697),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).editor=e,i._register(i.editor.onDidAttemptReadOnlyEdit((function(){return i._onDidAttemptReadOnlyEdit()}))),i}return(0,i.Z)(n,[{key:"_onDidAttemptReadOnlyEdit",value:function(){var e=c.O.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(l.NC("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(l.NC("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}]),n}(s.JT);d.ID="editor.contrib.readOnlyMessageController",(0,u._K)(d.ID,d,2)},97922:function(e,t,n){n.r(t),n.d(t,{RenameAction:function(){return J},rename:function(){return H}});var r=n(29439),i=n(11752),o=n(61120),a=n(60136),s=n(27277),u=n(74165),c=n(15671),l=n(43144),d=n(58340),h=n(32590),v=n(32124),p=n(68552),f=n(10526),m=n(64272),g=n(50605),_=n(50004),b=n(98351),k=n(16986),y=n(56692),S=n(10849),C=n(30788),R=n(44474),w=n(9549),x=n(94719),D=n(87697),Z=n(21072),I=n(49525),T=n(8850),N=n(39701),P=n(13023),L=n(26562),E=n(254),A=n(45753),O=n(6574),M=n(3553),q=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},j=function(e,t){return function(n,r){t(n,r,e)}},F=new I.uy("renameInputVisible",!1,(0,D.NC)("renameInputVisible","Whether the rename input widget is visible")),W=function(){function e(t,n,r,i,o){var a=this;(0,c.Z)(this,e),this._editor=t,this._acceptKeybindings=n,this._themeService=r,this._keybindingService=i,this._disposables=new f.SL,this.allowEditorOverflow=!0,this._visibleContextKey=F.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(47)&&a._updateFont()}))),this._disposables.add(r.onDidColorThemeChange(this._updateStyles,this))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"__renameInputWidget"}},{key:"getDomNode",value:function(){var e=this;if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,D.NC)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);var t=function(){var t,n,i=(0,r.Z)(e._acceptKeybindings,2),o=i[0],a=i[1];e._keybindingService.lookupKeybinding(o),e._label.innerText=(0,D.NC)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(t=e._keybindingService.lookupKeybinding(o))||void 0===t?void 0:t.getLabel(),null===(n=e._keybindingService.lookupKeybinding(a))||void 0===n?void 0:n.getLabel())};t(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(t)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}},{key:"_updateStyles",value:function(e){var t,n,r,i;if(this._input&&this._domNode){var o=e.getColor(O.rh),a=e.getColor(O.A42);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(O.D0T))&&void 0!==t?t:""),this._domNode.style.boxShadow=o?" 0 0 8px 2px ".concat(o):"",this._domNode.style.border=a?"1px solid ".concat(a):"",this._domNode.style.color=String(null!==(n=e.getColor(O.zJb))&&void 0!==n?n:""),this._input.style.backgroundColor=String(null!==(r=e.getColor(O.sEe))&&void 0!==r?r:"");var s=e.getColor(O.dt_);this._input.style.borderWidth=s?"1px":"0px",this._input.style.borderStyle=s?"solid":"none",this._input.style.borderColor=null!==(i=null===s||void 0===s?void 0:s.toString())&&void 0!==i?i:"none"}}},{key:"_updateFont",value:function(){if(this._input&&this._label){var e=this._editor.getOption(47);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize="".concat(e.fontSize,"px"),this._label.style.fontSize="".concat(.8*e.fontSize,"px")}}},{key:"getPosition",value:function(){return this._visible?{position:this._position,preference:[2,1]}:null}},{key:"afterRender",value:function(e){e||this.cancelInput(!0)}},{key:"acceptInput",value:function(e){var t;null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}},{key:"cancelInput",value:function(e){var t;null===(t=this._currentCancelInput)||void 0===t||t.call(this,e)}},{key:"getInput",value:function(e,t,n,r,i,o){var a=this;this._domNode.classList.toggle("preview",i),this._position=new S.L(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",r.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var s=new f.SL;return new Promise((function(e){a._currentCancelInput=function(t){return a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e(t),!0},a._currentAcceptInput=function(n){0!==a._input.value.trim().length&&a._input.value!==t?(a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e({newName:a._input.value,wantsPreview:i&&n})):a.cancelInput(!0)},s.add(o.onCancellationRequested((function(){return a.cancelInput(!0)}))),s.add(a._editor.onDidBlurEditorWidget((function(){return a.cancelInput(!document.hasFocus())}))),a._show()})).finally((function(){s.dispose(),a._hide()}))}},{key:"_show",value:function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((function(){e._input.focus(),e._input.setSelectionRange(parseInt(e._input.getAttribute("selectionStart")),parseInt(e._input.getAttribute("selectionEnd")))}),100)}},{key:"_hide",value:function(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}}]),e}();W=q([j(2,M.XE),j(3,A.d),j(4,I.i6)],W);var V=n(45161),B=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},z=function(e,t){return function(n,r){t(n,r,e)}},K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},X=function(){function e(t,n,r){(0,c.Z)(this,e),this.model=t,this.position=n,this._providerRenameIdx=0,this._providers=r.ordered(t)}return(0,l.Z)(e,[{key:"hasProvider",value:function(){return this._providers.length>0}},{key:"resolveRenameLocation",value:function(e){return K(this,void 0,void 0,(0,u.Z)().mark((function t(){var n,r,i,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],this._providerRenameIdx=0;case 2:if(!(this._providerRenameIdx<this._providers.length)){t.next=18;break}if((r=this._providers[this._providerRenameIdx]).resolveRenameLocation){t.next=6;break}return t.abrupt("break",18);case 6:return t.next=8,r.resolveRenameLocation(this.model,this.position,e);case 8:if(i=t.sent){t.next=11;break}return t.abrupt("continue",15);case 11:if(!i.rejectReason){t.next=14;break}return n.push(i.rejectReason),t.abrupt("continue",15);case 14:return t.abrupt("return",i);case 15:this._providerRenameIdx++,t.next=2;break;case 18:if(o=this.model.getWordAtPosition(this.position)){t.next=21;break}return t.abrupt("return",{range:C.e.fromPositions(this.position),text:"",rejectReason:n.length>0?n.join("\n"):void 0});case 21:return t.abrupt("return",{range:new C.e(this.position.lineNumber,o.startColumn,this.position.lineNumber,o.endColumn),text:o.word,rejectReason:n.length>0?n.join("\n"):void 0});case 22:case"end":return t.stop()}}),t,this)})))}},{key:"provideRenameEdits",value:function(e,t){return K(this,void 0,void 0,(0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._provideRenameEdits(e,this._providerRenameIdx,[],t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"_provideRenameEdits",value:function(e,t,n,r){return K(this,void 0,void 0,(0,u.Z)().mark((function i(){var o,a;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=this._providers[t]){i.next=3;break}return i.abrupt("return",{edits:[],rejectReason:n.join("\n")});case 3:return i.next=5,o.provideRenameEdits(this.model,this.position,e,r);case 5:if(a=i.sent){i.next=10;break}return i.abrupt("return",this._provideRenameEdits(e,t+1,n.concat(D.NC("no result","No result.")),r));case 10:if(!a.rejectReason){i.next=12;break}return i.abrupt("return",this._provideRenameEdits(e,t+1,n.concat(a.rejectReason),r));case 12:return i.abrupt("return",a);case 13:case"end":return i.stop()}}),i,this)})))}}]),e}();function H(e,t,n,r){return K(this,void 0,void 0,(0,u.Z)().mark((function i(){var o,a;return(0,u.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=new X(t,n,e),i.next=3,o.resolveRenameLocation(v.T.None);case 3:if(!(null===(a=i.sent)||void 0===a?void 0:a.rejectReason)){i.next=6;break}return i.abrupt("return",{edits:[],rejectReason:a.rejectReason});case 6:return i.abrupt("return",o.provideRenameEdits(r,v.T.None));case 7:case"end":return i.stop()}}),i)})))}var G=function(){function e(t,n,r,i,o,a,s,u){(0,c.Z)(this,e),this.editor=t,this._instaService=n,this._notificationService=r,this._bulkEditService=i,this._progressService=o,this._logService=a,this._configService=s,this._languageFeaturesService=u,this._disposableStore=new f.SL,this._cts=new v.A,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(W,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposableStore.dispose(),this._cts.dispose(!0)}},{key:"run",value:function(){var e,t;return K(this,void 0,void 0,(0,u.Z)().mark((function n(){var r,i,o,a,s,c,l,v,p,f,m=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._cts.dispose(!0),this.editor.hasModel()){n.next=3;break}return n.abrupt("return",void 0);case 3:if(r=this.editor.getPosition(),(i=new X(this.editor.getModel(),r,this._languageFeaturesService.renameProvider)).hasProvider()){n.next=7;break}return n.abrupt("return",void 0);case 7:return this._cts=new _.Dl(this.editor,5),n.prev=8,a=i.resolveRenameLocation(this._cts.token),this._progressService.showWhile(a,250),n.next=13,a;case 13:o=n.sent,n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(8),null===(e=x.O.get(this.editor))||void 0===e||e.showMessage(n.t0||D.NC("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),r),n.abrupt("return",void 0);case 20:if(o){n.next=22;break}return n.abrupt("return",void 0);case 22:if(!o.rejectReason){n.next=25;break}return null===(t=x.O.get(this.editor))||void 0===t||t.showMessage(o.rejectReason,r),n.abrupt("return",void 0);case 25:if(!this._cts.token.isCancellationRequested){n.next=27;break}return n.abrupt("return",void 0);case 27:return this._cts.dispose(),this._cts=new _.Dl(this.editor,5,o.range),s=this.editor.getSelection(),c=0,l=o.text.length,C.e.isEmpty(s)||C.e.spansMultipleLines(s)||!C.e.containsRange(o.range,s)||(c=Math.max(0,s.startColumn-o.range.startColumn),l=Math.min(o.range.endColumn,s.endColumn)-o.range.startColumn),v=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),n.next=36,this._renameInputField.getInput(o.range,o.text,c,l,v,this._cts.token);case 36:if("boolean"!==typeof(p=n.sent)){n.next=40;break}return p&&this.editor.focus(),n.abrupt("return",void 0);case 40:return this.editor.focus(),f=(0,h.eP)(i.provideRenameEdits(p.newName,this._cts.token),this._cts.token).then((function(e){return K(m,void 0,void 0,(0,u.Z)().mark((function t(){var n=this;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&this.editor.hasModel()){t.next=2;break}return t.abrupt("return");case 2:if(!e.rejectReason){t.next=5;break}return this._notificationService.info(e.rejectReason),t.abrupt("return");case 5:this.editor.setSelection(C.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(e,{editor:this.editor,showPreview:p.wantsPreview,label:D.NC("label","Renaming '{0}' to '{1}'",null===o||void 0===o?void 0:o.text,p.newName),code:"undoredo.rename",quotableLabel:D.NC("quotableLabel","Renaming {0} to {1}",null===o||void 0===o?void 0:o.text,p.newName),respectAutoSaveConfig:!0}).then((function(e){e.ariaSummary&&(0,d.Z9)(D.NC("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,p.newName,e.ariaSummary))})).catch((function(e){n._notificationService.error(D.NC("rename.failedApply","Rename failed to apply edits")),n._logService.error(e)}));case 7:case"end":return t.stop()}}),t,this)})))}),(function(e){m._notificationService.error(D.NC("rename.failed","Rename failed to compute edits")),m._logService.error(e)})),this._progressService.showWhile(f,250),n.abrupt("return",f);case 44:case"end":return n.stop()}}),n,this,[[8,16]])})))}},{key:"acceptRenameInput",value:function(e){this._renameInputField.acceptInput(e)}},{key:"cancelRenameInput",value:function(){this._renameInputField.cancelInput(!0)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();G.ID="editor.contrib.renameController",G=B([z(1,T.TG),z(2,P.lT),z(3,k.vu),z(4,L.ek),z(5,N.VZ),z(6,w.V),z(7,V.p)],G);var J=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,c.Z)(this,n),t.call(this,{id:"editor.action.rename",label:D.NC("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:I.Ao.and(R.u.writable,R.u.hasRenameProvider),kbOpts:{kbExpr:R.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}return(0,l.Z)(n,[{key:"runCommand",value:function(e,t){var a=this,s=e.get(y.$),u=Array.isArray(t)&&t||[void 0,void 0],c=(0,r.Z)(u,2),l=c[0],d=c[1];return g.o.isUri(l)&&S.L.isIPosition(d)?s.openCodeEditor({resource:l},s.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(d),e.invokeWithinContext((function(t){return a.reportTelemetry(t,e),a.run(t,e)})))}),p.dL):(0,i.Z)((0,o.Z)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=G.get(t);return n?n.run():Promise.resolve()}}]),n}(b.R6);(0,b._K)(G.ID,G,4),(0,b.Qr)(J);var U=b._l.bindToContribution(G.get);(0,b.fK)(new U({id:"acceptRenameInput",precondition:F,handler:function(e){return e.acceptRenameInput(!1)},kbOpts:{weight:199,kbExpr:R.u.focus,primary:3}})),(0,b.fK)(new U({id:"acceptRenameInputWithPreview",precondition:I.Ao.and(F,I.Ao.has("config.editor.rename.enablePreview")),handler:function(e){return e.acceptRenameInput(!0)},kbOpts:{weight:199,kbExpr:R.u.focus,primary:1027}})),(0,b.fK)(new U({id:"cancelRenameInput",precondition:F,handler:function(e){return e.cancelRenameInput()},kbOpts:{weight:199,kbExpr:R.u.focus,primary:9,secondary:[1033]}})),(0,b.sb)("_executeDocumentRenameProvider",(function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=i[0];return(0,m.p_)("string"===typeof a),H(e.get(V.p).renameProvider,t,n,a)})),(0,b.sb)("_executePrepareRename",(function(e,t,n){return K(this,void 0,void 0,(0,u.Z)().mark((function r(){var i,o,a,s;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.get(V.p),o=i.renameProvider,a=new X(t,n,o),r.next=4,a.resolveRenameLocation(v.T.None);case 4:if(!(null===(s=r.sent)||void 0===s?void 0:s.rejectReason)){r.next=7;break}throw new Error(s.rejectReason);case 7:return r.abrupt("return",s);case 8:case"end":return r.stop()}}),r)})))})),E.B.as(Z.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:D.NC("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},89903:function(e,t,n){n.r(t),n.d(t,{DocumentSemanticTokensFeature:function(){return D}});var r=n(37762),i=n(15671),o=n(43144),a=n(11752),s=n(61120),u=n(60136),c=n(27277),l=n(10526),d=n(68552),h=n(74463),v=n(64644),p=n(32590),f=n(32124),m=n(3553),g=n(13104),_=n(26486),b=n(22847),k=n(9197),y=n(45161),S=n(48606),C=n(34805),R=n(30832),w=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},x=function(e,t){return function(n,r){t(n,r,e)}},D=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,a,s,u,c){var l;(0,i.Z)(this,n),(l=t.call(this))._watchers=Object.create(null);var d=function(t){l._watchers[t.uri.toString()]=new Z(t,e,a,u,c)},h=function(e,t){t.dispose(),delete l._watchers[e.uri.toString()]},v=function(){var e,t=(0,r.Z)(o.getModels());try{for(t.s();!(e=t.n()).done;){var n=e.value,i=l._watchers[n.uri.toString()];(0,R.t)(n,a,s)?i||d(n):i&&h(n,i)}}catch(u){t.e(u)}finally{t.f()}};return l._register(o.onModelAdded((function(e){(0,R.t)(e,a,s)&&d(e)}))),l._register(o.onModelRemoved((function(e){var t=l._watchers[e.uri.toString()];t&&h(e,t)}))),l._register(s.onDidChangeConfiguration((function(e){e.affectsConfiguration(R.e)&&v()}))),l._register(a.onDidColorThemeChange(v)),l}return(0,o.Z)(n,[{key:"dispose",value:function(){for(var e=0,t=Object.values(this._watchers);e<t.length;e++){t[e].dispose()}(0,a.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}}]),n}(l.JT);D=w([x(0,S.s),x(1,h.q),x(2,m.XE),x(3,v.Ui),x(4,b.A),x(5,y.p)],D);var Z=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,o,a,s,u){var c;(0,i.Z)(this,n),(c=t.call(this))._semanticTokensStylingService=o,c._isDisposed=!1,c._model=e,c._provider=u.documentSemanticTokensProvider,c._debounceInformation=s.for(c._provider,"DocumentSemanticTokens",{min:n.REQUEST_MIN_DELAY,max:n.REQUEST_MAX_DELAY}),c._fetchDocumentSemanticTokens=c._register(new p.pY((function(){return c._fetchDocumentSemanticTokensNow()}),n.REQUEST_MIN_DELAY)),c._currentDocumentResponse=null,c._currentDocumentRequestCancellationTokenSource=null,c._documentProvidersChangeListeners=[],c._providersChangedDuringRequest=!1,c._register(c._model.onDidChangeContent((function(){c._fetchDocumentSemanticTokens.isScheduled()||c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._register(c._model.onDidChangeLanguage((function(){c._currentDocumentResponse&&(c._currentDocumentResponse.dispose(),c._currentDocumentResponse=null),c._currentDocumentRequestCancellationTokenSource&&(c._currentDocumentRequestCancellationTokenSource.cancel(),c._currentDocumentRequestCancellationTokenSource=null),c._setDocumentSemanticTokens(null,null,null,[]),c._fetchDocumentSemanticTokens.schedule(0)})));var d=function(){(0,l.B9)(c._documentProvidersChangeListeners),c._documentProvidersChangeListeners=[];var t,n=(0,r.Z)(c._provider.all(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;"function"===typeof i.onDidChange&&c._documentProvidersChangeListeners.push(i.onDidChange((function(){c._currentDocumentRequestCancellationTokenSource?c._providersChangedDuringRequest=!0:c._fetchDocumentSemanticTokens.schedule(0)})))}}catch(o){n.e(o)}finally{n.f()}};return d(),c._register(c._provider.onDidChange((function(){d(),c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._register(a.onDidColorThemeChange((function(e){c._setDocumentSemanticTokens(null,null,null,[]),c._fetchDocumentSemanticTokens.schedule(c._debounceInformation.get(c._model))}))),c._fetchDocumentSemanticTokens.schedule(0),c}return(0,o.Z)(n,[{key:"dispose",value:function(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,(0,a.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}},{key:"_fetchDocumentSemanticTokensNow",value:function(){var e=this;if(!this._currentDocumentRequestCancellationTokenSource)if((0,_.Jc)(this._provider,this._model)){var t=new f.A,n=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,r=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=(0,_.ML)(this._provider,this._model,n,r,t.token);this._currentDocumentRequestCancellationTokenSource=t,this._providersChangedDuringRequest=!1;var o=[],a=this._model.onDidChangeContent((function(e){o.push(e)})),s=new k.G(!1);i.then((function(t){if(e._debounceInformation.update(e._model,s.elapsed()),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),t){var n=t.provider,r=t.tokens,i=e._semanticTokensStylingService.getStyling(n);e._setDocumentSemanticTokens(n,r||null,i,o)}else e._setDocumentSemanticTokens(null,null,null,o)}),(function(t){t&&(d.n2(t)||"string"===typeof t.message&&-1!==t.message.indexOf("busy"))||d.dL(t),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),(o.length>0||e._providersChangedDuringRequest)&&(e._fetchDocumentSemanticTokens.isScheduled()||e._fetchDocumentSemanticTokens.schedule(e._debounceInformation.get(e._model)))}))}else this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1)}},{key:"_setDocumentSemanticTokens",value:function(e,t,i,o){var a=this,s=this._currentDocumentResponse,u=function(){(o.length>0||a._providersChangedDuringRequest)&&!a._fetchDocumentSemanticTokens.isScheduled()&&a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&t&&e.releaseDocumentSemanticTokens(t.resultId);else if(e&&i){if(!t)return this._model.tokenization.setSemanticTokens(null,!0),void u();if((0,_.Vj)(t)){if(!s)return void this._model.tokenization.setSemanticTokens(null,!0);if(0===t.edits.length)t={resultId:t.resultId,data:s.data};else{var c,l=0,d=(0,r.Z)(t.edits);try{for(d.s();!(c=d.n()).done;){var h=c.value;l+=(h.data?h.data.length:0)-h.deleteCount}}catch(L){d.e(L)}finally{d.f()}for(var v=s.data,p=new Uint32Array(v.length+l),f=v.length,m=p.length,b=t.edits.length-1;b>=0;b--){var k=t.edits[b];if(k.start>v.length)return i.warnInvalidEditStart(s.resultId,t.resultId,b,k.start,v.length),void this._model.tokenization.setSemanticTokens(null,!0);var y=f-(k.start+k.deleteCount);y>0&&(n._copy(v,f-y,p,m-y,y),m-=y),k.data&&(n._copy(k.data,0,p,m-k.data.length,k.data.length),m-=k.data.length),f=k.start}f>0&&n._copy(v,0,p,0,f),t={resultId:t.resultId,data:p}}}if((0,_.Vl)(t)){this._currentDocumentResponse=new I(e,t.resultId,t.data);var S=(0,g.h)(t,i,this._model.getLanguageId());if(o.length>0){var C,R=(0,r.Z)(o);try{for(R.s();!(C=R.n()).done;){var w,x=C.value,D=(0,r.Z)(S);try{for(D.s();!(w=D.n()).done;){var Z,T=w.value,N=(0,r.Z)(x.changes);try{for(N.s();!(Z=N.n()).done;){var P=Z.value;T.applyEdit(P.range,P.text)}}catch(L){N.e(L)}finally{N.f()}}}catch(L){D.e(L)}finally{D.f()}}}catch(L){R.e(L)}finally{R.f()}}this._model.tokenization.setSemanticTokens(S,!0)}else this._model.tokenization.setSemanticTokens(null,!0);u()}else this._model.tokenization.setSemanticTokens(null,!1)}}],[{key:"_copy",value:function(e,t,n,r,i){i=Math.min(i,n.length-r,e.length-t);for(var o=0;o<i;o++)n[r+o]=e[t+o]}}]),n}(l.JT);Z.REQUEST_MIN_DELAY=300,Z.REQUEST_MAX_DELAY=2e3,Z=w([x(1,S.s),x(2,m.XE),x(3,b.A),x(4,y.p)],Z);var I=function(){function e(t,n,r){(0,i.Z)(this,e),this.provider=t,this.resultId=n,this.data=r}return(0,o.Z)(e,[{key:"dispose",value:function(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}]),e}();(0,C.y)(D)},60595:function(e,t,n){n.r(t);var r=n(37762),i=n(15671),o=n(43144),a=n(60136),s=n(27277),u=n(32590),c=n(10526),l=n(98351),d=n(26486),h=n(30832),v=n(13104),p=n(64644),f=n(3553),m=n(22847),g=n(9197),_=n(45161),b=n(48606),k=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},y=function(e,t){return function(n,r){t(n,r,e)}},S=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r,o,a,s,c){var l;(0,i.Z)(this,n),(l=t.call(this))._semanticTokensStylingService=r,l._themeService=o,l._configurationService=a,l._editor=e,l._provider=c.documentRangeSemanticTokensProvider,l._debounceInformation=s.for(l._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),l._tokenizeViewport=l._register(new u.pY((function(){return l._tokenizeViewportNow()}),100)),l._outstandingRequests=[];var d=function(){l._editor.hasModel()&&l._tokenizeViewport.schedule(l._debounceInformation.get(l._editor.getModel()))};return l._register(l._editor.onDidScrollChange((function(){d()}))),l._register(l._editor.onDidChangeModel((function(){l._cancelAll(),d()}))),l._register(l._editor.onDidChangeModelContent((function(e){l._cancelAll(),d()}))),l._register(l._provider.onDidChange((function(){l._cancelAll(),d()}))),l._register(l._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration(h.e)&&(l._cancelAll(),d())}))),l._register(l._themeService.onDidColorThemeChange((function(){l._cancelAll(),d()}))),d(),l}return(0,o.Z)(n,[{key:"_cancelAll",value:function(){var e,t=(0,r.Z)(this._outstandingRequests);try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this._outstandingRequests=[]}},{key:"_removeOutstandingRequest",value:function(e){for(var t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}},{key:"_tokenizeViewportNow",value:function(){var e=this;if(this._editor.hasModel()){var t=this._editor.getModel();if(!t.tokenization.hasCompleteSemanticTokens())if((0,h.t)(t,this._themeService,this._configurationService))if((0,d.KO)(this._provider,t)){var n=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(n.map((function(n){return e._requestRange(t,n)})))}else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1);else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1)}}},{key:"_requestRange",value:function(e,t){var n=this,r=e.getVersionId(),i=(0,u.PG)((function(r){return Promise.resolve((0,d.OG)(n._provider,e,t,r))})),o=new g.G(!1);return i.then((function(i){if(n._debounceInformation.update(e,o.elapsed()),i&&i.tokens&&!e.isDisposed()&&e.getVersionId()===r){var a=i.provider,s=i.tokens,u=n._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,(0,v.h)(s,u,e.getLanguageId()))}})).then((function(){return n._removeOutstandingRequest(i)}),(function(){return n._removeOutstandingRequest(i)})),i}}]),n}(c.JT);S.ID="editor.contrib.viewportSemanticTokens",S=k([y(1,b.s),y(2,f.XE),y(3,p.Ui),y(4,m.A),y(5,_.p)],S),(0,l._K)(S.ID,S,1)},26486:function(e,t,n){n.d(t,{Jc:function(){return k},KO:function(){return w},ML:function(){return S},OG:function(){return D},Vj:function(){return _},Vl:function(){return g}});var r=n(37762),i=n(74165),o=n(43144),a=n(15671),s=n(32124),u=n(68552),c=n(50605),l=n(74463),d=n(89850),h=n(64272),v=n(25778),p=n(30788),f=n(45161),m=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function g(e){return e&&!!e.data}function _(e){return e&&Array.isArray(e.edits)}var b=(0,o.Z)((function e(t,n,r){(0,a.Z)(this,e),this.provider=t,this.tokens=n,this.error=r}));function k(e,t){return e.has(t)}function y(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}function S(e,t,n,o,a){return m(this,void 0,void 0,(0,i.Z)().mark((function s(){var u,c,l,d,h,v=this;return(0,i.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return u=y(e,t),s.next=3,Promise.all(u.map((function(e){return m(v,void 0,void 0,(0,i.Z)().mark((function r(){var s,u;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=null,r.prev=1,r.next=4,e.provideDocumentSemanticTokens(t,e===n?o:null,a);case 4:s=r.sent,r.next=11;break;case 7:r.prev=7,r.t0=r.catch(1),u=r.t0,s=null;case 11:return s&&(g(s)||_(s))||(s=null),r.abrupt("return",new b(e,s,u));case 13:case"end":return r.stop()}}),r,null,[[1,7]])})))})));case 3:c=s.sent,l=(0,r.Z)(c),s.prev=5,l.s();case 7:if((d=l.n()).done){s.next=15;break}if(!(h=d.value).error){s.next=11;break}throw h.error;case 11:if(!h.tokens){s.next=13;break}return s.abrupt("return",h);case 13:s.next=7;break;case 15:s.next=20;break;case 17:s.prev=17,s.t0=s.catch(5),l.e(s.t0);case 20:return s.prev=20,l.f(),s.finish(20);case 23:if(!(c.length>0)){s.next=25;break}return s.abrupt("return",c[0]);case 25:return s.abrupt("return",null);case 26:case"end":return s.stop()}}),s,null,[[5,17,20,23]])})))}function C(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:null}var R=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.provider=t,this.tokens=n}));function w(e,t){return e.has(t)}function x(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}function D(e,t,n,o){return m(this,void 0,void 0,(0,i.Z)().mark((function a(){var s,c,l,d,h,v=this;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=x(e,t),a.next=3,Promise.all(s.map((function(e){return m(v,void 0,void 0,(0,i.Z)().mark((function r(){var a;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.provideDocumentRangeSemanticTokens(t,n,o);case 3:a=r.sent,r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),(0,u.Cp)(r.t0),a=null;case 10:return a&&g(a)||(a=null),r.abrupt("return",new R(e,a));case 12:case"end":return r.stop()}}),r,null,[[0,6]])})))})));case 3:c=a.sent,l=(0,r.Z)(c),a.prev=5,l.s();case 7:if((d=l.n()).done){a.next=13;break}if(!(h=d.value).tokens){a.next=11;break}return a.abrupt("return",h);case 11:a.next=7;break;case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(5),l.e(a.t0);case 18:return a.prev=18,l.f(),a.finish(18);case 21:if(!(c.length>0)){a.next=23;break}return a.abrupt("return",c[0]);case 23:return a.abrupt("return",null);case 24:case"end":return a.stop()}}),a,null,[[5,15,18,21]])})))}d.P.registerCommand("_provideDocumentSemanticTokensLegend",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(void 0,void 0,void 0,(0,i.Z)().mark((function t(){var r,o,a,s,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n[0],(0,h.p_)(r instanceof c.o),o=e.get(l.q).getModel(r)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(a=e.get(f.p),s=a.documentSemanticTokensProvider,u=C(s,o)){t.next=9;break}return t.abrupt("return",e.get(d.H).executeCommand("_provideDocumentRangeSemanticTokensLegend",r));case 9:return t.abrupt("return",u[0].getLegend());case 10:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentSemanticTokens",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(void 0,void 0,void 0,(0,i.Z)().mark((function t(){var r,o,a,u,p,m,_,b;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n[0],(0,h.p_)(r instanceof c.o),o=e.get(l.q).getModel(r)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(a=e.get(f.p),k(u=a.documentSemanticTokensProvider,o)){t.next=8;break}return t.abrupt("return",e.get(d.H).executeCommand("_provideDocumentRangeSemanticTokens",r,o.getFullModelRange()));case 8:return t.next=10,S(u,o,null,null,s.T.None);case 10:if(p=t.sent){t.next=13;break}return t.abrupt("return",void 0);case 13:if(m=p.provider,(_=p.tokens)&&g(_)){t.next=16;break}return t.abrupt("return",void 0);case 16:return b=(0,v.C)({id:0,type:"full",data:_.data}),_.resultId&&m.releaseDocumentSemanticTokens(_.resultId),t.abrupt("return",b);case 19:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentRangeSemanticTokensLegend",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(void 0,void 0,void 0,(0,i.Z)().mark((function t(){var r,o,a,u,d,v,m;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n[0],o=n[1],(0,h.p_)(r instanceof c.o),a=e.get(l.q).getModel(r)){t.next=5;break}return t.abrupt("return",void 0);case 5:if(u=e.get(f.p),d=u.documentRangeSemanticTokensProvider,0!==(v=x(d,a)).length){t.next=9;break}return t.abrupt("return",void 0);case 9:if(1!==v.length){t.next=11;break}return t.abrupt("return",v[0].getLegend());case 11:if(o&&p.e.isIRange(o)){t.next=14;break}return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),t.abrupt("return",v[0].getLegend());case 14:return t.next=16,D(d,a,p.e.lift(o),s.T.None);case 16:if(m=t.sent){t.next=19;break}return t.abrupt("return",void 0);case 19:return t.abrupt("return",m.provider.getLegend());case 20:case"end":return t.stop()}}),t)})))})),d.P.registerCommand("_provideDocumentRangeSemanticTokens",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(void 0,void 0,void 0,(0,i.Z)().mark((function t(){var r,o,a,u,d,m;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n[0],o=n[1],(0,h.p_)(r instanceof c.o),(0,h.p_)(p.e.isIRange(o)),a=e.get(l.q).getModel(r)){t.next=6;break}return t.abrupt("return",void 0);case 6:return u=e.get(f.p),d=u.documentRangeSemanticTokensProvider,t.next=9,D(d,a,p.e.lift(o),s.T.None);case 9:if((m=t.sent)&&m.tokens){t.next=12;break}return t.abrupt("return",void 0);case 12:return t.abrupt("return",(0,v.C)({id:0,type:"full",data:m.tokens.data}));case 13:case"end":return t.stop()}}),t)})))}))},30832:function(e,t,n){n.d(t,{e:function(){return r},t:function(){return i}});var r="editor.semanticHighlighting";function i(e,t,n){var i,o=null===(i=n.getValue(r,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===i?void 0:i.enabled;return"boolean"===typeof o?o:t.getColorTheme().semanticHighlighting}}}]);
//# sourceMappingURL=monaco-editor-vendor.e8a66816.b3d89f54.js.map