"use strict";(self.webpackChunk_uiw_react_monacoeditor=self.webpackChunk_uiw_react_monacoeditor||[]).push([[729],{55584:function(e,t,n){n.r(t),n.d(t,{DefinitionAction:function(){return le},SymbolNavigationAction:function(){return de},SymbolNavigationAnchor:function(){return ce}});var i=n(11752),r=n(61120),o=n(60136),a=n(43668),s=n(15671),u=n(43144),c=n(87757),d=n.n(c),l=n(12426),h=n(58340),f=n(32590),g=n(27924),v=n(4827),p=n(64272),_=n(50605),m=n(50004),y=n(21872),k=n(98351),b=n(56692),w=n(77087),C=n(10849),S=n(30788),D=n(44474),M=n(49500),N=n(57317),I=n(62302),R=n(37762),P=n(28941),x=n(10526),Z=n(34408),L=n(87697),T=n(49525),O=n(11280),A=n(8850),E=n(45753),W=n(90031),F=n(13023),H=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},V=function(e,t){return function(n,i){t(n,i,e)}},K=new T.uy("hasSymbols",!1,(0,L.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),U=(0,A.yh)("ISymbolNavigationService"),B=function(){function e(t,n,i,r){(0,s.Z)(this,e),this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=K.bindTo(t)}return(0,u.Z)(e,[{key:"reset",value:function(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}},{key:"put",value:function(e){var t=this,n=e.parent.parent;if(n.references.length<=1)this.reset();else{this._currentModel=n,this._currentIdx=n.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new G(this._editorService),r=i.onDidChange((function(e){if(!t._ignoreEditorChange){var i=t._editorService.getActiveCodeEditor();if(i){var r=i.getModel(),o=i.getPosition();if(r&&o){var a,s=!1,u=!1,c=(0,R.Z)(n.references);try{for(c.s();!(a=c.n()).done;){var d=a.value;if((0,Z.Xy)(d.uri,r.uri))s=!0,u=u||S.e.containsPosition(d.range,o);else if(s)break}}catch(l){c.e(l)}finally{c.f()}s&&u||t.reset()}}}}));this._currentState=(0,x.F8)(i,r)}}},{key:"revealNext",value:function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var n=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:n.uri,options:{selection:S.e.collapseToStart(n.range),selectionRevealType:3}},e).finally((function(){t._ignoreEditorChange=!1}))}},{key:"_showMessage",value:function(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();var t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?(0,L.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,L.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}}]),e}();B=H([V(0,T.i6),V(1,b.$),V(2,F.lT),V(3,E.d)],B),(0,O.z)(U,B,!0),(0,k.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:K,kbOpts:{weight:100,primary:70}})}return(0,u.Z)(n,[{key:"runEditorCommand",value:function(e,t){return e.get(U).revealNext(t)}}]),n}(k._l))),W.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:K,primary:9,handler:function(e){e.get(U).reset()}});var G=function(){function e(t){(0,s.Z)(this,e),this._listener=new Map,this._disposables=new x.SL,this._onDidChange=new P.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}return(0,u.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose(),(0,x.B9)(this._listener.values())}},{key:"_onDidAddEditor",value:function(e){var t=this;this._listener.set(e,(0,x.F8)(e.onDidChangeCursorPosition((function(n){return t._onDidChange.fire({editor:e})})),e.onDidChangeModelContent((function(n){return t._onDidChange.fire({editor:e})}))))}},{key:"_onDidRemoveEditor",value:function(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}}]),e}();G=H([V(0,b.$)],G);var z,Q,j,q,J,Y,X,$,ee=n(94719),te=n(99892),ne=n(23911),ie=n(89850),re=n(26562),oe=n(66900),ae=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};ne.BH.appendMenuItem(ne.eH.EditorContext,{submenu:ne.eH.EditorContextPeek,title:L.N("peek.submenu","Peek"),group:"navigation",order:100});var se=new Set;function ue(e){var t=new e;return(0,k.QG)(t),se.add(t.id),t}var ce=function(){function e(t,n){(0,s.Z)(this,e),this.model=t,this.position=n}return(0,u.Z)(e,null,[{key:"is",value:function(t){return!(!t||"object"!==typeof t)&&(t instanceof e||!(!C.L.isIPosition(t.position)||!t.model))}}]),e}(),de=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i){var r;return(0,s.Z)(this,n),(r=t.call(this,i)).configuration=e,r}return(0,u.Z)(n,[{key:"run",value:function(e,t,n){var i=this;if(!t.hasModel())return Promise.resolve(void 0);var r=e.get(F.lT),o=e.get(b.$),a=e.get(re.ek),s=e.get(U),u=t.getModel(),c=t.getPosition(),l=ce.is(n)?n:new ce(u,c),g=new m.Dl(t,5),v=(0,f.eP)(this._getLocationModel(l.model,l.position,g.token),g.token).then((function(e){return ae(i,void 0,void 0,d().mark((function n(){var i,r,a,l,f;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!g.token.isCancellationRequested){n.next=2;break}return n.abrupt("return");case 2:if((0,h.Z9)(e.ariaMessage),e.referenceAt(u.uri,c)&&(a=this._getAlternativeCommand(t))!==this.id&&se.has(a)&&(r=t.getAction(a)),0!==(l=e.references.length)){n.next=9;break}this.configuration.muteMessage||(f=u.getWordAtPosition(c),null===(i=ee.O.get(t))||void 0===i||i.showMessage(this._getNoResultFoundMessage(f),c)),n.next=14;break;case 9:if(1!==l||!r){n.next=13;break}r.run(),n.next=14;break;case 13:return n.abrupt("return",this._onResult(o,s,t,e));case 14:case"end":return n.stop()}}),n,this)})))}),(function(e){r.error(e)})).finally((function(){g.dispose()}));return a.showWhile(v,250),v}},{key:"_onResult",value:function(e,t,n,i){return ae(this,void 0,void 0,d().mark((function r(){var o,a,s,u;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this._getGoToPreference(n),n instanceof w.H||!(this.configuration.openInPeek||"peek"===o&&i.references.length>1)){r.next=5;break}this._openInPeek(n,i),r.next=12;break;case 5:return a=i.firstReference(),s=i.references.length>1&&"gotoAndPeek"===o,r.next=9,this._openReference(n,e,a,this.configuration.openToSide,!s);case 9:u=r.sent,s&&u?this._openInPeek(u,i):i.dispose(),"goto"===o&&t.put(a);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"_openReference",value:function(e,t,n,i,r){return ae(this,void 0,void 0,d().mark((function o(){var a,s,u,c;return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=void 0,(0,M.vx)(n)&&(a=n.targetSelectionRange),a||(a=n.range),a){o.next=5;break}return o.abrupt("return",void 0);case 5:return o.next=7,t.openCodeEditor({resource:n.uri,options:{selection:S.e.collapseToStart(a),selectionRevealType:3}},e,i);case 7:if(s=o.sent){o.next=10;break}return o.abrupt("return",void 0);case 10:return r&&(u=s.getModel(),c=s.deltaDecorations([],[{range:a,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]),setTimeout((function(){s.getModel()===u&&s.deltaDecorations(c,[])}),350)),o.abrupt("return",s);case 12:case"end":return o.stop()}}),o)})))}},{key:"_openInPeek",value:function(e,t){var n=N.J.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),(0,f.PG)((function(e){return Promise.resolve(t)})),this.configuration.openInPeek):t.dispose()}}]),n}(k.R6),le=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.nD)(e,t,n);case 3:return i.t1=i.sent,i.t2=L.N("def.title","Definitions"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?L.N("noResultWord","No definition found for '{0}'",e.word):L.N("generic.noResults","No definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleDefinitions}}]),n}(de),he=v.$L&&!l.isStandalone?2118:70;ue(((z=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,s.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:L.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:T.Ao.and(D.u.hasDefinitionProvider,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:he,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),ie.P0.registerCommandAlias("editor.action.goToDeclaration",n.id),e}return(0,u.Z)(n)}(le)).id="editor.action.revealDefinition",z)),ue(((Q=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,s.Z)(this,n),e=t.call(this,{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:n.id,label:L.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:T.Ao.and(D.u.hasDefinitionProvider,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:(0,g.gx)(2089,he),weight:100}}),ie.P0.registerCommandAlias("editor.action.openDeclarationToTheSide",n.id),e}return(0,u.Z)(n)}(le)).id="editor.action.revealDefinitionAside",Q)),ue(((j=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,s.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.id,label:L.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:T.Ao.and(D.u.hasDefinitionProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:2}}),ie.P0.registerCommandAlias("editor.action.previewDeclaration",n.id),e}return(0,u.Z)(n)}(le)).id="editor.action.peekDefinition",j));var fe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.zq)(e,t,n);case 3:return i.t1=i.sent,i.t2=L.N("decl.title","Declarations"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?L.N("decl.noResultWord","No declaration found for '{0}'",e.word):L.N("decl.generic.noResults","No declaration found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeDeclarationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleDeclarations}}]),n}(de);ue(((q=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:L.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:T.Ao.and(D.u.hasDeclarationProvider,D.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?L.N("decl.noResultWord","No declaration found for '{0}'",e.word):L.N("decl.generic.noResults","No declaration found")}}]),n}(fe)).id="editor.action.revealDeclaration",q)),ue(function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:L.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:T.Ao.and(D.u.hasDeclarationProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:3}})}return(0,u.Z)(n)}(fe));var ge=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.L3)(e,t,n);case 3:return i.t1=i.sent,i.t2=L.N("typedef.title","Type Definitions"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?L.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):L.N("goToTypeDefinition.generic.noResults","No type definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeTypeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleTypeDefinitions}}]),n}(de);ue(((J=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:L.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:T.Ao.and(D.u.hasTypeDefinitionProvider,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}return(0,u.Z)(n)}(ge)).ID="editor.action.goToTypeDefinition",J)),ue(((Y=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:L.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:T.Ao.and(D.u.hasTypeDefinitionProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:4}})}return(0,u.Z)(n)}(ge)).ID="editor.action.peekTypeDefinition",Y));var ve=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.f4)(e,t,n);case 3:return i.t1=i.sent,i.t2=L.N("impl.title","Implementations"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?L.N("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):L.N("goToImplementation.generic.noResults","No implementation found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeImplementationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleImplementations}}]),n}(de);ue(((X=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:L.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:T.Ao.and(D.u.hasImplementationProvider,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return(0,u.Z)(n)}(ve)).ID="editor.action.goToImplementation",X)),ue((($=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:L.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:T.Ao.and(D.u.hasImplementationProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:5}})}return(0,u.Z)(n)}(ve)).ID="editor.action.peekImplementation",$));var pe=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e?L.N("references.no","No references found for '{0}'",e.word):L.N("references.noGeneric","No references found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(51).alternativeReferenceCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(51).multipleReferences}}]),n}(de);ue(function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:L.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:T.Ao.and(D.u.hasReferenceProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:D.u.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.aA)(e,t,!0,n);case 3:return i.t1=i.sent,i.t2=L.N("ref.title","References"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}}]),n}(pe)),ue(function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:L.N("references.action.label","Peek References"),alias:"Peek References",precondition:T.Ao.and(D.u.hasReferenceProvider,te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:ne.eH.EditorContextPeek,group:"peek",order:6}})}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=I.oQ,i.next=3,(0,oe.aA)(e,t,!1,n);case 3:return i.t1=i.sent,i.t2=L.N("ref.title","References"),i.abrupt("return",new i.t0(i.t1,i.t2));case 6:case"end":return i.stop()}}),i)})))}}]),n}(pe));var _e=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,i,r){var o;return(0,s.Z)(this,n),(o=t.call(this,e,{id:"editor.action.goToLocation",label:L.N("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:T.Ao.and(te.Jy.notInPeekEditor,D.u.isInWalkThroughSnippet.toNegated())}))._references=i,o._gotoMultipleBehaviour=r,o}return(0,u.Z)(n,[{key:"_getLocationModel",value:function(e,t,n){return ae(this,void 0,void 0,d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new I.oQ(this._references,L.N("generic.title","Locations")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&L.N("generic.noResult","No results for '{0}'",e.word)||""}},{key:"_getGoToPreference",value:function(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(51).multipleReferences}},{key:"_getAlternativeCommand",value:function(){return""}}]),n}(de);ie.P0.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:_.o},{name:"position",description:"The position at which to start",constraint:C.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(e,t,n,c,l,h,f){return ae(void 0,void 0,void 0,d().mark((function g(){var v,m;return d().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return(0,p.p_)(_.o.isUri(t)),(0,p.p_)(C.L.isIPosition(n)),(0,p.p_)(Array.isArray(c)),(0,p.p_)("undefined"===typeof l||"string"===typeof l),(0,p.p_)("undefined"===typeof f||"boolean"===typeof f),v=e.get(b.$),d.next=8,v.openCodeEditor({resource:t},v.getFocusedCodeEditor());case 8:if(m=d.sent,!(0,y.CL)(m)){d.next=13;break}return m.setPosition(n),m.revealPositionInCenterIfOutsideViewport(n,0),d.abrupt("return",m.invokeWithinContext((function(e){var t=new(function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return h||(0,i.Z)((0,r.Z)(n.prototype),"_getNoResultFoundMessage",this).call(this,e)}}]),n}(_e))({muteMessage:!Boolean(h),openInPeek:Boolean(f),openToSide:!1},c,l);e.get(A.TG).invokeFunction(t.run.bind(t),m)})));case 13:case"end":return d.stop()}}),g)})))}}),ie.P0.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:_.o},{name:"position",description:"The position at which to start",constraint:C.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:function(e,t,n,i,r){return ae(void 0,void 0,void 0,d().mark((function o(){return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.get(ie.Hy).executeCommand("editor.action.goToLocations",t,n,i,r,void 0,!0);case 1:case"end":return o.stop()}}),o)})))}}),ie.P0.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){(0,p.p_)(_.o.isUri(t)),(0,p.p_)(C.L.isIPosition(n));var i=e.get(b.$);return i.openCodeEditor({resource:t},i.getFocusedCodeEditor()).then((function(e){if((0,y.CL)(e)&&e.hasModel()){var t=N.J.get(e);if(t){var i=(0,f.PG)((function(t){return(0,oe.aA)(e.getModel(),C.L.lift(n),!1,t).then((function(e){return new I.oQ(e,L.N("ref.title","References"))}))})),r=new S.e(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(r,i,!1))}}}))}}),ie.P0.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),ne.BH.appendMenuItems([{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:L.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:L.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:L.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:L.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:ne.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:L.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},66900:function(e,t,n){n.d(t,{nD:function(){return g},zq:function(){return v},f4:function(){return p},L3:function(){return _},aA:function(){return m}});var i=n(93433),r=n(37762),o=n(87757),a=n.n(o),s=n(32124),u=n(68552),c=n(98351),d=n(49500),l=n(62302),h=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function f(e,t,n,o){var a=n.ordered(e).map((function(n){return Promise.resolve(o(n,e,t)).then(void 0,(function(e){(0,u.Cp)(e)}))}));return Promise.all(a).then((function(e){var t,n=[],o=(0,r.Z)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;Array.isArray(a)?n.push.apply(n,(0,i.Z)(a)):a&&n.push(a)}}catch(s){o.e(s)}finally{o.f()}return n}))}function g(e,t,n){return f(e,t,d.Ct,(function(e,t,i){return e.provideDefinition(t,i,n)}))}function v(e,t,n){return f(e,t,d.RN,(function(e,t,i){return e.provideDeclaration(t,i,n)}))}function p(e,t,n){return f(e,t,d.vI,(function(e,t,i){return e.provideImplementation(t,i,n)}))}function _(e,t,n){return f(e,t,d.tA,(function(e,t,i){return e.provideTypeDefinition(t,i,n)}))}function m(e,t,n,i){var r=this;return f(e,t,d.FL,(function(e,t,o){return h(r,void 0,void 0,a().mark((function r(){var s,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.provideReferences(t,o,{includeDeclaration:!0},i);case 2:if(s=r.sent,n&&s&&2===s.length){r.next=5;break}return r.abrupt("return",s);case 5:return r.next=7,e.provideReferences(t,o,{includeDeclaration:!1},i);case 7:if(!(u=r.sent)||1!==u.length){r.next=10;break}return r.abrupt("return",u);case 10:return r.abrupt("return",s);case 11:case"end":return r.stop()}}),r)})))}))}function y(e){return h(this,void 0,void 0,a().mark((function t(){var n,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,i=new l.oQ(n,""),r=i.references.map((function(e){return e.link})),i.dispose(),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))}(0,c.sb)("_executeDefinitionProvider",(function(e,t){return y((function(){return g(e,t,s.T.None)}))})),(0,c.sb)("_executeDeclarationProvider",(function(e,t){return y((function(){return v(e,t,s.T.None)}))})),(0,c.sb)("_executeImplementationProvider",(function(e,t){return y((function(){return p(e,t,s.T.None)}))})),(0,c.sb)("_executeTypeDefinitionProvider",(function(e,t){return y((function(){return _(e,t,s.T.None)}))})),(0,c.sb)("_executeReferenceProvider",(function(e,t){return y((function(){return m(e,t,!1,s.T.None)}))}))},61826:function(e,t,n){n.d(t,{yN:function(){return v}});var i=n(60136),r=n(43668),o=n(43144),a=n(15671),s=n(28941),u=n(10526),c=n(4827);function d(e,t){return!!e[t]}var l=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.target=t.target,this.hasTriggerModifier=d(t.event,n.triggerModifier),this.hasSideBySideModifier=d(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1})),h=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=d(t,n.triggerModifier)})),f=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}]),e}();function g(e){return"altKey"===e?c.dz?new f(57,"metaKey",6,"altKey"):new f(5,"ctrlKey",6,"altKey"):c.dz?new f(6,"altKey",57,"metaKey"):new f(6,"altKey",5,"ctrlKey")}var v=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this))._onMouseMoveOrRelevantKeyDown=i._register(new s.Q5),i.onMouseMoveOrRelevantKeyDown=i._onMouseMoveOrRelevantKeyDown.event,i._onExecute=i._register(new s.Q5),i.onExecute=i._onExecute.event,i._onCancel=i._register(new s.Q5),i.onCancel=i._onCancel.event,i._editor=e,i._opts=g(i._editor.getOption(70)),i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._register(i._editor.onDidChangeConfiguration((function(e){if(e.hasChanged(70)){var t=g(i._editor.getOption(70));if(i._opts.equals(t))return;i._opts=t,i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._onCancel.fire()}}))),i._register(i._editor.onMouseMove((function(e){return i._onEditorMouseMove(new l(e,i._opts))}))),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(new l(e,i._opts))}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(new l(e,i._opts))}))),i._register(i._editor.onKeyDown((function(e){return i._onEditorKeyDown(new h(e,i._opts))}))),i._register(i._editor.onKeyUp((function(e){return i._onEditorKeyUp(new h(e,i._opts))}))),i._register(i._editor.onMouseDrag((function(){return i._resetHandler()}))),i._register(i._editor.onDidChangeCursorSelection((function(e){return i._onDidChangeCursorSelection(e)}))),i._register(i._editor.onDidChangeModel((function(e){return i._resetHandler()}))),i._register(i._editor.onDidChangeModelContent((function(){return i._resetHandler()}))),i._register(i._editor.onDidScrollChange((function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&i._resetHandler()}))),i}return(0,o.Z)(n,[{key:"_onDidChangeCursorSelection",value:function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}},{key:"_onEditorMouseMove",value:function(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}},{key:"_onEditorMouseDown",value:function(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}},{key:"_onEditorMouseUp",value:function(e){var t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}},{key:"_onEditorKeyDown",value:function(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}},{key:"_onEditorKeyUp",value:function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}},{key:"_resetHandler",value:function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}]),n}(u.JT)},24034:function(e,t,n){n.r(t),n.d(t,{GotoDefinitionAtPositionEditorContribution:function(){return I}});var i=n(29439),r=n(15671),o=n(43144),a=n(32590),s=n(68552),u=n(67277),c=n(10526),d=n(64272),l=n(50004),h=n(98351),f=n(10849),g=n(30788),v=n(49500),p=n(79876),_=n(26777),m=n(61826),y=n(99892),k=n(87697),b=n(49525),w=n(6574),C=n(3553),S=n(55584),D=n(66900),M=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},N=function(e,t){return function(n,i){t(n,i,e)}},I=function(){function e(t,n,o){var a=this;(0,r.Z)(this,e),this.textModelResolverService=n,this.languageService=o,this.toUnhook=new c.SL,this.toUnhookForKeyboard=new c.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t;var u=new m.yN(t);this.toUnhook.add(u),this.toUnhook.add(u.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];a.startFindDefinitionFromMouse(n,(0,d.f6)(r))}))),this.toUnhook.add(u.onExecute((function(e){a.isEnabled(e)&&a.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((function(){a.removeLinkDecorations()}),(function(e){a.removeLinkDecorations(),(0,s.dL)(e)}))}))),this.toUnhook.add(u.onCancel((function(){a.removeLinkDecorations(),a.currentWordAtPosition=null})))}return(0,o.Z)(e,[{key:"startFindDefinitionFromCursor",value:function(e){var t=this;return this.startFindDefinition(e).then((function(){t.toUnhookForKeyboard.add(t.editor.onDidChangeCursorPosition((function(){t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear()}))),t.toUnhookForKeyboard.add(t.editor.onKeyDown((function(e){e&&(t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear())})))}))}},{key:"startFindDefinitionFromMouse",value:function(e,t){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var n=e.target.position;this.startFindDefinition(n)}}},{key:"startFindDefinition",value:function(e){var t,n=this;this.toUnhookForKeyboard.clear();var i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;var r=new l.yy(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,a.PG)((function(t){return n.findDefinition(e,t)})),this.previousPromise.then((function(t){if(t&&t.length&&r.validate(n.editor))if(t.length>1)n.addDecoration(new g.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new u.W5).appendText(k.N("multipleResults","Click to show {0} definitions.",t.length)));else{var o=t[0];if(!o.uri)return;n.textModelResolverService.createModelReference(o.uri).then((function(t){if(t.object&&t.object.textEditorModel){var r=t.object.textEditorModel,a=o.range.startLineNumber;if(a<1||a>r.getLineCount())t.dispose();else{var s,c=n.getPreviewValue(r,a,o);s=o.originSelectionRange?g.e.lift(o.originSelectionRange):new g.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);var d=n.languageService.guessLanguageIdByFilepathOrFirstLine(r.uri);n.addDecoration(s,(new u.W5).appendCodeblock(d||"",c)),t.dispose()}}else t.dispose()}))}else n.removeLinkDecorations()})).then(void 0,s.dL)}},{key:"getPreviewValue",value:function(t,n,i){var r=i.targetSelectionRange?i.range:this.getPreviewRangeBasedOnBrackets(t,n);return r.endLineNumber-r.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,r)}},{key:"stripIndentationFromPreviewRange",value:function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),r=t+1;r<n.endLineNumber;r++){var o=e.getLineFirstNonWhitespaceColumn(r);i=Math.min(i,o)}return e.getValueInRange(n).replace(new RegExp("^\\s{".concat(i-1,"}"),"gm"),"").trim()}},{key:"getPreviewRangeBasedOnIndentation",value:function(t,n){for(var i=t.getLineFirstNonWhitespaceColumn(n),r=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),o=n+1;o<r;o++){if(i===t.getLineFirstNonWhitespaceColumn(o))break}return new g.e(n,1,o+1,1)}},{key:"getPreviewRangeBasedOnBrackets",value:function(t,n){for(var i=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),r=[],o=!0,a=t.bracketPairs.findNextBracket(new f.L(n,1));null!==a;){if(0===r.length)r.push(a);else{var s=r[r.length-1];if(s.open[0]===a.open[0]&&s.isOpen&&!a.isOpen?r.pop():r.push(a),0===r.length){if(!o)return new g.e(n,1,a.range.endLineNumber+1,1);o=!1}}var u=t.getLineMaxColumn(n),c=a.range.endLineNumber,d=a.range.endColumn;if(u===a.range.endColumn&&(c++,d=1),c>i)return new g.e(n,1,i+1,1);a=t.bracketPairs.findNextBracket(new f.L(c,d))}return new g.e(n,1,i+1,1)}},{key:"addDecoration",value:function(e,t){var n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}},{key:"removeLinkDecorations",value:function(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}},{key:"isEnabled",value:function(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&v.Ct.has(this.editor.getModel())}},{key:"findDefinition",value:function(e,t){var n=this.editor.getModel();return n?(0,D.nD)(n,e,t):Promise.resolve(null)}},{key:"gotoDefinition",value:function(e,t){var n=this;return this.editor.setPosition(e),this.editor.invokeWithinContext((function(e){var i=!t&&n.editor.getOption(78)&&!n.isInPeekEditor(e);return new S.DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(e,n.editor)}))}},{key:"isInPeekEditor",value:function(e){var t=e.get(b.i6);return y.Jy.inPeekEditor.getValue(t)}},{key:"dispose",value:function(){this.toUnhook.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();I.ID="editor.contrib.gotodefinitionatposition",I.MAX_SOURCE_PREVIEW_LINES=8,I=M([N(1,_.S),N(2,p.O)],I),(0,h._K)(I.ID,I),(0,C.Ic)((function(e,t){var n=e.getColor(w._Yy);n&&t.addRule(".monaco-editor .goto-definition-link { color: ".concat(n," !important; }"))}))},57317:function(e,t,n){n.d(t,{J:function(){return Ce}});var i=n(15671),r=n(43144),o=n(87757),a=n.n(o),s=n(32590),u=n(68552),c=n(27924),d=n(10526),l=n(56692),h=n(10849),f=n(30788),g=n(99892),v=n(87697),p=n(89850),_=n(64644),m=n(49525),y=n(8850),k=n(90031),b=n(48379),w=n(13023),C=n(63019),S=n(62302),D=n(97326),M=n(11752),N=n(61120),I=n(60136),R=n(43668),P=n(93433),x=n(29439),Z=n(37762),L=n(53210),T=n(96622),O=n(17424),A=n(28941),E=n(16496),W=n(34408),F=n(77087),H=n(27959),V=n(89125),K=n(73833),U=n(79876),B=n(26777),G=n(67944),z=n(94811),Q=n(65149),j=n(45842),q=n(66570),J=n(45753),Y=n(27518),X=n(81660),$=n(3553),ee=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},te=function(e,t){return function(n,i){t(n,i,e)}},ne=function(){function e(t){(0,i.Z)(this,e),this._resolverService=t}return(0,r.Z)(e,[{key:"hasChildren",value:function(e){return e instanceof S.oQ||e instanceof S.F2}},{key:"getChildren",value:function(e){if(e instanceof S.oQ)return e.groups;if(e instanceof S.F2)return e.resolve(this._resolverService).then((function(e){return e.children}));throw new Error("bad tree")}}]),e}();ne=ee([te(0,B.S)],ne);var ie=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getHeight",value:function(){return 23}},{key:"getTemplateId",value:function(e){return e instanceof S.F2?se.id:ce.id}}]),e}(),re=function(){function e(t){(0,i.Z)(this,e),this._keybindingService=t}return(0,r.Z)(e,[{key:"getKeyboardNavigationLabel",value:function(e){var t;if(e instanceof S.WX){var n=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(n)return n.value}return(0,W.EZ)(e.uri)}}]),e}();re=ee([te(0,J.d)],re);var oe=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getId",value:function(e){return e instanceof S.WX?e.id:e.uri}}]),e}(),ae=function(e){(0,I.Z)(n,e);var t=(0,R.Z)(n);function n(e,r,o){var a;(0,i.Z)(this,n),(a=t.call(this))._uriLabel=r;var s=document.createElement("div");return s.classList.add("reference-file"),a.file=a._register(new Q.g(s,{supportHighlights:!0})),a.badge=new G.Z(L.append(s,L.$(".count"))),a._register((0,X.WZ)(a.badge,o)),e.appendChild(s),a}return(0,r.Z)(n,[{key:"set",value:function(e,t){var n=(0,W.XX)(e.uri);this.file.setLabel((0,q.p)(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat((0,v.N)("referencesCount","{0} references",i)):this.badge.setTitleFormat((0,v.N)("referenceCount","{0} reference",i))}}]),n}(d.JT);ae=ee([te(1,Y.e),te(2,$.XE)],ae);var se=function(){function e(t){(0,i.Z)(this,e),this._instantiationService=t,this.templateId=e.id}return(0,r.Z)(e,[{key:"renderTemplate",value:function(e){return this._instantiationService.createInstance(ae,e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,(0,j.mB)(e.filterData))}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}();se.id="FileReferencesRenderer",se=ee([te(0,y.TG)],se);var ue=function(){function e(t){(0,i.Z)(this,e),this.label=new z.q(t)}return(0,r.Z)(e,[{key:"set",value:function(e,t){var n,i=null===(n=e.parent.getPreview(e))||void 0===n?void 0:n.preview(e.range);if(i&&i.value){var r=i.value,o=i.highlight;t&&!j.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,(0,j.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}else this.label.set("".concat((0,W.EZ)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}]),e}(),ce=function(){function e(){(0,i.Z)(this,e),this.templateId=e.id}return(0,r.Z)(e,[{key:"renderTemplate",value:function(e){return new ue(e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,e.filterData)}},{key:"disposeTemplate",value:function(){}}]),e}();ce.id="OneReferenceRenderer";var de=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"getWidgetAriaLabel",value:function(){return(0,v.N)("treeAriaLabel","References")}},{key:"getAriaLabel",value:function(e){return e.ariaMessage}}]),e}(),le=n(10217),he=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fe=function(e,t){return function(n,i){t(n,i,e)}},ge=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},ve=function(){function e(t,n){var r=this;(0,i.Z)(this,e),this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new d.SL,this._callOnModelChange=new d.SL,this._callOnDispose.add(this._editor.onDidChangeModel((function(){return r._onModelChanged()}))),this._onModelChanged()}return(0,r.Z)(e,[{key:"dispose",value:function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}},{key:"_onModelChanged",value:function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e){var t,n=(0,Z.Z)(this._model.references);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.uri.toString()===e.uri.toString())return void this._addDecorations(i.parent)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"_addDecorations",value:function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return n._onDecorationChanged()})));for(var i=[],r=[],o=0,a=t.children.length;o<a;o++){var s=t.children[o];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:s.range,options:e.DecorationOptions}),r.push(o))}for(var u=this._editor.deltaDecorations([],i),c=0;c<u.length;c++)this._decorations.set(u[c],t.children[r[c]])}}},{key:"_onDecorationChanged",value:function(){var e=[],t=this._editor.getModel();if(t){var n,i=(0,Z.Z)(this._decorations);try{for(i.s();!(n=i.n()).done;){var r=(0,x.Z)(n.value,2),o=r[0],a=r[1],s=t.getDecorationRange(o);if(s){var u=!1;if(!f.e.equalsRange(s,a.range)){if(f.e.spansMultipleLines(s))u=!0;else a.range.endColumn-a.range.startColumn!==s.endColumn-s.startColumn&&(u=!0);u?(this._decorationIgnoreSet.add(a.id),e.push(o)):a.range=s}}}}catch(l){i.e(l)}finally{i.f()}for(var c=0,d=e.length;c<d;c++)this._decorations.delete(e[c]);this._editor.deltaDecorations(e,[])}}},{key:"removeDecorations",value:function(){this._editor.deltaDecorations((0,P.Z)(this._decorations.keys()),[]),this._decorations.clear()}}]),e}();ve.DecorationOptions=H.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var pe=function(){function e(){(0,i.Z)(this,e),this.ratio=.7,this.heightInLines=18}return(0,r.Z)(e,null,[{key:"fromJSON",value:function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(r){}return{ratio:t||.7,heightInLines:n||18}}}]),e}(),_e=function(e){(0,I.Z)(n,e);var t=(0,R.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(b.ls),me=function(e){(0,I.Z)(n,e);var t=(0,R.Z)(n);function n(e,r,o,a,s,u,c,l,h,f,g,v){var p;return(0,i.Z)(this,n),(p=t.call(this,e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},u))._defaultTreeKeyboardSupport=r,p.layoutData=o,p._textModelResolverService=s,p._instantiationService=u,p._peekViewService=c,p._uriLabel=l,p._undoRedoService=h,p._keybindingService=f,p._languageService=g,p._languageConfigurationService=v,p._disposeOnNewModel=new d.SL,p._callOnDispose=new d.SL,p._onDidSelectReference=new A.Q5,p.onDidSelectReference=p._onDidSelectReference.event,p._dim=new L.Dimension(0,0),p._applyTheme(a.getColorTheme()),p._callOnDispose.add(a.onDidColorThemeChange(p._applyTheme.bind((0,D.Z)(p)))),p._peekViewService.addExclusiveWidget(e,(0,D.Z)(p)),p.create(),p}return(0,r.Z)(n,[{key:"dispose",value:function(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,d.B9)(this._preview),(0,d.B9)(this._previewNotAvailableMessage),(0,d.B9)(this._tree),(0,d.B9)(this._previewModelReference),this._splitView.dispose(),(0,M.Z)((0,N.Z)(n.prototype),"dispose",this).call(this)}},{key:"_applyTheme",value:function(e){var t=e.getColor(g.SC)||O.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(g.KY)||O.Il.transparent,primaryHeadingColor:e.getColor(g.IH),secondaryHeadingColor:e.getColor(g.R7)})}},{key:"show",value:function(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),(0,M.Z)((0,N.Z)(n.prototype),"show",this).call(this,e,this.layoutData.heightInLines||18)}},{key:"focusOnReferenceTree",value:function(){this._tree.domFocus()}},{key:"focusOnPreviewEditor",value:function(){this._preview.focus()}},{key:"isPreviewEditorFocused",value:function(){return this._preview.hasTextFocus()}},{key:"_onTitleClick",value:function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}},{key:"_fillBody",value:function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=L.append(e,L.$("div.messages")),L.hide(this._messageContainer),this._splitView=new T.z(e,{orientation:1}),this._previewContainer=L.append(e,L.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(F.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),L.hide(this._previewContainer),this._previewNotAvailableMessage=new H.yO(v.N("missingPreviewMessage","no preview available"),K.bd,H.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=L.append(e,L.$("div.ref-tree.inline"));var n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new de,keyboardNavigationLabelProvider:this._instantiationService.createInstance(re),identityProvider:new oe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:g.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(L.addStandardDisposableListener(this._treeContainer,"keydown",(function(e){e.equals(9)&&(t._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(_e,"ReferencesWidget",this._treeContainer,new ie,[this._instantiationService.createInstance(se),this._instantiationService.createInstance(ce)],this._instantiationService.createInstance(ne),n),this._splitView.addView({onDidChange:A.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},T.M.Distribute),this._splitView.addView({onDidChange:A.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height="".concat(t._dim.height,"px"),t._treeContainer.style.width="".concat(e,"px"),t._tree.layout(t._dim.height,e)}},T.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)}),void 0));var i=function(e,n){e instanceof S.WX&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._tree.onDidOpen((function(e){e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),L.hide(this._treeContainer)}},{key:"_onWidth",value:function(e){this._dim&&this._doLayoutBody(this._dim.height,e)}},{key:"_doLayoutBody",value:function(e,t){(0,M.Z)((0,N.Z)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._dim=new L.Dimension(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}},{key:"setSelection",value:function(e){var t=this;return this._revealReference(e,!0).then((function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))}))}},{key:"setModel",value:function(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}},{key:"_onNewModel",value:function(){var e=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v.N("noResults","No results"),L.show(this._messageContainer),Promise.resolve(void 0)):(L.hide(this._messageContainer),this._decorationsManager=new ve(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(t){return e._tree.rerender(t)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(t){var n=t.event,i=t.target;if(2===n.detail){var r=e._getFocusedReference();r&&e._onDidSelectReference.fire({element:{uri:r.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}}))),this.container.classList.add("results-loaded"),L.show(this._treeContainer),L.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}},{key:"_getFocusedReference",value:function(){var e=this._tree.getFocus(),t=(0,x.Z)(e,1)[0];return t instanceof S.WX?t:t instanceof S.F2&&t.children.length>0?t.children[0]:void 0}},{key:"revealReference",value:function(e){return ge(this,void 0,void 0,a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._revealReference(e,!1);case 2:this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_revealReference",value:function(e,t){return ge(this,void 0,void 0,a().mark((function n(){var i,r,o,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._revealedReference!==e){n.next=2;break}return n.abrupt("return");case 2:if(this._revealedReference=e,e.uri.scheme!==E.lg.inMemory?this.setTitle((0,W.Hx)(e.uri),this._uriLabel.getUriLabel((0,W.XX)(e.uri))):this.setTitle(v.N("peekView.alternateTitle","References")),i=this._textModelResolverService.createModelReference(e.uri),this._tree.getInput()!==e.parent){n.next=9;break}this._tree.reveal(e),n.next=13;break;case 9:return t&&this._tree.reveal(e.parent),n.next=12,this._tree.expand(e.parent);case 12:this._tree.reveal(e);case 13:return n.next=15,i;case 15:if(r=n.sent,this._model){n.next=19;break}return r.dispose(),n.abrupt("return");case 19:(0,d.B9)(this._previewModelReference),(o=r.object)?(s=this._preview.getModel()===o.textEditorModel?0:1,u=f.e.lift(e.range).collapseToStart(),this._previewModelReference=r,this._preview.setModel(o.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,s)):(this._preview.setModel(this._previewNotAvailableMessage),r.dispose());case 22:case"end":return n.stop()}}),n,this)})))}}]),n}(g.vk);me=he([fe(3,$.XE),fe(4,B.S),fe(5,y.TG),fe(6,g.Fw),fe(7,Y.e),fe(8,le.tJ),fe(9,J.d),fe(10,U.O),fe(11,V.c_)],me);var ye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ke=function(e,t){return function(n,i){t(n,i,e)}},be=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},we=new m.uy("referenceSearchVisible",!1,v.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),Ce=function(){function e(t,n,r,o,a,s,u,c){(0,i.Z)(this,e),this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=o,this._notificationService=a,this._instantiationService=s,this._storageService=u,this._configurationService=c,this._disposables=new d.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=we.bindTo(r)}return(0,r.Z)(e,[{key:"dispose",value:function(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}},{key:"toggleWidget",value:function(e,t,n){var i,r=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",a=pe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(me,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(v.N("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((function(){t.cancel(),r._widget&&(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget=void 0),r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(e){var t=e.element,i=e.kind;if(t)switch(i){case"open":"editor"===e.source&&r._configurationService.getValue("editor.stablePeek")||r.openReference(t,!1,!1);break;case"side":r.openReference(t,!0,!1);break;case"goto":n?r._gotoReference(t):r.openReference(t,!1,!0)}})));var s=++this._requestIdPool;t.then((function(t){var n;if(s===r._requestIdPool&&r._widget)return null===(n=r._model)||void 0===n||n.dispose(),r._model=t,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(v.N("metaTitle.N","{0} ({1})",r._model.title,r._model.references.length));var t=r._editor.getModel().uri,n=new h.L(e.startLineNumber,e.startColumn),i=r._model.nearestReference(t,n);if(i)return r._widget.setSelection(i).then((function(){r._widget&&"editor"===r._editor.getOption(77)&&r._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(function(e){r._notificationService.error(e)}))}}},{key:"changeFocusBetweenPreviewAndReferences",value:function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}},{key:"goToNextOrPreviousReference",value:function(e){return be(this,void 0,void 0,a().mark((function t(){var n,i,r,o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:if(n=this._widget.position){t.next=5;break}return t.abrupt("return");case 5:if(i=this._model.nearestReference(this._editor.getModel().uri,n)){t.next=8;break}return t.abrupt("return");case 8:return r=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused(),t.next=13,this._widget.setSelection(r);case 13:return t.next=15,this._gotoReference(r);case 15:o?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor();case 16:case"end":return t.stop()}}),t,this)})))}},{key:"revealReference",value:function(e){return be(this,void 0,void 0,a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._widget.revealReference(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"closeWidget",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,n&&this._editor.focus(),this._requestIdPool+=1}},{key:"_gotoReference",value:function(t){var n=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var i=f.e.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then((function(t){var r;if(n._ignoreModelChangeEvent=!1,t&&n._widget)if(n._editor===t)n._widget.show(i),n._widget.focusOnReferenceTree();else{var o=e.get(t),a=n._model.clone();n.closeWidget(),t.focus(),null===o||void 0===o||o.toggleWidget(i,(0,s.PG)((function(e){return Promise.resolve(a)})),null!==(r=n._peekMode)&&void 0!==r&&r)}else n.closeWidget()}),(function(e){n._ignoreModelChangeEvent=!1,(0,u.dL)(e)}))}},{key:"openReference",value:function(e,t,n){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r,pinned:n}},this._editor,t)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();function Se(e,t){var n=(0,g.rc)(e);if(n){var i=Ce.get(n);i&&t(i)}}Ce.ID="editor.contrib.referencesController",Ce=ye([ke(2,m.i6),ke(3,l.$),ke(4,w.lT),ke(5,y.TG),ke(6,C.Uy),ke(7,_.Ui)],Ce),k.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,c.gx)(2089,60),when:m.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Se(e,(function(e){e.changeFocusBetweenPreviewAndReferences()}))}}),k.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:m.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Se(e,(function(e){e.goToNextOrPreviousReference(!0)}))}}),k.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:m.Ao.or(we,g.Jy.inPeekEditor),handler:function(e){Se(e,(function(e){e.goToNextOrPreviousReference(!1)}))}}),p.P0.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),p.P0.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),p.P0.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),p.P0.registerCommand("closeReferenceSearch",(function(e){return Se(e,(function(e){return e.closeWidget()}))})),k.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:m.Ao.and(g.Jy.inPeekEditor,m.Ao.not("config.editor.stablePeek"))}),k.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:m.Ao.and(we,m.Ao.not("config.editor.stablePeek"))}),k.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:m.Ao.and(we,b.CQ,b.PS.negate(),b.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof S.WX&&Se(e,(function(e){return e.revealReference(n[0])}))}}),k.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:m.Ao.and(we,b.CQ,b.PS.negate(),b.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof S.WX&&Se(e,(function(e){return e.openReference(n[0],!0,!0)}))}}),p.P0.registerCommand("openReference",(function(e){var t,n=null===(t=e.get(b.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof S.WX&&Se(e,(function(e){return e.openReference(n[0],!1,!0)}))}))},62302:function(e,t,n){n.d(t,{WX:function(){return y},F2:function(){return b},oQ:function(){return w}});var i=n(29439),r=n(37762),o=n(15671),a=n(43144),s=n(87757),u=n.n(s),c=n(68552),d=n(28941),l=n(21123),h=n(10526),f=n(49584),g=n(34408),v=n(26684),p=n(30788),_=n(87697),m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},y=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=l.a.nextId()}return(0,a.Z)(e,[{key:"uri",get:function(){return this.link.uri}},{key:"range",get:function(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range},set:function(e){this._range=e,this._rangeCallback(this)}},{key:"ariaMessage",get:function(){var e,t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,_.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,g.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,_.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,g.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}]),e}(),k=function(){function e(t){(0,o.Z)(this,e),this._modelReference=t}return(0,a.Z)(e,[{key:"dispose",value:function(){this._modelReference.dispose()}},{key:"preview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,a=e.endColumn,s=n.getWordUntilPosition({lineNumber:i,column:r-t}),u=new p.e(i,s.startColumn,i,r),c=new p.e(o,a,o,1073741824),d=n.getValueInRange(u).replace(/^\s+/,""),l=n.getValueInRange(e),h=n.getValueInRange(c).replace(/\s+$/,"");return{value:d+l+h,highlight:{start:d.length,end:d.length+l.length}}}}}]),e}(),b=function(){function e(t,n){(0,o.Z)(this,e),this.parent=t,this.uri=n,this.children=[],this._previews=new f.Y9}return(0,a.Z)(e,[{key:"dispose",value:function(){(0,h.B9)(this._previews.values()),this._previews.clear()}},{key:"getPreview",value:function(e){return this._previews.get(e.uri)}},{key:"ariaMessage",get:function(){var e=this.children.length;return 1===e?(0,_.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,g.EZ)(this.uri),this.uri.fsPath):(0,_.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,g.EZ)(this.uri),this.uri.fsPath)}},{key:"resolve",value:function(e){return m(this,void 0,void 0,u().mark((function t(){var n,i,o,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this._previews.size){t.next=2;break}return t.abrupt("return",this);case 2:n=(0,r.Z)(this.children),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=21;break}if(o=i.value,!this._previews.has(o.uri)){t.next=9;break}return t.abrupt("continue",19);case 9:return t.prev=9,t.next=12,e.createModelReference(o.uri);case 12:a=t.sent,this._previews.set(o.uri,new k(a)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),(0,c.dL)(t.t0);case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(3),n.e(t.t1);case 26:return t.prev=26,n.f(),t.finish(26);case 29:return t.abrupt("return",this);case 30:case"end":return t.stop()}}),t,this,[[3,23,26,29],[9,16]])})))}}]),e}(),w=function(){function e(t,n){var a=this;(0,o.Z)(this,e),this.groups=[],this.references=[],this._onDidChangeReferenceRange=new d.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;var s,u=(0,i.Z)(t,1)[0];t.sort(e._compareReferences);var c,l=(0,r.Z)(t);try{for(l.s();!(c=l.n()).done;){var h=c.value;if(s&&g.SF.isEqual(s.uri,h.uri,!0)||(s=new b(this,h.uri),this.groups.push(s)),0===s.children.length||0!==e._compareReferences(h,s.children[s.children.length-1])){var f=new y(u===h,s,h,(function(e){return a._onDidChangeReferenceRange.fire(e)}));this.references.push(f),s.children.push(f)}}}catch(v){l.e(v)}finally{l.f()}}return(0,a.Z)(e,[{key:"dispose",value:function(){(0,h.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}},{key:"clone",value:function(){return new e(this._links,this._title)}},{key:"title",get:function(){return this._title}},{key:"isEmpty",get:function(){return 0===this.groups.length}},{key:"ariaMessage",get:function(){return this.isEmpty?(0,_.N)("aria.result.0","No results found"):1===this.references.length?(0,_.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,_.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,_.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}},{key:"nextOrPreviousReference",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return 1===o||t&&i+1<r||!t&&i>0?(i=t?(i+1)%r:(i+r-1)%r,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}},{key:"nearestReference",value:function(e,t){var n=this.references.map((function(n,i){return{idx:i,prefixLen:v.Mh(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}})).sort((function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0}))[0];if(n)return this.references[n.idx]}},{key:"referenceAt",value:function(e,t){var n,i=(0,r.Z)(this.references);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.uri.toString()===e.toString()&&p.e.containsPosition(o.range,t))return o}}catch(a){i.e(a)}finally{i.f()}}},{key:"firstReference",value:function(){var e,t=(0,r.Z)(this.references);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isProviderFirst)return n}}catch(i){t.e(i)}finally{t.f()}return this.references[0]}}],[{key:"_compareReferences",value:function(e,t){return g.SF.compare(e.uri,t.uri)||p.e.compareRangesUsingStarts(e.range,t.range)}}]),e}()},25539:function(e,t,n){n.d(t,{R8:function(){return g}});var i=n(43144),r=n(15671),o=n(87757),a=n.n(o),s=n(32590),u=n(32124),c=n(68552),d=n(98351),l=n(49500),h=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},f=(0,i.Z)((function e(t,n,i){(0,r.Z)(this,e),this.provider=t,this.hover=n,this.ordinal=i}));function g(e,t,n){var i=l.xp.ordered(e).map((function(i,r){return function(e,t,n,i,r){return h(this,void 0,void 0,a().mark((function o(){var s;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Promise.resolve(e.provideHover(n,i,r));case 3:if(!(s=o.sent)||!v(s)){o.next=6;break}return o.abrupt("return",new f(e,s,t));case 6:o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),(0,c.Cp)(o.t0);case 11:return o.abrupt("return",void 0);case 12:case"end":return o.stop()}}),o,null,[[0,8]])})))}(i,r,e,t,n)}));return s.Aq.fromPromises(i).coalesce()}function v(e){var t="undefined"!==typeof e.range,n="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&n}(0,d.sb)("_executeHoverProvider",(function(e,t){return function(e,t,n){return g(e,t,n).map((function(e){return e.hover})).toPromise()}(e,t,u.T.None)}))},92057:function(e,t,n){n.r(t),n.d(t,{ModesHoverController:function(){return Te}});var i=n(60136),r=n(43668),o=n(15671),a=n(43144),s=n(27924),u=n(10526),c=n(98351),d=n(30788),l=n(44474),h=n(79876),f=n(24034),g=n(97326),v=n(11752),p=n(61120),_=n(37762),m=n(53210),y=n(6215),k=n(71881),b=n(10849),w=n(27959),C=n(49500),S=n(93433),D=n(87757),M=n.n(D),N=n(32590),I=n(32124),R=n(17424),P=n(98883),x=n(52365),Z=n(88430),L=n(49848),T=n(3553),O=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},A=function(e,t){return function(n,i){t(n,i,e)}},E=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},W=function(){function e(t,n,i,r){(0,o.Z)(this,e),this.owner=t,this.range=n,this.model=i,this.provider=r,this.forceShowAtRange=!0}return(0,a.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),F=function(){function e(t,n){(0,o.Z)(this,e),this._editor=t,this._themeService=n}return(0,a.Z)(e,[{key:"computeSync",value:function(e,t){return[]}},{key:"computeAsync",value:function(e,t,n){return N.Aq.fromPromise(this._computeAsync(e,t,n))}},{key:"_computeAsync",value:function(e,t,n){return E(this,void 0,void 0,M().mark((function e(){var n,i,r,o,a,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._editor.hasModel()){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=x.i.get(this._editor)){e.next=5;break}return e.abrupt("return",[]);case 5:i=(0,_.Z)(t),e.prev=6,i.s();case 8:if((r=i.n()).done){e.next=20;break}if(o=r.value,n.isColorDecorationId(o.id)){e.next=12;break}return e.abrupt("continue",18);case 12:if(!(a=n.getColorData(o.range.getStartPosition()))){e.next=18;break}return e.next=16,this._createColorHover(this._editor.getModel(),a.colorInfo,a.provider);case 16:return s=e.sent,e.abrupt("return",[s]);case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.abrupt("return",[]);case 29:case"end":return e.stop()}}),e,this,[[6,22,25,28]])})))}},{key:"_createColorHover",value:function(e,t,n){return E(this,void 0,void 0,M().mark((function i(){var r,o,a,s,u,c,l,h,f,g;return M().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.getValueInRange(t.range),o=t.color,a=o.red,s=o.green,u=o.blue,c=o.alpha,l=new R.VS(Math.round(255*a),Math.round(255*s),Math.round(255*u),c),h=new R.Il(l),i.next=6,(0,P.R)(e,t,n,I.T.None);case 6:return f=i.sent,(g=new Z.A(h,[],0)).colorPresentations=f||[],g.guessColorPresentation(h,r),i.abrupt("return",new W(this,d.e.lift(t.range),g,n));case 11:case"end":return i.stop()}}),i,this)})))}},{key:"renderHoverParts",value:function(e,t){var n=this;if(0===t.length||!this._editor.hasModel())return u.JT.None;var i=new u.SL,r=t[0],o=this._editor.getModel(),a=r.model,s=i.add(new L.YW(e.fragment,a,this._editor.getOption(129),this._themeService));e.setColorPicker(s);var c=new d.e(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn),l=function(){var t,i;if(a.presentation.textEdit){t=[a.presentation.textEdit],i=new d.e(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);var r=n._editor.getModel()._setTrackedRange(null,i,3);n._editor.pushUndoStop(),n._editor.executeEdits("colorpicker",t),i=n._editor.getModel()._getTrackedRange(r)||i}else t=[{identifier:null,range:c,text:a.presentation.label,forceMoveMarkers:!1}],i=c.setEndPosition(c.endLineNumber,c.startColumn+a.presentation.label.length),n._editor.pushUndoStop(),n._editor.executeEdits("colorpicker",t);a.presentation.additionalTextEdits&&(t=(0,S.Z)(a.presentation.additionalTextEdits),n._editor.executeEdits("colorpicker",t),e.hide()),n._editor.pushUndoStop(),c=i},h=function(e){return(0,P.R)(o,{range:c,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},r.provider,I.T.None).then((function(e){a.colorPresentations=e||[]}))};return i.add(a.onColorFlushed((function(e){h(e).then(l)}))),i.add(a.onDidChangeColor(h)),i}}]),e}();F=O([A(1,T.XE)],F);var H=n(68552),V=n(28941),K=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},U=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},B=(0,a.Z)((function e(t,n,i){(0,o.Z)(this,e),this.value=t,this.isComplete=n,this.hasLoadingMessage=i})),G=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this))._editor=e,r._computer=i,r._onResult=r._register(new V.Q5),r.onResult=r._onResult.event,r._firstWaitScheduler=r._register(new N.pY((function(){return r._triggerAsyncComputation()}),0)),r._secondWaitScheduler=r._register(new N.pY((function(){return r._triggerSyncComputation()}),0)),r._loadingMessageScheduler=r._register(new N.pY((function(){return r._triggerLoadingMessage()}),0)),r._state=0,r._asyncIterable=null,r._asyncIterableDone=!1,r._result=[],r}return(0,a.Z)(n,[{key:"dispose",value:function(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),(0,v.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"_hoverTime",get:function(){return this._editor.getOption(53).delay}},{key:"_firstWaitTime",get:function(){return this._hoverTime/2}},{key:"_secondWaitTime",get:function(){return this._hoverTime-this._firstWaitTime}},{key:"_loadingMessageTime",get:function(){return 3*this._hoverTime}},{key:"_setState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=e,t&&this._fireResult()}},{key:"_triggerAsyncComputation",value:function(){var e=this;this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,N.zS)((function(t){return e._computer.computeAsync(t)})),K(e,void 0,void 0,M().mark((function e(){var t,n,i,r,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,i=U(this._asyncIterable);case 3:return e.next=5,i.next();case 5:if((r=e.sent).done){e.next=11;break}(o=r.value)&&(this._result.push(o),this._fireResult());case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t={error:e.t0};case 16:if(e.prev=16,e.prev=17,!r||r.done||!(n=i.return)){e.next=21;break}return e.next=21,n.call(i);case 21:if(e.prev=21,!t){e.next=24;break}throw t.error;case 24:return e.finish(21);case 25:return e.finish(16);case 26:this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),(0,H.dL)(e.t1);case 33:case"end":return e.stop()}}),e,this,[[0,30],[1,13,16,26],[17,,21,25]])})))):this._asyncIterableDone=!0}},{key:"_triggerSyncComputation",value:function(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}},{key:"_triggerLoadingMessage",value:function(){3===this._state&&this._setState(4)}},{key:"_fireResult",value:function(){if(1!==this._state&&2!==this._state){var e=0===this._state,t=4===this._state;this._onResult.fire(new B(this._result.slice(0),e,t))}}},{key:"start",value:function(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}},{key:"cancel",value:function(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}]),n}(u.JT),z=n(51168),Q=n(38305),j=n(34408),q=n(84617),J=n(92547),Y=n(20403),X=n(36175),$=n(68344),ee=n(87697),te=n(52721),ne=n(74990),ie=n(26562),re=n(6574),oe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ae=function(e,t){return function(n,i){t(n,i,e)}},se=m.$,ue=function(){function e(t,n,i){(0,o.Z)(this,e),this.owner=t,this.range=n,this.marker=i}return(0,a.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),ce={type:1,filter:{include:X.yN.QuickFix}},de=function(){function e(t,n,i){(0,o.Z)(this,e),this._editor=t,this._markerDecorationsService=n,this._openerService=i,this.recentMarkerCodeActionsInfo=void 0}return(0,a.Z)(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n,i=this._editor.getModel(),r=e.range.startLineNumber,o=i.getLineMaxColumn(r),a=[],s=(0,_.Z)(t);try{for(s.s();!(n=s.n()).done;){var u=n.value,c=u.range.startLineNumber===r?u.range.startColumn:1,l=u.range.endLineNumber===r?u.range.endColumn:o,h=this._markerDecorationsService.getMarker(i.uri,u);if(h){var f=new d.e(e.range.startLineNumber,c,e.range.startLineNumber,l);a.push(new ue(this,f,h))}}}catch(g){s.e(g)}finally{s.f()}return a}},{key:"renderHoverParts",value:function(e,t){var n=this;if(!t.length)return u.JT.None;var i=new u.SL;t.forEach((function(t){return e.fragment.appendChild(n.renderMarkerHover(t,i))}));var r=1===t.length?t[0]:t.sort((function(e,t){return te.ZL.compare(e.marker.severity,t.marker.severity)}))[0];return this.renderMarkerStatusbar(e,r,i),i}},{key:"renderMarkerHover",value:function(e,t){var n=this,i=se("div.hover-row"),r=m.append(i,se("div.marker.hover-contents")),o=e.marker,a=o.source,s=o.message,u=o.code,c=o.relatedInformation;this._editor.applyFontInfo(r);var d=m.append(r,se("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,a||u)if(u&&"string"!==typeof u){var l=se("span");if(a)m.append(l,se("span")).innerText=a;var h=m.append(l,se("a.code-link"));h.setAttribute("href",u.target.toString()),t.add(m.addDisposableListener(h,"click",(function(e){n._openerService.open(u.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}))),m.append(h,se("span")).innerText=u.value;var f=m.append(r,l);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{var g=m.append(r,se("span"));g.style.opacity="0.6",g.style.paddingLeft="6px",g.innerText=a&&u?"".concat(a,"(").concat(u,")"):a||"(".concat(u,")")}if((0,k.Of)(c)){var v,p=(0,_.Z)(c);try{var y=function(){var e=v.value,i=e.message,o=e.resource,a=e.startLineNumber,s=e.startColumn,u=m.append(r,se("div"));u.style.marginTop="8px";var c=m.append(u,se("a"));c.innerText="".concat((0,j.EZ)(o),"(").concat(a,", ").concat(s,"): "),c.style.cursor="pointer",t.add(m.addDisposableListener(c,"click",(function(e){e.stopPropagation(),e.preventDefault(),n._openerService&&n._openerService.open(o,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:a,startColumn:s}}}).catch(H.dL)})));var d=m.append(u,se("span"));d.innerText=i,n._editor.applyFontInfo(d)};for(p.s();!(v=p.n()).done;)y()}catch(b){p.e(b)}finally{p.f()}}return i}},{key:"renderMarkerStatusbar",value:function(e,t,n){var i=this;if(t.marker.severity!==te.ZL.Error&&t.marker.severity!==te.ZL.Warning&&t.marker.severity!==te.ZL.Info||e.statusBar.addAction({label:ee.N("view problem","View Problem"),commandId:$.NextMarkerAction.ID,run:function(){var n;e.hide(),null===(n=$.MarkerController.get(i._editor))||void 0===n||n.showAtMarker(t.marker),i._editor.focus()}}),!this._editor.getOption(81)){var r=e.statusBar.append(se("div"));this.recentMarkerCodeActionsInfo&&(te.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===te.H0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=ee.N("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);var o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?u.JT.None:n.add((0,N.Vg)((function(){return r.textContent=ee.N("checkingForQuickFixes","Checking for quick fixes...")}),200));r.textContent||(r.textContent=String.fromCharCode(160));var a=this.getCodeActions(t.marker);n.add((0,u.OF)((function(){return a.cancel()}))),a.then((function(a){if(o.dispose(),i.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!i.recentMarkerCodeActionsInfo.hasCodeActions)return a.dispose(),void(r.textContent=ee.N("noQuickFixes","No quick fixes available"));r.style.display="none";var s=!1;n.add((0,u.OF)((function(){s||a.dispose()}))),e.statusBar.addAction({label:ee.N("quick fixes","Quick Fix..."),commandId:Y.E7.Id,run:function(t){s=!0;var n=Y.pY.get(i._editor),r=m.getDomNodePagePosition(t);e.hide(),null===n||void 0===n||n.showCodeActions(ce,a,{x:r.left+6,y:r.top+r.height+6})}})}),H.dL)}}},{key:"getCodeActions",value:function(e){var t=this;return(0,N.PG)((function(n){return(0,J.aI)(t._editor.getModel(),new d.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),ce,ie.Ex.None,n)}))}}]),e}();de=oe([ae(1,q.i),ae(2,ne.v4)],de),(0,T.Ic)((function(e,t){var n=e.getColor(re.url);n&&t.addRule(".monaco-hover .hover-contents a.code-link span { color: ".concat(n,"; }"));var i=e.getColor(re.sgC);i&&t.addRule(".monaco-hover .hover-contents a.code-link span:hover { color: ".concat(i,"; }"))}));var le=n(48479),he=n(49525),fe=n(8850),ge=n(45753),ve=n(47510),pe=n(9529),_e=n(51330),me=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ye=function(e,t){return function(n,i){t(n,i,e)}},ke=m.$,be=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r){var a;return(0,o.Z)(this,n),(a=t.call(this))._editor=e,a._instantiationService=i,a._keybindingService=r,a._participants=[a._instantiationService.createInstance(F,a._editor),a._instantiationService.createInstance(Q.D5,a._editor),a._instantiationService.createInstance(le.l,a._editor),a._instantiationService.createInstance(pe.UnicodeHighlighterHoverParticipant,a._editor),a._instantiationService.createInstance(de,a._editor),a._instantiationService.createInstance(_e.G,a._editor)],a._widget=a._register(a._instantiationService.createInstance(Se,a._editor)),a._decorationsChangerListener=a._register(new we(a._editor)),a._computer=new Me(a._editor,a._participants),a._hoverOperation=a._register(new G(a._editor,a._computer)),a._messages=[],a._messagesAreComplete=!1,a._register(a._hoverOperation.onResult((function(e){a._withResult(e.value,e.isComplete,e.hasLoadingMessage)}))),a._register(a._decorationsChangerListener.onDidChangeModelDecorations((function(){return a._onModelDecorationsChanged()}))),a._register(m.addStandardDisposableListener(a._widget.getDomNode(),"keydown",(function(e){e.equals(9)&&a.hide()}))),a._register(C.RW.onDidChange((function(){a._widget.position&&a._computer.anchor&&a._messages.length>0&&(a._widget.clear(),a._renderMessages(a._computer.anchor,a._messages))}))),a}return(0,a.Z)(n,[{key:"_onModelDecorationsChanged",value:function(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.colorPicker||this._hoverOperation.start(0))}},{key:"maybeShowAt",value:function(e){var t,n=[],i=(0,_.Z)(this._participants);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.suggestHoverAnchor){var o=r.suggestHoverAnchor(e);o&&n.push(o)}}}catch(u){i.e(u)}finally{i.f()}var a=e.target;if(6===a.type&&n.push(new z.Q(0,a.range)),7===a.type){var s=this._editor.getOption(44).typicalHalfwidthCharacterWidth/2;!a.detail.isAfterLines&&"number"===typeof a.detail.horizontalDistanceToText&&a.detail.horizontalDistanceToText<s&&n.push(new z.Q(0,a.range))}return 0!==n.length&&(n.sort((function(e,t){return t.priority-e.priority})),this._startShowingAt(n[0],0,!1),!0)}},{key:"startShowingAtRange",value:function(e,t,n){this._startShowingAt(new z.Q(0,e),t,n)}},{key:"_startShowingAt",value:function(e,t,n){if(!this._computer.anchor||!this._computer.anchor.equals(e)){if(this._hoverOperation.cancel(),this._widget.position)if(this._computer.anchor&&e.canAdoptVisibleHover(this._computer.anchor,this._widget.position)){var i=this._messages.filter((function(t){return t.isValidForHoverAnchor(e)}));if(0===i.length)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}else this.hide();this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}},{key:"hide",value:function(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}},{key:"isColorPickerVisible",value:function(){return!!this._widget.colorPicker}},{key:"_addLoadingMessage",value:function(e){if(this._computer.anchor){var t,n=(0,_.Z)(this._participants);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.createLoadingMessage){var r=i.createLoadingMessage(this._computer.anchor);if(r)return e.slice(0).concat([r])}}}catch(o){n.e(o)}finally{n.f()}}return e}},{key:"_withResult",value:function(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}},{key:"_renderMessages",value:function(e,t){var i,r=this,o=1073741824,a=t[0].range,s=null,c=(0,_.Z)(t);try{for(c.s();!(i=c.n()).done;){var l=i.value;o=Math.min(o,l.range.startColumn),a=d.e.plusRange(a,l.range),l.forceShowAtRange&&(s=l.range)}}catch(C){c.e(C)}finally{c.f()}var h,f=new u.SL,g=f.add(new De(this._keybindingService)),v=document.createDocumentFragment(),p=null,m={fragment:v,statusBar:g,setColorPicker:function(e){return p=e},onContentsChanged:function(){return r._widget.onContentsChanged()},hide:function(){return r.hide()}},y=(0,_.Z)(this._participants);try{var k=function(){var e=h.value,n=t.filter((function(t){return t.owner===e}));n.length>0&&f.add(e.renderHoverParts(m,n))};for(y.s();!(h=y.n()).done;)k()}catch(C){y.e(C)}finally{y.f()}if(g.hasContent&&v.appendChild(g.hoverElement),v.hasChildNodes()){if(a){var w=this._decorationsChangerListener.deltaDecorations([],[{range:a,options:n._DECORATION_OPTIONS}]);f.add((0,u.OF)((function(){r._decorationsChangerListener.deltaDecorations(w,[])})))}this._widget.showAt(v,new Ce(p,s?s.getStartPosition():new b.L(e.range.startLineNumber,o),s||a,this._editor.getOption(53).above,this._computer.shouldFocus,f))}else f.dispose()}}]),n}(u.JT);be._DECORATION_OPTIONS=w.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),be=me([ye(1,fe.TG),ye(2,ge.d)],be);var we=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this))._editor=e,i._onDidChangeModelDecorations=i._register(new V.Q5),i.onDidChangeModelDecorations=i._onDidChangeModelDecorations.event,i._isChangingDecorations=!1,i._register(i._editor.onDidChangeModelDecorations((function(e){i._isChangingDecorations||i._onDidChangeModelDecorations.fire(e)}))),i}return(0,a.Z)(n,[{key:"deltaDecorations",value:function(e,t){try{return this._isChangingDecorations=!0,this._editor.deltaDecorations(e,t)}finally{this._isChangingDecorations=!1}}}]),n}(u.JT),Ce=(0,a.Z)((function e(t,n,i,r,a,s){(0,o.Z)(this,e),this.colorPicker=t,this.showAtPosition=n,this.showAtRange=i,this.preferAbove=r,this.stoleFocus=a,this.disposables=s})),Se=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this))._editor=e,r._contextKeyService=i,r.allowEditorOverflow=!0,r._hoverVisibleKey=l.u.hoverVisible.bindTo(r._contextKeyService),r._hover=r._register(new y.c),r._visibleData=null,r._register(r._editor.onDidLayoutChange((function(){return r._layout()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(44)&&r._updateFont()}))),r._setVisibleData(null),r._layout(),r._editor.addContentWidget((0,g.Z)(r)),r}return(0,a.Z)(n,[{key:"position",get:function(){var e,t;return null!==(t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition)&&void 0!==t?t:null}},{key:"colorPicker",get:function(){var e,t;return null!==(t=null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)&&void 0!==t?t:null}},{key:"dispose",value:function(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),(0,v.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"getPosition",value:function(){if(!this._visibleData)return null;var e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(ve._y.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}},{key:"_setVisibleData",value:function(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}},{key:"_layout",value:function(){var e=Math.max(this._editor.getLayoutInfo().height/4,250),t=this._editor.getOption(44),n=t.fontSize,i=t.lineHeight;this._hover.contentsDomNode.style.fontSize="".concat(n,"px"),this._hover.contentsDomNode.style.lineHeight="".concat(i/n),this._hover.contentsDomNode.style.maxHeight="".concat(e,"px"),this._hover.contentsDomNode.style.maxWidth="".concat(Math.max(.66*this._editor.getLayoutInfo().width,500),"px")}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"showAt",value:function(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this._editor.layoutContentWidget(this),this.onContentsChanged(),this._editor.render(),this._editor.layoutContentWidget(this),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}},{key:"hide",value:function(){if(this._visibleData){var e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}},{key:"onContentsChanged",value:function(){this._hover.onContentsChanged();var e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){var t="".concat(this._hover.scrollbar.options.horizontalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingBottom!==t&&(this._hover.contentsDomNode.style.paddingBottom=t,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}},{key:"clear",value:function(){this._hover.contentsDomNode.textContent=""}}]),n}(u.JT);Se.ID="editor.contrib.contentHoverWidget",Se=me([ye(1,he.i6)],Se);var De=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this))._keybindingService=e,i._hasContent=!1,i.hoverElement=ke("div.hover-row.status-bar"),i.actionsElement=m.append(i.hoverElement,ke("div.actions")),i}return(0,a.Z)(n,[{key:"hasContent",get:function(){return this._hasContent}},{key:"addAction",value:function(e){var t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(y.S.render(this.actionsElement,e,n))}},{key:"append",value:function(e){var t=m.append(this.actionsElement,e);return this._hasContent=!0,t}}]),n}(u.JT);De=me([ye(0,ge.d)],De);var Me=function(){function e(t,n){(0,o.Z)(this,e),this._editor=t,this._participants=n,this._anchor=null,this._shouldFocus=!1}return(0,a.Z)(e,[{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor=e}},{key:"shouldFocus",get:function(){return this._shouldFocus},set:function(e){this._shouldFocus=e}},{key:"computeAsync",value:function(t){var n=this._anchor;if(!this._editor.hasModel()||!n)return N.Aq.EMPTY;var i=e._getLineDecorations(this._editor,n);return N.Aq.merge(this._participants.map((function(e){return e.computeAsync?e.computeAsync(n,i,t):N.Aq.EMPTY})))}},{key:"computeSync",value:function(){if(!this._editor.hasModel()||!this._anchor)return[];var t,n=e._getLineDecorations(this._editor,this._anchor),i=[],r=(0,_.Z)(this._participants);try{for(r.s();!(t=r.n()).done;){var o=t.value;i=i.concat(o.computeSync(this._anchor,n))}}catch(a){r.e(a)}finally{r.f()}return(0,k.kX)(i)}}],[{key:"_getLineDecorations",value:function(e,t){if(1!==t.type)return[];var n=e.getModel(),i=t.range.startLineNumber,r=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter((function(e){if(e.options.isWholeLine)return!0;var n=e.range.startLineNumber===i?e.range.startColumn:1,o=e.range.endLineNumber===i?e.range.endColumn:r;if(e.options.showIfCollapsed){if(n>t.range.startColumn+1||t.range.endColumn-1>o)return!1}else if(n>t.range.startColumn||t.range.endColumn>o)return!1;return!0}))}}]),e}(),Ne=n(67277),Ie=n(65163),Re=m.$,Pe=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne.SW;return(0,o.Z)(this,n),(r=t.call(this))._renderDisposeables=r._register(new u.SL),r._editor=e,r._isVisible=!1,r._messages=[],r._hover=r._register(new y.c),r._hover.containerDomNode.classList.toggle("hidden",!r._isVisible),r._markdownRenderer=r._register(new Ie.$({editor:r._editor},i,a)),r._computer=new xe(r._editor),r._hoverOperation=r._register(new G(r._editor,r._computer)),r._register(r._hoverOperation.onResult((function(e){r._withResult(e.value)}))),r._register(r._editor.onDidChangeModelDecorations((function(){return r._onModelDecorationsChanged()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(44)&&r._updateFont()}))),r._editor.addOverlayWidget((0,g.Z)(r)),r}return(0,a.Z)(n,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,v.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"getPosition",value:function(){return null}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"_onModelDecorationsChanged",value:function(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}},{key:"startShowingAt",value:function(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}},{key:"hide",value:function(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}},{key:"_withResult",value:function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}},{key:"_renderMessages",value:function(e,t){this._renderDisposeables.clear();var n,i=document.createDocumentFragment(),r=(0,_.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=Re("div.hover-row.markdown-hover"),s=m.append(a,Re("div.hover-contents")),u=this._renderDisposeables.add(this._markdownRenderer.render(o.value));s.appendChild(u.element),i.appendChild(a)}}catch(c){r.e(c)}finally{r.f()}this._updateContents(i),this._showAt(e)}},{key:"_updateContents",value:function(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}},{key:"_showAt",value:function(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),r=this._editor.getOption(59),o=n-i-(this._hover.containerDomNode.clientHeight-r)/2;this._hover.containerDomNode.style.left="".concat(t.glyphMarginLeft+t.glyphMarginWidth,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(o),0),"px")}}]),n}(u.JT);Pe.ID="editor.contrib.modesGlyphHoverWidget";var xe=function(){function e(t){(0,o.Z)(this,e),this._editor=t,this._lineNumber=-1}return(0,a.Z)(e,[{key:"lineNumber",get:function(){return this._lineNumber},set:function(e){this._lineNumber=e}},{key:"computeSync",value:function(){var e=function(e){return{value:e}},t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;var i,r=(0,_.Z)(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.options.glyphMarginClassName){var a=o.options.glyphMarginHoverMessage;a&&!(0,Ne.CP)(a)&&n.push.apply(n,(0,S.Z)((0,k._2)(a).map(e)))}}}catch(s){r.e(s)}finally{r.f()}return n}}]),e}(),Ze=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Le=function(e,t){return function(n,i){t(n,i,e)}},Te=function(){function e(t,n,i,r,a){var s=this;(0,o.Z)(this,e),this._editor=t,this._instantiationService=n,this._openerService=i,this._languageService=r,this._toUnhook=new u.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((function(e){e.hasChanged(53)&&(s._unhookEvents(),s._hookEvents())}))}return(0,a.Z)(e,[{key:"_hookEvents",value:function(){var e=this,t=function(){return e._hideWidgets()},n=this._editor.getOption(53);this._isHoverEnabled=n.enabled,this._isHoverSticky=n.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((function(t){return e._onEditorMouseDown(t)}))),this._toUnhook.add(this._editor.onMouseUp((function(t){return e._onEditorMouseUp(t)}))),this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))):(this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))),this._toUnhook.add(this._editor.onMouseLeave(t)),this._toUnhook.add(this._editor.onDidChangeModel(t)),this._toUnhook.add(this._editor.onDidScrollChange((function(t){return e._onEditorScrollChanged(t)})))}},{key:"_unhookEvents",value:function(){this._toUnhook.clear()}},{key:"_onEditorScrollChanged",value:function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}},{key:"_onEditorMouseDown",value:function(e){this._isMouseDown=!0;var t=e.target;9!==t.type||t.detail!==Se.ID?12===t.type&&t.detail===Pe.ID||(12!==t.type&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}},{key:"_onEditorMouseUp",value:function(e){this._isMouseDown=!1}},{key:"_onEditorMouseMove",value:function(e){var t,n,i,r,o,a=e.target;if((!this._isMouseDown||!this._hoverClicked)&&(!this._isHoverSticky||9!==a.type||a.detail!==Se.ID)&&(!this._isHoverSticky||(null===(n=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===n?void 0:n.isCollapsed))&&(this._isHoverSticky||9!==a.type||a.detail!==Se.ID||!(null===(i=this._contentWidget)||void 0===i?void 0:i.isColorPickerVisible()))&&(!this._isHoverSticky||12!==a.type||a.detail!==Pe.ID))if(this._isHoverEnabled){if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===a.type&&a.position?(null===(o=this._contentWidget)||void 0===o||o.hide(),this._glyphWidget||(this._glyphWidget=new Pe(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(a.position.lineNumber)):void this._hideWidgets();null===(r=this._glyphWidget)||void 0===r||r.hide()}else this._hideWidgets()}},{key:"_onKeyDown",value:function(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}},{key:"_hideWidgets",value:function(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(n=this._contentWidget)||void 0===n||n.hide())}},{key:"_getOrCreateContentWidget",value:function(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(be,this._editor)),this._contentWidget}},{key:"isColorPickerVisible",value:function(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}},{key:"showContentHover",value:function(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}},{key:"dispose",value:function(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();Te.ID="editor.contrib.hover",Te=Ze([Le(1,fe.TG),Le(2,ne.v4),Le(3,h.O),Le(4,he.i6)],Te);var Oe=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.showHover",label:ee.N({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:l.u.editorTextFocus,primary:(0,s.gx)(2089,2087),weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=Te.get(t);if(n){var i=t.getPosition(),r=new d.e(i.lineNumber,i.column,i.lineNumber,i.column),o=2===t.getOption(2);n.showContentHover(r,1,o)}}}}]),n}(c.R6),Ae=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.showDefinitionPreviewHover",label:ee.N({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=Te.get(t);if(n){var i=t.getPosition();if(i){var r=new d.e(i.lineNumber,i.column,i.lineNumber,i.column),o=f.GotoDefinitionAtPositionEditorContribution.get(t);if(o)o.startFindDefinitionFromCursor(i).then((function(){n.showContentHover(r,1,!0)}))}}}}]),n}(c.R6);(0,c._K)(Te.ID,Te),(0,c.Qr)(Oe),(0,c.Qr)(Ae),(0,T.Ic)((function(e,t){var n=e.getColor(re.ptc);n&&t.addRule(".monaco-editor .hoverHighlight { background-color: ".concat(n,"; }"));var i=e.getColor(re.yJx);i&&t.addRule(".monaco-editor .monaco-hover { background-color: ".concat(i,"; }"));var r=e.getColor(re.CNo);r&&(t.addRule(".monaco-editor .monaco-hover { border: 1px solid ".concat(r,"; }")),t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(r.transparent(.5),"; }")));var o=e.getColor(re.url);o&&t.addRule(".monaco-editor .monaco-hover a { color: ".concat(o,"; }"));var a=e.getColor(re.sgC);a&&t.addRule(".monaco-editor .monaco-hover a:hover { color: ".concat(a,"; }"));var s=e.getColor(re.Sbf);s&&t.addRule(".monaco-editor .monaco-hover { color: ".concat(s,"; }"));var u=e.getColor(re.LoV);u&&t.addRule(".monaco-editor .monaco-hover .hover-row .actions { background-color: ".concat(u,"; }"));var c=e.getColor(re.SwI);c&&t.addRule(".monaco-editor .monaco-hover code { background-color: ".concat(c,"; }"))}))},51168:function(e,t,n){n.d(t,{Q:function(){return o},Y:function(){return a}});var i=n(15671),r=n(43144),o=function(){function e(t,n){(0,i.Z)(this,e),this.priority=t,this.range=n,this.type=1}return(0,r.Z)(e,[{key:"equals",value:function(e){return 1===e.type&&this.range.equalsRange(e.range)}},{key:"canAdoptVisibleHover",value:function(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}]),e}(),a=function(){function e(t,n,r){(0,i.Z)(this,e),this.priority=t,this.owner=n,this.range=r,this.type=2}return(0,r.Z)(e,[{key:"equals",value:function(e){return 2===e.type&&this.owner===e.owner}},{key:"canAdoptVisibleHover",value:function(e,t){return 2===e.type&&this.owner===e.owner}}]),e}()},38305:function(e,t,n){n.d(t,{hU:function(){return C},D5:function(){return S},c:function(){return D}});var i=n(37762),r=n(15671),o=n(43144),a=n(53210),s=n(71881),u=n(32590),c=n(67277),d=n(10526),l=n(65163),h=n(10849),f=n(30788),g=n(49500),v=n(79876),p=n(25539),_=n(87697),m=n(64644),y=n(74990),k=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},b=function(e,t){return function(n,i){t(n,i,e)}},w=a.$,C=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.owner=t,this.range=n,this.contents=i,this.ordinal=o}return(0,o.Z)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),S=function(){function e(t,n,i,o){(0,r.Z)(this,e),this._editor=t,this._languageService=n,this._openerService=i,this._configurationService=o}return(0,o.Z)(e,[{key:"createLoadingMessage",value:function(e){return new C(this,e.range,[(new c.W5).appendText(_.N("modesContentHover.loading","Loading..."))],2e3)}},{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),a=[],u=1e3,d=n.getLineLength(r),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});"number"===typeof h&&d>=h&&a.push(new C(this,e.range,[{value:_.N("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],u++));var g,v=(0,i.Z)(t);try{for(v.s();!(g=v.n()).done;){var p=g.value,m=p.range.startLineNumber===r?p.range.startColumn:1,y=p.range.endLineNumber===r?p.range.endColumn:o,k=p.options.hoverMessage;if(k&&!(0,c.CP)(k)){var b=new f.e(e.range.startLineNumber,m,e.range.startLineNumber,y);a.push(new C(this,b,(0,s._2)(k),u++))}}}catch(w){v.e(w)}finally{v.f()}return a}},{key:"computeAsync",value:function(e,t,n){var i=this;if(!this._editor.hasModel()||1!==e.type)return u.Aq.EMPTY;var r=this._editor.getModel();if(!g.xp.has(r))return u.Aq.EMPTY;var o=new h.L(e.range.startLineNumber,e.range.startColumn);return(0,p.R8)(r,o,n).filter((function(e){return!(0,c.CP)(e.hover.contents)})).map((function(t){var n=t.hover.range?f.e.lift(t.hover.range):e.range;return new C(i,n,t.hover.contents,t.ordinal)}))}},{key:"renderHoverParts",value:function(e,t){return D(e,t,this._editor,this._languageService,this._openerService)}}]),e}();function D(e,t,n,r,o){t.sort((function(e,t){return e.ordinal-t.ordinal}));var s,u=new d.SL,h=(0,i.Z)(t);try{for(h.s();!(s=h.n()).done;){var f,g=s.value,v=(0,i.Z)(g.contents);try{var p=function(){var t=f.value;if((0,c.CP)(t))return"continue";var i=w("div.hover-row.markdown-hover"),s=a.append(i,w("div.hover-contents")),d=u.add(new l.$({editor:n},r,o));u.add(d.onDidRenderAsync((function(){s.className="hover-contents code-hover-contents",e.onContentsChanged()})));var h=u.add(d.render(t));s.appendChild(h.element),e.fragment.appendChild(i)};for(v.s();!(f=v.n()).done;)p()}catch(_){v.e(_)}finally{v.f()}}}catch(_){h.e(_)}finally{h.f()}return u}S=k([b(1,v.O),b(2,y.v4),b(3,m.Ui)],S)},52662:function(e,t,n){n.r(t);var i=n(60136),r=n(43668),o=n(15671),a=n(43144),s=n(32590),u=n(68552),c=n(50004),d=n(98351),l=n(30788),h=n(52091),f=n(44474),g=n(27959),v=n(70437),p=n(2374),_=n(87697),m=n(3553),y=function(){function e(t,n,i){(0,o.Z)(this,e),this._editRange=t,this._originalSelection=n,this._text=i}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._editRange,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new h.Y(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new h.Y(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}]),e}(),k=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},b=function(e,t){return function(n,i){t(n,i,e)}},w=function(){function e(t,n){(0,o.Z)(this,e),this.decorationIds=[],this.editor=t,this.editorWorkerService=n}return(0,a.Z)(e,[{key:"dispose",value:function(){}},{key:"run",value:function(t,n){var i=this;this.currentRequest&&this.currentRequest.cancel();var r=this.editor.getSelection(),o=this.editor.getModel();if(o&&r){var a=r;if(a.startLineNumber===a.endLineNumber){var d=new c.yy(this.editor,5),f=o.uri;return this.editorWorkerService.canNavigateValueSet(f)?(this.currentRequest=(0,s.PG)((function(e){return i.editorWorkerService.navigateValueSet(f,a,n)})),this.currentRequest.then((function(n){if(n&&n.range&&n.value&&d.validate(i.editor)){var r=l.e.lift(n.range),o=n.range,c=n.value.length-(a.endColumn-a.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+n.value.length},c>1&&(a=new h.Y(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+c-1));var f=new y(r,a,n.value);i.editor.pushUndoStop(),i.editor.executeCommand(t,f),i.editor.pushUndoStop(),i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[{range:o,options:e.DECORATION}]),i.decorationRemover&&i.decorationRemover.cancel(),i.decorationRemover=(0,s.Vs)(350),i.decorationRemover.then((function(){return i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[])})).catch(u.dL)}})).catch(u.dL)):Promise.resolve(void 0)}}}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();w.ID="editor.contrib.inPlaceReplaceController",w.DECORATION=g.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),w=k([b(1,v.p)],w);var C=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.up",label:_.N("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:f.u.writable,kbOpts:{kbExpr:f.u.editorTextFocus,primary:3154,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=w.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}]),n}(d.R6),S=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.down",label:_.N("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:f.u.writable,kbOpts:{kbExpr:f.u.editorTextFocus,primary:3156,weight:100}})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=w.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}]),n}(d.R6);(0,d._K)(w.ID,w),(0,d.Qr)(C),(0,d.Qr)(S),(0,m.Ic)((function(e,t){var n=e.getColor(p.Dl);n&&t.addRule(".monaco-editor.vs .valueSetReplacement { outline: solid 2px ".concat(n,"; }"))}))},90570:function(e,t,n){function i(e,t){for(var n=0,i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function r(e,t,n){e=e<0?0:e;var i="";if(!n){var r=Math.floor(e/t);e%=t;for(var o=0;o<r;o++)i+="\t"}for(var a=0;a<e;a++)i+=" ";return i}n.d(t,{Y:function(){return i},J:function(){return r}})},13080:function(e,t,n){n.r(t),n.d(t,{getReindentEditOperations:function(){return C},IndentationToSpacesAction:function(){return S},IndentationToTabsAction:function(){return D},ChangeIndentationSizeAction:function(){return M},IndentUsingTabs:function(){return N},IndentUsingSpaces:function(){return I},DetectIndentation:function(){return R},ReindentLinesAction:function(){return P},ReindentSelectedLinesAction:function(){return x},AutoIndentOnPasteCommand:function(){return Z},AutoIndentOnPaste:function(){return L},IndentationToSpacesCommand:function(){return O},IndentationToTabsCommand:function(){return A}});var i=n(93433),r=n(37762),o=n(15671),a=n(43144),s=n(60136),u=n(43668),c=n(10526),d=n(26684),l=n(98351),h=n(55428),f=n(15261),g=n(30788),v=n(52091),p=n(44474),_=n(27959),m=n(89125),y=n(74463),k=n(90570),b=n(87697),w=n(4581);function C(e,t,n,i,r){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];var o=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!o)return[];for(i=Math.min(i,e.getLineCount());n<=i&&o.unIndentedLinePattern;){var a=e.getLineContent(n);if(!o.unIndentedLinePattern.test(a))break;n++}if(n>i-1)return[];var s,u=e.getOptions(),c=u.tabSize,l=u.indentSize,g=u.insertSpaces,p=function(e,t){return t=t||1,h.U.shiftIndent(e,e.length+t,c,l,g)},m=function(e,t){return t=t||1,h.U.unshiftIndent(e,e.length+t,c,l,g)},y=[],k=e.getLineContent(n),b=k;if(void 0!==r&&null!==r){s=r;var w=d.V8(k);b=s+k.substring(w.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(b)&&(b=(s=m(s))+k.substring(w.length)),k!==b&&y.push(f.h.replaceMove(new v.Y(n,1,n,w.length+1),_.yO.normalizeIndentation(s,l,g)))}else s=d.V8(k);var C=s;o.increaseIndentPattern&&o.increaseIndentPattern.test(b)?(C=p(C),s=p(s)):o.indentNextLinePattern&&o.indentNextLinePattern.test(b)&&(C=p(C));for(var S=++n;S<=i;S++){var D=e.getLineContent(S),M=d.V8(D),N=C+D.substring(M.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(N)&&(C=m(C),s=m(s)),M!==C&&y.push(f.h.replaceMove(new v.Y(S,1,S,M.length+1),_.yO.normalizeIndentation(C,l,g))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(D)||(C=o.increaseIndentPattern&&o.increaseIndentPattern.test(N)?s=p(s):o.indentNextLinePattern&&o.indentNextLinePattern.test(N)?p(C):s)}return y}var S=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.N("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new O(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}}}]),n}(l.R6);S.ID="editor.action.indentationToSpaces";var D=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.N("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new A(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}}}]),n}(l.R6);D.ID="editor.action.indentationToTabs";var M=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this,i)).insertSpaces=e,r}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=this,i=e.get(w.eJ),r=e.get(y.q),o=t.getModel();if(o){var a=r.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),s=[1,2,3,4,5,6,7,8].map((function(e){return{id:e.toString(),label:e.toString(),description:e===a.tabSize?b.N("configuredTabSize","Configured Tab Size"):void 0}})),u=Math.min(o.getOptions().tabSize-1,7);setTimeout((function(){i.pick(s,{placeHolder:b.N({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:s[u]}).then((function(e){e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:n.insertSpaces})}))}),50)}}}]),n}(l.R6),N=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!1,{id:n.ID,label:b.N("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}return(0,a.Z)(n)}(M);N.ID="editor.action.indentUsingTabs";var I=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,!0,{id:n.ID,label:b.N("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}return(0,a.Z)(n)}(M);I.ID="editor.action.indentUsingSpaces";var R=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:n.ID,label:b.N("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(y.q),i=t.getModel();if(i){var r=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}}}]),n}(l.R6);R.ID="editor.action.detectIndentation";var P=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.reindentlines",label:b.N("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(m.c_),i=t.getModel();if(i){var r=C(i,n,1,i.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}}]),n}(l.R6),x=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:"editor.action.reindentselectedlines",label:b.N("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:p.u.writable})}return(0,a.Z)(n,[{key:"run",value:function(e,t){var n=e.get(m.c_),o=t.getModel();if(o){var a=t.getSelections();if(null!==a){var s,u=[],c=(0,r.Z)(a);try{for(c.s();!(s=c.n()).done;){var d=s.value,l=d.startLineNumber,h=d.endLineNumber;if(l!==h&&1===d.endColumn&&h--,1===l){if(l===h)continue}else l--;var f=C(o,n,l,h);u.push.apply(u,(0,i.Z)(f))}}catch(g){c.e(g)}finally{c.f()}u.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,u),t.pushUndoStop())}}}}]),n}(l.R6),Z=function(){function e(t,n){(0,o.Z)(this,e),this._initialSelection=n,this._edits=[],this._selectionId=null;var i,a=(0,r.Z)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.range&&"string"===typeof s.text&&this._edits.push(s)}}catch(u){a.e(u)}finally{a.f()}}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){var n,i=(0,r.Z)(this._edits);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.addEditOperation(g.e.lift(o.range),o.text)}}catch(s){i.e(s)}finally{i.f()}var a=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(a=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(a=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),a||(this._selectionId=t.trackSelection(this._initialSelection))}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}(),L=function(){function e(t){var n=this;(0,o.Z)(this,e),this.callOnDispose=new c.SL,this.callOnModel=new c.SL,this.editor=t,this.callOnDispose.add(t.onDidChangeConfiguration((function(){return n.update()}))),this.callOnDispose.add(t.onDidChangeModel((function(){return n.update()}))),this.callOnDispose.add(t.onDidChangeModelLanguage((function(){return n.update()})))}return(0,a.Z)(e,[{key:"update",value:function(){var e=this;this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(48)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;e.trigger(n)})))}},{key:"trigger",value:function(e){var t=this.editor.getSelections();if(!(null===t||t.length>1)){var n=this.editor.getModel();if(n&&n.isCheapToTokenize(e.getStartPosition().lineNumber)){for(var i=this.editor.getOption(9),r=n.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,u=[],c={shiftIndent:function(e){return h.U.shiftIndent(e,e.length+1,o,a,s)},unshiftIndent:function(e){return h.U.unshiftIndent(e,e.length+1,o,a,s)}},l=e.startLineNumber;l<=e.endLineNumber&&this.shouldIgnoreLine(n,l);)l++;if(!(l>e.endLineNumber)){var f=n.getLineContent(l);if(!/\S/.test(f.substring(0,e.startColumn-1))){var v=m.zu.getGoodIndentForLine(i,n,n.getLanguageId(),l,c);if(null!==v){var p=d.V8(f),_=k.Y(v,o);if(_!==k.Y(p,o)){var y=k.J(_,o,s);u.push({range:new g.e(l,1,l,p.length+1),text:y}),f=y+f.substr(p.length)}else{var b=m.zu.getIndentMetadata(n,l);if(0===b||8===b)return}}}for(var w=l;l<e.endLineNumber&&!/\S/.test(n.getLineContent(l+1));)l++;if(l!==e.endLineNumber){var C={getLineTokens:function(e){return n.getLineTokens(e)},getLanguageId:function(){return n.getLanguageId()},getLanguageIdAtPosition:function(e,t){return n.getLanguageIdAtPosition(e,t)},getLineContent:function(e){return e===w?f:n.getLineContent(e)}},S=m.zu.getGoodIndentForLine(i,C,n.getLanguageId(),l+1,c);if(null!==S){var D=k.Y(S,o),M=k.Y(d.V8(n.getLineContent(l+1)),o);if(D!==M)for(var N=D-M,I=l+1;I<=e.endLineNumber;I++){var R=n.getLineContent(I),P=d.V8(R),x=k.Y(P,o)+N,L=k.J(x,o,s);L!==P&&u.push({range:new g.e(I,1,I,P.length+1),text:L})}}}if(u.length>0){this.editor.pushUndoStop();var T=new Z(u,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",T),this.editor.pushUndoStop()}}}}}},{key:"shouldIgnoreLine",value:function(e,t){e.forceTokenization(t);var n=e.getLineFirstNonWhitespaceColumn(t);if(0===n)return!0;var i=e.getLineTokens(t);if(i.getCount()>0){var r=i.findTokenIndexAtOffset(n);if(r>=0&&1===i.getStandardTokenType(r))return!0}return!1}},{key:"dispose",value:function(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}]),e}();function T(e,t,n,i){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){for(var r="",o=0;o<n;o++)r+=" ";for(var a=new RegExp(r,"gi"),s=1,u=e.getLineCount();s<=u;s++){var c=e.getLineFirstNonWhitespaceColumn(s);if(0===c&&(c=e.getLineMaxColumn(s)),1!==c){var d=new g.e(s,1,s,c),l=e.getValueInRange(d),h=i?l.replace(/\t/gi,r):l.replace(a,"\t");t.addEditOperation(d,h)}}}}L.ID="editor.contrib.autoIndentOnPaste";var O=function(){function e(t,n){(0,o.Z)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),T(e,t,this.tabSize,!0)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}(),A=function(){function e(t,n){(0,o.Z)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,a.Z)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),T(e,t,this.tabSize,!1)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}();(0,l._K)(L.ID,L),(0,l.Qr)(S),(0,l.Qr)(D),(0,l.Qr)(N),(0,l.Qr)(I),(0,l.Qr)(R),(0,l.Qr)(P),(0,l.Qr)(x)}}]);
//# sourceMappingURL=monaco-editor-vendor.ec2afca6.bdcbfb6b.js.map